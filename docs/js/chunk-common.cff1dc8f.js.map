{"version":3,"file":"js/chunk-common.cff1dc8f.js","mappings":"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","sources":["webpack://gencalc/./src/calculate.ts","webpack://gencalc/./src/common.ts","webpack://gencalc/./src/i18n.ts","webpack://gencalc/./src/input.ts","webpack://gencalc/./src/master.ts","webpack://gencalc/./src/particlemaster.ts","webpack://gencalc/./src/components/ArtifactItem.vue?7abc","webpack://gencalc/./src/components/ArtifactItem.vue","webpack://gencalc/./src/components/ArtifactItem.vue?ce03","webpack://gencalc/./src/components/ArtifactSetSelect.vue?96cd","webpack://gencalc/./src/components/ArtifactSetSelect.vue","webpack://gencalc/./src/components/ArtifactSetSelect.vue?aaa4","webpack://gencalc/./src/components/CharacterSelect.vue?9536","webpack://gencalc/./src/components/CharacterSelect.vue","webpack://gencalc/./src/components/CharacterSelect.vue?237b","webpack://gencalc/./src/components/CompositionFunction.vue","webpack://gencalc/./src/components/CompositionFunction.vue?ba0e","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?fd95","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?c0a3","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue?d05e","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue?5a65","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?b3df","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?15e4","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?a906","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?6db7","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue","webpack://gencalc/./src/pages/TeamManager/ERCalculatorCommon.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFuncCharacter.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFuncWeapon.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFunc.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?9b31","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?8dd9"],"sourcesContent":["import _ from 'lodash';\r\nimport { isNumeric, overwriteObject } from '@/common';\r\nimport {\r\n    CHANGE_KIND_STATUS,\r\n    CHANGE_KIND_TALENT,\r\n    DAMAGE_RESULT_TEMPLATE,\r\n    getChangeKind,\r\n    getConditionOpkind,\r\n    getDefaultArtifactDetailInput,\r\n    getDefaultCharacterInput,\r\n    getDefaultConditionInput,\r\n    getDefaultDamageResultInput,\r\n    getDefaultStatsInput,\r\n    getStatValue,\r\n    loadRecommendation,\r\n    makeConditionExclusionMapFromStr,\r\n    makeDamageDetailObjArr,\r\n    makeDamageDetailObjArrObjArtifactSets,\r\n    makeDamageDetailObjArrObjCharacter,\r\n    makeDamageDetailObjArrObjWeapon,\r\n    makeTeamOptionDetailObjArr,\r\n    NUMBER_CONDITION_VALUE_RE,\r\n    setupConditionValues,\r\n    TArtifactDetailInput,\r\n    TArtifactStats,\r\n    TArtifactStatsKey,\r\n    TCharacterInput,\r\n    TConditionInput,\r\n    TConditionValues,\r\n    TDamageDetailObj,\r\n    TDamageResult,\r\n    TDamageResultElementalReaction,\r\n    TDamageResultEntry,\r\n    TOptionInput,\r\n    TStats,\r\n    TStatsInput,\r\n    updateNumberConditionValues,\r\n    TEMPLATE,\r\n    ARRAY,\r\n    ARRAY,\r\n    _ARRAY,\r\n    _ARRAY,\r\n    TEMPLATE,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n} from '@/input';\r\nimport {\r\n    ALL_ELEMENTS,\r\n    ARTIFACT_MAIN_MASTER,\r\n    ARTIFACT_SUB_MASTER,\r\n    DAMAGE_CATEGORY_ARRAY,\r\n    ELEMENTAL_REACTION_BASE_DAMAGE_MASTER,\r\n    ELEMENTAL_REACTION_MASTER,\r\n    ELEMENTAL_RESONANCE_MASTER,\r\n    getCharacterMasterDetail,\r\n    TArtifactMainRarity,\r\n    TArtifactMainStat,\r\n    TCharacterKey,\r\n    TEAM_OPTION_MASTER_LIST,\r\n} from '@/master';\r\n\r\nexport type TRotationDamageEntry = {\r\n    name: string;\r\n    category: string;\r\n    reactions: object[];\r\n    counts: number[];\r\n};\r\nexport type TRotationDamageInfo = {\r\n    totalDamage: number,\r\n    rotationDamages: TRotationDamageEntry[],\r\n};\r\nexport const REACTION_DMG_ARR = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const REACTION_DMG_ELEMENT_MAP = new Map<string, string>();\r\nfunction setupReactionDmgElementMap() {\r\n    REACTION_DMG_ARR.forEach((reactionDmg) => {\r\n        const reaction = reactionDmg.replace(/$/, '');\r\n        Object.keys(ELEMENTAL_REACTION_MASTER).forEach((element) => {\r\n            const reactionMaster = (ELEMENTAL_REACTION_MASTER as any)[element];\r\n            const workArr = Object.keys(reactionMaster);\r\n            if (workArr.includes(reaction)) {\r\n                if ('' in reactionMaster[reaction]) {\r\n                    REACTION_DMG_ELEMENT_MAP.set(reactionDmg, reactionMaster[reaction].);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\nsetupReactionDmgElementMap();\r\n\r\n/** [, ] => \\+?  */\r\nexport function getLevelStr(ascension: number, level: number): string {\r\n    return level + (ARRAY[ascension][0] == level ? '+' : '');\r\n}\r\n\r\n/** / */\r\nexport function getStatValueByLevel(statObj: any, ascension: number, level: number): number {\r\n    if (!statObj) return 0;\r\n    const myLevelStr = getLevelStr(ascension, level);\r\n    console.log(myLevelStr);\r\n    if (myLevelStr in statObj) {\r\n        return statObj[myLevelStr];\r\n    }\r\n    const lowLevel = ARRAY[ascension][0];\r\n    const highLevel = ARRAY[ascension][ARRAY[ascension].length - 1];\r\n    const lowValue = statObj[lowLevel + '+'];\r\n    const highValue = statObj[highLevel];\r\n    return lowValue + (highValue - lowValue) * (level - lowLevel) / (highLevel - lowLevel);\r\n}\r\n\r\n/** / */\r\nexport function getPropertyValueByLevel(statObj: any, ascension: number): number {\r\n    const lowLevel = ARRAY[ascension][0];\r\n    return statObj[lowLevel + '+'];\r\n}\r\n\r\nexport function getValueByLevel(level: number | string, valueObj: any): number {\r\n    if (level in valueObj) return valueObj[level];\r\n    level = Number(level);\r\n    const levelArr = Object.keys(valueObj).map(s => Number(s));\r\n    let lowLevel;\r\n    let highLevel;\r\n    for (let i = 0; i < levelArr.length - 1; i++) {\r\n        if (levelArr[i] <= level && levelArr[i + 1] >= level) {\r\n            lowLevel = levelArr[i];\r\n            highLevel = levelArr[i + 1];\r\n        }\r\n    }\r\n    if (!lowLevel || !highLevel) return 0;\r\n    return valueObj[lowLevel] + (valueObj[highLevel] - valueObj[lowLevel]) * (level - lowLevel) / (highLevel - lowLevel);\r\n}\r\n\r\n/**  */\r\nexport function calculateArtifactStatsMain(artifactStatsMain: any, mainstats: string[]) {\r\n    (Object.keys(artifactStatsMain) as (keyof typeof artifactStatsMain)[]).forEach(\r\n        (key) => {\r\n            artifactStatsMain[key] = 0;\r\n        }\r\n    );\r\n    for (const statWithRarity of mainstats) {\r\n        if (!statWithRarity) continue;\r\n        const stat: any[] = statWithRarity.split('_');\r\n        artifactStatsMain[stat[1]] += ARTIFACT_MAIN_MASTER[stat[0] as TArtifactMainRarity][stat[1] as TArtifactMainStat];\r\n    }\r\n}\r\n\r\n/**  */\r\nexport function calculateArtifactSubStatByPriority(\r\n    artifactStatsSub: TArtifactStats,\r\n    mainstats: string[],\r\n    prioritySubstats: string[],\r\n    priotritySubstatIndices: number[],\r\n    priotritySubstatValues: number[][],\r\n    prioritySubstatCounts: number[],\r\n) {\r\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach((key) => {\r\n        artifactStatsSub[key] = 0;\r\n    });\r\n    let totalCount = 0;\r\n    for (let i = 0; i < prioritySubstats.length; i++) {\r\n        if (!prioritySubstats[i]) continue;\r\n        if (priotritySubstatIndices[i] === undefined || priotritySubstatIndices[i] < 0) continue;\r\n        if (!prioritySubstatCounts[i]) continue;\r\n        artifactStatsSub[prioritySubstats[i] as TArtifactStatsKey] += priotritySubstatValues[i][priotritySubstatIndices[i]] * prioritySubstatCounts[i];\r\n        totalCount += prioritySubstatCounts[i];\r\n    }\r\n    // : 3 or 4\r\n    // : 5 (+4 +8 +12 +16 +20)\r\n    // +: min=40 max=45\r\n    const noPrioritySubstatArr = ARRAY.filter(s => !prioritySubstats.includes(s));\r\n    let noPriorityCount = Math.min(45, 40 + Math.floor(Math.max(0, (totalCount - 12) / 5)));\r\n    noPriorityCount -= Math.min(45, totalCount);\r\n    for (let i = noPriorityCount; i > 0; i--) {\r\n        const substat = noPrioritySubstatArr[i % noPrioritySubstatArr.length] as keyof typeof ARTIFACT_SUB_MASTER;\r\n        artifactStatsSub[substat] += ARTIFACT_SUB_MASTER[substat][3];\r\n    }\r\n    const star4Count = mainstats.filter(s => s && s.startsWith('4')).length;\r\n    const multiplier = 1 - (0.07 * star4Count); // 47%\r\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach(\r\n        (key) => {\r\n            artifactStatsSub[key] *= multiplier;\r\n            artifactStatsSub[key] = Math.round(artifactStatsSub[key] * 10) / 10;\r\n        }\r\n    );\r\n}\r\n\r\nexport function calculateArtifactStats(artifactDetailInput: TArtifactDetailInput) {\r\n    const artifactStats = artifactDetailInput.;\r\n    const artifactStatsMain = artifactDetailInput.;\r\n    const artifactStatsSub = artifactDetailInput.;\r\n    for (const stat of Object.keys(artifactStats)) {\r\n        (artifactStats as any)[stat] = 0;\r\n    }\r\n    for (const stat of Object.keys(artifactStatsMain)) {\r\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsMain as any)[stat];\r\n        else (artifactStats as any)[stat] = (artifactStatsMain as any)[stat];\r\n    }\r\n    for (const stat of Object.keys(artifactStatsSub)) {\r\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsSub as any)[stat];\r\n        else (artifactStats as any)[stat] = (artifactStatsSub as any)[stat];\r\n    }\r\n}\r\n\r\nfunction makeEvalableScript(\r\n    formula: string,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n) {\r\n    const replaceMap = new Map<string, string>();\r\n    const re = /\\$\\{(.+?)\\}/g;\r\n    let reRet;\r\n    while ((reRet = re.exec(formula)) !== null) {\r\n        const key = reRet[1];\r\n        if (!replaceMap.has(key)) {\r\n            let value;\r\n            if (key.includes('#')) {   // # \r\n                const arr = key.split('#');\r\n                if (arr.length === 2) {\r\n                    const major = arr[0];\r\n                    const minor = arr[1];\r\n                    if (major in damageResult) {\r\n                        const entryArr = (damageResult[major] as TDamageResultEntry[]).filter(s => s[0] == minor);\r\n                        if (entryArr.length) {\r\n                            value = String(entryArr[0][4]);  // \r\n                        }\r\n                    }\r\n                }\r\n                if (value === undefined) {\r\n                    console.warn(formula, damageResult, key);\r\n                    value = '0';\r\n                }\r\n            } else {    // \r\n                value = String(getStatValue(key, statsObj));\r\n            }\r\n            if (value !== undefined) {\r\n                replaceMap.set(key, value);\r\n            }\r\n        }\r\n    }\r\n    let result = formula;\r\n    replaceMap.forEach((value, key) => {\r\n        result = result.replaceAll('${' + key + '}', value);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function evalFormula(\r\n    formula: number | string | null | undefined,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null\r\n) {\r\n    let result = 0;\r\n    let script;\r\n    if (!formula) {\r\n        // nop\r\n    } else if (_.isNumber(formula)) {\r\n        result = formula;\r\n    } else {\r\n        script = makeEvalableScript(formula, statsObj, damageResult);\r\n        try {\r\n            result = eval(script);\r\n        } catch (error) {\r\n            console.error(error);\r\n            console.error(formula, statsObj, damageResult, script);\r\n        }\r\n    }\r\n    if (opt_max !== null) {\r\n        const max = evalFormula(opt_max, statsObj, damageResult);\r\n        result = Math.min(result, max);\r\n    }\r\n    if (opt_min !== null) {\r\n        const min = evalFormula(opt_min, statsObj, damageResult);\r\n        result = Math.max(result, min);\r\n    }\r\n    console.debug(formula, opt_max, opt_min, script, result);\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport const calculateStats = function (\r\n    statsInput: TStatsInput,\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput\r\n) {\r\n    if (!characterInput || !artifactDetailInput || !conditionInput || !optionInput) return;\r\n    try {\r\n        const characterMaster = characterInput.characterMaster;\r\n        const ascension = characterInput.;\r\n        const level = characterInput.;\r\n        const constellation = characterInput.;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n        const weaponAscension = characterInput.;\r\n        const weaponLevel = characterInput.;\r\n\r\n        const workStatsObj = _.cloneDeep(TEMPLATE);\r\n\r\n        workStatsObj[''] = ascension;\r\n        workStatsObj[''] = level;\r\n        workStatsObj[''] = constellation;\r\n        (workStatsObj as any)[''] = characterMaster.;\r\n\r\n        // \r\n        if ('' in characterMaster['']) {\r\n            workStatsObj[''] = Number(characterMaster['']['']);\r\n        }\r\n        if ('' in weaponMaster) {   // for \r\n            for (const name of Object.keys(weaponMaster[''])) {\r\n                if (name in conditionInput.conditionValues) {\r\n                    workStatsObj[name] = Number(conditionInput.conditionValues[name]);\r\n                } else {\r\n                    workStatsObj[name] = weaponMaster[''][name];\r\n                }\r\n            }\r\n        }\r\n        if ('' in characterMaster) {\r\n            for (const name of Object.keys(characterMaster[''])) {\r\n                if (name in conditionInput.conditionValues) {\r\n                    workStatsObj[name] = Number(conditionInput.conditionValues[name]);\r\n                } else {\r\n                    workStatsObj[name] = characterMaster[''][name];\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const stat of Object.keys(statsInput.enemyMaster).filter(s => s != 'key')) {\r\n            const toStat = '' + stat;\r\n            workStatsObj[toStat] = statsInput.enemyMaster[stat];\r\n        }\r\n\r\n        // \r\n        Object.keys(statsInput.statAdjustments).filter(s => !ARRAY.includes(s)).forEach(stat => {\r\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustments[stat];\r\n        });\r\n        Object.keys(statsInput.statAdjustmentsEx).filter(s => !ARRAY.includes(s)).forEach(stat => {\r\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustmentsEx[stat];\r\n        });\r\n\r\n        // \r\n        for (const stat of Object.keys(characterMaster[''])) {\r\n            if (ARRAY.includes(stat)) {\r\n                workStatsObj[stat] += getStatValueByLevel(characterMaster[''][stat], ascension, level);\r\n            } else {\r\n                const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\r\n                if (toStat in workStatsObj) {\r\n                    workStatsObj[toStat] += getPropertyValueByLevel(characterMaster[''][stat], ascension);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        if (weaponMaster['']) {\r\n            for (const stat of Object.keys(weaponMaster[''])) {\r\n                workStatsObj[stat] += getStatValueByLevel(weaponMaster[''][stat], weaponAscension, weaponLevel);\r\n            }\r\n        }\r\n\r\n        // \r\n        const artifactStats = artifactDetailInput.;\r\n        for (const stat of Object.keys(artifactStats)) {\r\n            const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\r\n            workStatsObj[toStat] += (artifactStats as any)[stat];\r\n        }\r\n\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n\r\n        if (optionInput) {\r\n            // \r\n            [optionInput.elementalResonance, optionInput.teamOption, optionInput.miscOption].forEach(optionObj => {\r\n                if (optionObj && optionObj.conditionAdjustments) {\r\n                    Object.keys(optionObj.conditionAdjustments).forEach(stat => {\r\n                        const workValue = optionObj.conditionAdjustments[stat];\r\n                        if (stat.endsWith('')) {\r\n                            if (['', '', ''].includes(characterMaster.)) {\r\n                                const my = stat.replace(/$/, '');\r\n                                _Var = my;\r\n                                _Var = my;\r\n                                _Var = my;\r\n                            }\r\n                        } else if (workValue !== null) {\r\n                            if (stat in workStatsObj) {\r\n                                workStatsObj[stat] += workValue;\r\n                            } else {\r\n                                workStatsObj[stat] = workValue;\r\n                            }\r\n                            if (stat.endsWith('V1') || stat.endsWith('V2') || stat.endsWith('V3')) {\r\n                                const toStat = stat.replace(/V[1-3]$/, '');\r\n                                if (toStat in workStatsObj) {\r\n                                    workStatsObj[toStat] += workValue;\r\n                                } else {\r\n                                    workStatsObj[toStat] = workValue;\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n\r\n        //  for \r\n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n            if (myDamageDetail && CHANGE_KIND_TALENT in myDamageDetail) {\r\n                for (const myDetailObj of myDamageDetail[CHANGE_KIND_TALENT]) {\r\n                    if (myDetailObj['']) {\r\n                        const number = checkConditionMatches(myDetailObj[''], validConditionValueArr, constellation);   // \r\n                        if (number === 0) continue;\r\n                    }\r\n                    if (myDetailObj[''] === '' && myDetailObj[''] && myDetailObj[''] !== null) {\r\n                        workStatsObj[myDetailObj['']] = evalFormula(myDetailObj[''], workStatsObj, DAMAGE_RESULT_TEMPLATE);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        calculateStatsTop(workStatsObj, optionInput);\r\n        // \r\n        ARRAY.forEach(stat => {\r\n            if (stat in statsInput.statAdjustments) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += statsInput.statAdjustments[stat];\r\n                }\r\n            }\r\n        });\r\n\r\n        // \r\n        const conditionAdjustments = updateStatsWithCondition(characterInput, validConditionValueArr, workStatsObj);\r\n\r\n        //  \r\n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n            if (myDamageDetail && CHANGE_KIND_TALENT in myDamageDetail) {\r\n                for (const myDetailObj of myDamageDetail[CHANGE_KIND_TALENT]) {\r\n                    if (myDetailObj['']) {\r\n                        const number = checkConditionMatches(myDetailObj[''], validConditionValueArr, constellation, workStatsObj, conditionInput.conditionValues);\r\n                        if (number === 0) continue;\r\n                    }\r\n                    if (myDetailObj[''] && myDetailObj[''].endsWith('')) {\r\n                        const my = myDetailObj[''].replace('', '');\r\n                        if (!myDetailObj['']) {\r\n                            _Var = my;\r\n                            _Var = my;\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        conditionInput. = [_Var, _Var, _Var];\r\n\r\n        overwriteObject(statsInput.statsObj, workStatsObj);\r\n        overwriteObject(conditionInput.conditionAdjustments, conditionAdjustments);\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nfunction updateStatsWithCondition(\r\n    characterInput: TCharacterInput,\r\n    validConditionValueArr: string[],\r\n    workStatsObj: TStats\r\n) {\r\n    const constellation = characterInput.;\r\n    const workConditionAdjustments = {} as { [key: string]: number };\r\n    const statFormulaMap: Map<string, any[]> = new Map();\r\n\r\n    for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n        if (myDamageDetail && CHANGE_KIND_STATUS in myDamageDetail) {\r\n            for (const myDetailObj of myDamageDetail[CHANGE_KIND_STATUS]) {\r\n                let hasCondition = false;\r\n                let my = myDetailObj[''];\r\n                if (my === null) {\r\n                    continue;\r\n                }\r\n                if (myDetailObj['']) {\r\n                    const number = checkConditionMatches(myDetailObj., validConditionValueArr, constellation, workStatsObj);\r\n                    if (my.includes('${INDEX}')) {\r\n                        my = my.replaceAll('${INDEX}', String(number));\r\n                    } else if (number === 0) {\r\n                        continue;\r\n                    } else {\r\n                        my = '(' + my + ')*' + number;\r\n                    }\r\n                    hasCondition = true;\r\n                }\r\n                let my = myDetailObj[''];\r\n                if (my) {\r\n                    if (myDetailObj['']) {\r\n                        my += '.' + myDetailObj[''];\r\n                    }\r\n                    if (my.indexOf('${') === -1 && my.indexOf('}') === -1) { // \r\n                        updateStatsWithConditionSub2(workConditionAdjustments, workStatsObj, my, my, myDetailObj., myDetailObj., hasCondition);\r\n                    } else {    // \r\n                        if (!statFormulaMap.has(my)) {\r\n                            statFormulaMap.set(my, []);\r\n                        }\r\n                        statFormulaMap.get(my)?.push([my, my, myDetailObj., myDetailObj., hasCondition]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    workStatsObj['HP'] += workStatsObj['HP'] + workStatsObj['HP+'];\r\n    workStatsObj['HP'] += (workStatsObj['HP'] * workStatsObj['HP%']) / 100;\r\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\r\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\r\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\r\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\r\n\r\n    const saveStatsObj = _.cloneDeep(workStatsObj);\r\n\r\n    const hpStatArr = ['HP', 'HP%', 'HP+', 'HP'];\r\n    const defStatArr = ['', '%', '+', ''];\r\n    const atkStatArr = ['', '%', '+', ''];\r\n    const otherStatArr = [..._ARRAY, '', ..._ARRAY, '', ...ARRAY, ...ARRAY, ...ARRAY, ''];\r\n    otherStatArr.push(...Array.from(statFormulaMap.keys()).filter(s => s.indexOf('.') != -1));\r\n\r\n    const formulaStatArr = [...new Set(Array.from(statFormulaMap.keys()).map(s => s.replace(/V[1-3]$/, '')))].filter(s => ![...hpStatArr, ...defStatArr, ...atkStatArr, ...otherStatArr].includes(s));\r\n    formulaStatArr.sort(compareFunction);\r\n\r\n    // HP\r\n    for (const stat of hpStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    if (workStatsObj['HP+'] != saveStatsObj['HP+']) {\r\n        workStatsObj['HP'] += workStatsObj['HP+'] - saveStatsObj['HP+'];\r\n    }\r\n    if (workStatsObj['HP%'] != saveStatsObj['HP%']) {\r\n        workStatsObj['HP'] += workStatsObj['HP'] * (workStatsObj['HP%'] - saveStatsObj['HP%']) / 100;\r\n    }\r\n\r\n    for (const stat of formulaStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // \r\n    for (const stat of defStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    if (workStatsObj['+'] != saveStatsObj['+']) {\r\n        workStatsObj[''] += workStatsObj['+'] - saveStatsObj['+'];\r\n    }\r\n    if (workStatsObj['%'] != saveStatsObj['%']) {\r\n        workStatsObj[''] += workStatsObj[''] * (workStatsObj['%'] - saveStatsObj['%']) / 100;\r\n    }\r\n\r\n    // \r\n    for (const stat of atkStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    if (workStatsObj['+'] != saveStatsObj['+']) {\r\n        workStatsObj[''] += workStatsObj['+'] - saveStatsObj['+'];\r\n    }\r\n    if (workStatsObj['%'] != saveStatsObj['%']) {\r\n        workStatsObj[''] += workStatsObj[''] * (workStatsObj['%'] - saveStatsObj['%']) / 100;\r\n    }\r\n\r\n    // \r\n    for (const stat of otherStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return workConditionAdjustments;\r\n}\r\n\r\nfunction updateStatsWithConditionSub(\r\n    workConditionAdjustments: TStats,\r\n    workStatsObj: TStats,\r\n    statFormulaMap: Map<string, any[]>,\r\n    formulaKey: string,\r\n) {\r\n    for (const formulaArr of [statFormulaMap.get(formulaKey), ...['V1', 'V2', 'V3'].map(s => statFormulaMap.get(formulaKey + s))]) {\r\n        if (!formulaArr) continue;\r\n        formulaArr.forEach(formula => {\r\n            const diffStats = updateStats(workStatsObj, formula[0], formula[1], formula[2], formula[3]);\r\n            for (const stat of Object.keys(diffStats)) {\r\n                if (ARRAY.includes(stat + 'TOP')) {\r\n                    const statValue = getStatValue(stat + 'X7', workStatsObj);\r\n                    const topValue = workStatsObj[stat + 'TOP'];\r\n                    if (statValue !== undefined && topValue !== undefined) {\r\n                        if (statValue > topValue) {\r\n                            workStatsObj[stat + 'TOP'] = statValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (formula[4]) {\r\n                for (const stat of Object.keys(diffStats)) {\r\n                    if (stat in workConditionAdjustments) {\r\n                        workConditionAdjustments[stat] += diffStats[stat];\r\n                    } else {\r\n                        workConditionAdjustments[stat] = diffStats[stat];\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nfunction updateStatsWithConditionSub2(\r\n    workConditionAdjustments: TStats,\r\n    workStatsObj: TStats,\r\n    kind: string,\r\n    formula: string,\r\n    maxFormula: string | null,\r\n    minFormula: string | null,\r\n    hasCondition = false,\r\n) {\r\n    const diffStats = updateStats(workStatsObj, kind, formula, maxFormula, minFormula);\r\n    for (const stat of Object.keys(diffStats)) {\r\n        if (ARRAY.includes(stat + 'TOP')) {\r\n            const statValue = getStatValue(stat + 'X7', workStatsObj);\r\n            const topValue = workStatsObj[stat + 'TOP'];\r\n            if (statValue !== undefined && topValue !== undefined) {\r\n                if (statValue > topValue) {\r\n                    workStatsObj[stat + 'TOP'] = statValue;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (hasCondition) {\r\n        for (const stat of Object.keys(diffStats)) {\r\n            if (stat in workConditionAdjustments) {\r\n                workConditionAdjustments[stat] += diffStats[stat];\r\n            } else {\r\n                workConditionAdjustments[stat] = diffStats[stat];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction compareFunction(a: string, b: string) {\r\n    const arr = ['', '', '', '', '', '', ''];\r\n    const lowestArr = [''];\r\n    let aIndex = arr.indexOf(a);\r\n    if (lowestArr.indexOf(a) >= 0) {\r\n        aIndex = arr.length + 1;\r\n    }\r\n    let bIndex = arr.indexOf(b);\r\n    if (lowestArr.indexOf(b) >= 0) {\r\n        bIndex = arr.length + 1;\r\n    }\r\n    return (aIndex != -1 ? aIndex : arr.length) - (bIndex != -1 ? bIndex : arr.length);\r\n}\r\n\r\nexport function calculateElementalResonance(\r\n    conditionValues: TConditionValues,\r\n    conditionInput: TConditionInput,\r\n): TStats {\r\n    const result: TStats = {};\r\n    const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n    for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\r\n        if (!conditionValues[key]) continue;\r\n        const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\r\n        if (master.) {\r\n            for (const detailObj of master.) {\r\n                if (detailObj.) {\r\n                    const matchRet = checkConditionMatches(detailObj., validConditionValueArr, 0);\r\n                    if (matchRet === 0) continue;\r\n                }\r\n                if (detailObj. && detailObj.) {\r\n                    if (detailObj. in result) {\r\n                        result[detailObj.] += detailObj.;\r\n                    } else {\r\n                        result[detailObj.] = detailObj.;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (key == '' && conditionValues.dendroOption) {\r\n            result[''] += Number(conditionValues.dendroOption);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n// /**  */\r\n// function calculateFormulaArray(\r\n//     formulaArr: any,\r\n//     statsObj: TStats,\r\n//     damageResult: TDamageResult,\r\n//     opt_max: number | string | Array<number | string> | null = null,\r\n//     opt_min: number | string | Array<number | string> | null = null\r\n// ): number {\r\n//     try {\r\n//         let result = 0;\r\n//         if (Array.isArray(formulaArr)) {\r\n//             let operator: string | null = null;\r\n//             for (const entry of formulaArr) {\r\n//                 let subResult = 0;\r\n//                 if (['+', '-', '*', '/'].includes(entry)) {\r\n//                     operator = entry;\r\n//                     continue;\r\n//                 } else if (isNumeric(entry)) {\r\n//                     subResult = Number(entry);\r\n//                 } else if (Array.isArray(entry)) {\r\n//                     subResult = calculateFormulaArray(entry, statsObj, damageResult);\r\n//                 } else if (entry.indexOf('#') != -1) {\r\n//                     const nameArr = entry.split('#');\r\n//                     if (damageResult && nameArr[0] in damageResult) {\r\n//                         const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\r\n//                         let damage = null;\r\n//                         for (const damageArr of damageArrArr) {\r\n//                             if (nameArr[1] == damageArr[0]) {\r\n//                                 damage = damageArr[4];  // \r\n//                                 break;\r\n//                             }\r\n//                         }\r\n//                         if (damage != null) {\r\n//                             subResult = damage;\r\n//                         } else {\r\n//                             console.error(formulaArr, statsObj, damageResult, opt_max, opt_min, entry);\r\n//                         }\r\n//                     }\r\n//                 } else {\r\n//                     const temp = getStatValue(entry, statsObj);\r\n//                     if (temp === undefined) {\r\n//                         console.error(formulaArr, statsObj, null, opt_max, opt_min, entry);\r\n//                     } else {\r\n//                         subResult = temp;\r\n//                     }\r\n//                 }\r\n//                 if (operator == null) {\r\n//                     result += subResult;\r\n//                 } else {\r\n//                     switch (operator) {\r\n//                         case '+':\r\n//                             result += subResult;\r\n//                             break;\r\n//                         case '-':\r\n//                             result -= subResult;\r\n//                             break;\r\n//                         case '*':\r\n//                             result *= subResult;\r\n//                             result = Math.floor(result * 100) / 100;\r\n//                             break;\r\n//                         case '/':\r\n//                             result /= subResult;\r\n//                             break;\r\n//                     }\r\n//                 }\r\n//             }\r\n//         } else if (isNumeric(formulaArr)) {\r\n//             result = Number(formulaArr);\r\n//         } else if (formulaArr.indexOf('#') != -1) {\r\n//             const nameArr = formulaArr.split('#');\r\n//             if (damageResult && nameArr[0] in damageResult) {\r\n//                 const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\r\n//                 for (const damageArr of damageArrArr) {\r\n//                     if (nameArr[1] == damageArr[0]) {\r\n//                         result = damageArr[4];  // \r\n//                         break;\r\n//                     }\r\n//                 }\r\n//             }\r\n//         } else {\r\n//             const temp = getStatValue(formulaArr, statsObj);\r\n//             if (temp !== undefined) {\r\n//                 result = temp;\r\n//             } else {\r\n//                 console.error(formulaArr, statsObj, null, opt_max, opt_min);\r\n//                 result = 0; // \r\n//             }\r\n//         }\r\n//         if (opt_max != null) {\r\n//             const maxValue = calculateFormulaArray(opt_max, statsObj, damageResult);\r\n//             result = Math.min(result, maxValue);\r\n//         }\r\n//         if (opt_min != null) {\r\n//             const minValue = calculateFormulaArray(opt_min, statsObj, damageResult);\r\n//             result = Math.max(result, minValue);\r\n//         }\r\n//         return result;\r\n//     } catch (error) {\r\n//         console.error(error);\r\n//         console.error(formulaArr, statsObj, damageResult, opt_max, opt_min);\r\n//         throw error;\r\n//     }\r\n// }\r\n\r\n/**  */\r\nexport function calculateDamageResult(\r\n    damageResult: TDamageResult,\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    statsInput: TStatsInput,\r\n) {\r\n    try {\r\n        if (!characterInput) return;\r\n        if (!conditionInput) return;\r\n        if (!statsInput) return;\r\n        const characterMaster = characterInput.characterMaster;\r\n        const constellation = characterInput[''];\r\n        const vision = characterMaster[''];\r\n\r\n        // \r\n        const reactionResult = _.cloneDeep(TEMPLATE);\r\n        const reactionMasterArr = [];\r\n        const dmgElementSet = new Set<string>();\r\n        dmgElementSet.add(vision); // \r\n        if (conditionInput.selectList.filter(s => s.name == '').length) {\r\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\r\n            const selectedIndex = conditionInput.conditionValues[''] as number;\r\n            if (selectedIndex) {\r\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\r\n                dmgElementSet.add(dmgElement); // \r\n            }\r\n        }\r\n        if (conditionInput.selectList.filter(s => s.name == '').length) {\r\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\r\n            const selectedIndex = conditionInput.conditionValues[''] as number;\r\n            if (selectedIndex) {\r\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\r\n                dmgElementSet.add(dmgElement); // \r\n            }\r\n        }\r\n        for (const dmgElement of conditionInput.) {\r\n            if (dmgElement && dmgElement != '') {\r\n                dmgElementSet.add(dmgElement); // //\r\n            }\r\n        }\r\n        if (characterInput.character == '') {\r\n            for (const dmgElement of ['', '', '', '']) {\r\n                const key = '[]' + dmgElement + '';\r\n                if (conditionInput.selectList.filter(s => s.name == key).length) {\r\n                    const selectedIndex = conditionInput.conditionValues[key] as number;\r\n                    if (selectedIndex) {\r\n                        dmgElementSet.add(dmgElement);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (const dmgElement of dmgElementSet) {\r\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\r\n        }\r\n        let has = false;\r\n        if (characterMaster. == '' || characterMaster. == '') {\r\n            has = true;\r\n        } else {\r\n            const characterArr = (ELEMENTAL_REACTION_MASTER as any).?.?.;\r\n            if (characterArr && characterArr.includes(characterMaster.)) {\r\n                has = true;\r\n            }\r\n        }\r\n        if (has) {\r\n            const dmgElement = '';\r\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\r\n        }\r\n        reactionResult[''] = vision;\r\n        reactionMasterArr.forEach(entry => {\r\n            const element = entry[0];\r\n            const reactionMaster = entry[1];\r\n            Object.keys(reactionMaster).forEach(reaction => {\r\n                const reactionObj = reactionMaster[reaction];\r\n                let resultValue = 0;\r\n                if (reaction == '') {\r\n                    resultValue = calculate(element, statsInput.statsObj);\r\n                } else if (reaction == '') {\r\n                    let dmgElement = '';\r\n                    for (const entry of conditionInput.selectList) {\r\n                        if (entry.name == '') {\r\n                            const optionValue = entry.options[Number(conditionInput.conditionValues[''])];\r\n                            if (optionValue) dmgElement = optionValue.replace(/$/, '');\r\n                            break;\r\n                        }\r\n                    }\r\n                    reactionResult[''] = dmgElement;\r\n                    resultValue = calculate(reaction, element, statsInput.statsObj, dmgElement);\r\n                } else {\r\n                    switch (reactionObj['']) {\r\n                        case '':    //  \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                        case '':    //    \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                        case '':    //  \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                    }\r\n                }\r\n                ['', '', ''].forEach(suffix => {\r\n                    let key = reaction + suffix;\r\n                    if (suffix === '') {\r\n                        key += '_' + element;\r\n                    }\r\n                    if (key in reactionResult) {\r\n                        (reactionResult as any)[key] = resultValue;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        Object.keys(reactionResult).filter(s => s.endsWith('') && s.indexOf('') == -1).forEach(dmg => {\r\n            ['', ''].forEach(stat => {\r\n                const key = dmg + stat;\r\n                if (key in statsInput.statsObj) {\r\n                    (reactionResult as any)[key] = statsInput.statsObj[key];\r\n                }\r\n            });\r\n            if (dmg.startsWith('')) { // for \r\n                const critRateKey = dmg + '';\r\n                let critRate = Math.min(100, statsInput.statsObj['']);\r\n                if (critRateKey in reactionResult && (reactionResult as any)[critRateKey]) {\r\n                    critRate *= (reactionResult as any)[critRateKey] / 100;\r\n                }\r\n                (reactionResult as any)[critRateKey] = critRate;\r\n                const critDmgKey = dmg + '';\r\n                let critDmg = statsInput.statsObj[''];\r\n                if (critDmgKey in reactionResult && (reactionResult as any)[critDmgKey]) {\r\n                    critDmg *= (reactionResult as any)[critDmgKey] / 100;\r\n                }\r\n                (reactionResult as any)[critDmgKey] = critDmg;\r\n            }\r\n        });\r\n        overwriteObject(damageResult., reactionResult);\r\n\r\n        // \r\n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n\r\n        const damageDetailMyCharacter = characterInput.damageDetailMyCharacter;\r\n        const damageDetailMyWeapon = characterInput.damageDetailMyWeapon;\r\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\r\n\r\n        if (Array.isArray(damageResult[''])) {\r\n            damageResult[''].splice(0, damageResult[''].length);\r\n        }\r\n\r\n        if (damageDetailMyCharacter) {\r\n            for (const category of ['', '', '']) {\r\n                damageResult[category] = [];\r\n                if (!(category in damageDetailMyCharacter)) continue;\r\n                const element = conditionInput.[['', '', ''].indexOf(category)];\r\n                let talentDetailArr = (damageDetailMyCharacter as any)[category];\r\n                if (('' + category) in damageDetailMyCharacter) {\r\n                    const workObj = (damageDetailMyCharacter as any)['' + category];\r\n                    if (checkConditionMatches(workObj[''], validConditionValueArr, constellation, statsInput.statsObj, conditionInput.conditionValues) !== 0) {\r\n                        talentDetailArr = workObj[''];\r\n                    }\r\n                }\r\n                for (const talentDetail of talentDetailArr) {\r\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation, statsInput.statsObj, conditionInput.conditionValues) === 0) {\r\n                        continue;\r\n                    }\r\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult, element);\r\n                    (damageResult[category] as any).push(resultArr);\r\n                }\r\n                if (category == '') {\r\n                    let n = 0;\r\n                    const sum = ['', null, 0, 0, 0, null, 0, 0, 1] as TDamageResultEntry;\r\n                    for (const entry of damageResult[category]) {\r\n                        if ((entry[0].endsWith('') || [''].includes(entry[0])) && !entry[0].startsWith('_')) {  // \r\n                            sum[1] = entry[1];\r\n                            sum[2] += entry[2];\r\n                            if (entry[3] == null) sum[3] = null;\r\n                            else if (sum[3] != null) sum[3] += entry[3];\r\n                            sum[4] += entry[4];\r\n                            if (sum[6] != null) {   // HIT\r\n                                if (entry[6]) sum[6] += entry[6];\r\n                                else sum[6]++;\r\n                            }\r\n                            sum[7] = entry[7];  // \r\n                            sum[8] = entry[8];  // \r\n                            n++;\r\n                        }\r\n                    }\r\n                    if (n > 0) {\r\n                        damageResult[category].splice(n, 0, sum);\r\n                    }\r\n                }\r\n            }\r\n            for (const category of ['', '', '']) {\r\n                damageResult[category] = [];\r\n                if (!(category in damageDetailMyCharacter)) continue;\r\n                const talentDetailArr = (damageDetailMyCharacter as any)[category];\r\n                for (const talentDetail of talentDetailArr) {\r\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation, statsInput.statsObj, conditionInput.conditionValues) === 0) {\r\n                        continue;\r\n                    }\r\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\r\n                    (damageResult[category] as TDamageResultEntry[]).push(resultArr);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const myDamageDetail of [damageDetailMyWeapon, damageDetailMyArtifactSets]) {\r\n            const category = '';\r\n            if (!myDamageDetail || !(category in myDamageDetail)) continue;\r\n            const talentDetailArr = (myDamageDetail as any)[category];\r\n            for (const talentDetail of talentDetailArr) {\r\n                if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation, statsInput.statsObj, conditionInput.conditionValues) === 0) {\r\n                    continue;\r\n                }\r\n                const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\r\n                (damageResult[category] as TDamageResultEntry[]).push(resultArr);\r\n            }\r\n        }\r\n\r\n        // \r\n        const damageTakenArr = [] as any;\r\n        for (const stat of _ARRAY) {\r\n            const element = stat.replace(/$/, '').replace(/$/, '');\r\n            const damageTaken = calculateDamageTaken(statsInput.statsObj, 10000, element);\r\n            damageTakenArr.push({ key: element, value: damageTaken });\r\n        }\r\n        damageResult[''] = damageTakenArr;\r\n\r\n        // \r\n        const resScoreArr = [] as any;\r\n        for (const damageTaken of damageTakenArr) {\r\n            resScoreArr.push({ key: damageTaken.key, value: statsInput.statsObj['HP'] * 10000 / damageTaken.value });\r\n        }\r\n        damageResult[''] = resScoreArr;\r\n\r\n        console.debug('damageResult', damageResult);\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(damageResult, characterInput, conditionInput, statsInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function calculateDamageResultLunarReaction(\r\n    damageResult: TDamageResult,\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const allMap = new Map<string, TDamageResultEntry[]>();\r\n\r\n    if (damageResult?.) {\r\n        Object.keys(damageResult.).forEach(key => {\r\n            let value = (damageResult. as any)[key];\r\n            if (key.endsWith('ALL') && _.isArray(value)) {\r\n                key = key.replace(/ALL$/, '');\r\n                const template: TDamageResultEntry[] = [];\r\n                const work = damageResult. as any;\r\n                template.push(makeTDamageResultEntry(characterInput.character, null, work[key], work[key + ''], work[key + '']));\r\n                value = template;\r\n                allMap.set(key, value);\r\n            }\r\n        })\r\n    }\r\n    if (optionInput?.teamMembers) {\r\n        for (const member of optionInput.teamMembers) {\r\n            if (member == characterInput.character) {\r\n                continue;\r\n            }\r\n            const supporter = optionInput.supporters[member];\r\n            if (supporter?.damageResult?.) {\r\n                allMap.forEach((value, key) => {\r\n                    const work = supporter.damageResult. as any;\r\n                    value.push(makeTDamageResultEntry(member, null, work[key], work[key + ''], work[key + '']));\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    allMap.forEach((value, key) => {\r\n        (damageResult. as any)[key + 'ALL'].splice(0, value.length, ...value);\r\n    })\r\n}\r\n\r\nfunction makeTDamageResultEntry(name: string, element: string | null, nonCrit: number, critRate: number, critDmg: number, type: string | null = null): TDamageResultEntry {\r\n    const crit = nonCrit * (1 + critDmg / 100);\r\n    critRate = Math.min(100, critRate);\r\n    const expectedValue = nonCrit * critRate / 100 * (1 + critDmg / 100) + (1 - critRate / 100) * nonCrit;\r\n    const result: TDamageResultEntry = [name, element, expectedValue, crit, nonCrit, type, null, null, null];  // 0:, 1:, 2:, 3:, 4:, 5:, 6:HIT, 7:, 8:\r\n    return result;\r\n}\r\n\r\nexport function makeValidConditionValueArr(conditionInput: TConditionInput) {\r\n    try {\r\n        const result = [] as string[];\r\n        if (!conditionInput) return result;\r\n        const checkboxList = conditionInput.checkboxList;\r\n        if (checkboxList) {\r\n            checkboxList.forEach((entry: any) => {\r\n                if (conditionInput.conditionValues[entry.name]) {\r\n                    result.push(entry.name);\r\n                }\r\n            });\r\n        }\r\n        const selectList = conditionInput.selectList;\r\n        if (selectList) {\r\n            selectList.forEach((entry: any) => {\r\n                const value = conditionInput.conditionValues[entry.name];\r\n                if (_.isNumber(value)) {\r\n                    if (value > 0 || (value === 0 && entry.required)) {\r\n                        result.push(entry.name + '@' + entry.options[value]);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const numberList = conditionInput.numberList;\r\n        if (numberList) {\r\n            numberList.forEach((entry: any) => {\r\n                const value = conditionInput.conditionValues[entry.name];\r\n                if (_.isNumber(value)) {\r\n                    result.push(entry.name + '=' + value);\r\n                }\r\n            });\r\n        }\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(conditionInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function checkConditionMatches(\r\n    conditionStr: string,\r\n    validConditionValueArr: string[],\r\n    constellation: number,\r\n    statsObj: TStats = {},\r\n    conditionValues: TConditionValues = {},\r\n): number {\r\n    const myCondStr = conditionStr.split('^')[0];\r\n\r\n    if (myCondStr.indexOf('|') !== -1) {  // |OR\r\n        const myCondStrArr = myCondStr.split('|');\r\n        for (let i = 0; i < myCondStrArr.length; i++) {\r\n            const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation, statsObj, conditionValues);\r\n            if (resultSub === 1) {\r\n                return 1;   // \r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    const myCondStrArr = myCondStr.split('&');    // &AND\r\n    let result = 1;\r\n    for (let i = 0; i < myCondStrArr.length; i++) {\r\n        const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation, statsObj, conditionValues);\r\n        if (resultSub === 0) {\r\n            return 0;   // \r\n        }\r\n        if (resultSub !== 1) {\r\n            result = resultSub;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction checkConditionMatchesSub(\r\n    conditionStr: string,\r\n    validConditionValueArr: string[],\r\n    constellation: number,\r\n    statsObj: TStats,\r\n    conditionValues: TConditionValues,\r\n): number {\r\n    const opkind = getConditionOpkind(conditionStr);\r\n    const conditionKeyValArr = opkind ? conditionStr.split(opkind) : [conditionStr];\r\n    const conditionKey = conditionKeyValArr[0];\r\n    let conditionVal: number | string | undefined = conditionKeyValArr.length === 2 ? conditionKeyValArr[1] : undefined;\r\n    if (opkind === undefined) {\r\n        return validConditionValueArr.filter(s => s.split('@')[0] == conditionKey).length > 0 ? 1 : 0;\r\n    }\r\n    if (!conditionVal) {\r\n        console.error(conditionStr, validConditionValueArr, constellation, statsObj);\r\n        return 0;\r\n    }\r\n    if (conditionKey === '') {\r\n        if (isNumeric(conditionVal)) {\r\n            conditionVal = Number(conditionVal);\r\n            if (opkind === '>=' || opkind === '@') {\r\n                return constellation >= conditionVal ? 1 : 0;\r\n            } else if (opkind === '<=') {\r\n                return constellation <= conditionVal ? 1 : 0;\r\n            } else if (opkind === '>') {\r\n                return constellation > conditionVal ? 1 : 0;\r\n            } else if (opkind === '<') {\r\n                return constellation < conditionVal ? 1 : 0;\r\n            } else if (opkind === '=') {\r\n                return constellation == conditionVal ? 1 : 0;\r\n            }\r\n        }\r\n    } else if (opkind === '@') {\r\n        const re = new RegExp('([^0-9]*?)([\\\\-0-9\\\\.]+)(.*)');    // ={prefix}{}{postfix}\r\n        for (let i = 0; i < validConditionValueArr.length; i++) {\r\n            if (validConditionValueArr[i].startsWith(conditionKey + '@')) {\r\n                const tempArr = validConditionValueArr[i].split('@');\r\n                const reRet = re.exec(tempArr[1]);\r\n                if (reRet) {\r\n                    let tempVal = conditionVal;\r\n                    if (reRet[1]) tempVal = tempVal.substring(reRet[1].length);\r\n                    if (reRet[3]) tempVal = tempVal.substring(0, tempVal.length - reRet[3].length);\r\n                    tempVal = tempVal.replace(/\\/.+/, '');\r\n                    const tempValArr = tempVal.split(/[,-]/);\r\n                    const fromVal = Number(tempValArr[0]);\r\n                    const toVal = Number(tempValArr[tempValArr.length - 1]);\r\n                    const actualVal = Number(reRet[2]);\r\n                    if (fromVal <= actualVal && actualVal <= toVal) {\r\n                        return actualVal;   //  \r\n                    }\r\n                }\r\n            }\r\n        }\r\n    } else if (opkind === '=') {\r\n        if (validConditionValueArr.includes(conditionKey + '@' + conditionVal)) {\r\n            return 1;   // \r\n        }\r\n        if (NUMBER_CONDITION_VALUE_RE.test(conditionVal)) { // \r\n            const tempArr = validConditionValueArr.filter(s => s.split('=')[0] == conditionKey);\r\n            if (tempArr.length > 0) {\r\n                return Number(tempArr[0].split('=')[1]);   //  \r\n            }\r\n        }\r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] == Number(conditionVal) ? 1 : 0;\r\n        }\r\n    } else if (opkind === '>=') {    // \r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] >= Number(conditionVal) ? 1 : 0;\r\n        }\r\n        if (conditionVal.startsWith('index_')) {    // selectListindex\r\n            conditionVal = conditionVal.replace(/^index_/, '');\r\n            if (isNumeric(conditionVal) && conditionKey in conditionValues) {\r\n                const actualVal = conditionValues[conditionKey];\r\n                if (_.isNumber(actualVal) && actualVal >= Number(conditionVal)) {\r\n                    return 1;   // \r\n                }\r\n            }\r\n        }\r\n    } else if (opkind === '<=') {    // \r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] <= Number(conditionVal) ? 1 : 0;\r\n        }\r\n        if (conditionVal.startsWith('index_')) {    // selectListindex\r\n            conditionVal = conditionVal.replace(/^index_/, '');\r\n            if (isNumeric(conditionVal) && conditionKey in conditionValues) {\r\n                const actualVal = conditionValues[conditionKey];\r\n                if (_.isNumber(actualVal) && actualVal <= Number(conditionVal)) {\r\n                    return 1;   // \r\n                }\r\n            }\r\n        }\r\n    } else if (opkind === '>') {     // \r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] > Number(conditionVal) ? 1 : 0;\r\n        }\r\n        if (conditionVal.startsWith('index_')) {    // selectListindex\r\n            conditionVal = conditionVal.replace(/^index_/, '');\r\n            if (isNumeric(conditionVal) && conditionKey in conditionValues) {\r\n                const actualVal = conditionValues[conditionKey];\r\n                if (_.isNumber(actualVal) && actualVal > Number(conditionVal)) {\r\n                    return 1;   // \r\n                }\r\n            }\r\n        }\r\n    } else if (opkind === '<') {     // \r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] < Number(conditionVal) ? 1 : 0;\r\n        }\r\n        if (conditionVal.startsWith('index_')) {    // selectListindex\r\n            conditionVal = conditionVal.replace(/^index_/, '');\r\n            if (isNumeric(conditionVal) && conditionKey in conditionValues) {\r\n                const actualVal = conditionValues[conditionKey];\r\n                if (_.isNumber(actualVal) && actualVal < Number(conditionVal)) {\r\n                    return 1;   // \r\n                }\r\n            }\r\n        }\r\n    }\r\n    return 0;   // \r\n}\r\n\r\n/**  */\r\nfunction calculate(\r\n    reaction: any,\r\n    element: string,\r\n    statsObj: any,\r\n) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        let result = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        result *= 1 + (25 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction calculate(\r\n    reaction: any,\r\n    element: string,\r\n    statsObj: TStats,\r\n    opt_dmgElement?: string,\r\n) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const baseDmgUp = statsObj[reaction + ''] ?? 0;\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        const dmgUp = statsObj[reaction + ''] ?? 0;\r\n        const dmgElement = opt_dmgElement ?? (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        const multiplier = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        const baseDmg = getValueByLevel(level, ELEMENTAL_REACTION_BASE_DAMAGE_MASTER);\r\n        let result = baseDmg * multiplier * (1 + baseDmgUp / 100);\r\n        if (reaction.startsWith('')) {\r\n            result *= 1 + (6 * elementalMastery / (elementalMastery + 2000)) + dmgBuff / 100;\r\n        } else {\r\n            result *= 1 + (16 * elementalMastery / (elementalMastery + 2000)) + dmgBuff / 100;\r\n        }\r\n        result += dmgUp;\r\n        result *= calculateEnemyRes(dmgElement, statsObj);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj, opt_dmgElement);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculate(element: string, statsObj: TStats) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[''] ?? 0;\r\n        const multiplier = (ELEMENTAL_REACTION_MASTER as any)[element][''][''];\r\n        const baseDmg = getValueByLevel(level, ELEMENTAL_REACTION_BASE_DAMAGE_MASTER);\r\n        let result = baseDmg * multiplier;\r\n        result *= 1 + (40 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculate(reaction: any, element: string, statsObj: TStats) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        const dmgElement = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        const multiplier = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        const baseDmg = getValueByLevel(level, ELEMENTAL_REACTION_BASE_DAMAGE_MASTER);\r\n        let result = baseDmg * multiplier;\r\n        result *= 1 + (5 * elementalMastery / (elementalMastery + 1200)) + dmgBuff / 100;\r\n        result *= calculateEnemyRes(dmgElement, statsObj);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nexport function calculateEnemyDef(statsObj: TStats, opt_ignoreDef = 0) { // , \r\n    try {\r\n        const level = statsObj[''] ?? 0;\r\n        const enemyLevel = statsObj[''] ?? 0;\r\n        const calcIgnoreDef = opt_ignoreDef / 100;\r\n        const calcDef = Math.max(-100, statsObj[''] ?? 0) / 100;    //  -100%\r\n        const result = (level + 100) / ((1 - calcIgnoreDef) * (1 + calcDef) * (enemyLevel + 100) + level + 100);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(statsObj, opt_ignoreDef);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/** () */\r\nfunction calculateRes(res: number) {\r\n    if (res == Infinity) return 0;  // \r\n    let result = res;\r\n    if (result < 0) {\r\n        result = 100 - result / 2;\r\n    } else if (result < 75) {\r\n        result = 100 - result;\r\n    } else {\r\n        result = 10000 / (4 * result + 100)\r\n    }\r\n    result /= 100;\r\n    return result;\r\n}\r\n\r\n/** () */\r\nexport function calculateEnemyRes(element: string, statsObj: TStats) {\r\n    try {\r\n        const statName = '' + element + (element != '' ? '' : '') + '';\r\n        const result = calculateRes(statsObj[statName] ?? 0);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculateDamageFromDetail(\r\n    detailObj: any,\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    opt_element: string | null = null\r\n): TDamageResultEntry {\r\n    try {\r\n        const myArr = [] as Array<string>;\r\n        let isCalc = true;\r\n        let isCalc = true;\r\n        let isCalc = true;\r\n        let my = detailObj[''] != null ? detailObj[''] : opt_element != null ? opt_element : null;\r\n        let my = 0; // for \r\n        let my = 0; // for \r\n        const myHIT = detailObj['HIT'] != null ? Number(detailObj['HIT']) : 1;\r\n        const my = {} as { [key: string]: number };\r\n\r\n        const constellation = statsObj[''];\r\n        const talentChangeDetailObjArr = getChangeDetailObjArr(characterInput, CHANGE_KIND_TALENT);\r\n\r\n        let validConditionValueArr = makeValidConditionValueArr(conditionInput);  // \r\n        const myConditionValuesAfter = _.cloneDeep(conditionInput.conditionValues);\r\n\r\n        if (detailObj['']) {\r\n            for (const delCondition of detailObj['']) {\r\n                let work = delCondition;\r\n                if (_.isPlainObject(delCondition)) {\r\n                    work = delCondition.;\r\n                }\r\n                if (work in myConditionValuesAfter) {\r\n                    if (isNumeric(myConditionValuesAfter[work])) {\r\n                        myConditionValuesAfter[work] = 0;\r\n                    } else if (_.isBoolean(myConditionValuesAfter[work])) {\r\n                        myConditionValuesAfter[work] = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (detailObj['']) {\r\n            for (const addCondition of detailObj['']) {\r\n                if (_.isString(addCondition)) {\r\n                    if (addCondition in myConditionValuesAfter) {\r\n                        if (_.isBoolean(myConditionValuesAfter[addCondition])) {\r\n                            myConditionValuesAfter[addCondition] = true;\r\n                        }\r\n                    }\r\n                } else if (_.isPlainObject(addCondition)) {\r\n                    if (addCondition. in myConditionValuesAfter) {\r\n                        let newValue = myConditionValuesAfter[addCondition.];\r\n                        if ('' in addCondition) {\r\n                            if (_.isString(addCondition.)) {\r\n                                const work = String(addCondition.).replace(/^\\+/, '');\r\n                                (newValue as number) += Number(work);\r\n                            } else if (isNumeric(addCondition.)) {\r\n                                newValue = addCondition.;\r\n                            } else {\r\n                                newValue = addCondition.;\r\n                            }\r\n                            if (newValue !== null && isNumeric(newValue)) {\r\n                                if ((newValue as number) < 0) {\r\n                                    newValue = 0;\r\n                                } else {\r\n                                    conditionInput.selectList.filter(s => s.name == addCondition.).forEach(entry => {\r\n                                        if (newValue !== null && (newValue as number) >= entry.options.length) {\r\n                                            newValue = entry.options.length - 1;\r\n                                        }\r\n                                    })\r\n                                }\r\n                            }\r\n                        } else {\r\n                            newValue = true;\r\n                        }\r\n                        myConditionValuesAfter[addCondition.] = newValue;\r\n                    }\r\n                    if (addCondition.) {\r\n                        if (Array.isArray(addCondition.)) {\r\n                            addCondition..forEach((desc: string) => {\r\n                                if (!damageResult[''].includes(desc)) {\r\n                                    damageResult[''].push(desc);\r\n                                }\r\n                            })\r\n                        } else {\r\n                            const desc = addCondition.;\r\n                            if (!damageResult[''].includes(desc)) {\r\n                                damageResult[''].push(desc);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (detailObj[''] || detailObj['']) {\r\n            const myConditionInputAfter: TConditionInput = _.cloneDeep(conditionInput);\r\n            myConditionInputAfter.conditionValues = myConditionValuesAfter;\r\n            const validConditionValueArrAfter = makeValidConditionValueArr(myConditionInputAfter);\r\n\r\n            [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets].forEach(damageDetail => {\r\n                if (!damageDetail) return;\r\n                damageDetail..filter(s => s.).forEach(damageDetailObj => {\r\n                    if (damageDetailObj. === null) {\r\n                        return;\r\n                    }\r\n                    const conditionStr = damageDetailObj. as string;\r\n                    const matchesBefore = checkConditionMatches(conditionStr, validConditionValueArr, constellation, statsObj, conditionInput.conditionValues);\r\n                    const matchesAfter = checkConditionMatches(conditionStr, validConditionValueArrAfter, constellation, statsObj, conditionInput.conditionValues);\r\n                    if (matchesBefore == matchesAfter) {\r\n                        return;\r\n                    }\r\n                    let valueBefore = 0;\r\n                    let valueAfter = 0;\r\n                    let before = damageDetailObj.;\r\n                    if (before.includes('${INDEX}')) {\r\n                        before = before.replaceAll('${INDEX}', String(matchesBefore));\r\n                    } else if (matchesBefore !== 0) {\r\n                        before = '(' + before + ')*' + matchesBefore;\r\n                    } else {\r\n                        before = '0';\r\n                    }\r\n                    valueBefore = evalFormula(before, statsObj, damageResult, damageDetailObj., damageDetailObj.);\r\n                    let after = damageDetailObj.;\r\n                    if (after.includes('${INDEX}')) {\r\n                        after = after.replaceAll('${INDEX}', String(matchesAfter));\r\n                    } else if (matchesAfter !== 0) {\r\n                        after = '(' + after + ')*' + matchesAfter;\r\n                    } else {\r\n                        after = '0';\r\n                    }\r\n                    valueAfter = evalFormula(after, statsObj, damageResult, damageDetailObj., damageDetailObj.);\r\n                    const diff = valueAfter - valueBefore;\r\n                    if (diff) {\r\n                        let new = damageDetailObj. as string;\r\n                        if (damageDetailObj.) {\r\n                            new += '.' + damageDetailObj.;\r\n                        }\r\n                        if (new in my) {\r\n                            my[new] += diff;\r\n                        } else {\r\n                            my[new] = diff;\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n\r\n            validConditionValueArr = validConditionValueArrAfter;\r\n        }\r\n\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n        if (talentChangeDetailObjArr) {\r\n            // \r\n            talentChangeDetailObjArr.forEach(valueObj => {\r\n                let number = null;\r\n                if (valueObj.) {\r\n                    number = checkConditionMatches(valueObj., validConditionValueArr, constellation, statsObj, conditionInput.conditionValues);\r\n                    if (number === 0) {\r\n                        return;\r\n                    }\r\n                }\r\n                if (valueObj.) {\r\n                    if (valueObj..endsWith('')) {    // for \r\n                        if (!valueObj..startsWith(my)) {\r\n                            return;\r\n                        }\r\n                    } else if (valueObj. == '') {\r\n                        if (my != '') {\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        //  or .\r\n                        const my = detailObj.;\r\n                        const myArr = valueObj..split('.');\r\n                        if (myArr[0] != my) {\r\n                            return;\r\n                        }\r\n                        if (myArr.length > 1 && myArr[myArr.length - 1] != detailObj.) {\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                if (valueObj[''].endsWith('')) {   // \r\n                    if (['', '', ''].includes(detailObj.)) {\r\n                        if (!detailObj['']) {\r\n                            my = valueObj[''].replace('', '');\r\n                        }\r\n                    }\r\n                } else if (valueObj. == '') {   //  for \r\n                    const myValue = evalFormula(valueObj., statsObj, damageResult, valueObj., valueObj.);\r\n                    my += myValue;\r\n                } else if (valueObj. == '') {\r\n                    // nop\r\n                } else {\r\n                    if (number != null && number != 1) {    // @\r\n                        const myNewValueObj = JSON.parse(JSON.stringify(valueObj)); // _.cloneDeep\r\n                        if (_.isString(myNewValueObj.)) {\r\n                            myNewValueObj. += '*' + number;\r\n                        } else if (_.isArray(myNewValueObj.)) {\r\n                            myNewValueObj. = myNewValueObj..concat(['*', number]);\r\n                        }\r\n                        myTalentChangeDetailObjArr.push(myNewValueObj);\r\n                    } else {\r\n                        myTalentChangeDetailObjArr.push(valueObj);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // \r\n        const tempStatsObj: TStats = {};\r\n        [statsObj, my].forEach(entryObj => {\r\n            Object.keys(entryObj).forEach(stat => {\r\n                const tempArr = stat.split('.');\r\n                if (tempArr.length == 1) return;\r\n                let isValid = false;\r\n                if (tempArr[1] == detailObj.) {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    } else if (tempArr[2] == detailObj.) {\r\n                        if (tempArr.length == 3) {\r\n                            isValid = true;\r\n                        }\r\n                    }\r\n                } else if (tempArr[1] == (my + '')) {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    }\r\n                } else if (tempArr[1] == '' && my == '') {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                if (isValid) {\r\n                    const toStat = tempArr[0];\r\n                    if (toStat in tempStatsObj) {\r\n                        if (toStat == '' && tempStatsObj[toStat] > 0) {\r\n                            tempStatsObj[toStat] *= entryObj[stat] / 100;   // for \r\n                        } else {\r\n                            tempStatsObj[toStat] += entryObj[stat];\r\n                        }\r\n                    } else {\r\n                        tempStatsObj[toStat] = entryObj[stat];\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        Object.keys(tempStatsObj).forEach(stat => {\r\n            if (stat in my) {\r\n                if (stat.startsWith('') && my[stat] > 0) {\r\n                    my[stat] *= tempStatsObj[stat] / 100;   // for \r\n                } else {\r\n                    my[stat] += tempStatsObj[stat];\r\n                }\r\n            } else {\r\n                my[stat] = tempStatsObj[stat];\r\n            }\r\n        });\r\n\r\n        // for  0.05\r\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\r\n        if (damageDetailMyArtifactSets) {\r\n            if (detailObj. == '' && detailObj.HIT > 1\r\n                && characterInput.artifactSets[0] == '' && characterInput.artifactSets[1] == '') {\r\n                let isValid = false;\r\n                for (const valueObj of damageDetailMyArtifactSets[CHANGE_KIND_STATUS].filter(s => s. && s. && s.)) {\r\n                    const my = valueObj. as string; // \r\n                    const my = valueObj. as string;\r\n                    const myHIT = detailObj.HIT;\r\n                    if (checkConditionMatches(my, validConditionValueArr, constellation, statsObj, conditionInput.conditionValues) !== 0) {\r\n                        const my = valueObj.;\r\n                        const myValue = evalFormula(my, statsObj, damageResult, valueObj., valueObj.);\r\n                        if (!(my in my)) {\r\n                            my[my] = 0;\r\n                        }\r\n                        my[my] -= myValue * (myHIT - Math.max(1, Math.floor(myHIT / 2))) / myHIT;\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                if (isValid) {\r\n                    const description = '4HIT3HIT14HIT2';\r\n                    if (!damageResult[''].includes(description)) {\r\n                        damageResult[''].push(description);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        Object.keys(my).forEach(stat => {\r\n            if (stat in statsObj) {\r\n                if (stat.startsWith('') && statsObj[stat] > 0) {\r\n                    statsObj[stat] *= my[stat];\r\n                } else {\r\n                    statsObj[stat] += my[stat];\r\n                }\r\n            } else {\r\n                statsObj[stat] = my[stat];\r\n            }\r\n        });\r\n\r\n        if (statsObj['']) {\r\n            my = statsObj[''];\r\n        }\r\n\r\n        switch (detailObj.) {\r\n            case 'HP':\r\n                myArr.push('');\r\n                myArr.push('');\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':\r\n                myArr.push('');\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                break;\r\n            case 'HP':    // for  \r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':\r\n                isCalc = false;\r\n                isCalc = false;\r\n                break;\r\n            case 'HP':\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':    // for \r\n                if (!['', '', '', ''].includes(my)) {\r\n                    my = '';\r\n                }\r\n                break;\r\n            case 'HP':  // for  \r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            default:\r\n                if (detailObj..startsWith('') || detailObj..startsWith('')) {\r\n                    isCalc = false;\r\n                    isCalc = false;\r\n                    isCalc = false;\r\n                    my = null;\r\n                } else {\r\n                    myArr.push('');\r\n                    if (detailObj. != 'NONE') {  // for \r\n                        if (detailObj.) {\r\n                            myArr.push(detailObj.);\r\n                        } else if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\r\n                            myArr.push(detailObj. + '');\r\n                        }\r\n                    }\r\n                    if (my) {\r\n                        myArr.push(my == '' ? '' : my + '');\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        let myResult: TDamageResultEntry;\r\n        if (detailObj..startsWith('') && detailObj..endsWith('')) {   // for \r\n            myResult = calculateDamageFromDetailSubLunar(statsObj, damageResult, detailObj., detailObj., my);\r\n        } else {\r\n            myResult = calculateDamageFromDetailSub(statsObj, damageResult, detailObj., myArr, isCalc, isCalc, isCalc, my, my, my, detailObj., detailObj.);\r\n        }\r\n\r\n        myTalentChangeDetailObjArr.forEach(valueObj => {\r\n            const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, valueObj., myArr, isCalc, isCalc, isCalc, my, my, null, valueObj., valueObj.);\r\n            if (valueObj..endsWith('')) {  // \r\n                if (detailObj. == '') return;  // for \r\n                if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\r\n                    // HITHIT\r\n                    if (myHIT > 1) {\r\n                        myResultWork[2] *= myHIT;\r\n                        if (myResultWork[3] != null) {\r\n                            myResultWork[3] *= myHIT;\r\n                        }\r\n                        myResultWork[4] *= myHIT;\r\n                    }\r\n                }\r\n            }\r\n            myResult[2] += myResultWork[2];\r\n            if (myResult[3] != null && myResultWork[3]) {\r\n                myResult[3] += myResultWork[3];\r\n            }\r\n            myResult[4] += myResultWork[4];\r\n        });\r\n\r\n        // \r\n        if ([...DAMAGE_CATEGORY_ARRAY, ''].includes(detailObj.)) {\r\n            let my = detailObj.;\r\n            if (detailObj.) {    // for \r\n                const temp = detailObj..replace(/$/, '');\r\n                if (DAMAGE_CATEGORY_ARRAY.includes(temp)) {\r\n                    my = temp;\r\n                }\r\n            }\r\n\r\n            const dmgUpStatArr = [];\r\n            dmgUpStatArr.push(my + '');\r\n            if (my) {\r\n                dmgUpStatArr.push(my == '' ? '' : my + '');\r\n            }\r\n            dmgUpStatArr.forEach(dmgUpStat => {\r\n                if (!statsObj[dmgUpStat]) return;\r\n                if (!isCalc || !isCalc) return;\r\n\r\n                if (detailObj..startsWith('_')) return;    // for \r\n\r\n                const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, statsObj[dmgUpStat], myArr, isCalc, isCalc, isCalc, my, my, null);\r\n                // HITHIT\r\n                if (myHIT > 1) {\r\n                    myResultWork[2] *= myHIT;\r\n                    if (myResultWork[3] != null) {\r\n                        myResultWork[3] *= myHIT;\r\n                    }\r\n                    myResultWork[4] *= myHIT;\r\n                }\r\n                myResult[2] += myResultWork[2];\r\n                if (myResult[3] != null && myResultWork[3]) {\r\n                    myResult[3] += myResultWork[3];\r\n                }\r\n                myResult[4] += myResultWork[4];\r\n            });\r\n        }\r\n\r\n        // \r\n        Object.keys(my).forEach(statName => {\r\n            statsObj[statName] -= my[statName];\r\n        });\r\n\r\n        if (detailObj. == '') {\r\n            if (myResult[1] == '') {  //  for  \r\n                myResult[2] = myResult[2] * 1.5;\r\n                myResult[4] = myResult[4] * 1.5;\r\n            }\r\n        }\r\n\r\n        const resultArr = [detailObj., myResult[1], myResult[2], myResult[3], myResult[4], detailObj., detailObj.HIT, myResult[7], myResult[8]] as TDamageResultEntry;\r\n        console.debug(resultArr);\r\n        return resultArr;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(detailObj, characterInput, conditionInput, statsObj, opt_element);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport function isUseReference(formula: number | string) {\r\n    return _.isString(formula) && formula.includes('#');\r\n}\r\n\r\nfunction calculateDamageFromDetailSub(\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    formula: number | string,\r\n    buffArr: Array<string> | null,\r\n    isCalc: boolean,\r\n    isCalc: boolean,\r\n    isCalc: boolean,\r\n    : string,\r\n    : number,\r\n    : number | null,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null\r\n): TDamageResultEntry {\r\n    const my = evalFormula(formula, statsObj, damageResult, opt_max, opt_min);\r\n    let my = my;\r\n\r\n    if () { //  for \r\n        my *=  / 100;\r\n    } else {\r\n         = 1;\r\n    }\r\n\r\n    // \r\n    if (isUseReference(formula)) {\r\n        buffArr = null;\r\n        isCalc = false;\r\n        isCalc = false;\r\n    }\r\n\r\n    let my = 1;\r\n    if (buffArr) {\r\n        my = 100;   // percent\r\n        buffArr.forEach(buff => {\r\n            if (statsObj[buff]) {\r\n                my += statsObj[buff];\r\n            }\r\n        });\r\n        my = my / 100;\r\n        my *= my;\r\n    }\r\n\r\n    let my = 1;\r\n    if (isCalc) {\r\n        my = calculateEnemyDef(statsObj, );\r\n        my *= my;\r\n    }\r\n\r\n    let my = 1;\r\n    if (isCalc && ) {\r\n        my = calculateEnemyRes(, statsObj);\r\n        my *= my;\r\n    }\r\n\r\n    let my = statsObj[''];\r\n    if ( == '') {\r\n        if ('' in statsObj) {\r\n            my += statsObj[''];\r\n        }\r\n    } else if (( + '') in statsObj) {\r\n        my += statsObj[ + ''];\r\n    }\r\n    my = Math.min(100, Math.max(0, my)) / 100;    // 01\r\n\r\n    let my = statsObj[''];\r\n    if ( == '') {\r\n        if ('' in statsObj) {\r\n            my += statsObj[''];\r\n        }\r\n    } else if (( + '') in statsObj) {\r\n        my += statsObj[ + ''];\r\n    }\r\n    my = (100 + my) / 100;\r\n\r\n    let myResult = null;\r\n    let myResult = my;\r\n    if (isCalc && my > 0) {\r\n        myResult = my * my;\r\n        myResult = (myResult * my) + (my * (1 - my));\r\n    }\r\n\r\n    console.debug('[%f] [%o=%f] [%f,%f] [%f] [%f]', , buffArr, my, my, my, my, my);\r\n    return ['', , myResult, myResult, my, null, null, my, my];\r\n}\r\n\r\nfunction calculateDamageFromDetailSubLunar(\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    formula: number | string,\r\n    kind: string,\r\n    dmgElement: string,\r\n): TDamageResultEntry {\r\n    const my = evalFormula(formula, statsObj, damageResult, null, null);\r\n    const workKind = kind.replace('', '');\r\n    const baseDmgUp = statsObj[workKind + ''] ?? 0;\r\n    const em = statsObj[''] ?? 0;\r\n    const emBonus = (6 * em) / (em + 2000);\r\n    const otherBonus = statsObj[workKind + ''] ?? 0;\r\n\r\n    let multiplier = 1;\r\n    if (workKind == '') {\r\n        multiplier = 3;\r\n    }\r\n    let my = multiplier * my * (1 + baseDmgUp / 100) * (1 + emBonus + otherBonus / 100);\r\n\r\n    const my = calculateEnemyRes(dmgElement, statsObj);\r\n    my *= my;\r\n\r\n    let my = statsObj[''];\r\n    my += statsObj[dmgElement + ''] || 0;\r\n    my = Math.min(100, Math.max(0, my)) / 100;    // 01\r\n\r\n    let my = statsObj[''];\r\n    my += statsObj[dmgElement + ''] || 0;\r\n    my = (100 + my) / 100;\r\n\r\n    let myResult = null;\r\n    let myResult = my;\r\n    if (my > 0) {\r\n        myResult = my * my;\r\n        myResult = (myResult * my) + (my * (1 - my));\r\n    }\r\n\r\n    return ['', dmgElement, myResult, myResult, my, null, null, null, null];\r\n}\r\n\r\nfunction getChangeDetailObjArr(characterInput: TCharacterInput, changeKind: string) {\r\n    let result = [] as any[];\r\n    if (!characterInput) return result;\r\n\r\n    if (characterInput.damageDetailMyCharacter && changeKind in characterInput.damageDetailMyCharacter) {\r\n        result = result.concat((characterInput.damageDetailMyCharacter as any)[changeKind]);\r\n    }\r\n    if (characterInput.damageDetailMyWeapon && changeKind in characterInput.damageDetailMyWeapon) {\r\n        result = result.concat((characterInput.damageDetailMyWeapon as any)[changeKind]);\r\n    }\r\n    if (characterInput.damageDetailMyArtifactSets && changeKind in characterInput.damageDetailMyArtifactSets) {\r\n        result = result.concat((characterInput.damageDetailMyArtifactSets as any)[changeKind]);\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction updateStats(\r\n    statsObj: TStats,\r\n    statName: string,\r\n    formulaArr: number | string,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null,\r\n) {\r\n    const value = evalFormula(formulaArr, statsObj, DAMAGE_RESULT_TEMPLATE, opt_max, opt_min);    // DAMAGE_RESULT_TEMPLATE\r\n    if (!isNumeric(value)) {\r\n        console.error(statsObj, statName, formulaArr, value);\r\n    }\r\n    const nameArr = [];\r\n    if (statName == 'HP') {\r\n        nameArr.push('HP');\r\n    } else if (statName.startsWith('')) {\r\n        nameArr.push(statName.replace(/^/, String(statsObj[''])));\r\n    } else if (statName.startsWith('')) {\r\n        ALL_ELEMENTS.forEach(entry => {\r\n            nameArr.push(statName.replace(/^/, entry));\r\n        });\r\n    } else if (statName.startsWith('')) {\r\n        nameArr.push(statName.replace(/^/, '' + String(statsObj[''])));\r\n    } else if (statName.startsWith('')) {\r\n        ALL_ELEMENTS.forEach(entry => {\r\n            nameArr.push(statName.replace(/^/, '' + entry));\r\n        });\r\n    } else {\r\n        nameArr.push(statName);\r\n    }\r\n    const diffStats = {} as { [key: string]: number };\r\n    nameArr.forEach(name => {\r\n        diffStats[name] = value;\r\n    });\r\n    for (const name of Object.keys(diffStats)) {\r\n        if (name in statsObj) {\r\n            if (name.startsWith('') && diffStats[name] > 0) {\r\n                statsObj[name] *= diffStats[name] / 100;    // for \r\n            } else {\r\n                statsObj[name] += diffStats[name];\r\n            }\r\n        } else {\r\n            statsObj[name] = diffStats[name];\r\n        }\r\n    }\r\n    console.debug(updateStats.name, null, statName, formulaArr, '=>', diffStats);\r\n    return diffStats;\r\n}\r\n\r\n/**  */\r\nfunction calculateDamageTaken(statsObj: TStats, damage: number, element: string) {\r\n    const def = statsObj[''];\r\n    const enemyLevel = statsObj[''];\r\n    const dmgReduction = statsObj[''];\r\n    const res = calculateRes(statsObj[element == '' ? '' : element + '']);\r\n    let result = damage * (1 - def / (def + 5 * enemyLevel + 501)) * (100 - dmgReduction) / 100 * res;\r\n    result = Math.max(0, result);\r\n    return result;\r\n}\r\n\r\n// function flattenArray(value: any) {\r\n//     const result: any[] = [];\r\n//     if (Array.isArray(value)) {\r\n//         value.forEach(e => {\r\n//             if (Array.isArray(e)) {\r\n//                 result.push(...flattenArray(e));\r\n//             } else {\r\n//                 result.push(e);\r\n//             }\r\n//         });\r\n//     }\r\n//     return result;\r\n// }\r\n\r\nexport function calculateArtifactScore(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    scoringStats: [string, number][]\r\n) {\r\n    let result = 0;\r\n    for (const scoringStat of scoringStats) {\r\n        const stat = scoringStat[0];\r\n        const magnification = scoringStat[1];\r\n        const statValue = (artifactDetailInput. as any)[stat];\r\n        if (statValue) {\r\n            result += statValue * magnification;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateStatsTop(\r\n    statsObj: TStats,\r\n    optionInput: TOptionInput,\r\n) {\r\n    ARRAY.forEach(stat => {\r\n        const srcStat = stat.replace(/TOP$/, 'X7');\r\n        let srcStatValue = getStatValue(srcStat, statsObj);\r\n        if (srcStatValue) {\r\n            statsObj[stat] = srcStatValue;\r\n        }\r\n        for (const member of optionInput.teamMembers) {\r\n            const calculatedSupporter = optionInput.supporters[member];\r\n            if (!calculatedSupporter?.statsInput?.statsObj) continue;\r\n            srcStatValue = getStatValue(srcStat, calculatedSupporter.statsInput.statsObj);\r\n            if (srcStatValue !== undefined) {\r\n                if (statsObj[stat] < srcStatValue) {\r\n                    statsObj[stat] = srcStatValue;\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport async function setupTeamOptionSupporter(\r\n    optionInput: TOptionInput,\r\n    supporter: TCharacterKey,\r\n    build?: string,\r\n    character?: TCharacterKey,\r\n): Promise<[TStats, TDamageResult]> {\r\n    const characterInput = getDefaultCharacterInput();\r\n    const artifactDetailInput = getDefaultArtifactDetailInput();\r\n    const conditionInput = getDefaultConditionInput();\r\n    const statsInput = getDefaultStatsInput();\r\n    const damageResult = getDefaultDamageResultInput();\r\n    const optionDetails1: TDamageDetailObj[] = [];\r\n    const optionDetails2: TDamageDetailObj[] = [];\r\n    const conditionMap = new Map<string, string[] | object | null>();\r\n    const exclusionMap = new Map<string, string[]>();\r\n\r\n    characterInput.character = supporter;\r\n    characterInput.characterMaster = await getCharacterMasterDetail(characterInput.character);\r\n\r\n    if (build) {\r\n        const builddata = JSON.parse(build);\r\n\r\n        await loadRecommendation(characterInput, artifactDetailInput, conditionInput, optionInput, builddata);\r\n        makeDamageDetailObjArrObjCharacter(characterInput);\r\n        makeDamageDetailObjArrObjWeapon(characterInput);\r\n        makeDamageDetailObjArrObjArtifactSets(characterInput);\r\n        setupConditionValues(conditionInput, characterInput, optionInput);\r\n        calculateArtifactStatsMain(artifactDetailInput., artifactDetailInput.);\r\n        calculateArtifactStats(artifactDetailInput);\r\n        if (optionInput.elementalResonance) {\r\n            optionInput.elementalResonance.conditionAdjustments = calculateElementalResonance(optionInput.elementalResonance.conditionValues, conditionInput);\r\n        }\r\n        calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n        updateNumberConditionValues(conditionInput, characterInput, statsInput.statsObj);\r\n        calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n\r\n        if (character && characterInput.character === '') {\r\n            // for \r\n            const myCharacterMaster = await getCharacterMasterDetail(character);\r\n            if ('' in myCharacterMaster['']) {\r\n                statsInput.statsObj[''] = Number(myCharacterMaster['']['']);\r\n            }\r\n        }\r\n\r\n        calculateDamageResult(damageResult, characterInput, conditionInput, statsInput);\r\n    }\r\n\r\n    // TEAM_OPTION_MASTER\r\n    const teamOptions: any[] = [];\r\n    TEAM_OPTION_MASTER_LIST.filter(entry => entry.key.startsWith(supporter + '_')).forEach(entry => {\r\n        if (_.isArray(entry.)) {\r\n            for (const detailObj of entry.) {\r\n                (detailObj as any). = makeSupporterCondition(supporter, entry., (detailObj as any).);\r\n            }\r\n        }\r\n        teamOptions.splice(teamOptions.length, 0, ...makeDamageDetailObjArr(entry, null, null, null, optionDetails1, optionDetails2, ''));\r\n    })\r\n    teamOptions.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    })\r\n    optionDetails1.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    })\r\n    optionDetails2.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    })\r\n    conditionMap.forEach((value, key) => {\r\n        if (value && _.isArray(value)) {\r\n            if (!value[0].startsWith('required_')) {\r\n                conditionMap.set(key, ['', ...value]);\r\n            }\r\n        }\r\n    })\r\n    // CHARACTER_MASTER\r\n    let characterOptions: any[] = [];\r\n    if (characterInput.characterMaster?.) {\r\n        characterOptions = characterInput.characterMaster.;\r\n    }\r\n    // WEAPON_MASTER\r\n    let weaponOptions: any[] = [];\r\n    if (characterInput.weaponMaster?.) {\r\n        weaponOptions = characterInput.weaponMaster.;\r\n    }\r\n    // ARTIFACT_SET_MASTER\r\n    const vision = characterInput.characterMaster.;\r\n    const elementalReactionArr = Object.keys((ELEMENTAL_REACTION_MASTER as any)[vision]);\r\n    if (['', ''].includes(vision) && !elementalReactionArr.includes('')) {\r\n        elementalReactionArr.push('');\r\n    }\r\n    const artifactSetOptions: any[] = [];\r\n    if (characterInput.artifactSets[0] && characterInput.artifactSets[1] && characterInput.artifactSets[0] == characterInput.artifactSets[1]) {\r\n        if (characterInput.artifactSetMasters[0]['4']) {\r\n            if (_.isArray(characterInput.artifactSetMasters[0]['4'][''])) {\r\n                characterInput.artifactSetMasters[0]['4'][''].forEach(detailObj => {\r\n                    if (detailObj.) {\r\n                        if (_.isString(detailObj.)) {\r\n                            detailObj. = detailObj..replace('', '');\r\n                            if (detailObj..startsWith('')) { // for \r\n                                if (elementalReactionArr.filter(s => detailObj[''].startsWith('=' + s)).length === 0) {\r\n                                    return;\r\n                                }\r\n                            }\r\n                        }\r\n                        artifactSetOptions.push(detailObj);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n    for (const options of [characterOptions, weaponOptions, artifactSetOptions]) {\r\n        if (options.length) {\r\n            const damageDetailObjArr = makeTeamOptionDetailObjArr(options);\r\n            damageDetailObjArr.forEach((damageDetailObj) => {\r\n                const condition = makeSupporterCondition(supporter, damageDetailObj., damageDetailObj.);\r\n                damageDetailObj. = condition;\r\n                const changeKind = getChangeKind(damageDetailObj. as string);\r\n                if (changeKind === 'STATUS' &&\r\n                    optionDetails1.filter((s) => s. == condition && s. == damageDetailObj.).length === 0\r\n                ) {\r\n                    optionDetails1.splice(optionDetails1.length, 0, damageDetailObj);\r\n                }\r\n                if (changeKind === 'TALENT' &&\r\n                    optionDetails2.filter((s) => s. == condition && s. == damageDetailObj.).length === 0\r\n                ) {\r\n                    optionDetails2.splice(optionDetails2.length, 0, damageDetailObj);\r\n                }\r\n                makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n            })\r\n        }\r\n    }\r\n\r\n    optionInput.supporters[supporter] = {\r\n        characterInput: characterInput,\r\n        artifactDetailInput: artifactDetailInput,\r\n        conditionInput: conditionInput,\r\n        statsInput: statsInput,\r\n        damageResult: damageResult,\r\n        optionDetails1: optionDetails1,\r\n        optionDetails2: optionDetails2,\r\n        conditionMap: conditionMap,\r\n        exclusionMap: exclusionMap,\r\n    };\r\n\r\n    return [statsInput.statsObj, damageResult];\r\n}\r\n\r\nfunction makeSupporterCondition(supporter: string, name: string | null, condition: string | null | undefined) {\r\n    let result = supporter + '*';\r\n    if (condition) {\r\n        result += condition.replace(/([&|^])/g, '$1' + supporter + '*');\r\n    } else if (name) {\r\n        result += name;\r\n    }\r\n    result = result.replace(supporter + '*' + supporter + '*', supporter + '*');\r\n    return result;\r\n}\r\n\r\nexport function calculateConditionAdjustments(\r\n    stats: TStats,\r\n    damageDetailObjs: TDamageDetailObj[] | undefined,\r\n    validConditionValueArr: string[],\r\n    refStats: TStats,\r\n    damageResult: TDamageResult,\r\n    constellation = 6,\r\n) {\r\n    if (damageDetailObjs === undefined) {\r\n        return;\r\n    }\r\n    for (const detailObj of damageDetailObjs) {\r\n        let my = detailObj.;\r\n        if (my === null) {\r\n            continue;\r\n        }\r\n        if (detailObj.) {\r\n            const number = checkConditionMatches(detailObj., validConditionValueArr, constellation, refStats);\r\n            if (number === 0) continue;\r\n            if (my.includes('${INDEX}')) {\r\n                my = my.replaceAll('${INDEX}', String(number));\r\n            } else {\r\n                my = '(' + my + ')*' + number;\r\n            }\r\n        }\r\n        const myValue = evalFormula(my, refStats, damageResult, detailObj., detailObj.);\r\n        const kinds = [] as string[];\r\n        if (detailObj.) {\r\n            if (detailObj..startsWith('') || detailObj..startsWith('')) {\r\n                for (const elem of ALL_ELEMENTS) {\r\n                    kinds.push(detailObj..replace('', elem));\r\n                }\r\n            } else {\r\n                kinds.push(detailObj.);\r\n            }\r\n        }\r\n        for (const kind of kinds) {\r\n            let tempKind = kind;\r\n            if (detailObj.) {\r\n                tempKind += '.' + detailObj.;\r\n            }\r\n            if (tempKind in stats) {\r\n                stats[tempKind] += myValue;\r\n            } else {\r\n                stats[tempKind] = myValue;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst TEAM_OPTION_NOT_UNIQUE_ARR = ['', '', '', ''];\r\n\r\nexport function calculateTeamStatsAdjustments(optionInput: TOptionInput, topStats: TStats, character: string) {\r\n    const result = {} as TStats;\r\n    const validConditionValueArr: string[] = [];\r\n    makeValidConditionValueArr(optionInput.teamOption).forEach(value => {\r\n        const indexOf = value.indexOf('*');\r\n        const supporter = value.substring(0, indexOf);\r\n        if (supporter != character) {\r\n            const work = value.substring(indexOf);\r\n            if (TEAM_OPTION_NOT_UNIQUE_ARR.includes(work.substring(1)) || validConditionValueArr.filter(s => s.endsWith(work)).length === 0) {\r\n                validConditionValueArr.push(value);\r\n            }\r\n        }\r\n    })\r\n    Object.keys(optionInput.supporters).filter(supporter => supporter != character).forEach(supporter => {\r\n        const workInput = optionInput.supporters[supporter];\r\n        let statsObj = workInput ? workInput.statsInput.statsObj : TEMPLATE;\r\n        if (Object.keys(topStats).length) {\r\n            statsObj = _.cloneDeep(statsObj);\r\n            Object.keys(topStats).forEach(stat => { // \r\n                statsObj[stat] = topStats[stat];\r\n            })\r\n        }\r\n        const damageResult = workInput ? workInput.damageResult : DAMAGE_RESULT_TEMPLATE;\r\n        [\r\n            optionInput.supporters[supporter]?.optionDetails1,\r\n            optionInput.supporters[supporter]?.optionDetails2,\r\n        ].forEach(optionDetails => {\r\n            calculateConditionAdjustments(result, optionDetails, validConditionValueArr, statsObj, damageResult);\r\n        })\r\n    })\r\n    overwriteObject(optionInput.teamOption.conditionAdjustments, result);\r\n    return result;\r\n}\r\n\r\nexport function calculateMiscStatsAdjustments(optionInput: TOptionInput) {\r\n    const result = {} as TStats;\r\n    const validConditionValueArr: string[] = [];\r\n    const teamConditionValueArr = makeValidConditionValueArr(optionInput.teamOption);\r\n    makeValidConditionValueArr(optionInput.miscOption).forEach(value => {\r\n        if (teamConditionValueArr.filter(s => s.endsWith('*' + value)).length === 0) {\r\n            validConditionValueArr.push(value);\r\n        }\r\n    });\r\n    const statsObj = TEMPLATE;\r\n    const damageResult = DAMAGE_RESULT_TEMPLATE;\r\n    [\r\n        optionInput.miscOption.optionDetails1,\r\n        optionInput.miscOption.optionDetails2,\r\n    ].forEach(optionDetails => {\r\n        calculateConditionAdjustments(result, optionDetails, validConditionValueArr, statsObj, damageResult);\r\n    })\r\n    overwriteObject(optionInput.miscOption.conditionAdjustments, result);\r\n    return result;\r\n}\r\n\r\nexport function getCritFromResultEntry(entry: TDamageResultEntry) {\r\n    let critRate = 0;\r\n    let critDmg = 0;\r\n    if (entry[2] && entry[3] && entry[4]) {\r\n        critRate = entry[2] - entry[4]; //  - \r\n        critRate /= entry[3] - entry[4]; //  - \r\n        critRate = Math.round(critRate * 1000) / 10;\r\n        critDmg = Math.round((entry[3] / entry[4] - 1) * 1000) / 10;\r\n    }\r\n    return [critRate, critDmg];\r\n}\r\n\r\nexport function getDamageResultArr(\r\n    rotationDamageEntry: TRotationDamageEntry,\r\n    damageResult: TDamageResult,\r\n): TDamageResultEntry[] {\r\n    const result = [] as TDamageResultEntry[];\r\n    const category = rotationDamageEntry.category;\r\n    if (REACTION_DMG_ARR.includes(category)) {\r\n        result.push([\r\n            category,\r\n            REACTION_DMG_ELEMENT_MAP?.get(category) ?? null,\r\n            (damageResult. as any)[category],\r\n            null,\r\n            (damageResult. as any)[category],\r\n            null,\r\n            1,\r\n            null,\r\n            null,\r\n        ]);\r\n    } else {\r\n        for (let entry of damageResult[category] as TDamageResultEntry[]) {\r\n            if (!entry[0]) continue;\r\n            if (entry[0].startsWith('')) continue;\r\n            if (entry[0].endsWith('')) continue;\r\n            if (entry[5]?.endsWith('')) {\r\n                if (entry[0].startsWith('')) {  // \r\n                    entry = _.cloneDeep(entry);\r\n                    const [critRate] = getCritFromResultEntry(entry);\r\n                    entry[2] = entry[2] * critRate / 100;\r\n                }\r\n                result.push(entry);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateRotationDamageEntry(\r\n    rotationDamageEntry: TRotationDamageEntry,\r\n    index: number,\r\n    damageResult: TDamageResult,\r\n) {\r\n    let result = 0;\r\n    const list = getDamageResultArr(rotationDamageEntry, damageResult);\r\n    if (list && list.length > index && rotationDamageEntry.reactions.length > index) {\r\n        const dmgResultEntry = list[index];\r\n        const reactionObj: any = rotationDamageEntry.reactions[index];\r\n        const count = rotationDamageEntry.counts[index];\r\n        const plainDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., ''); // \r\n        for (let n = 0; n < count; n++) {\r\n            let workDmg = plainDmg;\r\n            ['', ''].forEach((reaction) => {\r\n                if (reaction in reactionObj && n < reactionObj[reaction]) {\r\n                    workDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction);\r\n                }\r\n            });\r\n            result += workDmg;\r\n        }\r\n        ['', ''].forEach((reaction) => {\r\n            if (reaction in reactionObj) {\r\n                result += calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction, reactionObj[reaction]) - plainDmg;\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateRotationTotalDamage(\r\n    rotationDamageArr: TRotationDamageEntry[],\r\n    damageResult: TDamageResult,\r\n) {\r\n    let result = 0;\r\n    rotationDamageArr.forEach((rotationDamageEntry) => {\r\n        const list = getDamageResultArr(rotationDamageEntry, damageResult);\r\n        for (let i = 0; i < list.length; i++) {\r\n            result += calculateRotationDamageEntry(rotationDamageEntry, i, damageResult);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function calculateReactedDamage(\r\n    dmgResultEntry: TDamageResultEntry,\r\n    dmgIndex: number,\r\n    elementalReaction: TDamageResultElementalReaction,\r\n    reaction: string,\r\n    reactionTimes = 1\r\n) {\r\n    let result = Number(dmgResultEntry[dmgIndex]); // 2:/3:/4:\r\n    const dmgElement = dmgResultEntry[1];\r\n    if (reaction && dmgElement) {\r\n        if (['', ''].includes(reaction)) {\r\n            const reactionKey = reaction + '_' + dmgElement;\r\n            if (reactionKey in elementalReaction) {\r\n                result *= (elementalReaction as any)[reactionKey];\r\n            }\r\n        } else if (['', ''].includes(reaction)) {\r\n            const reactionKey = reaction + '';\r\n            if (reactionKey in elementalReaction) {\r\n                let reactionDmg = (elementalReaction as any)[reactionKey];\r\n                if (dmgResultEntry[2]) {\r\n                    reactionDmg *= result / dmgResultEntry[4]; //  \r\n                }\r\n                if (dmgResultEntry[7]) {\r\n                    reactionDmg *= dmgResultEntry[7]; // \r\n                }\r\n                if (dmgResultEntry[8]) {\r\n                    reactionDmg *= dmgResultEntry[8]; // \r\n                }\r\n                reactionDmg *= reactionTimes; // \r\n                result += reactionDmg;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getAmplifyingReactionElement(reaction: string, dmgElement: string) {\r\n    let reactionElement;\r\n    if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    }\r\n    return reactionElement;\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport type TKeyValue = {\r\n    key: string, value: any,\r\n};\r\n\r\nexport function isString(value: any): boolean {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\n\r\nexport function isNumeric(value: any): boolean {\r\n    return isFinite(value) && value != null;\r\n}\r\n\r\nexport function isBoolean(value: any): boolean {\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isPlainObject(value: any): boolean {\r\n    const myType = Object.prototype.toString.call(value);\r\n    return myType === '[object Object]';\r\n}\r\n\r\n// /** deep copyundefined */\r\n// export function deepcopy(value: any): any {\r\n//     const result = JSON.parse(JSON.stringify(value));\r\n//     return result;\r\n// }\r\n\r\nexport function overwriteObject(dst: any, src: any) {\r\n    if (_.isPlainObject(src) && _.isPlainObject(dst)) {\r\n        const srcKeys = Object.keys(src);\r\n        for (const key of srcKeys) {\r\n            dst[key] = src[key];\r\n        }\r\n        for (const key of Object.keys(dst)) {\r\n            if (!srcKeys.includes(key)) delete dst[key];\r\n        }\r\n    }\r\n    return dst;\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport const basename = (path: string) => path!.split('/')!.pop()!.split('.')!.shift()!;\r\n","import { createI18n } from 'vue-i18n'\r\n\r\nconst i18n = createI18n({\r\n  legacy: false,\r\n  locale: 'ja-jp',\r\n  fallbackLocale: 'en-us',\r\n  isGlobal: true,\r\n})\r\nexport default i18n;\r\n","import { ALL_ELEMENTS, ARTIFACT_SET_MASTER, ARTIFACT_STAT_JA_EN_ABBREV_MAP, ARTIFACT_SUB_MASTER, CHARACTER_MASTER, ELEMENTAL_REACTION_MASTER, ELEMENTAL_RESONANCE_MASTER, ELEMENTAL_RESONANCE_MASTER_LIST, ENEMY_MASTER_LIST, GENSEN_MASTER_LIST, getCharacterMasterDetail, getWeaponMasterDetail, IMG_SRC_DUMMY, NUMBER_OF_PRIORITY_SUBSTATS, OPTION1_MASTER_LIST, OPTION2_MASTER_LIST, RECOMMEND_ABBREV_MAP, TAnyObject, TArtifactSet, TArtifactSetEntry, TArtifactSetKey, TArtifactSubKey, TCharacterDetail, TCharacterKey, TEnemyEntry, TWeaponDetail, TWeaponKey, TWeaponTypeKey, WEAPON_MASTER, PROPERTY_MAP } from '@/master';\r\nimport _ from 'lodash';\r\nimport { basename, isNumeric, overwriteObject } from './common';\r\n\r\nexport const ARRAY = [\r\n    'HP',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    'HP',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',       // for \r\n    '',     // for \r\n    '',     // for \r\n    '',     // for \r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',           // for \r\n    '', // for \r\n    '',           // for \r\n    '', // for \r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    'HP%',\r\n    '%',\r\n    '%',\r\n    'HP+',\r\n    '+',\r\n    '+',\r\n];\r\nexport const ARRAY = [\r\n    'HPV1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n];\r\nexport const ARRAY = [\r\n    'TOP',\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    ''\r\n];\r\n\r\nexport const ARRAY_MAP = new Map([\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', _ARRAY],\r\n    ['', _ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', _ARRAY],\r\n    ['', _ARRAY],\r\n]);\r\n\r\nexport const STAT_PERCENT_LIST = [\r\n    ...ARRAY, ..._ARRAY, ..._ARRAY, ...ARRAY, ...ARRAY, ..._ARRAY,\r\n    '', '', '',\r\n];\r\n\r\nexport type TStats = {\r\n    [key: string]: number,\r\n};\r\n\r\nfunction makeStatusTemplate() {\r\n    const statsObj: TStats = {};\r\n    ARRAY_MAP.forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj[''] = 5;\r\n    statsObj[''] = 50;\r\n    statsObj[''] = 100;\r\n    statsObj[''] = 0;\r\n    statsObj[''] = 0;\r\n    return statsObj;\r\n}\r\nexport const TEMPLATE = makeStatusTemplate();\r\n\r\nfunction makeEnemyStatusTemplate() {\r\n    const statsObj: TStats = {};\r\n    [_ARRAY].forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj[''] = 0;\r\n    return statsObj;\r\n}\r\nexport const TEMPLATE = makeEnemyStatusTemplate();\r\n\r\nexport const _ARRAY = [\r\n    '5_HP', '4_HP'\r\n];\r\nexport const _ARRAY = [\r\n    '5_', '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '5_',\r\n    '4_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_',\r\n    '4_'\r\n];\r\n\r\nexport const ARRAY = [\r\n    'HP%',\r\n    'HP',\r\n    '%',\r\n    '',\r\n    '%',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '%',\r\n    'HP%',\r\n    '%',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    'HP',\r\n    '',\r\n    '',\r\n];\r\n\r\nexport const TEMPLATE = {\r\n    'HP': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    'HP%': 0,\r\n    '%': 0,\r\n    '%': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n};\r\nexport type TArtifactStats = typeof TEMPLATE;\r\nexport type TArtifactStatsKey = keyof typeof TEMPLATE;\r\n\r\nexport type TDamageResultEntry = [string, string | null, number, number | null, number, string | null, number | null, number | null, number | null];    // 0:, 1:, 2:, 3:, 4:, 5:, 6:HIT, 7:, 8:\r\n\r\nexport const TEMPLATE = {\r\n    : '',\r\n    _: 0,                 // 1.5\r\n    _: 0,                 // 2\r\n    _: 0,                 // 1.5\r\n    _: 0,                 // 2\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : '',\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,              // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n    ALL: [] as TDamageResultEntry[],  // for \r\n};\r\nObject.keys(TEMPLATE).forEach(key => {\r\n    if (key.endsWith('ALL')) {\r\n        const template: TDamageResultEntry[] = [];\r\n        for (let i = 0; i < 4; i++) {\r\n            template.push(['', null, 0, 0, 0, null, null, null, null]);  // 0:, 1:, 2:, 3:, 4:, 5:, 6:HIT, 7:, 8:\r\n        }\r\n        (TEMPLATE as any)[key] = template;\r\n    }\r\n})\r\n\r\nexport type TDamageResultElementalReactionKey = keyof typeof TEMPLATE;\r\nexport type TDamageResultElementalReaction = typeof TEMPLATE;\r\n\r\nexport type TDamageResult = {\r\n    : TDamageResultElementalReaction,\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : string[],\r\n    : any[],\r\n    : any[],\r\n    [key: string]: TDamageResultElementalReaction | TDamageResultEntry[] | string[],\r\n};\r\n\r\nexport const DAMAGE_RESULT_TEMPLATE = {\r\n    : _.cloneDeep(TEMPLATE) as TDamageResultElementalReaction,\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as string[],\r\n    : [] as any[],\r\n    : [] as any[],\r\n};\r\n\r\nexport const ARRAY = [\r\n    Array.from({ length: 20 }, (_, i) => i + 1),\r\n    Array.from({ length: 21 }, (_, i) => i + 20),\r\n    Array.from({ length: 11 }, (_, i) => i + 40),\r\n    Array.from({ length: 11 }, (_, i) => i + 50),\r\n    Array.from({ length: 11 }, (_, i) => i + 60),\r\n    Array.from({ length: 11 }, (_, i) => i + 70),\r\n    Array.from({ length: 11 }, (_, i) => i + 80),\r\n];\r\n\r\nexport type TDamageDetailObj = {\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    HIT: number | null,\r\n    : string | null,\r\n    : boolean | null,\r\n    : (string | object)[] | null,\r\n    : (string | object)[] | null,\r\n};\r\n\r\nexport type TDamageDetail = {\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    : TDamageDetailObj[],\r\n    : TDamageDetailObj[],\r\n    : Map<string, string[] | object | null>,\r\n    : Map<string, string[]>,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_DUMMY = {\r\n    key: 'NONE' as TArtifactSetKey,\r\n    : 5,\r\n    image: IMG_SRC_DUMMY,\r\n} as TArtifactSet;\r\n\r\nexport const CHARACTER_INPUT_TEMPLATE = {\r\n    character: '' as TCharacterKey,\r\n    characterMaster: {} as TCharacterDetail,\r\n    : 6,\r\n    : 90,\r\n    : 0,\r\n    : 8,\r\n    : 8,\r\n    : 8,\r\n    weapon: '' as TWeaponKey,\r\n    weaponMaster: {} as TWeaponDetail,\r\n    : 6,\r\n    : 90,\r\n    : 1,\r\n    artifactSets: ['NONE' as TArtifactSetKey, 'NONE' as TArtifactSetKey],\r\n    artifactSetMasters: [ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[],\r\n    damageDetailMyCharacter: null as TDamageDetail | null,\r\n    damageDetailMyWeapon: null as TDamageDetail | null,\r\n    damageDetailMyArtifactSets: null as TDamageDetail | null,\r\n    damageDetailElementalResonance: null as TDamageDetail | null,\r\n    buildname: '',\r\n    recommendationSelectedIndex: 0,\r\n    removeDisabled: true,   // \r\n};\r\nexport type TCharacterInput = typeof CHARACTER_INPUT_TEMPLATE;\r\n\r\nexport const ARTIFACT_TEMPLATE = {\r\n    name: '',\r\n    rarity: 1,\r\n    setname: 'NONE',\r\n    cat_id: 1,\r\n    mainStat: '',\r\n    mainStatValue: 0,\r\n    subStats: [\r\n        { name: 'HP', value: 0 },\r\n        { name: '', value: 0 },\r\n        { name: '', value: 0 },\r\n        { name: '', value: 0 },\r\n    ]\r\n};\r\nexport type TArtifact = typeof ARTIFACT_TEMPLATE;\r\n\r\nexport const ARTIFACT_DETAIL_INPUT_TEMPLATE = {\r\n    : ['', '', '', '', ''],\r\n    : _.fill(Array(NUMBER_OF_PRIORITY_SUBSTATS), ''),\r\n    : Array.from(GENSEN_MASTER_LIST[2].values),     // 1\r\n    : Array.from(GENSEN_MASTER_LIST[2].counts),   // 1\r\n    : _.cloneDeep(TEMPLATE) as TArtifactStats,\r\n    : _.cloneDeep(TEMPLATE) as TArtifactStats,\r\n    : _.cloneDeep(TEMPLATE) as TArtifactStats,\r\n    Disabled: false,\r\n    artifact_list: [] as TArtifact[],\r\n};\r\nexport type TArtifactDetailInput = typeof ARTIFACT_DETAIL_INPUT_TEMPLATE;\r\n\r\nexport type TCheckboxEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n};\r\nexport type TSelectEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n    options: string[];\r\n    required: boolean;\r\n};\r\nexport type TNumberEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n    min: number | string;\r\n    max?: number | string | undefined;\r\n    step: number;\r\n    initial: number;\r\n};\r\nexport type TConditionValues = {\r\n    [key: string]: boolean | number | null,\r\n};\r\nexport type TConditionAdjustments = {\r\n    [key: string]: number | null,\r\n};\r\nexport const CONDITION_INPUT_TEMPLATE = {\r\n    optionDetails1: [] as TDamageDetailObj[],\r\n    optionDetails2: [] as TDamageDetailObj[],\r\n    conditionMap: new Map<string, string[] | object | null>(),\r\n    exclusionMap: new Map<string, string[]>(),\r\n    checkboxList: [] as TCheckboxEntry[],\r\n    selectList: [] as TSelectEntry[],\r\n    numberList: [] as TNumberEntry[],\r\n    conditionValues: {} as TConditionValues,\r\n    conditionAdjustments: {} as TConditionAdjustments,\r\n    : [null, null, null] as (string | null)[],\r\n};\r\nexport type TConditionInput = typeof CONDITION_INPUT_TEMPLATE;\r\n\r\nexport const STATS_INPUT_TEMPLATE = {\r\n    statsObj: _.cloneDeep(TEMPLATE) as TStats,\r\n    statAdjustments: _.cloneDeep(TEMPLATE) as TStats,\r\n    statAdjustmentsEx: {} as TStats,\r\n    enemyMaster: ENEMY_MASTER_LIST[0] as TEnemyEntry,\r\n};\r\nfor (const stat of Object.keys(STATS_INPUT_TEMPLATE.statAdjustments)) {\r\n    STATS_INPUT_TEMPLATE.statAdjustments[stat] = 0;\r\n}\r\nexport type TStatsInput = typeof STATS_INPUT_TEMPLATE;\r\n\r\nexport function getDefaultCharacterInput(): TCharacterInput {\r\n    return _.cloneDeep(CHARACTER_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultArtifactDetailInput(): TArtifactDetailInput {\r\n    return _.cloneDeep(ARTIFACT_DETAIL_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultConditionInput(): TConditionInput {\r\n    return _.cloneDeep(CONDITION_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultOptionInput(): TOptionInput {\r\n    return _.cloneDeep(OPTION_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultStatsInput(): TStatsInput {\r\n    return _.cloneDeep(STATS_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultDamageResultInput(): TDamageResult {\r\n    return _.cloneDeep(DAMAGE_RESULT_TEMPLATE);\r\n}\r\n\r\nexport type TElementalResonance = {\r\n    conditionValues: TConditionValues,\r\n    conditionAdjustments: TConditionAdjustments,\r\n};\r\n\r\nexport const SUPPORTER_INPUT_TEMPLATE = {\r\n    characterInput: getDefaultCharacterInput(),\r\n    artifactDetailInput: getDefaultArtifactDetailInput(),\r\n    conditionInput: getDefaultConditionInput(),\r\n    statsInput: getDefaultStatsInput(),\r\n    damageResult: getDefaultDamageResultInput(),\r\n    optionDetails1: [] as TDamageDetailObj[],\r\n    optionDetails2: [] as TDamageDetailObj[],\r\n    conditionMap: new Map<string, string[] | object | null>(),\r\n    exclusionMap: new Map<string, string[]>(),\r\n};\r\nexport type TSupporterInput = typeof SUPPORTER_INPUT_TEMPLATE;\r\nexport type TSupporters = { [key: string]: TSupporterInput | undefined };\r\n\r\nexport const OPTION_INPUT_TEMPLATE = {\r\n    elementalResonance: {\r\n        conditionValues: {},\r\n        conditionAdjustments: {},\r\n    } as TElementalResonance,\r\n    supporterBuildname: {} as { [key: string]: string | undefined },\r\n    supporters: {} as TSupporters,\r\n    teamMembers: [] as string[],\r\n    teamOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n    miscOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n};\r\nexport type TOptionInput = typeof OPTION_INPUT_TEMPLATE;\r\n\r\nexport type TRecommendation = {\r\n    name: string,\r\n    build: any,\r\n    overwrite: boolean\r\n}\r\n\r\nexport const CHANGE_KIND_STATUS = '';\r\nexport const CHANGE_KIND_TALENT = '';\r\n\r\n/** 1+,20,20+,...,90 */\r\nfunction parseLevelStr(levelStr: number | string): [number, number] {\r\n    let result: [number, number] = [0, 1];\r\n    try {\r\n        let level: number;\r\n        if (_.isString(levelStr)) {\r\n            level = Number(String(levelStr).replace('+', ''));\r\n        } else {\r\n            level = Number(levelStr);\r\n        }\r\n        let ascension = 0;\r\n        for (let i = (ARRAY.length - 1); i >= 0; i--) {\r\n            ascension = i;\r\n            if (ARRAY[i][0] > level) continue;\r\n            if (ARRAY[i][0] == level && !String(levelStr).endsWith('+')) {\r\n                ascension--;\r\n            }\r\n            break;\r\n        }\r\n        result = [Math.max(0, ascension), level];\r\n    } catch (error) {\r\n        console.error(levelStr);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDefaultBuildname(character: any) {\r\n    return '' + character;\r\n}\r\n\r\nexport function makeBuildStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    let result = '_' + character;\r\n    if (buildname && buildname != makeDefaultBuildname(character)) {\r\n        result += '_' + buildname;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeOptionStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return '' + makeBuildStorageKey(character, buildname);\r\n}\r\n\r\nexport function makeArtifactScoringStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'ArtifactScoring');\r\n}\r\n\r\nexport function makeSupporterBuildnameStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'SupporterBuildname');\r\n}\r\n\r\n/** . [, , ][] */\r\nexport function makeRecommendationList(\r\n    characterMaster: TAnyObject,\r\n    opt_buildData?: TAnyObject,\r\n): TRecommendation[] {\r\n    const result: TRecommendation[] = [];\r\n\r\n    const character = characterMaster[''];\r\n    let isSavable: boolean | null = null;\r\n\r\n    if (opt_buildData) {\r\n        result.push({ name: 'IMPORTED DATA', build: opt_buildData, overwrite: false });\r\n        isSavable = true;\r\n        console.log('IMPORTED DATA', opt_buildData);\r\n    }\r\n\r\n    const storageKeyArr: string[] = [];\r\n    Object.keys(localStorage).forEach(key => {\r\n        if (key.startsWith(makeBuildStorageKey(character))) {\r\n            storageKeyArr.push(key);\r\n            if (isSavable === null) {\r\n                isSavable = false;\r\n            }\r\n        }\r\n    });\r\n    storageKeyArr.sort();\r\n    const re = new RegExp('^_' + character + '_');\r\n    storageKeyArr.forEach(key => {\r\n        let buildname;\r\n        if (key == makeBuildStorageKey(character)) {\r\n            buildname = makeDefaultBuildname(character);\r\n        } else {\r\n            buildname = key.replace(re, '');\r\n        }\r\n        const buildObj = JSON.parse(localStorage[key]);\r\n        const key2 = '' + key;\r\n        if (key2 in localStorage) {\r\n            const optionsObj = JSON.parse(localStorage[key2]);\r\n            buildObj.options = optionsObj;\r\n        }\r\n        const key3 = key.replace(/^/, 'ArtifactScoring');\r\n        if (key3 in localStorage) {\r\n            const artifactScoringObj = JSON.parse(localStorage[key3]);\r\n            buildObj.artifactScoring = artifactScoringObj;\r\n        }\r\n        const key4 = key.replace(/^/, 'SupporterBuildname');\r\n        if (key4 in localStorage) {\r\n            const supporterBuildnameObj = JSON.parse(localStorage[key4]);\r\n            buildObj.supporterBuildname = supporterBuildnameObj;\r\n        }\r\n        result.push({ name: buildname, build: buildObj, overwrite: true });\r\n    });\r\n\r\n    characterMaster[''].forEach((obj: { [key: string]: any }) => {\r\n        const myRecommendation = obj;\r\n        for (let i = 1; i <= NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n            const subkey = '' + i;\r\n            if (!(subkey in obj)) {\r\n                obj[subkey] = null;\r\n            }\r\n        }\r\n        const artifactRarerityArrArr = [[5, 5, 5, 5, 5], [4, 4, 5, 5, 5], [4, 4, 4, 5, 4]];\r\n        let artifactRarerity4Num = 0;\r\n        const artifactSet1 = myRecommendation['1'] as TArtifactSetKey;\r\n        const artifactSet2 = myRecommendation['2'] as TArtifactSetKey;\r\n        if (ARTIFACT_SET_MASTER[artifactSet1][''] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        if (ARTIFACT_SET_MASTER[artifactSet2][''] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        for (let i = 0; i < 2; i++) {\r\n            const name = '' + (i + 1);\r\n            if (!(name in myRecommendation)) {\r\n                if (i == 0) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_HP';\r\n                } else if (i == 1) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_';\r\n                }\r\n            }\r\n        }\r\n\r\n        let buildname = myRecommendation[''];\r\n        buildname += ' ';\r\n        if (myRecommendation['1'] == myRecommendation['2']) {\r\n            buildname += myRecommendation['1'];\r\n        } else {\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['1']);\r\n            buildname += '/';\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['2']);\r\n        }\r\n        buildname += ' [';\r\n        for (let i = 3; i <= 5; i++) {\r\n            const statusName = myRecommendation['' + i].split('_')[1];\r\n            if (RECOMMEND_ABBREV_MAP.has(statusName)) {\r\n                buildname += RECOMMEND_ABBREV_MAP.get(statusName);\r\n            } else {\r\n                buildname += statusName.substring(0, 1);\r\n            }\r\n        }\r\n        buildname += ']';\r\n        result.push({ name: buildname, build: myRecommendation, overwrite: false });\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\n/**  */\r\nfunction makeArtifactSetAbbrev(name: string): string {\r\n    const abbrRe = /[\\p{sc=Hiragana}\\p{sc=Katakana}]+/ug;\r\n    let abbr = name.replace(abbrRe, '');\r\n    if (abbr.length > 2) {\r\n        abbr = name.split(abbrRe).sort((a, b) => {\r\n            return b.length - a.length;\r\n        })[0];\r\n    }\r\n    if (abbr.length > 3) {\r\n        abbr = abbr.substring(0, 2);\r\n    }\r\n    return abbr;\r\n}\r\n\r\nexport function makePrioritySubstatValueList(\r\n    prioritySubstats: string[],\r\n    index: number,\r\n    opt_substat?: string\r\n) {\r\n    const result: number[] = [];\r\n    if (prioritySubstats[index]) {\r\n        if (!opt_substat) opt_substat = prioritySubstats[index];\r\n        if (opt_substat && opt_substat in ARTIFACT_SUB_MASTER) {\r\n            const valueArr = ARTIFACT_SUB_MASTER[opt_substat as TArtifactSubKey];\r\n            for (let i = 0; i < valueArr.length; i++) {\r\n                result.push(valueArr[i]);\r\n                if (i < valueArr.length - 1) {\r\n                    const diff = valueArr[i + 1] - valueArr[i];\r\n                    result.push(valueArr[i] + diff / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeEasyInputSubstatValueList(\r\n    substat: TArtifactSubKey\r\n) {\r\n    const result: number[] = [];\r\n    if (substat && substat in ARTIFACT_SUB_MASTER) {\r\n        const valueArr = ARTIFACT_SUB_MASTER[substat];\r\n        for (let i = 0; i < valueArr.length; i++) {\r\n            result.push(valueArr[i]);\r\n            if (i < valueArr.length - 1) {\r\n                const diff = valueArr[i + 1] - valueArr[i];\r\n                result.push(valueArr[i] + diff / 2);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport async function loadRecommendation(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n    build: { [key: string]: any },\r\n    buildname?: string,\r\n) {\r\n    try {\r\n        const character = characterInput.character;\r\n        const characterMaster = await getCharacterMasterDetail(character);\r\n        characterInput.characterMaster = characterMaster;\r\n        const artifactStatsSub = _.cloneDeep(TEMPLATE);\r\n        if (buildname) {\r\n            characterInput.buildname = buildname;\r\n        }\r\n\r\n        if ('' in build) {\r\n            [characterInput., characterInput.] = parseLevelStr(build['']);\r\n        }\r\n        ['', '', '', ''].forEach(key => {\r\n            if (key in build) {\r\n                (characterInput as any)[key] = Number(build[key]);\r\n            }\r\n        });\r\n\r\n        const weaponType = characterMaster[''];\r\n        if ('' in build) {\r\n            if (Object.keys(WEAPON_MASTER[weaponType]).includes(build[''])) {\r\n                let weaponKey = build[''];\r\n                if (weaponKey in WEAPON_MASTER[weaponType]) {\r\n                    characterInput.weapon = weaponKey as TWeaponKey;\r\n                } else if (weaponKey.includes('') && weaponKey.replace('', '') in WEAPON_MASTER[weaponType]) {\r\n                    weaponKey = weaponKey.replace('', '');\r\n                    characterInput.weapon = weaponKey as TWeaponKey;\r\n                } else if (weaponKey.includes('') && weaponKey.replace('', '') in WEAPON_MASTER[weaponType]) {\r\n                    weaponKey = weaponKey.replace('', '');\r\n                    characterInput.weapon = weaponKey as TWeaponKey;\r\n                } else {\r\n                    characterInput.weapon = Object.keys(WEAPON_MASTER[weaponType]).filter(s => s.startsWith(''))[0] as TWeaponKey;\r\n                }\r\n            } else {\r\n                characterInput.weapon = Object.keys(WEAPON_MASTER[weaponType]).filter(s => s.startsWith(''))[0] as TWeaponKey;\r\n            }\r\n            characterInput.weaponMaster = await getWeaponMasterDetail(characterInput.weapon, weaponType);\r\n        }\r\n        if ('' in build) {\r\n            [characterInput., characterInput.] = parseLevelStr(build['']);\r\n        }\r\n        if ('' in build) {\r\n            characterInput. = Number(build['']);\r\n        }\r\n\r\n        let prioritySubstatsDisabled = false;\r\n        for (const key of Object.keys(build).filter((s: string) => s.startsWith(''))) {\r\n            let toKey = key.replace(/^/, '');\r\n            if (toKey != 'HP') toKey = toKey.replace(/P$/, '%');\r\n            if (build[key] || build[key] == 0) {\r\n                prioritySubstatsDisabled = true;\r\n                (artifactStatsSub as any)[toKey] = Number(build[key]);\r\n            }\r\n        }\r\n        artifactDetailInput.Disabled = prioritySubstatsDisabled;\r\n\r\n        const newArtifactSets: TArtifactSetKey[] = [];\r\n        const newArtifactSetMasters: TArtifactSetEntry[] = [];\r\n        ['1', '2'].forEach((key) => {\r\n            const artifactSet: TArtifactSetKey = build[key] ?? 'NONE';\r\n            newArtifactSets.push(artifactSet);\r\n            newArtifactSetMasters.push(ARTIFACT_SET_MASTER[artifactSet] as TArtifactSetEntry);\r\n        });\r\n        characterInput.artifactSets.splice(0, characterInput.artifactSets.length, ...newArtifactSets);\r\n        characterInput.artifactSetMasters.splice(0, characterInput.artifactSetMasters.length, ...newArtifactSetMasters);\r\n\r\n        const newArtifactStatsMain: string[] = [];\r\n        ['1', '2'].forEach((key, index) => {\r\n            const value = build[key];\r\n            newArtifactStatsMain.push(value ?? ['5_HP', '5_'][index]);\r\n            if (key in build) {\r\n                artifactDetailInput[''][index] = build[key];\r\n            } else {\r\n                artifactDetailInput[''][index] = ['5_HP', '5_'][index];\r\n            }\r\n        });\r\n        ['3', '4', '5'].forEach((key) => {\r\n            const value = build[key];\r\n            newArtifactStatsMain.push(value ?? '');\r\n        });\r\n        artifactDetailInput[''].splice(0, artifactDetailInput[''].length, ...newArtifactStatsMain);\r\n\r\n        const newPriotitySubstat: string[] = [];\r\n        const newPriotitySubstatValue: number[] = [];\r\n        const newPriotitySubstatCount: number[] = [];\r\n        for (let i = 0; i < artifactDetailInput[''].length; i++) {\r\n            const subkey1 = '' + (i + 1);\r\n            const subkey2 = subkey1 + '';\r\n            const subkey3 = subkey1 + '';\r\n            const substat = build[subkey1];\r\n            const substatValue = build[subkey2];\r\n            const substatCount = build[subkey3];\r\n            newPriotitySubstat.push(substat ?? '');\r\n            newPriotitySubstatValue.push(substatValue !== undefined ? Number(substatValue) : GENSEN_MASTER_LIST[2].values[i]);\r\n            newPriotitySubstatCount.push(substatCount !== undefined ? Number(substatCount) : GENSEN_MASTER_LIST[2].counts[i]);\r\n        }\r\n        artifactDetailInput[''].splice(0, artifactDetailInput[''].length, ...newPriotitySubstat);\r\n        artifactDetailInput[''].splice(0, artifactDetailInput[''].length, ...newPriotitySubstatValue);\r\n        artifactDetailInput[''].splice(0, artifactDetailInput[''].length, ...newPriotitySubstatCount);\r\n\r\n        Object.keys(build).filter(s => !PROPERTY_MAP.has(s) && !['options', 'artifactScoring', 'supporterBuildname', 'artifact_list'].includes(s)).forEach(key => {\r\n            if (build[key] === null) {\r\n                conditionInput.conditionValues[key] = build[key];   // null\r\n            } else if (_.isString(build[key])) {\r\n                conditionInput.conditionValues[key] = Number(build[key]);\r\n            } else {\r\n                conditionInput.conditionValues[key] = build[key];\r\n            }\r\n        });\r\n\r\n        if ('options' in build) {\r\n            overwriteObject(optionInput.elementalResonance.conditionValues, {});\r\n            overwriteObject(optionInput.teamOption.conditionValues, {});\r\n            overwriteObject(optionInput.miscOption.conditionValues, {});\r\n            optionInput.teamMembers.splice(0, optionInput.teamMembers.length);\r\n            const keys = Object.keys(build.options);\r\n            if (keys.length) {\r\n                keys.forEach(key => {\r\n                    if (key === 'teamMembers' && _.isArray(build.options[key])) {\r\n                        optionInput.teamMembers.splice(0, optionInput.teamMembers.length, ...build.options[key]);\r\n                    } else if (key in ELEMENTAL_RESONANCE_MASTER || key === 'dendroOption') {\r\n                        // \r\n                        optionInput.elementalResonance.conditionValues[key] = build.options[key];\r\n                    } else {\r\n                        const astarIndex = key.indexOf('*');\r\n                        if (astarIndex != -1) {\r\n                            const workCharacter = key.substring(0, astarIndex);\r\n                            if (workCharacter in CHARACTER_MASTER) {\r\n                                // \r\n                                optionInput.teamOption.conditionValues[key] = build.options[key];\r\n                            } else {\r\n                                // \r\n                                optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                            }\r\n                        } else {\r\n                            // \r\n                            optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        if ('supporterBuildname' in build) {\r\n            const keys = Object.keys(build.supporterBuildname);\r\n            if (keys.length) {\r\n                overwriteObject(optionInput.supporterBuildname, {});\r\n                keys.forEach(key => {\r\n                    optionInput.supporterBuildname[key] = build.supporterBuildname[key];\r\n                });\r\n            }\r\n        }\r\n\r\n        if ('artifact_list' in build) {\r\n            const ARTIFACT_KEYS = Object.keys(ARTIFACT_TEMPLATE).sort();\r\n            const newList = build.artifact_list.filter((s: any) => _.isEqual(Object.keys(s).sort(), ARTIFACT_KEYS));\r\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length, ...newList);\r\n        } else {\r\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length);\r\n        }\r\n\r\n        overwriteObject(artifactDetailInput., artifactStatsSub);\r\n\r\n        console.debug('loadRecommendation', characterInput, artifactDetailInput, conditionInput, build);\r\n    }\r\n    catch (error) {\r\n        console.error(characterInput, artifactDetailInput, conditionInput, build);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeSavedata(characterInput: TCharacterInput, artifactDetailInput: TArtifactDetailInput, conditionInput: TConditionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // \r\n    resultObj[''] = characterInput.character;\r\n    // \r\n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.weapon;\r\n    // \r\n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // 1\r\n    resultObj['1'] = characterInput.artifactSets[0];\r\n    // 2\r\n    resultObj['2'] = characterInput.artifactSets[1];\r\n    // 1\r\n    resultObj['1'] = artifactDetailInput.[0];\r\n    // 2\r\n    resultObj['2'] = artifactDetailInput.[1];\r\n    // 3\r\n    resultObj['3'] = artifactDetailInput.[2];\r\n    // 4\r\n    resultObj['4'] = artifactDetailInput.[3];\r\n    // 5\r\n    resultObj['5'] = artifactDetailInput.[4];\r\n    // HP\r\n    resultObj['HP'] = artifactDetailInput.['HP'];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // HPP\r\n    resultObj['HPP'] = artifactDetailInput.['HP%'];\r\n    // P\r\n    resultObj['P'] = artifactDetailInput.['%'];\r\n    // P\r\n    resultObj['P'] = artifactDetailInput.['%'];\r\n    // *,  *, *\r\n    for (let i = 0; i < artifactDetailInput..length; i++) {\r\n        const substat = artifactDetailInput.[i];\r\n        if (substat) {\r\n            const key = '' + (i + 1);\r\n            resultObj[key] = substat;\r\n            resultObj[key + ''] = artifactDetailInput.[i];\r\n            resultObj[key + ''] = artifactDetailInput.[i];\r\n        }\r\n    }\r\n\r\n    for (const entry of conditionInput.checkboxList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n    for (const entry of conditionInput.selectList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n\r\n    resultObj['artifact_list'] = artifactDetailInput.artifact_list;\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeOptionsSavedata(character: string, optionInput: TOptionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // \r\n    {\r\n        const conditionValues = optionInput.elementalResonance.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n    // \r\n    {\r\n        const conditionValues = optionInput.teamOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (key.startsWith(character + '*')) return;\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        });\r\n        if (optionInput.teamMembers.length) {\r\n            resultObj['teamMembers'] = optionInput.teamMembers;\r\n        }\r\n    }\r\n    // \r\n    {\r\n        const conditionValues = optionInput.miscOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeSupporterBuildnameSavedata(buildnameSelection: TAnyObject, optionInput: TOptionInput) {\r\n    const result: TAnyObject = {};\r\n    const conditionKeys = Object.keys(optionInput.teamOption.conditionValues);\r\n    for (const supporter of Object.keys(buildnameSelection)) {\r\n        if (!buildnameSelection[supporter]) continue;\r\n        if (conditionKeys.filter(s => s.startsWith(supporter + '*')).length == 0) continue;\r\n        result[supporter] = buildnameSelection[supporter];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjCharacter(characterInput: TCharacterInput): TDamageDetail {\r\n    const result = {} as any;\r\n    try {\r\n        const characterMaster = characterInput.characterMaster as any;\r\n\r\n        let myTalentDetail;\r\n        const myTalentLevelArr = [characterInput[''], characterInput[''], characterInput['']];\r\n        let myDefaultKind: string | null;\r\n        let myDefaultElement: string | null;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n\r\n        //   \r\n        myDefaultElement = characterMaster[''] === '' ? characterMaster[''] : null;\r\n        ['', '', ''].forEach(category => {\r\n            myTalentDetail = characterMaster[category];\r\n            myDefaultKind = category + '';\r\n            result[category] = makeDamageDetailObjArr(myTalentDetail, myTalentLevelArr, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        });\r\n\r\n        ['', '', ''].forEach(category => {\r\n            const workCategory = '' + category;\r\n            let workTalentLevelArr = myTalentLevelArr;\r\n            if (workCategory in characterMaster) {\r\n                myTalentDetail = characterMaster[workCategory];\r\n                if ('' in myTalentDetail) {\r\n                    myDefaultKind = myTalentDetail[''];\r\n                    let myLevel;\r\n                    switch (myDefaultKind) {\r\n                        case '':\r\n                        case '':\r\n                        case '':\r\n                            myLevel = myTalentLevelArr[0];\r\n                            workTalentLevelArr = [myLevel, myLevel, myLevel];\r\n                            break;\r\n                        case '':\r\n                            myLevel = myTalentLevelArr[1];\r\n                            workTalentLevelArr = [myLevel, myLevel, myLevel];\r\n                            break;\r\n                        case '':\r\n                            myLevel = myTalentLevelArr[2];\r\n                            workTalentLevelArr = [myLevel, myLevel, myLevel];\r\n                            break;\r\n                    }\r\n                }\r\n                if ('' in myTalentDetail) {\r\n                    myDefaultElement = myTalentDetail[''];\r\n                }\r\n                const workObj = {\r\n                    : myTalentDetail[''],\r\n                    : makeDamageDetailObjArr(myTalentDetail, workTalentLevelArr, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory)\r\n                };\r\n                result[workCategory] = workObj;\r\n            }\r\n        });\r\n\r\n        // \r\n        myDefaultKind = '';\r\n        myDefaultElement = characterMaster[''];\r\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevelArr, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        // \r\n        myDefaultKind = '';\r\n        myDefaultElement = characterMaster[''];\r\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevelArr, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        result[''] = [] as TDamageDetailObj[];\r\n\r\n        // \r\n        if ('' in characterMaster) {\r\n            characterMaster[''].forEach((myTalentDetail: any) => {\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result[''].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // \r\n        characterMaster[''].forEach((myTalentDetail: any) => {\r\n            const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n            if (workArr.length > 0) result[''].push(...workArr);\r\n        });\r\n\r\n        // \r\n        if ('' in characterMaster) {\r\n            Object.keys(characterMaster['']).forEach(key => {\r\n                if (Number(key) > characterInput.) return;\r\n                myTalentDetail = characterMaster[''][key];\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result[''].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // \r\n        if (characterMaster[''] == '') {\r\n            if (myTalentChangeDetailObjArr.filter(s => s. && s..startsWith('@')).length == 0) {\r\n                ['', '', '', ''].forEach(cond => {\r\n                    myTalentChangeDetailObjArr.push({\r\n                        : null,\r\n                        : '',\r\n                        : null,\r\n                        : null,\r\n                        : '@' + cond,\r\n                        : null,\r\n                        : null,\r\n                        : null,\r\n                        HIT: null,\r\n                        : null,\r\n                        : null,\r\n                        : null,\r\n                        : null\r\n                    });\r\n                });\r\n            }\r\n            if ('' in characterMaster) {\r\n                if (Object.keys(characterMaster['']).filter(s => s == '').length == 0) {\r\n                    characterMaster[''][''] = 1;\r\n                }\r\n            } else {\r\n                characterMaster[''] = { : 1 };\r\n            }\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        // conditionMap.delete('');\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyCharacter = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjWeapon(characterInput: any) {\r\n    const result = {} as any;\r\n    try {\r\n        const name = characterInput.weapon;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n        if (!name || !weaponMaster) return result;\r\n\r\n        let myTalentDetail;\r\n        const myLevel = characterInput.;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        if ('' in weaponMaster) {\r\n            myTalentDetail = weaponMaster[''];\r\n            result[''] = makeDamageDetailObjArr(myTalentDetail, myLevel, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            let condition = detailObj[''];\r\n            if (_.isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            let condition = detailObj[''];\r\n            if (_.isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyWeapon = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjArtifactSets(characterInput: any) {\r\n    const result = [] as any;\r\n    try {\r\n        let myTalentDetail;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        const artifactSetMasters = characterInput.artifactSetMasters.filter((s: any) => s);\r\n\r\n        if (artifactSetMasters.length > 0) {\r\n            const damageDetailObjArr = [] as TDamageDetailObj[];\r\n            if ('2' in artifactSetMasters[0]) {\r\n                myTalentDetail = artifactSetMasters[0]['2'];\r\n                damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n            }\r\n            if (artifactSetMasters.length == 2) {\r\n                if (artifactSetMasters[0] == artifactSetMasters[1]) {\r\n                    myTalentDetail = artifactSetMasters[0]['4'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                } else {\r\n                    myTalentDetail = artifactSetMasters[1]['2'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                }\r\n            }\r\n            result[''] = damageDetailObjArr;\r\n        }\r\n\r\n        const vision = characterInput.characterMaster.;\r\n        const elementalReactionArr = Object.keys((ELEMENTAL_REACTION_MASTER as any)[vision]);\r\n        if (['', ''].includes(vision) && !elementalReactionArr.includes('')) {\r\n            elementalReactionArr.push('');\r\n        }\r\n\r\n        const workArr = [] as any[];\r\n        myStatusChangeDetailObjArr.forEach(detailObj => {\r\n            if (detailObj[''] && detailObj[''].startsWith('')) { // for \r\n                if (elementalReactionArr.filter(s => detailObj[''].startsWith('=' + s)).length === 0) {\r\n                    return;\r\n                }\r\n            }\r\n            workArr.push(detailObj);\r\n        });\r\n\r\n        result[CHANGE_KIND_STATUS] = workArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        workArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyArtifactSets = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjElementalResonance(characterInput: any) {\r\n    const result = [] as any;\r\n    try {\r\n        const myInputCategory = '';\r\n        const damageDetailObjArr = [] as TDamageDetailObj[];\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n        for (const myTalentDetail of ELEMENTAL_RESONANCE_MASTER_LIST) {\r\n            const workObj = _.cloneDeep(myTalentDetail);\r\n            if (workObj.) {\r\n                workObj..forEach((detailObj: TAnyObject) => {\r\n                    detailObj. = myTalentDetail.key;\r\n                });\r\n            }\r\n            damageDetailObjArr.push(...makeDamageDetailObjArr(workObj, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n        }\r\n        result[''] = damageDetailObjArr;\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailElementalResonance = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDetailObj(\r\n    detailObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    inputCategory: string | null,\r\n    opt_condition?: string,\r\n): TDamageDetailObj {\r\n    let my = detailObj. ?? defaultKind;\r\n    let my = detailObj. ?? null;\r\n    if (my && my.indexOf('.') !== -1) {\r\n        my = my.substring(my.indexOf('.') + 1);\r\n        my = my.substring(0, my.indexOf('.'));\r\n    }\r\n\r\n    let my = detailObj. ?? 0;\r\n    if (_.isPlainObject(my)) {  // |\r\n        if (level && level in my) {\r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = 0;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    let my = detailObj. ?? opt_condition ?? null;\r\n    if (_.isPlainObject(my) && level && level in my) {  // \r\n        my = my[level];\r\n    }\r\n\r\n    let my = detailObj. ?? null;\r\n    if (_.isPlainObject(my)) {\r\n        if (level && level in my) { // for \r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = null;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    let my = detailObj. ?? null; // for \r\n    if (_.isPlainObject(my)) {\r\n        if (level && level in my) {\r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = null;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    return {\r\n        : detailObj. ?? null,\r\n        : my,\r\n        : detailObj. ?? defaultElement ?? null,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        HIT: detailObj.HIT ?? null,\r\n        : detailObj. ?? null,\r\n        : detailObj. ?? inputCategory === '',\r\n        : detailObj. ?? null,\r\n        : detailObj. ?? null,\r\n    }\r\n}\r\n\r\nexport function getChangeKind(kind: string) {\r\n    if (kind in TEMPLATE\r\n        || new RegExp('[].+(|)').exec(kind)\r\n        || [''].includes(kind)  // for \r\n        || new RegExp('?[]').exec(kind)\r\n        || ['', ''].includes(kind)\r\n        || [''].includes(kind)\r\n        || ['', ''].includes(kind)\r\n        || ['', '', '', ''].includes(kind)\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n    ) {\r\n        return 'STATUS';\r\n    } else if (kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind == ''\r\n        || kind == ''\r\n    ) {   // ex.,\r\n        return 'TALENT';\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function makeDamageDetailObjArr(\r\n    talentDataObj: any,\r\n    level: number[] | number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    statusChangeDetailObjArr: any[],\r\n    talentChangeDetailObjArr: any[],\r\n    inputCategory: string,\r\n    opt_condition?: string,\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as any[];\r\n    if (!('' in talentDataObj)) return resultArr;\r\n\r\n    talentDataObj[''].forEach((detailObj: TAnyObject) => {\r\n        let myLevel = null;\r\n        if (level == null) {\r\n            myLevel = null;\r\n        } else if (_.isArray(level)) {\r\n            switch (defaultKind) {\r\n                case '':\r\n                case '':\r\n                case '':\r\n                    myLevel = level[0];\r\n                    break;\r\n                case '':\r\n                    myLevel = level[1];\r\n                    break;\r\n                case '':\r\n                    myLevel = level[2];\r\n                    break;\r\n            }\r\n            if (detailObj.) {\r\n                let isChanged = false;\r\n                switch (detailObj.) {\r\n                    case '':\r\n                    case '':\r\n                    case '':\r\n                        myLevel = level[0];\r\n                        isChanged = true;\r\n                        break;\r\n                    case '':\r\n                        myLevel = level[1];\r\n                        isChanged = true;\r\n                        break;\r\n                    case '':\r\n                        myLevel = level[2];\r\n                        isChanged = true;\r\n                        break;\r\n                }\r\n                if (isChanged) {\r\n                    console.info('makeDamageDetailObjArr', detailObj., myLevel, defaultKind, detailObj);\r\n                }\r\n            }\r\n        } else {\r\n            myLevel = level;\r\n        }\r\n        const resultObj = makeDetailObj(detailObj, myLevel, defaultKind, defaultElement, inputCategory, opt_condition);\r\n        const my = resultObj. as string;\r\n        if (statusChangeDetailObjArr != null && getChangeKind(my) === 'STATUS') {\r\n            resultObj[''] = detailObj. ?? null;\r\n            statusChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        if (talentChangeDetailObjArr != null && getChangeKind(my) === 'TALENT') {\r\n            resultObj[''] = detailObj. ?? null;\r\n            talentChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        resultArr.push(resultObj);\r\n    });\r\n\r\n    return resultArr;\r\n}\r\n\r\nexport function makeTeamOptionDetailObjArr(\r\n    detailObjArr: any[],\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as TDamageDetailObj[];\r\n    detailObjArr.forEach((detailObj: { [x: string]: any; }) => {\r\n        const resultObj = makeDetailObj(detailObj, null, null, null, null);\r\n        if (resultObj) {\r\n            resultArr.push(resultObj);\r\n        }\r\n    });\r\n    return resultArr;\r\n}\r\n\r\n// \r\n// @prefixpostfix\r\n// @prefix(From)-(To)postfix\r\n// @prefix1,2,3postfix\r\n// =prefixpostfix\r\n// @\r\n// =\r\n// ={min=|,max=|,step=}\r\n// OR   A|B\r\n// AND  A&B\r\n//  A^B\r\nexport function makeConditionExclusionMapFromStr(\r\n    conditionStr: string,\r\n    conditionMap: Map<string, string[] | object | null>,\r\n    exclusionMap: Map<string, string[]>\r\n) {\r\n    // \r\n    let exclusionStr: string | undefined = undefined;\r\n    const workArr = conditionStr.split('^');\r\n    if (workArr.length > 1) {\r\n        exclusionStr = workArr[1];\r\n    }\r\n    const workStr = workArr[0];\r\n    if (workStr.includes('|')) {\r\n        // OR for \r\n        const conditionStrArr = workStr.split('|');\r\n        conditionStrArr.forEach((elem) => {\r\n            makeConditionExclusionMapFromStrSub(elem, conditionMap, exclusionMap, exclusionStr);\r\n        })\r\n    } else {\r\n        // AND\r\n        const conditionStrArr = workStr.split('&');\r\n        conditionStrArr.forEach((elem) => {\r\n            makeConditionExclusionMapFromStrSub(elem, conditionMap, exclusionMap, exclusionStr);\r\n        })\r\n    }\r\n}\r\n\r\nexport function getConditionOpkind(conditionStr: string) {\r\n    let opkind = undefined;\r\n    if (conditionStr.includes('@')) {   // \r\n        opkind = '@';\r\n    } else if (conditionStr.includes('>=')) {   //  \r\n        opkind = '>=';\r\n    } else if (conditionStr.includes('<=')) {   //  \r\n        opkind = '<=';\r\n    } else if (conditionStr.includes('>')) {    //  \r\n        opkind = '>';\r\n    } else if (conditionStr.includes('<')) {    //  \r\n        opkind = '<';\r\n    } else if (conditionStr.includes('=')) {    // \r\n        opkind = '=';\r\n    }\r\n    return opkind;\r\n}\r\n\r\nexport const NUMBER_CONDITION_VALUE_RE = /^\\s*{.+}\\s*$/;\r\n\r\nfunction makeConditionExclusionMapFromStrSub(\r\n    conditionStr: string,\r\n    conditionMap: Map<string, string[] | object | null>,\r\n    exclusionMap: Map<string, string[]>,\r\n    exclusion?: string,\r\n) {\r\n    const opkind = getConditionOpkind(conditionStr);\r\n    const workArr = opkind ? conditionStr.split(opkind) : [conditionStr];\r\n    const name = workArr[0];\r\n    if (opkind === undefined) {\r\n        pushToMapValueArray(conditionMap, name, null);  // null\r\n    } else if (opkind === '@' || opkind === '=') {\r\n        if (workArr.length === 2) {\r\n            if (NUMBER_CONDITION_VALUE_RE.test(workArr[1])) {\r\n                try {\r\n                    const workObj = JSON.parse(workArr[1]);\r\n                    const min = workObj.min;\r\n                    const max = workObj.max;\r\n                    if (!_.isNumber(min) && !_.isString(min)) {\r\n                        console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                    } if (max !== undefined && !_.isNumber(max) && !_.isString(max)) {\r\n                        console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                    } else {\r\n                        const conditionObj = {\r\n                            min: min,\r\n                            max: max,\r\n                            step: isNumeric(workObj.step) ? Number(workObj.step) : 1,\r\n                            initial: isNumeric(workObj.initial) ? Number(workObj.initial) : min,\r\n                        };\r\n                        pushToMapValueArray(conditionMap, name, conditionObj);  // object\r\n                    }\r\n                } catch (error) {\r\n                    console.error(error);\r\n                    console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                }\r\n            } else if (workArr[1].includes(',')) {\r\n                const re = new RegExp('([^0-9]*?)([\\\\+\\\\-0-9\\\\.,]+)(.*)');  // :-10,+60%\r\n                const reRet = re.exec(workArr[1]);\r\n                if (reRet) {\r\n                    const prefix = reRet[1];\r\n                    const condValueArr = reRet[2].split(',');\r\n                    const postfix = reRet[3];\r\n                    condValueArr.forEach(value => {\r\n                        pushToMapValueArray(conditionMap, name, prefix + value + postfix);  // string[]\r\n                    })\r\n                }\r\n            } else if (workArr[1].includes('-')) {\r\n                const re = new RegExp('([^0-9\\\\.]*)(-?[0-9\\\\.]+)-(-?[0-9\\\\.]+)(.*)');   // +prefix\r\n                const re2 = new RegExp('/([0-9\\\\.]+)(.*)');\r\n                const reRet = re.exec(workArr[1]);\r\n                if (reRet) {\r\n                    const prefix = reRet[1];\r\n                    const rangeStart = Number(reRet[2]);\r\n                    const rangeEnd = Number(reRet[3]);\r\n                    let step = rangeStart;\r\n                    let postfix = reRet[4];\r\n                    if (postfix) {\r\n                        const re2Ret = re2.exec(postfix);\r\n                        if (re2Ret) {\r\n                            step = Number(re2Ret[1]);\r\n                            postfix = re2Ret[2];\r\n                        }\r\n                    }\r\n                    step = step ? step : 1;\r\n                    for (let i = rangeStart; i < rangeEnd; i = addDecimal(i, step, rangeEnd)) {\r\n                        pushToMapValueArray(conditionMap, name, prefix + String(i) + postfix);  // string[]\r\n                    }\r\n                    pushToMapValueArray(conditionMap, name, prefix + String(rangeEnd) + postfix);  // string[]\r\n                } else {\r\n                    pushToMapValueArray(conditionMap, name, workArr[1]);  // string[]\r\n                }\r\n            } else {\r\n                pushToMapValueArray(conditionMap, name, workArr[1]);  // string[]\r\n            }\r\n        } else {\r\n            console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n        }\r\n    }\r\n    if (exclusion) {\r\n        exclusion.split(',').forEach(e => {\r\n            pushToMapValueArray(exclusionMap, name, e);  // string[]\r\n        })\r\n    }\r\n}\r\n\r\nexport function setupConditionValues(\r\n    conditionInput: TConditionInput,\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    try {\r\n        const workConditionValues = _.cloneDeep(conditionInput.conditionValues);\r\n        const workCheckboxList: TCheckboxEntry[] = [];\r\n        const workSelectList: TSelectEntry[] = [];\r\n        const workNumberList: TNumberEntry[] = [];\r\n\r\n        // \r\n        for (const master of [characterInput.characterMaster, characterInput.weaponMaster, ...characterInput.artifactSetMasters]) {\r\n            if ('' in master) {\r\n                for (const key of Object.keys((master as any)[''])) {\r\n                    if (!(key in workConditionValues)) {\r\n                        workConditionValues[key] = (master as any)[''][key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const conditionMap = makeConditionMapFromCharacterInput(characterInput);\r\n        const exclusionMap = makeExclusionMapFromCharacterInput(characterInput);\r\n\r\n        if (optionInput.elementalResonance) {\r\n            for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\r\n                if (!optionInput.elementalResonance.conditionValues[key]) continue;\r\n                const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\r\n                if (!master.) continue;\r\n                for (const detailObj of master.) {\r\n                    if (!detailObj.) continue;\r\n                    makeConditionExclusionMapFromStr(detailObj., conditionMap, exclusionMap);\r\n                }\r\n            }\r\n        }\r\n\r\n        conditionMap.forEach((value, key) => {\r\n            if (value === null) {\r\n                if (workCheckboxList.filter(s => s.name == key).length === 0) {\r\n                    workCheckboxList.push({ name: key });\r\n                }\r\n            } else if (_.isArray(value)) {\r\n                if (workSelectList.filter(s => s.name == key).length === 0) {\r\n                    const required = value[0].startsWith('required_');\r\n                    workSelectList.push({\r\n                        name: key,\r\n                        options: value,\r\n                        required: required,\r\n                    });\r\n                }\r\n            } else if (_.isPlainObject(value)) {\r\n                if (workNumberList.filter(s => s.name == key).length === 0) {\r\n                    const numberObj = value as any;\r\n                    const entry = {\r\n                        name: key,\r\n                        min: numberObj.min,\r\n                        max: numberObj.max,\r\n                        step: numberObj.step,\r\n                        initial: numberObj.initial,\r\n                    };\r\n                    workNumberList.push(entry);\r\n                }\r\n            }\r\n            if (key in workConditionValues && workConditionValues[key] !== null) {\r\n                const conditionValue = workConditionValues[key]; // boolean:checkbox / number:select,input[number]\r\n                if ((_.isBoolean(conditionValue) && conditionValue) || (_.isNumber(conditionValue) && conditionValue > 0)) {\r\n                    const exclusions = exclusionMap.get(key);\r\n                    if (exclusions) {\r\n                        for (const exclusion of exclusions) {\r\n                            if (exclusion in workConditionValues) {\r\n                                const conditionValue = conditionMap.get(exclusion);\r\n                                if (conditionValue === null) {  // checkbox\r\n                                    workConditionValues[exclusion] = false;\r\n                                } else if (_.isArray(value)) {  // select\r\n                                    workConditionValues[exclusion] = 0;\r\n                                } else if (_.isPlainObject(value)) {    // number\r\n                                    const initialValue = (value as any).initial;\r\n                                    const minValue = (value as any).min;\r\n                                    if (isNumeric(initialValue)) {\r\n                                        workConditionValues[exclusion] = Number(initialValue);\r\n                                    } else if (isNumeric(minValue)) {\r\n                                        workConditionValues[exclusion] = Number(minValue);\r\n                                    } else {\r\n                                        workConditionValues[exclusion] = 0;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (value === null) {   // checkbox\r\n                    let checked = true;\r\n                    const arr = exclusionMap.get(key);\r\n                    if (arr && arr.filter(s => workConditionValues[s]).length > 0) {\r\n                        checked = false;\r\n                    }\r\n                    workConditionValues[key] = checked;\r\n                } else if (_.isArray(value)) {  // select\r\n                    let selectedIndex = value.length - 1;\r\n                    const arr = exclusionMap.get(key);\r\n                    if (arr && arr.filter(s => workConditionValues[s]).length > 0) {\r\n                        selectedIndex = 0;\r\n                    }\r\n                    workConditionValues[key] = selectedIndex;\r\n                } else if (_.isPlainObject(value)) {    // number\r\n                    const initialValue = (value as any).initial;\r\n                    const minValue = (value as any).min;\r\n                    if (isNumeric(initialValue)) {\r\n                        workConditionValues[key] = Number(initialValue);\r\n                    } else if (isNumeric(minValue)) {\r\n                        workConditionValues[key] = Number(minValue);\r\n                    } else {\r\n                        workConditionValues[key] = 0;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        if (!_.isEqual(conditionInput.conditionValues, workConditionValues)) {\r\n            overwriteObject(conditionInput.conditionValues, workConditionValues);\r\n        }\r\n        if (!_.isEqual(conditionInput.checkboxList, workCheckboxList)) {\r\n            conditionInput.checkboxList.splice(0, conditionInput.checkboxList.length, ...workCheckboxList);\r\n        }\r\n        if (!_.isEqual(conditionInput.selectList, workSelectList)) {\r\n            conditionInput.selectList.splice(0, conditionInput.selectList.length, ...workSelectList);\r\n        }\r\n        if (!_.isEqual(conditionInput.numberList, workNumberList)) {\r\n            conditionInput.numberList.splice(0, conditionInput.numberList.length, ...workNumberList);\r\n        }\r\n    } catch (error) {\r\n        console.error(conditionInput, characterInput, optionInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeConditionMapFromCharacterInput(characterInput: TCharacterInput) {\r\n    const result = new Map() as Map<string, any[] | null | object>;\r\n    [\r\n        characterInput.damageDetailMyCharacter,\r\n        characterInput.damageDetailMyWeapon,\r\n        characterInput.damageDetailMyArtifactSets,\r\n    ].forEach((damageDetail) => {\r\n        if (damageDetail && damageDetail.) {\r\n            damageDetail..forEach((value, key) => {\r\n                result.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport function makeExclusionMapFromCharacterInput(characterInput: TCharacterInput) {\r\n    const result = new Map() as Map<string, string[]>;\r\n    [\r\n        characterInput.damageDetailMyCharacter,\r\n        characterInput.damageDetailMyWeapon,\r\n        characterInput.damageDetailMyArtifactSets,\r\n    ].forEach((damageDetail) => {\r\n        if (damageDetail && damageDetail.) {\r\n            damageDetail..forEach((value, key) => {\r\n                result.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport function getStatValue(stat: string, statsObj: TStats) {\r\n    let result;\r\n    if (stat in statsObj) {\r\n        result = statsObj[stat];\r\n    } else {\r\n        const re = /(.+)X([0-7])$/;\r\n        const reRet = re.exec(stat);\r\n        if (reRet) {\r\n            if (reRet[1] in statsObj) {\r\n                result = statsObj[reRet[1]];\r\n                let n = Number(reRet[2]);\r\n                for (let i = 1; i <= 3; i++) {\r\n                    if ((n % 2) == 1) {\r\n                        const vStat: string = reRet[1] + 'V' + i;\r\n                        if (vStat in statsObj) {\r\n                            result -= statsObj[vStat];\r\n                        }\r\n                    }\r\n                    n = Math.trunc(n / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (result === undefined) {\r\n        console.warn(stat, statsObj); // \r\n        result = 0; // fixed\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function updateNumberConditionValues(\r\n    conditionInput: TConditionInput,\r\n    characterInput: TCharacterInput,\r\n    statsObj: TStats,\r\n) {\r\n    const conditionMap = makeConditionMapFromCharacterInput(characterInput);\r\n    conditionMap.forEach((value, key) => {\r\n        if (_.isPlainObject(value)) {\r\n            const numberEntryArr = conditionInput.numberList.filter(s => s.name == key);\r\n            if (numberEntryArr.length > 0) {\r\n                let minValue = (value as any).min;\r\n                let maxValue = (value as any).max;\r\n                if (_.isString(minValue) || _.isString(maxValue)) {\r\n                    if (_.isString(minValue)) {\r\n                        minValue = getStatValue(minValue, statsObj);\r\n                    }\r\n                    if (_.isString(maxValue)) {\r\n                        maxValue = getStatValue(maxValue, statsObj);\r\n                    }\r\n                    numberEntryArr[0].min = minValue;\r\n                    numberEntryArr[0].max = maxValue;\r\n                    if (key in conditionInput.conditionValues) {\r\n                        const value = conditionInput.conditionValues[key];\r\n                        if (_.isNumber(value)) {\r\n                            if (value < minValue) {\r\n                                conditionInput.conditionValues[key] = minValue;\r\n                            } else if (maxValue !== undefined && value > maxValue) {\r\n                                conditionInput.conditionValues[key] = maxValue;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction pushToMapValueArray(map: Map<any, any>, key: any, value: any) {\r\n    if (value === null) {    // checkbox\r\n        if (!map.has(key)) {\r\n            map.set(key, null);\r\n        }\r\n    } else if (_.isString(value)) { // select\r\n        if (map.has(key)) {\r\n            const oldValue = map.get(key);\r\n            if (oldValue === null) {\r\n                map.set(key, [value]);\r\n            } else if (_.isArray(oldValue)) {\r\n                if (!oldValue.includes(value)) {\r\n                    map.get(key).push(value);\r\n                }\r\n            } else {\r\n                console.error(map, key, value);\r\n            }\r\n        } else {\r\n            map.set(key, [value]);\r\n        }\r\n    } else if (_.isPlainObject(value)) {    // number\r\n        map.set(key, value);\r\n    }\r\n}\r\n\r\nfunction getDecimalLength(value: number): number {\r\n    const arr = ('' + value).split('.');\r\n    return arr.length > 1 ? arr[1].length : 0;\r\n}\r\n\r\nexport function multiplyDecimal(value1: number, value2: number): number {\r\n    const decimalLength = getDecimalLength(value1) + getDecimalLength(value2);\r\n    const intValue1 = Number(('' + value1).replace('.', ''));\r\n    const intValue2 = Number(('' + value2).replace('.', ''));\r\n    const result = (intValue1 * intValue2) / Math.pow(10, decimalLength);\r\n    return Number(result);\r\n}\r\n\r\nexport function addDecimal(value1: number, value2: number, opt_max?: number): number {\r\n    const k = Math.pow(10, Math.max(getDecimalLength(value1), getDecimalLength(value2)));\r\n    let result = (multiplyDecimal(value1, k) + multiplyDecimal(value2, k)) / k;\r\n    if (opt_max != undefined) {\r\n        result = Math.min(result, opt_max);\r\n    }\r\n    return result;\r\n}\r\n\r\n// function analyzeFormulaStr(\r\n//     formulaStr: number | string,\r\n//     opt_defaultItem: string | null = null\r\n// ) {\r\n//     const resultArr = [] as any[];\r\n//     const re = new RegExp('([\\\\+\\\\-\\\\*/]?)([^\\\\+\\\\-\\\\*/]+)(.*)');\r\n//     let workStr = String(formulaStr);\r\n//     // eslint-disable-next-line no-constant-condition\r\n//     while (true) {\r\n//         const reRet = re.exec(workStr);\r\n//         if (!reRet) {\r\n//             resultArr.push(workStr);\r\n//             break;\r\n//         }\r\n//         if (reRet[1]) { // + - * /\r\n//             resultArr.push(reRet[1]);\r\n//         }\r\n//         resultArr.push(analyzeFormulaStrSub(reRet[2], opt_defaultItem));\r\n//         if (!reRet[3]) {\r\n//             break;\r\n//         }\r\n//         workStr = reRet[3];\r\n//     }\r\n//     return resultArr;\r\n// }\r\n//\r\n// function analyzeFormulaStrSub(\r\n//     formulaStr: string,\r\n//     opt_defaultItem: string | null = null\r\n// ) {\r\n//     const resultArr = [] as any;\r\n//     if (isNumeric(formulaStr)) {\r\n//         resultArr.push(Number(formulaStr));\r\n//     } else {\r\n//         const strArr = (formulaStr as string).split('%');\r\n//         if (strArr.length == 1) {\r\n//             resultArr.push(strArr[0]);\r\n//         } else {\r\n//             resultArr.push(Number(strArr[0]) / 100);\r\n//             resultArr.push('*');\r\n//             if (strArr[1].length > 0) {\r\n//                 resultArr.push(strArr[1]);\r\n//             } else if (opt_defaultItem != null) {\r\n//                 resultArr.push(opt_defaultItem);\r\n//             }\r\n//         }\r\n//     }\r\n//     return resultArr;\r\n// }\r\n\r\nexport function makeFormulaTemplate(\r\n    formula: number | string | null | undefined,\r\n) {\r\n    let result: string | null = '';\r\n    if (formula === undefined || formula === null) {\r\n        result = null;\r\n    } else if (_.isNumber(formula) || isNumeric(formula)) {\r\n        result = String(formula);\r\n    } else {\r\n        const symbols = \"!\\\"&'()*+,-/:;<=>?@[\\\\]^`|~\";\r\n        const escapedSymbols = symbols.split('').map(s => '\\\\' + s).join('');\r\n        const re = new RegExp('([^' + escapedSymbols + ']+|[' + escapedSymbols + ']+)', 'g');\r\n        let reRet;\r\n        while ((reRet = re.exec(formula)) !== null) {\r\n            let item = reRet[1];\r\n            if (!symbols.includes(item.substring(0, 1))) {\r\n                item = _.trim(item);\r\n                if (isNumeric(item)) {\r\n                    result += item;\r\n                } else if (item.length) {\r\n                    if (item.includes('%')) {   // 123.4% or 12.34%HP %\r\n                        const arr = item.split('%').map(s => _.trim(s));\r\n                        result += arr[0] + '/100*';\r\n                        item = arr[1].length ? arr[1] : '';\r\n                    }\r\n                    result += '${' + item + '}';\r\n                }\r\n            } else {\r\n                result += item;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getMaxConstellation(characterMaster: TCharacterDetail) {\r\n    let max = 0;\r\n    if ('' in characterMaster) {\r\n        max = Object.keys(characterMaster.).length;\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function getMaxTalentLevel(characterMaster: TCharacterDetail, key: string) {\r\n    let max = 10;\r\n    if (key in characterMaster) {\r\n        const talentObj = (characterMaster as any)[key];\r\n        if ('' in talentObj) {\r\n            for (const detailObj of talentObj.) {\r\n                if ('' in detailObj && _.isPlainObject(detailObj.)) {\r\n                    const work = Object.keys(detailObj.).length;\r\n                    if (max < work) max = work;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function setupTeamOption(optionInput: TOptionInput) {\r\n    const optionDetails1: TDamageDetailObj[] = [];\r\n    const optionDetails2: TDamageDetailObj[] = [];\r\n    const conditionMap = new Map<string, string[] | object | null>();\r\n    const exclusionMap = new Map<string, string[]>();\r\n    const checkboxList: TCheckboxEntry[] = [];\r\n    const selectList: TSelectEntry[] = [];\r\n    const numberList: TNumberEntry[] = [];\r\n    Object.keys(optionInput.supporters).forEach(key => {\r\n        const workDetails1 = optionInput.supporters[key]?.optionDetails1;\r\n        const workDetails2 = optionInput.supporters[key]?.optionDetails2;\r\n        const workMap1 = optionInput.supporters[key]?.conditionMap;\r\n        const workMap2 = optionInput.supporters[key]?.exclusionMap;\r\n        if (workDetails1 !== undefined) {\r\n            optionDetails1.push(...workDetails1);\r\n        }\r\n        if (workDetails2 !== undefined) {\r\n            optionDetails2.push(...workDetails2);\r\n        }\r\n        if (workMap1 !== undefined) {\r\n            workMap1.forEach((value, key) => {\r\n                conditionMap.set(key, value);\r\n                if (value === null) { // checkbox\r\n                    if (checkboxList.filter((s) => s.name == key).length === 0) {\r\n                        checkboxList.push({\r\n                            name: key,\r\n                            displayName: key.replace(/^.+\\*/, ''),\r\n                        })\r\n                    }\r\n                } else if (_.isArray(value)) {  // select\r\n                    if (selectList.filter((s) => s.name == key).length === 0) {\r\n                        const required = value[0].startsWith('required_');\r\n                        selectList.push({\r\n                            name: key,\r\n                            displayName: key.replace(/^.+\\*/, ''),\r\n                            options: (required || !value[0]) ? value : ['', ...value],\r\n                            required: required,\r\n                        })\r\n                    }\r\n                } else if (_.isPlainObject(value)) {  // number\r\n                    if (numberList.filter((s) => s.name == key).length === 0) {\r\n                        numberList.push({\r\n                            name: key,\r\n                            displayName: key.replace(/^.+\\*/, ''),\r\n                            min: (value as any).min,\r\n                            max: (value as any).max,\r\n                            step: (value as any).step,\r\n                            initial: (value as any).initial,\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        if (workMap2 !== undefined) {\r\n            workMap2.forEach((value, key) => {\r\n                exclusionMap.set(key, value);\r\n            })\r\n        }\r\n    })\r\n    optionInput.teamOption.optionDetails1.splice(0, optionInput.teamOption.optionDetails1.length, ...optionDetails1);\r\n    optionInput.teamOption.optionDetails2.splice(0, optionInput.teamOption.optionDetails2.length, ...optionDetails2);\r\n    optionInput.teamOption.conditionMap = conditionMap;\r\n    optionInput.teamOption.exclusionMap = exclusionMap;\r\n    optionInput.teamOption.checkboxList.splice(0, optionInput.teamOption.checkboxList.length, ...checkboxList);\r\n    optionInput.teamOption.selectList.splice(0, optionInput.teamOption.selectList.length, ...selectList);\r\n    optionInput.teamOption.numberList.splice(0, optionInput.teamOption.numberList.length, ...numberList);\r\n}\r\n\r\nexport function setupMiscOption(optionInput: TOptionInput) {\r\n    const optionDetails1: TDamageDetailObj[] = [];\r\n    const optionDetails2: TDamageDetailObj[] = [];\r\n    const conditionMap = new Map<string, string[] | object | null>();\r\n    const exclusionMap = new Map<string, string[]>();\r\n    const checkboxList: TCheckboxEntry[] = [];\r\n    const selectList: TSelectEntry[] = [];\r\n    const numberList: TNumberEntry[] = [];\r\n    [OPTION1_MASTER_LIST, OPTION2_MASTER_LIST].forEach(masterList => {\r\n        for (const entry of masterList) {\r\n            if ('' in entry) {\r\n                for (const detailObj of entry.) {\r\n                    if (!('' in detailObj)) {\r\n                        (detailObj as any). = entry.key;\r\n                    }\r\n                }\r\n            }\r\n            makeDamageDetailObjArr(entry, null, null, null, optionDetails1, optionDetails2, '');\r\n        }\r\n    })\r\n    optionDetails1.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    });\r\n    optionDetails2.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    });\r\n    conditionMap.forEach((value, key) => {\r\n        if (value === null) { // checkbox\r\n            if (checkboxList.filter((s) => s.name == key).length === 0) {\r\n                checkboxList.push({\r\n                    name: key,\r\n                    displayName: key.replace(/^.+\\*/, ''),\r\n                })\r\n            }\r\n        } else if (_.isArray(value)) {  // select\r\n            if (selectList.filter((s) => s.name == key).length === 0) {\r\n                const required = value[0].startsWith('required_');\r\n                selectList.push({\r\n                    name: key,\r\n                    displayName: key.replace(/^.+\\*/, ''),\r\n                    options: (required || !value[0]) ? value : ['', ...value],\r\n                    required: required,\r\n                })\r\n            }\r\n        } else if (_.isPlainObject(value)) {  // number\r\n            if (numberList.filter((s) => s.name == key).length === 0) {\r\n                numberList.push({\r\n                    name: key,\r\n                    displayName: key.replace(/^.+\\*/, ''),\r\n                    min: (value as any).min,\r\n                    max: (value as any).max,\r\n                    step: (value as any).step,\r\n                    initial: (value as any).initial,\r\n                })\r\n            }\r\n        }\r\n    });\r\n    optionInput.miscOption.optionDetails1.splice(0, optionInput.miscOption.optionDetails1.length, ...optionDetails1);\r\n    optionInput.miscOption.optionDetails2.splice(0, optionInput.miscOption.optionDetails2.length, ...optionDetails2);\r\n    optionInput.miscOption.conditionMap = conditionMap;\r\n    optionInput.miscOption.exclusionMap = exclusionMap;\r\n    optionInput.miscOption.checkboxList.splice(0, optionInput.miscOption.checkboxList.length, ...checkboxList);\r\n    optionInput.miscOption.selectList.splice(0, optionInput.miscOption.selectList.length, ...selectList);\r\n    optionInput.miscOption.numberList.splice(0, optionInput.miscOption.numberList.length, ...numberList);\r\n}\r\n\r\nexport async function updateConditionsByTeam(\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const character = characterInput.character;\r\n    const teamMembers: string[] = [character];\r\n    if (optionInput?.teamMembers) {\r\n        teamMembers.push(...optionInput.teamMembers.filter(s => s && s != character));\r\n    }\r\n    const myVision = CHARACTER_MASTER[character as TCharacterKey].;\r\n\r\n    // []*, []*\r\n    const regionCountMap = new Map<string, number>();\r\n    // []\r\n    let totalEnergyCost = 0;\r\n    // Map<, >\r\n    const visionCountMap = new Map<string, number>();\r\n    for (const entry of teamMembers) {\r\n        const characterDetail = await getCharacterMasterDetail(entry as TCharacterKey);\r\n        if (characterDetail.region) {\r\n            const count = regionCountMap.get(characterDetail.region);\r\n            if (count) {\r\n                regionCountMap.set(characterDetail.region, count + 1);\r\n            } else {\r\n                regionCountMap.set(characterDetail.region, 1);\r\n            }\r\n        }\r\n        if ('' in characterDetail.) {\r\n            totalEnergyCost += Number(characterDetail..);\r\n        }\r\n        if (characterDetail.) {\r\n            const count = visionCountMap.get(characterDetail.);\r\n            if (count) {\r\n                visionCountMap.set(characterDetail., count + 1);\r\n            } else {\r\n                visionCountMap.set(characterDetail., 1);\r\n            }\r\n        }\r\n    }\r\n    regionCountMap.forEach((value, key) => {\r\n        conditionInput.conditionValues['[]' + key + ''] = value;\r\n        conditionInput.conditionValues['[]' + key + ''] = teamMembers.length - value;\r\n    })\r\n    if (totalEnergyCost) {\r\n        conditionInput.conditionValues['[]'] = totalEnergyCost;\r\n    }\r\n    ALL_ELEMENTS.forEach(key => {\r\n        conditionInput.conditionValues['[]' + key + ''] = 0;\r\n        conditionInput.conditionValues['[]' + key + ''] = 0;\r\n    })\r\n    visionCountMap.forEach((value, key) => {\r\n        conditionInput.conditionValues['[]' + key + ''] = value;\r\n        conditionInput.conditionValues['[]' + key + ''] = teamMembers.length - value;\r\n        if (key == myVision) {\r\n            conditionInput.conditionValues['[]'] = value - 1;\r\n            conditionInput.conditionValues['[]'] = teamMembers.length - value;\r\n        }\r\n    })\r\n    conditionInput.conditionValues['[]'] = visionCountMap.size - 1; // required1\r\n    const pyroCount = visionCountMap.get('') ?? 0;\r\n    const hydroCount = visionCountMap.get('') ?? 0;\r\n    const electroCount = visionCountMap.get('') ?? 0;\r\n    const cryoCount = visionCountMap.get('') ?? 0;\r\n    conditionInput.conditionValues['[]'] = pyroCount + hydroCount + electroCount + cryoCount;\r\n}\r\n\r\nexport async function updateOptionsElementalResonanceByTeam(\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const character = characterInput.character;\r\n    const teamMembers: string[] = [character];\r\n    if (optionInput?.teamMembers) {\r\n        teamMembers.push(...optionInput.teamMembers.filter(s => s && s != character));\r\n    }\r\n    if (teamMembers.length == 4) {\r\n        const visionCountMap = new Map<string, number>();\r\n        for (const entry of teamMembers) {\r\n            const characterDetail = await getCharacterMasterDetail(entry as TCharacterKey);\r\n            if (characterDetail.) {\r\n                const count = visionCountMap.get(characterDetail.);\r\n                if (count) {\r\n                    visionCountMap.set(characterDetail., count + 1);\r\n                } else {\r\n                    visionCountMap.set(characterDetail., 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        const newElementResonance: TConditionValues = {};\r\n        const resonanceElementArr: string[] = [];\r\n        const restMemberElementArr: string[] = [];\r\n        visionCountMap.forEach((value, key) => {\r\n            if (value >= 2) {\r\n                resonanceElementArr.push(key);\r\n            } else if (value == 1) {\r\n                restMemberElementArr.push(key);\r\n            }\r\n        })\r\n        if (optionInput.teamMembers.length == 3) {\r\n            if (resonanceElementArr.length > 1) {\r\n                newElementResonance[resonanceElementArr[0] + ''] = true;\r\n                newElementResonance[resonanceElementArr[1] + ''] = true;\r\n            } else if (resonanceElementArr.length > 0) {\r\n                newElementResonance[resonanceElementArr[0] + ''] = true;\r\n            } else {\r\n                newElementResonance[''] = true;\r\n            }\r\n        } else if (resonanceElementArr.length > 0) {\r\n            const tempArr: string[] = [resonanceElementArr[0] + ''];\r\n            const currentElementArr = Object.keys(optionInput.elementalResonance.conditionValues).filter(s => optionInput.elementalResonance.conditionValues[s] && s != '').map(s => s.replace(/$/, ''));\r\n            currentElementArr.forEach(element => {\r\n                if (restMemberElementArr.includes(element)) {\r\n                    tempArr.push(element + '');\r\n                }\r\n            });\r\n            if (tempArr.length < 2) {\r\n                ALL_ELEMENTS.forEach(element => {\r\n                    const resonance = element + '';\r\n                    if (optionInput.elementalResonance.conditionValues[resonance]) {\r\n                        if (!tempArr.includes(resonance)) {\r\n                            tempArr.push(resonance);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            tempArr.forEach(resonance => {\r\n                newElementResonance[resonance] = true;\r\n            })\r\n        }\r\n        if (!_.isEqual(newElementResonance, optionInput.elementalResonance.conditionValues)) {\r\n            overwriteObject(optionInput.elementalResonance.conditionValues, newElementResonance);\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function makeSharedata(savedata: TAnyObject) {\r\n    const sharedataArr = [] as any[];\r\n\r\n    let character: TCharacterKey;\r\n    let weaponType: TWeaponTypeKey;\r\n\r\n    PROPERTY_MAP.forEach((value, key) => {\r\n        let newValue = savedata[key];\r\n        let myBasename;\r\n        switch (key) {\r\n            case '':\r\n                character = newValue as TCharacterKey;\r\n                myBasename = basename(CHARACTER_MASTER[character]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '':\r\n                weaponType = CHARACTER_MASTER[character][''] as TWeaponTypeKey;\r\n                myBasename = basename((WEAPON_MASTER as any)[weaponType][newValue]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '1':\r\n            case '2':\r\n                if (newValue == 'NONE') {\r\n                    newValue = '';  // \r\n                } else {\r\n                    myBasename = basename(ARTIFACT_SET_MASTER[newValue as TArtifactSetKey]['image']);\r\n                    newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                }\r\n                break;\r\n            case '1':\r\n            case '2':\r\n            case '3':\r\n            case '4':\r\n            case '5':\r\n                if (newValue) {\r\n                    newValue = newValue.split('_')[0] + '_' + ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue.split('_')[1]);\r\n                }\r\n                break;\r\n        }\r\n        if (key.match(/^\\d$/)) {\r\n            if (newValue) {\r\n                newValue = ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue);\r\n            }\r\n        }\r\n        sharedataArr.push(newValue);\r\n    });\r\n    Object.keys(savedata).forEach(key => {\r\n        if (!PROPERTY_MAP.has(key)) {\r\n            sharedataArr.push(key + '=' + savedata[key]);\r\n        }\r\n    });\r\n\r\n    return sharedataArr.join(',');\r\n}\r\n\r\nfunction openTwitter(text: string, url: string, opt_hashtags?: string, opt_via?: string) {\r\n    const baseUrl = 'https://twitter.com/intent/tweet?';\r\n    const params = new URLSearchParams();\r\n    params.append('text', text);\r\n    params.append('url', url);\r\n    if (opt_hashtags) {\r\n        params.append('hashtags', opt_hashtags);\r\n    }\r\n    if (opt_via) {\r\n        params.append('via', opt_via);\r\n    }\r\n    const query = params.toString();\r\n    const shareUrl = `${baseUrl}${query}`;\r\n    console.log(params);\r\n    console.log(shareUrl);\r\n    window.open(shareUrl);\r\n}\r\n\r\nexport function shareByTwitter(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput\r\n) {\r\n    const savedata = makeSavedata(characterInput, artifactDetailInput, conditionInput);\r\n    const sharedata = makeSharedata(savedata);\r\n\r\n    const text = characterInput.buildname;\r\n    const encoded = encodeURI(sharedata);\r\n    const url = 'https://asagume.github.io/gencalc/' + '?allin=' + encoded;\r\n\r\n    openTwitter(text, url);\r\n}\r\n\r\nexport function pushBuildinfoToSession(character: TCharacterKey | string, buildname?: string, builddata?: any, teammembers?: string[]) {\r\n    sessionStorage.setItem('character', character);\r\n    if (buildname) {\r\n        sessionStorage.setItem('buildname', buildname);\r\n    }\r\n    if (builddata) {\r\n        sessionStorage.setItem('builddata', JSON.stringify(builddata));\r\n    }\r\n    if (teammembers) {\r\n        sessionStorage.setItem('teammembers', JSON.stringify(teammembers));\r\n    }\r\n}\r\n\r\nexport function popBuildinfoFromSession() {\r\n    const result: [string | undefined, string | undefined, TAnyObject | undefined, string[] | undefined] = [undefined, undefined, undefined, undefined];\r\n    const character = sessionStorage.getItem('character');\r\n    if (character) {\r\n        result[0] = character;\r\n        const buildname = sessionStorage.getItem('buildname');\r\n        if (buildname) {\r\n            result[1] = buildname;\r\n        }\r\n        const builddata = sessionStorage.getItem('builddata');\r\n        if (builddata) {\r\n            result[2] = JSON.parse(builddata);\r\n        }\r\n        const teammembers = sessionStorage.getItem('teammembers');\r\n        if (teammembers) {\r\n            result[3] = JSON.parse(teammembers);\r\n        }\r\n        console.log(character, buildname, builddata, teammembers);\r\n    }\r\n    sessionStorage.removeItem('character');\r\n    sessionStorage.removeItem('builddata');\r\n    sessionStorage.removeItem('buildname');\r\n    sessionStorage.removeItem('teammembers');\r\n    return result;\r\n}\r\n","export type TAnyObject = {\r\n    [key: string]: any\r\n}\r\n\r\nimport CHARACTER_MASTER from '../public/data/CharacterMaster.json'// assert {type: 'json'}\r\n\r\nimport SWORD_MASTER from '../public/data/SwordMaster.json'// assert {type: 'json'}\r\nimport CLAYMORE_MASTER from '../public/data/ClaymoreMaster.json'// assert {type: 'json'}\r\nimport POLEARM_MASTER from '../public/data/PolearmMaster.json'// assert {type: 'json'}\r\nimport BOW_MASTER from '../public/data/BowMaster.json'// assert {type: 'json'}\r\nimport CATALYST_MASTER from '../public/data/CatalystMaster.json'// assert {type: 'json'}\r\n\r\nimport ARTIFACT_SET_MASTER from '../public/data/ArtifactSetMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_MAIN_MASTER from '../public/data/ArtifactMainMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_SUB_MASTER from '../public/data/ArtifactSubMaster.json'// assert {type: 'json'}\r\n\r\nimport ENEMY_MASTER from '../public/data/EnemyMaster.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_RESONANCE_MASTER from '../public/data/ElementalResonanceMaster.json'// assert {type: 'json'}\r\nimport TEAM_OPTION_MASTER from '../public/data/TeamOptionMaster.json'// assert {type: 'json'}\r\nimport OPTION1_MASTER from '../public/data/OptionMaster1.json'// assert {type: 'json'}\r\nimport OPTION2_MASTER from '../public/data/OptionMaster2.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_REACTION_MASTER from '../public/data/ElementalReactionMaster.json'// assert {type: 'json'}\r\nimport ELEMENTAL_REACTION_BASE_DAMAGE_MASTER from '../public/data/ElementalReactionBaseDamageMaster.json'// assert {type: 'json'}\r\n\r\n// import HOYO_DICTIONARY2 from '../public/data/HoYoDictionary2.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY4 from '../public/data/HoYoDictionary4.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY5 from '../public/data/HoYoDictionary5.json'// assert {type: 'json'}\r\n// import LOCAL_DICTIONARY from '../public/data/LocalDictionary.json'// assert {type: 'json'}\r\n// import { isPlainObject, isString } from './common'\r\n\r\nexport {\r\n    CHARACTER_MASTER,\r\n    ARTIFACT_SET_MASTER,\r\n    ARTIFACT_MAIN_MASTER,\r\n    ARTIFACT_SUB_MASTER,\r\n    ENEMY_MASTER,\r\n    ELEMENTAL_RESONANCE_MASTER,\r\n    TEAM_OPTION_MASTER,\r\n    OPTION1_MASTER,\r\n    OPTION2_MASTER,\r\n    ELEMENTAL_REACTION_MASTER,\r\n    ELEMENTAL_REACTION_BASE_DAMAGE_MASTER,\r\n};\r\n\r\n// function removeStrFromUrl(obj: any, str: string) {\r\n//     if (isPlainObject(obj)) {\r\n//         for (const key of Object.keys(obj)) {\r\n//             if (isString(obj[key])) {\r\n//                 obj[key] = obj[key].replace(str, '');\r\n//             } else if (isPlainObject(obj[key])) {\r\n//                 removeStrFromUrl(obj[key], str);\r\n//             } else if (Array.isArray(obj[key])) {\r\n//                 for (const entry of obj[key]) {\r\n//                     removeStrFromUrl(entry, str);\r\n//                 }\r\n//             }\r\n//         }\r\n//     }\r\n// }\r\n\r\n// for (const master of [\r\n//     CHARACTER_MASTER,\r\n//     SWORD_MASTER,\r\n//     CLAYMORE_MASTER,\r\n//     POLEARM_MASTER,\r\n//     BOW_MASTER,\r\n//     CATALYST_MASTER,\r\n//     ARTIFACT_SET_MASTER\r\n// ]) {\r\n//     for (const key of Object.keys(master)) {\r\n//         removeStrFromUrl((master as any)[key], '');\r\n//     }\r\n// }\r\n\r\nexport const IMG_SRC_DUMMY = 'data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7';\r\n\r\nexport type TVisionKey = '' | '' | '' | '' | '' | '' | '';\r\nexport type TWeaponTypeKey = '' | '' | '' | '' | '';\r\n\r\nexport type TCharacterMaster = typeof CHARACTER_MASTER;\r\nexport type TCharacter = {\r\n    : 4 | 5,\r\n    : TVisionKey,\r\n    : TWeaponTypeKey,\r\n    ?: string,\r\n    import: string,\r\n}\r\nexport type TCharacterKey = keyof typeof CHARACTER_MASTER\r\nexport type TCharacterEntry = TCharacter & {\r\n    key: TCharacterKey,\r\n    icon_url: string,\r\n}\r\n\r\nexport type TCharacterDetail = {\r\n    : TCharacterKey,\r\n    : string,\r\n    icon_url: string,\r\n    : 4 | 5,\r\n    : TWeaponTypeKey,\r\n    : TVisionKey,\r\n    baseInfo: any,\r\n    region?: string,\r\n    : TCharacterStats,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any[],\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any[],\r\n    ?: any,\r\n    ?: any,\r\n    : any[],\r\n    'NEXT STEP'?: string,\r\n}\r\nexport type TCharacterStats = {\r\n    HP: {\r\n        [key: string]: number,\r\n    },\r\n    : {\r\n        [key: string]: number,\r\n    },\r\n    : {\r\n        [key: string]: number,\r\n    },\r\n    [key: string]: {\r\n        [key: string]: number,\r\n    }\r\n};\r\nexport type TLeveldValue = {\r\n    [key: number | string]: number,\r\n};\r\nexport type TTalentFormula = number | string | TLeveldValue;\r\nexport type TCharacterTalent = {\r\n    ?: string,\r\n    ?: {\r\n        ?: string,\r\n        ?: string,\r\n        ?: string | number | any[],\r\n        ?: string,\r\n        ?: string,\r\n    }[],\r\n    [key: string]: string | number | any[] | undefined,\r\n};\r\n\r\nexport type TWeaponRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TWeaponStats = {\r\n    : any,\r\n    [key: string]: any,\r\n}\r\nexport type TWeapon = {\r\n    : TWeaponRarity,\r\n    import: string,\r\n}\r\nexport type TSwordKey = keyof typeof SWORD_MASTER;\r\nexport type TClaymoreKey = keyof typeof CLAYMORE_MASTER;\r\nexport type TPolearmKey = keyof typeof POLEARM_MASTER;\r\nexport type TBowKey = keyof typeof BOW_MASTER;\r\nexport type TCatalystKey = keyof typeof CATALYST_MASTER;\r\nexport type TWeaponKey = TSwordKey | TClaymoreKey | TPolearmKey | TBowKey | TCatalystKey;\r\nexport type TWeaponEntry = TWeapon & {\r\n    key: TWeaponKey,\r\n    icon_url: string,\r\n};\r\nexport const WEAPON_DETAIL_TEMPLATE = {\r\n    : '',\r\n    : '',\r\n    icon_url: IMG_SRC_DUMMY,\r\n    : 4,\r\n    : '',\r\n    : {\r\n        : {}\r\n    },\r\n};\r\nexport type TWeaponDetail = {\r\n    : TWeaponKey,\r\n    : string,\r\n    icon_url: string,\r\n    : TWeaponRarity,\r\n    : TWeaponTypeKey,\r\n    : TWeaponStats,\r\n    ?: any,\r\n    ?: any[],\r\n    ?: any,\r\n    ?: any,\r\n    ?: number,\r\n};\r\n\r\nexport type TArtifactSetEffect = {\r\n    : string,\r\n    ?: any[],\r\n};\r\nexport type TArtifactSetRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TArtifactSet = {\r\n    : TArtifactSetRarity,\r\n    image: string,\r\n    '2'?: TArtifactSetEffect,\r\n    '4'?: TArtifactSetEffect,\r\n    ?: { [key: string]: boolean | number },\r\n    artifact_list?: string[],\r\n};\r\nexport type TArtifactSetKey = keyof typeof ARTIFACT_SET_MASTER;\r\nexport type TArtifactSetEntry = TArtifactSet & {\r\n    key: TArtifactSetKey,\r\n    icon_url: string,\r\n};\r\n\r\nexport type TArtifactMainStat = keyof typeof ARTIFACT_MAIN_MASTER[5]\r\nexport type TArtifactMainRarity = 4 | 5;\r\nexport type TArtifactMain = {\r\n    5: TArtifactMainStat,\r\n    4: TArtifactMainStat,\r\n};\r\n\r\nfunction getIconUrl(master: TAnyObject) {\r\n    let result = null;\r\n    if (master.icon_url) {\r\n        result = master.icon_url;\r\n    } else if (master.image) {\r\n        result = master.image;\r\n    } else if (master.import) {\r\n        result = master.import.replace('data/', 'images/');\r\n        if (result.indexOf('characters/') != -1) {\r\n            result = result.replace('characters/', 'characters/face/');\r\n        }\r\n        result = result.replace(/json$/, 'png');\r\n    }\r\n    return result;\r\n}\r\n\r\nexport const CHARACTER_MASTER_LIST: TCharacterEntry[] = [];\r\n(Object.keys(CHARACTER_MASTER) as TCharacterKey[]).forEach(key => {\r\n    const master: any = CHARACTER_MASTER[key];\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    CHARACTER_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const WEAPON_MASTER = {\r\n    : SWORD_MASTER,\r\n    : CLAYMORE_MASTER,\r\n    : POLEARM_MASTER,\r\n    : BOW_MASTER,\r\n    : CATALYST_MASTER,\r\n};\r\n(Object.keys(WEAPON_MASTER) as TWeaponTypeKey[]).forEach(key2 => {\r\n    const typedMaster = WEAPON_MASTER[key2] as any; // \r\n    Object.keys(typedMaster).forEach(key => {\r\n        const master = typedMaster[key];\r\n        master.key = key;\r\n        master.icon_url = getIconUrl(master);\r\n    });\r\n})\r\nconst SWORD_MASTER_LIST = (Object.keys(SWORD_MASTER) as TSwordKey[]).map(key => SWORD_MASTER[key]);\r\nconst CLAYMORE_MASTER_LIST = (Object.keys(CLAYMORE_MASTER) as TClaymoreKey[]).map(key => CLAYMORE_MASTER[key]);\r\nconst POLEARM_MASTER_LIST = (Object.keys(POLEARM_MASTER) as TPolearmKey[]).map(key => POLEARM_MASTER[key]);\r\nconst BOW_MASTER_LIST = (Object.keys(BOW_MASTER) as TBowKey[]).map(key => BOW_MASTER[key]);\r\nconst CATALYST_MASTER_LIST = (Object.keys(CATALYST_MASTER) as TCatalystKey[]).map(key => CATALYST_MASTER[key]);\r\nexport const WEAPON_MASTER_LIST = {\r\n    : SWORD_MASTER_LIST,\r\n    : CLAYMORE_MASTER_LIST,\r\n    : POLEARM_MASTER_LIST,\r\n    : BOW_MASTER_LIST,\r\n    : CATALYST_MASTER_LIST,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_LIST: TArtifactSetEntry[] = [];\r\n(Object.keys(ARTIFACT_SET_MASTER) as TArtifactSetKey[]).forEach(key => {\r\n    const master = ARTIFACT_SET_MASTER[key] as any;\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    ARTIFACT_SET_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const ARTIFACT_MAIN_MASTER_STATLIST: string[] = Object.keys(ARTIFACT_MAIN_MASTER[5]);\r\n\r\nexport const ARTIFACT_SUB_MASTER_STATLIST = Object.keys(ARTIFACT_SUB_MASTER);\r\nexport type TArtifactSubKey = keyof typeof ARTIFACT_SUB_MASTER;\r\n\r\nexport type TEnemy = {\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    [key: string]: number,\r\n};\r\nexport type TEnemyKey = keyof typeof ENEMY_MASTER;\r\nexport type TEnemyEntry = TEnemy & {\r\n    key: TEnemyKey,\r\n};\r\nfor (const key of Object.keys(ENEMY_MASTER)) {\r\n    for (const stat of Object.keys((ENEMY_MASTER as any)[key])) {\r\n        if ((ENEMY_MASTER as any)[key][stat] >= 1000) { // \r\n            (ENEMY_MASTER as any)[key][stat] = Infinity;\r\n        }\r\n    }\r\n}\r\nexport const ENEMY_MASTER_LIST = (Object.keys(ENEMY_MASTER) as TEnemyKey[])\r\n    .map(key => ({ key: key, ...ENEMY_MASTER[key] }));\r\n\r\nexport type TElementalResonanceKey = keyof typeof ELEMENTAL_RESONANCE_MASTER;\r\nexport const ELEMENTAL_RESONANCE_MASTER_LIST = (Object.keys(ELEMENTAL_RESONANCE_MASTER) as TElementalResonanceKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_RESONANCE_MASTER[key] }));\r\n\r\nexport type TTeamOptionKey = keyof typeof TEAM_OPTION_MASTER;\r\nexport const TEAM_OPTION_MASTER_LIST = (Object.keys(TEAM_OPTION_MASTER) as TTeamOptionKey[])\r\n    .map(key => ({ key: key, ...TEAM_OPTION_MASTER[key] }));\r\n\r\nexport type TOption1Key = keyof typeof OPTION1_MASTER;\r\nexport const OPTION1_MASTER_LIST = (Object.keys(OPTION1_MASTER) as TOption1Key[])\r\n    .map(key => ({ key: key, ...OPTION1_MASTER[key] }));\r\n\r\nexport type TOption2Key = keyof typeof OPTION2_MASTER;\r\nexport const OPTION2_MASTER_LIST = (Object.keys(OPTION2_MASTER) as TOption2Key[])\r\n    .map(key => ({ key: key, ...OPTION2_MASTER[key] }));\r\n\r\nexport type TElementalReactionKey = keyof typeof ELEMENTAL_REACTION_MASTER;\r\nexport const ELEMENTAL_REACTION_MASTER_LIST = (Object.keys(ELEMENTAL_REACTION_MASTER) as TElementalReactionKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_REACTION_MASTER[key] }));\r\n\r\n// export const DICTIONARY_MASTER = { ...HOYO_DICTIONARY2, ...HOYO_DICTIONARY4, ...HOYO_DICTIONARY5, ...LOCAL_DICTIONARY };\r\n\r\n////////////////\r\n////////////////\r\nconst CHARACTER_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param {string} character \r\n * @returns {Promise<any>}\r\n */\r\nexport async function getCharacterMasterDetail(character: TCharacterKey): Promise<TCharacterDetail> {\r\n    try {\r\n        if (!CHARACTER_MASTER_DETAIL_MAP.has(character)) {\r\n            const url = CHARACTER_MASTER[character]['import'].replace(/^\\//, '');\r\n            const characterMaster = await fetch(url).then(resp => resp.json());\r\n            // URLURL\r\n            const weaponType = CHARACTER_MASTER[character]. as TWeaponTypeKey;\r\n            characterMaster..icon_url = WEAPON_IMG_SRC[weaponType];\r\n            CHARACTER_MASTER_DETAIL_MAP.set(character, characterMaster);\r\n        }\r\n        return CHARACTER_MASTER_DETAIL_MAP.get(character);\r\n    } catch (error) {\r\n        console.error(character);\r\n        throw error;\r\n    }\r\n}\r\n\r\nconst WEAPON_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param weapon \r\n * @param opt_weaponType \r\n * @returns \r\n */\r\nexport async function getWeaponMasterDetail(weapon: TWeaponKey, opt_weaponType?: TWeaponTypeKey): Promise<TWeaponDetail> {\r\n    try {\r\n        if (!WEAPON_MASTER_DETAIL_MAP.has(weapon)) {\r\n            let weaponTypeArr;\r\n            if (opt_weaponType) weaponTypeArr = [opt_weaponType];\r\n            else weaponTypeArr = Object.keys(WEAPON_MASTER);\r\n            for (const weaponType of weaponTypeArr) {\r\n                if (weapon in WEAPON_MASTER[weaponType as TWeaponTypeKey]) {\r\n                    const typedMaster: any = WEAPON_MASTER[weaponType as TWeaponTypeKey];\r\n                    const url = typedMaster[weapon]['import'];\r\n                    const weaponMaster: any = await fetch(url).then(resp => resp.json());\r\n                    weaponMaster. = weaponType; // \r\n                    WEAPON_MASTER_DETAIL_MAP.set(weapon, weaponMaster);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return WEAPON_MASTER_DETAIL_MAP.get(weapon);\r\n    } catch (error) {\r\n        console.error(weapon, opt_weaponType);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const ALL_ELEMENTS = ['', '', '', '', '', '', ''];\r\n\r\nexport const ELEMENT_COLOR_CLASS = {\r\n    : 'pyro',\r\n    : 'hydro',\r\n    : 'anemo',\r\n    : 'electro',\r\n    : 'dendro',\r\n    : 'cryo',\r\n    : 'geo'\r\n};\r\nexport type TElementColorClassKey = keyof typeof ELEMENT_COLOR_CLASS;\r\n\r\nexport const ELEMENT_BG_COLOR_CLASS = {\r\n    : 'pyro-bg',\r\n    : 'hydro-bg',\r\n    : 'anemo-bg',\r\n    : 'electro-bg',\r\n    : 'dendro-bg',\r\n    : 'cryo-bg',\r\n    : 'geo-bg'\r\n};\r\n\r\nexport const ELEMENT_IMG_SRC = {\r\n    : 'images/element_pyro.png',\r\n    : 'images/element_hydro.png',\r\n    : 'images/element_anemo.png',\r\n    : 'images/element_electro.png',\r\n    : 'images/element_dendro.png',\r\n    : 'images/element_cryo.png',\r\n    : 'images/element_geo.png'\r\n};\r\nexport type TElementImgSrcKey = keyof typeof ELEMENT_IMG_SRC;\r\n\r\nexport const WEAPON_IMG_SRC = {\r\n    : 'images/characters/NormalAttack_sword.png',\r\n    : 'images/characters/NormalAttack_claymore.png',\r\n    : 'images/characters/NormalAttack_polearm.png',\r\n    : 'images/characters/NormalAttack_bow.png',\r\n    : 'images/characters/NormalAttack_catalyst.png',\r\n};\r\n\r\nexport const STAR_BACKGROUND_IMAGE_CLASS = {\r\n    1: 'star1-bg',\r\n    2: 'star2-bg',\r\n    3: 'star3-bg',\r\n    4: 'star4-bg',\r\n    5: 'star5-bg'\r\n}\r\n\r\nexport const PROPERTY_MAP = new Map([\r\n    ['', null],\r\n    ['', null],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', null],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['1', null],\r\n    ['2', null],\r\n    ['1', null],\r\n    ['2', null],\r\n    ['3', null],\r\n    ['4', null],\r\n    ['5', null],\r\n    ['HP', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['HPP', 0],\r\n    ['P', 0],\r\n    ['P', 0],\r\n    ['1', null],\r\n    ['1', -1],\r\n    ['1', -1],\r\n    ['2', null],\r\n    ['2', -1],\r\n    ['2', -1],\r\n    ['3', null],\r\n    ['3', -1],\r\n    ['3', -1],\r\n    ['4', null],\r\n    ['4', -1],\r\n    ['4', -1],\r\n]);\r\n\r\nexport const NUMBER_OF_PRIORITY_SUBSTATS = Array.from(PROPERTY_MAP.keys()).filter(s => s.match(/^\\d$/)).length;\r\n\r\nexport const DAMAGE_CATEGORY_ARRAY = ['', '', '', '', ''];\r\n\r\nexport const RECOMMEND_ABBREV_MAP = new Map([\r\n    ['HP%', 'HP'], ['', ''], ['', ''], ['', ''], ['', ''], ['', '']\r\n]);\r\n\r\nexport const RECOMMEND_ABBREV_EN_MAP = new Map([\r\n    ['HP%', 'HP'], ['%', 'AT'], ['%', 'DF'], ['', 'EM'],\r\n    ['', 'CR'], ['', 'CD'], ['', 'ER'], ['', 'HE'],\r\n    ['', 'Py'], ['', 'Hy'], ['', 'An'], ['', 'El'], ['', 'De'], ['', 'Cr'], ['', 'Ge'], ['', 'Ph'],\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_MAP = new Map([\r\n    ['HP', 'HP'],\r\n    ['', 'ATK'],\r\n    ['', 'DEF'],\r\n    ['', 'ElementalMastery'],\r\n    ['', 'CritRate'],\r\n    ['', 'CritDMG'],\r\n    ['', 'EnergyRecharge'],\r\n    ['', 'Pyro'],\r\n    ['', 'Hydro'],\r\n    ['', 'Anemo'],\r\n    ['', 'Electro'],\r\n    ['', 'Dendro'],\r\n    ['', 'Cryo'],\r\n    ['', 'Geo'],\r\n    ['', 'Physical'],\r\n    ['', 'Healing'],\r\n    ['HP%', 'HPp'],\r\n    ['%', 'ATKp'],\r\n    ['%', 'DEFp']\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP = new Map();\r\nARTIFACT_STAT_JA_EN_ABBREV_MAP.forEach((value, key) => {\r\n    ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP.set(value, key);\r\n});\r\n\r\nexport const GENSEN_MASTER_LIST = [\r\n    {\r\n        key: '',\r\n        values: [7, 7, 7, 7],\r\n        counts: [0, 0, 0, 0],\r\n    },\r\n    {\r\n        key: '',\r\n        values: [3, 3, 3, 3],\r\n        counts: [7, 4, 4, 4],\r\n    },\r\n    {\r\n        key: '1',\r\n        values: [3, 3, 3, 3],\r\n        counts: [8, 5, 5, 4],\r\n    },\r\n    {\r\n        key: '3',\r\n        values: [3, 3, 3, 3],\r\n        counts: [11, 8, 7, 4],\r\n    },\r\n    {\r\n        key: '',\r\n        values: [1, 1, 1, 1],\r\n        counts: [14, 11, 10, 4],\r\n    },\r\n];\r\nfor (const gensen of GENSEN_MASTER_LIST) {\r\n    for (let i = gensen.values.length; i < NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n        gensen.values.push(gensen.values[0]);\r\n    }\r\n    for (let i = gensen.counts.length; i < NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n        gensen.counts.push(0);\r\n    }\r\n}\r\nexport type TGensen = { key: string; values: number[]; counts: number[] };\r\n\r\nexport const ARTIFACT_CAT_NAMES = {\r\n    '1': 'flower_of_life',\r\n    '2': 'plume_of_death',\r\n    '3': 'sands_of_eon',\r\n    '4': 'goblet_of_eonothem',\r\n    '5': 'circlet_of_logos',\r\n};\r\n\r\nexport function getArtifactIconUrl(setname: string, opt_cat_id: any = '1') {\r\n    let result = IMG_SRC_DUMMY;\r\n    if (setname in ARTIFACT_SET_MASTER) {\r\n        result = (ARTIFACT_SET_MASTER as any)[setname].icon_url;\r\n        if (!result.startsWith('data:image/gif;')) {\r\n            result = result.replace(/.png$/, '');\r\n            result += '/' + (ARTIFACT_CAT_NAMES as any)[String(opt_cat_id)] + '.png';\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport type TArtifactScoreFormulaElement = [string, number];\r\nexport type TArtifactScoreFormula = TArtifactScoreFormulaElement[];\r\nexport const ARTIFACT_SCORE_FACTORS = [\r\n    'HP%', '%', '%', '', '', '', '',\r\n];\r\nexport const ARTIFACT_SCORE_FORMULA_TEMPLATE: TArtifactScoreFormula[] = [\r\n    [['', 2], ['', 1]],\r\n    [['%', 1], ['', 2], ['', 1]],\r\n    [['HP%', 1], ['', 2], ['', 1]],\r\n    [['%', 1], ['', 2], ['', 1]],\r\n    [['HP%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\r\n    [['%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\r\n    [['%', 0.5], ['', 0.125], ['', 2], ['', 1]],\r\n];\r\n","import _ from \"lodash\";\r\n\r\n// 21\r\nexport type TParticleInfo = number | (number | undefined)[];\r\nexport type TParticleEntry = {\r\n    [key: string]: TParticleInfo,\r\n};\r\nexport type TParticleMaster = {\r\n    [key: string]: TParticleEntry,\r\n};\r\n\r\nexport const SP_SELF = 0x1000;  // =[0] or [0]* or [0]/[4]*[2]    \r\nexport const SP_NEXT = 0x1001;  // =[0]                               \r\nexport const SP_LONG = 0x1002;  // =[0]/[4]*[2]                       \r\nexport const SP_SHRT = 0x1003;  // =[0] or [0]* or [0]/[4]*[2]    \r\nconst C0 = 0x2000;  //  0\r\nconst C1 = 0x2001;  //  1\r\nconst C2 = 0x2002;  //  2\r\nconst C4 = 0x2004;  //  4\r\nconst C6 = 0x2006;  //  6\r\nexport const CT_AFTER_DURATION = 0x1000;    // \r\nconst PARTICLE_GENERATE_1 = 0x1000; // 1=1\r\nconst PARTICLE_GENERATE_2 = 0x2000; // 1=2\r\nconst PARTICLE_GENERATE_3 = 0x3000; // 1=3\r\nconst PARTICLE_GENERATE_4 = 0x4000; // 1=4\r\nconst PARTICLE_GENERATE_5 = 0x5000; // 1=5\r\nconst PARTICLE_GENERATE_6 = 0x6000; // 1=6\r\n// [0]\r\n// [0],[1]\r\n// [0],[1],[2],[3],[4]\r\n// [0],[1],[2],[3],[4],[5],[6],[7],[8],[9],[10]\r\nconst PARTICLE_MASTER: TParticleMaster = {\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, undefined, 9, undefined],\r\n        'E.Hold': [3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, undefined, 8 + CT_AFTER_DURATION, 15],\r\n        'E.Hold': [4, SP_NEXT, undefined, 8 + CT_AFTER_DURATION, 15],\r\n    },\r\n    '': {\r\n        'E': [4, SP_SELF, undefined, 7.5 + CT_AFTER_DURATION, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 20, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, undefined, 16, undefined],\r\n    },\r\n    '': {\r\n        'E': [2.3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 5, 15, 0.5 + PARTICLE_GENERATE_4],\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, 12.5, 16, undefined],\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, 20, 16, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [5, SP_NEXT, undefined, 15, undefined],  // \r\n        'E.Hold': [5, SP_NEXT, undefined, 15, undefined],   // \r\n    },\r\n    '': {\r\n        'E': [5, SP_SELF, undefined, 6.5 + CT_AFTER_DURATION, undefined],   // \r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 15, undefined],    // \r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 1, 7 + CT_AFTER_DURATION, undefined], // EN2\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, undefined, 18, undefined],    // \r\n        'E(skill)': 0,\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_SHRT, undefined, 20, 2 + PARTICLE_GENERATE_6],  // 0.667 * 6\r\n    },\r\n    '': {\r\n        'E': [4.5, SP_NEXT, undefined, 6 + CT_AFTER_DURATION, undefined],   // \r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 22, 14, 2.5],\r\n    },\r\n    '': {\r\n        'E': 2,\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, undefined, 18, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 18, undefined],\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 7.5, 16, 2],\r\n        'E(skill)': 0,\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, 30, 30, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [1.2, SP_LONG, 17, 15, 3.6],\r\n        'E.Hold': [1.2, SP_LONG, 17, 15, 3.6],\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, undefined, 6, 3], // CT3s\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, 12, 15, 10],\r\n        'E.Hold': [4, SP_NEXT, 12, 15, 10, C4, 4, SP_NEXT, 12, 15, 10],   // CT10s\r\n    },\r\n    '': {\r\n        'E.Press': [3.5, SP_NEXT, undefined, 9, undefined],\r\n        'E.Hold': [3.5, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, 6, 12, undefined],  // \r\n        'E.Hold': [5, SP_NEXT, 12, 18, undefined],  //  2\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 30, 20, 2.5],   // CT2.5s\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 10, 16, 2, C1, 1, SP_SELF, 14, 16, 2],    // CT2s\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, undefined, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 12, 20, 2.5, C2, 1, SP_LONG, 18, 20, 2.5],    //  CT2.5s\r\n    },\r\n    '': {\r\n        'E.Press': [1, SP_SELF, 0, 18, 1.6 + PARTICLE_GENERATE_6],   // 11 CT1.6s\r\n        'E.Hold': [1, SP_SELF, 0, 18, 1.6 + PARTICLE_GENERATE_6],    // 11 CT1.6s\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 10, 6 + CT_AFTER_DURATION, 2 + PARTICLE_GENERATE_5, C6, 1, SP_SELF, 12, 6 + CT_AFTER_DURATION, 2 + PARTICLE_GENERATE_5],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_LONG, 25, 5, 7],     // CT7s\r\n        'E.Hold': [3, SP_LONG, 25, 6, 7],      // CT7s\r\n    },\r\n    '': {\r\n        'E': [1.5 + 1 + 1 + 1, SP_SELF, 8, 18, undefined],  // 8 12\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 7.5, undefined],\r\n        'E(burst)': [1.33, SP_NEXT, undefined, 3, undefined],  // 3s\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, 8, 12, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, undefined, 10, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [1.5, SP_SELF, 6, 12, 2.5 + PARTICLE_GENERATE_3],\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 14, 4, 2.5],    // CT2.5s\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, 10, 10, undefined],\r\n        'E.Hold': [4, SP_NEXT, 15, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, 6, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_LONG, 12, 20, 2],    // per damage CT2s\r\n    },\r\n    '': {\r\n        'E': [0.5, SP_LONG, 25, 10, 0.9],   // per damage CT0.9s\r\n    },\r\n    '': {\r\n        'E': 5,\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 10, 18, 2 + PARTICLE_GENERATE_4],   // CT2s 4\r\n    },\r\n    '': {\r\n        'E': [4.5, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [1.5, SP_NEXT, undefined, 4, undefined],\r\n        'E.Hold': [2.5, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [2.5, SP_SELF, 9, 16, 5 + PARTICLE_GENERATE_2], // CT5s 2\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 10, undefined],\r\n        'E(burst)': [0, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [2, SP_SHRT, 6, 10, 0 + PARTICLE_GENERATE_2]\r\n    },\r\n    '': {\r\n        'E.Press': [0.67, SP_LONG, 30, 4, 2],   // 10.67 CT2s\r\n        'E.Hold': [0.67, SP_LONG, 30, 4, 2],    // 10.67 CT2s\r\n    },\r\n    '': {\r\n        'E.Press': [0.5, SP_LONG, 20, 4, 1.5],  // CT1.5s\r\n        'E.Hold': [0.5, SP_LONG, 20, 12, 1.5],  // CT1.5s\r\n    },\r\n    '': {\r\n        'E': [1 / 3 * 9, SP_SELF],              // 9s\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, undefined, 20, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 15, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2.5, SP_NEXT, undefined, 7.5, undefined],\r\n        'E.Hold': [2.5, SP_NEXT, undefined, 7.5, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3.33, SP_SHRT, 5, 12, undefined],\r\n        'E.Hold': [3.33, SP_SHRT, 5, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': [0, SP_NEXT, 15, 30, undefined],\r\n    },\r\n    '': {\r\n        'E': [1.33, SP_SELF, undefined, 10, 0 + PARTICLE_GENERATE_3],\r\n    },\r\n    '': {\r\n        'E.Press': [2.67, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [2.67, SP_NEXT, 1, 6 + CT_AFTER_DURATION, undefined], // 5\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, undefined, 10, undefined],\r\n        'E(burst)': [1, SP_NEXT, undefined, 10, undefined], // \r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, undefined, 12, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, 12, 8, undefined],\r\n        'E.Hold': [3 + 1, SP_NEXT, 12, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, undefined, 6, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, 12, 15, undefined],\r\n        'E.Hold': [4, SP_NEXT, 12, 15, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [1, SP_LONG, 10, 15, 1.5],\r\n        'E.Hold': [1, SP_LONG, 10, 15, 1.5]\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, 18, 6, 5.5, C6, 2, SP_LONG, 18, 20, 5.5], // CT5.5s\r\n    },\r\n    '': {\r\n        'E': [1.33, SP_LONG, 12, 12, 3]     // CT3s\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': 4,     // 2:0-1/2.5:2-3/3:4=\r\n    },\r\n    '': {\r\n        'E': [0.45, SP_LONG, 12, 15, 1.5, C2, 0.45, SP_LONG, 15, 15, 1.5],  // CT1.5s\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, undefined, 9, undefined],\r\n        'E.Hold': [3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, 10, 10, undefined],\r\n        'E.Hold': [2, SP_NEXT, 10, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, 8, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, 10, 6, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [3, SP_NEXT, 10, 10 + CT_AFTER_DURATION, undefined], // 10\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 6, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 12, 18, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [0.8 * 2, SP_NEXT, 4.8, 6, undefined], //  Lv.72.4\r\n        'E.Hold': [0.8 * 5, SP_NEXT, 12, 15, undefined], //  Lv.72.4\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, undefined, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 10, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [0, SP_NEXT, 12, 24, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2.25, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [3, SP_NEXT, undefined, 7.5, undefined],  // 12CT10\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_LONG, 10, 25, 1, C6, 0.67, SP_LONG, 12, 25, 1],\r\n    },\r\n    '': {\r\n        'E': [3.33, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': [4.5, SP_NEXT, 15, 21, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, undefined, 7.5, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 7.5, undefined],  // \r\n    },\r\n    '': {\r\n        'E': [1, SP_SHRT, 8, 12, 2 + PARTICLE_GENERATE_4],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 10, undefined],\r\n        'E.Press(burst)': 0,\r\n    },\r\n    '': {\r\n        'E': [0, SP_NEXT, 15, 32, undefined, C2, 0, SP_NEXT, 15, 27.2, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [0, SP_NEXT, undefined, 1, undefined],\r\n        'E.Hold': [5, SP_NEXT, undefined, 16, undefined],\r\n    },\r\n    '': {\r\n        'E': [2.67, SP_NEXT, undefined, 6, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_SHRT, 8, 15, undefined],\r\n        'E.Hold': [4, SP_SHRT, 8, 15, undefined],\r\n    },\r\n    '()': {\r\n        'E.Press': [1, SP_SHRT, 12, 18, 2.9],   // 126\r\n        'E.Hold': [1, SP_SHRT, 12, 18, 2.9],    // 126\r\n    },\r\n    '()': {\r\n        'E.Press': [3.33, SP_NEXT, undefined, 10, undefined],\r\n        'E.Hold': [3.33, SP_NEXT, 6, 10, undefined],            // 6\r\n    },\r\n    '()': {\r\n        'E': [2.5, SP_NEXT, undefined, 8, undefined],\r\n    },\r\n    '()': {\r\n        'E': [1, SP_NEXT, 6, 13.5, undefined],\r\n    },\r\n    '()': {\r\n        'E.Press': [3.33, SP_NEXT, 30, 6, undefined],   // 1CT-2\r\n        'E.Hold': [3.33, SP_NEXT, 30, 6, undefined],    // 1CT-2\r\n    },\r\n    '()': {\r\n        'E.Press': [2, SP_NEXT, undefined, 5, undefined],\r\n        'E.Hold': [3.33, SP_NEXT, undefined, 8, undefined], // \r\n    },\r\n}\r\n\r\nObject.keys(PARTICLE_MASTER).forEach(key => {\r\n    const pentry = PARTICLE_MASTER[key];\r\n    Object.keys(pentry).forEach(key2 => {\r\n        const pinfo = pentry[key2];\r\n        if (_.isNumber(pinfo)) {\r\n            return;\r\n        }\r\n        if (_.isArray(pinfo)) {\r\n            if (pinfo.length === 2 || pinfo.length === 5 || pinfo.length === 11) {\r\n                const receiveTypeArr: (number | undefined)[] = [];\r\n                receiveTypeArr.push(pinfo[1]);\r\n                if (pinfo.length === 11) {\r\n                    receiveTypeArr.push(pinfo[7]);\r\n                }\r\n                if (pinfo.filter(s => s !== undefined && !_.isNumber(s)).length === 0\r\n                    && receiveTypeArr.filter(s => s === undefined || ![SP_SELF, SP_NEXT, SP_LONG, SP_SHRT].includes(s)).length === 0\r\n                    && (pinfo.length !== 11 || (pinfo[5] !== undefined && [C1, C2, C4, C6].includes(pinfo[5])))) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        console.error(key, key2, pinfo);\r\n    })\r\n})\r\n\r\n/**    */\r\nexport const CHARACTER_Q_TO_E_ARR = ['', '', ''];\r\n/** CT */\r\nexport const CHARACTER_E_CT_RESET_BY_Q_ARR = ['', ''];\r\n\r\n/**  */\r\nexport const CHARACTER_E_UNTIL_MAP = new Map<string, Map<string[], number>>();\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E'], 2],]));            // EEE\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E', 'C'], 1],]));             // E(E|C)\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E', 'N'], 3],]));         // E(E|N){3}\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E'], 1], [['N'], 4],]));  // E(E|N{4})\r\n\r\n/**  */\r\nexport const CHARACTER_E_DELAY_MAP = new Map<string, string[]>();\r\nCHARACTER_E_DELAY_MAP.set('', ['C']);\r\nCHARACTER_E_DELAY_MAP.set('', ['C']);\r\nCHARACTER_E_DELAY_MAP.set('', ['P']);\r\nCHARACTER_E_DELAY_MAP.set('', ['P']);\r\n\r\n/**  */\r\nexport const CHARACTER_E_FIRST_ARR = ['', '', ''];\r\n\r\n/**  */\r\nexport const CHARACTER_Q_NOT_RECHARGEABLE = ['', ''];\r\n\r\nexport function getElementalSkillActions(character: string) {\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    return particleMaster ? Object.keys(particleMaster).filter(action => action.startsWith('E') && !action.includes('(burst)') && !action.includes('(skill)')) : ['E'];\r\n}\r\n\r\nexport function getParticleInfo(character: string, action: string, constellation = 0, isBursting = false, isSkilling = false) {\r\n    const result: TParticleInfo = [0, SP_NEXT, 0, undefined, undefined];    // , , , , CT\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    if (particleMaster) {\r\n        const keyArr: string[] = [];\r\n        if (isBursting) {\r\n            keyArr.push(action + '(burst)');\r\n        }\r\n        if (isSkilling) {\r\n            keyArr.push(action + '(skill)');\r\n        }\r\n        keyArr.push(action);\r\n        for (const key of keyArr) {\r\n            if (key in particleMaster) {\r\n                const work = particleMaster[key];\r\n                if (_.isNumber(work)) {\r\n                    result[0] = work;\r\n                } else if (_.isArray(work)) {\r\n                    let start = 0;\r\n                    if (work.length > 5 && work[5] !== undefined && work[5] <= (constellation + C0)) {\r\n                        start = 6;\r\n                    }\r\n                    for (let i = 0; i < 5; i++) {\r\n                        if (work.length > (i + start)) {\r\n                            result[i] = work[i + start];\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleNumFromInfo(particleInfo: TParticleInfo, leftTime?: number) {\r\n    let result = 0;\r\n    if (_.isNumber(particleInfo)) {\r\n        result = particleInfo;\r\n    } else {\r\n        result = particleInfo[0] ?? 0;\r\n        const receiveType = getReceiveTypeFromInfo(particleInfo);\r\n        const particleCooltime = getParticleCooltimeFromInfo(particleInfo);\r\n        const generateCount = getParticleGenerateCountFromInfo(particleInfo);\r\n        let duration = getDurationFromInfo(particleInfo);\r\n        switch (receiveType) {\r\n            case SP_SELF:   // \r\n            case SP_SHRT:   // ()\r\n                if (generateCount) {\r\n                    result *= generateCount;\r\n                } else if (particleCooltime && duration) {\r\n                    result *= Math.ceil(duration / particleCooltime);\r\n                }\r\n                break;\r\n            case SP_NEXT:   // \r\n                break;\r\n            case SP_LONG:   // ()\r\n                if (particleCooltime) {\r\n                    result /= particleCooltime;\r\n                }\r\n                if (duration > 0) {\r\n                    if (leftTime !== undefined && duration > leftTime) {\r\n                        duration = Math.max(0, leftTime);\r\n                    }\r\n                    result *= duration;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    return _.round(result, 2);\r\n}\r\n\r\nexport function getReceiveTypeFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 1) ? particleInfo[1] ?? SP_NEXT : SP_NEXT;\r\n}\r\n\r\n/**  */\r\nexport function getDurationFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 2) ? particleInfo[2] ?? 0 : 0;\r\n}\r\n\r\n/**  */\r\nexport function getCooltimeFromInfo(particleInfo: TParticleInfo) {\r\n    let result = (_.isArray(particleInfo) && particleInfo.length > 3) ? particleInfo[3] : undefined;\r\n    if (result) {\r\n        if (result > CT_AFTER_DURATION) {\r\n            result -= CT_AFTER_DURATION;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function getCooltimeTypeFromInfo(particleInfo: TParticleInfo) {\r\n    let result = (_.isArray(particleInfo) && particleInfo.length > 3) ? particleInfo[3] : undefined;\r\n    if (result) {\r\n        if (result > CT_AFTER_DURATION) {\r\n            result = CT_AFTER_DURATION;\r\n        } else {\r\n            result = 0;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function getParticleCooltimeFromInfo(particleInfo: TParticleInfo) {\r\n    let result = (_.isArray(particleInfo) && particleInfo.length > 4) ? particleInfo[4] : undefined;\r\n    if (result) {\r\n        while (result >= PARTICLE_GENERATE_1) {\r\n            result -= PARTICLE_GENERATE_1;\r\n        }\r\n        result = _.round(result, 2);\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function getParticleGenerateCountFromInfo(particleInfo: TParticleInfo) {\r\n    let result = (_.isArray(particleInfo) && particleInfo.length > 4) ? particleInfo[4] : undefined;\r\n    if (result) {\r\n        result = Math.trunc(result / PARTICLE_GENERATE_1);\r\n    }\r\n    return result;\r\n}\r\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow } from \"vue\"\n\nconst _hoisted_1 = { class: \"artifact\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"artifact\"\n}\nconst _hoisted_3 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_4 = { class: \"control\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_7 = { class: \"with-tooltip\" }\nconst _hoisted_8 = [\"src\", \"alt\"]\nconst _hoisted_9 = { class: \"tooltip\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"edit-mainstat\"\n}\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = [\"step\"]\nconst _hoisted_13 = {\n  key: 1,\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_14 = { key: 2 }\nconst _hoisted_15 = { key: 3 }\nconst _hoisted_16 = { style: {\"width\":\"55%\"} }\nconst _hoisted_17 = { class: \"artifact-substat\" }\nconst _hoisted_18 = { class: \"right\" }\nconst _hoisted_19 = [\"onUpdate:modelValue\"]\nconst _hoisted_20 = [\"value\", \"disabled\"]\nconst _hoisted_21 = { class: \"right\" }\nconst _hoisted_22 = [\"onUpdate:modelValue\", \"step\"]\nconst _hoisted_23 = { key: 1 }\nconst _hoisted_24 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_25 = {\n  key: 0,\n  class: \"score\"\n}\nconst _hoisted_26 = { class: \"control\" }\nconst _hoisted_27 = {\n  key: 0,\n  type: \"button\"\n}\nconst _hoisted_28 = {\n  key: 0,\n  class: \"material-symbols-outlined\",\n  style: {\"color\":\"yellow\"}\n}\nconst _hoisted_29 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_30 = { class: \"with-tooltip\" }\nconst _hoisted_31 = [\"src\", \"alt\"]\nconst _hoisted_32 = { class: \"tooltip\" }\nconst _hoisted_33 = {\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_34 = { style: {\"width\":\"55%\"} }\nconst _hoisted_35 = { class: \"artifact-substat\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ArtifactSetSelect = _resolveComponent(\"ArtifactSetSelect\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_ctx.control == 'editable')\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_2, [\n          _createElementVNode(\"tbody\", null, [\n            _createElementVNode(\"tr\", null, [\n              _createElementVNode(\"td\", _hoisted_3, [\n                _createElementVNode(\"div\", _hoisted_4, [\n                  _createElementVNode(\"button\", {\n                    type: \"button\",\n                    onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.isEditing = !_ctx.isEditing))\n                  }, [\n                    (_ctx.isEditing)\n                      ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \" edit_off \"))\n                      : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \" edit \"))\n                  ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_7, [\n                  _createElementVNode(\"img\", {\n                    class: \"artifact-icon\",\n                    src: _ctx.artifactImgSrc,\n                    alt: _ctx.displayName(_ctx.copiedArtifact.name),\n                    onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.artifactIconOnClick()))\n                  }, null, 8, _hoisted_8),\n                  _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n                ]),\n                (_ctx.isEditing)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                      _withDirectives(_createElementVNode(\"select\", {\n                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.copiedArtifact.mainStat) = $event)),\n                        onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                      }, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.mainStatOptions, (option) => {\n                          return (_openBlock(), _createElementBlock(\"option\", {\n                            key: option,\n                            value: option\n                          }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_11))\n                        }), 128))\n                      ], 544), [\n                        [_vModelSelect, _ctx.copiedArtifact.mainStat]\n                      ]),\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"number\",\n                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.copiedArtifact.mainStatValue) = $event)),\n                        step: _ctx.statStep(_ctx.copiedArtifact.mainStat),\n                        min: \"0\",\n                        onChange: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                      }, null, 40, _hoisted_12), [\n                        [_vModelText, _ctx.copiedArtifact.mainStatValue]\n                      ])\n                    ]))\n                  : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' +\r\n                _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                  _ctx.copiedArtifact.mainStatValue)), 1)),\n                (_ctx.isEditing)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                      _withDirectives(_createElementVNode(\"select\", {\n                        class: \"star\",\n                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.copiedArtifact.rarity) = $event)),\n                        onChange: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.starOnChange && _ctx.starOnChange(...args)))\n                      }, _cache[11] || (_cache[11] = [\n                        _createElementVNode(\"option\", { value: \"5\" }, \" 5 \", -1),\n                        _createElementVNode(\"option\", { value: \"4\" }, \" 4 \", -1)\n                      ]), 544), [\n                        [_vModelSelect, _ctx.copiedArtifact.rarity]\n                      ])\n                    ]))\n                  : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                        return (_openBlock(), _createElementBlock(\"img\", {\n                          class: \"star\",\n                          src: \"images/star.png\",\n                          key: dummy\n                        }))\n                      }), 128))\n                    ]))\n              ]),\n              _createElementVNode(\"td\", _hoisted_16, [\n                _createElementVNode(\"table\", _hoisted_17, [\n                  _createElementVNode(\"tbody\", null, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                      return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                        (_ctx.isEditing)\n                          ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                              _createElementVNode(\"td\", _hoisted_18, [\n                                _withDirectives(_createElementVNode(\"select\", {\n                                  \"onUpdate:modelValue\": ($event: any) => ((subStat.name) = $event),\n                                  onChange: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                                }, [\n                                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.subStatOptions, (option) => {\n                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                      key: option,\n                                      value: option,\n                                      disabled: _ctx.subStatOptionDisabled(option, subStat.name)\n                                    }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_20))\n                                  }), 128))\n                                ], 40, _hoisted_19), [\n                                  [_vModelSelect, subStat.name]\n                                ])\n                              ]),\n                              _createElementVNode(\"td\", _hoisted_21, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                  type: \"number\",\n                                  \"onUpdate:modelValue\": ($event: any) => ((subStat.value) = $event),\n                                  step: _ctx.statStep(subStat.name),\n                                  min: \"0\",\n                                  onChange: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                                }, null, 40, _hoisted_22), [\n                                  [_vModelText, subStat.value]\n                                ])\n                              ])\n                            ], 64))\n                          : (_openBlock(), _createElementBlock(\"td\", _hoisted_23, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1))\n                      ]))\n                    }), 128))\n                  ])\n                ])\n              ])\n            ])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"table\", {\n          key: 1,\n          class: \"artifact\",\n          onClick: _cache[10] || (_cache[10] = ($event: any) => (_ctx.selectOnClick()))\n        }, [\n          _createElementVNode(\"tbody\", null, [\n            _createElementVNode(\"tr\", null, [\n              _createElementVNode(\"td\", _hoisted_24, [\n                (_ctx.score)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, _toDisplayString(Math.round(_ctx.score * 10) / 10), 1))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"div\", _hoisted_26, [\n                  (_ctx.control == 'selectable')\n                    ? (_openBlock(), _createElementBlock(\"button\", _hoisted_27, [\n                        (_ctx.selected)\n                          ? (_openBlock(), _createElementBlock(\"span\", _hoisted_28, \" select_check_box \"))\n                          : (_openBlock(), _createElementBlock(\"span\", _hoisted_29, \" check_box_outline_blank \"))\n                      ]))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                _createElementVNode(\"div\", _hoisted_30, [\n                  _createElementVNode(\"img\", {\n                    class: \"artifact-icon\",\n                    src: _ctx.artifactImgSrc,\n                    alt: _ctx.displayName(_ctx.copiedArtifact.name)\n                  }, null, 8, _hoisted_31),\n                  _createElementVNode(\"div\", _hoisted_32, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n                ]),\n                _createElementVNode(\"div\", _hoisted_33, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' +\r\n                _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                  _ctx.copiedArtifact.mainStatValue)), 1),\n                _createElementVNode(\"div\", null, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                    return (_openBlock(), _createElementBlock(\"img\", {\n                      class: \"star\",\n                      src: \"images/star.png\",\n                      key: dummy\n                    }))\n                  }), 128))\n                ])\n              ]),\n              _createElementVNode(\"td\", _hoisted_34, [\n                _createElementVNode(\"table\", _hoisted_35, [\n                  _createElementVNode(\"tbody\", null, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                      return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                        _createElementVNode(\"td\", null, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1)\n                      ]))\n                    }), 128))\n                  ])\n                ])\n              ])\n            ])\n          ])\n        ])),\n    _withDirectives(_createElementVNode(\"div\", null, [\n      _createVNode(_component_ArtifactSetSelect, {\n        visible: true,\n        index: 1,\n        \"artifact-set\": _ctx.artifact.setname,\n        \"artifact-set-masters\": _ctx.artifactSetMasters,\n        cat_id: _ctx.artifact.cat_id,\n        \"onUpdate:artifactSet\": _ctx.updateArtifactSet\n      }, null, 8, [\"artifact-set\", \"artifact-set-masters\", \"cat_id\", \"onUpdate:artifactSet\"])\n    ], 512), [\n      [_vShow, _ctx.isListShow]\n    ])\n  ]))\n}","<template>\r\n  <div class=\"artifact\">\r\n    <table v-if=\"control == 'editable'\" class=\"artifact\">\r\n      <tbody>\r\n        <tr>\r\n          <td class=\"left-column\" style=\"width: 45%;\">\r\n            <div class=\"control\">\r\n              <button type=\"button\" @click=\"isEditing = !isEditing\">\r\n                <span v-if=\"isEditing\" class=\"material-symbols-outlined\"> edit_off </span>\r\n                <span v-else class=\"material-symbols-outlined\"> edit </span>\r\n              </button>\r\n            </div>\r\n            <div class=\"with-tooltip\">\r\n              <img class=\"artifact-icon\" :src=\"artifactImgSrc\" :alt=\"displayName(copiedArtifact.name)\"\r\n                @click=\"artifactIconOnClick()\">\r\n              <div class=\"tooltip\">{{ displayName(copiedArtifact.name) }}</div>\r\n            </div>\r\n            <div class=\"edit-mainstat\" v-if=\"isEditing\">\r\n              <select v-model=\"copiedArtifact.mainStat\" @change=\"onChange\">\r\n                <option v-for=\"option in mainStatOptions\" :key=\"option\" :value=\"option\">\r\n                  {{ displayName(option) }}\r\n                </option>\r\n              </select>\r\n              <input type=\"number\" v-model=\"copiedArtifact.mainStatValue\" :step=\"statStep(copiedArtifact.mainStat)\"\r\n                min=\"0\" @change=\"onChange\">\r\n            </div>\r\n            <div v-else class=\"mainstat\" style=\"margin: 1px 0\">\r\n              {{ displayName(copiedArtifact.mainStat).replace(/%$/, '') + '+' +\r\n                displayStatValue(copiedArtifact.mainStat,\r\n                  copiedArtifact.mainStatValue)\r\n              }}\r\n            </div>\r\n            <div v-if=\"isEditing\">\r\n              <select class=\"star\" v-model=\"copiedArtifact.rarity\" @change=\"starOnChange\">\r\n                <option value=\"5\"> 5 </option>\r\n                <option value=\"4\"> 4 </option>\r\n              </select>\r\n            </div>\r\n            <div v-else>\r\n              <img class=\"star\" v-for=\"dummy in new Array(copiedArtifact.rarity)\" src=\"images/star.png\" :key=\"dummy\">\r\n            </div>\r\n          </td>\r\n          <td style=\"width: 55%\">\r\n            <table class=\"artifact-substat\">\r\n              <tbody>\r\n                <tr v-for=\"(subStat, index) in copiedArtifact.subStats\" :key=\"index\">\r\n                  <template v-if=\"isEditing\">\r\n                    <td class=\"right\">\r\n                      <select v-model=\"subStat.name\" @change=\"onChange\">\r\n                        <option v-for=\"option in subStatOptions\" :key=\"option\" :value=\"option\"\r\n                          :disabled=\"subStatOptionDisabled(option, subStat.name)\">\r\n                          {{ displayName(option) }}\r\n                        </option>\r\n                      </select>\r\n                    </td>\r\n                    <td class=\"right\">\r\n                      <input type=\"number\" v-model=\"subStat.value\" :step=\"statStep(subStat.name)\" min=\"0\"\r\n                        @change=\"onChange\">\r\n                    </td>\r\n                  </template>\r\n                  <td v-else>\r\n                    {{ displayName(subStat.name).replace(/%$/, '') + '+' + displayStatValue(subStat.name, subStat.value)\r\n                    }}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <table v-else class=\"artifact\" @click=\"selectOnClick()\">\r\n      <tbody>\r\n        <tr>\r\n          <td class=\"left-column\" style=\"width: 45%;\">\r\n            <div v-if=\"score\" class=\"score\"> {{ Math.round(score * 10) / 10 }}</div>\r\n            <div class=\"control\">\r\n              <template v-if=\"control == 'selectable'\">\r\n                <button type=\"button\">\r\n                  <span v-if=\"selected\" class=\"material-symbols-outlined\" style=\"color: yellow\"> select_check_box\r\n                  </span>\r\n                  <span v-else class=\"material-symbols-outlined\"> check_box_outline_blank </span>\r\n                </button>\r\n              </template>\r\n            </div>\r\n            <div class=\"with-tooltip\">\r\n              <img class=\"artifact-icon\" :src=\"artifactImgSrc\" :alt=\"displayName(copiedArtifact.name)\">\r\n              <div class=\"tooltip\">{{ displayName(copiedArtifact.name) }}</div>\r\n            </div>\r\n            <div class=\"mainstat\" style=\"margin: 1px 0\">\r\n              {{ displayName(copiedArtifact.mainStat).replace(/%$/, '') + '+' +\r\n                displayStatValue(copiedArtifact.mainStat,\r\n                  copiedArtifact.mainStatValue)\r\n              }}\r\n            </div>\r\n            <div>\r\n              <img class=\"star\" v-for=\"dummy in new Array(copiedArtifact.rarity)\" src=\"images/star.png\" :key=\"dummy\">\r\n            </div>\r\n          </td>\r\n          <td style=\"width: 55%\">\r\n            <table class=\"artifact-substat\">\r\n              <tbody>\r\n                <tr v-for=\"(subStat, index) in copiedArtifact.subStats\" :key=\"index\">\r\n                  <td>\r\n                    {{ displayName(subStat.name).replace(/%$/, '') + '+' + displayStatValue(subStat.name, subStat.value)\r\n                    }}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div v-show=\"isListShow\">\r\n      <ArtifactSetSelect :visible=\"true\" :index=\"1\" :artifact-set=\"artifact.setname\"\r\n        :artifact-set-masters=\"artifactSetMasters\" :cat_id=\"artifact.cat_id\" @update:artifact-set=\"updateArtifactSet\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport _ from 'lodash';\r\nimport { overwriteObject } from \"@/common\";\r\nimport { ARTIFACT_SET_MASTER_DUMMY, TArtifact, ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY } from \"@/input\";\r\nimport { ARTIFACT_SET_MASTER, TArtifactSetEntry, TArtifactSetKey, getArtifactIconUrl } from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\nimport ArtifactSetSelect from \"./ArtifactSetSelect.vue\";\r\n\r\nexport default defineComponent({\r\n  name: 'ArtifactItem',\r\n  props: {\r\n    artifact: { type: Object as PropType<TArtifact>, required: true },\r\n    id: { type: Number },\r\n    control: String,\r\n    initial: Boolean,\r\n    selected: Boolean,\r\n    score: Number,\r\n  },\r\n  components: {\r\n    ArtifactSetSelect,\r\n  },\r\n  emits: ['update:artifact', 'select:artifact'],\r\n  setup(props, context) {\r\n    const { displayName, displayStatValue, percent } = CompositionFunction();\r\n\r\n    const copiedArtifact = reactive(_.cloneDeep(props.artifact));\r\n    const artifactSetMasters = reactive([ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[]);\r\n    const isEditing = ref(false);\r\n    const isSelected = ref(false);\r\n    const isListShow = ref(false);\r\n\r\n    const artifactImgSrc = computed(() => {\r\n      return getArtifactIconUrl(copiedArtifact.setname, copiedArtifact.cat_id);\r\n    });\r\n\r\n    const MAINSTAT_CAT_ARR = {\r\n      '1': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '2': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '3': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '4': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '5': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n    };\r\n\r\n    const mainStatOptions = computed(() => {\r\n      return (MAINSTAT_CAT_ARR as any)[copiedArtifact.cat_id];\r\n    });\r\n\r\n    const subStatOptions = computed(() => {\r\n      return ARRAY;\r\n    });\r\n\r\n    const statStep = (stat: string) => {\r\n      return percent(stat) ? 0.1 : 1;\r\n    };\r\n\r\n    const subStatOptionDisabled = ((value: string, selected: string) => {\r\n      if (value == selected) return false;\r\n      const work = copiedArtifact.subStats.map(s => s.name);\r\n      return work.includes(value);\r\n    });\r\n\r\n    const onChange = () => {\r\n      context.emit('update:artifact', props.id, copiedArtifact);\r\n    };\r\n\r\n    const starOnChange = () => {\r\n      copiedArtifact.rarity = Number(copiedArtifact.rarity);\r\n    }\r\n\r\n    const artifactIconOnClick = () => {\r\n      if (isEditing.value) {\r\n        isListShow.value = !isListShow.value;\r\n      } else {\r\n        isListShow.value = false;\r\n      }\r\n    };\r\n\r\n    const selectOnClick = () => {\r\n      if (props.control === 'selectable') {\r\n        context.emit('select:artifact', props.id);\r\n      }\r\n    };\r\n\r\n    const updateArtifactSet = (artifactSet: TArtifactSetKey) => {\r\n      copiedArtifact.setname = artifactSet;\r\n      const master = ARTIFACT_SET_MASTER[artifactSet];\r\n      copiedArtifact.rarity = master.;\r\n      if ('artifact_list' in master) {\r\n        copiedArtifact.name = master.artifact_list[copiedArtifact.cat_id - 1];\r\n      }\r\n      isListShow.value = false;\r\n      onChange();\r\n    };\r\n\r\n    function onLoad() {\r\n      if (props.initial !== undefined) {\r\n        if (props.control === 'editable') {\r\n          isEditing.value = props.initial;\r\n        } else if (props.control === 'selectable') {\r\n          isSelected.value = props.initial;\r\n        }\r\n      }\r\n    }\r\n    onLoad();\r\n\r\n    watch(props, (newVal, oldVal) => {\r\n      overwriteObject(copiedArtifact, newVal.artifact);\r\n      if (newVal.initial != oldVal.initial) {\r\n        onLoad();\r\n      }\r\n    });\r\n\r\n    return {\r\n      displayName, displayStatValue,\r\n\r\n      copiedArtifact,\r\n      artifactSetMasters,\r\n      isEditing,\r\n      isSelected,\r\n      isListShow,\r\n\r\n      artifactImgSrc,\r\n      mainStatOptions,\r\n      subStatOptions,\r\n      subStatOptionDisabled,\r\n      statStep,\r\n\r\n      onChange,\r\n      starOnChange,\r\n      artifactIconOnClick,\r\n      updateArtifactSet,\r\n      selectOnClick,\r\n    }\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\ndiv.artifact {\r\n  display: inline-block;\r\n  width: calc(25% - 10px);\r\n  min-width: 44rem;\r\n  margin: 2px;\r\n  font-size: 1.8rem;\r\n  background-color: rgb(26, 79, 109);\r\n  border-radius: 10px 10px 0 0;\r\n}\r\n\r\ntable.artifact {\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  width: 100%;\r\n  table-layout: fixed;\r\n  border-spacing: 0;\r\n}\r\n\r\ntable.artifact td.left-column {\r\n  position: relative;\r\n}\r\n\r\ntable.artifact td.left-column div.control {\r\n  position: absolute;\r\n  left: -5px;\r\n  bottom: -5px;\r\n}\r\n\r\ntable.artifact td.left-column div.control button {\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n\r\ntable.artifact td.left-column div.control span {\r\n  font-size: 2.4rem;\r\n  color: blanchedalmond;\r\n}\r\n\r\ndiv.mainstat {\r\n  margin: 1px 0;\r\n}\r\n\r\ntable.artifact-substat {\r\n  width: 100%;\r\n  border-spacing: 0;\r\n}\r\n\r\ntable.artifact tr td {\r\n  vertical-align: top;\r\n  border-bottom: 2px solid whitesmoke;\r\n  padding: 2px 1px;\r\n  white-space: nowrap;\r\n}\r\n\r\ntable.artifact-substat tr td {\r\n  vertical-align: middle;\r\n  border-bottom: 1px solid gray;\r\n  padding: 0px 1px;\r\n  line-height: 2.8rem;\r\n  text-align: left;\r\n}\r\n\r\ntable.artifact-substat tr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\ntable.artifact-substat td.right {\r\n  text-align: right;\r\n}\r\n\r\nselect {\r\n  width: 100%;\r\n  margin: auto 1px;\r\n  padding: 0 1px;\r\n  border: none;\r\n  border-radius: 2px;\r\n}\r\n\r\ninput[type=\"number\"] {\r\n  width: 9rem;\r\n  margin: auto;\r\n  padding: 0 1px;\r\n  border: none;\r\n}\r\n\r\ndiv.edit-mainstat {\r\n  margin: 1px 0;\r\n}\r\n\r\ndiv.edit-mainstat select {\r\n  width: calc(100% - 9rem - 2px);\r\n}\r\n\r\ntable.edit-mainstat input[type=\"number\"] {\r\n  width: calc(100% - 2px);\r\n}\r\n\r\nimg.artifact-icon {\r\n  width: calc(6rem - 2px);\r\n  height: calc(6rem - 2px);\r\n  border: 1px solid gray;\r\n  border-radius: 50%;\r\n}\r\n\r\nimg.star {\r\n  width: 1.6rem;\r\n  height: 1.6rem;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nselect.star {\r\n  width: 8rem;\r\n}\r\n\r\ndiv.score {\r\n  position: absolute;\r\n  left: 5px;\r\n  top: 3px;\r\n}\r\n</style>","import { render } from \"./ArtifactItem.vue?vue&type=template&id=632d0887&scoped=true&ts=true\"\nimport script from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactItem.vue?vue&type=style&index=0&id=632d0887&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-632d0887\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"title\" }\nconst _hoisted_3 = { class: \"description\" }\nconst _hoisted_4 = { class: \"select-list\" }\nconst _hoisted_5 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_6 = { class: \"tooltip\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"table\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.artifactSetEffects, (item) => {\n            return (_openBlock(), _createElementBlock(_Fragment, { key: item }, [\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"th\", _hoisted_2, _toDisplayString(_ctx.displayName(item.key)), 1)\n              ]),\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_3, _toDisplayString(item.value), 1)\n              ])\n            ], 64))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('artifact-set' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: _ctx.getArtifactIconUrl(item.key, _ctx.cat_id),\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.$emit('update:artifact-set', item.key))\n              }, null, 10, _hoisted_5),\n              _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.displayName(item.key)), 1)\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<template>\r\n  <div v-if=\"visible\">\r\n    <table>\r\n      <template v-for=\"item in artifactSetEffects\" :key=\"item\">\r\n        <tr>\r\n          <th class=\"title\">{{ displayName(item.key) }}</th>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"description\">{{ item.value }}</td>\r\n        </tr>\r\n      </template>\r\n    </table>\r\n\r\n    <ul class=\"select-list\">\r\n      <li class=\"with-tooltip\" v-for=\"item in filteredList\" :key=\"item.key\">\r\n        <img :class=\"'artifact-set' + bgImageClass(item) + selectedClass(item)\" :src=\"getArtifactIconUrl(item.key, cat_id)\"\r\n          :alt=\"item.key\" @click=\"$emit('update:artifact-set', item.key)\" />\r\n        <div class=\"tooltip\">{{ displayName(item.key) }}</div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  ARTIFACT_SET_MASTER_LIST,\r\n  getArtifactIconUrl,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n  TArtifactSetEntry,\r\n} from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive } from \"vue\";\r\nimport CompositionFunction from './CompositionFunction.vue';\r\n\r\nexport default defineComponent({\r\n  name: \"ArtifactSetSelect\",\r\n  props: {\r\n    visible: { type: Boolean, required: true },\r\n    index: { type: Number, required: true },\r\n    artifactSet: { type: String, required: true },\r\n    artifactSetMasters: { type: Array as PropType<TArtifactSetEntry[]>, required: true },\r\n    cat_id: { type: Number },\r\n  },\r\n  emits: [\"update:artifact-set\"],\r\n  setup(props) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const bgImageClass = (item: TArtifactSetEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TArtifactSetEntry) => {\r\n      return item.key == props.artifactSet ? \" selected\" : \"\";\r\n    };\r\n    const artifactSetMastersRea = reactive(props.artifactSetMasters);\r\n\r\n    const filteredList = computed(() => {\r\n      return ARTIFACT_SET_MASTER_LIST as TArtifactSetEntry[];\r\n    });\r\n\r\n    const artifactSetEffects = computed(() => {\r\n      const result = [] as any;\r\n      if (artifactSetMastersRea.length > 0) {\r\n        if (\"2\" in artifactSetMastersRea[0]) {\r\n          result.push({\r\n            key: artifactSetMastersRea[0].key + \" \" + \"2\",\r\n            value: artifactSetMastersRea[0][\"2\"]?.,\r\n          });\r\n        }\r\n        if (artifactSetMastersRea.length > 1) {\r\n          if (artifactSetMastersRea[0].key == artifactSetMastersRea[1].key) {\r\n            if (\"4\" in artifactSetMastersRea[0]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[0].key + \" \" + \"4\",\r\n                value: artifactSetMastersRea[0][\"4\"]?.,\r\n              });\r\n            }\r\n          } else {\r\n            if (\"2\" in artifactSetMastersRea[1]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[1].key + \" \" + \"2\",\r\n                value: artifactSetMastersRea[1][\"2\"]?.,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    return {\r\n      displayName,\r\n      getArtifactIconUrl,\r\n\r\n      bgImageClass,\r\n      selectedClass,\r\n      filteredList,\r\n      artifactSetEffects,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nimg.artifact-set {\r\n  width: 60px;\r\n  height: 60px;\r\n  background-size: contain;\r\n}\r\n\r\n.selected {\r\n  background-color: gold;\r\n}\r\n\r\n:checked+img {\r\n  background-color: gold;\r\n}\r\n\r\ntable {\r\n  width: calc(100% - 1rem);\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  border: 2px solid gray;\r\n  border-spacing: 0;\r\n}\r\n\r\nth,\r\ntd {\r\n  padding: 2px 8px;\r\n  border: 1px solid gray;\r\n  border-spacing: 0;\r\n}\r\n\r\nth.title {\r\n  color: burlywood;\r\n}\r\n\r\n.description {\r\n  text-align: left;\r\n}\r\n</style>\r\n","import { render } from \"./ArtifactSetSelect.vue?vue&type=template&id=91b28a50&scoped=true&ts=true\"\nimport script from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactSetSelect.vue?vue&type=style&index=0&id=91b28a50&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-91b28a50\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, vShow as _vShow, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"select-list\" }\nconst _hoisted_3 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_4 = [\"src\", \"alt\"]\nconst _hoisted_5 = { class: \"select-list\" }\nconst _hoisted_6 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = { class: \"select-list\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"ul\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.elementList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.elementCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.elementCheckList))\n                }, null, 40, _hoisted_3), [\n                  [_vModelCheckbox, _ctx.elementCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.elementSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_4)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.weaponList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.weaponCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.weaponCheckList))\n                }, null, 40, _hoisted_6), [\n                  [_vModelCheckbox, _ctx.weaponCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.weaponSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_7)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('character' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: item.icon_url,\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.characterOnClick(item.key))\n              }, null, 10, _hoisted_9),\n              _createElementVNode(\"div\", _hoisted_10, _toDisplayString(_ctx.displayName(item.key)), 1),\n              _createElementVNode(\"img\", {\n                class: \"vision\",\n                src: _ctx.visionSrc(item),\n                alt: item.\n              }, null, 8, _hoisted_11),\n              _withDirectives(_createElementVNode(\"div\", { class: \"selection-number\" }, _toDisplayString(_ctx.selectionNumber(item.key)), 513), [\n                [_vShow, _ctx.selectionNumber(item.key)]\n              ])\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<template>\r\n  <div v-if=\"visible\">\r\n    <ul class=\"select-list\">\r\n      <li v-for=\"item in elementList\" :key=\"item\">\r\n        <label>\r\n          <input\r\n            class=\"hidden\"\r\n            type=\"checkbox\"\r\n            v-model=\"elementCheckList[item]\"\r\n            @change=\"checkListOnChange(item, elementCheckList)\"\r\n          />\r\n          <img class=\"filter\" :src=\"elementSrc(item)\" :alt=\"item\" />\r\n        </label>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"select-list\">\r\n      <li v-for=\"item in weaponList\" :key=\"item\">\r\n        <label>\r\n          <input\r\n            class=\"hidden\"\r\n            type=\"checkbox\"\r\n            v-model=\"weaponCheckList[item]\"\r\n            @change=\"checkListOnChange(item, weaponCheckList)\"\r\n          />\r\n          <img class=\"filter\" :src=\"weaponSrc(item)\" :alt=\"item\" />\r\n        </label>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"select-list\">\r\n      <li class=\"with-tooltip\" v-for=\"item in filteredList\" :key=\"item.key\">\r\n        <img\r\n          :class=\"'character' + bgImageClass(item) + selectedClass(item)\"\r\n          :src=\"item.icon_url\"\r\n          :alt=\"item.key\"\r\n          @click=\"characterOnClick(item.key)\"\r\n        />\r\n        <div class=\"tooltip\">{{ displayName(item.key) }}</div>\r\n        <img class=\"vision\" :src=\"visionSrc(item)\" :alt=\"item.\" />\r\n        <div class=\"selection-number\" v-show=\"selectionNumber(item.key)\">\r\n          {{ selectionNumber(item.key) }}\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  TCharacterEntry,\r\n  ELEMENT_IMG_SRC,\r\n  TVisionKey,\r\n  WEAPON_IMG_SRC,\r\n  TWeaponTypeKey,\r\n  CHARACTER_MASTER_LIST,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n} from \"@/master\";\r\nimport { defineComponent, reactive, computed, PropType } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\n\r\ninterface ICheckList {\r\n  [key: string]: boolean;\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"CharacterSelect\",\r\n  props: {\r\n    character: { type: String },\r\n    characters: { type: Array as PropType<string[]> },\r\n    visible: { type: Boolean, required: true },\r\n  },\r\n  emits: [\"update:character\", \"update:characters\"],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const visionSrc = (item: TCharacterEntry) => ELEMENT_IMG_SRC[item.];\r\n    const bgImageClass = (item: TCharacterEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TCharacterEntry) => {\r\n      if (props.character && props.character == item.key) {\r\n        return \" selected\";\r\n      }\r\n      if (props.characters && props.characters.includes(item.key)) {\r\n        return \" selected\";\r\n      }\r\n      return \"\";\r\n    };\r\n\r\n    const elementList = Object.keys(ELEMENT_IMG_SRC) as TVisionKey[];\r\n    const elementSrc = (element: TVisionKey) => ELEMENT_IMG_SRC[element] as string;\r\n    const elementCheckList = reactive({}) as ICheckList;\r\n    for (let key of elementList) {\r\n      elementCheckList[key] = false;\r\n    }\r\n\r\n    const weaponList = Object.keys(WEAPON_IMG_SRC) as TWeaponTypeKey[];\r\n    const weaponSrc = (weapon: TWeaponTypeKey) => WEAPON_IMG_SRC[weapon] as string;\r\n    const weaponCheckList = reactive({}) as ICheckList;\r\n    for (let key of weaponList) {\r\n      weaponCheckList[key] = false;\r\n    }\r\n\r\n    const checkListOnChange = function (item: string, checkList: ICheckList) {\r\n      if (!checkList[item]) return;\r\n      Object.keys(checkList)\r\n        .filter((s) => s != item)\r\n        .forEach((key) => {\r\n          checkList[key] = false;\r\n        });\r\n    };\r\n\r\n    const filteredList = computed(() => {\r\n      const result = [];\r\n      const elementChecked =\r\n        Object.keys(elementCheckList).filter((s) => elementCheckList[s]).length > 0;\r\n      const weaponChecked =\r\n        Object.keys(weaponCheckList).filter((s) => weaponCheckList[s]).length > 0;\r\n      for (let entry of CHARACTER_MASTER_LIST as TCharacterEntry[]) {\r\n        if (elementChecked && !elementCheckList[entry.]) continue;\r\n        if (weaponChecked && !weaponCheckList[entry.]) continue;\r\n        result.push(entry);\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const selectionNumber = (character: string) => {\r\n      let result = \"\";\r\n      if (props.characters) {\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          result = String(index + 1);\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const characterOnClick = (character: string) => {\r\n      if (props.character) {\r\n        context.emit(\"update:character\", character);\r\n      }\r\n      if (props.characters) {\r\n        const characters: string[] = props.characters.map((s) => s);\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          characters[index] = \"\";\r\n        } else {\r\n          const blankIndex = props.characters.indexOf(\"\");\r\n          if (blankIndex != -1) {\r\n            characters[blankIndex] = character;\r\n          }\r\n        }\r\n        context.emit(\"update:characters\", characters);\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      visionSrc,\r\n      bgImageClass,\r\n      selectedClass,\r\n      elementList,\r\n      elementSrc,\r\n      elementCheckList,\r\n      weaponList,\r\n      weaponSrc,\r\n      weaponCheckList,\r\n      checkListOnChange,\r\n      filteredList,\r\n\r\n      selectionNumber,\r\n      characterOnClick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nimg.character {\r\n  width: 80px;\r\n  height: 80px;\r\n  background-size: contain;\r\n}\r\n\r\n.character.selected {\r\n  background-color: gold;\r\n}\r\n\r\nimg.vision {\r\n  width: 25px;\r\n  height: 25px;\r\n  position: absolute;\r\n  left: 3px;\r\n  top: 3px;\r\n}\r\n\r\ndiv.selection-number {\r\n  position: absolute;\r\n  right: 3px;\r\n  top: 3px;\r\n  width: 25px;\r\n  height: 25px;\r\n  border-radius: 50%;\r\n  border: 2px solid whitesmoke;\r\n  font-size: 25px;\r\n  background-color: black;\r\n  opacity: 75%;\r\n}\r\n\r\nimg.filter {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n}\r\n\r\n:checked + img {\r\n  background-color: rgb(156, 140, 49);\r\n}\r\n</style>\r\n","import { render } from \"./CharacterSelect.vue?vue&type=template&id=6b0e72ca&scoped=true&ts=true\"\nimport script from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./CharacterSelect.vue?vue&type=style&index=0&id=6b0e72ca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b0e72ca\"]])\n\nexport default __exports__","<script lang=\"ts\">\r\nimport i18n from \"@/i18n\";\r\nimport { STAT_PERCENT_LIST } from \"@/input\";\r\nimport { nextTick } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\n\r\nexport default function CompositionFunction() {\r\n    const { t, te } = useI18n({\r\n        useScope: \"global\",\r\n    });\r\n\r\n    const localeList = [\r\n        { name: \"\", value: \"ja-jp\" },\r\n        { name: \"English\", value: \"en-us\" },\r\n        { name: \"\", value: \"zh-cn\" },\r\n        { name: \"\", value: \"zh-tw\" },\r\n        { name: \"\", value: \"ko-kr\" },\r\n        { name: \"Deutsch\", value: \"de-de\" },\r\n        { name: \"Espaol\", value: \"es-es\" },\r\n        { name: \"Franais\", value: \"fr-fr\" },\r\n        { name: \"Indonesia\", value: \"id-id\" },\r\n        { name: \"Portugus\", value: \"pt-pt\" },\r\n        { name: \"P\", value: \"ru-ru\" },\r\n        { name: '', value: 'th-th' },\r\n        { name: \"Ting Vit\", value: \"vi-vn\" },\r\n    ];\r\n\r\n    const setI18nLanguage = function (locale: string) {\r\n        i18n.global.locale.value = locale;\r\n        loadLocaleMessages(locale);\r\n        document.querySelector('html')?.setAttribute('lang', locale)\r\n    }\r\n\r\n    const loadLocaleMessages = async function (locale: string) {\r\n        if (locale != 'ja-jp') {\r\n            const messages = await fetch(`./locales/${locale}.json`).then(resp => resp.json());\r\n            i18n.global.setLocaleMessage(locale, messages);\r\n        }\r\n        return nextTick();\r\n    }\r\n\r\n    const displayName = function (key: any): string {\r\n        if (!key) return key;\r\n        key = String(key).replace(/^_/, '');\r\n        if (i18n.global.locale.value === 'ja-jp') { // translate\r\n            let result = String(key);\r\n            if (['', '', '', ''].includes(result)) {\r\n                return result;\r\n            }\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace('', '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/^/, '');\r\n            return result;\r\n        }\r\n        if (te(key)) return t(key);\r\n        const re = new RegExp('(.*?)([\\\\s_\\\\(\\\\)/]+)(.*)');\r\n        let result = '';\r\n        let work = key;\r\n        while (work) {\r\n            const reRet = re.exec(work);\r\n            if (!reRet) {\r\n                result += t(work);\r\n                break;\r\n            }\r\n            if (reRet[1]) result += t(reRet[1]);\r\n            result += reRet[2];\r\n            work = reRet[3];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const percent = function (stat: string) {\r\n        const tempArr = stat.split('.');\r\n        let work = tempArr[0].replace(/V[1-3]$/, '');\r\n        let hasPercent = work.endsWith(\"%\") || STAT_PERCENT_LIST.includes(work);\r\n        if (!hasPercent) {\r\n            ['', '', '', ''].forEach(postfix => {\r\n                if (work.endsWith(postfix)) hasPercent = true;\r\n            })\r\n        }\r\n        return hasPercent ? '%' : '';\r\n    }\r\n\r\n    const displayStatName = function (stat: string) {\r\n        let result = stat.replace(/V[1-3]$/, '');\r\n        const tempArr = result.split('.');\r\n        if (tempArr.length == 1) {\r\n            result = displayName(result);\r\n            result = result.replace('', '')\r\n        } else if (i18n.global.locale.value === 'ja-jp') {\r\n            result = displayName(tempArr[tempArr.length - 1]) + '' + displayName(tempArr[0]);\r\n        } else {\r\n            result = displayName(tempArr[tempArr.length - 1]) + ' ' + displayName(tempArr[0]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const displayStatValue = function (stat: string, value: number, opt_s?: number): string {\r\n        const myPercent = percent(stat);\r\n        let p = myPercent ? 10 : 1;\r\n        if (opt_s) p = Math.pow(10, opt_s);\r\n        return String(Math.round(value * p) / p) + myPercent;\r\n    }\r\n\r\n    const displayStatAbbrev = function (stat: string) {\r\n        let result = stat;\r\n        const tempArr = stat.split('.');\r\n        if (tempArr.length == 1) {\r\n            stat = stat.replace(/V\\d$/, '');\r\n            stat = stat.replace(/TOP$/, '');\r\n            if (stat.startsWith('')) stat = stat.replace(/^/, '');\r\n            if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            result = displayName(stat);\r\n        } else {\r\n            result = displayStatName(stat);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /** $event.target.valuetypescript */\r\n    const targetValue = function (event: Event) {\r\n        if (event.target instanceof HTMLInputElement) return event.target.value;\r\n        if (event.target instanceof HTMLSelectElement) return event.target.value;\r\n        return undefined;\r\n    }\r\n\r\n    const displayOptionName = function (name: string) {\r\n        return displayName(name.replace(/^required_/, \"\"));\r\n    }\r\n\r\n    return {\r\n        localeList,\r\n        setI18nLanguage,\r\n        loadLocaleMessages,\r\n        displayName,\r\n        displayStatName,\r\n        displayStatValue,\r\n        displayStatAbbrev,\r\n        targetValue,\r\n        displayOptionName,\r\n        percent,\r\n    }\r\n}\r\n</script>\r\n","import script from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\nexport * from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"member\" }\nconst _hoisted_2 = { class: \"with-tooltip\" }\nconst _hoisted_3 = [\"src\", \"alt\"]\nconst _hoisted_4 = { class: \"tooltip\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = [\"src\", \"alt\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = {\n  key: 0,\n  class: \"stat-value\"\n}\nconst _hoisted_9 = { key: 1 }\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"src\"]\nconst _hoisted_12 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"member-img\",\n      onDblclick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.characterOnDblclick && _ctx.characterOnDblclick(...args)))\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"img\", {\n          class: _normalizeClass('character' + _ctx.characterImgClass),\n          src: _ctx.characterImgSrc,\n          alt: _ctx.displayName(_ctx.member.name)\n        }, null, 10, _hoisted_3),\n        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.displayName(_ctx.member.name)), 1)\n      ]),\n      _createElementVNode(\"img\", {\n        class: \"vision\",\n        src: _ctx.visionImgSrc,\n        alt: \"vision\"\n      }, null, 8, _hoisted_5),\n      _withDirectives(_createElementVNode(\"div\", { class: \"constellation\" }, _toDisplayString(_ctx.constellation), 513), [\n        [_vShow, _ctx.constellation]\n      ]),\n      (_ctx.member.tags[3])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: _normalizeClass('tag tag-3' + _ctx.tagColorClass(3))\n          }, _toDisplayString(_ctx.member.tags[3]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[2])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 1,\n            class: _normalizeClass('tag tag-2' + _ctx.tagColorClass(2))\n          }, _toDisplayString(_ctx.member.tags[2]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[1])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 2,\n            class: _normalizeClass('tag tag-1' + _ctx.tagColorClass(1))\n          }, _toDisplayString(_ctx.member.tags[1]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[0])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 3,\n            class: _normalizeClass('tag tag-0' + _ctx.tagColorClass(0))\n          }, _toDisplayString(_ctx.member.tags[0]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[0])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 4,\n            class: \"replacement replacement-0\",\n            src: _ctx.replaceImgSrc(0),\n            alt: _ctx.member.replacements[0]\n          }, null, 8, _hoisted_6))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[1])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 5,\n            class: \"replacement replacement-1\",\n            src: _ctx.replaceImgSrc(1),\n            alt: _ctx.member.replacements[1]\n          }, null, 8, _hoisted_7))\n        : _createCommentVNode(\"\", true)\n    ], 32),\n    (_ctx.displayStat)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString(_ctx.statValue), 1))\n      : _createCommentVNode(\"\", true),\n    (_ctx.showEquipment)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n          _createElementVNode(\"img\", {\n            class: \"weapon\",\n            src: _ctx.imgWeaponSrc,\n            alt: \"weapon\"\n          }, null, 8, _hoisted_10),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(0),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_11),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(1),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_12)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","<template>\r\n  <div class=\"member\">\r\n    <div class=\"member-img\" @dblclick=\"characterOnDblclick\">\r\n      <div class=\"with-tooltip\">\r\n        <img :class=\"'character' + characterImgClass\" :src=\"characterImgSrc\" :alt=\"displayName(member.name)\" />\r\n        <span class=\"tooltip\">{{ displayName(member.name) }}</span>\r\n      </div>\r\n      <img class=\"vision\" :src=\"visionImgSrc\" alt=\"vision\" />\r\n      <div class=\"constellation\" v-show=\"constellation\">\r\n        {{ constellation }}\r\n      </div>\r\n      <div :class=\"'tag tag-3' + tagColorClass(3)\" v-if=\"member.tags[3]\">{{ member.tags[3] }}</div>\r\n      <div :class=\"'tag tag-2' + tagColorClass(2)\" v-if=\"member.tags[2]\">{{ member.tags[2] }}</div>\r\n      <div :class=\"'tag tag-1' + tagColorClass(1)\" v-if=\"member.tags[1]\">{{ member.tags[1] }}</div>\r\n      <div :class=\"'tag tag-0' + tagColorClass(0)\" v-if=\"member.tags[0]\">{{ member.tags[0] }}</div>\r\n      <img class=\"replacement replacement-0\" v-if=\"member.replacements[0]\" :src=\"replaceImgSrc(0)\"\r\n        :alt=\"member.replacements[0]\">\r\n      <img class=\"replacement replacement-1\" v-if=\"member.replacements[1]\" :src=\"replaceImgSrc(1)\"\r\n        :alt=\"member.replacements[1]\">\r\n    </div>\r\n    <div class=\"stat-value\" v-if=\"displayStat\">\r\n      {{ statValue }}\r\n    </div>\r\n    <div v-if=\"showEquipment\">\r\n      <img class=\"weapon\" :src=\"imgWeaponSrc\" alt=\"weapon\" />\r\n      <img class=\"artifact-set\" :src=\"imgArtifactSetSrc(0)\" alt=\"artifact-set\" />\r\n      <img class=\"artifact-set\" :src=\"imgArtifactSetSrc(1)\" alt=\"artifact-set\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\r\nimport { pushBuildinfoToSession, TStats } from \"@/input\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { ARTIFACT_SET_MASTER, CHARACTER_MASTER, ELEMENT_COLOR_CLASS, ELEMENT_IMG_SRC, IMG_SRC_DUMMY, STAR_BACKGROUND_IMAGE_CLASS, TArtifactSetEntry, TCharacterEntry, TCharacterKey, TElementColorClassKey, TWeaponEntry, WEAPON_MASTER } from \"@/master\";\r\nimport { getBuilddataFromStorage, TMember } from \"./team\";\r\n\r\nexport default defineComponent({\r\n  name: 'MemberItem',\r\n  props: {\r\n    member: { type: Object as PropType<TMember>, required: true },\r\n    displayStat: { type: String },\r\n    showEquipment: { type: Boolean },\r\n    statsObj: { type: Object as PropType<TStats> },\r\n    viewable: { type: Boolean },\r\n    tags: { type: Array as PropType<any[]> },\r\n    members: { type: Array as PropType<string[]> },\r\n    elementalResonance: { type: Array as PropType<string[]> },\r\n  },\r\n  setup(props) {\r\n    const { displayName, displayStatValue } = CompositionFunction();\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, () => {\r\n      watchCount.value++;\r\n    });\r\n\r\n    const characterMaster = computed(() => props.member.name ? (CHARACTER_MASTER[props.member.name as TCharacterKey] as TCharacterEntry) ?? undefined : undefined);\r\n    const characterImgSrc = computed(() => characterMaster.value?.icon_url ?? IMG_SRC_DUMMY);\r\n    const characterImgClass = computed(() => characterMaster.value?. ? (' ' + (STAR_BACKGROUND_IMAGE_CLASS as any)[String(characterMaster.value.)]) : '');\r\n    const visionImgSrc = computed(() => characterMaster.value?. ? (ELEMENT_IMG_SRC as any)[characterMaster.value.] : IMG_SRC_DUMMY);\r\n    const constellation = computed(() => (builddata.value ? builddata.value. : ''));\r\n    const builddata = computed(() => (props.member.name && props.member.buildname) ? getBuilddataFromStorage(props.member.name, props.member.buildname) : undefined);\r\n    const weaponMaster = computed((): TWeaponEntry => {\r\n      let result = undefined;\r\n      if (builddata.value) {\r\n        const weapon = builddata.value.;\r\n        if (weapon && characterMaster.value) {\r\n          result = (WEAPON_MASTER as any)[characterMaster.value.][weapon];\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const imgWeaponSrc = computed(() => weaponMaster.value?.icon_url ?? IMG_SRC_DUMMY);\r\n    const weaponName = computed(() => weaponMaster.value?.key ?? '');\r\n    const statValue = computed(() => {\r\n      watchCount.value;\r\n      let result = '-';\r\n      if (builddata.value) {\r\n        let stat = props.displayStat;\r\n        if (props.statsObj && stat) {\r\n          if (stat === '/') {\r\n            result = displayStatValue('', props.statsObj['']);\r\n            result += '/';\r\n            result += displayStatValue('', props.statsObj['']);\r\n          } else {\r\n            result = displayStatValue(stat, props.statsObj[stat]);\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const artifactSetMasters = computed((): TArtifactSetEntry[] => {\r\n      const result: TArtifactSetEntry[] = [];\r\n      if (builddata.value) {\r\n        for (let i = 0; i < 2; i++) {\r\n          const key = '' + (i + 1);\r\n          let value = builddata.value[key] ?? 'NONE';\r\n          result.push((ARTIFACT_SET_MASTER as any)[value]);\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const replaceImgSrc = (replIndex: number) => {\r\n      const name = replIndex < props.member.replacements.length ? props.member.replacements[replIndex] : undefined;\r\n      return name ? (CHARACTER_MASTER[name as TCharacterKey] as TCharacterEntry).icon_url : IMG_SRC_DUMMY;\r\n    };\r\n    const imgArtifactSetSrc = (index: number) => artifactSetMasters.value[index]?.image ? artifactSetMasters.value[index].image.replace(/\\.png$/, '/flower_of_life.png') : IMG_SRC_DUMMY;\r\n    const artifactSetName = (index: number) => artifactSetMasters.value[index]?.key ??  '';\r\n    const tagColorClass = (index: number) =>\r\n      Object.keys(ELEMENT_COLOR_CLASS).map(key => ELEMENT_COLOR_CLASS[(key as TElementColorClassKey)]).includes(props.member.tags[index].toLowerCase()) ? ' ' + props.member.tags[index].toLowerCase() : '';\r\n\r\n    const characterOnDblclick = () => {\r\n      if (props.viewable) {\r\n        locate();\r\n      }\r\n    };\r\n\r\n    const locate = () => {\r\n      const member = props.member;\r\n      if (member?.name) {\r\n        if (confirm('' + member.name + '')) {\r\n          const teammembers = props.members?.filter(s => s != member.name);\r\n          pushBuildinfoToSession(member.name, member.buildname, undefined, teammembers);\r\n          window.open('./', '_blank');\r\n          // window.location.href = './';\r\n        }\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      characterImgSrc,\r\n      characterImgClass,\r\n      visionImgSrc,\r\n      constellation,\r\n      replaceImgSrc,\r\n      imgWeaponSrc,\r\n      weaponName,\r\n      imgArtifactSetSrc,\r\n      artifactSetName,\r\n      tagColorClass,\r\n      statValue,\r\n\r\n      characterOnDblclick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style>\r\ndiv.member-img {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\nimg.character {\r\n  width: calc(100%);\r\n  background-size: contain;\r\n}\r\n\r\nimg.vision {\r\n  width: calc(100% / 3);\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n}\r\n\r\ndiv.constellation {\r\n  position: absolute;\r\n  font-size: 20px;\r\n  padding: 2px 5px;\r\n  right: 2px;\r\n  top: 2px;\r\n  background-color: black;\r\n  border-radius: 50%;\r\n  opacity: 75%;\r\n}\r\n\r\ndiv.tag {\r\n  position: absolute;\r\n  left: 50%;\r\n  bottom: 1px;\r\n  transform: translateX(-50%);\r\n  width: 70px;\r\n  height: 12px;\r\n  font-size: 10px;\r\n  background: linear-gradient(to top, #3d3d3b, #141414);\r\n  border: 1px solid whitesmoke;\r\n  border-radius: 3px;\r\n  vertical-align: middle;\r\n  padding-top: 1px;\r\n}\r\n\r\ndiv.tag-0 {\r\n  bottom: 1px;\r\n}\r\n\r\ndiv.tag-1 {\r\n  bottom: 17px;\r\n}\r\n\r\ndiv.tag-2 {\r\n  bottom: 33px;\r\n}\r\n\r\ndiv.tag-3 {\r\n  bottom: 49px;\r\n}\r\n\r\nimg.replacement {\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: -2px;\r\n  transform: translateX(-50%);\r\n  width: 52px;\r\n  height: 36px;\r\n  border-radius: 75%;\r\n  object-position: 0 0;\r\n  object-fit: cover;\r\n  z-index: 10;\r\n}\r\n\r\nimg.replacement-0 {\r\n  left: 25%;\r\n}\r\n\r\nimg.replacement-1 {\r\n  left: 75%;\r\n}\r\n\r\nimg.weapon,\r\nimg.artifact-set {\r\n  position: relative;\r\n  width: calc(100% / 3 - 4px);\r\n  height: calc(100% / 3 - 4px);\r\n  border: 2px solid slategray;\r\n  border-radius: 50%;\r\n  background-color: black;\r\n  z-index: 100;\r\n}\r\n\r\ndiv.stat-value {\r\n  font-size: 12px;\r\n  padding-top: 2px;\r\n  padding-bottom: 2px;\r\n}\r\n</style>\r\n","import { render } from \"./MemberItem.vue?vue&type=template&id=490d348a&ts=true\"\nimport script from \"./MemberItem.vue?vue&type=script&lang=ts\"\nexport * from \"./MemberItem.vue?vue&type=script&lang=ts\"\n\nimport \"./MemberItem.vue?vue&type=style&index=0&id=490d348a&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, createVNode as _createVNode, vShow as _vShow, vModelSelect as _vModelSelect } from \"vue\"\n\nconst _hoisted_1 = {\n  colspan: \"2\",\n  class: \"character-select-mode\"\n}\nconst _hoisted_2 = { key: 0 }\nconst _hoisted_3 = { key: 1 }\nconst _hoisted_4 = { class: \"member-tags\" }\nconst _hoisted_5 = { colspan: \"2\" }\nconst _hoisted_6 = [\"onClick\"]\nconst _hoisted_7 = { class: \"members\" }\nconst _hoisted_8 = { colspan: \"2\" }\nconst _hoisted_9 = { class: \"buildname-select\" }\nconst _hoisted_10 = [\"value\"]\nconst _hoisted_11 = { class: \"team-tags\" }\nconst _hoisted_12 = { colspan: \"2\" }\nconst _hoisted_13 = [\"onClick\"]\nconst _hoisted_14 = { class: \"buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_CharacterSelect = _resolveComponent(\"CharacterSelect\")!\n  const _component_MemberItem = _resolveComponent(\"MemberItem\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (!_ctx.characterSelectMode)\n      ? (_openBlock(), _createBlock(_component_CharacterSelect, {\n          key: 0,\n          visible: true,\n          characters: _ctx.characters,\n          \"onUpdate:characters\": _ctx.updateCharacters\n        }, null, 8, [\"characters\", \"onUpdate:characters\"]))\n      : (_openBlock(), _createBlock(_component_CharacterSelect, {\n          key: 1,\n          visible: true,\n          characters: _ctx.replacements,\n          \"onUpdate:characters\": _ctx.updateReplacements\n        }, null, 8, [\"characters\", \"onUpdate:characters\"])),\n    _cache[13] || (_cache[13] = _createElementVNode(\"hr\", null, null, -1)),\n    _createElementVNode(\"table\", null, [\n      _createElementVNode(\"tbody\", null, [\n        _createElementVNode(\"tr\", null, [\n          _cache[9] || (_cache[9] = _createElementVNode(\"th\", null, \"Team Name\", -1)),\n          _createElementVNode(\"td\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.workTeam.name) = $event)),\n              type: \"text\",\n              minlength: \"1\",\n              maxlength: \"16\",\n              placeholder: \"INPUT TEAM NAME\"\n            }, null, 512), [\n              [_vModelText, _ctx.workTeam.name]\n            ])\n          ])\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _cache[10] || (_cache[10] = _createElementVNode(\"th\", null, \"Character Select Mode\", -1)),\n          _createElementVNode(\"td\", null, [\n            _createElementVNode(\"button\", {\n              class: \"character-select-mode\",\n              onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.characterSelectModeOnClick && _ctx.characterSelectModeOnClick(...args)))\n            }, _toDisplayString(_ctx.characterSelectMode ? 'REPLACEMENTS' : 'MEMBERS'), 1)\n          ])\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"td\", _hoisted_1, [\n            (!_ctx.characterSelectMode)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, \"  \"))\n              : (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(_ctx.selectedMemberName() + ''), 1))\n          ])\n        ]),\n        _createElementVNode(\"tr\", _hoisted_4, [\n          _createElementVNode(\"td\", _hoisted_5, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.MEMBER_TAG_LIST, (tag) => {\n              return (_openBlock(), _createElementBlock(\"span\", {\n                class: _normalizeClass('tag' + _ctx.tagSelectedClass(tag)),\n                key: tag,\n                onClick: ($event: any) => (_ctx.tagOnClick(tag))\n              }, _toDisplayString(tag), 11, _hoisted_6))\n            }), 128))\n          ])\n        ]),\n        _createElementVNode(\"tr\", _hoisted_7, [\n          _createElementVNode(\"td\", _hoisted_8, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.workTeam.members, (member) => {\n              return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass('member' + _ctx.memberSelectedClass(member.id)),\n                key: member.id\n              }, [\n                _createVNode(_component_MemberItem, {\n                  member: member,\n                  onClick: ($event: any) => (_ctx.memberOnClick(member.id))\n                }, null, 8, [\"member\", \"onClick\"])\n              ], 2))\n            }), 128)),\n            _createElementVNode(\"div\", _hoisted_9, [\n              _withDirectives(_createElementVNode(\"select\", {\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.selectedMemberBuildname) = $event)),\n                onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.buildnameOnChange && _ctx.buildnameOnChange(...args)))\n              }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.buildnames, (value) => {\n                  return (_openBlock(), _createElementBlock(\"option\", {\n                    key: value,\n                    value: value\n                  }, _toDisplayString(value), 9, _hoisted_10))\n                }), 128))\n              ], 544), [\n                [_vShow, _ctx.buildnames.length],\n                [_vModelSelect, _ctx.selectedMemberBuildname]\n              ])\n            ])\n          ])\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _cache[11] || (_cache[11] = _createElementVNode(\"th\", null, \"Short Note\", -1)),\n          _createElementVNode(\"td\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"description\",\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.workTeam.description) = $event)),\n              type: \"text\",\n              maxlength: \"40\",\n              placeholder: \"INPUT NOTE\"\n            }, null, 512), [\n              [_vModelText, _ctx.workTeam.description]\n            ])\n          ])\n        ]),\n        _createElementVNode(\"tr\", _hoisted_11, [\n          _createElementVNode(\"td\", _hoisted_12, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.workTeamTags, (tag) => {\n              return (_openBlock(), _createElementBlock(\"span\", {\n                class: _normalizeClass(_ctx.teamTagSelected(tag) ? 'tag selected' : 'tag'),\n                key: tag,\n                onClick: ($event: any) => (_ctx.teamTagOnClick(tag))\n              }, _toDisplayString(tag), 11, _hoisted_13))\n            }), 128))\n          ])\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _cache[12] || (_cache[12] = _createElementVNode(\"th\", null, \"Tags\", -1)),\n          _createElementVNode(\"td\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"team-tags\",\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.txtTeamTags) = $event)),\n              type: \"text\",\n              maxlength: \"40\",\n              placeholder: \"INPUT TAGS\",\n              onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.txtTeamTagsOnChange && _ctx.txtTeamTagsOnChange(...args)))\n            }, null, 544), [\n              [_vModelText, _ctx.txtTeamTags]\n            ])\n          ])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_14, [\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.cancelOnClick && _ctx.cancelOnClick(...args)))\n      }, \"cancel\"),\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.okOnClick && _ctx.okOnClick(...args)))\n      }, \"ok\")\n    ])\n  ], 64))\n}","<template>\r\n  <template v-if=\"!characterSelectMode\">\r\n    <CharacterSelect :visible=\"true\" :characters=\"characters\" @update:characters=\"updateCharacters\" />\r\n  </template>\r\n  <template v-else>\r\n    <CharacterSelect :visible=\"true\" :characters=\"replacements\" @update:characters=\"updateReplacements\" />\r\n  </template>\r\n  <hr />\r\n  <table>\r\n    <tbody>\r\n      <tr>\r\n        <th>Team Name</th>\r\n        <td>\r\n          <input v-model=\"workTeam.name\" type=\"text\" minlength=\"1\" maxlength=\"16\" placeholder=\"INPUT TEAM NAME\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <th>Character Select Mode</th>\r\n        <td>\r\n          <button class=\"character-select-mode\" @click=\"characterSelectModeOnClick\">\r\n            {{ characterSelectMode ? 'REPLACEMENTS' : 'MEMBERS' }}\r\n          </button>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td colspan=\"2\" class=\"character-select-mode\">\r\n          <span v-if=\"!characterSelectMode\">\r\n            \r\n          </span>\r\n          <span v-else>\r\n            {{ selectedMemberName() + '' }}\r\n          </span>\r\n        </td>\r\n      </tr>\r\n      <tr class=\"member-tags\">\r\n        <td colspan=\"2\">\r\n          <span :class=\"'tag' + tagSelectedClass(tag)\" v-for=\"tag in MEMBER_TAG_LIST\" :key=\"tag\"\r\n            @click=\"tagOnClick(tag)\">{{\r\n              tag\r\n            }}</span>\r\n        </td>\r\n      </tr>\r\n      <tr class=\"members\">\r\n        <td colspan=\"2\">\r\n          <div :class=\"'member' + memberSelectedClass(member.id)\" v-for=\"member in workTeam.members\" :key=\"member.id\">\r\n            <MemberItem :member=\"member\" @click=\"memberOnClick(member.id)\" />\r\n          </div>\r\n\r\n          <div class=\"buildname-select\">\r\n            <select v-show=\"buildnames.length\" v-model=\"selectedMemberBuildname\" @change=\"buildnameOnChange\">\r\n              <option v-for=\"value in buildnames\" :key=\"value\" :value=\"value\">{{ value }}</option>\r\n            </select>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <th>Short Note</th>\r\n        <td>\r\n          <input class=\"description\" v-model=\"workTeam.description\" type=\"text\" maxlength=\"40\"\r\n            placeholder=\"INPUT NOTE\" />\r\n        </td>\r\n      </tr>\r\n      <tr class=\"team-tags\">\r\n        <td colspan=\"2\">\r\n          <span :class=\"teamTagSelected(tag) ? 'tag selected' : 'tag'\" v-for=\"tag in workTeamTags\" :key=\"tag\"\r\n            @click=\"teamTagOnClick(tag)\">{{ tag }}</span>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <th>Tags</th>\r\n        <td>\r\n          <input class=\"team-tags\" v-model=\"txtTeamTags\" type=\"text\" maxlength=\"40\" placeholder=\"INPUT TAGS\"\r\n            @change=\"txtTeamTagsOnChange\" />\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n  <div class=\"buttons\">\r\n    <button type=\"button\" @click=\"cancelOnClick\">cancel</button>\r\n    <button type=\"button\" @click=\"okOnClick\">ok</button>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from 'lodash';\r\nimport { computed, defineComponent, PropType, reactive, ref, watch } from 'vue';\r\nimport { makeDefaultBuildname } from '@/input';\r\nimport CharacterSelect from '@/components/CharacterSelect.vue';\r\nimport { getBuildnameFromStorageKey, getBuildStorageKeys, TMember, TTeam } from './team';\r\nimport MemberItem from './MemberItem.vue';\r\n\r\nexport default defineComponent({\r\n  name: 'TeamEditorModal',\r\n  components: {\r\n    CharacterSelect,\r\n    MemberItem,\r\n  },\r\n  props: {\r\n    visible: { type: Boolean, required: true },\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    teamTags: { type: Array as PropType<string[]> },\r\n  },\r\n  emits: ['click:cancel', 'click:ok'],\r\n  setup(props, context) {\r\n    const characterSelectMode = ref(false); // =\r\n    const workTeam = reactive({\r\n      id: -1,\r\n      name: '',\r\n      members: [],\r\n      description: '',\r\n      rotation: [],\r\n      rotationDescription: '',\r\n      tags: [],\r\n    } as TTeam);\r\n    const selectedMemberId = ref(-1);\r\n    const MEMBER_TAG_LIST = ['Main-DPS', 'Sub-DPS', 'Support', 'Carry', 'Driver', 'Enabler', 'Healer', 'Shielder', 'Battery', 'Free', 'Flex', 'On Field', 'Off Field', 'Attacker', 'Supporter', 'Life Keeper'];\r\n    const selectedMemberBuildname = ref('' as string | undefined);\r\n    const replacementIndex = ref(-1);\r\n    const txtTeamTags = ref('');\r\n    const workTeamTags = reactive([] as string[]);\r\n\r\n    function duplicateTeam() {\r\n      workTeam.id = props.team.id;\r\n      workTeam.name = props.team.name;\r\n      const work: TMember[] = [];\r\n      for (let i = 0; i < props.team.members.length; i++) {\r\n        work.push({\r\n          id: i,\r\n          name: props.team.members[i].name,\r\n          buildname: props.team.members[i].buildname,\r\n          builddata: props.team.members[i].builddata,\r\n          tags: _.cloneDeep(props.team.members[i].tags.filter(s => MEMBER_TAG_LIST.includes(s))),\r\n          replacements: props.team.members[i].replacements ? [...props.team.members[i].replacements] : [],\r\n        });\r\n      }\r\n      workTeam.members.splice(0, workTeam.members.length, ...work);\r\n      workTeam.description = props.team.description;\r\n      workTeam.rotation = _.cloneDeep(props.team.rotation);\r\n      workTeam.tags = _.clone(props.team.tags);\r\n    }\r\n    duplicateTeam();\r\n    setupTxtTeamTags();\r\n\r\n    watch(props, (newVal) => {\r\n      if (newVal.team.members) {\r\n        duplicateTeam();\r\n        if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n          selectedMemberBuildname.value = workTeam.members[selectedMemberId.value].buildname;\r\n        }\r\n      }\r\n      if (newVal.teamTags) {\r\n        workTeamTags.splice(0, workTeamTags.length, ...newVal.teamTags);\r\n      }\r\n      setupTxtTeamTags();\r\n      characterSelectMode.value = false;\r\n    });\r\n\r\n    const characters = computed(() => workTeam.members.map((s) => s.name));\r\n\r\n    const replacements = computed(() => {\r\n      let result = [] as string[];\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        result = [...member.replacements];\r\n        for (let i = result.length; i < 2; i++) {\r\n          result.push('');\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const updateCharacters = (newCharacters: string[]) => {\r\n      for (let i = 0; i < newCharacters.length; i++) {\r\n        if (workTeam.members[i].name != newCharacters[i]) {\r\n          workTeam.members[i].tags = [];\r\n          workTeam.members[i].replacements = [];\r\n        }\r\n        workTeam.members[i].name = newCharacters[i];\r\n        if (workTeam.members[i].name) {\r\n          const workBuildnames = getBuildStorageKeys(workTeam.members[i].name).map(s => getBuildnameFromStorageKey(s));\r\n          if (workBuildnames.length) {\r\n            if (!workTeam.members[i].buildname || !workBuildnames.includes(workTeam.members[i].buildname as string)) {\r\n              workTeam.members[i].buildname = makeDefaultBuildname(workTeam.members[i].name);\r\n            }\r\n            if (i == selectedMemberId.value) {\r\n              selectedMemberBuildname.value = workTeam.members[i].buildname;\r\n            }\r\n          } else {\r\n            workTeam.members[i].buildname = undefined;\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    const characterSelectModeOnClick = () => {\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length && workTeam.members[selectedMemberId.value].name) {\r\n        characterSelectMode.value = !characterSelectMode.value;\r\n      }\r\n    };\r\n\r\n    const memberOnClick = (id: number) => {\r\n      selectedMemberId.value = id;\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        selectedMemberBuildname.value = member.buildname;\r\n        replacementIndex.value = -1;\r\n      }\r\n      characterSelectMode.value = false;  // \r\n    };\r\n    const memberSelectedClass = (id: number) =>\r\n      id == selectedMemberId.value ? ' selected' : '';\r\n    const selectedMemberName = () => {\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        return workTeam.members[selectedMemberId.value].name;\r\n      }\r\n      return '';\r\n    };\r\n\r\n    const tagOnClick = (tag: string) => {\r\n      if (selectedMemberId.value < 0 || selectedMemberId.value >= workTeam.members.length)\r\n        return;\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      if (member && member.name) {\r\n        const tags = member.tags;\r\n        if (tags) {\r\n          if (tags.includes(tag)) {\r\n            tags.splice(0, tags.length, ...tags.filter((s) => s != tag));\r\n          } else {\r\n            tags.push(tag);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    const tagSelectedClass = (tag: string) => {\r\n      let result = false;\r\n      if (selectedMemberId.value >= 0 || selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        if (member && member.name) {\r\n          result = member.tags.includes(tag);\r\n        }\r\n      }\r\n      return result ? ' selected' : '';\r\n    };\r\n\r\n    const buildnames = computed(() => {\r\n      let result: string[] = [];\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        const character = member.name;\r\n        if (character) {\r\n          result = getBuildStorageKeys(character).map((s) =>\r\n            getBuildnameFromStorageKey(s)\r\n          );\r\n          const defaultBuildname = makeDefaultBuildname(character);\r\n          if (result.includes(defaultBuildname)) {\r\n            const others = result.filter((s) => s != defaultBuildname).sort();\r\n            if (others.length) {\r\n              result = [defaultBuildname, ...others];\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const buildnameOnChange = () => {\r\n      if (selectedMemberId.value < 0 || selectedMemberId.value >= workTeam.members.length) return;\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      member.buildname = selectedMemberBuildname.value;\r\n    };\r\n\r\n    const updateReplacements = (newCharacters: string[]) => {\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      member.replacements = [...newCharacters];\r\n    };\r\n\r\n    function setupTxtTeamTags() {\r\n      txtTeamTags.value = workTeam.tags.join(' ');\r\n    }\r\n\r\n    const txtTeamTagsOnChange = () => {\r\n      let result: string[] = [];\r\n      if (txtTeamTags.value) {\r\n        result = txtTeamTags.value.split(/\\s+/).filter(tag => tag);\r\n      }\r\n      workTeam.tags = result;\r\n    }\r\n\r\n    const teamTagSelected = (tag: string) => workTeam.tags.includes(tag);\r\n\r\n    const teamTagOnClick = (tag: string) => {\r\n      if (teamTagSelected(tag)) {\r\n        workTeam.tags.splice(0, workTeam.tags.length, ...workTeam.tags.filter(s => s != tag));\r\n      } else {\r\n        workTeam.tags.push(tag);\r\n      }\r\n      setupTxtTeamTags();\r\n    }\r\n\r\n    const cancelOnClick = () => {\r\n      context.emit('click:cancel');\r\n    };\r\n\r\n    const okOnClick = () => {\r\n      context.emit('click:ok', workTeam);\r\n    };\r\n\r\n    return {\r\n      characterSelectMode,\r\n      characters,\r\n      replacements,\r\n      MEMBER_TAG_LIST,\r\n\r\n      characterSelectModeOnClick,\r\n      selectedMemberId,\r\n      selectedMemberName,\r\n\r\n      tagOnClick,\r\n      tagSelectedClass,\r\n\r\n      workTeam,\r\n      workTeamTags,\r\n      txtTeamTags,\r\n      txtTeamTagsOnChange,\r\n      teamTagSelected,\r\n      teamTagOnClick,\r\n      memberOnClick,\r\n      memberSelectedClass,\r\n      selectedMemberBuildname,\r\n      buildnames,\r\n      buildnameOnChange,\r\n      updateReplacements,\r\n\r\n      updateCharacters,\r\n      cancelOnClick,\r\n      okOnClick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style scoped>\r\n.modal {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  left: 0;\r\n  /* background-color: rgba(0, 0, 0, .5); */\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: transparent;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: calc(100vh);\r\n  vertical-align: top;\r\n}\r\n\r\n.modal-content {\r\n  height: 100vh;\r\n  padding: 20px 10px;\r\n  width: calc(100% - 26px);\r\n  background-color: rgb(63, 10, 10);\r\n  border: 3px double gold;\r\n  border-radius: 20px;\r\n  z-index: 1000;\r\n  overflow-y: auto;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  table-layout: fixed;\r\n}\r\n\r\ntable th {\r\n  font-size: 3rem;\r\n  font-weight: bold;\r\n  color: rgb(225, 144, 56);\r\n  text-align: right;\r\n  width: 40%;\r\n}\r\n\r\ntable td {\r\n  text-align: left;\r\n}\r\n\r\ntable td[colspan=\"2\"] {\r\n  text-align: center;\r\n}\r\n\r\ntable tr.member-tags td,\r\ntable tr.team-tags td {\r\n  padding: 10px;\r\n}\r\n\r\nbutton {\r\n  font-size: 3rem;\r\n  width: 20rem;\r\n  margin: 5px;\r\n}\r\n\r\ninput {\r\n  padding-left: 1rem;\r\n}\r\n\r\ntd input[type=\"text\"] {\r\n  font-size: 3rem;\r\n  width: 63rem;\r\n}\r\n\r\n.tags {\r\n  margin: 5px 3px;\r\n}\r\n\r\nspan.tag {\r\n  display: inline-block;\r\n  height: 12px;\r\n  font-size: 10px;\r\n  background: linear-gradient(to top, #3d3d3b, #141414);\r\n  border: 1px solid whitesmoke;\r\n  border-radius: 3px;\r\n  margin: 3px 3px;\r\n  vertical-align: middle;\r\n  padding-top: 1px;\r\n}\r\n\r\nspan.tag.selected {\r\n  border-color: gold;\r\n}\r\n\r\n.member-tags span.tag {\r\n  width: 70px;\r\n}\r\n\r\n.team-tags span.tag {\r\n  width: auto;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\ndiv.member {\r\n  display: inline-block;\r\n  width: 80px;\r\n}\r\n\r\ndiv.member.selected {\r\n  background-color: gold;\r\n}\r\n\r\ndiv.buildname-select {\r\n  height: 40px;\r\n  padding-top: 10px;\r\n}\r\n\r\ndiv.buildname-select select {\r\n  width: 220px;\r\n}\r\n\r\nbutton.character-select-mode {\r\n  min-width: 30rem;\r\n}\r\n\r\ntd.character-select-mode {\r\n  font-size: 2.5rem;\r\n  font-weight: bold;\r\n  color: rgb(225, 144, 56);\r\n}\r\n\r\ndiv.buttons {\r\n  margin: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./TeamEditorModal.vue?vue&type=template&id=2b4d924c&scoped=true&ts=true\"\nimport script from \"./TeamEditorModal.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamEditorModal.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamEditorModal.vue?vue&type=style&index=0&id=2b4d924c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2b4d924c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"title\" }\nconst _hoisted_2 = { class: \"name\" }\nconst _hoisted_3 = { class: \"elemental-resonance\" }\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = { class: \"members\" }\nconst _hoisted_6 = {\n  key: 0,\n  class: \"res\"\n}\nconst _hoisted_7 = {\n  key: 1,\n  class: \"team-tags\"\n}\nconst _hoisted_8 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_9 = { class: \"description\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MemberItem = _resolveComponent(\"MemberItem\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass('team' + _ctx.selectedClass)\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"label\", _hoisted_2, [\n        _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"handle\" }, \"\", -1)),\n        _createElementVNode(\"span\", null, _toDisplayString(_ctx.team.name), 1),\n        (_ctx.editable && _ctx.selected)\n          ? (_openBlock(), _createElementBlock(\"span\", {\n              key: 0,\n              class: \"button material-symbols-outlined\",\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.editOnClick && _ctx.editOnClick(...args)))\n            }, \" edit_square \"))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3], (index) => {\n          return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n            (_ctx.resonanceElementImgSrcs[index])\n              ? (_openBlock(), _createElementBlock(\"img\", {\n                  key: 0,\n                  class: \"elemental-resonance\",\n                  src: _ctx.resonanceElementImgSrcs[index],\n                  alt: \"resonance\"\n                }, null, 8, _hoisted_4))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        }), 64))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createElementVNode(\"table\", null, [\n        _createElementVNode(\"tbody\", null, [\n          _createElementVNode(\"tr\", null, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n              return (_openBlock(), _createElementBlock(\"td\", {\n                key: member.id\n              }, [\n                _createVNode(_component_MemberItem, {\n                  member: member,\n                  statsObj: _ctx.memberStats[member.id],\n                  displayStat: _ctx.displayStat,\n                  showEquipment: _ctx.showEquipment,\n                  viewable: true,\n                  members: _ctx.team.members.map(s => s.name),\n                  elementalResonance: _ctx.elementalResonance\n                }, null, 8, [\"member\", \"statsObj\", \"displayStat\", \"showEquipment\", \"members\", \"elementalResonance\"])\n              ]))\n            }), 128))\n          ])\n        ])\n      ])\n    ]),\n    (_ctx.displayRes)\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_6, [\n          _createElementVNode(\"tbody\", null, [\n            _createElementVNode(\"tr\", null, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.resKey, (key) => {\n                return (_openBlock(), _createElementBlock(\"td\", {\n                  key: key,\n                  class: _normalizeClass(_ctx.resBgClass(key))\n                }, _toDisplayString(_ctx.res[key]), 3))\n              }), 128))\n            ])\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.displayTags)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.tags, (tag) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: \"tag\",\n              key: tag\n            }, _toDisplayString(tag), 1))\n          }), 128))\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_8, [\n      _createElementVNode(\"span\", {\n        class: \"material-symbols-outlined control-button\",\n        onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.jumpToRotation && _ctx.jumpToRotation(...args)))\n      }, \"stat_minus_2\"),\n      _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.description), 1)\n    ])\n  ], 2))\n}","<template>\r\n  <div :class=\"'team' + selectedClass\">\r\n    <div class=\"title\">\r\n      <label class=\"name\">\r\n        <span class=\"handle\"></span>\r\n        <span>{{ team.name }}</span>\r\n        <span v-if=\"editable && selected\" class=\"button material-symbols-outlined\" @click=\"editOnClick\"> edit_square\r\n        </span>\r\n      </label>\r\n      <div class=\"elemental-resonance\">\r\n        <template v-for=\"index in [0, 1, 2, 3]\" :key=\"index\">\r\n          <img v-if=\"resonanceElementImgSrcs[index]\" class=\"elemental-resonance\" :src=\"resonanceElementImgSrcs[index]\"\r\n            alt=\"resonance\" />\r\n        </template>\r\n      </div>\r\n    </div>\r\n    <div class=\"members\">\r\n      <table>\r\n        <tbody>\r\n          <tr>\r\n            <td v-for=\"member in team.members\" :key=\"member.id\">\r\n              <MemberItem :member=\"member\" :statsObj=\"memberStats[member.id]\" :displayStat=\"displayStat\"\r\n                :showEquipment=\"showEquipment\" :viewable=\"true\" :members=\"team.members.map(s => s.name)\"\r\n                :elementalResonance=\"elementalResonance\" />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <table class=\"res\" v-if=\"displayRes\">\r\n      <tbody>\r\n        <tr>\r\n          <td v-for=\"key in resKey\" :key=\"key\" :class=\"resBgClass(key)\">{{ res[key] }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div class=\"team-tags\" v-if=\"displayTags\">\r\n      <span class=\"tag\" v-for=\"tag in team.tags\" :key=\"tag\">{{ tag }}</span>\r\n    </div>\r\n    <div style=\"text-align: left;\">\r\n      <span class=\"material-symbols-outlined control-button\" @click=\"jumpToRotation\">stat_minus_2</span>\r\n      <div class=\"description\">\r\n        {{ description }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from 'lodash';\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { evalFormula } from \"@/calculate\";\r\nimport { makeDetailObj, TStats } from \"@/input\";\r\nimport { CHARACTER_MASTER, ELEMENT_IMG_SRC, TAnyObject, TCharacterKey, ELEMENT_BG_COLOR_CLASS } from \"@/master\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { calculateMemberResult, getElementalResonance, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport MemberItem from \"./MemberItem.vue\";\r\n\r\nexport default defineComponent({\r\n  name: 'TeamItem',\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    selected: { type: Boolean, requied: true },\r\n    editable: { type: Boolean },\r\n    showEquipment: { type: Boolean },\r\n    displayStat: { type: String },\r\n    displayRes: { type: Boolean },\r\n    displayTags: { type: Boolean },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n  },\r\n  emits: ['click:edit', 'click:jump-to-rotation', 'update:member-result'],\r\n  components: {\r\n    MemberItem,\r\n  },\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const memberStats = reactive({} as TAnyObject);\r\n    const memberResults = reactive({} as TTeamMemberResult);\r\n    const res = reactive({} as TAnyObject);\r\n    const resKey = ['', '', '', '', '', '', '', ''];\r\n    function initializeRes() {\r\n      resKey.forEach(key => {\r\n        res[key] = 0;\r\n      });\r\n    }\r\n    initializeRes();\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, async (newVal) => {\r\n      watchFunc(newVal.team);\r\n      watchCount.value++;\r\n    });\r\n\r\n    onMounted(() => {\r\n      watchFunc(props.team);\r\n    })\r\n\r\n    const elementalResonance = computed(() => getElementalResonance(props.team));\r\n    const resonanceElementImgSrcs = computed(() => {\r\n      const result: string[] = [];\r\n      elementalResonance.value.forEach((entry) => {\r\n        if (entry == \"\") {\r\n          const members = props.team.members.filter((s) => s.name);\r\n          if (members.length == 4) {\r\n            members.forEach((member) => {\r\n              const master = CHARACTER_MASTER[member.name as TCharacterKey];\r\n              const src = (ELEMENT_IMG_SRC as any)[master.];\r\n              result.push(src);\r\n            });\r\n          }\r\n        } else {\r\n          const src = (ELEMENT_IMG_SRC as any)[entry.replace(\"\", \"\")];\r\n          result.push(src);\r\n          result.push(src);\r\n        }\r\n      });\r\n      return result;\r\n    })\r\n    const description = computed(() => props.team.description ?? '')\r\n    const selectedClass = computed(() => (props.selected ? ' selected' : ''));\r\n\r\n    async function watchFunc(team: TTeam) {\r\n      const list = [];\r\n      for (const member of team.members) {\r\n        list.push({\r\n          key: member.id,\r\n          value: await calculateMemberResult(member, team),\r\n        });\r\n      }\r\n      Object.keys(memberStats).forEach(key => {\r\n        delete memberStats[key];\r\n      })\r\n      Object.keys(memberResults).forEach(key => {\r\n        delete memberResults[key];\r\n      })\r\n      await Promise.all(list).then(results => {\r\n        results.forEach(entry => {\r\n          memberStats[entry.key] = entry.value?.statsInput?.statsObj;\r\n          memberResults[entry.key] = entry.value;\r\n        });\r\n      });\r\n      calculateStat();\r\n      calculateRes();\r\n      context.emit('update:member-result', team.id, memberResults);\r\n    }\r\n\r\n    function calculateStat() {\r\n      const teamAdjustments: { [key: string]: TStats } = {};\r\n      Object.keys(memberStats).forEach(key => {\r\n        teamAdjustments[key] = {};\r\n      })\r\n      Object.keys(memberStats).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const weaponMaster = memberResult?.characterInput?.weaponMaster;\r\n        if (characterMaster && characterMaster.) {\r\n          for (const damageDetail of characterMaster.) {\r\n            const detailObj = makeDetailObj(damageDetail, null, null, null, null);\r\n            if (detailObj. || !detailObj. || !detailObj.) continue;\r\n            const value = evalFormula(detailObj., memberResult.statsInput.statsObj, memberResult.damageResult, detailObj., detailObj.);\r\n            const toStat = detailObj..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n        if (weaponMaster && weaponMaster.) {\r\n          for (const damageDetail of weaponMaster.) {\r\n            const detailObj = makeDetailObj(damageDetail, null, null, null, null);\r\n            if (detailObj. || !detailObj. || !detailObj.) continue;\r\n            const value = evalFormula(detailObj., memberResult.statsInput.statsObj, memberResult.damageResult, detailObj., detailObj.);\r\n            const toStat = detailObj..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n      for (const key of Object.keys(memberStats)) {\r\n        if (key in teamAdjustments) {\r\n          for (const stat of Object.keys(teamAdjustments[key])) {\r\n            if (!memberStats[key]) continue;\r\n            if (stat in memberStats[key]) {\r\n              memberStats[key][stat] += teamAdjustments[key][stat];\r\n            } else {\r\n              memberStats[key][stat] = teamAdjustments[key][stat];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // \r\n    function calculateRes() {\r\n      initializeRes();\r\n      const dmgElements: string[] = [];\r\n      const artifactSet4s: string[] = [];\r\n      Object.keys(memberResults).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const artifactSetMasters = memberResult?.characterInput?.artifactSetMasters;\r\n        if (characterMaster) {\r\n          if (characterMaster) {\r\n            dmgElements.push(characterMaster.);\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster. && characterMaster. !== '') {\r\n            for (const talentDetail of characterMaster.) {\r\n              if (talentDetail.) {\r\n                for (const damageDetail of talentDetail.) {\r\n                  if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    let value = 0;\r\n                    if (_.isNumber(damageDetail.)) {\r\n                      value = damageDetail.;\r\n                    }\r\n                    if (element === '') {\r\n                      resKey.filter(s => s !== '').forEach(key => {\r\n                        res[key] -= value;\r\n                      })\r\n                    } else {\r\n                      res[element] -= value;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n          const constellation = memberResult.characterInput?. ?? (props.constellations ? props.constellations[characterMaster.] ?? 0 : 0);\r\n          if (characterMaster.) {\r\n            for (let i = 1; i <= constellation; i++) {\r\n              const constellationObj = characterMaster.[String(i)];\r\n              if (constellationObj.) {\r\n                for (const damageDetail of constellationObj.) {\r\n                  if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    if (_.isNumber(damageDetail.)) {\r\n                      if (element === '') {\r\n                        resKey.filter(s => s !== '').forEach(key => {\r\n                          res[key] -= damageDetail.;\r\n                        })\r\n                      } else {\r\n                        res[element] -= damageDetail.;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (artifactSetMasters && artifactSetMasters.length == 2) {\r\n          if (artifactSetMasters[0].key == artifactSetMasters[1].key) {\r\n            if (!artifactSet4s.includes(artifactSetMasters[0].key)) {\r\n              artifactSet4s.push(artifactSetMasters[0].key);\r\n              if (artifactSetMasters[0]['4']?.) {\r\n                artifactSetMasters[0]['4']?..forEach(damageDetail => {\r\n                  if (damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    res[element] -= Number(damageDetail.);\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n      if (Object.keys(memberResults).filter(key => memberResults[key].characterInput?.characterMaster. === '').length) {\r\n        const countHy = dmgElements.filter(s => s === '').length;\r\n        const countCr = dmgElements.filter(s => s === '').length;\r\n        const workRes = (countHy + countCr) >= 4 ? -55 : -5 * (countHy + countCr);\r\n        res[''] -= workRes;\r\n        res[''] -= workRes;\r\n      }\r\n      console.log(Object.keys(memberResults));\r\n      if (dmgElements.filter(s => s === '').length >= 2) { // \r\n        res[''] -= -20;\r\n      }\r\n      if (dmgElements.includes('') && dmgElements.includes('')) { // \r\n        res[''] -= -40;\r\n      }\r\n      resKey.forEach(key => {\r\n        if (key !== '' && !dmgElements.includes(key)) {\r\n          res[key] = 0;\r\n        }\r\n      })\r\n    }\r\n\r\n    const resBgClass = (key: string) => {\r\n      if (res[key] !== 0) {\r\n        return key in ELEMENT_BG_COLOR_CLASS ? (ELEMENT_BG_COLOR_CLASS as any)[key] : 'physical';\r\n      } else {\r\n        return '';\r\n      }\r\n    }\r\n\r\n    const editOnClick = () => {\r\n      context.emit('click:edit', props.team.id);\r\n    }\r\n\r\n    const jumpToRotation = () => {\r\n      context.emit('click:jump-to-rotation');\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n\r\n      selectedClass,\r\n      memberStats,\r\n      elementalResonance,\r\n      resonanceElementImgSrcs,\r\n      description,\r\n      res,\r\n      resKey,\r\n      resBgClass,\r\n\r\n      editOnClick,\r\n      jumpToRotation,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style>\r\ndiv.team {\r\n  display: inline-block;\r\n  max-width: 322px;\r\n  padding: 4px 4px 0 4px;\r\n  border: 4px double silver;\r\n  border-radius: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\ndiv.title {\r\n  position: relative;\r\n  text-align: left;\r\n  height: 4.5rem;\r\n}\r\n\r\n.handle {\r\n  color: darkorange;\r\n}\r\n\r\ndiv.team.selected {\r\n  border-color: gold;\r\n}\r\n\r\nlabel.name {\r\n  font-size: 2.6rem;\r\n}\r\n\r\nlabel.name span {\r\n  margin-left: 0.5rem;\r\n}\r\n\r\nlabel.name span.button {\r\n  display: inline-block;\r\n  position: absolute;\r\n  left: 217px;\r\n  top: 0;\r\n  font-size: 3rem;\r\n}\r\n\r\nlabel.name span.button {\r\n  display: inline-block;\r\n  position: absolute;\r\n  right: 0px;\r\n  top: 1px;\r\n}\r\n\r\nlabel.name input {\r\n  width: 180px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n}\r\n\r\ndiv.elemental-resonance {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n}\r\n\r\nimg.elemental-resonance {\r\n  width: 20px;\r\n}\r\n\r\n.members table {\r\n  width: 100%;\r\n  table-layout: fixed;\r\n  border-spacing: 0;\r\n  text-align: center;\r\n}\r\n\r\ndiv.description {\r\n  display: inline-block;\r\n  margin-top: 3px;\r\n  font-size: 2rem;\r\n  height: 2.4rem;\r\n  text-align: center;\r\n  vertical-align: top;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n}\r\n\r\nspan.control-button {\r\n  display: inline-block;\r\n  margin-left: 4px;\r\n  margin-right: 4px;\r\n  vertical-align: baseline;\r\n  color: orange;\r\n  font-size: 3rem;\r\n  padding-bottom: 0;\r\n}\r\n\r\ntable.res {\r\n  width: 100%;\r\n  table-layout: fixed;\r\n  color: black;\r\n  font-size: 2rem;\r\n}\r\n\r\n.physical {\r\n  background-color: silver;\r\n}\r\n\r\ndiv.team-tags {\r\n  height: 12px;\r\n}\r\n\r\nspan.tag {\r\n  display: inline-block;\r\n  width: auto;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  height: 12px;\r\n  font-size: 10px;\r\n  background: linear-gradient(to top, #3d3d3b, #141414);\r\n  border: 1px solid whitesmoke;\r\n  border-radius: 3px;\r\n  margin: 0px 1px;\r\n  vertical-align: middle;\r\n  padding-top: 1px;\r\n}\r\n</style>\r\n","import { render } from \"./TeamItem.vue?vue&type=template&id=291c6742&ts=true\"\nimport script from \"./TeamItem.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamItem.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamItem.vue?vue&type=style&index=0&id=291c6742&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, vModelText as _vModelText, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"rotation-box\"\n}\nconst _hoisted_2 = { class: \"pane1\" }\nconst _hoisted_3 = { class: \"icon-list\" }\nconst _hoisted_4 = { key: 0 }\nconst _hoisted_5 = { class: \"action with-tooltip\" }\nconst _hoisted_6 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_7 = { class: \"tooltip\" }\nconst _hoisted_8 = { class: \"action with-tooltip\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = { class: \"action with-tooltip\" }\nconst _hoisted_12 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_13 = { class: \"tooltip\" }\nconst _hoisted_14 = { class: \"control-button\" }\nconst _hoisted_15 = { key: 0 }\nconst _hoisted_16 = [\"src\", \"alt\"]\nconst _hoisted_17 = {\n  key: 1,\n  class: \"action-attribute\"\n}\nconst _hoisted_18 = { class: \"rotation-list\" }\nconst _hoisted_19 = { class: \"rotation-item\" }\nconst _hoisted_20 = [\"src\", \"alt\"]\nconst _hoisted_21 = { class: \"with-tooltip handle\" }\nconst _hoisted_22 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_23 = [\"onClick\"]\nconst _hoisted_24 = { class: \"action-attribute\" }\nconst _hoisted_25 = {\n  key: 0,\n  class: \"pane2\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_draggable = _resolveComponent(\"draggable\")!\n  const _component_ERCalculator = _resolveComponent(\"ERCalculator\")!\n\n  return (_ctx.watchCount)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"fieldset\", _hoisted_3, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n              return (_openBlock(), _createElementBlock(_Fragment, {\n                key: member.id\n              }, [\n                (member.name)\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, [\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.normalAttackIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'N'))\n                        }, null, 10, _hoisted_6),\n                        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName('')), 1)\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_8, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.elementalSkillIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'E'))\n                        }, null, 10, _hoisted_9),\n                        _createElementVNode(\"span\", _hoisted_10, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName(\"\")), 1)\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_11, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.elementalBurstIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'Q'))\n                        }, null, 10, _hoisted_12),\n                        _createElementVNode(\"span\", _hoisted_13, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName('')), 1)\n                      ])\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ], 64))\n            }), 128)),\n            _createElementVNode(\"table\", _hoisted_14, [\n              _createElementVNode(\"tbody\", null, [\n                _createElementVNode(\"tr\", null, [\n                  _createElementVNode(\"td\", null, [\n                    _createElementVNode(\"span\", {\n                      class: \"material-symbols-outlined control-button\",\n                      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('click:jump-to-team')))\n                    }, \"stat_2\")\n                  ]),\n                  _createElementVNode(\"td\", null, [\n                    _createElementVNode(\"label\", {\n                      class: _normalizeClass(_ctx.removeMode ? 'checked' : '')\n                    }, [\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"checkbox\",\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.removeMode) = $event))\n                      }, null, 512), [\n                        [_vModelCheckbox, _ctx.removeMode]\n                      ]),\n                      _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"material-symbols-outlined\" }, \"delete\", -1))\n                    ], 2)\n                  ]),\n                  _createElementVNode(\"td\", null, [\n                    (_ctx.selectedAction)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                          _createElementVNode(\"img\", {\n                            class: _normalizeClass('action-icon handle' + _ctx.bgColorClass(_ctx.selectedAction.member)),\n                            src: _ctx.getActionDetail(_ctx.selectedAction).icon_url,\n                            alt: _ctx.displayName(_ctx.getActionDetail(_ctx.selectedAction).),\n                            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.selectedActionOnClick(_ctx.selectedAction)))\n                          }, null, 10, _hoisted_16)\n                        ]))\n                      : _createCommentVNode(\"\", true),\n                    (_ctx.selectedAction)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, _toDisplayString(_ctx.actionDisplay(_ctx.selectedAction)), 1))\n                      : _createCommentVNode(\"\", true)\n                  ])\n                ])\n              ])\n            ])\n          ]),\n          _createElementVNode(\"fieldset\", _hoisted_18, [\n            _createVNode(_component_draggable, {\n              list: _ctx.rotationList,\n              \"item-key\": \"id\",\n              sort: true,\n              handle: \".handle\",\n              delay: 100,\n              animation: 200,\n              onChange: _ctx.rotationListOnChange\n            }, {\n              item: _withCtx(({ element }) => [\n                _createElementVNode(\"div\", _hoisted_19, [\n                  (_ctx.previousRotation(element)?.member != element.member)\n                    ? (_openBlock(), _createElementBlock(\"img\", {\n                        key: 0,\n                        class: \"character-icon\",\n                        src: _ctx.getCharacterMaster(element.member)?.icon_url ?? _ctx.IMG_SRC_DUMMY,\n                        alt: _ctx.displayName(element.member)\n                      }, null, 8, _hoisted_20))\n                    : _createCommentVNode(\"\", true),\n                  (_ctx.getActionDetail(element))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass('action-item ' + _ctx.colorClass(element.member))\n                      }, [\n                        _createElementVNode(\"div\", _hoisted_21, [\n                          _createElementVNode(\"img\", {\n                            class: _normalizeClass('action-icon' + _ctx.bgColorClass(element.member) + _ctx.selectedActionClass(element)),\n                            src: _ctx.getActionDetail(element).icon_url,\n                            alt: _ctx.displayName(_ctx.getActionDetail(element).),\n                            onClick: ($event: any) => (_ctx.rotationActionOnClick(element))\n                          }, null, 10, _hoisted_22),\n                          (_ctx.removeMode)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"remove-mark\",\n                                onClick: ($event: any) => (_ctx.removeItemOnClick(element))\n                              }, null, 8, _hoisted_23))\n                            : _createCommentVNode(\"\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_24, _toDisplayString(_ctx.actionDisplay(element)), 1)\n                      ], 2))\n                    : _createCommentVNode(\"\", true)\n                ])\n              ]),\n              _: 1\n            }, 8, [\"list\", \"onChange\"]),\n            _cache[6] || (_cache[6] = _createElementVNode(\"br\", null, null, -1)),\n            _withDirectives(_createElementVNode(\"textarea\", {\n              class: \"rotation-description\",\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.rotationDescription) = $event)),\n              rows: \"10\",\n              maxlength: \"400\",\n              onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateRotation && _ctx.updateRotation(...args)))\n            }, null, 544), [\n              [_vModelText, _ctx.rotationDescription]\n            ])\n          ]),\n          _cache[7] || (_cache[7] = _createStaticVNode(\"<br data-v-b2eaab7c> <br data-v-b2eaab7c><br data-v-b2eaab7c> <br data-v-b2eaab7c><table class=\\\"guide\\\" data-v-b2eaab7c><tbody data-v-b2eaab7c><tr data-v-b2eaab7c><th data-v-b2eaab7c>N</th><td data-v-b2eaab7c>1</td><th data-v-b2eaab7c>N2</th><td data-v-b2eaab7c>2</td><th data-v-b2eaab7c>NX</th><td data-v-b2eaab7c>X</td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>N1C</th><td data-v-b2eaab7c>1+</td><th data-v-b2eaab7c>N2C</th><td data-v-b2eaab7c>2+</td><th data-v-b2eaab7c>NXC</th><td data-v-b2eaab7c>X+</td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>C</th><td data-v-b2eaab7c></td><td colspan=\\\"4\\\" data-v-b2eaab7c></td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>P</th><td data-v-b2eaab7c></td><td colspan=\\\"4\\\" data-v-b2eaab7c></td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>E</th><td data-v-b2eaab7c></td><th data-v-b2eaab7c>E.Press</th><td data-v-b2eaab7c>()</td><th data-v-b2eaab7c>E.Hold</th><td data-v-b2eaab7c>()</td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>Q</th><td data-v-b2eaab7c></td><td colspan=\\\"4\\\" data-v-b2eaab7c></td></tr></tbody></table>\", 7))\n        ]),\n        true\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n              _createVNode(_component_ERCalculator, {\n                team: _ctx.team,\n                rotationList: _ctx.rotationList,\n                teamMemberResult: _ctx.teamMemberResult,\n                constellations: _ctx.constellations\n              }, null, 8, [\"team\", \"rotationList\", \"teamMemberResult\", \"constellations\"])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<template>\r\n  <div class=\"rotation-box\" v-if=\"watchCount\">\r\n    <div class=\"pane1\">\r\n      <fieldset class=\"icon-list\">\r\n        <template v-for=\"member in team.members \" :key=\"member.id\">\r\n          <span v-if=\"member.name\">\r\n            <div class=\"action with-tooltip\">\r\n              <img :class=\"'action-icon' + bgColorClass(member.name)\" :src=\"normalAttackIconSrc(member.name)\"\r\n                :alt=\"displayName(member.name) + ' ' + displayName('')\" @click=\"listActionOnClick(member, 'N')\" />\r\n              <span class=\"tooltip\">\r\n                {{ displayName(member.name) + ' ' + displayName('') }}\r\n              </span>\r\n            </div>\r\n            <div class=\"action with-tooltip\">\r\n              <img :class=\"'action-icon' + bgColorClass(member.name)\" :src=\"elementalSkillIconSrc(member.name)\"\r\n                :alt=\"displayName(member.name) + ' ' + displayName('')\" @click=\"listActionOnClick(member, 'E')\" />\r\n              <span class=\"tooltip\">\r\n                {{ displayName(member.name) + ' ' + displayName(\"\") }}\r\n              </span>\r\n            </div>\r\n            <div class=\"action with-tooltip\">\r\n              <img :class=\"'action-icon' + bgColorClass(member.name)\" :src=\"elementalBurstIconSrc(member.name)\"\r\n                :alt=\"displayName(member.name) + ' ' + displayName('')\" @click=\"listActionOnClick(member, 'Q')\" />\r\n              <span class=\"tooltip\">\r\n                {{ displayName(member.name) + ' ' + displayName('') }}\r\n              </span>\r\n            </div>\r\n          </span>\r\n        </template>\r\n        <table class=\"control-button\">\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                <span class=\"material-symbols-outlined control-button\"\r\n                  @click=\"$emit('click:jump-to-team')\">stat_2</span>\r\n              </td>\r\n              <td>\r\n                <label :class=\"removeMode ? 'checked' : ''\">\r\n                  <input type=\"checkbox\" v-model=\"removeMode\">\r\n                  <span class=\"material-symbols-outlined\">delete</span>\r\n                </label>\r\n              </td>\r\n              <td>\r\n                <div v-if=\"selectedAction\">\r\n                  <img :class=\"'action-icon handle' + bgColorClass(selectedAction.member)\"\r\n                    :src=\"getActionDetail(selectedAction).icon_url\"\r\n                    :alt=\"displayName(getActionDetail(selectedAction).)\"\r\n                    @click=\"selectedActionOnClick(selectedAction)\" />\r\n                </div>\r\n                <div class=\"action-attribute\" v-if=\"selectedAction\">\r\n                  {{ actionDisplay(selectedAction) }}\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </fieldset>\r\n      <fieldset class=\"rotation-list\">\r\n        <draggable :list=\"rotationList\" item-key=\"id\" :sort=\"true\" handle=\".handle\" :delay=\"100\" :animation=\"200\"\r\n          @change=\"rotationListOnChange\">\r\n          <template #item=\"{ element }\">\r\n            <div class=\"rotation-item\">\r\n              <img v-if=\"previousRotation(element)?.member != element.member\" class=\"character-icon\"\r\n                :src=\"getCharacterMaster(element.member)?.icon_url ?? IMG_SRC_DUMMY\"\r\n                :alt=\"displayName(element.member)\" />\r\n              <div v-if=\"getActionDetail(element)\" :class=\"'action-item ' + colorClass(element.member)\">\r\n                <div class=\"with-tooltip handle\">\r\n                  <img :class=\"'action-icon' + bgColorClass(element.member) + selectedActionClass(element)\"\r\n                    :src=\"getActionDetail(element).icon_url\" :alt=\"displayName(getActionDetail(element).)\"\r\n                    @click=\"rotationActionOnClick(element)\" />\r\n                  <div v-if=\"removeMode\" class=\"remove-mark\" @click=\"removeItemOnClick(element)\"></div>\r\n                </div>\r\n                <div class=\"action-attribute\">\r\n                  {{ actionDisplay(element) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </draggable>\r\n        <br />\r\n        <textarea class=\"rotation-description\" v-model=\"rotationDescription\" rows=\"10\" maxlength=\"400\"\r\n          @change=\"updateRotation\"></textarea>\r\n      </fieldset>\r\n      <br /> <br />\r\n      <br /> <br />\r\n      <table class=\"guide\">\r\n        <tbody>\r\n          <tr>\r\n            <th>N</th>\r\n            <td>1</td>\r\n            <th>N2</th>\r\n            <td>2</td>\r\n            <th>NX</th>\r\n            <td>X</td>\r\n          </tr>\r\n          <tr>\r\n            <th>N1C</th>\r\n            <td>1+</td>\r\n            <th>N2C</th>\r\n            <td>2+</td>\r\n            <th>NXC</th>\r\n            <td>X+</td>\r\n          </tr>\r\n          <tr>\r\n            <th>C</th>\r\n            <td></td>\r\n            <td colspan=\"4\"></td>\r\n          </tr>\r\n          <tr>\r\n            <th>P</th>\r\n            <td></td>\r\n            <td colspan=\"4\"></td>\r\n          </tr>\r\n          <tr>\r\n            <th>E</th>\r\n            <td></td>\r\n            <th>E.Press</th>\r\n            <td>()</td>\r\n            <th>E.Hold</th>\r\n            <td>()</td>\r\n          </tr>\r\n          <tr>\r\n            <th>Q</th>\r\n            <td></td>\r\n            <td colspan=\"4\"></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <div class=\"pane2\" v-if=\"true\">\r\n      <ERCalculator :team=\"team\" :rotationList=\"rotationList\" :teamMemberResult=\"teamMemberResult\"\r\n        :constellations=\"constellations\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from \"lodash\";\r\nimport draggable from \"vuedraggable\";\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { ELEMENT_BG_COLOR_CLASS, ELEMENT_COLOR_CLASS, IMG_SRC_DUMMY } from \"@/master\";\r\nimport { getElementalSkillActions } from \"@/particlemaster\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { CHARGED_ONLY_CHARACTER, CHARGED_WITH_NORMAL_CHARACTER, CHARGED_WITH_NORMAL_WEAPON, getCharacterDetail, getCharacterMaster, getNormalAttackDan, setupCharacterDetailMap, TActionItem, TConstellation, TMember, TTeam, TTeamMemberResult } from \"./team\";\r\nimport ERCalculator from './ERCalculator.vue';\r\n\r\nexport default defineComponent({\r\n  name: \"TeamRotation\",\r\n  components: {\r\n    draggable,\r\n    ERCalculator,\r\n  },\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n  },\r\n  emit: ['update:rotation', 'click:jump-to-team'],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n    const removeMode = ref(false);\r\n    const normalAttackActions = reactive({} as { [key: string]: string[] }); // //\r\n    const elementalSkillActions = reactive({} as { [key: string]: string[] }); // \r\n    const rotationList = reactive([] as TActionItem[]);\r\n    const actionId = ref(0);\r\n    const rotationDescription = ref('');\r\n    const selectedActionId = ref(-1);\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, async () => {\r\n      await initializeTeam(props.team);\r\n    });\r\n\r\n    const initializeTeam = async (team: TTeam) => {\r\n      await setupCharacterDetailMap();\r\n      for (const member of team.members) {\r\n        if (member.name) {\r\n          const characterMaster = getCharacterMaster(member.name);\r\n          if (characterMaster) {\r\n            const isCWith = (CHARGED_WITH_NORMAL_WEAPON.includes(characterMaster?.) || CHARGED_WITH_NORMAL_CHARACTER.includes(member.name)) && !CHARGED_ONLY_CHARACTER.includes(member.name);\r\n            const workArr: string[] = [];\r\n            for (let i = 0; i < getNormalAttackDan(member.name); i++) {\r\n              const work = 'N' + (i > 0 ? String(i + 1) : '');\r\n              workArr.push(work);\r\n              if (isCWith) {\r\n                workArr.push(work + (work === 'N' ? '1C' : 'C'));\r\n              }\r\n            }\r\n            if (!isCWith) {\r\n              workArr.push('C');\r\n            }\r\n            workArr.push('P');\r\n            normalAttackActions[member.name] = workArr;\r\n          }\r\n          elementalSkillActions[member.name] = getElementalSkillActions(member.name);\r\n        }\r\n      }\r\n      const isSameMember = team.rotation.filter(rotation => !team.members.filter(member => member.name).map(member => member.name).includes(rotation.member)).length == 0;\r\n      if (isSameMember) {\r\n        if (team.rotation.length) {\r\n          const workArr = _.cloneDeep(team.rotation);\r\n          workArr.forEach(rotation => {\r\n            if (rotation.action === 'NC') {\r\n              rotation.action = 'N1C';\r\n            } else if (rotation.action.startsWith('E')) {\r\n              const actions = elementalSkillActions[rotation.member];\r\n              if (actions && actions.length > 0 && !actions.includes(rotation.action)) {\r\n                rotation.action = actions[0];\r\n              }\r\n            }\r\n          })\r\n          rotationList.splice(0, rotationList.length, ...workArr);\r\n          actionId.value = Math.max(...rotationList.map(s => s.id)) ?? rotationList.length;\r\n        } else {\r\n          rotationList.splice(0, rotationList.length);\r\n          actionId.value = 0;\r\n        }\r\n      } else {\r\n        rotationList.splice(0, rotationList.length);\r\n        actionId.value = 0;\r\n        updateRotation();\r\n      }\r\n      rotationDescription.value = team.rotationDescription;\r\n      watchCount.value++;\r\n    } \r\n\r\n    onMounted(() => {\r\n      initializeTeam(props.team);\r\n      props.team.members.forEach(member => {\r\n        normalAttackIconSrc(member.name);\r\n      })\r\n    })\r\n\r\n    const selectedAction = computed((): TActionItem | undefined => {\r\n      const actionArr = rotationList.filter(rotation => rotation.id == selectedActionId.value);\r\n      return actionArr.length > 0 ? actionArr[0] : undefined;\r\n    })\r\n\r\n    const getActionDetail = (item: TActionItem) => {\r\n      let result;\r\n      const master = getCharacterDetail(item.member);\r\n      if (master) {\r\n        if (normalAttackActions[item.member].includes(item.action)) { // , , \r\n          result = master.;\r\n        } else if (elementalSkillActions[item.member].includes(item.action)) { // \r\n          result = master.;\r\n        } else if (item.action == 'Q') { // \r\n          result = master.;\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const previousRotation = (item: TActionItem) => {\r\n      let result;\r\n      for (const rotation of rotationList) {\r\n        if (item.id == rotation.id) {\r\n          break;\r\n        }\r\n        result = rotation;\r\n      }\r\n      return result;\r\n    }\r\n\r\n    const normalAttackIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const elementalSkillIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const elementalBurstIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const colorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n    const bgColorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_BG_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n\r\n    const actionDisplay = (item: TActionItem) =>\r\n      item.action.startsWith('E') ? item.action.replace(/^E\\./, '') : item.action;\r\n\r\n    const selectedActionClass = (item: TActionItem) =>\r\n      selectedActionId.value == item.id ? ' selected' : '';\r\n\r\n    const updateRotation = () => {\r\n      context.emit('update:rotation', rotationList, rotationDescription.value);\r\n    }\r\n\r\n    const rotationListOnChange = () => {\r\n      updateRotation();\r\n    }\r\n\r\n    const listActionOnClick = (member: TMember, actionKey: string) => {\r\n      if (!normalAttackActions[member.name] || !elementalSkillActions[member.name]) {\r\n        return;\r\n      }\r\n      let action = actionKey;\r\n      if (normalAttackActions[member.name].includes(action)) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && normalAttackActions[member.name].includes(s.action));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        }\r\n      } else if (action.startsWith('E')) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && elementalSkillActions[member.name].includes(s.action));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        } else {\r\n          const actions = elementalSkillActions[member.name];\r\n          if (actions && actions.length > 0) {\r\n            action = actions[0];\r\n          }\r\n        }\r\n      }\r\n      rotationList.push({\r\n        id: ++actionId.value,\r\n        member: member.name,\r\n        action: action,\r\n      });\r\n      updateRotation();\r\n    }\r\n\r\n    const rotationActionOnClick = (item: TActionItem) => {\r\n      if (removeMode.value) {\r\n        removeItemOnClick(item);\r\n      } else if (selectedActionId.value == item.id) {\r\n        selectedActionId.value = -1;\r\n      } else if (normalAttackActions[item.member].includes(item.action)) {\r\n        selectedActionId.value = item.id;\r\n      } else if (item.action.startsWith('E') && elementalSkillActions[item.member].length > 1) {\r\n        selectedActionId.value = item.id;\r\n      } else {\r\n        selectedActionId.value = -1;\r\n      }\r\n    }\r\n\r\n    const selectedActionOnClick = (item: TActionItem | undefined) => {\r\n      if (item) {\r\n        for (const actionArr of [normalAttackActions[item.member], elementalSkillActions[item.member]]) {\r\n          if (actionArr?.length) {\r\n            const index = actionArr.indexOf(item.action);\r\n            if (index != -1) {\r\n              item.action = (index + 1) < actionArr.length ? actionArr[index + 1] : actionArr[0];\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      updateRotation();\r\n    }\r\n\r\n    const removeItemOnClick = (item: TActionItem) => {\r\n      rotationList.splice(0, rotationList.length, ...rotationList.filter(s => s != item));\r\n      updateRotation();\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n      IMG_SRC_DUMMY,\r\n      removeMode,\r\n\r\n      watchCount,\r\n      normalAttackIconSrc,\r\n      elementalSkillIconSrc,\r\n      elementalBurstIconSrc,\r\n      colorClass,\r\n      bgColorClass,\r\n\r\n      getCharacterMaster,\r\n\r\n      rotationList,\r\n      rotationDescription,\r\n      previousRotation,\r\n      getCharacterDetail,\r\n      getActionDetail,\r\n      actionDisplay,\r\n      selectedAction,\r\n      selectedActionClass,\r\n\r\n      rotationListOnChange,\r\n      listActionOnClick,\r\n      rotationActionOnClick,\r\n      removeItemOnClick,\r\n      selectedActionOnClick,\r\n      updateRotation,\r\n\r\n      initializeTeam,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style scoped>\r\n@media all and (min-width: 720px) {\r\n  .rotation-box {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr;\r\n    grid-template-rows: auto;\r\n    grid-template-areas: \"pane1 pane2\";\r\n  }\r\n}\r\n\r\n@media all and (max-width: 719px) {\r\n  .rotation-box {\r\n    display: grid;\r\n    grid-template-columns: 100%;\r\n    grid-template-rows: auto auto;\r\n    grid-template-areas:\r\n      \"pane1\"\r\n      \"pane2\";\r\n  }\r\n}\r\n\r\n.pane1 {\r\n  grid-area: pane1;\r\n}\r\n\r\n.pane2 {\r\n  grid-area: pane2;\r\n}\r\n\r\nfieldset.icon-list {\r\n  padding-bottom: 0px;\r\n}\r\n\r\ndiv.action {\r\n  display: inline-block;\r\n}\r\n\r\nimg.action-icon {\r\n  width: 45px;\r\n  height: 45px;\r\n  border-radius: 50%;\r\n}\r\n\r\nimg.character-icon {\r\n  vertical-align: top;\r\n  width: 65px;\r\n  height: 50px;\r\n  object-position: top;\r\n  object-fit: cover;\r\n}\r\n\r\nfieldset.rotation-list {\r\n  text-align: left;\r\n  background-color: whitesmoke;\r\n}\r\n\r\ntable.control-button {\r\n  table-layout: fixed;\r\n  width: 100%;\r\n  margin-top: 0;\r\n  margin-bottom: 0;\r\n  border: none;\r\n}\r\n\r\ntable.control-button td {\r\n  height: 62px;\r\n  vertical-align: bottom;\r\n}\r\n\r\ntable.control-button td:first-child,\r\ntable.control-button td:last-child {\r\n  width: 45px;\r\n}\r\n\r\ntable.control-button button {\r\n  font-size: 12px;\r\n  background-color: transparent;\r\n  border-color: silver;\r\n  border-style: none;\r\n}\r\n\r\nspan.control-button {\r\n  color: orange;\r\n  font-size: 3rem;\r\n}\r\n\r\ntable.control-button input[type=\"checkbox\"] {\r\n  display: none;\r\n}\r\n\r\n.control-button label.checked {\r\n  color: orange;\r\n}\r\n\r\ndiv.rotation-item {\r\n  display: inline-block;\r\n  position: relative;\r\n  vertical-align: top;\r\n  font-size: 14px;\r\n  padding-left: 4px;\r\n  padding-bottom: 4px;\r\n}\r\n\r\ndiv.action-item {\r\n  display: inline-block;\r\n  text-align: center;\r\n}\r\n\r\ndiv.action-attribute {\r\n  text-align: center;\r\n  text-shadow: 0px 1px 0px #003366;\r\n  font-size: 14px;\r\n}\r\n\r\n.selected {\r\n  opacity: 0.5;\r\n  border-radius: 5px;\r\n}\r\n\r\n.tooltip {\r\n  top: -3rem;\r\n}\r\n\r\ndiv.remove-mark {\r\n  display: block;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: calc(50% - 15px);\r\n}\r\n\r\n.remove-mark::before,\r\n.remove-mark::after {\r\n  content: '';\r\n  width: 30px;\r\n  height: 3px;\r\n  background: black;\r\n  position: absolute;\r\n  transform: translateY(-50%) rotate(45deg);\r\n}\r\n\r\n.remove-mark::after {\r\n  transform: translateY(-50%) rotate(135deg);\r\n}\r\n\r\ntextarea.rotation-description {\r\n  display: block;\r\n  width: calc(100% - 20px);\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  padding: 3px 5px;\r\n}\r\n\r\ntable.guide {\r\n  width: calc(100% - 15px);\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  text-align: left;\r\n  table-layout: fixed;\r\n  border-spacing: 0;\r\n  border-radius: 10px;\r\n  border: 1px solid silver;\r\n  padding: 4px 4px 2px 4px;\r\n}\r\n\r\n.guide th {\r\n  width: 9rem;\r\n}\r\n\r\n.guide th,\r\n.guide td {\r\n  border-bottom: 1px solid silver;\r\n  border-right: 1px solid silver;\r\n  vertical-align: top;\r\n  padding-left: 3px;\r\n}\r\n\r\n.guide tr:last-child th,\r\n.guide tr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\n.guide td:last-child {\r\n  border-right: none;\r\n}\r\n</style>\r\n","import { toDisplayString as _toDisplayString, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode, vShow as _vShow, vModelCheckbox as _vModelCheckbox, createStaticVNode as _createStaticVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"er-calculator\" }\nconst _hoisted_2 = { class: \"er-calculator\" }\nconst _hoisted_3 = { class: \"with-tooltip\" }\nconst _hoisted_4 = [\"src\", \"alt\"]\nconst _hoisted_5 = { class: \"tooltip\" }\nconst _hoisted_6 = { colspan: \"2\" }\nconst _hoisted_7 = [\"onUpdate:modelValue\"]\nconst _hoisted_8 = { colspan: \"2\" }\nconst _hoisted_9 = [\"onUpdate:modelValue\"]\nconst _hoisted_10 = [\"value\"]\nconst _hoisted_11 = { colspan: \"2\" }\nconst _hoisted_12 = [\"src\", \"alt\"]\nconst _hoisted_13 = [\"onUpdate:modelValue\"]\nconst _hoisted_14 = [\"value\"]\nconst _hoisted_15 = { class: \"result-row\" }\nconst _hoisted_16 = { colspan: \"2\" }\nconst _hoisted_17 = { colspan: \"2\" }\nconst _hoisted_18 = [\"onUpdate:modelValue\"]\nconst _hoisted_19 = { class: \"label-row\" }\nconst _hoisted_20 = { colspan: \"2\" }\nconst _hoisted_21 = { colspan: \"4\" }\nconst _hoisted_22 = [\"onUpdate:modelValue\"]\nconst _hoisted_23 = { class: \"with-tooltip\" }\nconst _hoisted_24 = [\"src\", \"alt\"]\nconst _hoisted_25 = [\"src\", \"alt\"]\nconst _hoisted_26 = { class: \"tooltip\" }\nconst _hoisted_27 = [\"onUpdate:modelValue\"]\nconst _hoisted_28 = { colspan: \"2\" }\nconst _hoisted_29 = {\n  key: 0,\n  class: \"label-row\"\n}\nconst _hoisted_30 = { colspan: \"2\" }\nconst _hoisted_31 = { colspan: \"4\" }\nconst _hoisted_32 = {\n  colspan: \"2\",\n  class: \"with-tooltip\"\n}\nconst _hoisted_33 = [\"src\", \"alt\"]\nconst _hoisted_34 = [\"src\", \"alt\"]\nconst _hoisted_35 = { class: \"tooltip\" }\nconst _hoisted_36 = [\"onUpdate:modelValue\"]\nconst _hoisted_37 = { colspan: \"2\" }\nconst _hoisted_38 = [\"onUpdate:modelValue\"]\nconst _hoisted_39 = { colspan: \"2\" }\nconst _hoisted_40 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_41 = { class: \"tooltip\" }\nconst _hoisted_42 = { class: \"supply-from-enemy\" }\nconst _hoisted_43 = [\"onUpdate:modelValue\"]\nconst _hoisted_44 = [\"onUpdate:modelValue\"]\nconst _hoisted_45 = { class: \"message-area\" }\nconst _hoisted_46 = { class: \"character\" }\nconst _hoisted_47 = { key: 0 }\nconst _hoisted_48 = { class: \"message-area\" }\nconst _hoisted_49 = {\n  class: \"toggle-switch\",\n  for: \"show-usage-toggle\"\n}\nconst _hoisted_50 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_51 = { style: {\"text-align\":\"center\"} }\nconst _hoisted_52 = { style: {\"text-align\":\"center\"} }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.rotationLength) = $event)),\n          min: \"10\",\n          max: \"180\",\n          onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.rotationLength]\n        ])\n      ])\n    ]),\n    _createElementVNode(\"table\", _hoisted_2, [\n      _createElementVNode(\"tbody\", null, [\n        _createElementVNode(\"tr\", null, [\n          _cache[9] || (_cache[9] = _createElementVNode(\"th\", { colspan: \"2\" }, null, -1)),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _createElementVNode(\"div\", _hoisted_3, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.characterImgSrc(element.character),\n                  alt: _ctx.displayName(element.character),\n                  class: \"character\"\n                }, null, 8, _hoisted_4),\n                _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.displayName(element.character)), 1)\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_6, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element.energyCost) = $event)\n              }, null, 8, _hoisted_7), [\n                [_vModelText, element.energyCost]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_8, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _withDirectives(_createElementVNode(\"select\", {\n                \"onUpdate:modelValue\": ($event: any) => ((element.constellation) = $event),\n                onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n              }, [\n                (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3, 4, 5, 6], (constellation) => {\n                  return _createElementVNode(\"option\", {\n                    key: constellation,\n                    value: constellation\n                  }, _toDisplayString('C' + constellation), 9, _hoisted_10)\n                }), 64))\n              ], 40, _hoisted_9), [\n                [_vModelSelect, element.constellation]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_11, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass('weapon' + _ctx.bgColorClass(index))\n            }, [\n              _createElementVNode(\"img\", {\n                src: _ctx.weaponImgSrc(element.character, element.currentWeapon),\n                alt: _ctx.displayName(element.currentWeapon),\n                class: \"input-item-weapon\"\n              }, null, 8, _hoisted_12),\n              _withDirectives(_createElementVNode(\"select\", {\n                \"onUpdate:modelValue\": ($event: any) => ((element.weaponRefine) = $event),\n                onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n              }, [\n                (_openBlock(), _createElementBlock(_Fragment, null, _renderList([1, 2, 3, 4, 5], (refine) => {\n                  return _createElementVNode(\"option\", {\n                    key: refine,\n                    value: refine\n                  }, _toDisplayString('R' + refine), 9, _hoisted_14)\n                }), 64))\n              ], 40, _hoisted_13), [\n                [_vModelSelect, element.weaponRefine]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", _hoisted_15, [\n          _createElementVNode(\"th\", _hoisted_16, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.energyRechargeGls, (value, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, _toDisplayString(value + '%'), 3))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_17, _toDisplayString(_ctx.displayName('(%)')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element.onField) = $event),\n                min: \"0\",\n                max: \"100\",\n                onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n              }, null, 40, _hoisted_18), [\n                [_vModelText, element.onField]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", _hoisted_19, [\n          _createElementVNode(\"th\", _hoisted_20, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"th\", _hoisted_21, _toDisplayString(_ctx.displayName('')), 1)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticleEnemy, (row, rowIndex) => {\n          return (_openBlock(), _createElementBlock(\"tr\", {\n            key: rowIndex,\n            class: _normalizeClass(_ctx.bgColorClass2(row))\n          }, [\n            _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n            _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 10) / 10), 1),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n              return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_22), [\n                  [_vModelText, row.currentValues[columnIndex]]\n                ])\n              ]))\n            }), 128))\n          ], 2))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticle, (row, rowIndex) => {\n          return (_openBlock(), _createElementBlock(\"tr\", {\n            key: rowIndex,\n            class: _normalizeClass(_ctx.bgColorClass2(row))\n          }, [\n            _createElementVNode(\"th\", _hoisted_23, [\n              _createElementVNode(\"span\", null, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.rowImgSrc1(row),\n                  alt: _ctx.displayName(row.character),\n                  class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n                }, null, 10, _hoisted_24),\n                _createElementVNode(\"img\", {\n                  src: _ctx.rowImgSrc2(row),\n                  alt: _ctx.displayName(row.triggerName),\n                  class: \"input-item\"\n                }, null, 8, _hoisted_25)\n              ]),\n              _createElementVNode(\"span\", _hoisted_26, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n            ]),\n            _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 100) / 100), 1),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n              return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_27), [\n                  [_vModelText, row.currentValues[columnIndex]]\n                ])\n              ]))\n            }), 128))\n          ], 2))\n        }), 128)),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_28, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.particleRecharges, (value, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: \"result\"\n            }, _toDisplayString(value), 1))\n          }), 128))\n        ]),\n        (_ctx.inputRowEnergy.length)\n          ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_29, [\n              _createElementVNode(\"th\", _hoisted_30, _toDisplayString(_ctx.displayName('')), 1),\n              _createElementVNode(\"th\", _hoisted_31, _toDisplayString(_ctx.displayName('')), 1)\n            ]))\n          : _createCommentVNode(\"\", true),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowEnergy, (row, rowIndex) => {\n          return (_openBlock(), _createElementBlock(\"tr\", {\n            key: rowIndex,\n            class: _normalizeClass(_ctx.bgColorClass2(row))\n          }, [\n            _createElementVNode(\"th\", _hoisted_32, [\n              _createElementVNode(\"span\", null, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.rowImgSrc1(row),\n                  alt: _ctx.displayName(row.character),\n                  class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n                }, null, 10, _hoisted_33),\n                _createElementVNode(\"img\", {\n                  src: _ctx.rowImgSrc2(row),\n                  alt: _ctx.displayName(row.triggerName),\n                  class: \"input-item\"\n                }, null, 8, _hoisted_34)\n              ]),\n              _createElementVNode(\"span\", _hoisted_35, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n            ]),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n              return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_36), [\n                  [_vModelText, row.currentValues[columnIndex]]\n                ])\n              ]))\n            }), 128))\n          ], 2))\n        }), 128)),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_37, _toDisplayString(_ctx.displayName('()')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: _ctx.calculatorInput.length }, (_, i) => i), (index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.burstCounts[index]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_38), [\n                [_vModelText, _ctx.burstCounts[index]]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_39, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(element.replaceWeapons, (weapon, weaponIndex) => {\n                return (_openBlock(), _createElementBlock(\"span\", {\n                  key: weaponIndex,\n                  class: \"with-tooltip\"\n                }, [\n                  _createElementVNode(\"img\", {\n                    src: _ctx.replaceWeaponImgSrc(element, weapon),\n                    alt: _ctx.displayName(weapon),\n                    class: _normalizeClass('input-item-weapon' + _ctx.replaceWeaponClass(element, weapon)),\n                    onClick: ($event: any) => (_ctx.replaceWeaponOnClick(element, weapon))\n                  }, null, 10, _hoisted_40),\n                  _createElementVNode(\"span\", _hoisted_41, _toDisplayString(_ctx.displayName(weapon)), 1)\n                ]))\n              }), 128))\n            ], 2))\n          }), 128))\n        ])\n      ])\n    ]),\n    _cache[20] || (_cache[20] = _createElementVNode(\"br\", null, null, -1)),\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.combatLength) = $event)),\n          min: \"1\",\n          onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.combatLength]\n        ])\n      ]),\n      _createElementVNode(\"table\", _hoisted_42, [\n        _createElementVNode(\"caption\", {\n          onClick: _cache[7] || (_cache[7] = ($event: any) => (_ctx.isOpenSupplyFromEnemy = !_ctx.isOpenSupplyFromEnemy))\n        }, _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+') + \" \" + _toDisplayString(_ctx.displayName('')) + \" \" + _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+'), 1),\n        _createElementVNode(\"thead\", null, [\n          _createElementVNode(\"tr\", null, [\n            _cache[10] || (_cache[10] = _createElementVNode(\"th\", null, null, -1)),\n            _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n            _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1)\n          ])\n        ]),\n        _createElementVNode(\"tbody\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.supplyFromEnemy, (element, index) => {\n            return _withDirectives((_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n              _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName(element[0])), 1),\n              _createElementVNode(\"td\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((element[1]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_43), [\n                  [_vModelText, element[1]]\n                ])\n              ]),\n              _createElementVNode(\"td\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((element[2]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_44), [\n                  [_vModelText, element[2]]\n                ])\n              ])\n            ])), [\n              [_vShow, _ctx.isOpenSupplyFromEnemy || element[1] || element[2]]\n            ])\n          }), 128))\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_45, [\n      _cache[12] || (_cache[12] = _createElementVNode(\"hr\", null, null, -1)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.messages, (message, index) => {\n        return (_openBlock(), _createElementBlock(\"p\", { key: index }, [\n          _createElementVNode(\"span\", _hoisted_46, _toDisplayString(message[0]), 1),\n          _cache[11] || (_cache[11] = _createTextVNode(\"  \")),\n          _createElementVNode(\"span\", null, _toDisplayString(message[1]), 1),\n          (message[0] || message[1])\n            ? (_openBlock(), _createElementBlock(\"br\", _hoisted_47))\n            : _createCommentVNode(\"\", true),\n          _createTextVNode(\"  \" + _toDisplayString(message[2]), 1)\n        ]))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_48, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            class: \"hidden\",\n            type: \"checkbox\",\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_ctx.isShowUsage) = $event)),\n            id: \"show-usage-toggle\"\n          }, null, 512), [\n            [_vModelCheckbox, _ctx.isShowUsage]\n          ]),\n          _createElementVNode(\"label\", _hoisted_49, _toDisplayString(_ctx.displayName('')), 1)\n        ]),\n        _withDirectives(_createElementVNode(\"div\", _hoisted_50, [\n          _createElementVNode(\"div\", _hoisted_51, _toDisplayString(_ctx.displayName('')), 1),\n          _cache[19] || (_cache[19] = _createElementVNode(\"ol\", null, [\n            _createElementVNode(\"li\", null, \" \"),\n            _createElementVNode(\"li\", null, \"HP\"),\n            _createElementVNode(\"li\", null, \"1\"),\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\" 8\"),\n              _createElementVNode(\"br\")\n            ])\n          ], -1)),\n          _createElementVNode(\"div\", _hoisted_52, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"ol\", null, [\n            _cache[17] || (_cache[17] = _createStaticVNode(\"<li data-v-7de6944e><br data-v-7de6944e>   20 </li><li data-v-7de6944e><br data-v-7de6944e>   </li><li data-v-7de6944e><br data-v-7de6944e>  </li><li data-v-7de6944e> <br data-v-7de6944e>  </li><li data-v-7de6944e> <br data-v-7de6944e>   </li><li data-v-7de6944e> <br data-v-7de6944e> () </li><li data-v-7de6944e><br data-v-7de6944e> 5 0 </li><li data-v-7de6944e><br data-v-7de6944e> (%)  1 </li><li data-v-7de6944e><br data-v-7de6944e>   </li>\", 9)),\n            _createElementVNode(\"li\", null, [\n              _cache[13] || (_cache[13] = _createTextVNode(\"  \")),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_DECREMENT_IN_BURST, (character, index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character)), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _cache[14] || (_cache[14] = _createTextVNode(\"1 \")),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_UNTIL_MAP.entries(), ([character, untilMap], index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character) + ' : ' + _ctx.actionName('E') + '' +\r\n                                        Array.from(untilMap.entries())\r\n                                            .map(value => value[0]\r\n                                                .map(action => _ctx.actionName(action)).join(_ctx.displayName(''))\r\n                                                + '' + value[1] + _ctx.displayName('')).join(_ctx.displayName(''))), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _cache[15] || (_cache[15] = _createTextVNode(\" \")),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_DELAY_MAP.entries(), ([character, delayArr], index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character) + ' : ' + _ctx.actionName('E') + '' +\r\n                                        delayArr.map(action => _ctx.actionName(action)).join(_ctx.displayName(''))), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _cache[16] || (_cache[16] = _createTextVNode(\"0 \")),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_Q_NOT_RECHARGEABLE, (character, index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character)), 1))\n                }), 128))\n              ])\n            ]),\n            _cache[18] || (_cache[18] = _createElementVNode(\"li\", null, [\n              _createTextVNode(\" \"),\n              _createElementVNode(\"ul\", null, [\n                _createElementVNode(\"li\", null, \" : 9\"),\n                _createElementVNode(\"li\", null, \" : 4()\"),\n                _createElementVNode(\"li\", null, \" : 6\"),\n                _createElementVNode(\"li\", null, \" : 3\")\n              ])\n            ], -1))\n          ])\n        ], 512), [\n          [_vShow, _ctx.isShowUsage]\n        ])\n      ])\n    ])\n  ]))\n}","<template>\r\n    <div class=\"er-calculator\">\r\n        <div>\r\n            <label>{{ displayName('()') }}\r\n                <input type=\"number\" v-model=\"rotationLength\" min=\"10\" max=\"180\" @change=\"inputOnChange\">\r\n            </label>\r\n        </div>\r\n        <table class=\"er-calculator\">\r\n            <tbody>\r\n                <tr>\r\n                    <th colspan=\"2\"></th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <div class=\"with-tooltip\">\r\n                            <img :src=\"characterImgSrc(element.character)\" :alt=\"displayName(element.character)\"\r\n                                class=\"character\">\r\n                            <span class=\"tooltip\">{{ displayName(element.character) }}</span>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <input type=\"number\" v-model=\"element.energyCost\">\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <select v-model=\"element.constellation\" @change=\"inputOnChange\">\r\n                            <option v-for=\"constellation in [0, 1, 2, 3, 4, 5, 6]\" :key=\"constellation\"\r\n                                :value=\"constellation\">\r\n                                {{ 'C' + constellation }}\r\n                            </option>\r\n                        </select>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\"\r\n                        :class=\"'weapon' + bgColorClass(index)\">\r\n                        <img :src=\"weaponImgSrc(element.character, element.currentWeapon)\"\r\n                            :alt=\"displayName(element.currentWeapon)\" class=\"input-item-weapon\">\r\n                        <select v-model=\"element.weaponRefine\" @change=\"inputOnChange\">\r\n                            <option v-for=\"refine in [1, 2, 3, 4, 5]\" :key=\"refine\" :value=\"refine\">\r\n                                {{ 'R' + refine }}\r\n                            </option>\r\n                        </select>\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"result-row\">\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(value, index) in energyRechargeGls\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        {{ value + '%' }}\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('(%)') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <input type=\"number\" v-model=\"element.onField\" min=\"0\" max=\"100\" @change=\"inputOnChange\">\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"label-row\">\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <th colspan=\"4\">{{ displayName('') }}</th>\r\n                </tr>\r\n                <tr v-for=\"(row, rowIndex) in inputRowParticleEnemy\" :key=\"rowIndex\" :class=\"bgColorClass2(row)\">\r\n                    <th>\r\n                        {{ displayName('') }}\r\n                    </th>\r\n                    <td>{{ Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 10) / 10 }}</td>\r\n                    <td v-for=\"columnIndex in Array.from({ length: row.currentValues.length }, (_, i) => i)\"\r\n                        :key=\"columnIndex\">\r\n                        <input type=\"number\" v-model=\"row.currentValues[columnIndex]\" min=\"0\">\r\n                    </td>\r\n                </tr>\r\n                <tr v-for=\"(row, rowIndex) in inputRowParticle\" :key=\"rowIndex\" :class=\"bgColorClass2(row)\">\r\n                    <th class=\"with-tooltip\">\r\n                        <span>\r\n                            <img :src=\"rowImgSrc1(row)\" :alt=\"displayName(row.character)\" :class=\"rowImgSrc1Class(row)\">\r\n                            <img :src=\"rowImgSrc2(row)\" :alt=\"displayName(row.triggerName)\" class=\"input-item\">\r\n                        </span>\r\n                        <span class=\"tooltip\">{{ displayName(row.character) + ' ' + displayName(triggerName(row))\r\n                            }}</span>\r\n                    </th>\r\n                    <td>{{ Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 100) / 100 }}</td>\r\n                    <td v-for=\"columnIndex in Array.from({ length: row.currentValues.length }, (_, i) => i)\"\r\n                        :key=\"columnIndex\">\r\n                        <input type=\"number\" v-model=\"row.currentValues[columnIndex]\" min=\"0\">\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(value, index) in particleRecharges\" :key=\"index\" class=\"result\">\r\n                        {{ value }}\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"label-row\" v-if=\"inputRowEnergy.length\">\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <th colspan=\"4\">{{ displayName('') }}</th>\r\n                </tr>\r\n                <tr v-for=\"(row, rowIndex) in inputRowEnergy\" :key=\"rowIndex\" :class=\"bgColorClass2(row)\">\r\n                    <th colspan=\"2\" class=\"with-tooltip\">\r\n                        <span>\r\n                            <img :src=\"rowImgSrc1(row)\" :alt=\"displayName(row.character)\" :class=\"rowImgSrc1Class(row)\">\r\n                            <img :src=\"rowImgSrc2(row)\" :alt=\"displayName(row.triggerName)\" class=\"input-item\">\r\n                        </span>\r\n                        <span class=\"tooltip\">{{ displayName(row.character) + ' ' + displayName(triggerName(row))\r\n                            }}</span>\r\n                    </th>\r\n                    <td v-for=\"columnIndex in Array.from({ length: row.currentValues.length }, (_, i) => i)\"\r\n                        :key=\"columnIndex\">\r\n                        <input type=\"number\" v-model=\"row.currentValues[columnIndex]\" min=\"0\">\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('()') }}</th>\r\n                    <td v-for=\"index in Array.from({ length: calculatorInput.length }, (_, i) => i)\" :key=\"index\"\r\n                        :class=\"bgColorClass(index)\">\r\n                        <input type=\"number\" v-model=\"burstCounts[index]\" min=\"0\">\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <span v-for=\"(weapon, weaponIndex) in element.replaceWeapons\" :key=\"weaponIndex\"\r\n                            class=\"with-tooltip\">\r\n                            <img :src=\"replaceWeaponImgSrc(element, weapon)\" :alt=\"displayName(weapon)\"\r\n                                :class=\"'input-item-weapon' + replaceWeaponClass(element, weapon)\"\r\n                                @click=\"replaceWeaponOnClick(element, weapon)\">\r\n                            <span class=\"tooltip\">{{ displayName(weapon) }}</span>\r\n                        </span>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <br />\r\n        <div>\r\n            <label>{{ displayName('()') }}\r\n                <input type=\"number\" v-model=\"combatLength\" min=\"1\" @change=\"inputOnChange\">\r\n            </label>\r\n            <table class=\"supply-from-enemy\">\r\n                <caption @click=\"isOpenSupplyFromEnemy = !isOpenSupplyFromEnemy\">\r\n                    {{ isOpenSupplyFromEnemy ? '-' : '+' }}\r\n                    {{ displayName('') }}\r\n                    {{ isOpenSupplyFromEnemy ? '-' : '+' }}\r\n                </caption>\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>{{ displayName('') }} </th>\r\n                        <th>{{ displayName('') }} </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(element, index) in supplyFromEnemy\" :key=\"index\"\r\n                        v-show=\"isOpenSupplyFromEnemy || element[1] || element[2]\">\r\n                        <th>{{ displayName(element[0]) }}</th>\r\n                        <td><input type=\"number\" v-model=\"element[1]\" min=\"0\"></td>\r\n                        <td><input type=\"number\" v-model=\"element[2]\" min=\"0\"></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class=\"message-area\">\r\n            <hr />\r\n            <p v-for=\"(message, index) in messages\" :key=\"index\">\r\n                <span class=\"character\">{{ message[0] }}</span> &nbsp;\r\n                <span>{{ message[1] }}</span>\r\n                <br v-if=\"message[0] || message[1]\" />\r\n                &nbsp; {{ message[2] }}\r\n            </p>\r\n        </div>\r\n        <div class=\"message-area\">\r\n            <fieldset>\r\n                <legend>\r\n                    <input class=\"hidden\" type=\"checkbox\" v-model=\"isShowUsage\" id=\"show-usage-toggle\">\r\n                    <label class=\"toggle-switch\" for=\"show-usage-toggle\">\r\n                        {{ displayName('') }}\r\n                    </label>\r\n                </legend>\r\n                <div v-show=\"isShowUsage\" style=\"text-align: left;\">\r\n                    <div style=\"text-align: center;\">{{ displayName('') }}</div>\r\n                    <ol>\r\n                        <li> </li>\r\n                        <li>HP</li>\r\n                        <li>1</li>\r\n                        <li>\r\n                            8<br>\r\n                        </li>\r\n                    </ol>\r\n                    <div style=\"text-align: center;\">{{ displayName('') }}</div>\r\n                    <ol>\r\n                        <li><br>\r\n                            \r\n                            \r\n                            20\r\n                        </li>\r\n                        <li><br>\r\n                            \r\n                            \r\n                        </li>\r\n                        <li><br>\r\n                            \r\n                        </li>\r\n                        <li> <br>\r\n                            \r\n                        </li>\r\n                        <li> <br>\r\n                            \r\n                            \r\n                        </li>\r\n                        <li> <br>\r\n                            ()\r\n                        </li>\r\n                        <li><br>\r\n                            5\r\n                            0\r\n                        </li>\r\n                        <li><br>\r\n                            (%)\r\n                            \r\n                            1\r\n                        </li>\r\n                        <li><br>\r\n                            \r\n                            \r\n                        </li>\r\n                        <li>\r\n                            \r\n                            <ul>\r\n                                <li v-for=\"(character, index) in CHARACTER_E_DECREMENT_IN_BURST\" :key=\"index\">\r\n                                    {{ displayName(character) }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>1\r\n                            <ul>\r\n                                <li v-for=\"([character, untilMap], index) in CHARACTER_E_UNTIL_MAP.entries()\"\r\n                                    :key=\"index\">\r\n                                    {{ displayName(character) + ' : ' + actionName('E') + '' +\r\n                                        Array.from(untilMap.entries())\r\n                                            .map(value => value[0]\r\n                                                .map(action => actionName(action)).join(displayName(''))\r\n                                                + '' + value[1] + displayName('')).join(displayName(''))\r\n                                    }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>\r\n                            <ul>\r\n                                <li v-for=\"([character, delayArr], index) in CHARACTER_E_DELAY_MAP.entries()\"\r\n                                    :key=\"index\">\r\n                                    {{ displayName(character) + ' : ' + actionName('E') + '' +\r\n                                        delayArr.map(action => actionName(action)).join(displayName(''))\r\n                                    }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>0\r\n                            <ul>\r\n                                <li v-for=\"(character, index) in CHARACTER_Q_NOT_RECHARGEABLE\" :key=\"index\">\r\n                                    {{ displayName(character) }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>\r\n                            <ul>\r\n                                <li> : 9</li>\r\n                                <li> : 4()</li>\r\n                                <li> : 6</li>\r\n                                <li> : 3</li>\r\n                            </ul>\r\n                        </li>\r\n                    </ol>\r\n                </div>\r\n            </fieldset>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from \"lodash\";\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { ARTIFACT_SET_MASTER, CHARACTER_MASTER, ELEMENT_BG_COLOR_CLASS, ELEMENT_IMG_SRC, IMG_SRC_DUMMY, TArtifactSetKey, WEAPON_IMG_SRC } from \"@/master\";\r\nimport { CHARACTER_E_CT_RESET_BY_Q_ARR, CHARACTER_E_DELAY_MAP, CHARACTER_E_UNTIL_MAP, CHARACTER_Q_NOT_RECHARGEABLE, CHARACTER_Q_TO_E_ARR, getCooltimeFromInfo, getElementalSkillActions, getParticleInfo } from \"@/particlemaster\";\r\nimport { getCharacterDetail, getCharacterMaster, getWeaponMaster, NUMBER_OF_MEMBERS, setupCharacterDetailMap, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport { getOnFieldRate, TERParticle, RECHARGE_PARTICLE_SKILL, RECHARGE_PARTICLE_PASSIVE, RECHARGE_PARTICLE_CONSTELLATION, TEREnergy, RECHARGE_ENERGY_SKILL, RECHARGE_ENERGY_BURST, RECHARGE_ENERGY_PASSIVE, RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_ENEMY, countQ, isRechargeKindParticle, isRechargeKindEnergy, RECHARGE_PARTICLE_RESONANCE, RECHARGE_PARTICLE_FAVONIUS, RECHARGE_ENERGY_WEAPON, RECHARGE_ENERGY_ARTIFACT, RECHARGE_ENERGY_ATTACK } from \"./ERCalculatorCommon\";\r\nimport { getEnergyByArtifact, getEnergyByAttack, getEnergyByCharacter, getEnergyByWeapon, getParticleByCharacter, getParticleByCharacterExtra, getParticleByResonance, getParticleByWeapon, splitNumToArrByOnFieldRate } from \"./ERCalculatorFunc\";\r\n\r\ntype TCalculatorInput = {\r\n    character: string,                  // \r\n    energyCost: number,                 //   40-90\r\n    constellation: number,              //  0-6\r\n    initialWeapon: string | undefined,  // \r\n    currentWeapon: string | undefined,  // \r\n    weaponRefine: number,               //  1-5\r\n    artifactSet4: string | undefined,   // 4\r\n    onField: number,                    // \r\n    replaceWeapons: string[],           //     \r\n}\r\n\r\ntype TCalculatorInputRow = {\r\n    character: string,          // \r\n    rechargeKind: string,       // \r\n    triggerName: string,        // ,,,\r\n    element: string,            // \r\n    initialValues: number[],    // \r\n    currentValues: number[],    // \r\n    unit: number,               // \r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"ERCalculator\",\r\n    props: {\r\n        team: { type: Object as PropType<TTeam>, required: true },\r\n        teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n        constellations: { type: Object as PropType<TConstellation> },\r\n    },\r\n    setup(props) {\r\n        const { displayName } = CompositionFunction();\r\n        const calculatorInput = reactive([] as TCalculatorInput[]);\r\n        const inputRowParticle = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowEnergy = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowParticleEnemy = reactive([] as TCalculatorInputRow[]);\r\n        const messages = reactive([] as string[][]);\r\n        const DEFAULT_ROTATION_LENGTH = 20;\r\n        const DEFAULT_COMBAT_LENGTH = 90;\r\n        const rotationLength = ref(DEFAULT_ROTATION_LENGTH); // \r\n        const combatLength = ref(DEFAULT_COMBAT_LENGTH);   // \r\n        const supplyFromEnemy = reactive([\r\n            ['', 3, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n        ] as [string, number, number][]);\r\n        const isOpenSupplyFromEnemy = ref(false);\r\n        const REPLACE_WEAPON_MAP = {\r\n            '': ['', ''],\r\n            '': ['', ''],\r\n            '': ['', '', ''],\r\n            '': [''],\r\n            '': ['', ''],\r\n        };\r\n        const isShowUsage = ref(false);\r\n\r\n        onMounted(() => {\r\n            setupCharacterDetailMap().then(() => {\r\n                updateRotationLength(props.team);\r\n                setupInput(props.team, props.teamMemberResult);\r\n            });\r\n        })\r\n\r\n        const watchCount = ref(0);\r\n        watch(() => _.cloneDeep(props), (newVal, oldVal) => {\r\n            updateRotationLength(newVal.team);\r\n            if (!_.isEqual(newVal.team.members, oldVal.team.members) || !_.isEqual(newVal.teamMemberResult, oldVal.teamMemberResult)) {\r\n                setupInput(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            } else {\r\n                setupInputRows(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            }\r\n        }, { deep: true })\r\n\r\n        function getConstellation(character: string, team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            if (teamMemberResult) {\r\n                const workArr = team.members.filter(member => member.name == character);\r\n                if (workArr.length) {\r\n                    return teamMemberResult[workArr[0].id]?.characterInput. ?? (props.constellations ? props.constellations[character] ?? 0 : 0);\r\n                }\r\n            }\r\n            return props.constellations ? props.constellations[character] ?? 0 : 0;\r\n        }\r\n\r\n        function updateRotationLength(team: TTeam) {\r\n            const memberNameArr = team.members.map(member => member.name);\r\n            const eLength = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            const qLength = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            if (team.rotation.length) {\r\n                for (let i = 0; i < team.rotation.length; i++) {\r\n                    const rotation = team.rotation[i];\r\n                    const memberIndex = memberNameArr.indexOf(rotation.member);\r\n                    if (memberIndex == -1) continue;\r\n                    if (rotation.action === 'Q' || rotation.action.startsWith('E')) {\r\n                        const characterDetail = getCharacterDetail(rotation.member);\r\n                        if (rotation.action === 'Q') {\r\n                            let ct = characterDetail?.. ?? 0;\r\n                            if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 2) {\r\n                                    ct *= 0.85;\r\n                                }\r\n                            } else if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 6) {\r\n                                    ct -= 5;\r\n                                }\r\n                            } else if (memberNameArr.includes('') && characterDetail?. == '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 2) {\r\n                                    ct -= 6;\r\n                                }\r\n                            }\r\n                            if (CHARACTER_Q_TO_E_ARR.includes(rotation.member)) {\r\n                                const constellation = getConstellation(rotation.member, props.team, props.teamMemberResult);\r\n                                const particleInfo = getParticleInfo(rotation.member, 'E', constellation);\r\n                                if (particleInfo) {\r\n                                    const ect = getCooltimeFromInfo(particleInfo) ?? 0;\r\n                                    ct = _.round(Math.max(ct, ect) / 2, 1);\r\n                                }\r\n                            }\r\n                            qLength[memberIndex] += ct;\r\n                        } else {\r\n                            const constellation = getConstellation(rotation.member, props.team, props.teamMemberResult);\r\n                            const particleInfo = getParticleInfo(rotation.member, rotation.action, constellation);\r\n                            let ct = 0;\r\n                            if (particleInfo) {\r\n                                ct = getCooltimeFromInfo(particleInfo) ?? 0;\r\n                                if (memberNameArr.includes('') && rotation.member != '') {\r\n                                    const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                    if (constellation >= 2) {\r\n                                        ct *= 0.85;\r\n                                    }\r\n                                }\r\n                                if (CHARACTER_Q_TO_E_ARR.includes(rotation.member)) {\r\n                                    const qct = characterDetail?.. ?? 0;\r\n                                    ct = _.round(Math.max(ct, qct) / 2, 1);\r\n                                } else if (CHARACTER_E_CT_RESET_BY_Q_ARR.includes(rotation.member)) {\r\n                                    const qct = characterDetail?.. ?? 0;\r\n                                    if (qct) {\r\n                                        ct = Math.min(ct, qct);\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (ct > eLength[memberIndex]) {\r\n                                eLength[memberIndex] = ct;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let newLength = Math.max(...eLength, ...qLength);\r\n            if (newLength == 0) {\r\n                newLength = DEFAULT_ROTATION_LENGTH;\r\n            }\r\n            rotationLength.value = newLength;\r\n        }\r\n\r\n        function updateOnFields(team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                calculatorInput[i].onField = onFields[i];\r\n            }\r\n        }\r\n\r\n        const setupInput = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            const newInput: TCalculatorInput[] = [];\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < team.members.length; i++) {\r\n                const member = team.members[i];\r\n                const characterDetail = getCharacterDetail(member.name);\r\n                const constellation = constellations[i];\r\n                const memberResult = teamMemberResult ? teamMemberResult[member.id] : undefined;\r\n                const weapon = memberResult?.characterInput.weapon;\r\n                const weaponRefine = memberResult?.characterInput. ?? 1;\r\n                let artifactSet4 = undefined;\r\n                if (memberResult && memberResult.characterInput.artifactSets.length == 2) {\r\n                    artifactSet4 = memberResult.characterInput.artifactSets[0] == memberResult.characterInput.artifactSets[1] ? memberResult.characterInput.artifactSets[0] : undefined;\r\n                }\r\n                let replaceWeapons: string[] = [];\r\n                if (characterDetail) {\r\n                    replaceWeapons = REPLACE_WEAPON_MAP[characterDetail.];\r\n                }\r\n                newInput.push({\r\n                    character: member.name,\r\n                    energyCost: characterDetail?.. ?? 0,\r\n                    constellation: constellation,\r\n                    initialWeapon: weapon,\r\n                    currentWeapon: weapon,\r\n                    weaponRefine: weaponRefine,\r\n                    artifactSet4: artifactSet4,\r\n                    onField: onFields[i],\r\n                    replaceWeapons: replaceWeapons,\r\n                });\r\n            }\r\n            calculatorInput.splice(0, calculatorInput.length, ...newInput);\r\n\r\n            setupInputRows(team, teamMemberResult);\r\n        }\r\n\r\n        function pushInputRowParticle(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, particle: TERParticle) {\r\n            const initialValues = _.cloneDeep(particle[3]);\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(initialValues[i] * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: particle[0],\r\n                triggerName: particle[1],\r\n                element: particle[2],\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 1,\r\n            })\r\n            if (particle[4].length) {\r\n                particle[4].forEach(message => {\r\n                    let work = '';\r\n                    if (particle[0] === RECHARGE_PARTICLE_SKILL) {\r\n                        work = '';\r\n                    } else if (particle[0] === RECHARGE_PARTICLE_PASSIVE) {\r\n                        work = '';\r\n                    } else if (particle[0] === RECHARGE_PARTICLE_CONSTELLATION) {\r\n                        work = '';\r\n                        if (particle[1]) {\r\n                            work += ' ' + particle[1] + '';\r\n                        }\r\n                    } else {\r\n                        work = particle[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n        function pushInputRowEnergy(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, energy: TEREnergy) {\r\n            const initialValues = _.cloneDeep(energy[2]);\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(initialValues[i] * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: energy[0],\r\n                triggerName: energy[1],\r\n                element: '',\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 0.1,\r\n            })\r\n            if (energy[3].length) {\r\n                energy[3].forEach(message => {\r\n                    let work = '';\r\n                    if (energy[0] === RECHARGE_ENERGY_SKILL) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_BURST) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_PASSIVE) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_CONSTELLATION) {\r\n                        work = '';\r\n                        if (energy[1]) {\r\n                            work += ' ' + energy[1] + '';\r\n                        }\r\n                    } else {\r\n                        work = energy[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n\r\n        const setupInputRows = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            updateOnFields(team, teamMemberResult);\r\n            const newInputRowPacticle1: TCalculatorInputRow[] = [];\r\n            const newInputRowPacticle2: TCalculatorInputRow[] = [];\r\n            const newInputRowEnergy: TCalculatorInputRow[] = [];\r\n            const newInputRowResonance: TCalculatorInputRow[] = [];\r\n            const newinputRowParticleEnemy: TCalculatorInputRow[] = [];\r\n            const newMessages: string[][] = [];\r\n            const onFields = calculatorInput.map(s => s.onField);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                const character = calculatorInput[i].character;\r\n                if (!character) continue;\r\n                const constellation = calculatorInput[i].constellation;\r\n                const weapon = calculatorInput[i].currentWeapon;\r\n                const weaponRefine = calculatorInput[i].weaponRefine;\r\n                const artifactSet4 = calculatorInput[i].artifactSet4;\r\n                // \r\n                [\r\n                    getParticleByCharacter(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                    getParticleByCharacterExtra(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                ].forEach(result => {\r\n                    if (result) {\r\n                        result.forEach(entry => {\r\n                            pushInputRowParticle(newInputRowPacticle1, newMessages, character, entry);\r\n                        })\r\n                    }\r\n                })\r\n                // \r\n                const energyByCharacter = getEnergyByCharacter(character, constellation, team, rotationLength.value, team.rotation, teamMemberResult);\r\n                energyByCharacter.forEach(entry => {\r\n                    pushInputRowEnergy(newInputRowEnergy, newMessages, character, entry);\r\n                })\r\n                // \r\n                if (weapon) {\r\n                    // \r\n                    const particleByWeapon = getParticleByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation, onFields);\r\n                    if (particleByWeapon) {\r\n                        pushInputRowParticle(newInputRowPacticle2, newMessages, character, particleByWeapon);\r\n                    }\r\n                    // \r\n                    const energyByWeapon = getEnergyByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation);\r\n                    if (energyByWeapon) {\r\n                        pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByWeapon);\r\n                    }\r\n                }\r\n                if (artifactSet4) {\r\n                    const energyByArtifact = getEnergyByArtifact(character, artifactSet4, team, rotationLength.value, team.rotation);\r\n                    if (energyByArtifact) {\r\n                        pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByArtifact);\r\n                    }\r\n                }\r\n                // \r\n                const energyByAttack = getEnergyByAttack(character, team, rotationLength.value, team.rotation);\r\n                if (energyByAttack) {\r\n                    pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByAttack);\r\n                }\r\n            }\r\n            // \r\n            const particleByResonance = getParticleByResonance(team, rotationLength.value, team.rotation, onFields);\r\n            if (particleByResonance) {\r\n                pushInputRowParticle(newInputRowResonance, newMessages, '', particleByResonance);\r\n            }\r\n            // \r\n            supplyFromEnemy.filter(s => s[1] || s[2]).forEach(entry => {\r\n                const num = (entry[1] * 3 + entry[2]) * rotationLength.value / combatLength.value; // 3\r\n                const initialValues = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                splitNumToArrByOnFieldRate(initialValues, num, team, onFields);\r\n                pushInputRowParticle(newinputRowParticleEnemy, newMessages, '', [RECHARGE_PARTICLE_ENEMY, '', entry[0], initialValues, []]);\r\n            })\r\n            inputRowParticle.splice(0, inputRowParticle.length, ...newInputRowPacticle1, ...newInputRowPacticle2, ...newInputRowResonance);\r\n            inputRowEnergy.splice(0, inputRowEnergy.length, ...newInputRowEnergy);\r\n            inputRowParticleEnemy.splice(0, inputRowParticleEnemy.length, ...newinputRowParticleEnemy);\r\n            messages.splice(0, messages.length, ...newMessages);\r\n        }\r\n\r\n        /** () */\r\n        const burstCounts = computed(() => {\r\n            const result: { [key: number]: number } = { 0: 1, 1: 1, 2: 1, 3: 1 };\r\n            if (props.team.rotation?.length) {\r\n                for (let i = 0; i < props.team.members.length; i++) {\r\n                    const member = props.team.members[i];\r\n                    if (member.name) {\r\n                        result[i] = countQ(member.name, props.team.rotation);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /** () */\r\n        const particleRecharges = computed(() => {\r\n            const result: number[] = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                const member = props.team.members[i];\r\n                if (!member.name) continue;\r\n                const characterMaster = getCharacterMaster(member.name);\r\n                const myElement = characterMaster?.;\r\n                if (!myElement) continue;\r\n                [inputRowParticle, inputRowParticleEnemy].forEach(input => {\r\n                    input.filter(s => isRechargeKindParticle(s.rechargeKind)).forEach(entry => {\r\n                        let energy = 0;\r\n                        for (let j = 0; j < entry.currentValues.length; j++) {\r\n                            if (j == i) {\r\n                                energy += entry.currentValues[j];\r\n                            } else {\r\n                                energy += entry.currentValues[j] * 0.6;\r\n                            }\r\n                        }\r\n                        if (entry.element == myElement) {\r\n                            energy *= 3;\r\n                        } else if (entry.element == '') {\r\n                            energy *= 2;\r\n                        }\r\n                        result[i] = Math.round((result[i] + energy) * 10) / 10;\r\n                    })\r\n                })\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /**  */\r\n        const energyRechargeGls = computed(() => {\r\n            const result = _.fill(Array(NUMBER_OF_MEMBERS), 100);\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                if (!props.team.members[i].name) continue;\r\n                let energyCost = calculatorInput[i]?.energyCost;\r\n                if (!energyCost) continue;\r\n                inputRowEnergy.filter(s => isRechargeKindEnergy(s.rechargeKind)).forEach(entry => {\r\n                    energyCost -= entry.currentValues[i];\r\n                })\r\n                const burstCount = burstCounts.value[i] > 0 ? burstCounts.value[i] : 1;\r\n                const particleEnergy = particleRecharges.value[i] / burstCount;\r\n                if (energyCost > 0 && particleEnergy > 0) {\r\n                    const er = Math.ceil(energyCost * 100 / particleEnergy);\r\n                    result[i] = Math.max(100, er);\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n        const CHARACTER_E_DECREMENT_IN_BURST = computed(() =>\r\n            Object.keys(CHARACTER_MASTER).filter(key => Object.keys(getElementalSkillActions(key)).filter(action => action.indexOf('burst') != -1).length > 0).sort());\r\n\r\n        const characterImgSrc = (character: string) => getCharacterMaster(character)?.icon_url ?? IMG_SRC_DUMMY;\r\n        const weaponImgSrc = (character: string, weapon?: string) => {\r\n            const characterMater = getCharacterMaster(character);\r\n            return weapon ? characterMater ? getWeaponMaster(characterMater., weapon)?.icon_url ?? IMG_SRC_DUMMY : IMG_SRC_DUMMY : IMG_SRC_DUMMY;\r\n        }\r\n        const replaceWeaponImgSrc = (input: TCalculatorInput, weapon: string) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (input.character && input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                const characterMaster = getCharacterMaster(input.character);\r\n                if (characterMaster) {\r\n                    result = getWeaponMaster(characterMaster., weapon)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else {\r\n                    result = getCharacterMaster(row.character)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1Class = (row: TCalculatorInputRow) =>\r\n            (row.rechargeKind && row.rechargeKind == RECHARGE_PARTICLE_RESONANCE) ? 'input-item' : 'input-item-character';\r\n        const rowImgSrc2 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_PASSIVE, RECHARGE_PARTICLE_PASSIVE].includes(row.rechargeKind)) { // \r\n                    if (row.triggerName) {\r\n                        const characterDetail = getCharacterDetail(row.character);\r\n                        const workArr = characterDetail?..filter(obj => obj. == row.triggerName);\r\n                        result = workArr?.length ? workArr[0].icon_url ?? IMG_SRC_DUMMY : IMG_SRC_DUMMY;\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) { // \r\n                    if (row.triggerName) {\r\n                        const characterDetail = getCharacterDetail(row.character);\r\n                        const constellationObj = characterDetail?.[row.triggerName];\r\n                        result = constellationObj?.icon_url ?? IMG_SRC_DUMMY;\r\n                    }\r\n                } else if ([RECHARGE_PARTICLE_FAVONIUS, RECHARGE_ENERGY_WEAPON].includes(row.rechargeKind) && row.triggerName) { // \r\n                    const characterMater = getCharacterMaster(row.character);\r\n                    if (characterMater) {\r\n                        const weaponType = characterMater.;\r\n                        const weaponMaster = getWeaponMaster(weaponType, row.triggerName);\r\n                        if (weaponMaster) {\r\n                            result = weaponMaster.icon_url;\r\n                        }\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_ARTIFACT].includes(row.rechargeKind) && row.triggerName) { // \r\n                    const artifactSetMater = ARTIFACT_SET_MASTER[(row.triggerName as TArtifactSetKey)];\r\n                    if (artifactSetMater) {\r\n                        result = artifactSetMater.image.replace('.png', '/flower_of_life.png');\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_ATTACK].includes(row.rechargeKind)) { // \r\n                    const characterMaster = getCharacterMaster(row.character);\r\n                    if (characterMaster) {\r\n                        result = WEAPON_IMG_SRC[characterMaster.];\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const bgColorClass = (index: number) => {\r\n            const master = index < props.team.members.length ? getCharacterMaster(props.team.members[index].name) : undefined;\r\n            return ' ' + (master ? (ELEMENT_BG_COLOR_CLASS as any)[master.] : 'white');\r\n        }\r\n        const bgColorClass2 = (row: TCalculatorInputRow) =>\r\n            ' ' + (row.element ? (ELEMENT_BG_COLOR_CLASS as any)[row.element] : 'white');\r\n        const replaceWeaponClass = (input: TCalculatorInput, weapon: string) =>\r\n            input.currentWeapon == weapon ? ' disabled' : '';\r\n        const triggerName = (row: TCalculatorInputRow) => {\r\n            let result = '';\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_PASSIVE, RECHARGE_PARTICLE_PASSIVE].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) {\r\n                    result = ' ' + row.triggerName + '';\r\n                } else if ([RECHARGE_ENERGY_WEAPON, RECHARGE_PARTICLE_FAVONIUS].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_ENERGY_ATTACK].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const actionName = (action: string) => {\r\n            let result = '';\r\n            if (action.startsWith('N')) {\r\n                result = '';\r\n            } else if (action === 'C') {\r\n                result = '';\r\n            } else if (action === 'P') {\r\n                result = '';\r\n            } else if (action.startsWith('E')) {\r\n                result = '';\r\n            } else if (action === 'Q') {\r\n                result = '';\r\n            }\r\n            return result;\r\n        }\r\n\r\n        const inputOnChange = () => {\r\n            setupInputRows(props.team, props.teamMemberResult);\r\n        }\r\n\r\n        const replaceWeaponOnClick = (input: TCalculatorInput, weapon: string) => {\r\n            if (input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                if (input.currentWeapon == weapon) {\r\n                    input.currentWeapon = input.initialWeapon;\r\n                } else {\r\n                    input.currentWeapon = weapon;\r\n                }\r\n                inputOnChange();\r\n            }\r\n        }\r\n\r\n        const resetInput = () => {\r\n            inputRowParticleEnemy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowParticle.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowEnergy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n        }\r\n\r\n        return {\r\n            displayName,\r\n\r\n            rotationLength,\r\n            combatLength,\r\n            supplyFromEnemy,\r\n            isOpenSupplyFromEnemy,\r\n            calculatorInput,\r\n            inputRowParticle,\r\n            inputRowEnergy,\r\n            inputRowParticleEnemy,\r\n            burstCounts,\r\n            messages,\r\n            CHARACTER_E_DECREMENT_IN_BURST,\r\n            CHARACTER_E_UNTIL_MAP,\r\n            CHARACTER_E_DELAY_MAP,\r\n            CHARACTER_Q_NOT_RECHARGEABLE,\r\n            actionName,\r\n            characterImgSrc,\r\n            weaponImgSrc,\r\n            replaceWeaponImgSrc,\r\n            rowImgSrc1,\r\n            rowImgSrc1Class,\r\n            rowImgSrc2,\r\n            bgColorClass,\r\n            bgColorClass2,\r\n            replaceWeaponClass,\r\n            particleRecharges,\r\n            energyRechargeGls,\r\n            triggerName,\r\n            isShowUsage,\r\n\r\n            inputOnChange,\r\n            replaceWeaponOnClick,\r\n            resetInput,\r\n        }\r\n    }\r\n});\r\n</script>\r\n<style scoped>\r\ntable {\r\n    margin: 5px auto;\r\n    background-color: white;\r\n    color: black;\r\n    border: double 4px white;\r\n    border-spacing: 0;\r\n    vertical-align: middle;\r\n}\r\n\r\ncaption {\r\n    vertical-align: middle;\r\n    background-color: white;\r\n    padding: 4px;\r\n}\r\n\r\ntr,\r\nth,\r\ntd {\r\n    border: solid 1px gray;\r\n}\r\n\r\nth,\r\ntd {\r\n    min-width: 35px;\r\n    height: 22px;\r\n}\r\n\r\nth {\r\n    font-size: 1.6rem;\r\n    font-weight: bold;\r\n    padding-left: 1px;\r\n    padding-right: 1px;\r\n    white-space: nowrap;\r\n}\r\n\r\ninput[type=\"number\"] {\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    padding: 0 0 0 4px;\r\n    max-width: 15rem;\r\n}\r\n\r\ntd select,\r\ntd input[type=\"number\"] {\r\n    width: calc(100% - 4px);\r\n    text-align: center;\r\n    padding-block: 0;\r\n    padding-inline: 0;\r\n    border: none;\r\n    background-color: transparent;\r\n}\r\n\r\nimg.character {\r\n    width: 60px;\r\n    height: 45px;\r\n    object-position: top;\r\n    object-fit: cover;\r\n}\r\n\r\nimg.input-item-character {\r\n    width: 30px;\r\n    height: 22px;\r\n    object-position: top;\r\n    object-fit: cover;\r\n}\r\n\r\nimg.input-item {\r\n    width: 20px;\r\n    height: 20px;\r\n    background-color: rgba(55, 55, 55, 0.2);\r\n    border-radius: 50%;\r\n}\r\n\r\nimg.input-item-weapon {\r\n    width: 20px;\r\n    height: 20px;\r\n}\r\n\r\nimg.disabled {\r\n    opacity: 0.3;\r\n    background-color: black;\r\n    border-radius: 5px;\r\n}\r\n\r\n.white {\r\n    background-color: whitesmoke;\r\n}\r\n\r\ntr.label-row {\r\n    background-color: silver;\r\n}\r\n\r\ntr.result-row th,\r\ntr.result-row td {\r\n    border-top: 2px solid yellow;\r\n    border-bottom: 2px solid yellow;\r\n    font-weight: bold;\r\n}\r\n\r\ntd.weapon {\r\n    position: relative;\r\n}\r\n\r\ntd.weapon img.input-item-weapon {\r\n    border: none;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n\r\ncaption {\r\n    padding-top: 2px;\r\n    padding-bottom: 0;\r\n}\r\n\r\nol {\r\n    padding-left: 4rem;\r\n}\r\n\r\nol li {\r\n    margin-bottom: 1rem;\r\n}\r\n\r\nul {\r\n    padding-left: 3rem;\r\n}\r\n\r\nul li {\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\ndiv.message-area {\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    padding-left: 1rem;\r\n    padding-right: 1rem;\r\n    max-width: 120rem;\r\n    text-align: left;\r\n}\r\n\r\nspan.character {\r\n    font-weight: bold;\r\n    color: yellow;\r\n}\r\n\r\n.message-area fieldset {\r\n    text-align: center;\r\n}\r\n\r\n.message-area fieldset legend label {\r\n    width: 50rem;\r\n}\r\n</style>","import { CHARACTER_E_UNTIL_MAP, getParticleInfo, getDurationFromInfo, getReceiveTypeFromInfo, SP_SELF } from \"@/particlemaster\";\r\nimport _ from \"lodash\";\r\nimport { TActionItem, TTeam, NUMBER_OF_MEMBERS, getCharacterMaster, TTeamMemberResult, TMember, getDefaultMemberResult, getCharacterDetail, getNormalAttackDan } from \"./team\";\r\n\r\nexport const RECHARGE_ENERGY_SKILL = \"01\";              // \r\nexport const RECHARGE_ENERGY_BURST = \"02\";              // \r\nexport const RECHARGE_ENERGY_PASSIVE = \"03\";            // \r\nexport const RECHARGE_ENERGY_CONSTELLATION = \"04\";      // \r\nexport const RECHARGE_ENERGY_ATTACK = \"05\";             // \r\nexport const RECHARGE_ENERGY_WEAPON = \"06\";             // \r\nexport const RECHARGE_ENERGY_ARTIFACT = \"07\";           // \r\nexport const RECHARGE_PARTICLE_SKILL = \"11\";            // \r\nexport const RECHARGE_PARTICLE_PASSIVE = \"13\";          // \r\nexport const RECHARGE_PARTICLE_CONSTELLATION = \"14\";    // \r\nexport const RECHARGE_PARTICLE_FAVONIUS = \"16\";         // \r\nexport const RECHARGE_PARTICLE_RESONANCE = \"18\";        // \r\nexport const RECHARGE_PARTICLE_ENEMY = \"19\";            // \r\n\r\nexport const ATTACK_ENERGY_COUNT_OBJ = {\r\n    '': 4.52,     // 10% + 5% * n\r\n    '': 4.66,     // 0% + 10% * n\r\n    '': 6.95,   // 0% + 4% * n\r\n    '': 6.29,         // 0% + 5% * n\r\n    '': 4.66,       // 0% + 10% * n\r\n}\r\n\r\nconst NORMAL_ATTACK_LENGTH_OBJ = {\r\n    '': 0.4,\r\n    '': 0.8,\r\n    '': 0.4,\r\n    '': 0.6,\r\n    '': 0.6,\r\n}\r\n\r\nconst ACTION_LENGTH_MAP = new Map<string, Map<string, number>>();\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['E.Press', 1.5], ['E.Hold', 2]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['C', 0.8]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['C', 3]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['E.Hold', 2]]));\r\n\r\n// rechargeKind, triggerName, energies[], messages[]\r\nexport type TEREnergy = [string, string, number[], string[]];\r\n// rechargeKind, triggerName, element, particles[], messages[]\r\nexport type TERParticle = [string, string, string, number[], string[]];\r\n\r\nexport function isRechargeKindEnergy(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('0') : false;\r\n}\r\n\r\nexport function isRechargeKindParticle(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('1') : false;\r\n}\r\n\r\n/**  */\r\nexport function countN(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (rotation.action === 'Q') {\r\n                        isQing = true;\r\n                    } else if (rotation.action.startsWith('N') && isBursting == isQing) {\r\n                        result += rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2));\r\n                    }\r\n                } else {\r\n                    isQing = false;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith('N')).map(rotation => rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2))).reduce((p, c) => p + c, 0);\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countC(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.action === 'Q') {\r\n                    isQing = true;\r\n                } else if (rotation.action.includes('C') && isBursting == isQing) {\r\n                    result++;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.includes('C')).length;\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\nexport function countP(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.action === 'Q') {\r\n                    isQing = true;\r\n                } else if (rotation.action.includes('P') && isBursting == isQing) {\r\n                    result++;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.includes('P')).length;\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countE(character?: string, rotationList?: TActionItem[], action = 'E', isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character) {\r\n            let isQing = false;\r\n            let untilMap: Map<string[], number> | undefined;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (untilMap && untilMap.size > 0) {\r\n                        for (const [key, value] of untilMap.entries()) {\r\n                            if (key.filter(untilAction => rotation.action.indexOf(untilAction) != -1).length) {\r\n                                let untilCount = value;\r\n                                if (untilCount) {\r\n                                    untilCount -= rotation.action.startsWith('N') ? rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2)) : 1;\r\n                                    if (untilCount > 0) {\r\n                                        untilMap.set(key, untilCount);\r\n                                    } else {\r\n                                        untilMap.clear();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else if (rotation.action === 'Q') {\r\n                        isQing = true;\r\n                    } else if (rotation.action.startsWith(action)) {\r\n                        const workMap = CHARACTER_E_UNTIL_MAP.get(character);\r\n                        if (workMap && workMap.size > 0) {\r\n                            untilMap = _.cloneDeep(workMap);\r\n                        }\r\n                        result += (isBursting === undefined || isBursting == isQing) ? 1 : 0;\r\n                    }\r\n                } else {\r\n                    isQing = false;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith(action)).length;\r\n        }\r\n    } else {\r\n        result = 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countQ(character?: string, rotationList?: TActionItem[]) {\r\n    return rotationList?.length ?\r\n        rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action === 'Q').length\r\n        : 1;\r\n}\r\n/** (%) */\r\nexport function getOnFieldRate(team: TTeam, rotationLength: number, rotationList: TActionItem[], constellations: number[]) {\r\n    const result = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const danArr = team.members.map(member => member.name ? getNormalAttackDan(member.name) : 0);\r\n    if (rotationList?.length) {\r\n        const lengthList = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        let length = 0;\r\n        let isNCPIgnoring = false;\r\n        let preRotation = undefined;\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (preRotation && rotation.member != preRotation.member) {\r\n                lengthList[memberNameArr.indexOf(preRotation.member)] += (length > 1 ? length : 1);\r\n                length = 0;\r\n                isNCPIgnoring = false;\r\n            }\r\n            preRotation = rotation;\r\n            const actionLength1 = ACTION_LENGTH_MAP.get(rotation.member);\r\n            if (actionLength1) {\r\n                const actionLength2 = actionLength1.get(rotation.action);\r\n                if (actionLength2 !== undefined) {\r\n                    length += actionLength2;\r\n                    continue;\r\n                }\r\n            }\r\n            const characterMaster = getCharacterMaster(rotation.member);\r\n            if (rotation.action === 'Q') {\r\n                length += 0.8;\r\n                if (characterMaster?. && characterMaster. === 5) {\r\n                    length += 0.4;\r\n                }\r\n            } else if (rotation.action === 'E.Hold') {\r\n                length += 1;\r\n            } else if (['E', 'E.Press'].includes(rotation.action)) {\r\n                length += 0.5;\r\n                const particleInfo = getParticleInfo(rotation.member, rotation.action, constellations[memberNameArr.indexOf(rotation.member)]);\r\n                const duration = getDurationFromInfo(particleInfo);\r\n                if (getReceiveTypeFromInfo(particleInfo) === SP_SELF && duration) {\r\n                    // \r\n                    length += duration;\r\n                    isNCPIgnoring = true;\r\n                }\r\n            } else if (!isNCPIgnoring) {\r\n                if (rotation.action.startsWith('N')) {\r\n                    const maxDan = danArr[memberNameArr.indexOf(preRotation.member)];\r\n                    const dan = rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2));\r\n                    if (characterMaster?.) {\r\n                        const unitLength = NORMAL_ATTACK_LENGTH_OBJ[characterMaster.];\r\n                        for (let j = 0; j < dan; j++) {\r\n                            if ((j / maxDan) < (2 / 3)) {\r\n                                length += unitLength * 0.8;\r\n                            } else {\r\n                                length += unitLength * 1.2;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        length += 0.6 * dan;\r\n                    }\r\n                    if (rotation.action.endsWith('C')) {\r\n                        length += 0.5;\r\n                    }\r\n                    length += 0.3;\r\n                } else if (rotation.action == 'C') {\r\n                    if (characterMaster?. === '') {   //  or \r\n                        length += 3;\r\n                    } else if (characterMaster?. === '') {    // \r\n                        length += 1.5;  //  1/2=1s/1.5s\r\n                    } else if (characterMaster?. === '') {\r\n                        length += 1;\r\n                    } else {    // for \r\n                        length += 1;\r\n                    }\r\n                } else if (rotation.action == 'P') {\r\n                    length += 1.5;\r\n                }\r\n            }\r\n        }\r\n        if (preRotation && length > 0) {\r\n            lengthList[memberNameArr.indexOf(preRotation.member)] += (length > 1 ? length : 1);\r\n        }\r\n        const multiple = Math.ceil(100 / rotationLength);\r\n        const lengthSum = _.sum(lengthList);\r\n        for (let i = 0; i < result.length; i++) {\r\n            if (lengthSum && i < lengthList.length) {\r\n                result[i] = Math.ceil(lengthList[i] / lengthSum * 100 / multiple) * multiple;\r\n            } else {\r\n                result[i] = 25;\r\n            }\r\n        }\r\n        const sumVal = _.sum(result);\r\n        if (sumVal > 100) {\r\n            const maxVal = _.max(result);\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (result[i] == maxVal) {\r\n                    result[i] -= sumVal - 100;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        const memberNum = memberNameArr.filter(name => name).length;\r\n        if (memberNum) {\r\n            const rate = 100 / memberNum;\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (memberNameArr[i]) {\r\n                    result[i] = rate;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getMemberResult(character: string, members: TMember[], teamMemberResult?: TTeamMemberResult) {\r\n    let result = getDefaultMemberResult();\r\n    if (teamMemberResult) {\r\n        const memberArr = members.filter(member => member.name == character);\r\n        if (memberArr.length) {\r\n            result = teamMemberResult[memberArr[0].id];\r\n        }\r\n    } else {\r\n        const characterDetail = getCharacterDetail(character);\r\n        if (characterDetail?.) {\r\n            Object.keys(characterDetail.).forEach(key => {\r\n                result.statsInput.statsObj[key] += characterDetail.[key]['90'];\r\n            })\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getCharacterInputValue(character: string, members: TMember[], item: string, teamMemberResult?: TTeamMemberResult) {\r\n    const result = getMemberResult(character, members, teamMemberResult)?.characterInput;\r\n    return result ? (result as any)[item] : undefined;\r\n}\r\n\r\nexport function getStatsInputValue(character: string, members: TMember[], item: string, teamMemberResult?: TTeamMemberResult) {\r\n    const result = getMemberResult(character, members, teamMemberResult)?.statsInput?.statsObj;\r\n    return result ? (result as any)[item] : undefined;\r\n}\r\n","import _ from \"lodash\";\r\nimport { TActionItem, TTeamMemberResult, NUMBER_OF_MEMBERS, getCharacterMaster, getCharacterDetail, TMember } from \"./team\";\r\nimport { RECHARGE_ENERGY_BURST, RECHARGE_ENERGY_CONSTELLATION, RECHARGE_ENERGY_PASSIVE, RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_CONSTELLATION, RECHARGE_PARTICLE_PASSIVE, countC, countE, countN, countQ, getCharacterInputValue, getMemberResult, getStatsInputValue, } from \"./ERCalculatorCommon\";\r\nimport { CHARACTER_MASTER } from \"@/master\";\r\n\r\nexport type TCharacterEnergyRet = [string, string, number, number, number, number[], string[]];\r\nexport type TCharacterParticleRet = [string, string, string, number, number, number[], string[]];\r\n\r\nexport const CHARACTER_ENERGY_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        constellation: number,\r\n        members: TMember[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n        teamMemberResult?: TTeamMemberResult,\r\n    ) => TCharacterEnergyRet[]\r\n} = {\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '525',\r\n            ];\r\n            const myEnergy = 5 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            ' ',\r\n            '10%',\r\n        ];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            messages.push('35%+100%');\r\n        }\r\n        const skillLevel = getCharacterInputValue(character, members, '', teamMemberResult) ?? 8;\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult) ?? 100;\r\n        const myEnergy = [3, 3, 3, 3.5, 3.5, 3.5, 4, 4, 4, 4, 4, 4, 4, 4, 4][skillLevel - 1] * (100 + (er / 10)) / 100;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_SKILL, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const messages2 = [\r\n            ' 0.51'\r\n        ];\r\n        const burstLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const somebodyEnergy = [0.8, 0.8, 0.8, 0.9, 0.9, 0.9, 1, 1, 1, 1, 1, 1, 1, 1, 1][burstLevel - 1];\r\n        result.push([RECHARGE_ENERGY_BURST, '', somebodyEnergy, allEnergy, otherEnergy, herEnergies, messages2]);\r\n        return result;\r\n    },\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '3.5',\r\n            ];\r\n            const myEnergy = 3.5 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '115',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '210',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList, 'E.Hold');\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        let constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '101',\r\n            ];\r\n            const myEnergy = 1 * Math.trunc(rotationLength / 10);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 1 * countC(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '10',\r\n        ];\r\n        const myEnergy = 0;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '23',\r\n            ];\r\n            const nCount = rotationList?.length ? Math.trunc(rotationList.filter(rotation => rotation.action.startsWith('N')).length / 3) : 1;\r\n            const myEnergy = 3 * nCount;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '121',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '511',\r\n            ];\r\n            const myEnergy = 5;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.221',\r\n            ];\r\n            const myEnergy = 1.2;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '100%1.231',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = 0;\r\n        const allEnergy = 1.2 * er / 100 * countE(character, rotationList);\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '91.513.5',\r\n            ];\r\n            const myEnergy = 9 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '100%5115',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = Math.min(15, 5 * er / 100) * countE(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const burstLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const somebodyEnergy = [1.6, 1.7, 1.8, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5][burstLevel - 1];\r\n        const messages2 = [\r\n            ' '\r\n        ];\r\n        result.push([RECHARGE_ENERGY_BURST, '', somebodyEnergy, allEnergy, otherEnergy, herEnergies, messages2]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '11',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1210.514',\r\n            ];\r\n            const myEnergy = 2 * (constellation >= 6 ? Math.trunc(rotationLength / 3) : Math.min(countE(character, rotationList) * 2, countC(character, rotationList)));\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '30.81',\r\n            ];\r\n            const myEnergy = 3;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                'HP315',\r\n            ];\r\n            const myEnergy = 3 * 5 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '243',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '20%',\r\n        ];\r\n        const myEnergy = 80 * 0.2 * countQ(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '2',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '1515',\r\n        ];\r\n        const qCount = countQ(character, rotationList);\r\n        const myEnergy = 15 * qCount;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        for (const element of ['', '', '', '']) {\r\n            let doBreak = false;\r\n            for (let herIndex = 0; herIndex < members.length; herIndex++) {\r\n                const herCm = getCharacterMaster(members[herIndex].name);\r\n                if (herCm?. == element) {\r\n                    herEnergies[herIndex] = myEnergy;\r\n                    doBreak = true;\r\n                }\r\n            }\r\n            if (doBreak) break;\r\n        }\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '2',\r\n        ];\r\n        const myEnergy = 2;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '33',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 3;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.2',\r\n            ];\r\n            const myEnergy = 1.2 * (countE(character, rotationList) ? Math.trunc(rotationLength / 2) : 1);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '-15%6211',\r\n            ];\r\n            const myEnergy = 2 * countC(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '45/3/412',\r\n            ];\r\n            const myEnergy = 3;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '115',\r\n            '100%1%+0.6%',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult) ?? 100;\r\n        let unit = 2.3 * (1 + (er - 100) * 0.006);\r\n        let unit2 = 0;\r\n        const memberResult = getMemberResult(character, members, teamMemberResult);\r\n        if (memberResult?.damageResult?.) {\r\n            memberResult.damageResult..forEach(entry => {\r\n                if (entry[0] === '') {\r\n                    unit = entry[2];\r\n                } else if (entry[0] === '_') {\r\n                    unit2 = entry[2];\r\n                }\r\n            })\r\n        }\r\n        if (memberResult?.characterInput?.weapon === '') {\r\n            unit2 *= [30, 35, 40, 45, 50][memberResult.characterInput. - 1] * 0.006;\r\n        }\r\n        const myEnergy = 0;\r\n        const allEnergy = (unit + unit2) * 5 * countQ(character, rotationList);\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '+10%0.80.21',\r\n            ];\r\n            const myEnergy = 0.8 * countN(character, rotationList, true);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1-1.564.518',\r\n            ];\r\n            const geoCount = members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n            const myEnergy = Math.min(18, 6 * geoCount) * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '18',\r\n            ];\r\n            const myEnergy = 3 * 8 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '4012',\r\n        ];\r\n        const myEnergy = 2;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '35',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 3 * 5 * countQ(character, rotationList);\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '315',\r\n            ];\r\n            const myEnergy = 15 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '()0.80.21',\r\n        ];\r\n        const electroCount = members.filter(member => getCharacterDetail(member.name)?. === '').length;\r\n        const myEnergy = electroCount > 0 ? 0.8 * (countN(character, rotationList) + countC(character, rotationList)) : 0;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.50.21',\r\n            ];\r\n            const myEnergy = 1.5;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            'HP3',\r\n        ];\r\n        const myEnergy = 3;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                'HP451',\r\n            ];\r\n            const myEnergy = 4 * Math.trunc(rotationLength / 5);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '+10%2205',\r\n            ];\r\n            const myEnergy = 2;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '13193',\r\n            ];\r\n            const myEnergy = 3 * 3 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '20.21',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '215101',\r\n            ];\r\n            const myEnergy = 15 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '8',\r\n            ];\r\n            const myEnergy = 8 * 2 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '351',\r\n            ];\r\n            const myEnergy = 3 * Math.trunc(rotationLength / 5);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '52.81',\r\n            ];\r\n            const myEnergy = 5 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '25-6',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            for (let i = 0; i < members.length; i++) {\r\n                if ('' == (CHARACTER_MASTER as any)[members[i].name]?.) {\r\n                    herEnergies[i] = 25 * countE(character, rotationList);\r\n                }\r\n            }\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        {\r\n            const messages: string[] = [\r\n                '15\\n\\n\\n33113',\r\n            ];\r\n            let myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            if (rotationList) {\r\n                let startIndex = -1;\r\n                for (let i = 0; i < rotationList.length; i++) {\r\n                    if (rotationList[i].member == character && rotationList[i].action === 'E') {\r\n                        startIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n                if (startIndex >= 0) {\r\n                    const ncpCountMap = new Map<string, number>();\r\n                    let rechargeCount = 0;\r\n                    for (let i = startIndex; i < rotationList.length; i++) {\r\n                        if (rotationList[i].member == character && rotationList[i].action === 'E') {\r\n                            rechargeCount = 3;\r\n                        } else if (rotationList[i].member != character && rechargeCount > 0) {\r\n                            if (rotationList[i].action.startsWith('N') || rotationList[i].action.startsWith('C') || ['P'].includes(rotationList[i].action)) {\r\n                                ncpCountMap.set(character, (ncpCountMap.get(character) ?? 0) + 1);\r\n                                rechargeCount--;\r\n                            }\r\n                        }\r\n                    }\r\n                    for (let i = 0; i < startIndex; i++) {\r\n                        if (rotationList[i].member != character && rechargeCount > 0) {\r\n                            if (rotationList[i].action.startsWith('N') || rotationList[i].action.startsWith('C') || ['P'].includes(rotationList[i].action)) {\r\n                                ncpCountMap.set(character, (ncpCountMap.get(character) ?? 0) + 1);\r\n                                rechargeCount--;\r\n                            }\r\n                        }\r\n                    }\r\n                    myEnergy = _.sum(Array.from(ncpCountMap.values())) * 3;\r\n                    for (let i = 0; i < members.length; i++) {\r\n                        if (ncpCountMap.has(members[i].name)) {\r\n                            herEnergies[i] = (ncpCountMap.get(members[i].name) ?? 0) * 3;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '8',\r\n            ];\r\n            const myEnergy = countQ(character) * 8;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.5400%\\n1',\r\n            ];\r\n            const visionCount = members.filter(member => ['', '', '', ''].includes((CHARACTER_MASTER as any)[member.name]?.)).length;\r\n            const myEnergy = 1.5 * 2 * visionCount * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '<span style=\"color:#FFD780FF\"></span><span style=\"color:#FFD780FF\"></span>11800%<span style=\"color:#99FFFFFF\"></span>16881',\r\n            ];\r\n            const myEnergy = 8 * Math.trunc(rotationLength / 8);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n}\r\n\r\nexport const CHARACTER_PARTICLE_EXTRA_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        constellation: number,\r\n        members: TMember[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n        onFields: number[],\r\n    ) => TCharacterParticleRet | undefined\r\n} = {\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const messages: string[] = [\r\n            '12',\r\n        ];\r\n        const hydroCount = members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n        const myParticle = hydroCount > 0 ? 2 * countE(character, rotationList) : 2;\r\n        const allParticle = 0;\r\n        result = [RECHARGE_PARTICLE_PASSIVE, '', '', myParticle, allParticle, [], messages];\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '30%',\r\n            ];\r\n            const myParticle = 0;\r\n            const allParticle = 2 / 3 * countN(undefined, rotationList);\r\n            result = [RECHARGE_PARTICLE_CONSTELLATION, String(constellationLevel), '', myParticle, allParticle, [], messages];\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '50%151',\r\n            ];\r\n            const myParticle = 0;\r\n            const allParticle = 0;\r\n            const herParticles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            let triggerCnt = 1;\r\n            if (rotationList?.length) {\r\n                const ct = 5;\r\n                const rindexArr: number[] = [];\r\n                let isRecorded = false;\r\n                for (let i = 0; i < rotationList.length; i++) {\r\n                    const rotation = rotationList[i];\r\n                    if (rotation.member == character) {\r\n                        if (rotation.action.startsWith('N') && !isRecorded) {\r\n                            rindexArr.push(i);\r\n                            isRecorded = true;\r\n                        }\r\n                    } else {\r\n                        isRecorded = false;\r\n                    }\r\n                }\r\n                const memberNameArr = members.map(member => member.name);\r\n                const onField = onFields[memberNameArr.indexOf(character)];\r\n                triggerCnt = Math.min(Math.trunc(rotationLength / ct), rindexArr.length + Math.max(0, Math.trunc(rotationLength * onField / 100 / ct) - 1));\r\n                for (let i = 0; i < triggerCnt; i++) {\r\n                    let nxtCharacter = character;\r\n                    if (i < rindexArr.length && (rindexArr[i] + 1) < rotationList.length) {\r\n                        nxtCharacter = rotationList[rindexArr[i] + 1].member;\r\n                    }\r\n                    const toIndex = memberNameArr.indexOf(nxtCharacter);\r\n                    herParticles[toIndex] += 1;\r\n                }\r\n            }\r\n            result = [RECHARGE_PARTICLE_CONSTELLATION, String(constellationLevel), '', myParticle, allParticle, herParticles, messages];\r\n        }\r\n        return result;\r\n    },\r\n}\r\n","import _ from \"lodash\";\r\nimport { NUMBER_OF_MEMBERS, TActionItem } from \"./team\";\r\nimport { RECHARGE_ENERGY_WEAPON, countC, countE, countN, countP, countQ } from \"./ERCalculatorCommon\";\r\n\r\nexport type TWeaponEnergyRet = [string, string, number, number, number, number[], string[]];\r\n\r\nexport const WEAPON_ENERGY_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        weapon: string,\r\n        weaponRefine: number,\r\n        members: string[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n    ) => TWeaponEnergyRet\r\n} = {\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '624/4.5/5/5.5/6HP24%/4.5%/5%/5.5%/6%',\r\n        ];\r\n        const myEnergy = [4, 4.5, 5, 5.5, 6][weaponRefine - 1] * 3 * countQ(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '301513126/7.5/9/10.5/12',\r\n        ];\r\n        const myEnergy = [6, 7.5, 9, 10.5, 12][weaponRefine - 1] * Math.min(countE(character, rotationList), countQ(character, rotationList) * 3, rotationLength / 5);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '120.60.11',\r\n        ];\r\n        const myEnergy = 0.6 * countN(character, rotationList, true);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '32.54.5/5/5.5/6/6.5',\r\n        ];\r\n        const myEnergy = [4.5, 5, 5.5, 6, 6.5][weaponRefine - 1];\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '8/10/12/14/16101',\r\n        ];\r\n        const myEnergy = [8, 10, 12, 14, 16][weaponRefine - 1] * Math.trunc(rotationLength / 10);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            'HP430.31338/9/10/11/12121',\r\n        ];\r\n        const myEnergy = [8, 9, 10, 11, 12][weaponRefine - 1];\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '2.5/2.75/3/3.25/3.50.71',\r\n        ];\r\n        const myEnergy = [2.5, 2.75, 3, 3.25, 3.5][weaponRefine - 1] * countP(undefined, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '8/10/12/14/16101',\r\n        ];\r\n        const myEnergy = [8, 10, 12, 14, 16][weaponRefine - 1] * Math.trunc(rotationLength / 10);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '+18%/23%/28%/33%/38%822212/13/14/15/16121',\r\n        ];\r\n        const myEnergy = [12, 13, 14, 15, 16][weaponRefine - 1] * Math.trunc(rotationLength / 12);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n}\r\n\r\nfunction weaponEnergySub_(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    members: string[],  // eslint-disable-line\r\n    rotationLength: number,  // eslint-disable-line\r\n    rotationList: TActionItem[] | undefined,\r\n): TWeaponEnergyRet {\r\n    const messages = [\r\n        '3623/3.5/4/4.5/5101',\r\n    ];\r\n    let myEnergy = 0;\r\n    const unit = [3, 3.5, 4, 4.5, 5][weaponRefine - 1];\r\n    if (rotationList?.length) {\r\n        let isInCt = false;\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (rotation.member == character) {\r\n                if (rotation.action.startsWith('E')) {\r\n                    if (!isInCt) {\r\n                        myEnergy += unit * 3;\r\n                        if (i === 0 || rotationList[i - 1].member != character || rotationList[i - 1].action !== 'Q') {\r\n                            myEnergy -= 3;\r\n                        }\r\n                    }\r\n                    isInCt = true;\r\n                }\r\n            } else {\r\n                isInCt = false;\r\n            }\r\n        }\r\n    } else {\r\n        myEnergy = unit * 3 - 3;\r\n    }\r\n    const allEnergy = 0;\r\n    const otherEnergy = 0;\r\n    const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n}\r\n\r\nfunction weaponEnergySub_(\r\n    character: string,  // eslint-disable-line\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    members: string[],  // eslint-disable-line\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,  // eslint-disable-line\r\n): TWeaponEnergyRet {\r\n    const messages = [\r\n        '130310212/2.5/3/3.5/4151',\r\n    ];\r\n    const myEnergy = [2, 2.5, 3, 3.5, 4][weaponRefine - 1] * 3 * Math.min(countE(character, rotationList) + countC(character, rotationList), Math.trunc(rotationLength / 15));\r\n    const allEnergy = 0;\r\n    const otherEnergy = 0;\r\n    const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n}\r\n","import _ from \"lodash\";\r\nimport { NUMBER_OF_MEMBERS, TActionItem, TTeam, TTeamMemberResult, getCharacterDetail, getCharacterMaster } from \"./team\";\r\nimport { CHARACTER_E_DELAY_MAP, CHARACTER_E_FIRST_ARR, CHARACTER_E_UNTIL_MAP, CHARACTER_Q_NOT_RECHARGEABLE, CHARACTER_Q_TO_E_ARR, SP_LONG, SP_NEXT, SP_SELF, SP_SHRT, getDurationFromInfo, getElementalSkillActions, getParticleInfo, getParticleNumFromInfo, getReceiveTypeFromInfo } from \"@/particlemaster\";\r\nimport { TERParticle, RECHARGE_PARTICLE_SKILL, countE, countC, countQ, RECHARGE_PARTICLE_FAVONIUS, RECHARGE_PARTICLE_RESONANCE, TEREnergy, RECHARGE_ENERGY_ARTIFACT, RECHARGE_ENERGY_ATTACK, ATTACK_ENERGY_COUNT_OBJ } from \"./ERCalculatorCommon\";\r\nimport { CHARACTER_ENERGY_FUNC, CHARACTER_PARTICLE_EXTRA_FUNC } from \"./ERCalculatorFuncCharacter\";\r\nimport { WEAPON_ENERGY_FUNC } from \"./ERCalculatorFuncWeapon\";\r\n\r\nexport function getParticleByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle[] | undefined {\r\n    const kind = RECHARGE_PARTICLE_SKILL;\r\n    const resultMap = new Map<string, number[]>();\r\n    if (!character) return undefined;\r\n    if (!rotationList?.length) {\r\n        rotationList = [{\r\n            id: 0,\r\n            member: character,\r\n            action: getElementalSkillActions(character)[0],\r\n        }];\r\n    }\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (character === '' && constellation >= 6) {\r\n        const eCount = countE(character, rotationList);\r\n        const cCount = countC(character, rotationList);\r\n        const qCount = countQ(character, rotationList);\r\n        const action = 'E';\r\n        const particleInfo = getParticleInfo(character, action, 0);\r\n        const num = getParticleNumFromInfo(particleInfo) * Math.trunc(Math.min(rotationLength, Math.min(eCount, cCount) * 5.5 + qCount * 18) / 5.5);\r\n        const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(resultVal, num, team, onFields);\r\n        resultMap.set(action, resultVal);\r\n    } else if (character === '') {\r\n        let ousiaLength = 0;\r\n        let isOusia = true; // \r\n        rotationList.forEach(rotation => {\r\n            if (rotation.member == character && rotation.action.includes('C')) {    // \r\n                isOusia = !isOusia;\r\n            }\r\n            if (isOusia) {\r\n                ousiaLength++;\r\n            }\r\n        })\r\n        const action = 'E';\r\n        const particleInfo = getParticleInfo(character, action);\r\n        const num = getParticleNumFromInfo(particleInfo, rotationLength) * Math.trunc(ousiaLength / rotationList.length);\r\n        const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(resultVal, num, team, onFields);\r\n        resultMap.set(action, resultVal);\r\n    } else {\r\n        const timeArr = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        let curCharacter;\r\n        let isBursting = false;\r\n        let skillCount = 0;\r\n        let untilMap = new Map<string[], number>();\r\n        let delayActions: string[] | undefined;    // delayActions\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (rotation.member != curCharacter) {\r\n                isBursting = false;\r\n                skillCount = 0;\r\n            }\r\n            if (rotation.member == character) {\r\n                let action = rotation.action;\r\n                if (action === 'Q') {\r\n                    isBursting = true; // \r\n                    if (CHARACTER_Q_TO_E_ARR.includes(character)) {\r\n                        action = 'E';\r\n                    }\r\n                } else if (action.startsWith('E')) {\r\n                    if (CHARACTER_E_FIRST_ARR.includes(character)) {\r\n                        skillCount++;\r\n                    }\r\n                }\r\n                if (untilMap && untilMap.size > 0) {\r\n                    for (const [key, value] of untilMap.entries()) {\r\n                        if (key.filter(untilAction => action.indexOf(untilAction) != -1).length > 0) {\r\n                            let untilCount = value;\r\n                            if (untilCount) {\r\n                                untilCount -= action.startsWith('N') ? action.length === 1 ? 1 : Number(action.substring(1, 2)) : 1;\r\n                                if (untilCount > 0) {\r\n                                    untilMap.set(key, untilCount);\r\n                                } else {\r\n                                    untilMap.clear();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (action.startsWith('E') || delayActions && delayActions.filter(delayAction => action.indexOf(delayAction) != -1).length) {\r\n                    const workMap = CHARACTER_E_UNTIL_MAP.get(character);\r\n                    if (workMap && workMap.size > 0) {\r\n                        untilMap = _.cloneDeep(workMap);\r\n                    } else if (CHARACTER_E_DELAY_MAP.has(character)) {\r\n                        if (action.startsWith('E')) {\r\n                            delayActions = _.cloneDeep(CHARACTER_E_DELAY_MAP.get(character));\r\n                            continue;\r\n                        }\r\n                        delayActions = undefined;\r\n                        action = 'E';\r\n                    }\r\n                    const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                    timeArr[myIndex] = setSkillParticleNumToArr(resultVal, character, action, constellation, team, rotationLength, rotationList, i, onFields, timeArr[myIndex], isBursting, skillCount > 1);\r\n                    resultMap.set(action, resultVal);\r\n                }\r\n            }\r\n            curCharacter = rotation.member;\r\n        }\r\n    }\r\n    const result: TERParticle[] = [];\r\n    const characterMaster = getCharacterMaster(character);\r\n    const element = characterMaster?. ?? '';\r\n    resultMap.forEach((value, key) => {\r\n        result.push([kind, key, element, value, []]);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getParticleByCharacterExtra(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle[] | undefined {\r\n    const func = CHARACTER_PARTICLE_EXTRA_FUNC[character];\r\n    if (func === undefined) return undefined;\r\n    const ret = func(character, constellation, team.members, rotationLength, rotationList, onFields);\r\n    if (ret === undefined) return undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (myIndex === -1) return undefined;\r\n    const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const result: TERParticle = [ret[0], ret[1], ret[2], particles, ret[6]];\r\n    if (ret[3]) {   // \r\n        particles[myIndex] += ret[3];\r\n    }\r\n    if (ret[4]) {   // \r\n        splitNumToArrByOnFieldRate(particles, ret[4], team, onFields);\r\n    }\r\n    if (ret[5].length) {   // \r\n        for (let i = 0; i < ret[5].length && i < particles.length; i++) {\r\n            particles[i] += ret[5][i];\r\n        }\r\n    }\r\n    return [result];\r\n}\r\n\r\nexport function getParticleByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    if (['', '', '', '', ''].includes(weapon)) {\r\n        const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        const ct = [12, 10.5, 9, 7.5, 6][weaponRefine - 1];\r\n        let triggerCnt = 1;\r\n        if (rotationList?.length) {\r\n            const rindexArr: number[] = [];\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character && (i === 0 || rotationList[i - 1].member != character)) {\r\n                    rindexArr.push(i);\r\n                }\r\n            }\r\n            const onField = onFields[memberNameArr.indexOf(character)];\r\n            triggerCnt = Math.min(Math.trunc(rotationLength / ct), rindexArr.length + Math.max(0, Math.trunc(rotationLength * onField / 100 / ct) - 1));\r\n            for (let i = 0; i < triggerCnt; i++) {\r\n                let nxtCharacter = character;\r\n                if (i < rindexArr.length && (rindexArr[i] + 1) < rotationList.length) {\r\n                    nxtCharacter = rotationList[rindexArr[i] + 1].member;\r\n                }\r\n                const toIndex = memberNameArr.indexOf(nxtCharacter);\r\n                particles[toIndex] += 3;\r\n            }\r\n        } else {\r\n            const toIndex = memberNameArr.indexOf(character);\r\n            particles[toIndex] = 3 * triggerCnt;\r\n        }\r\n        result = [RECHARGE_PARTICLE_FAVONIUS, weapon, '', particles, []];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleByResonance(\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined = undefined;\r\n    if (team.members.filter(member => member.name).length < 4) return result;\r\n    const electroCount = team.members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n    if (electroCount >= 2) { // \r\n        const messages = [\r\n            '100%5',\r\n        ];\r\n        let allParticle = 0; // \r\n        if (team.members.filter(member => ['', '', '', ''].includes(getCharacterMaster(member.name)?. ?? '--')).length) {\r\n            const ct = 5;\r\n            allParticle = 1 * Math.trunc(rotationLength / ct);\r\n        }\r\n        const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(particles, allParticle, team, onFields);\r\n        result = [RECHARGE_PARTICLE_RESONANCE, '', '', particles, messages];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n    teamMemberResult?: TTeamMemberResult,\r\n): TEREnergy[] {\r\n    const result: TEREnergy[] = [];\r\n    const func = CHARACTER_ENERGY_FUNC[character];\r\n    if (func === undefined) return result;\r\n    const ret = func(character, constellation, team.members, rotationLength, rotationList, teamMemberResult);\r\n    if (!ret?.length) return result;\r\n    const myIndex = team.members.map(member => member.name).indexOf(character);\r\n    if (myIndex === -1) return result;\r\n    ret.forEach(entry => {\r\n        const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        const workResult: TEREnergy = [entry[0], entry[1], energies, entry[6]];\r\n        if (entry[2]) {   // \r\n            energies[myIndex] += entry[2];\r\n        }\r\n        if (entry[3]) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                energies[i] += entry[3];\r\n            }\r\n        }\r\n        if (entry[4]) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                if (i != myIndex) {\r\n                    energies[i] += entry[4];\r\n                }\r\n            }\r\n        }\r\n        if (entry[5]?.length) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                energies[i] += entry[5][i];\r\n            }\r\n        }\r\n        result.push(workResult);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n): TEREnergy | undefined {\r\n    let result: TEREnergy | undefined = undefined;\r\n    const func = WEAPON_ENERGY_FUNC[weapon];\r\n    if (func === undefined) return result;\r\n    const members = team.members.map(member => member.name);\r\n    const ret = func(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    if (!ret?.length) return result;\r\n    const myIndex = members.indexOf(character);\r\n    if (myIndex === -1) return result;\r\n    const entry = ret;\r\n    const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    result = [entry[0], entry[1], energies, entry[6]];\r\n    if (entry[2]) {   // \r\n        energies[myIndex] += entry[2];\r\n    }\r\n    if (entry[3]) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            energies[i] += entry[3];\r\n        }\r\n    }\r\n    if (entry[4]) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            if (i != myIndex) {\r\n                energies[i] += entry[4];\r\n            }\r\n        }\r\n    }\r\n    if (entry[5]?.length) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            energies[i] += entry[5][i];\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByArtifact(\r\n    character: string,\r\n    artifactSet4: string,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n): TEREnergy | undefined {\r\n    const rechargeKind = RECHARGE_ENERGY_ARTIFACT;\r\n    const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const messages: string[] = [];\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (artifactSet4 === '') {\r\n        messages.push('226');\r\n        const otherEnergy = 6 * countQ(character, rotationList);\r\n        if (otherEnergy) {\r\n            for (let i = 0; i < energies.length; i++) {\r\n                if (i != myIndex) {\r\n                    energies[i] += otherEnergy;\r\n                }\r\n            }\r\n        }\r\n    } else if (artifactSet4 === '') {\r\n        messages.push('6');\r\n        const natlanCount = team.members.filter(member => (getCharacterDetail(member.name) as any)?.region == '').length;\r\n        if (natlanCount > 0) {\r\n            let myEnergy = 6 * Math.trunc(rotationLength / [-1, 18, 12, 9][natlanCount]);\r\n            if (team.members.filter(member => member.name === '').length > 0) {\r\n                myEnergy += 6 * Math.trunc(rotationLength / 14);\r\n            }\r\n            energies[myIndex] += myEnergy;\r\n        }\r\n    }\r\n    if (energies.filter(e => e > 0).length || messages.length) {\r\n        return [rechargeKind, artifactSet4, energies, messages];\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function getEnergyByAttack(\r\n    character: string,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n): TEREnergy | undefined {\r\n    let result: TEREnergy | undefined = undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    const characterDetail = getCharacterDetail(character);\r\n    if (characterDetail) {\r\n        const denominator = ATTACK_ENERGY_COUNT_OBJ[characterDetail.];\r\n        if (denominator) {\r\n            let hitCount = 0;\r\n            if (rotationList?.length) {\r\n                rotationList.filter(rotation => rotation.member == character).forEach(rotation => {\r\n                    let withC = false;\r\n                    if (rotation.action.startsWith('N')) {\r\n                        let workHitCount = 0;\r\n                        let dans = 1;\r\n                        if (rotation.action.length > 1) {\r\n                            dans = Number(rotation.action.substring(1, 2));\r\n                        }\r\n                        characterDetail...forEach((obj: any) => {\r\n                            if (obj. && obj..endsWith('')) {\r\n                                const workDan = obj..substring(0, 1);\r\n                                if (!isNaN(workDan) && dans <= Number(workDan)) {\r\n                                    if (obj.HIT) {\r\n                                        workHitCount += obj.HIT;\r\n                                    }\r\n                                }\r\n                            }\r\n                        })\r\n                        if (workHitCount < dans) {\r\n                            workHitCount = dans;\r\n                        }\r\n                        hitCount += workHitCount;\r\n                        if (rotation.action.endsWith('C')) {\r\n                            withC = true;\r\n                        }\r\n                    }\r\n                    if (rotation.action === 'C' || withC) {\r\n                        let workHitCount = 1;\r\n                        characterDetail...forEach((obj: any) => {\r\n                            if (obj. && obj. === '') {\r\n                                if (obj.HIT) {\r\n                                    workHitCount = obj.HIT;\r\n                                }\r\n                            }\r\n                        })\r\n                        hitCount += workHitCount;\r\n                    }\r\n                })\r\n            }\r\n            const energy = Math.trunc(hitCount / denominator);\r\n            if (energy) {\r\n                const rechargeKind = RECHARGE_ENERGY_ATTACK;\r\n                const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                const messages: string[] = [];\r\n                result = [rechargeKind, '', energies, messages];\r\n                energies[myIndex] += energy;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction setSkillParticleNumToArr(\r\n    arr: number[],\r\n    character: string,\r\n    action: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    onFields: number[],\r\n    time: number,\r\n    isBursting = false,\r\n    isSkilling = false,\r\n) {\r\n    const particleInfo = getParticleInfo(character, action, constellation, isBursting, isSkilling);\r\n    if (particleInfo) {\r\n        const rotation = rotationList[index];\r\n        if (rotation) {\r\n            const num = getParticleNumFromInfo(particleInfo, rotationLength - time);\r\n            const receiveType = getReceiveTypeFromInfo(particleInfo);\r\n            const duration = getDurationFromInfo(particleInfo);\r\n            if ([SP_SELF, SP_NEXT].includes(receiveType)) {\r\n                addNumToArr(arr, num, team, rotationList, index, receiveType);\r\n            } else if ([SP_LONG, SP_SHRT].includes(receiveType)) {\r\n                splitNumToArrByOnFieldRate(arr, num, team, onFields);\r\n            }\r\n            time += duration;\r\n        }\r\n    }\r\n    return time;\r\n}\r\n\r\nfunction addNumToArr(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    receiveType = SP_NEXT,\r\n) {\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const nxtRotation = (index + receiveType - SP_SELF) < rotationList.length ? rotationList[index + receiveType - SP_SELF] : rotationList[0];\r\n    if (nxtRotation.action === 'Q' && CHARACTER_Q_NOT_RECHARGEABLE.includes(nxtRotation.member)) {\r\n        num = 0;\r\n    }\r\n    arr[memberNameArr.indexOf(nxtRotation.member)] += num;\r\n}\r\n\r\nexport function splitNumToArrByOnFieldRate(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    onFields: number[],\r\n) {\r\n    const denominator = onFields.map(v => Math.pow(v / 100, 2)).reduce((p, c) => p + c, 0);\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if (team.members[i].name) {\r\n            const onField = onFields[i];\r\n            arr[i] += num * Math.pow(onField / 100, 2) / denominator;\r\n        }\r\n    }\r\n}\r\n","import { render } from \"./ERCalculator.vue?vue&type=template&id=7de6944e&scoped=true&ts=true\"\nimport script from \"./ERCalculator.vue?vue&type=script&lang=ts\"\nexport * from \"./ERCalculator.vue?vue&type=script&lang=ts\"\n\nimport \"./ERCalculator.vue?vue&type=style&index=0&id=7de6944e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7de6944e\"]])\n\nexport default __exports__","import { render } from \"./TeamRotation.vue?vue&type=template&id=b2eaab7c&scoped=true&ts=true\"\nimport script from \"./TeamRotation.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamRotation.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamRotation.vue?vue&type=style&index=0&id=b2eaab7c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b2eaab7c\"]])\n\nexport default __exports__"],"names":["REACTION_DMG_ARR","REACTION_DMG_ELEMENT_MAP","Map","setupReactionDmgElementMap","forEach","reactionDmg","reaction","replace","Object","keys","ELEMENTAL_REACTION_MASTER","element","reactionMaster","workArr","includes","set","","getLevelStr","ascension","level","ARRAY","getStatValueByLevel","statObj","myLevelStr","console","log","lowLevel","highLevel","length","lowValue","highValue","getPropertyValueByLevel","getValueByLevel","valueObj","Number","levelArr","map","s","i","calculateArtifactStatsMain","artifactStatsMain","mainstats","key","statWithRarity","stat","split","ARTIFACT_MAIN_MASTER","calculateArtifactSubStatByPriority","artifactStatsSub","prioritySubstats","priotritySubstatIndices","priotritySubstatValues","prioritySubstatCounts","totalCount","undefined","noPrioritySubstatArr","ARRAY","filter","noPriorityCount","Math","min","floor","max","substat","ARTIFACT_SUB_MASTER","star4Count","startsWith","multiplier","round","calculateArtifactStats","artifactDetailInput","artifactStats","","","","makeEvalableScript","formula","statsObj","damageResult","replaceMap","re","reRet","exec","has","value","arr","major","minor","entryArr","String","warn","getStatValue","result","replaceAll","evalFormula","opt_max","opt_min","script","_","eval","error","debug","calculateStats","statsInput","characterInput","conditionInput","optionInput","characterMaster","","","constellation","","weaponMaster","weaponAscension","","weaponLevel","","workStatsObj","TEMPLATE","name","conditionValues","enemyMaster","toStat","statAdjustments","ARRAY","statAdjustmentsEx","ARRAY","_Var","","_Var","_Var","elementalResonance","teamOption","miscOption","optionObj","conditionAdjustments","workValue","endsWith","my","validConditionValueArr","makeValidConditionValueArr","myDamageDetail","damageDetailMyCharacter","damageDetailMyWeapon","damageDetailMyArtifactSets","CHANGE_KIND_TALENT","myDetailObj","number","checkConditionMatches","DAMAGE_RESULT_TEMPLATE","calculateStatsTop","updateStatsWithCondition","my","","overwriteObject","workConditionAdjustments","statFormulaMap","CHANGE_KIND_STATUS","hasCondition","my","","my","indexOf","updateStatsWithConditionSub2","","","get","push","saveStatsObj","hpStatArr","defStatArr","atkStatArr","otherStatArr","_ARRAY","_ARRAY","ARRAY","ARRAY","ARRAY","Array","from","formulaStatArr","Set","sort","compareFunction","oldStatsObj","postfix","workStat","updateStatsWithConditionSub","fromStat","formulaKey","formulaArr","diffStats","updateStats","statValue","topValue","kind","maxFormula","minFormula","a","b","lowestArr","aIndex","bIndex","calculateElementalResonance","ELEMENTAL_RESONANCE_MASTER","master","","detailObj","matchRet","","","dendroOption","calculateDamageResult","vision","reactionResult","TEMPLATE","reactionMasterArr","dmgElementSet","add","selectList","selectEntry","selectedIndex","dmgElement","options","character","has","characterArr","","","","","entry","reactionObj","resultValue","calculate","optionValue","calculate","calculate","calculate","suffix","dmg","critRateKey","critRate","critDmgKey","critDmg","","isArray","splice","category","talentDetailArr","workObj","talentDetail","resultArr","calculateDamageFromDetail","n","sum","damageTakenArr","damageTaken","calculateDamageTaken","resScoreArr","calculateDamageResultLunarReaction","allMap","template","work","makeTDamageResultEntry","teamMembers","member","supporter","supporters","nonCrit","type","crit","expectedValue","checkboxList","required","numberList","conditionStr","myCondStr","myCondStrArr","resultSub","checkConditionMatchesSub","opkind","getConditionOpkind","conditionKeyValArr","conditionKey","conditionVal","isNumeric","RegExp","tempArr","tempVal","substring","tempValArr","fromVal","toVal","actualVal","NUMBER_CONDITION_VALUE_RE","test","elementalMastery","dmgBuff","opt_dmgElement","baseDmgUp","dmgUp","baseDmg","ELEMENTAL_REACTION_BASE_DAMAGE_MASTER","calculateEnemyRes","calculateEnemyDef","opt_ignoreDef","enemyLevel","calcIgnoreDef","calcDef","calculateRes","res","Infinity","statName","opt_element","myArr","isCalc","isCalc","isCalc","my","my","myHIT","my","talentChangeDetailObjArr","getChangeDetailObjArr","myConditionValuesAfter","delCondition","addCondition","newValue","","desc","myConditionInputAfter","validConditionValueArrAfter","damageDetail","","damageDetailObj","matchesBefore","matchesAfter","valueBefore","valueAfter","before","after","diff","new","","myTalentChangeDetailObjArr","my","myArr","myValue","myNewValueObj","JSON","parse","stringify","concat","tempStatsObj","entryObj","isValid","HIT","artifactSets","my","description","","DAMAGE_CATEGORY_ARRAY","myResult","calculateDamageFromDetailSubLunar","calculateDamageFromDetailSub","myResultWork","temp","dmgUpStatArr","dmgUpStat","isUseReference","buffArr","","","my","my","my","buff","my","my","my","my","myResult","myResult","workKind","em","emBonus","otherBonus","changeKind","nameArr","ALL_ELEMENTS","damage","def","dmgReduction","calculateArtifactScore","scoringStats","scoringStat","magnification","srcStat","srcStatValue","calculatedSupporter","async","setupTeamOptionSupporter","build","getDefaultCharacterInput","getDefaultArtifactDetailInput","getDefaultConditionInput","getDefaultStatsInput","getDefaultDamageResultInput","optionDetails1","optionDetails2","conditionMap","exclusionMap","getCharacterMasterDetail","builddata","loadRecommendation","makeDamageDetailObjArrObjCharacter","makeDamageDetailObjArrObjWeapon","makeDamageDetailObjArrObjArtifactSets","setupConditionValues","","updateNumberConditionValues","myCharacterMaster","teamOptions","TEAM_OPTION_MASTER_LIST","makeSupporterCondition","makeDamageDetailObjArr","makeConditionExclusionMapFromStr","characterOptions","","weaponOptions","elementalReactionArr","artifactSetOptions","artifactSetMasters","","damageDetailObjArr","makeTeamOptionDetailObjArr","condition","getChangeKind","calculateConditionAdjustments","stats","damageDetailObjs","refStats","kinds","elem","tempKind","TEAM_OPTION_NOT_UNIQUE_ARR","calculateTeamStatsAdjustments","topStats","workInput","optionDetails","calculateMiscStatsAdjustments","teamConditionValueArr","getCritFromResultEntry","getDamageResultArr","rotationDamageEntry","calculateRotationDamageEntry","index","list","reactions","dmgResultEntry","count","counts","plainDmg","calculateReactedDamage","workDmg","calculateRotationTotalDamage","rotationDamageArr","dmgIndex","elementalReaction","reactionTimes","reactionKey","getAmplifyingReactionElement","reactionElement","isFinite","dst","src","srcKeys","basename","path","pop","shift","i18n","createI18n","legacy","locale","fallbackLocale","isGlobal","ARRAY","ARRAY","ARRAY","ARRAY","_ARRAY","_ARRAY","ARRAY_MAP","STAT_PERCENT_LIST","makeStatusTemplate","makeEnemyStatusTemplate","_ARRAY","_ARRAY","_ARRAY","_ARRAY","_ARRAY","ARRAY","TEMPLATE","_","_","_","_","","","","","","","","","","","","","","","","","","","","","","","","","","","ALL","","","","","","","","","","ARTIFACT_SET_MASTER_DUMMY","","image","IMG_SRC_DUMMY","CHARACTER_INPUT_TEMPLATE","","","","weapon","","damageDetailElementalResonance","buildname","recommendationSelectedIndex","removeDisabled","ARTIFACT_TEMPLATE","rarity","setname","cat_id","mainStat","mainStatValue","subStats","ARTIFACT_DETAIL_INPUT_TEMPLATE","","NUMBER_OF_PRIORITY_SUBSTATS","","GENSEN_MASTER_LIST","values","","Disabled","artifact_list","CONDITION_INPUT_TEMPLATE","STATS_INPUT_TEMPLATE","ENEMY_MASTER_LIST","getDefaultOptionInput","OPTION_INPUT_TEMPLATE","supporterBuildname","parseLevelStr","levelStr","makeDefaultBuildname","makeBuildStorageKey","makeOptionStorageKey","makeArtifactScoringStorageKey","makeRecommendationList","opt_buildData","isSavable","overwrite","storageKeyArr","localStorage","buildObj","key2","optionsObj","key3","artifactScoringObj","artifactScoring","key4","supporterBuildnameObj","obj","myRecommendation","subkey","artifactRarerityArrArr","artifactRarerity4Num","artifactSet1","artifactSet2","ARTIFACT_SET_MASTER","makeArtifactSetAbbrev","statusName","RECOMMEND_ABBREV_MAP","abbrRe","abbr","makePrioritySubstatValueList","opt_substat","valueArr","makeEasyInputSubstatValueList","weaponType","WEAPON_MASTER","weaponKey","getWeaponMasterDetail","prioritySubstatsDisabled","toKey","newArtifactSets","newArtifactSetMasters","artifactSet","newArtifactStatsMain","newPriotitySubstat","newPriotitySubstatValue","newPriotitySubstatCount","subkey1","subkey2","subkey3","substatValue","substatCount","PROPERTY_MAP","astarIndex","workCharacter","CHARACTER_MASTER","ARTIFACT_KEYS","newList","makeSavedata","resultObj","makeOptionsSavedata","myTalentDetail","myTalentLevelArr","myDefaultKind","myDefaultElement","myInputCategory","myStatusChangeDetailObjArr","workCategory","workTalentLevelArr","myLevel","cond","","","","","makeDamageDetailObjArrObjElementalResonance","ELEMENTAL_RESONANCE_MASTER_LIST","makeDetailObj","defaultKind","defaultElement","inputCategory","opt_condition","my","makeFormulaTemplate","my","my","talentDataObj","statusChangeDetailObjArr","isChanged","info","detailObjArr","exclusionStr","workStr","conditionStrArr","makeConditionExclusionMapFromStrSub","exclusion","pushToMapValueArray","conditionObj","step","initial","prefix","condValueArr","re2","rangeStart","rangeEnd","re2Ret","addDecimal","e","workConditionValues","workCheckboxList","workSelectList","workNumberList","makeConditionMapFromCharacterInput","makeExclusionMapFromCharacterInput","numberObj","conditionValue","exclusions","initialValue","minValue","checked","","vStat","trunc","numberEntryArr","maxValue","oldValue","getDecimalLength","multiplyDecimal","value1","value2","decimalLength","intValue1","intValue2","pow","k","symbols","escapedSymbols","join","item","getMaxConstellation","getMaxTalentLevel","talentObj","setupTeamOption","workDetails1","workDetails2","workMap1","workMap2","displayName","setupMiscOption","OPTION1_MASTER_LIST","OPTION2_MASTER_LIST","masterList","updateConditionsByTeam","myVision","regionCountMap","totalEnergyCost","visionCountMap","characterDetail","region","","size","pyroCount","hydroCount","electroCount","cryoCount","updateOptionsElementalResonanceByTeam","newElementResonance","resonanceElementArr","restMemberElementArr","currentElementArr","resonance","makeSharedata","savedata","sharedataArr","myBasename","ARTIFACT_STAT_JA_EN_ABBREV_MAP","match","openTwitter","text","url","opt_hashtags","opt_via","baseUrl","params","URLSearchParams","append","query","toString","shareUrl","window","open","shareByTwitter","sharedata","encoded","encodeURI","pushBuildinfoToSession","teammembers","sessionStorage","setItem","popBuildinfoFromSession","getItem","removeItem","getIconUrl","icon_url","import","CHARACTER_MASTER_LIST","","SWORD_MASTER","","CLAYMORE_MASTER","","POLEARM_MASTER","","BOW_MASTER","","CATALYST_MASTER","typedMaster","SWORD_MASTER_LIST","CLAYMORE_MASTER_LIST","POLEARM_MASTER_LIST","BOW_MASTER_LIST","CATALYST_MASTER_LIST","WEAPON_MASTER_LIST","ARTIFACT_SET_MASTER_LIST","ENEMY_MASTER","TEAM_OPTION_MASTER","OPTION1_MASTER","OPTION2_MASTER","CHARACTER_MASTER_DETAIL_MAP","fetch","then","resp","json","WEAPON_IMG_SRC","WEAPON_MASTER_DETAIL_MAP","opt_weaponType","weaponTypeArr","ELEMENT_COLOR_CLASS","","","","","","","","ELEMENT_BG_COLOR_CLASS","ELEMENT_IMG_SRC","STAR_BACKGROUND_IMAGE_CLASS","RECOMMEND_ABBREV_EN_MAP","ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP","gensen","ARTIFACT_CAT_NAMES","getArtifactIconUrl","opt_cat_id","ARTIFACT_SCORE_FORMULA_TEMPLATE","SP_SELF","SP_NEXT","SP_LONG","SP_SHRT","C0","C1","C2","C4","C6","CT_AFTER_DURATION","PARTICLE_GENERATE_1","PARTICLE_GENERATE_2","PARTICLE_GENERATE_3","PARTICLE_GENERATE_4","PARTICLE_GENERATE_5","PARTICLE_GENERATE_6","PARTICLE_MASTER","pentry","pinfo","receiveTypeArr","CHARACTER_Q_TO_E_ARR","CHARACTER_E_CT_RESET_BY_Q_ARR","CHARACTER_E_UNTIL_MAP","CHARACTER_E_DELAY_MAP","CHARACTER_E_FIRST_ARR","CHARACTER_Q_NOT_RECHARGEABLE","getElementalSkillActions","particleMaster","action","getParticleInfo","isBursting","isSkilling","keyArr","start","getParticleNumFromInfo","particleInfo","leftTime","receiveType","getReceiveTypeFromInfo","particleCooltime","getParticleCooltimeFromInfo","generateCount","getParticleGenerateCountFromInfo","duration","getDurationFromInfo","ceil","getCooltimeFromInfo","getCooltimeTypeFromInfo","_hoisted_1","class","_hoisted_2","_hoisted_3","style","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","render","_ctx","_cache","$props","$setup","$data","$options","_component_ArtifactSetSelect","_resolveComponent","_openBlock","_createElementBlock","control","_createElementVNode","onClick","$event","isEditing","artifactImgSrc","alt","copiedArtifact","artifactIconOnClick","_toDisplayString","_withDirectives","onChange","args","_Fragment","_renderList","mainStatOptions","option","_vModelSelect","statStep","_vModelText","displayStatValue","starOnChange","dummy","subStat","subStatOptions","disabled","subStatOptionDisabled","selectOnClick","score","_createCommentVNode","selected","_createVNode","visible","artifact","updateArtifactSet","_vShow","isListShow","defineComponent","props","id","Boolean","components","ArtifactSetSelect","emits","setup","context","percent","CompositionFunction","reactive","ref","isSelected","computed","MAINSTAT_CAT_ARR","emit","onLoad","watch","newVal","oldVal","__exports__","artifactSetEffects","filteredList","_normalizeClass","bgImageClass","selectedClass","$emit","artifactSetMastersRea","elementList","elementCheckList","checkListOnChange","_vModelCheckbox","elementSrc","weaponList","weaponCheckList","weaponSrc","characterOnClick","visionSrc","selectionNumber","characters","checkList","elementChecked","weaponChecked","blankIndex","t","te","useI18n","useScope","localeList","setI18nLanguage","global","loadLocaleMessages","document","querySelector","setAttribute","messages","setLocaleMessage","nextTick","hasPercent","displayStatName","opt_s","myPercent","p","displayStatAbbrev","targetValue","event","target","HTMLInputElement","HTMLSelectElement","displayOptionName","onDblclick","characterOnDblclick","characterImgClass","characterImgSrc","visionImgSrc","tags","tagColorClass","replacements","replaceImgSrc","displayStat","showEquipment","imgWeaponSrc","imgArtifactSetSrc","viewable","members","watchCount","getBuilddataFromStorage","weaponName","replIndex","artifactSetName","toLowerCase","locate","confirm","colspan","_component_CharacterSelect","_component_MemberItem","characterSelectMode","_createBlock","updateReplacements","updateCharacters","workTeam","minlength","maxlength","placeholder","characterSelectModeOnClick","selectedMemberName","MEMBER_TAG_LIST","tag","tagSelectedClass","tagOnClick","memberSelectedClass","memberOnClick","selectedMemberBuildname","buildnameOnChange","buildnames","workTeamTags","teamTagSelected","teamTagOnClick","txtTeamTags","txtTeamTagsOnChange","cancelOnClick","okOnClick","CharacterSelect","MemberItem","team","teamTags","rotation","rotationDescription","selectedMemberId","replacementIndex","duplicateTeam","setupTxtTeamTags","newCharacters","workBuildnames","getBuildStorageKeys","getBuildnameFromStorageKey","defaultBuildname","others","editable","editOnClick","resonanceElementImgSrcs","memberStats","displayRes","resKey","resBgClass","displayTags","jumpToRotation","requied","constellations","memberResults","initializeRes","watchFunc","onMounted","getElementalResonance","calculateMemberResult","Promise","all","results","calculateStat","teamAdjustments","memberResult","dmgElements","artifactSet4s","","constellationObj","countHy","countCr","workRes","_component_draggable","_component_ERCalculator","bgColorClass","normalAttackIconSrc","listActionOnClick","elementalSkillIconSrc","elementalBurstIconSrc","removeMode","selectedAction","getActionDetail","selectedActionOnClick","actionDisplay","rotationList","handle","delay","animation","rotationListOnChange","_withCtx","previousRotation","getCharacterMaster","colorClass","selectedActionClass","rotationActionOnClick","removeItemOnClick","rows","updateRotation","_createStaticVNode","teamMemberResult","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","for","_hoisted_50","_hoisted_51","_hoisted_52","_createTextVNode","rotationLength","inputOnChange","calculatorInput","energyCost","weaponImgSrc","currentWeapon","weaponRefine","refine","energyRechargeGls","onField","inputRowParticleEnemy","row","rowIndex","bgColorClass2","currentValues","reduce","c","columnIndex","inputRowParticle","rowImgSrc1","rowImgSrc1Class","rowImgSrc2","triggerName","particleRecharges","inputRowEnergy","burstCounts","replaceWeapons","weaponIndex","replaceWeaponImgSrc","replaceWeaponClass","replaceWeaponOnClick","combatLength","isOpenSupplyFromEnemy","supplyFromEnemy","message","isShowUsage","CHARACTER_E_DECREMENT_IN_BURST","entries","untilMap","actionName","delayArr","RECHARGE_ENERGY_SKILL","RECHARGE_ENERGY_BURST","RECHARGE_ENERGY_PASSIVE","RECHARGE_ENERGY_CONSTELLATION","RECHARGE_ENERGY_ATTACK","RECHARGE_ENERGY_WEAPON","RECHARGE_ENERGY_ARTIFACT","RECHARGE_PARTICLE_SKILL","RECHARGE_PARTICLE_PASSIVE","RECHARGE_PARTICLE_CONSTELLATION","RECHARGE_PARTICLE_FAVONIUS","RECHARGE_PARTICLE_RESONANCE","RECHARGE_PARTICLE_ENEMY","ATTACK_ENERGY_COUNT_OBJ","NORMAL_ATTACK_LENGTH_OBJ","ACTION_LENGTH_MAP","isRechargeKindEnergy","rechargeKind","isRechargeKindParticle","countN","isQing","countC","countP","countE","untilAction","untilCount","clear","workMap","countQ","getOnFieldRate","NUMBER_OF_MEMBERS","memberNameArr","danArr","getNormalAttackDan","lengthList","preRotation","isNCPIgnoring","actionLength1","actionLength2","maxDan","dan","unitLength","j","multiple","lengthSum","sumVal","maxVal","memberNum","rate","getMemberResult","getDefaultMemberResult","memberArr","getCharacterDetail","","getCharacterInputValue","getStatsInputValue","CHARACTER_ENERGY_FUNC","()","constellationLevel","myEnergy","allEnergy","otherEnergy","herEnergies","()","skillLevel","er","messages2","burstLevel","somebodyEnergy","()","","","","","","nCount","","","","","","","","","","","","","","","","","qCount","doBreak","herIndex","herCm","","","","","","unit","unit2","","","geoCount","","","","","","","","","","","","","","","","","","startIndex","ncpCountMap","rechargeCount","","visionCount","","CHARACTER_PARTICLE_EXTRA_FUNC","onFields","myParticle","allParticle","","","herParticles","triggerCnt","ct","rindexArr","isRecorded","nxtCharacter","toIndex","WEAPON_ENERGY_FUNC","","","","weaponEnergySub_","","","","","","","weaponEnergySub_","","","","","isInCt","getParticleByCharacter","resultMap","myIndex","eCount","cCount","num","resultVal","splitNumToArrByOnFieldRate","ousiaLength","isOusia","timeArr","curCharacter","delayActions","skillCount","delayAction","setSkillParticleNumToArr","getParticleByCharacterExtra","func","ret","particles","getParticleByWeapon","getParticleByResonance","getEnergyByCharacter","energies","workResult","getEnergyByWeapon","getEnergyByArtifact","artifactSet4","natlanCount","getEnergyByAttack","denominator","hitCount","withC","workHitCount","dans","workDan","isNaN","energy","time","addNumToArr","nxtRotation","v","DEFAULT_ROTATION_LENGTH","DEFAULT_COMBAT_LENGTH","REPLACE_WEAPON_MAP","setupCharacterDetailMap","updateRotationLength","setupInput","getConstellation","eLength","qLength","memberIndex","","ect","qct","newLength","updateOnFields","setupInputRows","deep","newInput","initialWeapon","pushInputRowParticle","inputRows","newMessages","particle","initialValues","pushInputRowEnergy","newInputRowPacticle1","newInputRowPacticle2","newInputRowEnergy","newInputRowResonance","newinputRowParticleEnemy","energyByCharacter","particleByWeapon","energyByWeapon","energyByArtifact","energyByAttack","particleByResonance","myElement","input","burstCount","particleEnergy","characterMater","getWeaponMaster","artifactSetMater","resetInput","inputRow","draggable","ERCalculator","normalAttackActions","elementalSkillActions","actionId","selectedActionId","initializeTeam","isCWith","CHARGED_WITH_NORMAL_WEAPON","CHARGED_WITH_NORMAL_CHARACTER","CHARGED_ONLY_CHARACTER","isSameMember","actions","actionArr","actionKey"],"sourceRoot":""}