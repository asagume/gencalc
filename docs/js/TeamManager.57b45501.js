(function(){"use strict";var e={7583:function(e,t,n){var a=n(9242),i=n(3396),o=n(7139);const l=e=>((0,i.dD)("data-v-9714bb3c"),e=e(),(0,i.Cn)(),e),r={class:"base-container"},s=l((()=>(0,i._)("div",{class:"header"},[(0,i.Uk)("   "),(0,i._)("a",{href:"./"},"げんかるく")],-1))),c={class:"pane1"},u={class:"display-stat-select"},m=["value"],d={class:"number-of-teams"},f=["min"],b={class:"data-control"},p=["disabled"],v={class:"pane2"},h=["id"],g={class:"pane3"},y=l((()=>(0,i._)("hr",null,null,-1))),O=l((()=>(0,i._)("h3",null,"ROTATION",-1))),k={id:"team-rotation"},T=(0,i.uE)('<div class="pane4" data-v-9714bb3c></div><div class="footer" data-v-9714bb3c><hr data-v-9714bb3c><h2 data-v-9714bb3c>チーム編成 Ver.0.6.0</h2><ul class="usage" data-v-9714bb3c><li data-v-9714bb3c>右上の◆のドラッグ＆ドロップでチームの並べ替えができます。</li></ul><dl class="history" data-v-9714bb3c><dt data-v-9714bb3c>0.5.0</dt><dd data-v-9714bb3c> ローテーションが保存されるようになりました。チームデータの一部として記憶します。 </dd></dl><p data-v-9714bb3c><a href="./TeamExample.html" data-v-9714bb3c>EXAMPLE</a></p><p data-v-9714bb3c><a href="./" data-v-9714bb3c>げんかるく - 原神ダメージシミュレーター</a>   <a href="./TeamOptionList.html" data-v-9714bb3c>強化・弱体効果一覧</a></p></div>',2);function E(e,t,n,l,E,_){const C=(0,i.up)("TeamItem"),w=(0,i.up)("draggable"),I=(0,i.up)("TeamEditorModal"),S=(0,i.up)("TeamRotation");return(0,i.wg)(),(0,i.iD)("div",r,[s,(0,i._)("div",c,[(0,i._)("fieldset",null,[(0,i._)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.DISPLAY_STAT_LIST,(n=>((0,i.wg)(),(0,i.iD)("label",{class:"display-stat",key:n[1]},[(0,i.wy)((0,i._)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":t[0]||(t[0]=t=>e.displayStat=t),value:n[0]},null,8,m),[[a.G2,e.displayStat]]),(0,i._)("span",null,(0,o.zw)(n[1]),1)])))),128))]),(0,i._)("label",d,[(0,i.Uk)(" Number of teams "),(0,i.wy)((0,i._)("input",{type:"number",min:e.NUMBER_OF_TEAMS,max:999,"onUpdate:modelValue":t[1]||(t[1]=t=>e.numberOfTeams=t),onChange:t[2]||(t[2]=(...t)=>e.numberOfTeamsOnChange&&e.numberOfTeamsOnChange(...t))},null,40,f),[[a.nr,e.numberOfTeams]])]),(0,i._)("div",b,[(0,i._)("button",{type:"button",disabled:e.saveDisabled,onClick:t[3]||(t[3]=(...t)=>e.saveOnClick&&e.saveOnClick(...t))}," Save ",8,p),(0,i._)("button",{type:"button",onClick:t[4]||(t[4]=(...t)=>e.loadOnClick&&e.loadOnClick(...t))}," Load "),(0,i._)("button",{type:"button",onClick:t[5]||(t[5]=(...t)=>e.clearOnClick&&e.clearOnClick(...t))}," Clear ")])])]),(0,i._)("div",v,[(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(w,{list:e.teams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,i.w5)((({element:t})=>[(0,i._)("div",{style:{display:"inline-block"},id:"team-"+t.id},[(0,i.Wm)(C,{team:t,selected:e.teamSelected(t.id),"display-stat":e.displayStat,"display-res":e.displayRes,constellations:e.constellations,editable:!0,"show-equipment":!0,onClick:n=>e.teamOnClick(t.id),"onClick:edit":e.editOnClick,"onClick:jumpToRotation":e.jumpToRotation,"onUpdate:memberResult":e.updateMemberResult},null,8,["team","selected","display-stat","display-res","constellations","onClick","onClick:edit","onClick:jumpToRotation","onUpdate:memberResult"])],8,h)])),_:1},8,["list"])],512),[[a.F8,!e.teamEditorVisible]]),(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(I,{visible:e.teamEditorVisible,team:e.forcusedTeam,"onClick:cancel":t[6]||(t[6]=t=>e.teamEditorVisible=!1),"onClick:ok":e.updateTeam},null,8,["visible","team","onClick:ok"])],512),[[a.F8,e.teamEditorVisible]])]),(0,i._)("div",g,[y,O,(0,i._)("div",k,[e.forcusedTeam?((0,i.wg)(),(0,i.j4)(S,{key:0,team:e.forcusedTeam,"team-member-result":e.teamMemberResult,constellations:e.constellations,"onUpdate:rotation":e.updateRotation,"onClick:jumpToTeam":e.jumpToTeam},null,8,["team","team-member-result","constellations","onUpdate:rotation","onClick:jumpToTeam"])):(0,i.kq)("",!0)])]),T])}n(7658);var _=n(4806),C=n.n(_),w=n(6983),I=n.n(w),S=n(4870),j=n(6552),R=n(9541),D=n(6861),V=n(4989),N=n(519),M=n(5983),H=(0,i.aZ)({name:"TeamManager",components:{draggable:I(),TeamItem:D.Z,TeamEditorModal:V.Z,TeamRotation:N.Z},setup(){const{displayName:e}=(0,j.Z)(),t=(0,S.iH)(!1),n=[["","None"],["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],a=(0,S.iH)(R.g6),o=(0,S.qj)([]);for(let i=0;i<a.value;i++)o.push((0,R.un)(i));const l=(0,S.qj)({}),r=(0,S.iH)(""),s=(0,S.iH)(!0),c=(0,S.iH)(0),u=(0,S.iH)(""),m=(0,S.qj)({});(0,i.bv)((()=>{y()}));const d=(0,i.Fl)((()=>o.filter((e=>e.id==c.value))[0])),f=(0,i.Fl)((()=>(0,R.Jc)(o))),b=(0,i.Fl)((()=>f.value==u.value)),p=e=>e==c.value,v=(0,i.Fl)((()=>{let e={};if(c.value in l)e=l[c.value];else if(-1!=c.value){const t=o.filter((e=>e.id==c.value))[0];t.members.forEach((t=>{e&&(e[t.id]=R.Db)}))}return e})),h=()=>{if(a.value>o.length)for(let e=o.length;e<a.value;e++)o.push((0,R.un)(e));else a.value<o.length&&(c.value>a.value&&(c.value=0),o.splice(a.value))},g=()=>{localStorage.setItem("teams",f.value),u.value=f.value},y=()=>{const e=localStorage.getItem("キャラクター所持状況");if(e){const t={},n=JSON.parse(e);Object.keys(n).forEach((e=>{const a=Number(n[e]);Number.isNaN(a)&&(t[e]=a)})),(0,M.fX)(m,t)}const t=localStorage.getItem("teams"),n=[];for(let i=0;i<a.value;i++)n.push((0,R.un)(i));if(t){const e=JSON.parse(t);(0,R.FF)(n,e,!0),a.value=n.length,u.value=t}o.splice(0,o.length,...n)},O=()=>{o.forEach((e=>{(0,R.mt)(e)}))},k=e=>{c.value=e},T=e=>{e==c.value?t.value=!0:c.value=e},E=e=>{if(t.value=!1,c.value<0)return;const n=o.filter((e=>e.id==c.value))[0];if(n){n.name=e.name;for(let t=0;t<e.members.length;t++){const a=e.members[t],i=n.members[t];i.name==a.name&&i.buildname==e.members[t].buildname||(i.name=e.members[t].name,i.buildname=e.members[t].buildname,i.builddata=i.buildname?(0,R.XY)(i.name,i.buildname):void 0),C().isEqual(i.tags,a.tags)||i.tags.splice(0,i.tags.length,...a.tags),C().isEqual(i.replacements,a.replacements)||i.replacements.splice(0,i.replacements.length,...a.replacements)}n.description=e.description,C().isEqual(n.rotation,e.rotation)||n.rotation.splice(0,n.rotation.length,...e.rotation)}},_=(e,t)=>{if(-1!=c.value){const n=o.filter((e=>e.id==c.value))[0];n&&(n.rotation.splice(0,n.rotation.length,...e),n.rotationDescription=t)}},w=()=>{document.getElementById("team-rotation")?.scrollIntoView({behavior:"smooth"})},I=()=>{-1!=c.value&&document.getElementById("team-"+c.value)?.scrollIntoView({behavior:"smooth"})},D=(e,t)=>{l[e]=t,e==c.value&&v.value};return{displayName:e,DISPLAY_STAT_LIST:n,NUMBER_OF_TEAMS:R.g6,numberOfTeams:a,displayStat:r,displayRes:s,teams:o,constellations:m,teamEditorVisible:t,teamSelected:p,forcusedTeam:d,saveDisabled:b,teamMemberResult:v,numberOfTeamsOnChange:h,saveOnClick:g,loadOnClick:y,clearOnClick:O,teamOnClick:k,editOnClick:T,updateTeam:E,updateRotation:_,jumpToRotation:w,jumpToTeam:I,updateMemberResult:D}}}),F=n(89);const U=(0,F.Z)(H,[["render",E],["__scopeId","data-v-9714bb3c"]]);var P=U,A=n(2540);async function L(){(0,a.ri)(P,{}).use(A.Z).mount("#app")}L()},9541:function(e,t,n){n.d(t,{$C:function(){return d},Db:function(){return _},FF:function(){return D},FP:function(){return f},Jc:function(){return R},R7:function(){return C},VN:function(){return y},XY:function(){return T},_t:function(){return g},bV:function(){return h},br:function(){return E},c1:function(){return k},g6:function(){return u},mt:function(){return j},qQ:function(){return v},sE:function(){return O},un:function(){return I}});n(7658);var a=n(8710),i=n(5983),o=n(2986),l=n(6125),r=n(9098),s=n(4806),c=n.n(s);const u=10,m=4,d=["片手剣","長柄武器"],f=["鹿野院平蔵","リオセスリ"];let b=0;const p=new Map;function v(e){let t;return e&&e in l.bw&&(t=l.bw[e]),t}async function h(){const e=[];for(const t of Object.keys(l.bw))e.push((0,l.tm)(t).then((e=>{p.set(t,e)})));await Promise.all(e)}function g(e){return p.get(e)}function y(e,t){let n;if(e&&t&&e in l.Nd){const a=l.Nd[e];t in a&&(n=a[t])}return n}function O(e){const t=e.split("_"),n=t[1];let a;return t.splice(0,2),a=t.length>0?t.join("_"):(0,o.K1)(n),a}function k(e){return Object.keys(localStorage).filter((t=>t.startsWith((0,o.R4)(e))))}function T(e,t){let n;const a=(0,o.R4)(e,t),i=localStorage.getItem(a);return i&&(n=JSON.parse(i)),n}const E=async(e,t)=>{const n=c().cloneDeep(o.Hd),r=c().cloneDeep(o.HN),s=c().cloneDeep(o.NY),u=c().cloneDeep(o.wX),m=c().cloneDeep(o.HO),d=c().cloneDeep(o.US),f={characterInput:n,artifactDetailInput:r,conditionInput:s,optionInput:u,statsInput:m,damageResult:d};if(!e.name)return f;n.character=e.name,n.characterMaster=await(0,l.tm)(n.character);const b=e.builddata;if(!b)return f;await(0,o.pS)(n,r,s,u,b),(0,o.ge)(n),(0,o.Cl)(n),(0,o.Vk)(n),(0,o.Hk)(s,n,u),(0,a.fk)(r.聖遺物ステータスメイン効果,r.聖遺物メイン効果),(0,a.Zr)(r),s.checkboxList.forEach((e=>{s.conditionValues[e.name]=!1})),s.selectList.forEach((e=>{s.conditionValues[e.name]=0}));const p=n.characterMaster.元素,v={};if(t.members&&t.members.filter((e=>e.name)).forEach((e=>{const t=l.bw[e.name].元素;t in v?v[t]++:v[t]=1})),["千岩古剣","千岩長槍"].includes(n.weapon)){if(t.members){let e=0;for(const n of t.members.filter((e=>e))){const t=await(0,l.tm)(n.name);t.region&&["璃月港"].includes(t.region)&&e++}const a="["+n.weapon+"]璃月キャラ1人毎に攻撃力と会心率+";s.conditionValues[a]=e}}else if(["惡王丸","斬波のひれ長","曚雲の月"].includes(n.weapon)&&t.members){let e=0;for(const n of t.members.filter((e=>e))){const t=await(0,l.tm)(n.name);"元素エネルギー"in t.元素爆発&&(e+=t.元素爆発.元素エネルギー)}e&&(s.conditionValues["チーム全員の元素エネルギー上限の合計"]=e)}const h=v[p]-1,g=Object.keys(v).filter((e=>e!=p)),y=g.length?g.map((e=>v[e])).reduce(((e,t)=>e+t)):0;if(s.conditionValues["[チーム]同じ元素のキャラクター"]=h,s.conditionValues["[チーム]異なる元素のキャラクター"]=y,s.conditionValues["[チーム]キャラクターの元素タイプ"]=Object.keys(v).length-1,a.vV.forEach((e=>{const t="[チーム]"+e+"元素キャラクター";s.conditionValues[t]=v[e]??0;const n="[チーム]"+e+"元素キャラクター(自分以外)";s.conditionValues[n]=(v[e]??0)-(e==p?1:0)})),C(t)){const e={};C(t).filter((e=>["炎元素共鳴","水元素共鳴","草元素共鳴","元素共鳴なし"].includes(e))).forEach((t=>{if(u.elementalResonance.conditionValues[t]=!0,"詳細"in l._9[t]){const n=l._9[t].詳細;if(n)for(const t of n)"種類"in t&&"数値"in t&&(t.種類 in e?e[t.種類]+=t.数値:e[t.種類]=t.数値)}})),(0,i.fX)(u.elementalResonance.conditionAdjustments,e)}return(0,a.i6)(m,n,r,s,u),(0,a.V1)(d,n,s,m),{characterInput:n,artifactDetailInput:r,conditionInput:s,optionInput:u,statsInput:m,damageResult:d}},_={characterInput:o.Hd,artifactDetailInput:o.HN,conditionInput:o.NY,optionInput:o.wX,statsInput:o.HO,damageResult:o.US},C=e=>{const t=[],n={},a=e.members.filter((e=>e.name));return 4==a.length&&(a.forEach((e=>{const t=v(e.name);t&&(t.元素 in n?n[t.元素]++:n[t.元素]=1)})),4==Object.keys(n).length?t.push("元素共鳴なし"):Object.keys(n).forEach((e=>{n[e]>=2&&t.push(e+"元素共鳴")}))),t};function w(e){return{id:e,name:"",buildname:void 0,builddata:void 0,tags:[],replacements:[]}}function I(e){const t={id:e,name:"チーム"+(e+1),members:[],description:"",rotation:[],rotationDescription:""};for(let n=0;n<m;n++)t.members.push(w(b++));return t}function S(e){e.name="",e.buildname=void 0,e.builddata=void 0,e.tags=[],e.replacements=[]}function j(e){e.name="チーム"+(e.id+1),e.members.forEach((e=>{S(e)}))}function R(e){const t=c().cloneDeep(e);return t.forEach((e=>{e.id=0,e.members.forEach((e=>{e.id=0,e.builddata=void 0})),e.rotation?.length&&e.rotation.forEach((e=>{e.id=0}))})),JSON.stringify(t)}function D(e,t,n=!1){let a=0;for(let i=0;i<t.length;i++){const o=t[i];let l=e[i];l||(l=I(i),e.push(l)),l.name=o.name;for(let e=0;e<l.members.length;e++)if(o.members?.length){const t=o.members[e];t&&(l.members[e].name=t.name,n?(l.members[e].buildname=t.buildname,l.members[e].builddata=t.buildname?T(t.name,t.buildname):void 0):(l.members[e].buildname=void 0,l.members[e].builddata=void 0),l.members[e].tags=t.tags??[],l.members[e].replacements=t.replacements??[])}l.description=o.description??"",o.rotation?.length&&(l.rotation=c().cloneDeep(o.rotation),l.rotation.forEach((e=>{if(e.id=a++,e.action.startsWith("E")){const t=(0,r.H0)(e.member);t.includes(e.action)||(e.action=t[0])}}))),l.rotationDescription=l.rotationDescription??""}e.length>t.length&&e.length>=u&&e.splice(t.length)}}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,o){if(!a){var l=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],o=e[u][2];for(var r=!0,s=0;s<a.length;s++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(r=!1,o<l&&(l=o));if(r){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.j=299}(),function(){var e={299:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,l=a[0],r=a[1],s=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(s)var u=s(n)}for(t&&t(a);c<l.length;c++)o=l[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},a=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998,64],(function(){return n(7583)}));a=n.O(a)})();
//# sourceMappingURL=TeamManager.57b45501.js.map