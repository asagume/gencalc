{"version":3,"file":"js/EnkaNetwork.cf33203d.js","mappings":"qDAYM,SAAUA,EAAcC,GAC1B,MAAMC,EAASC,OAAOC,UAAUC,SAASC,KAAKL,GAC9C,MAAkB,oBAAXC,CACV,CAGK,SAAUK,EAASN,GACrB,MAAMO,EAASC,KAAKC,MAAMD,KAAKE,UAAUV,IACzC,OAAOO,CACV,CAEK,SAAUI,EAAgBC,EAAUC,GACtC,GAAId,EAAcc,IAAQd,EAAca,GAAM,CAC1C,MAAME,EAAUZ,OAAOa,KAAKF,GAC5B,IAAK,MAAMG,KAAOF,EACdF,EAAII,GAAOH,EAAIG,GAEnB,IAAK,MAAMA,KAAOd,OAAOa,KAAKH,GACrBE,EAAQG,SAASD,WAAaJ,EAAII,EAE9C,CACD,OAAOJ,CACV,C,wNC/BM,MAAMM,EAAe,CACxB,OACA,QACA,SAESC,EAAe,CACxB,OACA,MACA,MACA,QAESC,EAAe,CACxB,MACA,SACA,UACA,UACA,WACA,WACA,UAESC,EAAoB,CAC7B,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YAESC,EAAkB,CAC3B,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QAESC,EAAc,CACvB,aACA,WACA,aACA,cACA,aACA,WAESC,EAAgB,CACzB,cACA,YACA,cACA,eACA,cACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aAESC,EAAc,CACvB,WACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,aAESC,EAAgB,CACzB,SACA,MACA,OACA,OACA,MACA,OACA,QAESC,EAAmB,CAC5B,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SAGSC,EAAiB,IAAIC,IAAI,CAClC,CAAC,UAAWX,GACZ,CAAC,UAAWC,GACZ,CAAC,UAAWC,GACZ,CAAC,eAAgBC,GACjB,CAAC,aAAcC,GACf,CAAC,SAAUC,GACX,CAAC,WAAYC,GACb,CAAC,SAAUC,GACX,CAAC,MAAOC,GACR,CAAC,cAAeC,KAGPG,EAAoB,IAC1BV,KAAiBC,KAAsBC,KAAoBC,KAAgBE,KAAgBE,EAC9F,QAGJ,SAASI,IACL,MAAMC,EAAW,CAAC,EAWlB,OAVAJ,EAAeK,SAASjC,IACpBA,EAAMiC,SAAQC,IACVF,EAASE,GAAQ,CAAjB,GADJ,IAIJF,EAAS,OAAS,EAClBA,EAAS,UAAY,GACrBA,EAAS,YAAc,IACvBA,EAAS,QAAU,EACnBA,EAAS,QAAU,EACZA,CACV,CACM,MAAMG,EAAgBJ,IAK7B,SAASK,IACL,MAAMJ,EAAW,CAAC,EAOlB,MANA,CAACV,GAAiBW,SAASjC,IACvBA,EAAMiC,SAAQC,IACVF,EAASE,GAAQ,CAAjB,GADJ,IAIJF,EAAS,OAAS,EACXA,CACV,CAC6BI,IAAvB,MA+DMC,EAAe,CACxB,KACA,MACA,MACA,OACA,MACA,SACA,WACA,OACA,MACA,QAYSC,EAAmB,CAC5B,GAAM,EACN,MAAO,EACP,MAAO,EACP,OAAQ,EACR,MAAO,EACP,SAAU,EACV,WAAY,EACZ,MAAO,EACP,OAAQ,EACR,OAAQ,EACR,YAAa,EACb,YAAa,EACb,YAAa,EACb,YAAa,EACb,YAAa,EACb,YAAa,EACb,YAAa,EACb,WAAY,EACZ,UAAW,GAGFC,EAAe,CACxBC,KAAI,IACJC,OAAM,EACNC,OAAM,EACNC,UAAS,EACTC,SAAQ,EACRC,UAAS,EACTC,SAAQ,EACRC,OAAM,IACNC,QAAO,EACPC,SAAQ,EACRC,SAAQ,EACRC,UAAS,EACTC,UAAS,EACTC,UAAS,EACTC,UAAS,GA6BAC,IAVHjD,EAAAA,EAAAA,IAASiC,GAUU,CACzBiB,MAAMC,KAAK,CAAEC,OAAQ,KAAM,CAACC,EAAGC,IAAMA,EAAI,IACzCJ,MAAMC,KAAK,CAAEC,OAAQ,KAAM,CAACC,EAAGC,IAAMA,EAAI,KACzCJ,MAAMC,KAAK,CAAEC,OAAQ,KAAM,CAACC,EAAGC,IAAMA,EAAI,KACzCJ,MAAMC,KAAK,CAAEC,OAAQ,KAAM,CAACC,EAAGC,IAAMA,EAAI,KACzCJ,MAAMC,KAAK,CAAEC,OAAQ,KAAM,CAACC,EAAGC,IAAMA,EAAI,KACzCJ,MAAMC,KAAK,CAAEC,OAAQ,KAAM,CAACC,EAAGC,IAAMA,EAAI,KACzCJ,MAAMC,KAAK,CAAEC,OAAQ,KAAM,CAACC,EAAGC,IAAMA,EAAI,OAgChCC,EAA4B,CACrC7C,IAAK,OACL8C,QAAO,EACPC,MAAOC,EAAAA,IAGEC,EAA2B,CACpCC,UAAW,OACXC,gBAAiB,CAAC,EAClBC,QAAO,EACPC,MAAK,GACLC,OAAM,EACNC,UAAS,EACTC,WAAU,EACVC,UAAS,EACTC,OAAQ,OACRC,aAAc,CAAC,EACfC,UAAS,EACTC,QAAO,GACPC,UAAS,EACTC,aAAc,CAAC,OAA2B,QAC1CC,mBAAoB,CAACnB,EAA2BA,GAChDoB,wBAAyB,KACzBC,qBAAsB,KACtBC,2BAA4B,KAC5BC,UAAW,GACXC,4BAA6B,EAC7BC,cAAc,EACdC,gBAAgB,GAIPC,EAAiC,CAC1CC,WAAU,CAAC,GAAI,GAAI,GAAI,GAAI,IAC3BC,cAAa,CAAC,GAAI,GAAI,IACtBC,iBAAgBnC,MAAMC,KAAKmC,EAAAA,GAAAA,GAAAA,QAC3BC,kBAAiBrC,MAAMC,KAAKmC,EAAAA,GAAAA,GAAAA,QAC5BE,YAAUxF,EAAAA,EAAAA,IAASgC,GACnByD,iBAAezF,EAAAA,EAAAA,IAASgC,GACxB0D,gBAAc1F,EAAAA,EAAAA,IAASgC,GACvB2D,uBAAqB,GAoBZC,EAA2B,CACpCC,aAAc,GACdC,WAAY,GACZC,gBAAiB,CAAC,EAClBC,qBAAsB,CAAC,EACvBC,OAAM,CAAC,KAAM,KAAM,OAIVC,EAAuB,CAChCxE,UAAU1B,EAAAA,EAAAA,IAAS6B,GACnBsE,iBAAiBnG,EAAAA,EAAAA,IAAS6B,GAC1BuE,YAAaC,EAAAA,GAAAA,IAEjB,IAAK,MAAMzE,KAAQhC,OAAOa,KAAKyF,EAAqBC,iBAChDD,EAAqBC,gBAAgBvE,GAAQ,GAWjC5B,EAAAA,EAAAA,IAAS4F,IACT5F,EAAAA,EAAAA,IAAS4F,IAKL5F,EAAAA,EAAAA,IAAS2D,IACJ3D,EAAAA,EAAAA,IAASkF,IACdlF,EAAAA,EAAAA,IAAS4F,IACZ5F,EAAAA,EAAAA,IAASkG,GAuuCpB,SAAUI,EAAuB1C,EAAmCkB,EAAoByB,GAC1FC,eAAeC,QAAQ,YAAa7C,GAChCkB,GACA0B,eAAeC,QAAQ,YAAa3B,GAEpCyB,GACAC,eAAeC,QAAQ,YAAavG,KAAKE,UAAUmG,GAE1D,C,0ZCvlDM,MAAM7C,EAAgB,6EA6I7B,SAASgD,EAAWC,GAChB,GAAIA,EAAOC,SAAU,OAAOD,EAAOC,SACnC,GAAID,EAAOlD,MAAO,OAAOkD,EAAOlD,MAChC,GAAIkD,EAAOE,OAAQ,CACf,IAAI5G,EAAS0G,EAAOE,OAAOC,QAAQ,QAAS,WAK5C,OAJsC,GAAlC7G,EAAO8G,QAAQ,iBACf9G,EAASA,EAAO6G,QAAQ,cAAe,qBAE3C7G,EAASA,EAAO6G,QAAQ,QAAS,OAC1B7G,CACV,CACD,OAAO,IACV,CAEM,MAAM+G,EAA2C,GACvDpH,OAAOa,KAAKwG,GAAsCtF,SAAQjB,IACvD,MAAMiG,EAAcM,EAAiBvG,GACrCiG,EAAOjG,IAAMA,EACbiG,EAAOC,SAAWF,EAAWC,GAC7BK,EAAsBE,KAAKP,EAA3B,IAGG,MAAMQ,EAAgB,CACzBC,MAAKC,EACLC,MAAKC,EACLC,OAAMC,EACNC,IAAGC,EACHC,KAAIC,GAEPjI,OAAOa,KAAK0G,GAAoCxF,SAAQmG,IACrD,MAAMC,EAAcZ,EAAcW,GAClClI,OAAOa,KAAKsH,GAAapG,SAAQjB,IAC7B,MAAMiG,EAASoB,EAAYrH,GAC3BiG,EAAOjG,IAAMA,EACbiG,EAAOC,SAAWF,EAAWC,EAA7B,GAHJ,IAMuB/G,OAAOa,KAAK4G,GAA8BW,KAAItH,GAAO2G,EAAa3G,KAC/Dd,OAAOa,KAAK8G,GAAoCS,KAAItH,GAAO6G,EAAgB7G,KAC5Ed,OAAOa,KAAKgH,GAAkCO,KAAItH,GAAO+G,EAAe/G,KAC5Ed,OAAOa,KAAKkH,GAA0BK,KAAItH,GAAOiH,EAAWjH,KACvDd,OAAOa,KAAKoH,GAAoCG,KAAItH,GAAOmH,EAAgBnH,KAJzG,MAaauH,EAAgD,GAC5DrI,OAAOa,KAAKyH,GAA2CvG,SAAQjB,IAC5D,MAAMiG,EAASuB,EAAoBxH,GACnCiG,EAAOjG,IAAMA,EACbiG,EAAOC,SAAWF,EAAWC,GAC7BsB,EAAyBf,KAAKP,EAA9B,IAGmD/G,OAAOa,KAAK0H,EAAAA,IAEvBvI,OAAOa,KAAK2H,GAkBxD,IAAK,MAAM1H,KAAOd,OAAOa,KAAK4H,GAC1B,IAAK,MAAMzG,KAAQhC,OAAOa,KAAM4H,EAAqB3H,IAC5C2H,EAAqB3H,GAAKkB,IAAS,MACnCyG,EAAqB3H,GAAKkB,GAAQ0G,KAIxC,MAAMjC,EAAqBzG,OAAOa,KAAK4H,GACzCL,KAAItH,IAAO,CAAGA,IAAKA,KAAQ2H,EAAa3H,OA0BvC6H,GAvB0C3I,OAAOa,KAAK+H,GACvDR,KAAItH,IAAO,CAAGA,IAAKA,KAAQ8H,EAA2B9H,OAGnBd,OAAOa,KAAKgI,GAC/CT,KAAItH,IAAO,CAAGA,IAAKA,KAAQ+H,EAAmB/H,OAGfd,OAAOa,KAAKiI,GAC3CV,KAAItH,IAAO,CAAGA,IAAKA,KAAQgI,EAAehI,OAGXd,OAAOa,KAAKkI,GAC3CX,KAAItH,IAAO,CAAGA,IAAKA,KAAQiI,EAAejI,OAGAd,OAAOa,KAAKmI,GACtDZ,KAAItH,IAAO,CAAGA,IAAKA,KAAQkI,EAA0BlI,OAMtB,IAAIa,KAMjCsH,eAAeC,EAAyBlF,GAC3C,IACI,IAAK2E,EAA4BQ,IAAInF,GAAY,CAC7C,MAAMoF,EAAM/B,EAAiBrD,GAAW,UAAUkD,QAAQ,MAAO,IAC3DjD,QAAwBoF,MAAMD,GAAKE,MAAKC,GAAQA,EAAKC,SAErDC,EAAapC,EAAiBrD,GAAW0F,GAC/CzF,EAAgB0F,KAAK3C,SAAW4C,EAAeH,GAC/Cd,EAA4BkB,IAAI7F,EAAWC,EAC9C,CACD,OAAO0E,EAA4BmB,IAAI9F,EAI1C,CAHC,MAAO+F,GAEL,MADAC,QAAQD,MAAM/F,GACR+F,CACT,CACJ,CAEgC,IAAIpI,IA+B9B,MAqBMsI,EAAkB,CAC3BC,IAAG,0BACHC,IAAG,2BACHC,IAAG,2BACHC,IAAG,6BACHC,IAAG,4BACHC,IAAG,0BACHC,IAAG,0BAGMZ,EAAiB,CAC1BpC,MAAK,2CACLE,MAAK,8CACLE,OAAM,6CACNE,IAAG,yCACHE,KAAI,+CAGKyC,EAA8B,CACvC,EAAG,WACH,EAAG,WACH,EAAG,WACH,EAAG,WACH,EAAG,YAqDMC,GAlDuB,IAAI/I,IAAI,CACxC,CAAC,SAAU,MACX,CAAC,MAAO,MACR,CAAC,OAAQ,GACT,CAAC,UAAW,GACZ,CAAC,WAAY,GACb,CAAC,UAAW,GACZ,CAAC,KAAM,MACP,CAAC,QAAS,GACV,CAAC,QAAS,GACV,CAAC,YAAa,MACd,CAAC,YAAa,MACd,CAAC,YAAa,MACd,CAAC,YAAa,MACd,CAAC,YAAa,MACd,CAAC,YAAa,MACd,CAAC,YAAa,MACd,CAAC,YAAa,GACd,CAAC,aAAc,GACf,CAAC,aAAc,GACf,CAAC,cAAe,GAChB,CAAC,aAAc,GACf,CAAC,gBAAiB,GAClB,CAAC,kBAAmB,GACpB,CAAC,aAAc,GACf,CAAC,cAAe,GAChB,CAAC,cAAe,GAChB,CAAC,eAAgB,MACjB,CAAC,mBAAoB,GACrB,CAAC,oBAAqB,GACtB,CAAC,eAAgB,MACjB,CAAC,mBAAoB,GACrB,CAAC,oBAAqB,GACtB,CAAC,eAAgB,MACjB,CAAC,mBAAoB,GACrB,CAAC,oBAAqB,KAKU,IAAIA,IAAI,CACxC,CAAC,MAAO,MAAO,CAAC,OAAQ,KAAM,CAAC,WAAY,MAAO,CAAC,MAAO,KAAM,CAAC,SAAU,KAAM,CAAC,UAAW,OAG1D,IAAIA,IAAI,CAC3C,CAAC,MAAO,MAAO,CAAC,OAAQ,MAAO,CAAC,OAAQ,MAAO,CAAC,OAAQ,MACxD,CAAC,MAAO,MAAO,CAAC,SAAU,MAAO,CAAC,WAAY,MAAO,CAAC,UAAW,MACjE,CAAC,YAAa,MAAO,CAAC,YAAa,MAAO,CAAC,YAAa,MAAO,CAAC,YAAa,MAAO,CAAC,YAAa,MAAO,CAAC,YAAa,MAAO,CAAC,YAAa,MAAO,CAAC,WAAY,QAGtH,IAAIA,IAAI,CAClD,CAAC,KAAM,MACP,CAAC,MAAO,OACR,CAAC,MAAO,OACR,CAAC,OAAQ,oBACT,CAAC,MAAO,YACR,CAAC,SAAU,WACX,CAAC,WAAY,kBACb,CAAC,YAAa,QACd,CAAC,YAAa,SACd,CAAC,YAAa,SACd,CAAC,YAAa,WACd,CAAC,YAAa,UACd,CAAC,YAAa,QACd,CAAC,YAAa,OACd,CAAC,WAAY,YACb,CAAC,UAAW,WACZ,CAAC,MAAO,OACR,CAAC,OAAQ,QACT,CAAC,OAAQ,WAGAgJ,EAAyC,IAAIhJ,IAC1D+I,EAA+B3I,SAAQ,CAACjC,EAAOgB,KAC3C6J,EAAuCd,IAAI/J,EAAOgB,EAAlD,IAGG,MAAM4E,EAAqB,CAC9B,CACI5E,IAAK,GACL8J,OAAQ,CAAC,EAAG,EAAG,GACfC,OAAQ,CAAC,EAAG,EAAG,IAEnB,CACI/J,IAAK,QACL8J,OAAQ,CAAC,EAAG,EAAG,GACfC,OAAQ,CAAC,EAAG,EAAG,IAEnB,CACI/J,IAAK,QACL8J,OAAQ,CAAC,EAAG,EAAG,GACfC,OAAQ,CAAC,EAAG,EAAG,IAEnB,CACI/J,IAAK,QACL8J,OAAQ,CAAC,EAAG,EAAG,GACfC,OAAQ,CAAC,GAAI,EAAG,IAEpB,CACI/J,IAAK,QACL8J,OAAQ,CAAC,EAAG,EAAG,GACfC,OAAQ,CAAC,GAAI,GAAI,K,yDC/gBzB,MAAMC,EAAeC,KAAMC,EAAAA,EAAAA,IAAa,mBAAmBD,EAAEA,KAAIE,EAAAA,EAAAA,MAAcF,GACzEG,EAAa,CAAEC,MAAO,kBACtBC,GAA0BC,EAAAA,EAAAA,IAAmB,qRAAkS,GAC/UC,EAAa,CAAEH,MAAO,SACtBI,EAAa,CAAEC,GAAI,OACnBC,EAAa,CAAC,YACdC,EAA2BZ,GAAa,KAAmBa,EAAAA,EAAAA,GAAoB,OAAQ,CAAER,MAAO,6BAA+B,UAAW,KAC1IS,EAAa,CACjBF,GAEIG,EAAa,CAAEV,MAAO,QACtBW,EAAa,CAAEX,MAAO,SACtBY,EAA4BjB,GAAa,KAAmBa,EAAAA,EAAAA,GAAoB,KAAM,KAAM,OAAQ,KACpGK,EAA4BlB,GAAa,KAAmBa,EAAAA,EAAAA,GAAoB,KAAM,KAAM,YAAa,KACzGM,EAA4BnB,GAAa,KAAmBa,EAAAA,EAAAA,GAAoB,KAAM,KAAM,MAAO,KACnGO,EAA4BpB,GAAa,KAAmBa,EAAAA,EAAAA,GAAoB,KAAM,KAAM,MAAO,KACnGQ,EAAc,CAAEC,QAAS,KACzBC,EAAc,CAAElB,MAAO,aACvBmB,EAAc,CAAC,MAAO,OACtBC,EAAc,CAAC,OACfC,EAAc,CAClB1L,IAAK,EACLqK,MAAO,iBAEHsB,EAAc,CAAEtB,MAAO,SACvBuB,EAAc,CAAC,OACfC,EAAc,CAAC,OACfC,EAAc,CAAC,OAEfC,EAAc,CAAC,UAAW,YAC1BC,EAAc,CAAC,UAAW,YAC1BC,EAA4BjC,GAAa,KAAmBa,EAAAA,EAAAA,GAAoB,OAAQ,CAAER,MAAO,6BAA+B,UAAW,KAC3I6B,EAAc,CAClBD,GAEIE,GAA2B5B,EAAAA,EAAAA,IAAmB,yjCAAskC,GAEpnC,SAAU6B,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOxC,EAAY,CAC3DE,GACAO,EAAAA,EAAAA,GAAoB,MAAOL,EAAY,EACrCK,EAAAA,EAAAA,GAAoB,MAAOJ,EAAY,EACrCI,EAAAA,EAAAA,GAAoB,OAAQ,CAC1BgC,SAAUP,EAAO,KAAOA,EAAO,IAAKQ,EAAAA,EAAAA,KAE9C,IAAIC,IAAUV,EAAKW,QAAUX,EAAKW,UAAUD,IAAQ,CAAC,cAC1C,EACDlC,EAAAA,EAAAA,GAAoB,QAAS,KAAM,EACjCoC,EAAAA,EAAAA,IAAiB,WACjBC,EAAAA,EAAAA,KAAgBrC,EAAAA,EAAAA,GAAoB,QAAS,CAC3C,sBAAuByB,EAAO,KAAOA,EAAO,GAAMa,GAAkBd,EAAKe,IAAOD,GAChFE,KAAM,OACNC,UAAW,IACXC,YAAa,YACbC,QAAS,UACR,KAAM,KAAM,CACb,CAACC,EAAAA,GAAapB,EAAKe,UAGvBvC,EAAAA,EAAAA,GAAoB,SAAU,CAC5BwC,KAAM,SACNK,SAAUrB,EAAKsB,MAAQ,GACtB7C,EAAY,EAAGH,IAClBE,EAAAA,EAAAA,GAAoB,OAAQE,EAAY,MAAO6C,EAAAA,EAAAA,IAAiBvB,EAAKsB,OAAQ,IAC5E,SAGP9C,EAAAA,EAAAA,GAAoB,MAAOG,EAAY,CACpCqB,EAAKwB,IACDlB,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoBkB,EAAAA,GAAW,CAAE9N,IAAK,GAAK,EACxD6K,EAAAA,EAAAA,GAAoB,QAAS,KAAM,EACjCA,EAAAA,EAAAA,GAAoB,KAAM,KAAM,CAC9BI,GACAJ,EAAAA,EAAAA,GAAoB,KAAM,MAAM+C,EAAAA,EAAAA,IAAiBvB,EAAKwB,EAAET,KAAM,MAEhEvC,EAAAA,EAAAA,GAAoB,KAAM,KAAM,CAC9BK,GACAL,EAAAA,EAAAA,GAAoB,KAAM,MAAM+C,EAAAA,EAAAA,IAAiBvB,EAAKwB,EAAEE,WAAWC,UAAW,MAEhFnD,EAAAA,EAAAA,GAAoB,KAAM,KAAM,CAC9BM,GACAN,EAAAA,EAAAA,GAAoB,KAAM,MAAM+C,EAAAA,EAAAA,IAAiBvB,EAAKwB,EAAEE,WAAWE,OAAQ,MAE7EpD,EAAAA,EAAAA,GAAoB,KAAM,KAAM,CAC9BO,GACAP,EAAAA,EAAAA,GAAoB,KAAM,MAAM+C,EAAAA,EAAAA,IAAiBvB,EAAKwB,EAAEE,WAAWG,YAAa,MAElFrD,EAAAA,EAAAA,GAAoB,KAAM,KAAM,EAC9BA,EAAAA,EAAAA,GAAoB,KAAMQ,EAAa,EACrCR,EAAAA,EAAAA,GAAoB,IAAK,MAAM+C,EAAAA,EAAAA,IAAiBvB,EAAKwB,EAAEE,WAAWI,WAAY,UAIpFtD,EAAAA,EAAAA,GAAoB,KAAM,KAAM,GAC7B8B,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoBkB,EAAAA,GAAW,MAAMM,EAAAA,EAAAA,IAAY/B,EAAKgC,mBAAmB,CAACC,EAAeC,MAClG5B,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,KAAM,CAC9CvC,MAAO,YACPrK,IAAKuO,GACJ,CACAD,EAAcnL,kBACVwJ,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoBkB,EAAAA,GAAW,CAAE9N,IAAK,GAAK,EACxD6K,EAAAA,EAAAA,GAAoB,MAAOU,EAAa,EACtCV,EAAAA,EAAAA,GAAoB,MAAO,CACzBR,OAAOmE,EAAAA,EAAAA,IAAgB,aAAenC,EAAKoC,iBAAiBH,IAC5DzO,IAAKwM,EAAKqC,gBAAgBJ,GAC1BK,IAAKtC,EAAKuC,YAAYN,EAAcnL,gBAAgBnD,MACnD,KAAM,GAAIwL,IACbX,EAAAA,EAAAA,GAAoB,MAAO,CACzBR,MAAO,SACPxK,IAAKwM,EAAKwC,aAAaP,GACvBK,IAAK,UACJ,KAAM,EAAGlD,GACX6C,EAAcQ,gBACVnC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOlB,GAAakC,EAAAA,EAAAA,IAAiBU,EAAcQ,eAAgB,KACtGC,EAAAA,EAAAA,IAAoB,IAAI,MAE9BlE,EAAAA,EAAAA,GAAoB,MAAOc,EAAa,OAAQiC,EAAAA,EAAAA,IAAiBU,EAAcL,OAAQ,IACvFpD,EAAAA,EAAAA,GAAoB,MAAO,CACzBR,MAAO,SACPxK,IAAKwM,EAAK2C,aAAaV,GACvBK,IAAK,UACJ,KAAM,EAAG/C,IACZf,EAAAA,EAAAA,GAAoB,MAAO,CACzBR,MAAO,eACPxK,IAAKwM,EAAK4C,kBAAkBX,EAAe,GAC3CK,IAAK,gBACJ,KAAM,EAAG9C,IACZhB,EAAAA,EAAAA,GAAoB,MAAO,CACzBR,MAAO,eACPxK,IAAKwM,EAAK4C,kBAAkBX,EAAe,GAC3CK,IAAK,gBACJ,KAAM,EAAG7C,IACX,MACHiD,EAAAA,EAAAA,IAAoB,IAAI,IAGxBA,EAAAA,EAAAA,IAAoB,IAAI,IAC5BlE,EAAAA,EAAAA,GAAoB,MAAO,KAAM,EAC/BA,EAAAA,EAAAA,GAAoB,SAAU,CAC5BqE,QAAU/B,GAAiBd,EAAK8C,OAAOZ,GACvCb,SAAUrB,EAAK+C,eAAeb,IAC7B,iBAAkB,EAAGxC,MAE1BlB,EAAAA,EAAAA,GAAoB,MAAO,KAAM,EAC/BA,EAAAA,EAAAA,GAAoB,SAAU,CAC5BqE,QAAU/B,GAAiBd,EAAKgD,KAAKd,GACrCb,SAAUrB,EAAKiD,mBAAmBf,IACjCrC,EAAa,EAAGF,UAGrB,SAEL,MACH+C,EAAAA,EAAAA,IAAoB,IAAI,KAE9B5C,GAEH,C,6DC1FD,MAAMoD,EAAuB,CAC3BC,OAAQ,EACRC,UAAW,EACXC,OAAQ,EACRzB,MAAO,GAOH0B,EAAsB,CAC1BC,QAAS,GACTC,SAAU,CAAC,EAAG,EAAG,EAAG,EAAG,GACvBC,UAAW,CAAC,GAAI,GAAI,GAAI,GAAI,IAC5BC,WAAY,CAAC,GAmBTC,EAAmB,CACvB,eACA,iBACA,cACA,aACA,eAGIC,EAAsB,CAC1BC,cAAe,KACfC,kBAAmB,MACnBC,mBAAoB,MACpBC,sBAAuB,MACvBC,0BAA2B,OAC3BC,2BAA4B,OAC5BC,2BAA4B,OAC5BC,oBAAqB,MACrBC,yBAA0B,SAC1BC,6BAA8B,WAC9BC,yBAA0B,YAC1BC,0BAA2B,YAC3BC,yBAA0B,YAC1BC,yBAA0B,YAC1BC,0BAA2B,YAC3BC,wBAAyB,YACzBC,yBAA0B,YAC1BC,6BAA8B,WAC9BC,oBAAqB,WAGvB,OAAeC,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,MACNC,QACE,MAAM,YAAE3C,IAAgB4C,EAAAA,EAAAA,KAExB,IAAIC,EACAC,EACAC,EACAC,EAEJzJ,eAAe0J,IACb,MAAMC,QAAkBC,QAAQC,IAC9B,CACE,6BACA,6BACA,+BACA,6BACA1K,KAAK2K,GAAM1J,MAAM0J,GAAGzJ,MAAMC,GAASA,EAAKC,YAE5C+I,EAAmBK,EAAU,GAC7BJ,EAAmBI,EAAU,GAC7BH,EAAqBG,EAAU,GAC/BF,EAAkBE,EAAU,EAC7B,CACDD,IAEA,MAAMzE,GAAM8E,EAAAA,EAAAA,IAAI,IACVvE,GAAQuE,EAAAA,EAAAA,IAAI,GAClB,IAAIC,EACJ,MAAMtE,GAAIuE,EAAAA,EAAAA,IAAS,CACjBhF,IAAK,GACLW,WAAY,CACVC,SAAU,MAGRK,GAAoB+D,EAAAA,EAAAA,IAAS,IAEnCjK,eAAekK,EAAkBxE,EAAeU,GAC9C,MAAMhP,EAAyB,CAC7B+S,SAAUzE,EAAE0E,eAAehE,GAAO+D,SAClCrE,MAAOJ,EAAEE,WAAWyE,mBAAmBjE,GAAON,MAC9CwB,UAAW5B,EAAE0E,eAAehE,GAAOkE,QAAQ,SAASC,MAAQ,EAC5D5D,cAAejB,EAAE0E,eAAehE,GAAOoE,cAAcjQ,QAAU,EAC/DkQ,eAAgB,GAChBlP,QAAQpE,EAAAA,EAAAA,IAASiQ,GACjBsD,OAAOvT,EAAAA,EAAAA,IAASqQ,IAGlBzQ,OAAOa,KAAK8N,EAAE0E,eAAehE,GAAOuE,eAAe7R,SAASjB,IAC1DT,EAAOqT,eAAepM,KAAK,CAACxG,EAAK6N,EAAE0E,eAAehE,GAAOuE,cAAc9S,IAAvE,IAgBF,IAAK,MAAM+S,KAASlF,EAAE0E,eAAehE,GAAOyE,UAC1C,GAA2B,kBAAvBD,EAAME,KAAKC,SAA8B,CAE3C3T,EAAOsT,MAAMjD,QAAQpJ,KAAKuM,EAAMvD,QAEhC,MAAM2D,EAAanD,EAAiB3J,QAAQ0M,EAAME,KAAKG,WACvD7T,EAAOsT,MAAMhD,SAASsD,GAAcJ,EAAME,KAAKI,UAC/C9T,EAAOsT,MAAM/C,UAAUqD,GAAcJ,EAAME,KAAKK,kBAAkBC,WAGlE,IAAK,MAAMC,KAAoBT,EAAME,KAAKQ,kBACpCD,EAAiBE,gBAAgBnU,EAAOsT,MAAM9C,WAChDxQ,EAAOsT,MAAM9C,WAAWyD,EAAiBE,eACvCF,EAAiBG,UAEnBpU,EAAOsT,MAAM9C,WAAWyD,EAAiBE,cACvCF,EAAiBG,SAGxB,KAAiC,eAAvBZ,EAAME,KAAKC,WAEpB3T,EAAOmE,OAAO8L,OAASuD,EAAMvD,OACzB,aAAcuD,EAAMrP,OACtBxE,OAAOa,KAAKgT,EAAMrP,OAAOkQ,UAAU3S,SAASjB,IAC1CT,EAAOmE,OAAOgM,OAASqD,EAAMrP,OAAOkQ,SAAS5T,GAAO,CAApD,IAGFT,EAAOmE,OAAOgM,OAAS,EAEzBnQ,EAAOmE,OAAOuK,MAAQ8E,EAAMrP,OAAOuK,MAC/B8E,EAAMrP,OAAOmQ,aACftU,EAAOmE,OAAO+L,UAAYsD,EAAMrP,OAAOmQ,aAEvCtU,EAAOmE,OAAO+L,UAAY,GAKhC,MAAMqE,EAAarC,EAAiBsC,QAAQ9B,GAAMA,EAAEvH,IAAMnL,EAAO+S,WACjE,GAAIwB,EAAWpR,OAAQ,CACrBnD,EAAO4D,gBAAkBoD,EAAAA,GACvBuN,EAAW,GAAGxC,MAGhB,MAAM0C,EAAatC,EAAiBqC,QAAQ9B,GAAMA,EAAEvH,IAAMnL,EAAOmE,OAAO8L,SACpEwE,EAAWtR,SACbnD,EAAOoE,aAAgB8C,EAAAA,GAAsBlH,EAAO4D,gBAAgB,OAClE6Q,EAAW,GAAG1C,MAGnB,CAED,MAAMtN,EAGF,MAACiQ,OAAWA,GACVC,EAA0B,GAChC3U,EAAOsT,MAAMjD,QACVmE,QAAQ9B,GAAMA,IACdhR,SAASuO,IACRA,EAAS2E,KAAKC,MAAM5E,EAAS,IAC7B,MAAM6E,EAAO1C,EAAmBoC,QAAQ9B,GAAMA,EAAEvH,IAAM8E,IAClD6E,EAAK3R,QACPwR,EAAc1N,KAAK6N,EAAK,GAAG/C,KAC5B,IAEL,MAAMgD,EAA8B,CAAC,EAgCrC,OA/BApV,OAAOa,KAAKyH,EAAAA,IAAqBvG,SAASjB,IACxC,MAAMuU,EAAS/M,EAAAA,GAA4BxH,GACvC,kBAAmBuU,GACrBL,EAAcjT,SAASuT,IACjBD,EAAME,cAAcxU,SAASuU,KAC3BxU,KAAOsU,EACTA,EAAgBtU,KAEhBsU,EAAgBtU,GAAO,EAE1B,GAEJ,IAEHd,OAAOa,KAAKuU,GAAiBrT,SAASjB,IACpC,GAAIsU,EAAgBtU,IAAQ,EAC1BgE,EAAmB,GAAMwD,EAAAA,GAA4BxH,GACrDgE,EAAmB,GAAMwD,EAAAA,GAA4BxH,QAChD,GAAIsU,EAAgBtU,IAAQ,EAAG,CACpC,MAAMuO,EAAQvK,EAAmBqC,aAAQ4N,IAC3B,GAAV1F,IACFvK,EAAmBuK,GAAU/G,EAAAA,GAC3BxH,GAGL,KAEHT,EAAOyE,mBAAqBA,EAE5BzE,EAAOmV,eAAiBC,EAAapV,GAE9BA,CACR,CAED4I,eAAewM,EAAarG,GAC1B,MAAM/O,EAAS,CAAC,EAGhBA,EAAO,UAAY+O,EAAcnL,iBAAiBnD,IAElDT,EAAO,OACL+O,EAAcL,OACb1L,EAAAA,GAAc+L,EAAcmB,WAAW,IAAMnB,EAAcL,MACxD,IACA,IAEN1O,EAAO,QAAU+O,EAAcQ,cAE/B,MAAM8F,EAAYhD,EAAgBmC,QAC/B9B,GAAMA,EAAE4C,WAAavG,EAAcgE,WACpC,GACF,GAAIsC,EAAW,CACb,MAAME,QAA8B1M,EAAAA,EAAAA,IAClC7I,EAAO,WAgBT,GAdA+O,EAAcsE,eAAe3R,SAAS8T,IACpC,MAAMC,EAAQJ,EAAUK,WAAWlB,QAChC9B,GAAMA,EAAEvH,IAAMwK,OAAOH,EAAW,MACjC,GACEC,IACEF,EAAsBjM,KAAKsM,IAAMH,EAAM1D,KACzC/R,EAAO,WAAawV,EAAW,GACtBD,EAAsBM,MAAMD,IAAMH,EAAM1D,KACjD/R,EAAO,YAAcwV,EAAW,GACvBD,EAAsBO,KAAKF,IAAMH,EAAM1D,OAChD/R,EAAO,WAAawV,EAAW,IAElC,IAECxV,EAAO,SAAW,EAAG,CACvB,MAAM+V,EAAOR,EAAsBxR,KAAK,MAAMiS,GAC1CD,KACmD,GAAjDA,EAAKjP,QAAQyO,EAAsBM,MAAMD,IAC3C5V,EAAO,aAAe,GACmC,GAAhD+V,EAAKjP,QAAQyO,EAAsBO,KAAKF,MACjD5V,EAAO,YAAc,GAG1B,CACD,GAAIA,EAAO,SAAW,EAAG,CACvB,MAAM+V,EAAOR,EAAsBxR,KAAK,MAAMiS,GAC1CD,KACmD,GAAjDA,EAAKjP,QAAQyO,EAAsBM,MAAMD,IAC3C5V,EAAO,aAAe,GACmC,GAAhD+V,EAAKjP,QAAQyO,EAAsBO,KAAKF,MACjD5V,EAAO,YAAc,GAG1B,CACF,CAEDA,EAAO,MAAQ+O,EAAc3K,cAAc3D,IAE3CT,EAAO,SACL+O,EAAc5K,OAAOuK,OACpB1L,EAAAA,GAAc+L,EAAc5K,OAAO+L,WAAW,IAC/CnB,EAAc5K,OAAOuK,MACjB,IACA,IAEN1O,EAAO,SAAW+O,EAAc5K,OAAOgM,OAEnCpB,EAActK,oBAChBzE,EAAO,aAAe+O,EAActK,mBAAmB,IAAIhE,KAAO,OAClET,EAAO,aAAe+O,EAActK,mBAAmB,IAAIhE,KAAO,SAElET,EAAO,aAAe,OACtBA,EAAO,aAAe,QAGxB,IAAK,IAAIqD,EAAI,EAAGA,EAAI,EAAGA,IACjB0L,EAAcuE,MAAM/C,UAAUlN,GAChCrD,EAAO,YAAcqD,EAAI,IACvB0L,EAAcuE,MAAMhD,SAASjN,GAC7B,IACCqN,EAA4B3B,EAAcuE,MAAM/C,UAAUlN,IAE7DrD,EAAO,YAAcqD,EAAI,IAAM,KAcnC,OAVAvB,EAAAA,GAAAA,SAAsBH,IACpBA,EAAO,UAAYA,EAAKkF,QAAQ,IAAK,KACrC7G,EAAO2B,GAAQ,CAAf,IAEFhC,OAAOa,KAAKuO,EAAcuE,MAAM9C,YAAY9O,SAASuU,IACnD,MAAMtU,EACJ,UAAa+O,EAA4BuF,GAAMpP,QAAQ,IAAK,KAC9D7G,EAAO2B,GAAQoN,EAAcuE,MAAM9C,WAAWyF,EAA9C,IAGKjW,CACR,CAED,MAAMyN,EAAS7E,UACb,IAAKiF,EAAIpO,QAAUoO,EAAIpO,MAAMyW,MAAM,cAAe,OAClD,MAAMnN,EAAM,0BAA4B8E,EAAIpO,MAAQ,eAEpDuJ,MAAMD,GACHE,MAAMC,GAASA,EAAKC,SACpBF,MAAKL,UACJe,QAAQwM,IAAIhN,IACZ/I,EAAAA,EAAAA,IAAgBkO,EAAGnF,GAEnB,MAAM2L,EAAc,GACpB,IAAK,IAAIzR,EAAI,EAAGA,EAAIiL,EAAEE,WAAWyE,mBAAmB9P,OAAQE,IAC1DyR,EAAK7N,WAAW6L,EAAkBxE,EAAGjL,IAEvCyL,EAAkBsH,OAAO,EAAGtH,EAAkB3L,UAAW2R,GAErD3L,EAAKkN,MACPjI,EAAM3O,MAAQkW,OAAOxM,EAAKkN,KAC1BzD,EAAW0D,aAAY,WACrBC,GACD,GAAE,KACJ,GAjBL,EAqBI3G,EAAUZ,IAId,MAAMmG,EAAWrG,EAAkBE,GAAOmG,UAC1C9O,EAAAA,EAAAA,IAAuB8O,EAASqB,YAAQ9B,EAAWS,GACnDsB,OAAOC,KAAK,KAAM,SAAlB,EAGI5G,EAAQd,IACZ,MAAM2H,EAAa,MAAQ7H,EAAkBE,GAAOpL,gBAAgBnD,IACpEmW,aAAapQ,QAAQmQ,EAAY1W,KAAKE,UAAU2O,EAAkBE,GAAOmG,WACzEpF,EAAmBf,EAAnB,EAGIa,EAAkBb,IAEnBF,EAAkBE,GAAOpL,kBACzBkL,EAAkBE,GAAO5K,aAIxB2L,EAAsBf,IAC1B,IAAIhP,EAAS6P,EAAeb,GAC5B,IAAKhP,EAAQ,CACX,MAAM2W,EAAa,MAAQ7H,EAAkBE,GAAOpL,gBAAgBnD,IACpE,GAAIkW,KAAcC,aAAc,CAC9B,MAAMC,EAAW5W,KAAKE,UAAU2O,EAAkBE,GAAOmG,UACnD2B,EAAWF,aAAaD,GAC9B3W,EAAS6W,GAAYC,CACtB,CACF,CACD,OAAO9W,CAAP,EAGIuW,EAAQ,KACRnI,EAAM3O,MAAQ,EAChB2O,EAAM3O,QAENsX,cAAcnE,EACf,EAGGzD,EAAmBJ,GACnBA,EAAcnL,gBACTmL,EAAcnL,gBAAgB+C,SAEhClD,EAAAA,GAGHyL,EAAoBH,GACpBA,EAAcnL,gBACTwG,EAAAA,GAA4B2E,EAAcnL,gBAAgBL,OAE5DE,EAAAA,GAGH6L,EAAgBP,GAChBA,EAAcnL,gBACTgG,EAAAA,GAAgBmF,EAAcnL,gBAAgB3B,IAEhDwB,EAAAA,GAGHgM,EAAgBV,GAChBA,EAAc3K,aACT2K,EAAc3K,aAAauC,SAE7BlD,EAAAA,GAGHiM,EAAoB,CAACX,EAA+BC,KACxD,IAAIhP,EAASyD,EAAAA,GACb,GAAIsL,EAActK,mBAAoB,CACpC,MAAMqQ,EAAO/F,EAActK,mBAAmBuK,GAC1C8F,IACF9U,EAAS8U,EAAKnO,SAEjB,CACD,OAAO3G,CAAP,EAGF,MAAO,CACLqP,cAEAxB,MACAO,QACAE,IACAQ,oBAEArB,SACAmC,SACAE,OACAD,iBACAE,qBAEAZ,kBACAD,mBACAI,eACAG,eACAC,oBAEH,I,QCtgBH,MAAMsH,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASnK,GAAQ,CAAC,YAAY,qBAEzF,Q,UCNAjE,eAAeqO,KACXC,EAAAA,EAAAA,IAAUC,EAAK,CAAC,GACbC,IAAIC,EAAAA,GAAMC,MAAM,OACtB,CAEDL,G,GCRIM,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB/C,IAAjBgD,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAU3X,KAAK8X,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CAGAH,EAAoBM,EAAID,E,WCzBxB,IAAIE,EAAW,GACfP,EAAoBQ,EAAI,SAAShY,EAAQiY,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAe/P,IACnB,IAAShF,EAAI,EAAGA,EAAI0U,EAAS5U,OAAQE,IAAK,CACrC4U,EAAWF,EAAS1U,GAAG,GACvB6U,EAAKH,EAAS1U,GAAG,GACjB8U,EAAWJ,EAAS1U,GAAG,GAE3B,IAJA,IAGIgV,GAAY,EACPC,EAAI,EAAGA,EAAIL,EAAS9U,OAAQmV,MACpB,EAAXH,GAAsBC,GAAgBD,IAAaxY,OAAOa,KAAKgX,EAAoBQ,GAAGO,OAAM,SAAS9X,GAAO,OAAO+W,EAAoBQ,EAAEvX,GAAKwX,EAASK,GAAK,IAChKL,EAAS7B,OAAOkC,IAAK,IAErBD,GAAY,EACTF,EAAWC,IAAcA,EAAeD,IAG7C,GAAGE,EAAW,CACbN,EAAS3B,OAAO/S,IAAK,GACrB,IAAImV,EAAIN,SACExD,IAAN8D,IAAiBxY,EAASwY,EAC/B,CACD,CACA,OAAOxY,CArBP,CAJCmY,EAAWA,GAAY,EACvB,IAAI,IAAI9U,EAAI0U,EAAS5U,OAAQE,EAAI,GAAK0U,EAAS1U,EAAI,GAAG,GAAK8U,EAAU9U,IAAK0U,EAAS1U,GAAK0U,EAAS1U,EAAI,GACrG0U,EAAS1U,GAAK,CAAC4U,EAAUC,EAAIC,EAwB/B,C,eC5BAX,EAAoB9M,EAAI,SAASkN,GAChC,IAAIa,EAASb,GAAUA,EAAOc,WAC7B,WAAa,OAAOd,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoBmB,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CACR,C,eCNAjB,EAAoBmB,EAAI,SAAShB,EAASkB,GACzC,IAAI,IAAIpY,KAAOoY,EACXrB,EAAoBsB,EAAED,EAAYpY,KAAS+W,EAAoBsB,EAAEnB,EAASlX,IAC5Ed,OAAOoZ,eAAepB,EAASlX,EAAK,CAAEuY,YAAY,EAAMvP,IAAKoP,EAAWpY,IAG3E,C,eCPA+W,EAAoByB,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOC,MAAQ,IAAIC,SAAS,cAAb,EAGhB,CAFE,MAAOC,GACR,GAAsB,kBAAX5C,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxBe,EAAoBsB,EAAI,SAASQ,EAAKrD,GAAQ,OAAOtW,OAAOC,UAAU2Z,eAAezZ,KAAKwZ,EAAKrD,EAAO,C,eCCtGuB,EAAoBgB,EAAI,SAASb,GACX,qBAAX6B,QAA0BA,OAAOC,aAC1C9Z,OAAOoZ,eAAepB,EAAS6B,OAAOC,YAAa,CAAEha,MAAO,WAE7DE,OAAOoZ,eAAepB,EAAS,aAAc,CAAElY,OAAO,GACvD,C,eCNA+X,EAAoBc,EAAI,E,eCKxB,IAAIoB,EAAkB,CACrB,GAAI,GAaLlC,EAAoBQ,EAAEM,EAAI,SAASqB,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4BC,GAC/D,IAKIrC,EAAUkC,EALV1B,EAAW6B,EAAK,GAChBC,EAAcD,EAAK,GACnBE,EAAUF,EAAK,GAGIzW,EAAI,EAC3B,GAAG4U,EAASgC,MAAK,SAAS9O,GAAM,OAA+B,IAAxBuO,EAAgBvO,EAAW,IAAI,CACrE,IAAIsM,KAAYsC,EACZvC,EAAoBsB,EAAEiB,EAAatC,KACrCD,EAAoBM,EAAEL,GAAYsC,EAAYtC,IAGhD,GAAGuC,EAAS,IAAIha,EAASga,EAAQxC,EAClC,CAEA,IADGqC,GAA4BA,EAA2BC,GACrDzW,EAAI4U,EAAS9U,OAAQE,IACzBsW,EAAU1B,EAAS5U,GAChBmU,EAAoBsB,EAAEY,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOnC,EAAoBQ,EAAEhY,EAC9B,EAEIka,EAAqBC,KAAK,uBAAyBA,KAAK,wBAA0B,GACtFD,EAAmBxY,QAAQkY,EAAqBQ,KAAK,KAAM,IAC3DF,EAAmBjT,KAAO2S,EAAqBQ,KAAK,KAAMF,EAAmBjT,KAAKmT,KAAKF,G,IC/CvF,IAAIG,EAAsB7C,EAAoBQ,OAAEtD,EAAW,CAAC,IAAI,KAAK,WAAa,OAAO8C,EAAoB,KAAO,IACpH6C,EAAsB7C,EAAoBQ,EAAEqC,E","sources":["webpack://gencalc/./src/common.ts","webpack://gencalc/./src/input.ts","webpack://gencalc/./src/master.ts","webpack://gencalc/./src/pages/EnkaNetwork/App.vue?a7e0","webpack://gencalc/./src/pages/EnkaNetwork/App.vue?1f24","webpack://gencalc/./src/pages/EnkaNetwork/App.vue","webpack://gencalc/./src/pages/EnkaNetwork/main.ts","webpack://gencalc/webpack/bootstrap","webpack://gencalc/webpack/runtime/chunk loaded","webpack://gencalc/webpack/runtime/compat get default export","webpack://gencalc/webpack/runtime/define property getters","webpack://gencalc/webpack/runtime/global","webpack://gencalc/webpack/runtime/hasOwnProperty shorthand","webpack://gencalc/webpack/runtime/make namespace object","webpack://gencalc/webpack/runtime/runtimeId","webpack://gencalc/webpack/runtime/jsonp chunk loading","webpack://gencalc/webpack/startup"],"sourcesContent":["export function isString(value: any): boolean {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\n\r\nexport function isNumber(value: any): boolean {\r\n    return isFinite(value) && value != null;\r\n}\r\n\r\nexport function isBoolean(value: any): boolean {\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isPlainObject(value: any): boolean {\r\n    const myType = Object.prototype.toString.call(value);\r\n    return myType === '[object Object]';\r\n}\r\n\r\n/** 簡易なdeep copy。undefinedなどは消失します */\r\nexport function deepcopy(value: any): any {\r\n    const result = JSON.parse(JSON.stringify(value));\r\n    return result;\r\n}\r\n\r\nexport function overwriteObject(dst: any, src: any) {\r\n    if (isPlainObject(src) && isPlainObject(dst)) {\r\n        const srcKeys = Object.keys(src);\r\n        for (const key of srcKeys) {\r\n            dst[key] = src[key];\r\n        }\r\n        for (const key of Object.keys(dst)) {\r\n            if (!srcKeys.includes(key)) delete dst[key];\r\n        }\r\n    }\r\n    return dst;\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport const basename = (path: string) => path!.split('/')!.pop()!.split('.')!.shift()!;\r\n","import { ARTIFACT_SET_MASTER, ARTIFACT_STAT_JA_EN_ABBREV_MAP, ARTIFACT_SUB_MASTER, CHARACTER_MASTER, DAMAGE_CATEGORY_ARRAY, ELEMENTAL_RESONANCE_MASTER, ENEMY_MASTER_LIST, GENSEN_MASTER_LIST, getCharacterMasterDetail, getWeaponMasterDetail, IMG_SRC_DUMMY, RECOMMEND_ABBREV_MAP, TAnyObject, TArtifactSet, TArtifactSetEntry, TArtifactSetKey, TArtifactSubKey, TCharacterDetail, TCharacterKey, TEnemyEntry, TWeaponDetail, TWeaponKey, TWeaponTypeKey, WEAPON_MASTER, キャラクター構成PROPERTY_MAP } from '@/master';\r\nimport { basename, deepcopy, isNumber, isPlainObject, isString, overwriteObject } from './common';\r\n\r\nexport const 基礎ステータスARRAY = [\r\n    '基礎HP',\r\n    '基礎攻撃力',\r\n    '基礎防御力'\r\n];\r\nexport const 基本ステータスARRAY = [\r\n    'HP上限',\r\n    '攻撃力',\r\n    '防御力',\r\n    '元素熟知'\r\n];\r\nexport const 高級ステータスARRAY = [\r\n    '会心率',\r\n    '会心ダメージ',\r\n    '与える治療効果',\r\n    '受ける治療効果',\r\n    '元素チャージ効率',\r\n    'クールタイム短縮',\r\n    'シールド強化'\r\n];\r\nexport const 元素ステータス_ダメージARRAY = [\r\n    '炎元素ダメージバフ',\r\n    '水元素ダメージバフ',\r\n    '風元素ダメージバフ',\r\n    '雷元素ダメージバフ',\r\n    '草元素ダメージバフ',\r\n    '氷元素ダメージバフ',\r\n    '岩元素ダメージバフ',\r\n    '物理ダメージバフ'\r\n];\r\nexport const 元素ステータス_耐性ARRAY = [\r\n    '炎元素耐性',\r\n    '水元素耐性',\r\n    '風元素耐性',\r\n    '雷元素耐性',\r\n    '草元素耐性',\r\n    '氷元素耐性',\r\n    '岩元素耐性',\r\n    '物理耐性'\r\n];\r\nexport const ダメージバフARRAY = [\r\n    '通常攻撃ダメージバフ',\r\n    '重撃ダメージバフ',\r\n    '落下攻撃ダメージバフ',\r\n    '元素スキルダメージバフ',\r\n    '元素爆発ダメージバフ',\r\n    '与えるダメージ',\r\n];\r\nexport const 実数ダメージ加算ARRAY = [\r\n    '通常攻撃ダメージアップ',\r\n    '重撃ダメージアップ',\r\n    '落下攻撃ダメージアップ',\r\n    '元素スキルダメージアップ',\r\n    '元素爆発ダメージアップ',\r\n    '炎元素ダメージアップ',\r\n    '水元素ダメージアップ',\r\n    '風元素ダメージアップ',\r\n    '雷元素ダメージアップ',\r\n    '草元素ダメージアップ',\r\n    '氷元素ダメージアップ',\r\n    '岩元素ダメージアップ',\r\n    '物理ダメージアップ'\r\n];\r\nexport const 元素反応バフARRAY = [\r\n    '蒸発反応ボーナス',\r\n    '溶解反応ボーナス',\r\n    '過負荷反応ボーナス',\r\n    '感電反応ボーナス',\r\n    '凍結反応ボーナス',\r\n    '超電導反応ボーナス',\r\n    '拡散反応ボーナス',\r\n    '結晶反応ボーナス',\r\n    '燃焼反応ボーナス',\r\n    '開花反応ボーナス',\r\n    '烈開花反応ボーナス',\r\n    '超開花反応ボーナス',\r\n    '超激化反応ボーナス',\r\n    '草激化反応ボーナス',\r\n];\r\nexport const ステータスその他ARRAY = [\r\n    'ダメージ軽減',\r\n    'HP%',\r\n    '攻撃力%',\r\n    '防御力%',\r\n    'HP+',\r\n    '攻撃力+',\r\n    '防御力+'\r\n];\r\nexport const 敵元素ステータス_耐性ARRAY = [\r\n    '敵炎元素耐性',\r\n    '敵水元素耐性',\r\n    '敵風元素耐性',\r\n    '敵雷元素耐性',\r\n    '敵草元素耐性',\r\n    '敵氷元素耐性',\r\n    '敵岩元素耐性',\r\n    '敵物理耐性'\r\n];\r\n\r\nexport const ステータスARRAY_MAP = new Map([\r\n    ['基礎ステータス', 基礎ステータスARRAY],\r\n    ['基本ステータス', 基本ステータスARRAY],\r\n    ['高級ステータス', 高級ステータスARRAY],\r\n    ['元素ステータス·ダメージ', 元素ステータス_ダメージARRAY],\r\n    ['元素ステータス·耐性', 元素ステータス_耐性ARRAY],\r\n    ['ダメージバフ', ダメージバフARRAY],\r\n    ['実数ダメージ加算', 実数ダメージ加算ARRAY],\r\n    ['元素反応バフ', 元素反応バフARRAY],\r\n    ['その他', ステータスその他ARRAY],\r\n    ['敵元素ステータス·耐性', 敵元素ステータス_耐性ARRAY],\r\n]);\r\n\r\nexport const STAT_PERCENT_LIST = [\r\n    ...高級ステータスARRAY, ...元素ステータス_ダメージARRAY, ...元素ステータス_耐性ARRAY, ...ダメージバフARRAY, ...元素反応バフARRAY, ...敵元素ステータス_耐性ARRAY,\r\n    '別枠乗算',\r\n];\r\n\r\nfunction makeStatusTenmplate() {\r\n    const statsObj = {} as { [key: string]: number };\r\n    ステータスARRAY_MAP.forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj['会心率'] = 5;\r\n    statsObj['会心ダメージ'] = 50;\r\n    statsObj['元素チャージ効率'] = 100;\r\n    statsObj['敵レベル'] = 0;\r\n    statsObj['敵防御力'] = 0;\r\n    return statsObj;\r\n}\r\nexport const ステータスTEMPLATE = makeStatusTenmplate();\r\nexport type TStats = {\r\n    [key: string]: number,\r\n};\r\n\r\nfunction makeEnemyStatusTemplate() {\r\n    const statsObj = {} as { [key: string]: number };\r\n    [元素ステータス_耐性ARRAY].forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj['防御力'] = 0;\r\n    return statsObj;\r\n}\r\nexport const 敵ステータスTEMPLATE = makeEnemyStatusTemplate();\r\n\r\nexport const 聖遺物メイン効果_生の花ARRAY = [\r\n    '5_HP', '4_HP'\r\n];\r\nexport const 聖遺物メイン効果_死の羽ARRAY = [\r\n    '5_攻撃力', '4_攻撃力'\r\n];\r\nexport const 聖遺物メイン効果_時の砂ARRAY = [\r\n    '5_元素チャージ効率',\r\n    '5_HP%',\r\n    '5_攻撃力%',\r\n    '5_防御力%',\r\n    '5_元素熟知',\r\n    '4_元素チャージ効率',\r\n    '4_HP%',\r\n    '4_攻撃力%',\r\n    '4_防御力%',\r\n    '4_元素熟知'\r\n];\r\nexport const 聖遺物メイン効果_空の杯ARRAY = [\r\n    '5_炎元素ダメージバフ',\r\n    '5_水元素ダメージバフ',\r\n    '5_風元素ダメージバフ',\r\n    '5_雷元素ダメージバフ',\r\n    '5_草元素ダメージバフ',\r\n    '5_氷元素ダメージバフ',\r\n    '5_岩元素ダメージバフ',\r\n    '5_物理ダメージバフ',\r\n    '5_HP%',\r\n    '5_攻撃力%',\r\n    '5_防御力%',\r\n    '5_元素熟知',\r\n    '4_炎元素ダメージバフ',\r\n    '4_水元素ダメージバフ',\r\n    '4_風元素ダメージバフ',\r\n    '4_雷元素ダメージバフ',\r\n    '4_草元素ダメージバフ',\r\n    '4_氷元素ダメージバフ',\r\n    '4_岩元素ダメージバフ',\r\n    '4_物理ダメージバフ',\r\n    '4_HP%',\r\n    '4_攻撃力%',\r\n    '4_防御力%',\r\n    '4_元素熟知'\r\n];\r\nexport const 聖遺物メイン効果_理の冠ARRAY = [\r\n    '5_会心率',\r\n    '5_会心ダメージ',\r\n    '5_HP%',\r\n    '5_攻撃力%',\r\n    '5_防御力%',\r\n    '5_元素熟知',\r\n    '5_与える治療効果',\r\n    '4_会心率',\r\n    '4_会心ダメージ',\r\n    '4_HP%',\r\n    '4_攻撃力%',\r\n    '4_防御力%',\r\n    '4_元素熟知',\r\n    '4_与える治療効果'\r\n];\r\n\r\nexport const 聖遺物サブ効果ARRAY = [\r\n    'HP',\r\n    '攻撃力',\r\n    '防御力',\r\n    '元素熟知',\r\n    '会心率',\r\n    '会心ダメージ',\r\n    '元素チャージ効率',\r\n    '攻撃力%',\r\n    'HP%',\r\n    '防御力%',\r\n];\r\nexport const 聖遺物優先するサブ効果ARRAY = [\r\n    '攻撃力%',\r\n    'HP%',\r\n    '防御力%',\r\n    '元素熟知',\r\n    '会心率',\r\n    '会心ダメージ',\r\n    '元素チャージ効率',\r\n];\r\n\r\nexport const 聖遺物ステータスTEMPLATE = {\r\n    'HP': 0,\r\n    '攻撃力': 0,\r\n    '防御力': 0,\r\n    '元素熟知': 0,\r\n    '会心率': 0,\r\n    '会心ダメージ': 0,\r\n    '元素チャージ効率': 0,\r\n    'HP%': 0,\r\n    '攻撃力%': 0,\r\n    '防御力%': 0,\r\n    '炎元素ダメージバフ': 0,\r\n    '水元素ダメージバフ': 0,\r\n    '風元素ダメージバフ': 0,\r\n    '雷元素ダメージバフ': 0,\r\n    '草元素ダメージバフ': 0,\r\n    '氷元素ダメージバフ': 0,\r\n    '岩元素ダメージバフ': 0,\r\n    '物理ダメージバフ': 0,\r\n    '与える治療効果': 0,\r\n};\r\n\r\nexport const 元素反応TEMPLATE = {\r\n    元素: '炎',\r\n    蒸発倍率: 0,\r\n    溶解倍率: 0,\r\n    過負荷ダメージ: 0,\r\n    感電ダメージ: 0,\r\n    超電導ダメージ: 0,\r\n    拡散ダメージ: 0,\r\n    拡散元素: '炎',\r\n    結晶吸収量: 0,\r\n    燃焼ダメージ: 0,\r\n    開花ダメージ: 0,\r\n    烈開花ダメージ: 0,\r\n    超開花ダメージ: 0,\r\n    超激化ダメージ: 0,\r\n    草激化ダメージ: 0,\r\n};\r\nexport type TDamageResultElementalReaction = typeof 元素反応TEMPLATE;\r\nexport type TDamageResultElementalReactionKey = keyof typeof 元素反応TEMPLATE;\r\n\r\nexport type TDamageResultEntry = [string, string | null, number, number | null, number, string | null, number | null, number | null, number | null];    // 名前, 元素, 期待値, 会心, 非会心, 種類, HIT数, ダメージバフ, 敵の防御補正\r\nexport type TDamageResult = {\r\n    元素反応: TDamageResultElementalReaction,\r\n    通常攻撃: TDamageResultEntry[],\r\n    重撃: TDamageResultEntry[],\r\n    落下攻撃: TDamageResultEntry[],\r\n    元素スキル: TDamageResultEntry[],\r\n    元素爆発: TDamageResultEntry[],\r\n    その他: TDamageResultEntry[],\r\n    キャラクター注釈: string[],\r\n    [key: string]: TDamageResultElementalReaction | TDamageResultEntry[] | string[],\r\n};\r\n\r\nexport const DAMAGE_RESULT_TEMPLATE = {\r\n    元素反応: deepcopy(元素反応TEMPLATE) as TDamageResultElementalReaction,\r\n    通常攻撃: [] as TDamageResultEntry[],\r\n    重撃: [] as TDamageResultEntry[],\r\n    落下攻撃: [] as TDamageResultEntry[],\r\n    元素スキル: [] as TDamageResultEntry[],\r\n    元素爆発: [] as TDamageResultEntry[],\r\n    その他: [] as TDamageResultEntry[],\r\n    キャラクター注釈: [] as string[],\r\n};\r\n\r\nexport const 突破レベルレベルARRAY = [\r\n    Array.from({ length: 20 }, (_, i) => i + 1),\r\n    Array.from({ length: 21 }, (_, i) => i + 20),\r\n    Array.from({ length: 11 }, (_, i) => i + 40),\r\n    Array.from({ length: 11 }, (_, i) => i + 50),\r\n    Array.from({ length: 11 }, (_, i) => i + 60),\r\n    Array.from({ length: 11 }, (_, i) => i + 70),\r\n    Array.from({ length: 11 }, (_, i) => i + 80),\r\n];\r\n\r\n\r\nexport type TDamageDetailObj = {\r\n    名前: string | null,\r\n    種類: string | null,\r\n    元素: string | null,\r\n    数値: number | string | Array<any> | null,\r\n    条件: string | null,\r\n    対象: string | null,\r\n    上限: number | string | Array<any> | null,\r\n    HIT数: number | null,\r\n    ダメージバフ: string | null,\r\n    元素付与無効: boolean | null,\r\n    除外条件: (string | object)[] | null,\r\n    適用条件: (string | object)[] | null,\r\n};\r\n\r\nexport type TDamageDetail = {\r\n    通常攻撃?: TDamageDetailObj[],\r\n    重撃?: TDamageDetailObj[],\r\n    落下攻撃?: TDamageDetailObj[],\r\n    元素スキル?: TDamageDetailObj[],\r\n    元素爆発?: TDamageDetailObj[],\r\n    その他?: TDamageDetailObj[],\r\n    ステータス変更系詳細: TDamageDetailObj[],\r\n    天賦性能変更系詳細: TDamageDetailObj[],\r\n    条件: Map<string, string[]>,\r\n    排他: Map<string, string[]>,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_DUMMY = {\r\n    key: 'NONE' as TArtifactSetKey,\r\n    レアリティ: 5,\r\n    image: IMG_SRC_DUMMY,\r\n} as TArtifactSet;\r\n\r\nexport const CHARACTER_INPUT_TEMPLATE = {\r\n    character: 'アンバー' as TCharacterKey,\r\n    characterMaster: {} as TCharacterDetail,\r\n    突破レベル: 6,\r\n    レベル: 90,\r\n    命ノ星座: 0,\r\n    通常攻撃レベル: 8,\r\n    元素スキルレベル: 8,\r\n    元素爆発レベル: 8,\r\n    weapon: '西風猟弓' as TWeaponKey,\r\n    weaponMaster: {} as TWeaponDetail,\r\n    武器突破レベル: 6,\r\n    武器レベル: 90,\r\n    武器精錬ランク: 1,\r\n    artifactSets: ['NONE' as TArtifactSetKey, 'NONE' as TArtifactSetKey],\r\n    artifactSetMasters: [ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[],\r\n    damageDetailMyCharacter: null as TDamageDetail | null,\r\n    damageDetailMyWeapon: null as TDamageDetail | null,\r\n    damageDetailMyArtifactSets: null as TDamageDetail | null,\r\n    buildname: '',\r\n    recommendationSelectedIndex: 0,\r\n    saveDisabled: true,     // ローカルストレージへの構成保存不可か？\r\n    removeDisabled: true,   // ローカルストレージの構成削除不可か？\r\n};\r\nexport type TCharacterInput = typeof CHARACTER_INPUT_TEMPLATE;\r\n\r\nexport const ARTIFACT_DETAIL_INPUT_TEMPLATE = {\r\n    聖遺物メイン効果: ['', '', '', '', ''],\r\n    聖遺物優先するサブ効果: ['', '', ''],\r\n    聖遺物優先するサブ効果上昇値: Array.from(GENSEN_MASTER_LIST[2].values),     // 厳選1ヶ月\r\n    聖遺物優先するサブ効果上昇回数: Array.from(GENSEN_MASTER_LIST[2].counts),   // 厳選1ヶ月\r\n    聖遺物ステータス: deepcopy(聖遺物ステータスTEMPLATE),\r\n    聖遺物ステータスメイン効果: deepcopy(聖遺物ステータスTEMPLATE),\r\n    聖遺物ステータスサブ効果: deepcopy(聖遺物ステータスTEMPLATE),\r\n    聖遺物優先するサブ効果Disabled: false,\r\n};\r\nexport type TArtifactDetailInput = typeof ARTIFACT_DETAIL_INPUT_TEMPLATE;\r\n\r\nexport type TCheckboxEntry = {\r\n    name: string;\r\n    displayName?: string,\r\n};\r\nexport type TSelectEntry = {\r\n    name: string;\r\n    displayName?: string,\r\n    options: string[];\r\n    required: boolean;\r\n};\r\nexport type TConditionValues = {\r\n    [key: string]: boolean | number | null,\r\n};\r\nexport type TConditionAdjustments = {\r\n    [key: string]: number | null,\r\n};\r\nexport const CONDITION_INPUT_TEMPLATE = {\r\n    checkboxList: [] as TCheckboxEntry[],\r\n    selectList: [] as TSelectEntry[],\r\n    conditionValues: {} as TConditionValues,\r\n    conditionAdjustments: {} as TConditionAdjustments,\r\n    攻撃元素: [null, null, null] as (string | null)[],\r\n};\r\nexport type TConditionInput = typeof CONDITION_INPUT_TEMPLATE;\r\n\r\nexport const STATS_INPUT_TEMPLATE = {\r\n    statsObj: deepcopy(ステータスTEMPLATE) as TStats,\r\n    statAdjustments: deepcopy(ステータスTEMPLATE) as TStats,\r\n    enemyMaster: ENEMY_MASTER_LIST[0] as TEnemyEntry,\r\n};\r\nfor (const stat of Object.keys(STATS_INPUT_TEMPLATE.statAdjustments)) {\r\n    STATS_INPUT_TEMPLATE.statAdjustments[stat] = 0;\r\n}\r\nexport type TStatsInput = typeof STATS_INPUT_TEMPLATE;\r\n\r\nexport const OPTION_INPUT_TEMPLATE = {\r\n    elementalResonance: {\r\n        conditionValues: {} as TConditionValues,\r\n        conditionAdjustments: {} as TConditionAdjustments,\r\n    },\r\n    supporterList: [],\r\n    isSupporterOptionOpened: {} as { [key: string]: boolean },\r\n    teamOption: deepcopy(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n    miscOption: deepcopy(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n};\r\nexport type TOptionInput = typeof OPTION_INPUT_TEMPLATE;\r\n\r\nexport const SUPPORTER_INPUT_TEMPLATE = {\r\n    characterInput: deepcopy(CHARACTER_INPUT_TEMPLATE) as TCharacterInput,\r\n    artifactDetailInput: deepcopy(ARTIFACT_DETAIL_INPUT_TEMPLATE) as TArtifactDetailInput,\r\n    conditionInput: deepcopy(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n    statusInput: deepcopy(STATS_INPUT_TEMPLATE) as TStatsInput,\r\n};\r\nexport type TSupporterInput = typeof SUPPORTER_INPUT_TEMPLATE;\r\n\r\n/** レベル文字列（1+,20,20+,...,90）を突破レベルとレベルに分割します */\r\nexport function parseLevelStr(levelStr: number | string): [number, number] {\r\n    try {\r\n        let level: number;\r\n        if (isString(levelStr)) {\r\n            level = Number(String(levelStr).replace('+', ''));\r\n        } else {\r\n            level = Number(levelStr);\r\n        }\r\n        let ascension = 0;\r\n        for (let i = (突破レベルレベルARRAY.length - 1); i >= 0; i--) {\r\n            ascension = i;\r\n            if (突破レベルレベルARRAY[i][0] > level) continue;\r\n            if (突破レベルレベルARRAY[i][0] == level && !String(levelStr).endsWith('+')) {\r\n                ascension--;\r\n            }\r\n            break;\r\n        }\r\n        return [ascension, level];\r\n    } catch (error) {\r\n        console.error(levelStr);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport type TRecommendation = {\r\n    name: string,\r\n    build: any,\r\n    overwrite: boolean\r\n}\r\n\r\nexport function makeDefaultBuildname(character: any) {\r\n    return 'あなたの' + character;\r\n}\r\n\r\nexport function makeBuildStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    let result = '構成_' + character;\r\n    if (buildname && buildname != makeDefaultBuildname(character)) {\r\n        result += '_' + buildname;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeOptionStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return 'オプション' + makeBuildStorageKey(character, buildname);\r\n}\r\n\r\nexport function makeArtifactScoringStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^構成/, 'ArtifactScoring');\r\n}\r\n\r\n/** おすすめセットのリストを作成します. [おすすめセットの名前, おすすめセットの内容, 上書き可不可][] */\r\nexport function makeRecommendationList(characterMaster: { [key: string]: any }, opt_buildData?: { [key: string]: any }): TRecommendation[] {\r\n    const result: TRecommendation[] = [];\r\n\r\n    const character = characterMaster['名前'];\r\n    let isSavable: boolean | null = null;\r\n\r\n    if (opt_buildData) {\r\n        result.push({ name: 'IMPORTED DATA', build: opt_buildData, overwrite: false });\r\n        isSavable = true;\r\n        console.log(opt_buildData);\r\n    }\r\n\r\n    const storageKeyArr: string[] = [];\r\n    Object.keys(localStorage).forEach(key => {\r\n        if (key.startsWith(makeBuildStorageKey(character))) {\r\n            storageKeyArr.push(key);\r\n            if (isSavable == null) {\r\n                isSavable = false;\r\n            }\r\n        }\r\n    });\r\n    storageKeyArr.sort();\r\n    const re = new RegExp('^構成_' + character + '_');\r\n    storageKeyArr.forEach(key => {\r\n        let buildname;\r\n        if (key == makeBuildStorageKey(character)) {\r\n            buildname = makeDefaultBuildname(character);\r\n        } else {\r\n            buildname = key.replace(re, '');\r\n        }\r\n        const buildObj = JSON.parse(localStorage[key]);\r\n        const key2 = 'オプション' + key;\r\n        if (key2 in localStorage) {\r\n            const optionsObj = JSON.parse(localStorage[key2]);\r\n            buildObj.options = optionsObj;\r\n        }\r\n        const key3 = key.replace(/^構成/, 'ArtifactScoring');\r\n        if (key3 in localStorage) {\r\n            const artifactScoringObj = JSON.parse(localStorage[key3]);\r\n            buildObj.artifactScoring = artifactScoringObj;\r\n        }\r\n        result.push({ name: buildname, build: buildObj, overwrite: true });\r\n    });\r\n\r\n    characterMaster['おすすめセット'].forEach((obj: { [key: string]: any }) => {\r\n        const myRecommendation = obj;\r\n        ['聖遺物優先するサブ効果1', '聖遺物優先するサブ効果2', '聖遺物優先するサブ効果3'].forEach(stat => {\r\n            if (!(stat in obj)) {\r\n                obj[stat] = null;\r\n            }\r\n        });\r\n        const artifactRarerityArrArr = [[5, 5, 5, 5, 5], [4, 4, 5, 5, 5], [4, 4, 4, 5, 4]];\r\n        let artifactRarerity4Num = 0;\r\n        const artifactSet1 = myRecommendation['聖遺物セット効果1'] as TArtifactSetKey;\r\n        const artifactSet2 = myRecommendation['聖遺物セット効果2'] as TArtifactSetKey;\r\n        if (ARTIFACT_SET_MASTER[artifactSet1]['レアリティ'] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        if (ARTIFACT_SET_MASTER[artifactSet2]['レアリティ'] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        for (let i = 0; i < 2; i++) {\r\n            const name = '聖遺物メイン効果' + (i + 1);\r\n            if (!(name in myRecommendation)) {\r\n                if (i == 0) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_HP';\r\n                } else if (i == 1) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_攻撃力';\r\n                }\r\n            }\r\n        }\r\n\r\n        let buildname = myRecommendation['武器'];\r\n        buildname += ' ';\r\n        if (myRecommendation['聖遺物セット効果1'] == myRecommendation['聖遺物セット効果2']) {\r\n            buildname += myRecommendation['聖遺物セット効果1'];\r\n        } else {\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['聖遺物セット効果1']);\r\n            buildname += '/';\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['聖遺物セット効果2']);\r\n        }\r\n        buildname += ' [';\r\n        for (let i = 3; i <= 5; i++) {\r\n            const statusName = myRecommendation['聖遺物メイン効果' + i].split('_')[1];\r\n            if (RECOMMEND_ABBREV_MAP.has(statusName)) {\r\n                buildname += RECOMMEND_ABBREV_MAP.get(statusName);\r\n            } else {\r\n                buildname += statusName.substring(0, 1);\r\n            }\r\n        }\r\n        buildname += ']';\r\n        result.push({ name: buildname, build: myRecommendation, overwrite: false });\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\n/** 聖遺物セット名の略称を作成します */\r\nfunction makeArtifactSetAbbrev(name: string): string {\r\n    const abbrRe = /[\\p{sc=Hiragana}\\p{sc=Katakana}ー]+/ug;\r\n    let abbr = name.replace(abbrRe, '');\r\n    if (abbr.length > 2) {\r\n        abbr = name.split(abbrRe).sort((a, b) => {\r\n            return b.length - a.length;\r\n        })[0];\r\n    }\r\n    if (abbr.length > 3) {\r\n        abbr = abbr.substring(0, 2);\r\n    }\r\n    return abbr;\r\n}\r\n\r\nexport function makePrioritySubstatValueList(\r\n    prioritySubstats: TArtifactSubKey[],\r\n    index: number,\r\n    opt_substat?: TArtifactSubKey\r\n) {\r\n    const result: number[] = [];\r\n    if (prioritySubstats[index]) {\r\n        if (!opt_substat) opt_substat = prioritySubstats[index];\r\n        if (opt_substat && opt_substat in ARTIFACT_SUB_MASTER) {\r\n            const valueArr = ARTIFACT_SUB_MASTER[opt_substat];\r\n            for (let i = 0; i < valueArr.length; i++) {\r\n                result.push(valueArr[i]);\r\n                if (i < valueArr.length - 1) {\r\n                    const diff = valueArr[i + 1] - valueArr[i];\r\n                    result.push(valueArr[i] + diff / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/** おすすめセットをロードします */\r\nexport async function loadRecommendation(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n    build: { [key: string]: any }\r\n) {\r\n    try {\r\n        const character = characterInput.character;\r\n        const characterMaster = await getCharacterMasterDetail(character);\r\n        characterInput.characterMaster = characterMaster;\r\n        const artifactStatsSub = deepcopy(聖遺物ステータスTEMPLATE);\r\n\r\n        if ('レベル' in build) {\r\n            [characterInput.突破レベル, characterInput.レベル] = parseLevelStr(build['レベル']);\r\n        }\r\n        ['命ノ星座', '通常攻撃レベル', '元素スキルレベル', '元素爆発レベル'].forEach(key => {\r\n            if (key in build) {\r\n                (characterInput as any)[key] = Number(build[key]);\r\n            }\r\n        });\r\n\r\n        const weaponType = characterMaster['武器'];\r\n        if ('武器' in build) {\r\n            if (Object.keys(WEAPON_MASTER[weaponType]).includes(build['武器'])) {\r\n                characterInput.weapon = build['武器'] as TWeaponKey;\r\n            } else {\r\n                characterInput.weapon = Object.keys(WEAPON_MASTER[weaponType]).filter(s => s.startsWith('西風'))[0] as TWeaponKey;\r\n            }\r\n            characterInput.weaponMaster = await getWeaponMasterDetail(characterInput.weapon, weaponType);\r\n        }\r\n        if ('武器レベル' in build) {\r\n            [characterInput.武器突破レベル, characterInput.武器レベル] = parseLevelStr(build['武器レベル']);\r\n        }\r\n        if ('精錬ランク' in build) {\r\n            characterInput.武器精錬ランク = Number(build['精錬ランク']);\r\n        }\r\n\r\n        let prioritySubstatsDisabled = false;\r\n        for (const key of Object.keys(build).filter((s: string) => s.startsWith('聖遺物サブ効果'))) {\r\n            let toKey = key.replace(/^聖遺物サブ効果/, '');\r\n            if (toKey != 'HP') toKey = toKey.replace(/P$/, '%');\r\n            if (build[key] || build[key] == 0) {\r\n                prioritySubstatsDisabled = true;\r\n                artifactStatsSub[toKey] = Number(build[key]);\r\n            }\r\n        }\r\n        artifactDetailInput.聖遺物優先するサブ効果Disabled = prioritySubstatsDisabled;\r\n\r\n        ['聖遺物セット効果1', '聖遺物セット効果2'].forEach((key, index) => {\r\n            if (!(key in build)) return;\r\n            const artifactSet = build[key] as TArtifactSetKey;\r\n            if (artifactSet && artifactSet in ARTIFACT_SET_MASTER) {\r\n                characterInput.artifactSets[index] = artifactSet;\r\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER[artifactSet] as TArtifactSetEntry;\r\n            } else {\r\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER_DUMMY as TArtifactSetEntry;\r\n            }\r\n        });\r\n\r\n        ['聖遺物メイン効果1', '聖遺物メイン効果2'].forEach((key, index) => {\r\n            if (key in build) {\r\n                artifactDetailInput['聖遺物メイン効果'][index] = build[key];\r\n            } else {\r\n                artifactDetailInput['聖遺物メイン効果'][index] = ['5_HP', '5_攻撃力'][index];\r\n            }\r\n        });\r\n        ['聖遺物メイン効果3', '聖遺物メイン効果4', '聖遺物メイン効果5'].forEach((key, index) => {\r\n            if (!(key in build)) return;\r\n            const mainstat = build[key];\r\n            artifactDetailInput['聖遺物メイン効果'][index + 2] = mainstat;\r\n        });\r\n        // for (const entry of artifactDetailInput['聖遺物メイン効果']) {\r\n        //     const [rarity, stat] = entry.split('_');\r\n        //     artifactStatsMain[stat] += (ARTIFACT_MAIN_MASTER as any)[rarity][stat];\r\n        // }\r\n        // overwriteObject(artifactDetailInput.聖遺物ステータスメイン効果, artifactStatsMain);\r\n\r\n        if (!prioritySubstatsDisabled) {\r\n            ['聖遺物優先するサブ効果1', '聖遺物優先するサブ効果2', '聖遺物優先するサブ効果3'].forEach((key, index) => {\r\n                if (!(key in build)) return;\r\n                const substat = build[key];\r\n                artifactDetailInput['聖遺物優先するサブ効果'][index] = substat;\r\n            });\r\n            ['聖遺物優先するサブ効果1上昇値', '聖遺物優先するサブ効果2上昇値', '聖遺物優先するサブ効果3上昇値'].forEach((key, index) => {\r\n                let doUpdate = false;\r\n                if (artifactDetailInput['聖遺物優先するサブ効果'][index]) {\r\n                    if ((key in build) && isNumber(build[key])) {\r\n                        doUpdate = true;\r\n                    }\r\n                }\r\n                if (doUpdate) {\r\n                    const substatValue = Number(build[key]);\r\n                    const substat = artifactDetailInput['聖遺物優先するサブ効果'][index] as TArtifactSubKey;\r\n                    const prioritySubstatValueList = makePrioritySubstatValueList([substat], 0);\r\n                    prioritySubstatValueList.forEach((v, i) => {\r\n                        if (substatValue <= v) {\r\n                            artifactDetailInput['聖遺物優先するサブ効果上昇値'][index] = i;\r\n                        }\r\n                    })\r\n                } else {\r\n                    if (artifactDetailInput['聖遺物優先するサブ効果'][index] && !artifactDetailInput['聖遺物優先するサブ効果上昇値'][index]) {\r\n                        artifactDetailInput['聖遺物優先するサブ効果上昇値'][index] = GENSEN_MASTER_LIST[2].values[index];\r\n                    }\r\n                }\r\n            });\r\n            ['聖遺物優先するサブ効果1上昇回数', '聖遺物優先するサブ効果2上昇回数', '聖遺物優先するサブ効果3上昇回数'].forEach((key, index) => {\r\n                let doUpdate = false;\r\n                if (artifactDetailInput['聖遺物優先するサブ効果'][index]) {\r\n                    if ((key in build) && isNumber(build[key])) {\r\n                        doUpdate = true;\r\n                    }\r\n                }\r\n                if (doUpdate) {\r\n                    const substatCount = Number(build[key]);\r\n                    artifactDetailInput['聖遺物優先するサブ効果上昇回数'][index] = substatCount;\r\n                } else {\r\n                    if (artifactDetailInput['聖遺物優先するサブ効果'][index] && !artifactDetailInput['聖遺物優先するサブ効果上昇回数'][index]) {\r\n                        artifactDetailInput['聖遺物優先するサブ効果上昇回数'][index] = GENSEN_MASTER_LIST[2].counts[index];\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        Object.keys(build).filter(s => !キャラクター構成PROPERTY_MAP.has(s) && !['options', 'artifactScoring'].includes(s)).forEach(key => {\r\n            if (build[key] == null) {\r\n                conditionInput.conditionValues[key] = build[key];   // null\r\n            } else if (isString(build[key])) {\r\n                conditionInput.conditionValues[key] = Number(build[key]);\r\n            } else {\r\n                conditionInput.conditionValues[key] = build[key];\r\n            }\r\n        });\r\n\r\n        if ('options' in build) {\r\n            const keys = Object.keys(build.options);\r\n            if (keys.length) {\r\n                overwriteObject(optionInput.elementalResonance.conditionValues, {});\r\n                overwriteObject(optionInput.teamOption.conditionValues, {});\r\n                overwriteObject(optionInput.miscOption.conditionValues, {});\r\n                keys.forEach(key => {\r\n                    if (key in ELEMENTAL_RESONANCE_MASTER || key == 'dendroOption') {\r\n                        // 元素共鳴\r\n                        optionInput.elementalResonance.conditionValues[key] = build.options[key];\r\n                    } else {\r\n                        const astarIndex = key.indexOf('*');\r\n                        if (astarIndex != -1) {\r\n                            const workCharacter = key.substring(0, astarIndex);\r\n                            if (workCharacter in CHARACTER_MASTER) {\r\n                                // チーム\r\n                                optionInput.teamOption.conditionValues[key] = build.options[key];\r\n                            } else {\r\n                                // その他\r\n                                optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                            }\r\n                        } else {\r\n                            // その他\r\n                            optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        overwriteObject(artifactDetailInput.聖遺物ステータスサブ効果, artifactStatsSub);\r\n\r\n        console.debug('loadRecommendation', characterInput, artifactDetailInput, conditionInput, build);\r\n    }\r\n    catch (error) {\r\n        console.error(characterInput, artifactDetailInput, conditionInput, build);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function makeSavedata(characterInput: TCharacterInput, artifactDetailInput: TArtifactDetailInput, conditionInput: TConditionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // キャラクター\r\n    resultObj['キャラクター'] = characterInput.character;\r\n    // レベル\r\n    resultObj['レベル'] = characterInput.レベル + (突破レベルレベルARRAY[characterInput.突破レベル][0] == characterInput.レベル ? '+' : '');\r\n    // 命ノ星座\r\n    resultObj['命ノ星座'] = characterInput.命ノ星座;\r\n    // 通常攻撃レベル\r\n    resultObj['通常攻撃レベル'] = characterInput.通常攻撃レベル;\r\n    // 元素スキルレベル\r\n    resultObj['元素スキルレベル'] = characterInput.元素スキルレベル;\r\n    // 元素爆発レベル\r\n    resultObj['元素爆発レベル'] = characterInput.元素爆発レベル;\r\n    // 武器\r\n    resultObj['武器'] = characterInput.weapon;\r\n    // 武器レベル\r\n    resultObj['武器レベル'] = characterInput.武器レベル + (突破レベルレベルARRAY[characterInput.突破レベル][0] == characterInput.武器レベル ? '+' : '');\r\n    // 精錬ランク\r\n    resultObj['精錬ランク'] = characterInput.武器精錬ランク;\r\n    // 聖遺物セット効果1\r\n    resultObj['聖遺物セット効果1'] = characterInput.artifactSets[0];\r\n    // 聖遺物セット効果2\r\n    resultObj['聖遺物セット効果2'] = characterInput.artifactSets[1];\r\n    // 聖遺物メイン効果1\r\n    resultObj['聖遺物メイン効果1'] = artifactDetailInput.聖遺物メイン効果[0];\r\n    // 聖遺物メイン効果2\r\n    resultObj['聖遺物メイン効果2'] = artifactDetailInput.聖遺物メイン効果[1];\r\n    // 聖遺物メイン効果3\r\n    resultObj['聖遺物メイン効果3'] = artifactDetailInput.聖遺物メイン効果[2];\r\n    // 聖遺物メイン効果4\r\n    resultObj['聖遺物メイン効果4'] = artifactDetailInput.聖遺物メイン効果[3];\r\n    // 聖遺物メイン効果5\r\n    resultObj['聖遺物メイン効果5'] = artifactDetailInput.聖遺物メイン効果[4];\r\n    // 聖遺物サブ効果HP\r\n    resultObj['聖遺物サブ効果HP'] = artifactDetailInput.聖遺物ステータスサブ効果['HP'];\r\n    // 聖遺物サブ効果攻撃力\r\n    resultObj['聖遺物サブ効果攻撃力'] = artifactDetailInput.聖遺物ステータスサブ効果['攻撃力'];\r\n    // 聖遺物サブ効果防御力\r\n    resultObj['聖遺物サブ効果防御力'] = artifactDetailInput.聖遺物ステータスサブ効果['防御力'];\r\n    // 聖遺物サブ効果元素熟知\r\n    resultObj['聖遺物サブ効果元素熟知'] = artifactDetailInput.聖遺物ステータスサブ効果['元素熟知'];\r\n    // 聖遺物サブ効果会心率\r\n    resultObj['聖遺物サブ効果会心率'] = artifactDetailInput.聖遺物ステータスサブ効果['会心率'];\r\n    // 聖遺物サブ効果会心ダメージ\r\n    resultObj['聖遺物サブ効果会心ダメージ'] = artifactDetailInput.聖遺物ステータスサブ効果['会心ダメージ'];\r\n    // 聖遺物サブ効果元素チャージ効率\r\n    resultObj['聖遺物サブ効果元素チャージ効率'] = artifactDetailInput.聖遺物ステータスサブ効果['元素チャージ効率'];\r\n    // 聖遺物サブ効果HPP\r\n    resultObj['聖遺物サブ効果HPP'] = artifactDetailInput.聖遺物ステータスサブ効果['HP%'];\r\n    // 聖遺物サブ効果攻撃力P\r\n    resultObj['聖遺物サブ効果攻撃力P'] = artifactDetailInput.聖遺物ステータスサブ効果['攻撃力%'];\r\n    // 聖遺物サブ効果防御力P\r\n    resultObj['聖遺物サブ効果防御力P'] = artifactDetailInput.聖遺物ステータスサブ効果['防御力%'];\r\n    // 聖遺物優先するサブ効果1\r\n    resultObj['聖遺物優先するサブ効果1'] = artifactDetailInput.聖遺物優先するサブ効果[0];\r\n    // 聖遺物優先するサブ効果1上昇値\r\n    resultObj['聖遺物優先するサブ効果1上昇値'] = artifactDetailInput.聖遺物優先するサブ効果上昇値[0];\r\n    // 聖遺物優先するサブ効果1上昇回数\r\n    resultObj['聖遺物優先するサブ効果1上昇回数'] = artifactDetailInput.聖遺物優先するサブ効果上昇回数[0];\r\n    // 聖遺物優先するサブ効果2\r\n    resultObj['聖遺物優先するサブ効果2'] = artifactDetailInput.聖遺物優先するサブ効果[1];\r\n    // 聖遺物優先するサブ効果2上昇値\r\n    resultObj['聖遺物優先するサブ効果2上昇値'] = artifactDetailInput.聖遺物優先するサブ効果上昇値[1];\r\n    // 聖遺物優先するサブ効果2上昇回数\r\n    resultObj['聖遺物優先するサブ効果2上昇回数'] = artifactDetailInput.聖遺物優先するサブ効果上昇回数[1];\r\n    // 聖遺物優先するサブ効果3\r\n    resultObj['聖遺物優先するサブ効果3'] = artifactDetailInput.聖遺物優先するサブ効果[2];\r\n    // 聖遺物優先するサブ効果3上昇値\r\n    resultObj['聖遺物優先するサブ効果3上昇値'] = artifactDetailInput.聖遺物優先するサブ効果上昇値[2];\r\n    // 聖遺物優先するサブ効果3上昇回数\r\n    resultObj['聖遺物優先するサブ効果3上昇回数'] = artifactDetailInput.聖遺物優先するサブ効果上昇回数[2];\r\n\r\n    for (const entry of conditionInput.checkboxList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n    for (const entry of conditionInput.selectList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeOptionsSavedata(character: string, optionInput: TOptionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // 元素共鳴\r\n    {\r\n        const conditionValues = optionInput.elementalResonance.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    // チーム\r\n    {\r\n        const conditionValues = optionInput.teamOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (key.startsWith(character + '*')) return;\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    // その他\r\n    {\r\n        const conditionValues = optionInput.miscOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport const CHANGE_KIND_STATUS = 'ステータス変更系詳細';\r\nexport const CHANGE_KIND_TALENT = '天賦性能変更系詳細';\r\n\r\nexport function makeDamageDetailObjArrObjCharacter(characterInput: TCharacterInput): TDamageDetail {\r\n    try {\r\n        const characterMaster = characterInput.characterMaster as any;\r\n\r\n        const result = {} as any;\r\n\r\n        let myTalentDetail;\r\n        let myTalentLevel: number;\r\n        let myDefaultKind: string | null;\r\n        let myDefaultElement: string | null;\r\n        const myInputCategory = 'キャラクター';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        // 通常攻撃 重撃 落下攻撃\r\n        myTalentLevel = characterInput['通常攻撃レベル'];\r\n        myDefaultElement = characterMaster['武器'] === '法器' ? characterMaster['元素'] : null;\r\n        ['通常攻撃', '重撃', '落下攻撃'].forEach(category => {\r\n            myTalentDetail = characterMaster[category];\r\n            myDefaultKind = category + 'ダメージ';\r\n            result[category] = makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        });\r\n\r\n        ['通常攻撃', '重撃', '落下攻撃'].forEach(category => {\r\n            const workCategory = '特殊' + category;\r\n            if (workCategory in characterMaster) {\r\n                myTalentDetail = characterMaster[workCategory];\r\n                if ('種類' in myTalentDetail) {\r\n                    myDefaultKind = myTalentDetail['種類'];\r\n                    switch (myDefaultKind) {\r\n                        case '元素スキルダメージ':\r\n                            myTalentLevel = characterInput['元素スキルレベル'];\r\n                            break;\r\n                        case '元素爆発ダメージ':\r\n                            myTalentLevel = characterInput['元素爆発レベル'];\r\n                            break;\r\n                    }\r\n                }\r\n                if ('元素' in myTalentDetail) {\r\n                    myDefaultElement = myTalentDetail['元素'];\r\n                }\r\n                const workObj = {\r\n                    条件: myTalentDetail['条件'],\r\n                    詳細: makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory)\r\n                };\r\n                result[workCategory] = workObj;\r\n            }\r\n        });\r\n\r\n        // 元素スキル\r\n        myTalentLevel = characterInput['元素スキルレベル'];\r\n        myDefaultKind = '元素スキルダメージ';\r\n        myDefaultElement = characterMaster['元素'];\r\n        result['元素スキル'] = makeDamageDetailObjArr(characterMaster['元素スキル'], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        // 元素爆発\r\n        myTalentLevel = characterInput['元素爆発レベル'];\r\n        myDefaultKind = '元素爆発ダメージ';\r\n        myDefaultElement = characterMaster['元素'];\r\n        result['元素爆発'] = makeDamageDetailObjArr(characterMaster['元素爆発'], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        result['その他'] = [] as TDamageDetailObj[];\r\n\r\n        // その他戦闘天賦\r\n        if ('その他戦闘天賦' in characterMaster) {\r\n            characterMaster['その他戦闘天賦'].forEach((myTalentDetail: any) => {\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result['その他'].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // 固有天賦\r\n        characterMaster['固有天賦'].forEach((myTalentDetail: any) => {\r\n            const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n            if (workArr.length > 0) result['その他'].push(...workArr);\r\n        });\r\n\r\n        // 命ノ星座\r\n        if ('命ノ星座' in characterMaster) {\r\n            Object.keys(characterMaster['命ノ星座']).forEach(key => {\r\n                if (Number(key) > characterInput.命ノ星座) return;\r\n                myTalentDetail = characterMaster['命ノ星座'][key];\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result['その他'].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // 風元素キャラクター\r\n        if (characterMaster['元素'] == '風') {\r\n            if (myTalentChangeDetailObjArr.filter(s => s.条件 && s.条件.startsWith('拡散@')).length == 0) {\r\n                ['炎元素', '水元素', '雷元素', '氷元素'].forEach(cond => {\r\n                    myTalentChangeDetailObjArr.push({\r\n                        名前: null,\r\n                        種類: '固有変数',\r\n                        元素: null,\r\n                        数値: null,\r\n                        条件: '拡散@' + cond,\r\n                        対象: null,\r\n                        上限: null,\r\n                        HIT数: null,\r\n                        ダメージバフ: null,\r\n                        元素付与無効: null,\r\n                        除外条件: null,\r\n                        適用条件: null\r\n                    });\r\n                });\r\n            }\r\n            if ('オプション初期値' in characterMaster) {\r\n                if (Object.keys(characterMaster['オプション初期値']).filter(s => s == '拡散').length == 0) {\r\n                    characterMaster['オプション初期値']['拡散'] = 1;\r\n                }\r\n            } else {\r\n                characterMaster['オプション初期値'] = { 拡散: 1 };\r\n            }\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj['条件'], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj['条件'], conditionMap, exclusionMap);\r\n        });\r\n        // conditionMap.delete('命ノ星座');\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && Array.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result['条件'] = conditionMap;\r\n        result['排他'] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyCharacter = result;\r\n\r\n        return result;\r\n    } catch (error) {\r\n        console.error(characterInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjWeapon(characterInput: any) {\r\n    try {\r\n        const name = characterInput.weapon;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n\r\n        const result = {} as any;\r\n\r\n        if (!name || !weaponMaster) return result;\r\n\r\n        let myTalentDetail;\r\n        const myLevel = characterInput.武器精錬ランク;\r\n        const myInputCategory = '武器';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        if ('武器スキル' in weaponMaster) {\r\n            myTalentDetail = weaponMaster['武器スキル'];\r\n            result['その他'] = makeDamageDetailObjArr(myTalentDetail, myLevel, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            let condition = detailObj['条件'];\r\n            if (isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            let condition = detailObj['条件'];\r\n            if (isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && Array.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result['条件'] = conditionMap;\r\n        result['排他'] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyWeapon = result;\r\n\r\n        return result;\r\n    } catch (error) {\r\n        console.error(characterInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjArtifactSets(characterInput: any) {\r\n    try {\r\n        const result = [] as any;\r\n\r\n        let myTalentDetail;\r\n        const myInputCategory = '聖遺物セット効果';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        const artifactSetMasters = characterInput.artifactSetMasters.filter((s: any) => s);\r\n\r\n        if (artifactSetMasters.length > 0) {\r\n            const damageDetailObjArr = [] as TDamageDetailObj[];\r\n            if ('2セット効果' in artifactSetMasters[0]) {\r\n                myTalentDetail = artifactSetMasters[0]['2セット効果'];\r\n                damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n            }\r\n            if (artifactSetMasters.length == 2) {\r\n                if (artifactSetMasters[0] == artifactSetMasters[1]) {\r\n                    myTalentDetail = artifactSetMasters[0]['4セット効果'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                } else {\r\n                    myTalentDetail = artifactSetMasters[1]['2セット効果'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                }\r\n            }\r\n            result['その他'] = damageDetailObjArr;\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj['条件'], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj['条件'], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && Array.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result['条件'] = conditionMap;\r\n        result['排他'] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyArtifactSets = result;\r\n\r\n        return result;\r\n    } catch (error) {\r\n        console.error(characterInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nconst makeDetailObj = function (\r\n    detailObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    inputCategory: string | null,\r\n    opt_condition?: string,\r\n): TDamageDetailObj {\r\n    let my種類 = '種類' in detailObj ? detailObj['種類'] : defaultKind;\r\n    let my対象 = null;\r\n    if (my種類.indexOf('.') != -1) {\r\n        my対象 = my種類.substring(my種類.indexOf('.') + 1);\r\n        my種類 = my種類.substring(0, my種類.indexOf('.'));\r\n    } else if ('対象' in detailObj) {\r\n        my対象 = detailObj['対象'];\r\n    }\r\n    let my数値 = null;\r\n    if ('数値' in detailObj) {\r\n        my数値 = detailObj['数値'];\r\n        if (isNumber(my数値) || isString(my数値)) {\r\n            // nop\r\n        } else if (isPlainObject(my数値) && level && level in my数値) { // キャラクター|武器のサブステータス\r\n            my数値 = my数値[level];\r\n        } else {\r\n            console.error(detailObj, level, defaultKind, defaultElement, my数値);\r\n        }\r\n        if (DAMAGE_CATEGORY_ARRAY.includes(my種類 + 'ダメージ') || my種類.endsWith('ダメージ')) {\r\n            my数値 = analyzeFormulaStr(my数値, '攻撃力');\r\n        } else {\r\n            my数値 = analyzeFormulaStr(my数値, my種類);\r\n        }\r\n    }\r\n    let my条件 = null;\r\n    if ('条件' in detailObj) {\r\n        if (isPlainObject(detailObj['条件']) && level && level in detailObj['条件']) {  // 武器は精錬ランクによって数値を変えたいときがあるので\r\n            my条件 = detailObj['条件'][level];\r\n        } else {\r\n            my条件 = detailObj['条件'];\r\n        }\r\n    } else {\r\n        my条件 = opt_condition ?? null;\r\n    }\r\n    let my上限 = null;\r\n    if ('上限' in detailObj) {\r\n        my上限 = detailObj['上限'];\r\n        if (isPlainObject(my上限) && level && level in my上限) {   // 草薙の稲光\r\n            my上限 = my上限[level];\r\n        }\r\n        my上限 = analyzeFormulaStr(my上限);\r\n    }\r\n    const resultObj: TDamageDetailObj = {\r\n        名前: detailObj['名前'],\r\n        種類: my種類,\r\n        元素: '元素' in detailObj ? detailObj['元素'] : defaultElement,\r\n        数値: my数値,\r\n        条件: my条件,\r\n        対象: my対象,\r\n        上限: my上限,\r\n        HIT数: 'HIT数' in detailObj ? detailObj['HIT数'] : null,\r\n        ダメージバフ: 'ダメージバフ' in detailObj ? detailObj['ダメージバフ'] : null,\r\n        元素付与無効: '元素付与無効' in detailObj ? detailObj['元素付与無効'] : inputCategory == '武器',\r\n        除外条件: '除外条件' in detailObj ? detailObj['除外条件'] : null,\r\n        適用条件: '適用条件' in detailObj ? detailObj['適用条件'] : null,\r\n    }\r\n    return resultObj;\r\n}\r\n\r\nexport function getChangeKind(kind: string) {\r\n    if (kind in ステータスTEMPLATE\r\n        || new RegExp('[自全].+(バフ|アップ)').exec(kind)\r\n        || new RegExp('敵?[自全]元素耐性').exec(kind)\r\n        || ['別枠乗算', '回復量アップ'].includes(kind)\r\n        || ['敵防御力'].includes(kind)\r\n        || ['発動回数', '使用回数'].includes(kind)\r\n        || ['攻撃速度', '通常攻撃速度', '移動速度'].includes(kind)\r\n        || kind.endsWith('継続時間')\r\n        || kind.endsWith('クールタイム')\r\n        || kind.endsWith('会心率')\r\n        || kind.endsWith('会心ダメージ')\r\n    ) {\r\n        return 'STATUS';\r\n    } else if (kind.endsWith('強化')\r\n        || kind.endsWith('付与')\r\n        || kind == '防御無視' ||\r\n        kind == '固有変数'\r\n    ) {   // ex.元素爆発強化,氷元素付与\r\n        return 'TALENT';\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport const makeDamageDetailObjArr = function (\r\n    talentDataObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    statusChangeDetailObjArr: any[],\r\n    talentChangeDetailObjArr: any[],\r\n    inputCategory: string,\r\n    opt_condition?: string,\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as any[];\r\n    if (!('詳細' in talentDataObj)) return resultArr;\r\n\r\n    talentDataObj['詳細'].forEach((detailObj: { [x: string]: any; }) => {\r\n        const resultObj = makeDetailObj(detailObj, level, defaultKind, defaultElement, inputCategory, opt_condition);\r\n        const my種類 = resultObj.種類 as string;\r\n        if (statusChangeDetailObjArr != null && getChangeKind(my種類) == 'STATUS') {\r\n            resultObj['元素'] = '元素' in detailObj ? detailObj['元素'] : null;\r\n            statusChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        if (talentChangeDetailObjArr != null && getChangeKind(my種類) == 'TALENT') {\r\n            resultObj['元素'] = '元素' in detailObj ? detailObj['元素'] : null;\r\n            talentChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        resultArr.push(resultObj);\r\n    });\r\n\r\n    return resultArr;\r\n}\r\n\r\nexport const makeTeamOptionDetailObjArr = function (\r\n    detailObjArr: any[],\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as any[];\r\n\r\n    detailObjArr.forEach((detailObj: { [x: string]: any; }) => {\r\n        const resultObj = makeDetailObj(detailObj, null, null, null, null);\r\n        if (resultObj) {\r\n            resultArr.push(resultObj);\r\n        }\r\n    });\r\n\r\n    return resultArr;\r\n}\r\n\r\nexport const makeConditionExclusionMapFromStr = function (conditionStr: string, conditionMap: Map<string, string[] | null>, exclusionMap: Map<string, string[] | null>) {\r\n    // 排他条件を抽出します\r\n    let exclusionCond: string | null = null;\r\n    let myCondStrArr = conditionStr.split('^');\r\n    if (myCondStrArr.length > 1) {\r\n        exclusionCond = myCondStrArr[1];\r\n    }\r\n    const myCondStr = myCondStrArr[0];\r\n    if (myCondStr.indexOf('|') != -1) {\r\n        // OR条件 for 申鶴\r\n        myCondStrArr = myCondStr.split('|');\r\n        myCondStrArr.forEach((myCondStr: string) => {\r\n            makeConditionExclusionMapFromStrSub(myCondStr, conditionMap, exclusionMap, exclusionCond);\r\n        });\r\n    } else {\r\n        // AND条件\r\n        myCondStrArr = myCondStr.split('&');\r\n        myCondStrArr.forEach((myCondStr: string) => {\r\n            makeConditionExclusionMapFromStrSub(myCondStr, conditionMap, exclusionMap, exclusionCond);\r\n        });\r\n    }\r\n}\r\n\r\nfunction makeConditionExclusionMapFromStrSub(conditionStr: string, conditionMap: Map<string, string[] | null>, exclusionMap: Map<string, string[] | null>, exclusion: string | null) {\r\n    const myCondStrArr = conditionStr.split(/[@=]/);\r\n    const myName = myCondStrArr[0];\r\n    if (myCondStrArr.length == 1) {\r\n        pushToMapValueArray(conditionMap, myName, null);\r\n    } else if (myCondStrArr.length == 2) {\r\n        if (myCondStrArr[1].indexOf(',') != -1) {\r\n            const re = new RegExp('([^0-9]*?)([\\\\+\\\\-0-9\\\\.,]+)(.*)');  // 表現可能:-10,+60%\r\n            const reRet = re.exec(myCondStrArr[1]);\r\n            if (reRet) {\r\n                const prefix = reRet[1];\r\n                const condValueArr = reRet[2].split(',');\r\n                const postfix = reRet[3];\r\n                condValueArr.forEach(value => {\r\n                    pushToMapValueArray(conditionMap, myName, prefix + value + postfix);\r\n                });\r\n            }\r\n        } else if (myCondStrArr[1].indexOf('-') != -1) {\r\n            const re = new RegExp('([^0-9\\\\.]*)(-?[0-9\\\\.]+)-(-?[0-9\\\\.]+)(.*)');   // 数値部に+は含められない。prefixには含められる。\r\n            const re2 = new RegExp('/([0-9\\\\.]+)(.*)');\r\n            const reRet = re.exec(myCondStrArr[1]);\r\n            if (reRet) {\r\n                const prefix = reRet[1];\r\n                const rangeStart = Number(reRet[2]);\r\n                const rangeEnd = Number(reRet[3]);\r\n                let step = rangeStart;\r\n                let postfix = reRet[4];\r\n                if (postfix) {\r\n                    const re2Ret = re2.exec(postfix);\r\n                    if (re2Ret) {\r\n                        step = Number(re2Ret[1]);\r\n                        postfix = re2Ret[2];\r\n                    }\r\n                }\r\n                for (let i = rangeStart; i < rangeEnd; i = addDecimal(i, step, rangeEnd)) {\r\n                    pushToMapValueArray(conditionMap, myName, prefix + String(i) + postfix);\r\n                }\r\n                pushToMapValueArray(conditionMap, myName, prefix + String(rangeEnd) + postfix);\r\n            } else {\r\n                pushToMapValueArray(conditionMap, myName, myCondStrArr[1]);\r\n            }\r\n        } else {\r\n            pushToMapValueArray(conditionMap, myName, myCondStrArr[1]);\r\n        }\r\n    } else {\r\n        console.error(conditionStr, conditionMap, exclusionMap);\r\n    }\r\n    if (exclusion) {\r\n        exclusion.split(',').forEach(e => {\r\n            pushToMapValueArray(exclusionMap, myName, e);\r\n        });\r\n    }\r\n}\r\n\r\nexport function setupConditionValues(conditionInput: TConditionInput, characterInput: TCharacterInput) {\r\n    try {\r\n        const conditionValues = conditionInput.conditionValues;\r\n        const checkboxList = conditionInput.checkboxList as TCheckboxEntry[];\r\n        const selectList = conditionInput.selectList as TSelectEntry[];\r\n\r\n        checkboxList.splice(0, checkboxList.length);\r\n        selectList.splice(0, selectList.length);\r\n\r\n        const masters = [characterInput.characterMaster, characterInput.weaponMaster, ...characterInput.artifactSetMasters];\r\n        for (const master of masters.filter(s => s)) {\r\n            if ('オプション初期値' in master) {\r\n                for (const key of Object.keys((master as any)['オプション初期値'])) {\r\n                    if (!(key in conditionValues)) {\r\n                        conditionValues[key] = (master as any)['オプション初期値'][key];\r\n                    }\r\n                }\r\n            }\r\n            // 聖遺物セット効果のオプション初期値は変な位置にあります\r\n            if ('4セット効果' in master && 'オプション初期値' in (master as any)['4セット効果']) {\r\n                for (const key of Object.keys((master as any)['4セット効果']['オプション初期値'])) {\r\n                    if (!(key in conditionValues)) {\r\n                        conditionValues[key] = (master as any)['4セット効果']['オプション初期値'][key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n            if (myDamageDetail) {\r\n                const conditionMap: Map<string, any[] | null> = myDamageDetail.条件;\r\n                const exclusionMap: Map<string, string[] | null> = myDamageDetail.排他;\r\n\r\n                conditionMap.forEach((value: string[] | null, key: string) => {\r\n                    if (value == null) {\r\n                        if (checkboxList.filter(s => s.name == key).length == 0) {\r\n                            checkboxList.push({ name: key });\r\n                        }\r\n                    } else {\r\n                        if (selectList.filter(s => s.name == key).length == 0) {\r\n                            const required = value[0].startsWith(\"required_\");\r\n                            selectList.push({\r\n                                name: key,\r\n                                options: value,\r\n                                required: required,\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    if (key in conditionValues && conditionValues[key] != null) {\r\n                        const exclusions = exclusionMap.get(key);\r\n                        if (exclusions) {\r\n                            for (const exclusion of exclusions) {\r\n                                if (exclusion in conditionValues) {\r\n                                    const conditionValue = conditionMap.get(exclusion);\r\n                                    if (conditionValue !== undefined) {\r\n                                        if (conditionValue === null) {  // checkbox\r\n                                            conditionValues[exclusion] = false;\r\n                                        } else {    // select\r\n                                            conditionValues[exclusion] = 0;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (value === null) {   // checkbox\r\n                            let checked = true;\r\n                            const arr = exclusionMap.get(key);\r\n                            if (arr && arr.filter(s => conditionValues[s]).length > 0) {\r\n                                checked = false;\r\n                            }\r\n                            conditionValues[key] = checked;\r\n                        } else {   // select\r\n                            let selectedIndex = value.length - 1;\r\n                            const arr = exclusionMap.get(key);\r\n                            if (arr && arr.filter(s => conditionValues[s]).length > 0) {\r\n                                selectedIndex = 0;\r\n                            }\r\n                            conditionValues[key] = selectedIndex;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    } catch (error) {\r\n        console.error(conditionInput, characterInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nfunction pushToMapValueArray(map: Map<any, any>, key: any, value: any) {\r\n    if (value == null) {\r\n        if (!map.has(key)) {\r\n            map.set(key, null);\r\n        }\r\n    } else if (map.has(key)) {\r\n        const oldValue = map.get(key);\r\n        if (oldValue == null) {\r\n            map.set(key, [value]);\r\n        } else if (!oldValue.includes(value)) {\r\n            map.get(key).push(value);\r\n        }\r\n    } else {\r\n        map.set(key, [value]);\r\n    }\r\n}\r\n\r\nfunction getDecimalLength(value: number): number {\r\n    const arr = ('' + value).split('.');\r\n    return arr.length > 1 ? arr[1].length : 0;\r\n}\r\n\r\nexport function multiplyDecimal(value1: number, value2: number): number {\r\n    const decimalLength = getDecimalLength(value1) + getDecimalLength(value2);\r\n    const intValue1 = Number(('' + value1).replace('.', ''));\r\n    const intValue2 = Number(('' + value2).replace('.', ''));\r\n    const result = (intValue1 * intValue2) / Math.pow(10, decimalLength);\r\n    return Number(result);\r\n}\r\n\r\nexport function addDecimal(value1: number, value2: number, opt_max?: number): number {\r\n    const k = Math.pow(10, Math.max(getDecimalLength(value1), getDecimalLength(value2)));\r\n    let result = (multiplyDecimal(value1, k) + multiplyDecimal(value2, k)) / k;\r\n    if (opt_max != undefined) {\r\n        result = Math.min(result, opt_max);\r\n    }\r\n    return result;\r\n}\r\n\r\nconst analyzeFormulaStr = function (formulaStr: number | string, opt_defaultItem: string | null = null) {\r\n    const resultArr = [] as any[];\r\n    const re = new RegExp('([\\\\+\\\\-\\\\*/]?)([^\\\\+\\\\-\\\\*/]+)(.*)');\r\n    let workStr = String(formulaStr);\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n        const reRet = re.exec(workStr);\r\n        if (!reRet) {\r\n            resultArr.push(workStr);\r\n            break;\r\n        }\r\n        if (reRet[1]) { // + - * /\r\n            resultArr.push(reRet[1]);\r\n        }\r\n        resultArr.push(analyzeFormulaStrSub(reRet[2], opt_defaultItem));\r\n        if (!reRet[3]) {\r\n            break;\r\n        }\r\n        workStr = reRet[3];\r\n    }\r\n    return resultArr;\r\n}\r\n\r\nfunction analyzeFormulaStrSub(formulaStr: string, opt_defaultItem: string | null = null) {\r\n    const resultArr = [] as any;\r\n    if (isNumber(formulaStr)) {\r\n        resultArr.push(Number(formulaStr));\r\n    } else {\r\n        const strArr = (formulaStr as string).split('%');\r\n        if (strArr.length == 1) {\r\n            resultArr.push(strArr[0]);\r\n        } else {\r\n            resultArr.push(Number(strArr[0]) / 100);\r\n            resultArr.push('*');\r\n            if (strArr[1].length > 0) {\r\n                resultArr.push(strArr[1]);\r\n            } else if (opt_defaultItem != null) {\r\n                resultArr.push(opt_defaultItem);\r\n            }\r\n        }\r\n    }\r\n    return resultArr;\r\n}\r\n\r\nexport function makeSharedata(savedata: TAnyObject) {\r\n    const sharedataArr = [] as any[];\r\n\r\n    let character: TCharacterKey;\r\n    let weaponType: TWeaponTypeKey;\r\n\r\n    キャラクター構成PROPERTY_MAP.forEach((value, key) => {\r\n        let newValue = savedata[key];\r\n        let myBasename;\r\n        switch (key) {\r\n            case 'キャラクター':\r\n                character = newValue as TCharacterKey;\r\n                myBasename = basename(CHARACTER_MASTER[character]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '武器':\r\n                weaponType = CHARACTER_MASTER[character]['武器'] as TWeaponTypeKey;\r\n                myBasename = basename((WEAPON_MASTER as any)[weaponType][newValue]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '聖遺物セット効果1':\r\n            case '聖遺物セット効果2':\r\n                if (newValue == 'NONE') {\r\n                    newValue = '';  // 聖遺物セット効果なし\r\n                } else {\r\n                    myBasename = basename(ARTIFACT_SET_MASTER[newValue as TArtifactSetKey]['image']);\r\n                    newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                }\r\n                break;\r\n            case '聖遺物メイン効果1':\r\n            case '聖遺物メイン効果2':\r\n            case '聖遺物メイン効果3':\r\n            case '聖遺物メイン効果4':\r\n            case '聖遺物メイン効果5':\r\n                if (newValue) {\r\n                    newValue = newValue.split('_')[0] + '_' + ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue.split('_')[1]);\r\n                }\r\n                break;\r\n            case '聖遺物優先するサブ効果1':\r\n            case '聖遺物優先するサブ効果2':\r\n            case '聖遺物優先するサブ効果3':\r\n                if (newValue) {\r\n                    newValue = ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue);\r\n                }\r\n                break;\r\n        }\r\n        sharedataArr.push(newValue);\r\n    });\r\n    Object.keys(savedata).forEach(key => {\r\n        if (!キャラクター構成PROPERTY_MAP.has(key)) {\r\n            sharedataArr.push(key + '=' + savedata[key]);\r\n        }\r\n    });\r\n\r\n    return sharedataArr.join(',');\r\n}\r\n\r\nfunction openTwitter(text: string, url: string, opt_hashtags?: string, opt_via?: string) {\r\n    const baseUrl = 'https://twitter.com/intent/tweet?';\r\n    const params = new URLSearchParams();\r\n    params.append('text', text);\r\n    params.append('url', url);\r\n    if (opt_hashtags) {\r\n        params.append('hashtags', opt_hashtags);\r\n    }\r\n    if (opt_via) {\r\n        params.append('via', opt_via);\r\n    }\r\n    const query = params.toString();\r\n    const shareUrl = `${baseUrl}${query}`;\r\n    console.log(params);\r\n    console.log(shareUrl);\r\n    window.open(shareUrl);\r\n}\r\n\r\nexport function shareByTwitter(characterInput: TCharacterInput, artifactDetailInput: TArtifactDetailInput, conditionInput: TConditionInput) {\r\n    const savedata = makeSavedata(characterInput, artifactDetailInput, conditionInput);\r\n    const sharedata = makeSharedata(savedata);\r\n\r\n    const text = characterInput.buildname;\r\n    const encoded = encodeURI(sharedata);\r\n    const url = 'https://asagume.github.io/gencalc/' + '?allin=' + encoded;\r\n\r\n    openTwitter(text, url);\r\n}\r\n\r\nexport function getMaxConstellation(characterMaster: TCharacterDetail) {\r\n    let max = 0;\r\n    if ('命ノ星座' in characterMaster) {\r\n        max = Object.keys(characterMaster.命ノ星座).length;\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function getMaxTalentLevel(characterMaster: TCharacterDetail, key: string) {\r\n    let max = 10;\r\n    if (key in characterMaster) {\r\n        const talentObj = (characterMaster as any)[key];\r\n        if (\"詳細\" in talentObj) {\r\n            for (const detailObj of talentObj.詳細) {\r\n                if (\"数値\" in detailObj && isPlainObject(detailObj.数値)) {\r\n                    const work = Object.keys(detailObj.数値).length;\r\n                    if (max < work) max = work;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function pushBuildinfoToSession(character: TCharacterKey | string, buildname?: string, builddata?: any) {\r\n    sessionStorage.setItem('character', character);\r\n    if (buildname) {\r\n        sessionStorage.setItem('buildname', buildname);\r\n    }\r\n    if (builddata) {\r\n        sessionStorage.setItem('builddata', JSON.stringify(builddata));\r\n    }\r\n}\r\n\r\nexport function popBuildinfoFromSession() {\r\n    const result: [string | undefined, string | undefined, TAnyObject | undefined] = [undefined, undefined, undefined];\r\n    const character = sessionStorage.getItem('character');\r\n    if (character) {\r\n        result[0] = character;\r\n        const buildname = sessionStorage.getItem('buildname');\r\n        if (buildname) {\r\n            result[1] = buildname;\r\n        }\r\n        const builddata = sessionStorage.getItem('builddata');\r\n        if (builddata) {\r\n            result[2] = JSON.parse(builddata);\r\n        }\r\n    }\r\n    sessionStorage.removeItem('character');\r\n    sessionStorage.removeItem('buildname');\r\n    sessionStorage.removeItem('builddata');\r\n    return result;\r\n}\r\n\r\n","export type TAnyObject = {\r\n    [key: string]: any\r\n}\r\n\r\nimport CHARACTER_MASTER from '../public/data/CharacterMaster.json'// assert {type: 'json'}\r\n\r\nimport SWORD_MASTER from '../public/data/SwordMaster.json'// assert {type: 'json'}\r\nimport CLAYMORE_MASTER from '../public/data/ClaymoreMaster.json'// assert {type: 'json'}\r\nimport POLEARM_MASTER from '../public/data/PolearmMaster.json'// assert {type: 'json'}\r\nimport BOW_MASTER from '../public/data/BowMaster.json'// assert {type: 'json'}\r\nimport CATALYST_MASTER from '../public/data/CatalystMaster.json'// assert {type: 'json'}\r\n\r\nimport ARTIFACT_SET_MASTER from '../public/data/ArtifactSetMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_MAIN_MASTER from '../public/data/ArtifactMainMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_SUB_MASTER from '../public/data/ArtifactSubMaster.json'// assert {type: 'json'}\r\n\r\nimport ENEMY_MASTER from '../public/data/EnemyMaster.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_RESONANCE_MASTER from '../public/data/ElementalResonanceMaster.json'// assert {type: 'json'}\r\nimport TEAM_OPTION_MASTER from '../public/data/TeamOptionMaster.json'// assert {type: 'json'}\r\nimport OPTION1_MASTER from '../public/data/OptionMaster1.json'// assert {type: 'json'}\r\nimport OPTION2_MASTER from '../public/data/OptionMaster2.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_REACTION_MASTER from '../public/data/ElementalReactionMaster.json'// assert {type: 'json'}\r\n\r\n// import HOYO_DICTIONARY2 from '../public/data/HoYoDictionary2.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY4 from '../public/data/HoYoDictionary4.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY5 from '../public/data/HoYoDictionary5.json'// assert {type: 'json'}\r\n// import LOCAL_DICTIONARY from '../public/data/LocalDictionary.json'// assert {type: 'json'}\r\n// import { isPlainObject, isString } from './common'\r\n\r\nexport {\r\n    CHARACTER_MASTER,\r\n    ARTIFACT_SET_MASTER,\r\n    ARTIFACT_MAIN_MASTER,\r\n    ARTIFACT_SUB_MASTER,\r\n    ENEMY_MASTER,\r\n    ELEMENTAL_RESONANCE_MASTER,\r\n    TEAM_OPTION_MASTER,\r\n    OPTION1_MASTER,\r\n    OPTION2_MASTER,\r\n    ELEMENTAL_REACTION_MASTER\r\n};\r\n\r\n// function removeStrFromUrl(obj: any, str: string) {\r\n//     if (isPlainObject(obj)) {\r\n//         for (const key of Object.keys(obj)) {\r\n//             if (isString(obj[key])) {\r\n//                 obj[key] = obj[key].replace(str, '');\r\n//             } else if (isPlainObject(obj[key])) {\r\n//                 removeStrFromUrl(obj[key], str);\r\n//             } else if (Array.isArray(obj[key])) {\r\n//                 for (const entry of obj[key]) {\r\n//                     removeStrFromUrl(entry, str);\r\n//                 }\r\n//             }\r\n//         }\r\n//     }\r\n// }\r\n\r\n// for (const master of [\r\n//     CHARACTER_MASTER,\r\n//     SWORD_MASTER,\r\n//     CLAYMORE_MASTER,\r\n//     POLEARM_MASTER,\r\n//     BOW_MASTER,\r\n//     CATALYST_MASTER,\r\n//     ARTIFACT_SET_MASTER\r\n// ]) {\r\n//     for (const key of Object.keys(master)) {\r\n//         removeStrFromUrl((master as any)[key], '');\r\n//     }\r\n// }\r\n\r\nexport const IMG_SRC_DUMMY = \"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\";\r\n\r\nexport type TVisionKey = '炎' | '水' | '風' | '雷' | '草' | '氷' | '岩';\r\nexport type TWeaponTypeKey = '片手剣' | '両手剣' | '長柄武器' | '弓' | '法器';\r\n\r\nexport type TCharacterMaster = typeof CHARACTER_MASTER;\r\nexport type TCharacter = {\r\n    レアリティ: 4 | 5,\r\n    元素: TVisionKey,\r\n    武器: TWeaponTypeKey,\r\n    誕生日?: string,\r\n    import: string,\r\n}\r\nexport type TCharacterKey = keyof typeof CHARACTER_MASTER\r\nexport type TCharacterEntry = TCharacter & {\r\n    key: TCharacterKey,\r\n    icon_url: string,\r\n}\r\n\r\nexport type TCharacterDetail = {\r\n    名前: TCharacterKey,\r\n    説明: string,\r\n    icon_url: string,\r\n    レアリティ: 4 | 5,\r\n    武器: TWeaponTypeKey,\r\n    元素: TVisionKey,\r\n    baseInfo: any,\r\n    region?: string,\r\n    ステータス: TCharacterStats,\r\n    通常攻撃: any,\r\n    重撃: any,\r\n    落下攻撃: any,\r\n    元素スキル: any,\r\n    元素爆発: any,\r\n    固有天賦: any[],\r\n    命ノ星座?: any,\r\n    特殊通常攻撃?: any,\r\n    特殊重撃?: any,\r\n    特殊落下攻撃?: any,\r\n    その他天賦?: any,\r\n    チームバフ?: any[],\r\n    オプション初期値?: any,\r\n    固有変数?: any,\r\n    おすすめセット: any[],\r\n}\r\nexport type TCharacterStats = {\r\n    基礎HP: {\r\n        [key: string]: number,\r\n    },\r\n    基礎攻撃力: {\r\n        [key: string]: number,\r\n    },\r\n    基礎防御力: {\r\n        [key: string]: number,\r\n    },\r\n    [key: string]: {\r\n        [key: string]: number,\r\n    }\r\n};\r\nexport type TLeveldValue = {\r\n    [key: number | string]: number,\r\n};\r\nexport type TTalentFormula = number | string | TLeveldValue;\r\nexport type TCharacterTalent = {\r\n    名前?: string,\r\n    詳細?: {\r\n        名前?: string,\r\n        種類?: string,\r\n        対象?: string,\r\n        条件?: string,\r\n    }[],\r\n    [key: string]: string | number | any[] | undefined,\r\n};\r\n\r\nexport type TWeaponRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TWeaponStats = {\r\n    基礎攻撃力: any,\r\n    [key: string]: any,\r\n}\r\nexport type TWeapon = {\r\n    レアリティ: TWeaponRarity,\r\n    import: string,\r\n}\r\nexport type TSwordKey = keyof typeof SWORD_MASTER;\r\nexport type TClaymoreKey = keyof typeof CLAYMORE_MASTER;\r\nexport type TPolearmKey = keyof typeof POLEARM_MASTER;\r\nexport type TBowKey = keyof typeof BOW_MASTER;\r\nexport type TCatalystKey = keyof typeof CATALYST_MASTER;\r\nexport type TWeaponKey = TSwordKey | TClaymoreKey | TPolearmKey | TBowKey | TCatalystKey;\r\nexport type TWeaponEntry = TWeapon & {\r\n    key: TWeaponKey,\r\n    icon_url: string,\r\n};\r\nexport const WEAPON_DETAIL_TEMPLATE = {\r\n    名前: '西風猟弓',\r\n    説明: '',\r\n    icon_url: IMG_SRC_DUMMY,\r\n    レアリティ: 4,\r\n    種類: '弓',\r\n    ステータス: {\r\n        基礎攻撃力: {}\r\n    },\r\n};\r\nexport type TWeaponDetail = {\r\n    名前: TWeaponKey,\r\n    説明: string,\r\n    icon_url: string,\r\n    レアリティ: TWeaponRarity,\r\n    種類: TWeaponTypeKey,\r\n    ステータス: TWeaponStats,\r\n    武器スキル?: any,\r\n    チームバフ?: any[],\r\n    オプション初期値?: any,\r\n    固有変数?: any,\r\n};\r\n\r\nexport type TArtifactSetEffect = {\r\n    説明: string,\r\n    詳細?: any[]\r\n};\r\nexport type TArtifactSetRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TArtifactSet = {\r\n    レアリティ: TArtifactSetRarity,\r\n    image: string,\r\n    '2セット効果'?: TArtifactSetEffect,\r\n    '4セット効果'?: TArtifactSetEffect,\r\n    オプション初期値?: { [key: string]: boolean | number }\r\n};\r\nexport type TArtifactSetKey = keyof typeof ARTIFACT_SET_MASTER;\r\nexport type TArtifactSetEntry = TArtifactSet & {\r\n    key: TArtifactSetKey,\r\n    icon_url: string,\r\n};\r\n\r\nexport type TArtifactMainStat = keyof typeof ARTIFACT_MAIN_MASTER[5]\r\nexport type TArtifactMainRarity = 4 | 5;\r\nexport type TArtifactMain = {\r\n    5: TArtifactMainStat,\r\n    4: TArtifactMainStat,\r\n};\r\n\r\nfunction getIconUrl(master: TAnyObject) {\r\n    if (master.icon_url) return master.icon_url;\r\n    if (master.image) return master.image;\r\n    if (master.import) {\r\n        let result = master.import.replace('data/', 'images/');\r\n        if (result.indexOf('characters/') != -1) {\r\n            result = result.replace('characters/', 'characters/face/');\r\n        }\r\n        result = result.replace(/json$/, 'png');\r\n        return result;\r\n    }\r\n    return null;\r\n}\r\n\r\nexport const CHARACTER_MASTER_LIST: TCharacterEntry[] = [];\r\n(Object.keys(CHARACTER_MASTER) as TCharacterKey[]).forEach(key => {\r\n    const master: any = CHARACTER_MASTER[key];\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    CHARACTER_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const WEAPON_MASTER = {\r\n    片手剣: SWORD_MASTER,\r\n    両手剣: CLAYMORE_MASTER,\r\n    長柄武器: POLEARM_MASTER,\r\n    弓: BOW_MASTER,\r\n    法器: CATALYST_MASTER,\r\n};\r\n(Object.keys(WEAPON_MASTER) as TWeaponTypeKey[]).forEach(key2 => {\r\n    const typedMaster = WEAPON_MASTER[key2] as any; // お手上げ\r\n    Object.keys(typedMaster).forEach(key => {\r\n        const master = typedMaster[key];\r\n        master.key = key;\r\n        master.icon_url = getIconUrl(master);\r\n    });\r\n})\r\nconst SWORD_MASTER_LIST = (Object.keys(SWORD_MASTER) as TSwordKey[]).map(key => SWORD_MASTER[key]);\r\nconst CLAYMORE_MASTER_LIST = (Object.keys(CLAYMORE_MASTER) as TClaymoreKey[]).map(key => CLAYMORE_MASTER[key]);\r\nconst POLEARM_MASTER_LIST = (Object.keys(POLEARM_MASTER) as TPolearmKey[]).map(key => POLEARM_MASTER[key]);\r\nconst BOW_MASTER_LIST = (Object.keys(BOW_MASTER) as TBowKey[]).map(key => BOW_MASTER[key]);\r\nconst CATALYST_MASTER_LIST = (Object.keys(CATALYST_MASTER) as TCatalystKey[]).map(key => CATALYST_MASTER[key]);\r\nexport const WEAPON_MASTER_LIST = {\r\n    片手剣: SWORD_MASTER_LIST,\r\n    両手剣: CLAYMORE_MASTER_LIST,\r\n    長柄武器: POLEARM_MASTER_LIST,\r\n    弓: BOW_MASTER_LIST,\r\n    法器: CATALYST_MASTER_LIST,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_LIST: TArtifactSetEntry[] = [];\r\n(Object.keys(ARTIFACT_SET_MASTER) as TArtifactSetKey[]).forEach(key => {\r\n    const master = ARTIFACT_SET_MASTER[key] as any;\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    ARTIFACT_SET_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const ARTIFACT_MAIN_MASTER_STATLIST: string[] = Object.keys(ARTIFACT_MAIN_MASTER[5]);\r\n\r\nexport const ARTIFACT_SUB_MASTER_STATLIST = Object.keys(ARTIFACT_SUB_MASTER);\r\nexport type TArtifactSubKey = keyof typeof ARTIFACT_SUB_MASTER;\r\n\r\nexport type TEnemy = {\r\n    炎元素耐性: number,\r\n    水元素耐性: number,\r\n    風元素耐性: number,\r\n    雷元素耐性: number,\r\n    草元素耐性: number,\r\n    氷元素耐性: number,\r\n    岩元素耐性: number,\r\n    物理耐性: number,\r\n    [key: string]: number,\r\n};\r\nexport type TEnemyKey = keyof typeof ENEMY_MASTER;\r\nexport type TEnemyEntry = TEnemy & {\r\n    key: TEnemyKey,\r\n};\r\nfor (const key of Object.keys(ENEMY_MASTER)) {\r\n    for (const stat of Object.keys((ENEMY_MASTER as any)[key])) {\r\n        if ((ENEMY_MASTER as any)[key][stat] >= 1000) { // 完全耐性\r\n            (ENEMY_MASTER as any)[key][stat] = Infinity;\r\n        }\r\n    }\r\n}\r\nexport const ENEMY_MASTER_LIST = (Object.keys(ENEMY_MASTER) as TEnemyKey[])\r\n    .map(key => ({ key: key, ...ENEMY_MASTER[key] }));\r\n\r\nexport type TElementalResonanceKey = keyof typeof ELEMENTAL_RESONANCE_MASTER;\r\nexport const ELEMENTAL_RESONANCE_MASTER_LIST = (Object.keys(ELEMENTAL_RESONANCE_MASTER) as TElementalResonanceKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_RESONANCE_MASTER[key] }));\r\n\r\nexport type TTeamOptionKey = keyof typeof TEAM_OPTION_MASTER;\r\nexport const TEAM_OPTION_MASTER_LIST = (Object.keys(TEAM_OPTION_MASTER) as TTeamOptionKey[])\r\n    .map(key => ({ key: key, ...TEAM_OPTION_MASTER[key] }));\r\n\r\nexport type TOption1Key = keyof typeof OPTION1_MASTER;\r\nexport const OPTION1_MASTER_LIST = (Object.keys(OPTION1_MASTER) as TOption1Key[])\r\n    .map(key => ({ key: key, ...OPTION1_MASTER[key] }));\r\n\r\nexport type TOption2Key = keyof typeof OPTION2_MASTER;\r\nexport const OPTION2_MASTER_LIST = (Object.keys(OPTION2_MASTER) as TOption2Key[])\r\n    .map(key => ({ key: key, ...OPTION2_MASTER[key] }));\r\n\r\nexport type TElementalReactionKey = keyof typeof ELEMENTAL_REACTION_MASTER;\r\nexport const ELEMENTAL_REACTION_MASTER_LIST = (Object.keys(ELEMENTAL_REACTION_MASTER) as TElementalReactionKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_REACTION_MASTER[key] }));\r\n\r\n// export const DICTIONARY_MASTER = { ...HOYO_DICTIONARY2, ...HOYO_DICTIONARY4, ...HOYO_DICTIONARY5, ...LOCAL_DICTIONARY };\r\n\r\n////////////////\r\n////////////////\r\nconst CHARACTER_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param {string} character \r\n * @returns {Promise<any>}\r\n */\r\nexport async function getCharacterMasterDetail(character: TCharacterKey): Promise<TCharacterDetail> {\r\n    try {\r\n        if (!CHARACTER_MASTER_DETAIL_MAP.has(character)) {\r\n            const url = CHARACTER_MASTER[character]['import'].replace(/^\\//, '');\r\n            const characterMaster = await fetch(url).then(resp => resp.json());\r\n            // 通常攻撃の画像URLを共用のURLに差し替えます\r\n            const weaponType = CHARACTER_MASTER[character].武器 as TWeaponTypeKey;\r\n            characterMaster.通常攻撃.icon_url = WEAPON_IMG_SRC[weaponType];\r\n            CHARACTER_MASTER_DETAIL_MAP.set(character, characterMaster);\r\n        }\r\n        return CHARACTER_MASTER_DETAIL_MAP.get(character);\r\n    } catch (error) {\r\n        console.error(character);\r\n        throw error;\r\n    }\r\n}\r\n\r\nconst WEAPON_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param weapon \r\n * @param opt_weaponType \r\n * @returns \r\n */\r\nexport async function getWeaponMasterDetail(weapon: TWeaponKey, opt_weaponType?: TWeaponTypeKey): Promise<TWeaponDetail> {\r\n    try {\r\n        if (!WEAPON_MASTER_DETAIL_MAP.has(weapon)) {\r\n            let weaponTypeArr;\r\n            if (opt_weaponType) weaponTypeArr = [opt_weaponType];\r\n            else weaponTypeArr = Object.keys(WEAPON_MASTER);\r\n            for (const weaponType of weaponTypeArr) {\r\n                if (weapon in WEAPON_MASTER[weaponType as TWeaponTypeKey]) {\r\n                    const typedMaster: any = WEAPON_MASTER[weaponType as TWeaponTypeKey];\r\n                    const url = typedMaster[weapon]['import'];\r\n                    const weaponMaster: any = await fetch(url).then(resp => resp.json());\r\n                    weaponMaster.種類 = weaponType; // 上書き\r\n                    WEAPON_MASTER_DETAIL_MAP.set(weapon, weaponMaster);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return WEAPON_MASTER_DETAIL_MAP.get(weapon);\r\n    } catch (error) {\r\n        console.error(weapon, opt_weaponType);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const ELEMENT_COLOR_CLASS = {\r\n    炎: 'pyro',\r\n    水: 'hydro',\r\n    風: 'anemo',\r\n    雷: 'electro',\r\n    草: 'dendro',\r\n    氷: 'cryo',\r\n    岩: 'geo'\r\n};\r\nexport type TElementColorClassKey = keyof typeof ELEMENT_COLOR_CLASS;\r\n\r\nexport const ELEMENT_BG_COLOR_CLASS = {\r\n    炎: 'pyro-bg',\r\n    水: 'hydro-bg',\r\n    風: 'anemo-bg',\r\n    雷: 'electro-bg',\r\n    草: 'dendro-bg',\r\n    氷: 'cryo-bg',\r\n    岩: 'geo-bg'\r\n};\r\n\r\nexport const ELEMENT_IMG_SRC = {\r\n    炎: 'images/element_pyro.png',\r\n    水: 'images/element_hydro.png',\r\n    風: 'images/element_anemo.png',\r\n    雷: 'images/element_electro.png',\r\n    草: 'images/element_dendro.png',\r\n    氷: 'images/element_cryo.png',\r\n    岩: 'images/element_geo.png'\r\n};\r\n\r\nexport const WEAPON_IMG_SRC = {\r\n    片手剣: 'images/characters/NormalAttack_sword.png',\r\n    両手剣: 'images/characters/NormalAttack_claymore.png',\r\n    長柄武器: 'images/characters/NormalAttack_polearm.png',\r\n    弓: 'images/characters/NormalAttack_bow.png',\r\n    法器: 'images/characters/NormalAttack_catalyst.png',\r\n};\r\n\r\nexport const STAR_BACKGROUND_IMAGE_CLASS = {\r\n    1: 'star1-bg',\r\n    2: 'star2-bg',\r\n    3: 'star3-bg',\r\n    4: 'star4-bg',\r\n    5: 'star5-bg'\r\n}\r\n\r\nexport const キャラクター構成PROPERTY_MAP = new Map([\r\n    ['キャラクター', null],\r\n    ['レベル', null],\r\n    ['命ノ星座', 0],\r\n    ['通常攻撃レベル', 0],\r\n    ['元素スキルレベル', 0],\r\n    ['元素爆発レベル', 0],\r\n    ['武器', null],\r\n    ['武器レベル', 0],\r\n    ['精錬ランク', 0],\r\n    ['聖遺物セット効果1', null],\r\n    ['聖遺物セット効果2', null],\r\n    ['聖遺物メイン効果1', null],\r\n    ['聖遺物メイン効果2', null],\r\n    ['聖遺物メイン効果3', null],\r\n    ['聖遺物メイン効果4', null],\r\n    ['聖遺物メイン効果5', null],\r\n    ['聖遺物サブ効果HP', 0],\r\n    ['聖遺物サブ効果攻撃力', 0],\r\n    ['聖遺物サブ効果防御力', 0],\r\n    ['聖遺物サブ効果元素熟知', 0],\r\n    ['聖遺物サブ効果会心率', 0],\r\n    ['聖遺物サブ効果会心ダメージ', 0],\r\n    ['聖遺物サブ効果元素チャージ効率', 0],\r\n    ['聖遺物サブ効果HPP', 0],\r\n    ['聖遺物サブ効果攻撃力P', 0],\r\n    ['聖遺物サブ効果防御力P', 0],\r\n    ['聖遺物優先するサブ効果1', null],\r\n    ['聖遺物優先するサブ効果1上昇値', -1],\r\n    ['聖遺物優先するサブ効果1上昇回数', -1],\r\n    ['聖遺物優先するサブ効果2', null],\r\n    ['聖遺物優先するサブ効果2上昇値', -1],\r\n    ['聖遺物優先するサブ効果2上昇回数', -1],\r\n    ['聖遺物優先するサブ効果3', null],\r\n    ['聖遺物優先するサブ効果3上昇値', -1],\r\n    ['聖遺物優先するサブ効果3上昇回数', -1]\r\n]);\r\n\r\nexport const DAMAGE_CATEGORY_ARRAY = ['通常攻撃ダメージ', '重撃ダメージ', '落下攻撃ダメージ', '元素スキルダメージ', '元素爆発ダメージ'];\r\n\r\nexport const RECOMMEND_ABBREV_MAP = new Map([\r\n    ['HP%', 'HP'], ['元素熟知', '熟'], ['元素チャージ効率', 'ﾁｬ'], ['会心率', '率'], ['会心ダメージ', 'ダ'], ['与える治療効果', '治']\r\n]);\r\n\r\nexport const RECOMMEND_ABBREV_EN_MAP = new Map([\r\n    ['HP%', 'HP'], ['攻撃力%', 'AT'], ['防御力%', 'DF'], ['元素熟知', 'EM'],\r\n    ['会心率', 'CR'], ['会心ダメージ', 'CD'], ['元素チャージ効率', 'ER'], ['与える治療効果', 'HE'],\r\n    ['炎元素ダメージバフ', 'Py'], ['水元素ダメージバフ', 'Hy'], ['風元素ダメージバフ', 'An'], ['雷元素ダメージバフ', 'El'], ['草元素ダメージバフ', 'De'], ['氷元素ダメージバフ', 'Cr'], ['岩元素ダメージバフ', 'Ge'], ['物理ダメージバフ', 'Ph'],\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_MAP = new Map([\r\n    ['HP', 'HP'],\r\n    ['攻撃力', 'ATK'],\r\n    ['防御力', 'DEF'],\r\n    ['元素熟知', 'ElementalMastery'],\r\n    ['会心率', 'CritRate'],\r\n    ['会心ダメージ', 'CritDMG'],\r\n    ['元素チャージ効率', 'EnergyRecharge'],\r\n    ['炎元素ダメージバフ', 'Pyro'],\r\n    ['水元素ダメージバフ', 'Hydro'],\r\n    ['風元素ダメージバフ', 'Anemo'],\r\n    ['雷元素ダメージバフ', 'Electro'],\r\n    ['草元素ダメージバフ', 'Dendro'],\r\n    ['氷元素ダメージバフ', 'Cryo'],\r\n    ['岩元素ダメージバフ', 'Geo'],\r\n    ['物理ダメージバフ', 'Physical'],\r\n    ['与える治療効果', 'Healing'],\r\n    ['HP%', 'HPp'],\r\n    ['攻撃力%', 'ATKp'],\r\n    ['防御力%', 'DEFp']\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP = new Map();\r\nARTIFACT_STAT_JA_EN_ABBREV_MAP.forEach((value, key) => {\r\n    ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP.set(value, key);\r\n});\r\n\r\nexport const GENSEN_MASTER_LIST = [\r\n    {\r\n        key: \"\",\r\n        values: [7, 7, 7],\r\n        counts: [0, 0, 0],\r\n    },\r\n    {\r\n        key: \"厳選初心者\",\r\n        values: [3, 3, 3],\r\n        counts: [7, 4, 4],\r\n    },\r\n    {\r\n        key: \"厳選1ヶ月\",\r\n        values: [3, 3, 3],\r\n        counts: [8, 5, 5],\r\n    },\r\n    {\r\n        key: \"厳選3ヶ月\",\r\n        values: [3, 3, 3],\r\n        counts: [11, 8, 7],\r\n    },\r\n    {\r\n        key: \"日々石割り\",\r\n        values: [1, 1, 1],\r\n        counts: [14, 11, 10],\r\n    },\r\n];\r\nexport type TGensen = { key: string; values: number[]; counts: number[] };\r\n\r\n","import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-28ef59ec\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"base-container\" }\nconst _hoisted_2 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"pane1\\\" data-v-28ef59ec><div class=\\\"header\\\" data-v-28ef59ec><div class=\\\"top-left\\\" data-v-28ef59ec><a href=\\\"./\\\" data-v-28ef59ec>げんかるく</a></div><div class=\\\"top-right\\\" data-v-28ef59ec><a href=\\\"https://enka.network/\\\" data-v-28ef59ec>Enka.Network</a></div></div></div>\", 1)\nconst _hoisted_3 = { class: \"pane2\" }\nconst _hoisted_4 = { id: \"uid\" }\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"material-symbols-outlined\" }, \" send \", -1))\nconst _hoisted_7 = [\n  _hoisted_6\n]\nconst _hoisted_8 = { class: \"time\" }\nconst _hoisted_9 = { class: \"pane3\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"UID\", -1))\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"NICKNAME\", -1))\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"AR\", -1))\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"WR\", -1))\nconst _hoisted_14 = { colspan: \"2\" }\nconst _hoisted_15 = { class: \"character\" }\nconst _hoisted_16 = [\"src\", \"alt\"]\nconst _hoisted_17 = [\"src\"]\nconst _hoisted_18 = {\n  key: 0,\n  class: \"constellation\"\n}\nconst _hoisted_19 = { class: \"level\" }\nconst _hoisted_20 = [\"src\"]\nconst _hoisted_21 = [\"src\"]\nconst _hoisted_22 = [\"src\"]\nconst _hoisted_23 = { key: 1 }\nconst _hoisted_24 = [\"onClick\", \"disabled\"]\nconst _hoisted_25 = [\"onClick\", \"disabled\"]\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"material-symbols-outlined\" }, \" save \", -1))\nconst _hoisted_27 = [\n  _hoisted_26\n]\nconst _hoisted_28 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"footer\\\" data-v-28ef59ec><hr data-v-28ef59ec><h2 data-v-28ef59ec> DATA IMPORTER <span style=\\\"font-size:smaller;\\\" data-v-28ef59ec>powered by</span> Enka.Network Ver.0.2.2 </h2> 《Enka.Network》様経由でゲーム内のキャラクターデータ取得して《げんかるく》に取り込むためのリンクを作成します。 <ol style=\\\"text-align:left;\\\" data-v-28ef59ec><li data-v-28ef59ec> UIDを入力後、<span class=\\\"material-symbols-outlined\\\" data-v-28ef59ec> send </span>をクリックしてください </li></ol><hr data-v-28ef59ec><p data-v-28ef59ec>下記の制約があります。</p><ol style=\\\"text-align:left;\\\" data-v-28ef59ec><li data-v-28ef59ec>不可：旅人</li><li data-v-28ef59ec>不可：げんかるくに実装されていないキャラクター</li><li data-v-28ef59ec>不可：げんかるくに実装されていない武器を装備しているデータ</li><li data-v-28ef59ec> 制限：げんかるくに実装されていない聖遺物セット効果はセット効果なし（NONE）に置き換えられる </li></ol><hr data-v-28ef59ec><dl class=\\\"history\\\" data-v-28ef59ec><dt data-v-28ef59ec>0.2.2</dt><dd data-v-28ef59ec> 突破していない武器を装備したキャラクターが含まれる場合に処理が止まる問題に対処。 </dd><dt data-v-28ef59ec>0.2.1</dt><dd data-v-28ef59ec> げんかるくを開く際のデータの受け渡し方法を変更（クエリストリングからセッションストレージへ） </dd><dt data-v-28ef59ec>0.2.0</dt><dd data-v-28ef59ec>Enka.NetworkのAPI(URL)変更に追従。機能復活。</dd></dl></div>\", 1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"form\", {\n          onSubmit: _cache[1] || (_cache[1] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.submit && _ctx.submit(...args)), [\"prevent\"]))\n        }, [\n          _createElementVNode(\"label\", null, [\n            _createTextVNode(\" UID: \"),\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.uid) = $event)),\n              type: \"text\",\n              maxlength: \"9\",\n              placeholder: \"ENTER UID\",\n              pattern: \"[0-9]+\"\n            }, null, 512), [\n              [_vModelText, _ctx.uid]\n            ])\n          ]),\n          _createElementVNode(\"button\", {\n            type: \"submit\",\n            disabled: _ctx.timer > 0\n          }, _hoisted_7, 8, _hoisted_5),\n          _createElementVNode(\"span\", _hoisted_8, \"  \" + _toDisplayString(_ctx.timer), 1)\n        ], 32)\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_9, [\n      (_ctx.u)\n        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n            _createElementVNode(\"table\", null, [\n              _createElementVNode(\"tr\", null, [\n                _hoisted_10,\n                _createElementVNode(\"td\", null, _toDisplayString(_ctx.u.uid), 1)\n              ]),\n              _createElementVNode(\"tr\", null, [\n                _hoisted_11,\n                _createElementVNode(\"td\", null, _toDisplayString(_ctx.u.playerInfo.nickname), 1)\n              ]),\n              _createElementVNode(\"tr\", null, [\n                _hoisted_12,\n                _createElementVNode(\"td\", null, _toDisplayString(_ctx.u.playerInfo.level), 1)\n              ]),\n              _createElementVNode(\"tr\", null, [\n                _hoisted_13,\n                _createElementVNode(\"td\", null, _toDisplayString(_ctx.u.playerInfo.worldLevel), 1)\n              ]),\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_14, [\n                  _createElementVNode(\"p\", null, _toDisplayString(_ctx.u.playerInfo.signature), 1)\n                ])\n              ])\n            ]),\n            _createElementVNode(\"ul\", null, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.characterInfoList, (characterInfo, index) => {\n                return (_openBlock(), _createElementBlock(\"li\", {\n                  class: \"character\",\n                  key: index\n                }, [\n                  (characterInfo.characterMaster)\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                        _createElementVNode(\"div\", _hoisted_15, [\n                          _createElementVNode(\"img\", {\n                            class: _normalizeClass('character ' + _ctx.characterBgClass(characterInfo)),\n                            src: _ctx.characterImgSrc(characterInfo),\n                            alt: _ctx.displayName(characterInfo.characterMaster.key)\n                          }, null, 10, _hoisted_16),\n                          _createElementVNode(\"img\", {\n                            class: \"vision\",\n                            src: _ctx.visionImgSrc(characterInfo),\n                            alt: \"vision\"\n                          }, null, 8, _hoisted_17),\n                          (characterInfo.constellation)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, _toDisplayString(characterInfo.constellation), 1))\n                            : _createCommentVNode(\"\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_19, \"Lv.\" + _toDisplayString(characterInfo.level), 1),\n                        _createElementVNode(\"img\", {\n                          class: \"weapon\",\n                          src: _ctx.weaponImgSrc(characterInfo),\n                          alt: \"weapon\"\n                        }, null, 8, _hoisted_20),\n                        _createElementVNode(\"img\", {\n                          class: \"artifact-set\",\n                          src: _ctx.artifactSetImgSrc(characterInfo, 0),\n                          alt: \"artifact-set\"\n                        }, null, 8, _hoisted_21),\n                        _createElementVNode(\"img\", {\n                          class: \"artifact-set\",\n                          src: _ctx.artifactSetImgSrc(characterInfo, 1),\n                          alt: \"artifact-set\"\n                        }, null, 8, _hoisted_22)\n                      ], 64))\n                    : _createCommentVNode(\"\", true),\n                  false\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, _toDisplayString(characterInfo.savedata), 1))\n                    : _createCommentVNode(\"\", true),\n                  _createElementVNode(\"div\", null, [\n                    _createElementVNode(\"button\", {\n                      onClick: ($event: any) => (_ctx.locate(index)),\n                      disabled: _ctx.buttonDisabled(index)\n                    }, \" OPEN GENCALC \", 8, _hoisted_24)\n                  ]),\n                  _createElementVNode(\"div\", null, [\n                    _createElementVNode(\"button\", {\n                      onClick: ($event: any) => (_ctx.save(index)),\n                      disabled: _ctx.saveButtonDisabled(index)\n                    }, _hoisted_27, 8, _hoisted_25)\n                  ])\n                ]))\n              }), 128))\n            ])\n          ], 64))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _hoisted_28\n  ]))\n}","\r\nimport { defineComponent, reactive, ref } from \"vue\";\r\nimport {\r\n  ARTIFACT_SET_MASTER,\r\n  CHARACTER_MASTER,\r\n  ELEMENT_IMG_SRC,\r\n  getCharacterMasterDetail,\r\n  IMG_SRC_DUMMY,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n  TAnyObject,\r\n  TArtifactSetEntry,\r\n  TCharacterEntry,\r\n  TCharacterKey,\r\n  TWeaponEntry,\r\n  WEAPON_MASTER,\r\n} from \"@/master\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport {\r\n  pushBuildinfoToSession,\r\n  突破レベルレベルARRAY,\r\n  聖遺物サブ効果ARRAY,\r\n} from \"@/input\";\r\nimport { deepcopy, overwriteObject } from \"@/common\";\r\n\r\ntype THoyoAvatarMasterValue = {\r\n  id: number;\r\n  name: string;\r\n  icon: string | null;\r\n  weapon_cat_id: number;\r\n  avatar_level: number;\r\n  element_attr_id: number;\r\n  max_level: number;\r\n};\r\ntype THoyoAvatarMaster = THoyoAvatarMasterValue[];\r\n\r\ntype THoyoWeaponMasterValue = {\r\n  id: number;\r\n  name: string;\r\n  icon: string | null;\r\n  weapon_cat_id: number;\r\n  weapon_level: number;\r\n  max_level: number;\r\n};\r\ntype THoyoWeaponMaster = THoyoWeaponMasterValue[];\r\n\r\ntype THoyoArtifactMasterValue = {\r\n  id: number;\r\n  name: string;\r\n  icon: string | null;\r\n  reliquary_cat_id: number;\r\n  reliquary_level: number;\r\n  max_level: number;\r\n};\r\ntype THoyoArtifactMaster = THoyoArtifactMasterValue[];\r\n\r\ntype THoyoSkillMasterValue = {\r\n  avatar_id: number;\r\n  skill_list: [\r\n    {\r\n      id: number;\r\n      group_id: number;\r\n      name: string;\r\n      icon: string | null;\r\n      max_level: number;\r\n    }\r\n  ];\r\n};\r\ntype THoyoSkillMaster = THoyoSkillMasterValue[];\r\n\r\nconst WEAPON_INFO_TEMPLATE = {\r\n  itemId: 0,\r\n  ascension: 0,\r\n  refine: 1,\r\n  level: 1,\r\n};\r\n\r\ntype TReliqStat = {\r\n  [key: string]: number;\r\n};\r\n\r\nconst RELIQ_INFO_TEMPLATE = {\r\n  itemIds: [] as number[],\r\n  rarities: [0, 0, 0, 0, 0],\r\n  mainStats: [\"\", \"\", \"\", \"\", \"\"],\r\n  subStatObj: {} as TReliqStat,\r\n};\r\n\r\nconst CHARACTER_INFO_TEMPLATE = {\r\n  avatarId: 0,\r\n  level: 1,\r\n  ascension: 0,\r\n  constellation: 0,\r\n  skillLevelList: [] as [string, number][],\r\n  weapon: WEAPON_INFO_TEMPLATE,\r\n  reliq: RELIQ_INFO_TEMPLATE,\r\n};\r\ntype TCharacterInfo = typeof CHARACTER_INFO_TEMPLATE & {\r\n  characterMaster?: TCharacterEntry;\r\n  weaponMaster?: TWeaponEntry;\r\n  artifactSetMasters?: [TArtifactSetEntry?, TArtifactSetEntry?];\r\n  savedata?: TAnyObject;\r\n};\r\n\r\nconst RELIQ_EQUIP_TYPE = [\r\n  \"EQUIP_BRACER\", // 生の花\r\n  \"EQUIP_NECKLACE\", // 死の羽\r\n  \"EQUIP_SHOES\", // 時の砂\r\n  \"EQUIP_RING\", // 空の杯\r\n  \"EQUIP_DRESS\", // 理の冠\r\n];\r\n\r\nconst FIGHT_PROP_STAT_OBJ = {\r\n  FIGHT_PROP_HP: \"HP\",\r\n  FIGHT_PROP_ATTACK: \"攻撃力\",\r\n  FIGHT_PROP_DEFENSE: \"防御力\",\r\n  FIGHT_PROP_HP_PERCENT: \"HP%\",\r\n  FIGHT_PROP_ATTACK_PERCENT: \"攻撃力%\",\r\n  FIGHT_PROP_DEFENSE_PERCENT: \"防御力%\",\r\n  FIGHT_PROP_ELEMENT_MASTERY: \"元素熟知\",\r\n  FIGHT_PROP_CRITICAL: \"会心率\",\r\n  FIGHT_PROP_CRITICAL_HURT: \"会心ダメージ\",\r\n  FIGHT_PROP_CHARGE_EFFICIENCY: \"元素チャージ効率\",\r\n  FIGHT_PROP_FIRE_ADD_HURT: \"炎元素ダメージバフ\",\r\n  FIGHT_PROP_WATER_ADD_HURT: \"水元素ダメージバフ\",\r\n  FIGHT_PROP_WIND_ADD_HURT: \"風元素ダメージバフ\",\r\n  FIGHT_PROP_ELEC_ADD_HURT: \"雷元素ダメージバフ\",\r\n  FIGHT_PROP_GRASS_ADD_HURT: \"草元素ダメージバフ\",\r\n  FIGHT_PROP_ICE_ADD_HURT: \"氷元素ダメージバフ\",\r\n  FIGHT_PROP_ROCK_ADD_HURT: \"岩元素ダメージバフ\",\r\n  FIGHT_PROP_PHYSICAL_ADD_HURT: \"物理ダメージバフ\",\r\n  FIGHT_PROP_HEAL_ADD: \"与える治療効果\",\r\n};\r\n\r\nexport default defineComponent({\r\n  name: \"App\",\r\n  setup() {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    let HoyoAvatarMaster: THoyoAvatarMaster;\r\n    let HoyoWeaponMaster: THoyoWeaponMaster;\r\n    let HoyoArtifactMaster: THoyoArtifactMaster;\r\n    let HoyoSkillMaster: THoyoSkillMaster;\r\n\r\n    async function onLoad() {\r\n      const responses = await Promise.all(\r\n        [\r\n          \"data/HoyoAvatarMaster.json\",\r\n          \"data/HoyoWeaponMaster.json\",\r\n          \"data/HoyoArtifactMaster.json\",\r\n          \"data/HoyoSkillMaster.json\",\r\n        ].map((s) => fetch(s).then((resp) => resp.json()))\r\n      );\r\n      HoyoAvatarMaster = responses[0];\r\n      HoyoWeaponMaster = responses[1];\r\n      HoyoArtifactMaster = responses[2];\r\n      HoyoSkillMaster = responses[3];\r\n    }\r\n    onLoad();\r\n\r\n    const uid = ref(\"\");\r\n    const timer = ref(0);\r\n    let timerObj: number | undefined;\r\n    const u = reactive({\r\n      uid: \"\",\r\n      playerInfo: {\r\n        nickname: \"\",\r\n      },\r\n    } as TAnyObject);\r\n    const characterInfoList = reactive([] as any[]);\r\n\r\n    async function makeCharacterInfo(u: TAnyObject, index: number) {\r\n      const result: TCharacterInfo = {\r\n        avatarId: u.avatarInfoList[index].avatarId,\r\n        level: u.playerInfo.showAvatarInfoList[index].level,\r\n        ascension: u.avatarInfoList[index].propMap[\"1002\"]?.ival ?? 0,\r\n        constellation: u.avatarInfoList[index].talentIdList?.length ?? 0,\r\n        skillLevelList: [] as [string, number][],\r\n        weapon: deepcopy(WEAPON_INFO_TEMPLATE),\r\n        reliq: deepcopy(RELIQ_INFO_TEMPLATE),\r\n      };\r\n\r\n      Object.keys(u.avatarInfoList[index].skillLevelMap).forEach((key) => {\r\n        result.skillLevelList.push([key, u.avatarInfoList[index].skillLevelMap[key]]);\r\n      });\r\n      // if (\"proudSkillExtraLevelMap\" in u.avatarInfoList[index]) {\r\n      //   Object.keys(u.avatarInfoList[index].proudSkillExtraLevelMap).forEach((key) => {\r\n      //     if (key.endsWith(\"2\")) {\r\n      //       // 元素スキル？\r\n      //       result.skillLevelList[1] +=\r\n      //         u.avatarInfoList[index].proudSkillExtraLevelMap[key];\r\n      //     } else if (key.endsWith(\"9\")) {\r\n      //       // 元素爆発？\r\n      //       result.skillLevelList[2] +=\r\n      //         u.avatarInfoList[index].proudSkillExtraLevelMap[key];\r\n      //     }\r\n      //   });\r\n      // }\r\n\r\n      for (const equip of u.avatarInfoList[index].equipList) {\r\n        if (equip.flat.itemType == \"ITEM_RELIQUARY\") {\r\n          // 聖遺物\r\n          result.reliq.itemIds.push(equip.itemId);\r\n          // メイン効果\r\n          const reliqIndex = RELIQ_EQUIP_TYPE.indexOf(equip.flat.equipType);\r\n          result.reliq.rarities[reliqIndex] = equip.flat.rankLevel;\r\n          result.reliq.mainStats[reliqIndex] = equip.flat.reliquaryMainstat.mainPropId;\r\n\r\n          // サブ効果\r\n          for (const reliquarySubstat of equip.flat.reliquarySubstats) {\r\n            if (reliquarySubstat.appendPropId in result.reliq.subStatObj) {\r\n              result.reliq.subStatObj[reliquarySubstat.appendPropId] +=\r\n                reliquarySubstat.statValue;\r\n            } else {\r\n              result.reliq.subStatObj[reliquarySubstat.appendPropId] =\r\n                reliquarySubstat.statValue;\r\n            }\r\n          }\r\n        } else if (equip.flat.itemType == \"ITEM_WEAPON\") {\r\n          // 武器\r\n          result.weapon.itemId = equip.itemId;\r\n          if (\"affixMap\" in equip.weapon) {\r\n            Object.keys(equip.weapon.affixMap).forEach((key) => {\r\n              result.weapon.refine = equip.weapon.affixMap[key] + 1; // 精錬ランク？\r\n            });\r\n          } else {\r\n            result.weapon.refine = 1;\r\n          }\r\n          result.weapon.level = equip.weapon.level;\r\n          if (equip.weapon.promoteLevel) {\r\n            result.weapon.ascension = equip.weapon.promoteLevel;\r\n          } else {\r\n            result.weapon.ascension = 1;\r\n          }\r\n        }\r\n      }\r\n\r\n      const avatarWork = HoyoAvatarMaster.filter((s) => s.id == result.avatarId);\r\n      if (avatarWork.length) {\r\n        result.characterMaster = CHARACTER_MASTER[\r\n          avatarWork[0].name as TCharacterKey\r\n        ] as TCharacterEntry;\r\n\r\n        const weaponWork = HoyoWeaponMaster.filter((s) => s.id == result.weapon.itemId);\r\n        if (weaponWork.length) {\r\n          result.weaponMaster = (WEAPON_MASTER as any)[result.characterMaster[\"武器\"]][\r\n            weaponWork[0].name\r\n          ];\r\n        }\r\n      }\r\n\r\n      const artifactSetMasters: [\r\n        TArtifactSetEntry | undefined,\r\n        TArtifactSetEntry | undefined\r\n      ] = [undefined, undefined];\r\n      const artifactNames: string[] = [];\r\n      result.reliq.itemIds\r\n        .filter((s) => s)\r\n        .forEach((itemId) => {\r\n          itemId = Math.trunc(itemId / 10);\r\n          const work = HoyoArtifactMaster.filter((s) => s.id == itemId);\r\n          if (work.length) {\r\n            artifactNames.push(work[0].name);\r\n          }\r\n        });\r\n      const artifactSetWork: TAnyObject = {};\r\n      Object.keys(ARTIFACT_SET_MASTER).forEach((key) => {\r\n        const entry = (ARTIFACT_SET_MASTER as any)[key];\r\n        if (\"artifact_list\" in entry) {\r\n          artifactNames.forEach((artifactName) => {\r\n            if (entry.artifact_list.includes(artifactName)) {\r\n              if (key in artifactSetWork) {\r\n                artifactSetWork[key]++;\r\n              } else {\r\n                artifactSetWork[key] = 1;\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n      Object.keys(artifactSetWork).forEach((key) => {\r\n        if (artifactSetWork[key] >= 4) {\r\n          artifactSetMasters[0] = (ARTIFACT_SET_MASTER as any)[key] as TArtifactSetEntry;\r\n          artifactSetMasters[1] = (ARTIFACT_SET_MASTER as any)[key] as TArtifactSetEntry;\r\n        } else if (artifactSetWork[key] >= 2) {\r\n          const index = artifactSetMasters.indexOf(undefined);\r\n          if (index != -1) {\r\n            artifactSetMasters[index] = (ARTIFACT_SET_MASTER as any)[\r\n              key\r\n            ] as TArtifactSetEntry;\r\n          }\r\n        }\r\n      });\r\n      result.artifactSetMasters = artifactSetMasters;\r\n\r\n      result.savedata = await makeSavedata(result);\r\n\r\n      return result;\r\n    }\r\n\r\n    async function makeSavedata(characterInfo: TCharacterInfo) {\r\n      const result = {} as TAnyObject;\r\n\r\n      // キャラクター\r\n      result[\"キャラクター\"] = characterInfo.characterMaster?.key;\r\n      // レベル\r\n      result[\"レベル\"] =\r\n        characterInfo.level +\r\n        (突破レベルレベルARRAY[characterInfo.ascension][0] == characterInfo.level\r\n          ? \"+\"\r\n          : \"\");\r\n      // 命ノ星座\r\n      result[\"命ノ星座\"] = characterInfo.constellation;\r\n\r\n      const skillList = HoyoSkillMaster.filter(\r\n        (s) => s.avatar_id == characterInfo.avatarId\r\n      )[0];\r\n      if (skillList) {\r\n        const characterMasterDetail = await getCharacterMasterDetail(\r\n          result[\"キャラクター\"]\r\n        );\r\n        characterInfo.skillLevelList.forEach((skillLevel) => {\r\n          const skill = skillList.skill_list.filter(\r\n            (s) => s.id == Number(skillLevel[0])\r\n          )[0];\r\n          if (skill) {\r\n            if (characterMasterDetail.通常攻撃.名前 == skill.name) {\r\n              result[\"通常攻撃レベル\"] = skillLevel[1];\r\n            } else if (characterMasterDetail.元素スキル.名前 == skill.name) {\r\n              result[\"元素スキルレベル\"] = skillLevel[1];\r\n            } else if (characterMasterDetail.元素爆発.名前 == skill.name) {\r\n              result[\"元素爆発レベル\"] = skillLevel[1];\r\n            }\r\n          }\r\n        });\r\n        if (result[\"命ノ星座\"] >= 3) {\r\n          const desc = characterMasterDetail.命ノ星座[\"3\"]?.説明;\r\n          if (desc) {\r\n            if (desc.indexOf(characterMasterDetail.元素スキル.名前) != -1) {\r\n              result[\"元素スキルレベル\"] += 3;\r\n            } else if (desc.indexOf(characterMasterDetail.元素爆発.名前) != -1) {\r\n              result[\"元素爆発レベル\"] += 3;\r\n            }\r\n          }\r\n        }\r\n        if (result[\"命ノ星座\"] >= 5) {\r\n          const desc = characterMasterDetail.命ノ星座[\"5\"]?.説明;\r\n          if (desc) {\r\n            if (desc.indexOf(characterMasterDetail.元素スキル.名前) != -1) {\r\n              result[\"元素スキルレベル\"] += 3;\r\n            } else if (desc.indexOf(characterMasterDetail.元素爆発.名前) != -1) {\r\n              result[\"元素爆発レベル\"] += 3;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // 武器\r\n      result[\"武器\"] = characterInfo.weaponMaster?.key;\r\n      // 武器レベル\r\n      result[\"武器レベル\"] =\r\n        characterInfo.weapon.level +\r\n        (突破レベルレベルARRAY[characterInfo.weapon.ascension][0] ==\r\n        characterInfo.weapon.level\r\n          ? \"+\"\r\n          : \"\");\r\n      // 精錬ランク\r\n      result[\"精錬ランク\"] = characterInfo.weapon.refine;\r\n      // 聖遺物セット効果\r\n      if (characterInfo.artifactSetMasters) {\r\n        result[\"聖遺物セット効果1\"] = characterInfo.artifactSetMasters[0]?.key ?? \"NONE\";\r\n        result[\"聖遺物セット効果2\"] = characterInfo.artifactSetMasters[1]?.key ?? \"NONE\";\r\n      } else {\r\n        result[\"聖遺物セット効果1\"] = \"NONE\";\r\n        result[\"聖遺物セット効果2\"] = \"NONE\";\r\n      }\r\n      // 聖遺物メイン効果\r\n      for (let i = 0; i < 5; i++) {\r\n        if (characterInfo.reliq.mainStats[i]) {\r\n          result[\"聖遺物メイン効果\" + (i + 1)] =\r\n            characterInfo.reliq.rarities[i] +\r\n            \"_\" +\r\n            (FIGHT_PROP_STAT_OBJ as any)[characterInfo.reliq.mainStats[i]];\r\n        } else {\r\n          result[\"聖遺物メイン効果\" + (i + 1)] = null;\r\n        }\r\n      }\r\n      // 聖遺物サブ効果\r\n      聖遺物サブ効果ARRAY.forEach((stat) => {\r\n        stat = \"聖遺物サブ効果\" + stat.replace(\"%\", \"P\");\r\n        result[stat] = 0;\r\n      });\r\n      Object.keys(characterInfo.reliq.subStatObj).forEach((prop) => {\r\n        const stat =\r\n          \"聖遺物サブ効果\" + (FIGHT_PROP_STAT_OBJ as any)[prop].replace(\"%\", \"P\");\r\n        result[stat] = characterInfo.reliq.subStatObj[prop];\r\n      });\r\n\r\n      return result;\r\n    }\r\n\r\n    const submit = async () => {\r\n      if (!uid.value && !uid.value.match(/^[0-9]{9}$/)) return;\r\n      const url = \"https://enka.network/u/\" + uid.value + \"/__data.json\";\r\n      // const url = 'data/__data.json';\r\n      fetch(url)\r\n        .then((resp) => resp.json())\r\n        .then(async (json) => {\r\n          console.log(json);\r\n          overwriteObject(u, json);\r\n\r\n          const work: any[] = [];\r\n          for (let i = 0; i < u.playerInfo.showAvatarInfoList.length; i++) {\r\n            work.push(await makeCharacterInfo(u, i));\r\n          }\r\n          characterInfoList.splice(0, characterInfoList.length, ...work);\r\n\r\n          if (json.ttl) {\r\n            timer.value = Number(json.ttl);\r\n            timerObj = setInterval(function () {\r\n              count();\r\n            }, 1000);\r\n          }\r\n        });\r\n    };\r\n\r\n    const locate = (index: number) => {\r\n      // const sharedata = makeSharedata(characterInfoList[index].savedata);\r\n      // const encoded = encodeURI(sharedata).replace(\"+\", \"%2B\");\r\n      // window.open(\"./?allin=\" + encoded, \"_blank\");\r\n      const savedata = characterInfoList[index].savedata;\r\n      pushBuildinfoToSession(savedata.キャラクター, undefined, savedata);\r\n      window.open(\"./\", \"_blank\");\r\n    };\r\n\r\n    const save = (index: number) => {\r\n      const storageKey = \"構成_\" + characterInfoList[index].characterMaster.key;\r\n      localStorage.setItem(storageKey, JSON.stringify(characterInfoList[index].savedata));\r\n      saveButtonDisabled(index);\r\n    };\r\n\r\n    const buttonDisabled = (index: number) => {\r\n      return (\r\n        !characterInfoList[index].characterMaster ||\r\n        !characterInfoList[index].weaponMaster\r\n      );\r\n    };\r\n\r\n    const saveButtonDisabled = (index: number): boolean => {\r\n      let result = buttonDisabled(index);\r\n      if (!result) {\r\n        const storageKey = \"構成_\" + characterInfoList[index].characterMaster.key;\r\n        if (storageKey in localStorage) {\r\n          const newValue = JSON.stringify(characterInfoList[index].savedata);\r\n          const curValue = localStorage[storageKey];\r\n          result = newValue == curValue;\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const count = () => {\r\n      if (timer.value > 0) {\r\n        timer.value--;\r\n      } else {\r\n        clearInterval(timerObj);\r\n      }\r\n    };\r\n\r\n    const characterImgSrc = (characterInfo: TCharacterInfo) => {\r\n      if (characterInfo.characterMaster) {\r\n        return characterInfo.characterMaster.icon_url;\r\n      }\r\n      return IMG_SRC_DUMMY;\r\n    };\r\n\r\n    const characterBgClass = (characterInfo: TCharacterInfo) => {\r\n      if (characterInfo.characterMaster) {\r\n        return STAR_BACKGROUND_IMAGE_CLASS[characterInfo.characterMaster.レアリティ];\r\n      }\r\n      return IMG_SRC_DUMMY;\r\n    };\r\n\r\n    const visionImgSrc = (characterInfo: TCharacterInfo) => {\r\n      if (characterInfo.characterMaster) {\r\n        return ELEMENT_IMG_SRC[characterInfo.characterMaster.元素];\r\n      }\r\n      return IMG_SRC_DUMMY;\r\n    };\r\n\r\n    const weaponImgSrc = (characterInfo: TCharacterInfo) => {\r\n      if (characterInfo.weaponMaster) {\r\n        return characterInfo.weaponMaster.icon_url;\r\n      }\r\n      return IMG_SRC_DUMMY;\r\n    };\r\n\r\n    const artifactSetImgSrc = (characterInfo: TCharacterInfo, index: number) => {\r\n      let result = IMG_SRC_DUMMY;\r\n      if (characterInfo.artifactSetMasters) {\r\n        const work = characterInfo.artifactSetMasters[index];\r\n        if (work) {\r\n          result = work.icon_url;\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      uid,\r\n      timer,\r\n      u,\r\n      characterInfoList,\r\n\r\n      submit,\r\n      locate,\r\n      save,\r\n      buttonDisabled,\r\n      saveButtonDisabled,\r\n\r\n      characterImgSrc,\r\n      characterBgClass,\r\n      visionImgSrc,\r\n      weaponImgSrc,\r\n      artifactSetImgSrc,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./App.vue?vue&type=template&id=28ef59ec&scoped=true&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=28ef59ec&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=28ef59ec&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\Github\\\\gencalc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-28ef59ec\"]])\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport i18n from '@/i18n';\r\n\r\nasync function main() {\r\n    createApp(App, {\r\n    }).use(i18n).mount('#app')\r\n}\r\n\r\nmain();\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 27;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t27: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgencalc\"] = self[\"webpackChunkgencalc\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998,64], function() { return __webpack_require__(8875); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["isPlainObject","value","myType","Object","prototype","toString","call","deepcopy","result","JSON","parse","stringify","overwriteObject","dst","src","srcKeys","keys","key","includes","基礎ステータスARRAY","基本ステータスARRAY","高級ステータスARRAY","元素ステータス_ダメージARRAY","元素ステータス_耐性ARRAY","ダメージバフARRAY","実数ダメージ加算ARRAY","元素反応バフARRAY","ステータスその他ARRAY","敵元素ステータス_耐性ARRAY","ステータスARRAY_MAP","Map","STAT_PERCENT_LIST","makeStatusTenmplate","statsObj","forEach","stat","ステータスTEMPLATE","makeEnemyStatusTemplate","聖遺物サブ効果ARRAY","聖遺物ステータスTEMPLATE","元素反応TEMPLATE","元素","蒸発倍率","溶解倍率","過負荷ダメージ","感電ダメージ","超電導ダメージ","拡散ダメージ","拡散元素","結晶吸収量","燃焼ダメージ","開花ダメージ","烈開花ダメージ","超開花ダメージ","超激化ダメージ","草激化ダメージ","突破レベルレベルARRAY","Array","from","length","_","i","ARTIFACT_SET_MASTER_DUMMY","レアリティ","image","IMG_SRC_DUMMY","CHARACTER_INPUT_TEMPLATE","character","characterMaster","突破レベル","レベル","命ノ星座","通常攻撃レベル","元素スキルレベル","元素爆発レベル","weapon","weaponMaster","武器突破レベル","武器レベル","武器精錬ランク","artifactSets","artifactSetMasters","damageDetailMyCharacter","damageDetailMyWeapon","damageDetailMyArtifactSets","buildname","recommendationSelectedIndex","saveDisabled","removeDisabled","ARTIFACT_DETAIL_INPUT_TEMPLATE","聖遺物メイン効果","聖遺物優先するサブ効果","聖遺物優先するサブ効果上昇値","GENSEN_MASTER_LIST","聖遺物優先するサブ効果上昇回数","聖遺物ステータス","聖遺物ステータスメイン効果","聖遺物ステータスサブ効果","聖遺物優先するサブ効果Disabled","CONDITION_INPUT_TEMPLATE","checkboxList","selectList","conditionValues","conditionAdjustments","攻撃元素","STATS_INPUT_TEMPLATE","statAdjustments","enemyMaster","ENEMY_MASTER_LIST","pushBuildinfoToSession","builddata","sessionStorage","setItem","getIconUrl","master","icon_url","import","replace","indexOf","CHARACTER_MASTER_LIST","CHARACTER_MASTER","push","WEAPON_MASTER","片手剣","SWORD_MASTER","両手剣","CLAYMORE_MASTER","長柄武器","POLEARM_MASTER","弓","BOW_MASTER","法器","CATALYST_MASTER","key2","typedMaster","map","ARTIFACT_SET_MASTER_LIST","ARTIFACT_SET_MASTER","ARTIFACT_MAIN_MASTER","ARTIFACT_SUB_MASTER","ENEMY_MASTER","Infinity","CHARACTER_MASTER_DETAIL_MAP","ELEMENTAL_RESONANCE_MASTER","TEAM_OPTION_MASTER","OPTION1_MASTER","OPTION2_MASTER","ELEMENTAL_REACTION_MASTER","async","getCharacterMasterDetail","has","url","fetch","then","resp","json","weaponType","武器","通常攻撃","WEAPON_IMG_SRC","set","get","error","console","ELEMENT_IMG_SRC","炎","水","風","雷","草","氷","岩","STAR_BACKGROUND_IMAGE_CLASS","ARTIFACT_STAT_JA_EN_ABBREV_MAP","ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP","values","counts","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_createStaticVNode","_hoisted_3","_hoisted_4","id","_hoisted_5","_hoisted_6","_createElementVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","colspan","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","onSubmit","_withModifiers","args","submit","_createTextVNode","_withDirectives","$event","uid","type","maxlength","placeholder","pattern","_vModelText","disabled","timer","_toDisplayString","u","_Fragment","playerInfo","nickname","level","worldLevel","signature","_renderList","characterInfoList","characterInfo","index","_normalizeClass","characterBgClass","characterImgSrc","alt","displayName","visionImgSrc","constellation","_createCommentVNode","weaponImgSrc","artifactSetImgSrc","onClick","locate","buttonDisabled","save","saveButtonDisabled","WEAPON_INFO_TEMPLATE","itemId","ascension","refine","RELIQ_INFO_TEMPLATE","itemIds","rarities","mainStats","subStatObj","RELIQ_EQUIP_TYPE","FIGHT_PROP_STAT_OBJ","FIGHT_PROP_HP","FIGHT_PROP_ATTACK","FIGHT_PROP_DEFENSE","FIGHT_PROP_HP_PERCENT","FIGHT_PROP_ATTACK_PERCENT","FIGHT_PROP_DEFENSE_PERCENT","FIGHT_PROP_ELEMENT_MASTERY","FIGHT_PROP_CRITICAL","FIGHT_PROP_CRITICAL_HURT","FIGHT_PROP_CHARGE_EFFICIENCY","FIGHT_PROP_FIRE_ADD_HURT","FIGHT_PROP_WATER_ADD_HURT","FIGHT_PROP_WIND_ADD_HURT","FIGHT_PROP_ELEC_ADD_HURT","FIGHT_PROP_GRASS_ADD_HURT","FIGHT_PROP_ICE_ADD_HURT","FIGHT_PROP_ROCK_ADD_HURT","FIGHT_PROP_PHYSICAL_ADD_HURT","FIGHT_PROP_HEAL_ADD","defineComponent","name","setup","CompositionFunction","HoyoAvatarMaster","HoyoWeaponMaster","HoyoArtifactMaster","HoyoSkillMaster","onLoad","responses","Promise","all","s","ref","timerObj","reactive","makeCharacterInfo","avatarId","avatarInfoList","showAvatarInfoList","propMap","ival","talentIdList","skillLevelList","reliq","skillLevelMap","equip","equipList","flat","itemType","reliqIndex","equipType","rankLevel","reliquaryMainstat","mainPropId","reliquarySubstat","reliquarySubstats","appendPropId","statValue","affixMap","promoteLevel","avatarWork","filter","weaponWork","undefined","artifactNames","Math","trunc","work","artifactSetWork","entry","artifactName","artifact_list","savedata","makeSavedata","skillList","avatar_id","characterMasterDetail","skillLevel","skill","skill_list","Number","名前","元素スキル","元素爆発","desc","説明","prop","match","log","splice","ttl","setInterval","count","キャラクター","window","open","storageKey","localStorage","newValue","curValue","clearInterval","__exports__","main","createApp","App","use","i18n","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","j","every","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","this","Function","e","obj","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}