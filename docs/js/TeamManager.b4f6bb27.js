(function(){"use strict";var e={3550:function(e,t,n){n.d(t,{$Y:function(){return u},Cb:function(){return N},FX:function(){return _},GN:function(){return S},Ml:function(){return R},Nd:function(){return E},PW:function(){return I},X9:function(){return M},_9:function(){return d},_J:function(){return m},bw:function(){return a},bx:function(){return y},dr:function(){return V},i7:function(){return j},k9:function(){return H},oN:function(){return c},q4:function(){return g},qy:function(){return k},tm:function(){return O},vN:function(){return A}});n(7658);var a=n(8667),l=n(7722),s=n(1930),r=n(7849),o=n(2364),i=n(1003),c=n(5678),u=n(2124),m=n(3185),f=n(8970),d=n(6385),p=n(5093),h=n(9286),b=n(8846),g=n(7646);const y="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7";function v(e){let t=null;return e.icon_url?t=e.icon_url:e.image?t=e.image:e.import&&(t=e.import.replace("data/","images/"),-1!=t.indexOf("characters/")&&(t=t.replace("characters/","characters/face/")),t=t.replace(/json$/,"png")),t}const k=[];Object.keys(a).forEach((e=>{const t=a[e];t.key=e,t.icon_url=v(t),k.push(t)}));const E={"片手剣":l,"両手剣":s,"長柄武器":r,"弓":o,"法器":i};Object.keys(E).forEach((e=>{const t=E[e];Object.keys(t).forEach((e=>{const n=t[e];n.key=e,n.icon_url=v(n)}))}));Object.keys(l).map((e=>l[e])),Object.keys(s).map((e=>s[e])),Object.keys(r).map((e=>r[e])),Object.keys(o).map((e=>o[e])),Object.keys(i).map((e=>i[e]));const w=[];Object.keys(c).forEach((e=>{const t=c[e];t.key=e,t.icon_url=v(t),w.push(t)}));Object.keys(u[5]),Object.keys(m);for(const T of Object.keys(f))for(const e of Object.keys(f[T]))f[T][e]>=1e3&&(f[T][e]=1/0);const _=Object.keys(f).map((e=>({key:e,...f[e]}))),C=(Object.keys(d).map((e=>({key:e,...d[e]}))),Object.keys(p).map((e=>({key:e,...p[e]}))),Object.keys(h).map((e=>({key:e,...h[e]}))),Object.keys(b).map((e=>({key:e,...b[e]}))),Object.keys(g).map((e=>({key:e,...g[e]}))),new Map);async function O(e){try{if(!C.has(e)){const t=a[e]["import"].replace(/^\//,""),n=await fetch(t).then((e=>e.json())),l=a[e].武器;n.通常攻撃.icon_url=H[l],C.set(e,n)}return C.get(e)}catch(t){throw console.error(e),t}}const D=new Map;async function j(e,t){try{if(!D.has(e)){let n;n=t?[t]:Object.keys(E);for(const t of n)if(e in E[t]){const n=E[t],a=n[e]["import"],l=await fetch(a).then((e=>e.json()));l.種類=t,D.set(e,l);break}}return D.get(e)}catch(n){throw console.error(e,t),n}}const M={"炎":"pyro","水":"hydro","風":"anemo","雷":"electro","草":"dendro","氷":"cryo","岩":"geo"},N={"炎":"pyro-bg","水":"hydro-bg","風":"anemo-bg","雷":"electro-bg","草":"dendro-bg","氷":"cryo-bg","岩":"geo-bg"},S={"炎":"images/element_pyro.png","水":"images/element_hydro.png","風":"images/element_anemo.png","雷":"images/element_electro.png","草":"images/element_dendro.png","氷":"images/element_cryo.png","岩":"images/element_geo.png"},H={"片手剣":"images/characters/NormalAttack_sword.png","両手剣":"images/characters/NormalAttack_claymore.png","長柄武器":"images/characters/NormalAttack_polearm.png","弓":"images/characters/NormalAttack_bow.png","法器":"images/characters/NormalAttack_catalyst.png"},V={1:"star1-bg",2:"star2-bg",3:"star3-bg",4:"star4-bg",5:"star5-bg"},I=new Map([["キャラクター",null],["レベル",null],["命ノ星座",0],["通常攻撃レベル",0],["元素スキルレベル",0],["元素爆発レベル",0],["武器",null],["武器レベル",0],["精錬ランク",0],["聖遺物セット効果1",null],["聖遺物セット効果2",null],["聖遺物メイン効果1",null],["聖遺物メイン効果2",null],["聖遺物メイン効果3",null],["聖遺物メイン効果4",null],["聖遺物メイン効果5",null],["聖遺物サブ効果HP",0],["聖遺物サブ効果攻撃力",0],["聖遺物サブ効果防御力",0],["聖遺物サブ効果元素熟知",0],["聖遺物サブ効果会心率",0],["聖遺物サブ効果会心ダメージ",0],["聖遺物サブ効果元素チャージ効率",0],["聖遺物サブ効果HPP",0],["聖遺物サブ効果攻撃力P",0],["聖遺物サブ効果防御力P",0],["聖遺物優先するサブ効果1",null],["聖遺物優先するサブ効果1上昇値",-1],["聖遺物優先するサブ効果1上昇回数",-1],["聖遺物優先するサブ効果2",null],["聖遺物優先するサブ効果2上昇値",-1],["聖遺物優先するサブ効果2上昇回数",-1],["聖遺物優先するサブ効果3",null],["聖遺物優先するサブ効果3上昇値",-1],["聖遺物優先するサブ効果3上昇回数",-1]]),A=["通常攻撃ダメージ","重撃ダメージ","落下攻撃ダメージ","元素スキルダメージ","元素爆発ダメージ"],P=(new Map([["HP%","HP"],["元素熟知","熟"],["元素チャージ効率","ﾁｬ"],["会心率","率"],["会心ダメージ","ダ"],["与える治療効果","治"]]),new Map([["HP%","HP"],["攻撃力%","AT"],["防御力%","DF"],["元素熟知","EM"],["会心率","CR"],["会心ダメージ","CD"],["元素チャージ効率","ER"],["与える治療効果","HE"],["炎元素ダメージバフ","Py"],["水元素ダメージバフ","Hy"],["風元素ダメージバフ","An"],["雷元素ダメージバフ","El"],["草元素ダメージバフ","De"],["氷元素ダメージバフ","Cr"],["岩元素ダメージバフ","Ge"],["物理ダメージバフ","Ph"]]),new Map([["HP","HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","ElementalMastery"],["会心率","CritRate"],["会心ダメージ","CritDMG"],["元素チャージ効率","EnergyRecharge"],["炎元素ダメージバフ","Pyro"],["水元素ダメージバフ","Hydro"],["風元素ダメージバフ","Anemo"],["雷元素ダメージバフ","Electro"],["草元素ダメージバフ","Dendro"],["氷元素ダメージバフ","Cryo"],["岩元素ダメージバフ","Geo"],["物理ダメージバフ","Physical"],["与える治療効果","Healing"],["HP%","HPp"],["攻撃力%","ATKp"],["防御力%","DEFp"]])),W=new Map;P.forEach(((e,t)=>{W.set(e,t)}));const R=[{key:"",values:[7,7,7],counts:[0,0,0]},{key:"厳選初心者",values:[3,3,3],counts:[7,4,4]},{key:"厳選1ヶ月",values:[3,3,3],counts:[8,5,5]},{key:"厳選3ヶ月",values:[3,3,3],counts:[11,8,7]},{key:"日々石割り",values:[1,1,1],counts:[14,11,10]}]},8973:function(e,t,n){var a=n(9242),l=n(3396),s=n(7139);const r=e=>((0,l.dD)("data-v-538570f2"),e=e(),(0,l.Cn)(),e),o={class:"base-container"},i=r((()=>(0,l._)("div",{class:"header"},[(0,l.Uk)("   "),(0,l._)("a",{href:"./"},"げんかるく")],-1))),c={class:"pane1"},u={class:"display-stat-select"},m=["value"],f={class:"number-of-teams"},d=["min"],p={class:"data-control"},h=["disabled"],b={class:"pane2"},g=["id"],y={class:"pane3"},v=r((()=>(0,l._)("hr",null,null,-1))),k={id:"team-rotation"},E=(0,l.uE)('<div class="pane4" data-v-538570f2></div><div class="footer" data-v-538570f2><hr data-v-538570f2><h2 data-v-538570f2>チーム編成 Ver.0.6.0</h2><ul class="usage" data-v-538570f2><li data-v-538570f2>右上の◆のドラッグ＆ドロップでチームの並べ替えができます。</li></ul><dl class="history" data-v-538570f2><dt data-v-538570f2>0.5.0</dt><dd data-v-538570f2> ローテーションが保存されるようになりました。チームデータの一部として記憶します。 </dd></dl><p data-v-538570f2><a href="./" data-v-538570f2>げんかるく - 原神ダメージシミュレーター</a>   <a href="./TeamOptionList.html" data-v-538570f2>強化・弱体効果一覧</a></p></div>',2);function w(e,t,n,r,w,_){const C=(0,l.up)("TeamItem"),O=(0,l.up)("draggable"),D=(0,l.up)("TeamEditorModal"),j=(0,l.up)("TeamRotation");return(0,l.wg)(),(0,l.iD)("div",o,[i,(0,l._)("div",c,[(0,l._)("fieldset",null,[(0,l._)("div",u,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.DISPLAY_STAT_LIST,(n=>((0,l.wg)(),(0,l.iD)("label",{class:"display-stat",key:n[1]},[(0,l.wy)((0,l._)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":t[0]||(t[0]=t=>e.displayStat=t),value:n[0]},null,8,m),[[a.G2,e.displayStat]]),(0,l._)("span",null,(0,s.zw)(n[1]),1)])))),128))]),(0,l._)("label",f,[(0,l.Uk)(" Number of teams "),(0,l.wy)((0,l._)("input",{type:"number",min:e.NUMBER_OF_TEAMS,max:999,"onUpdate:modelValue":t[1]||(t[1]=t=>e.numberOfTeams=t),onChange:t[2]||(t[2]=(...t)=>e.numberOfTeamsOnChange&&e.numberOfTeamsOnChange(...t))},null,40,d),[[a.nr,e.numberOfTeams]])]),(0,l._)("div",p,[(0,l._)("button",{type:"button",disabled:e.saveDisabled,onClick:t[3]||(t[3]=(...t)=>e.saveOnClick&&e.saveOnClick(...t))}," Save ",8,h),(0,l._)("button",{type:"button",onClick:t[4]||(t[4]=(...t)=>e.clearOnClick&&e.clearOnClick(...t))},"Clear")])])]),(0,l._)("div",b,[(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(O,{list:e.teams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,l.w5)((({element:t})=>[(0,l._)("div",{style:{display:"inline-block"},id:"team-"+t.id},[(0,l.Wm)(C,{team:t,selected:e.teamSelected(t.id),displayStat:e.displayStat,onClick:n=>e.teamOnClick(t.id),"onClick:edit":e.editOnClick,"onClick:jumpToRotation":e.jumpToRotation,"onUpdate:memberResult":e.updateMemberResult},null,8,["team","selected","displayStat","onClick","onClick:edit","onClick:jumpToRotation","onUpdate:memberResult"])],8,g)])),_:1},8,["list"])],512),[[a.F8,!e.teamEditorVisible]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(D,{visible:e.teamEditorVisible,team:e.forcusedTeam,"onClick:cancel":t[5]||(t[5]=t=>e.teamEditorVisible=!1),"onClick:ok":e.updateTeam},null,8,["visible","team","onClick:ok"])],512),[[a.F8,e.teamEditorVisible]])]),(0,l._)("div",y,[v,(0,l._)("div",k,[e.teams[e.selectedTeamId]?((0,l.wg)(),(0,l.j4)(j,{key:0,team:e.teams[e.selectedTeamId],teamMemberResult:e.teamMemberResult,"onUpdate:rotation":e.updateRotation,"onClick:jumpToTeam":e.jumpToTeam},null,8,["team","teamMemberResult","onUpdate:rotation","onClick:jumpToTeam"])):(0,l.kq)("",!0)])]),E])}n(7658);var _=n(4806),C=n.n(_),O=n(6983),D=n.n(O),j=n(4870),M=n(6552),N=n(5983),S=n(2986),H=n(3550);function V(e,t){return t+S.iU[e][0]==t?"+":""}function I(e,t,n){if(!e)return 0;const a=V(t,n);if(a in e)return e[a];const l=S.iU[t][0],s=S.iU[t][S.iU[t].length-1],r=e[l+"+"],o=e[s];return r+(o-r)*(n-l)/(s-l)}function A(e,t){const n=S.iU[t][0];return e[n+"+"]}function P(e,t){if(e in t)return t[e];e=Number(e);const n=Object.keys(t).map((e=>Number(e)));let a,l;for(let s=0;s<n.length-1;s++)n[s]<=e&&n[s+1]>=e&&(a=n[s],l=n[s+1]);return a&&l?t[a]+(t[l]-t[a])*(e-a)/(l-a):0}function W(e,t){Object.keys(e).forEach((t=>{e[t]=0}));for(const n of t){if(!n)continue;const t=n.split("_");e[t[1]]+=H.$Y[t[0]][t[1]]}}function R(e){const t=e.聖遺物ステータス,n=e.聖遺物ステータスメイン効果,a=e.聖遺物ステータスサブ効果;for(const l of Object.keys(t))t[l]=0;for(const l of Object.keys(n))l in t?t[l]+=n[l]:t[l]=n[l];for(const l of Object.keys(a))l in t?t[l]+=a[l]:t[l]=a[l]}const T=function(e,t,n,a,l){if(t&&n&&a&&l)try{const s=t.characterMaster,r=t.突破レベル,o=t.レベル,i=t.命ノ星座,c=t.weaponMaster,u=t.武器突破レベル,m=t.武器レベル,f=C().cloneDeep(S.q2);if(f["突破レベル"]=r,f["レベル"]=o,f["命ノ星座"]=i,f["元素"]=s.元素,"元素エネルギー"in s["元素爆発"]&&(f["元素エネルギー"]=s["元素爆発"]["元素エネルギー"]),"固有変数"in s)for(const e of Object.keys(s["固有変数"]))e in a.conditionValues?f[e]=Number(a.conditionValues[e]):f[e]=s["固有変数"][e];for(const t of Object.keys(e.enemyMaster).filter((e=>"key"!=e))){const n="敵"+t;f[n]=e.enemyMaster[t]}Object.keys(e.statAdjustments).filter((e=>!S.PL.includes(e))).forEach((t=>{t in f&&(f[t]+=e.statAdjustments[t])})),Object.keys(e.statAdjustmentsEx).filter((e=>!S.PL.includes(e))).forEach((t=>{t in f&&(f[t]+=e.statAdjustmentsEx[t])}));for(const e of Object.keys(s["ステータス"]))if(S.Vd.includes(e))f[e]+=I(s["ステータス"][e],r,o);else{const t=["HP","攻撃力","防御力"].includes(e)?e+"+":e;t in f&&(f[t]+=A(s["ステータス"][e],r))}for(const e of Object.keys(c["ステータス"]))f[e]+=I(c["ステータス"][e],u,m);const d=n.聖遺物ステータス;for(const e of Object.keys(d)){const t=["HP","攻撃力","防御力"].includes(e)?e+"+":e;f[t]+=d[e]}let p="法器"==s.武器?s.元素:"物理",h="法器"==s.武器?s.元素:"物理",b="法器"==s.武器?s.元素:"物理";l&&[l.elementalResonance,l.teamOption,l.miscOption].forEach((e=>{e&&e.conditionAdjustments&&Object.keys(e.conditionAdjustments).forEach((t=>{const n=e.conditionAdjustments[t];if(n===1/0){if(t.endsWith("元素付与")&&["片手剣","両手剣","長柄武器"].includes(s.武器)){const e=t.replace(/元素付与$/,"");p=e,h=e,b=e}}else if(null!==n&&(t in f?f[t]+=n:f[t]=n,t.endsWith("V1")||t.endsWith("V2")||t.endsWith("V3"))){const e=t.replace(/V[1-3]$/,"");e in f?f[e]+=n:f[e]=n}}))}));const g=z(a);oe(f,l),S.PL.forEach((t=>{t in e.statAdjustments&&t in f&&(f[t]+=e.statAdjustments[t])}));const y=x(t,g,f);for(const e of[t.damageDetailMyCharacter,t.damageDetailMyWeapon,t.damageDetailMyArtifactSets])if(e&&S.yL in e)for(const t of e[S.yL]){if(t["条件"]){const e=K(t["条件"],g,i);if(0==e)continue}if(t["種類"]&&t["種類"].endsWith("元素付与")){const e=t["種類"].replace("元素付与","");t["対象"]?"通常攻撃ダメージ"==t["対象"]?p=e:"重撃ダメージ"==t["対象"]?h=e:"落下攻撃ダメージ"==t["対象"]&&(b=e):(p=e,h=e,b=e)}}a.攻撃元素=[p,h,b],(0,N.fX)(e.statsObj,f),(0,N.fX)(a.conditionAdjustments,y)}catch(s){console.error(s),console.error(e,t,n,a,l)}};function x(e,t,n){const a=e.命ノ星座,l={},s=new Map;for(const m of[e.damageDetailMyCharacter,e.damageDetailMyWeapon,e.damageDetailMyArtifactSets])if(m&&S.e2 in m)for(const e of m[S.e2]){let n=!1,l=e["数値"];if(e["条件"]){const s=K(e.条件,t,a);if(0==s)continue;1!=s&&(l=l.concat(["*",s])),n=!0}let r=e["種類"];r&&(e["対象"]&&(r+="."+e["対象"]),s.has(r)||s.set(r,[]),s.get(r)?.push([r,l,e.上限,e.下限,n]))}const r=["基礎HP","HP%","HP+","HP上限"],o=["基礎防御力","防御力%","防御力+","防御力"],i=["基礎攻撃力","攻撃力%","攻撃力+","攻撃力"],c=[...S.U3,...S.tH,...S.Em,...S.wB,...S.uc,"ダメージ軽減"];c.push(...Array.from(s.keys()).filter((e=>-1!=e.indexOf("."))));const u=[...new Set(Array.from(s.keys()).map((e=>e.replace(/V[1-3]$/,""))))].filter((e=>![...r,...o,...i,...c].includes(e)));u.sort(q);for(const m of r){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),U(l,n,s,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}n["HP上限"]+=n["基礎HP"]+n["HP+"],n["HP上限"]+=n["基礎HP"]*n["HP%"]/100;for(const m of u){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),U(l,n,s,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}for(const m of o){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),U(l,n,s,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}n["防御力"]+=n["基礎防御力"]+n["防御力+"],n["防御力"]+=n["基礎防御力"]*n["防御力%"]/100;for(const m of i){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),U(l,n,s,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}n["攻撃力"]+=n["基礎攻撃力"]+n["攻撃力+"],n["攻撃力"]+=n["基礎攻撃力"]*n["攻撃力%"]/100;for(const m of c){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),U(l,n,s,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}return l}function U(e,t,n,a){for(const l of[n.get(a),...["V1","V2","V3"].map((e=>n.get(a+e)))])l&&l.forEach((n=>{const a=se(t,n[0],n[1],n[2],n[3]);for(const e of Object.keys(a))if(S.PL.includes(e+"TOP")){const n=(0,S.A2)(e+"X7",t),a=t[e+"TOP"];void 0!==n&&void 0!==a&&n>a&&(t[e+"TOP"]=n)}if(n[4])for(const t of Object.keys(a))t in e?e[t]+=a[t]:e[t]=a[t]}))}function q(e,t){const n=["元素熟知","会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","シールド強化"],a=["ダメージ軽減"];let l=n.indexOf(e);a.indexOf(e)>=0&&(l=n.length+1);let s=n.indexOf(t);return a.indexOf(t)>=0&&(s=n.length+1),(-1!=l?l:n.length)-(-1!=s?s:n.length)}function F(e,t,n,a=null,l=null){try{let s=0;if(Array.isArray(e)){let r=null;for(const o of e){let i=0;if(["+","-","*","/"].includes(o))r=o;else{if((0,N.hj)(o))i=Number(o);else if(Array.isArray(o))i=F(o,t,n);else if(-1!=o.indexOf("#")){const s=o.split("#");if(n&&s[0]in n){const r=n[s[0]];let c=null;for(const e of r)if(s[1]==e[0]){c=e[4];break}null!=c?i=c:console.error(e,t,n,a,l,o)}}else{const n=(0,S.A2)(o,t);void 0===n?console.error(e,t,null,a,l,o):i=n}if(null==r)s+=i;else switch(r){case"+":s+=i;break;case"-":s-=i;break;case"*":s*=i,s=Math.floor(100*s)/100;break;case"/":s/=i;break}}}}else if((0,N.hj)(e))s=Number(e);else if(-1!=e.indexOf("#")){const t=e.split("#");if(n&&t[0]in n){const e=n[t[0]];for(const n of e)if(t[1]==n[0]){s=n[4];break}}}else{const n=(0,S.A2)(e,t);void 0!==n?s=n:(console.error(e,t,null,a,l),s=0)}if(null!=a){const e=F(a,t,n);s=Math.min(s,e)}if(null!=l){const e=F(l,t,n);s=Math.max(s,e)}return s}catch(s){throw console.error(s),console.error(e,t,n,a,l),s}}function L(e,t,n,a){try{if(!t)return;if(!n)return;if(!a)return;const l=t.characterMaster,s=t["命ノ星座"],r=l["元素"],o=C().cloneDeep(S.vo),i=[],c=new Set;if(c.add(r),n.selectList.filter((e=>"元素変化"==e.name)).length){const e=n.selectList.filter((e=>"元素変化"==e.name))[0],t=n.conditionValues["元素変化"];if(t){const n=e.options[t].replace(/元素$/,"");c.add(n)}}if(n.selectList.filter((e=>"拡散"==e.name)).length){const e=n.selectList.filter((e=>"拡散"==e.name))[0],t=n.conditionValues["拡散"];if(t){const n=e.options[t].replace(/元素$/,"");c.add(n)}}for(const e of n.攻撃元素)e&&"物理"!=e&&c.add(e);for(const e of c)i.push([e,H.q4[e]]);let u=!1;if("岩"==l.元素||"両手剣"==l.武器)u=!0;else{const e=H.q4.破砕?.氷砕き?.キャラクター;e&&e.includes(l.名前)&&(u=!0)}if(u){const e="破砕";i.push([e,H.q4[e]])}o["元素"]=r,i.forEach((e=>{const t=e[0],l=e[1];Object.keys(l).forEach((e=>{const s=l[e];let r=0;if("結晶"==e)r=G(t,a.statsObj);else if("拡散"==e){let l="炎";for(const e of n.selectList)if("拡散"==e.name){const t=e.options[Number(n.conditionValues["拡散"])];t&&(l=t.replace(/元素$/,""));break}o["拡散元素"]=l,r=$(e,t,a.statsObj,l)}else switch(s["種類"]){case"乗算":r=B(e,t,a.statsObj);break;case"固定":r=$(e,t,a.statsObj);break;case"加算":r=Z(e,t,a.statsObj);break}["倍率","ダメージ","吸収量"].forEach((n=>{let a=e+n;"倍率"===n&&(a+="_"+t),a in o&&(o[a]=r)}))}))})),Object.keys(o).filter((e=>e.endsWith("ダメージ")&&-1==e.indexOf("会心"))).forEach((e=>{["会心率","会心ダメージ"].forEach((t=>{const n=e+t;n in a.statsObj&&(o[n]=a.statsObj[n])}))})),(0,N.fX)(e.元素反応,o),console.debug("元素反応",e.元素反応);const m=z(n),f=t.damageDetailMyCharacter,d=t.damageDetailMyWeapon,p=t.damageDetailMyArtifactSets;if(Array.isArray(e["キャラクター注釈"])&&e["キャラクター注釈"].splice(0,e["キャラクター注釈"].length),f){for(const l of["通常攻撃","重撃","落下攻撃"]){if(e[l]=[],!(l in f))continue;const r=n.攻撃元素[["通常攻撃","重撃","落下攻撃"].indexOf(l)];let o=f[l];if("特殊"+l in f){const e=f["特殊"+l];0!=K(e["条件"],m,s)&&(o=e["詳細"])}for(const i of o){if(i["条件"]&&0==K(i["条件"],m,s))continue;const o=ee(i,t,n,a.statsObj,e,r);e[l].push(o)}if("通常攻撃"==l){let t=0;const n=["合計ダメージ",null,0,0,0,null,0,0,1];for(const a of e[l])!a[0].endsWith("段ダメージ")&&!["水月ダメージ"].includes(a[0])||a[0].startsWith("非表示_")||(n[1]=a[1],n[2]+=a[2],null==a[3]?n[3]=null:null!=n[3]&&(n[3]+=a[3]),n[4]+=a[4],null!=n[6]&&(a[6]?n[6]+=a[6]:n[6]++),n[7]=a[7],n[8]=a[8],t++);t>0&&e[l].splice(t,0,n)}}for(const l of["元素スキル","元素爆発","その他"]){if(e[l]=[],!(l in f))continue;const r=f[l];for(const o of r){if(o["条件"]&&0==K(o["条件"],m,s))continue;const r=ee(o,t,n,a.statsObj,e);e[l].push(r)}}}for(const g of[d,p]){const l="その他";if(!g||!(l in g))continue;const r=g[l];for(const o of r){if(o["条件"]&&0==K(o["条件"],m,s))continue;const r=ee(o,t,n,a.statsObj,e);e[l].push(r)}}const h=[];for(const e of S.tH){const t=e.replace(/元素耐性$/,"").replace(/耐性$/,""),n=re(a.statsObj,1e4,t);h.push({key:t,value:n})}e["被ダメージ"]=h;const b=[];for(const e of h)b.push({key:e.key,value:1e4*a.statsObj["HP上限"]/e.value});e["耐久スコア"]=b,console.debug(e)}catch(l){console.error(l),console.error(e,t,n,a)}}function z(e){try{const t=[];if(!e)return t;const n=e.checkboxList;n&&n.forEach((n=>{e.conditionValues[n.name]&&t.push(n.name)}));const a=e.selectList;a&&a.forEach((n=>{const a=e.conditionValues[n.name];void 0!==a&&null!==a&&(a>0||0==a&&n.required)&&t.push(n.name+"@"+n.options[a])}));const l=e.numberList;return l&&l.forEach((n=>{const a=e.conditionValues[n.name];void 0!==a&&null!==a&&t.push(n.name+"="+a)})),t}catch(t){throw console.error(t),console.error(e),t}}function K(e,t,n){const a=e.split("^")[0];if(-1!=a.indexOf("|")){const e=a.split("|");for(let a=0;a<e.length;a++){const l=Y(e[a],t,n);if(1==l)return 1}return 0}const l=a.split("&");let s=1;for(let r=0;r<l.length;r++){const e=Y(l[r],t,n);if(0==e)return 0;1!=e&&(s=e)}return s}function Y(e,t,n){const a=e.split(/[@=]/);if("命ノ星座"==a[0]){if(2==a.length&&(0,N.hj)(a[1])){const e=Number(a[1]);if(e<=n)return 1}return 0}if(t.includes(e)||t.includes(e.replace("=","@")))return 1;if(1==a.length)return t.filter((t=>t.split("@")[0]==e)).length>0?1:0;if(-1!=e.indexOf("=")){if(S.r2.test(a[1])){const e=t.filter((e=>e.split("=")[0]==a[0]));if(e.length>0)return Number(e[0].split("=")[1])}return 0}const l=new RegExp("[^0-9]*?([\\-0-9\\.]+).*");for(let s=0;s<t.length;s++)if(t[s].startsWith(a[0]+"@")){const e=t[s].split("@"),n=l.exec(e[1]);if(n){const e=Number(n[1]);return e}}return 0}function B(e,t,n){try{if(!t||"物理"==t)return 0;const a=n["元素熟知"],l=n[e+"反応ボーナス"]??0;let s=H.q4[t][e]["数値"];return s*=1+25*a/(9*(a+1400))+l/100,s}catch(a){throw console.error(a),console.error(e,t,n),a}}function $(e,t,n,a){try{if(!t||"物理"==t)return 0;const l=n["レベル"],s=n["元素熟知"],r=n[e+"反応ボーナス"]??0,o=a??H.q4[t][e]["元素"];let i=P(l,H.q4[t][e]["数値"]);return i*=1+16*s/(s+2e3)+r/100,i*=J(o,n),i}catch(l){throw console.error(l),console.error(e,t,n,a),l}}function G(e,t){try{if(!e||"物理"==e)return 0;const n=t["レベル"],a=t["元素熟知"],l=t["結晶反応ボーナス"]??0;let s=P(n,H.q4[e]["結晶"]["数値"]);return s*=1+40*a/(9*(a+1400))+l/100,s}catch(n){throw console.error(n),console.error(e,t),n}}function Z(e,t,n){try{if(!t||"物理"==t)return 0;const a=n["レベル"],l=n["元素熟知"],s=n[e+"反応ボーナス"]??0,r=H.q4[t][e]["元素"];let o=P(a,H.q4[t][e]["数値"]);return o*=1+5*l/(l+1200)+s/100,o*=J(r,n),o}catch(a){throw console.error(a),console.error(e,t,n),a}}function X(e,t=0){try{const n=e["レベル"]??0,a=e["敵レベル"]??0,l=t/100,s=Math.max(-100,e["敵防御力"]??0)/100,r=(n+100)/((1-l)*(1+s)*(a+100)+n+100);return r}catch(n){throw console.error(n),console.error(e,t),n}}function Q(e){if(e==1/0)return 0;let t=e;return t=t<0?100-t/2:t<75?100-t:1e4/(4*t+100),t/=100,t}function J(e,t){try{const n="敵"+e+("物理"!=e?"元素":"")+"耐性",a=Q(t[n]??0);return a}catch(n){throw console.error(n),console.error(e,t),n}}function ee(e,t,n,a,l,s=null){try{const r=[];let o=!0,i=!0,c=!0,u=null!=e["元素"]?e["元素"]:null!=s?s:null,m=0,f=0;const d=null!=e["HIT数"]?Number(e["HIT数"]):1,p={},h=a["命ノ星座"],b=ne(t,S.yL);let g=z(n);const y=C().cloneDeep(n.conditionValues);if(e["除外条件"])for(const t of e["除外条件"]){let e=t;C().isPlainObject(t)&&(e=t.名前),e in y&&((0,N.hj)(y[e])?y[e]=0:C().isBoolean(y[e])&&(y[e]=!1))}if(e["適用条件"])for(const t of e["適用条件"])if(C().isString(t))t in y&&C().isBoolean(y[t])&&(y[t]=!0);else if(C().isPlainObject(t)){if(t.名前 in y){let e=y[t.名前];if("数値"in t){if(C().isString(t.数値)){const n=String(t.数値).replace(/^\+/,"");e+=Number(n)}else e=((0,N.hj)(t.数値),t.数値);null!==e&&(0,N.hj)(e)&&(e<0?e=0:n.selectList.filter((e=>e.name==t.名前)).forEach((t=>{null!==e&&e>=t.options.length&&(e=t.options.length-1)})))}else e=!0;y[t.名前]=e}if(t.説明)if(Array.isArray(t.説明))t.説明.forEach((e=>{l["キャラクター注釈"].includes(e)||l["キャラクター注釈"].push(e)}));else{const e=t.説明;l["キャラクター注釈"].includes(e)||l["キャラクター注釈"].push(e)}}if(e["除外条件"]||e["適用条件"]){const e=C().cloneDeep(n);e.conditionValues=y;const s=z(e);[t.damageDetailMyCharacter,t.damageDetailMyWeapon,t.damageDetailMyArtifactSets].forEach((e=>{e&&e.ステータス変更系詳細.filter((e=>e.条件)).forEach((e=>{const t=e.条件;let n=0,r=0;const o=K(t,g,h),i=K(t,s,h);if(o==i)return;if(0!=o){let t=e.数値;1!=o&&(t=t.concat(["*",o])),n=F(t,a,l,e.上限,e.下限)}if(0!=i){let t=e.数値;1!=i&&(t=t.concat(["*",i])),r=F(t,a,l,e.上限,e.下限)}const c=r-n;if(c){let t=e.種類;e.対象&&(t+="."+e.対象),t in p?p[t]+=c:p[t]=c}}))})),g=s}const v=[];b&&b.forEach((t=>{let n=null;if(!t.条件||(n=K(t.条件,g,h),0!=n)){if(t.対象)if(t.対象.endsWith("元素ダメージ")){if(!t.対象.startsWith(u))return}else if("物理ダメージ"==t.対象){if("物理"!=u)return}else{const n=e.種類,a=t.対象.split(".");if(a[0]!=n)return;if(a.length>1&&a[a.length-1]!=e.名前)return}if(t["種類"].endsWith("元素付与"))["通常攻撃ダメージ","重撃ダメージ","落下攻撃ダメージ"].includes(e.種類)&&(e["元素付与無効"]||(u=t["種類"].replace("元素付与","")));else if("防御無視"==t.種類){const e=F(t.数値,a,l,t.上限,t.下限);m+=e}else if("固有変数"==t.種類);else if(null!=n&&1!=n){const e=JSON.parse(JSON.stringify(t));e.数値=e.数値.concat(["*",n]),v.push(e)}else v.push(t)}})),console.debug(e["名前"]+":myTalentChangeDetailObjArr"),console.debug(v);const k={};[a,p].forEach((t=>{Object.keys(t).forEach((n=>{const a=n.split(".");if(1==a.length)return;let l=!1;if(a[1]==e.種類?(2==a.length||a[2]==e.名前&&3==a.length)&&(l=!0):a[1]==u+"元素ダメージ"?2==a.length&&(l=!0):"物理ダメージ"==a[1]&&"物理"==u&&2==a.length&&(l=!0),l){const e=a[0];e in k?"別枠乗算"==e&&k[e]>0?k[e]*=t[n]/100:k[e]+=t[n]:k[e]=t[n]}}))})),Object.keys(k).forEach((e=>{e in p?e.startsWith("別枠乗算")&&p[e]>0?p[e]*=k[e]/100:p[e]+=k[e]:p[e]=k[e]})),console.debug("myステータス補正",p);const E=t.damageDetailMyArtifactSets;if(E&&"通常攻撃ダメージ"==e.種類&&e.HIT数>1&&"来歆の余響"==t.artifactSets[0]&&"来歆の余響"==t.artifactSets[1]){let t=!1;for(const n of E[S.e2].filter((e=>e.条件&&e.種類&&e.数値))){const s=n.種類,r=n.条件,o=e.HIT数;if(0!=K(r,g,h)){const e=F(n.数値,a,l,n.上限,n.下限);s in p||(p[s]=0),p[s]-=e*(o-Math.max(1,Math.floor(o/2)))/o,t=!0}}if(t){const e="来歆の余響4セット効果の幽谷祭祀のダメージアップは多段HITダメージの全てには乗らない。3HIT以下：1回分、4HIT：2回分を計上する";l["キャラクター注釈"].includes(e)||l["キャラクター注釈"].push(e)}}switch(Object.keys(p).forEach((e=>{e in a?e.startsWith("別枠乗算")&&a[e]>0?a[e]*=p[e]:a[e]+=p[e]:a[e]=p[e],console.debug("ステータス補正",e,p[e])})),a["別枠乗算"]&&(f=a["別枠乗算"]),e.種類){case"HP回復":r.push("与える治療効果"),r.push("受ける治療効果"),o=!1,i=!1,c=!1,u=null;break;case"シールド":r.push("シールド強化"),o=!1,i=!1,c=!1;break;case"元素創造物HP":o=!1,i=!1,c=!1,u=null;break;case"他所基準ダメージ":i=!1,c=!1;break;case"他所基準HP回復":o=!1,i=!1,c=!1,u=null;break;case"付加元素ダメージ":["炎","水","雷","氷"].includes(u)||(u="炎");break;case"HP消費":o=!1,i=!1,c=!1,u=null;break;default:e.種類.startsWith("表示")||e.種類.startsWith("非表示")?(o=!1,i=!1,c=!1,u=null):(r.push("与えるダメージ"),"NONE"!=e.ダメージバフ&&(e.ダメージバフ?r.push(e.ダメージバフ):H.vN.includes(e.種類)&&r.push(e.種類+"バフ")),u&&r.push("物理"==u?"物理ダメージバフ":u+"元素ダメージバフ"));break}const w=te(a,l,e.数値,r,o,i,c,u,m,f,e.上限,e.下限);if(v.forEach((t=>{const n=te(a,l,t.数値,r,o,i,c,u,m,null,t.上限,t.下限);if(t.種類.endsWith("ダメージアップ")){if("ダメージアップ"==e.名前)return;H.vN.includes(e.種類)&&d>1&&(n[2]*=d,null!=n[3]&&(n[3]*=d),n[4]*=d)}w[2]+=n[2],null!=w[3]&&n[3]&&(w[3]+=n[3]),w[4]+=n[4]})),[...H.vN,"その他ダメージ"].includes(e.種類)){let t=e.種類;if(e.ダメージバフ){const n=e.ダメージバフ.replace(/バフ$/,"");H.vN.includes(n)&&(t=n)}const n=[];n.push(t+"アップ"),u&&n.push("物理"==u?"物理ダメージアップ":u+"元素ダメージアップ"),n.forEach((t=>{if(!a[t])return;if(!i||!c)return;if(e.名前.startsWith("非表示_狼の魂基礎"))return;const n=te(a,l,a[t],r,o,i,c,u,m,null);d>1&&(n[2]*=d,null!=n[3]&&(n[3]*=d),n[4]*=d),w[2]+=n[2],null!=w[3]&&n[3]&&(w[3]+=n[3]),w[4]+=n[4]}))}Object.keys(p).forEach((e=>{a[e]-=p[e]})),"シールド"==e.種類&&"岩"==w[1]&&(w[2]=1.5*w[2],w[4]=1.5*w[4]);const _=[e.名前,w[1],w[2],w[3],w[4],e.種類,e.HIT数,w[7],w[8]];return console.debug("calculateDamageFromDetail",e,t,n,a,s,_),_}catch(r){throw console.error(r),console.error(e,t,n,a,s),r}}function te(e,t,n,a,l,s,r,o,i,c,u=null,m=null){const f=F(n,e,t,u,m);let d=f;c?d*=c/100:c=1,ae(n)&&(a=null,s=!1,r=!1);let p=1;a&&(p=100,a.forEach((t=>{e[t]&&(p+=e[t])})),p/=100,d*=p);let h=1;s&&(h=X(e,i),d*=h);let b=1;r&&o&&(b=J(o,e),d*=b);let g=e["会心率"];"物理"==o?"物理ダメージ会心率"in e&&(g+=e["物理ダメージ会心率"]):o+"元素ダメージ会心率"in e&&(g+=e[o+"元素ダメージ会心率"]),g=Math.min(100,Math.max(0,g))/100;let y=e["会心ダメージ"];"物理"==o?"物理ダメージ会心ダメージ"in e&&(y+=e["物理ダメージ会心ダメージ"]):o+"元素ダメージ会心ダメージ"in e&&(y+=e[o+"元素ダメージ会心ダメージ"]),y=(100+y)/100;let v=null,k=d;return l&&g>0&&(v=d*y,k=v*g+d*(1-g)),console.debug("%f * %f * [%o]=%f * [%f,%f] * %f * %f => %f,%f,%f",f,c,a,p,g,y,h,b,k,v,d),["未設定",o,k,v,d,null,null,p,h]}function ne(e,t){let n=[];return e?(e.damageDetailMyCharacter&&t in e.damageDetailMyCharacter&&(n=n.concat(e.damageDetailMyCharacter[t])),e.damageDetailMyWeapon&&t in e.damageDetailMyWeapon&&(n=n.concat(e.damageDetailMyWeapon[t])),e.damageDetailMyArtifactSets&&t in e.damageDetailMyArtifactSets&&(n=n.concat(e.damageDetailMyArtifactSets[t])),n):n}function ae(e){if(!Array.isArray(e))return!(0,N.hj)(e)&&-1!=String(e).indexOf("#");let t=!1;return e.forEach((e=>{["+","-","*","/"].includes(String(e))||(0,N.hj)(e)||(Array.isArray(e)?ae(e)&&(t=!0):-1!=String(e).indexOf("#")&&(t=!0))})),t}const le=["炎","水","風","雷","草","氷","岩"];function se(e,t,n,a=null,l=null){const s=F(n,e,S.US,a,l);(0,N.hj)(s)||console.error(e,t,n,s);const r=[];"HP"==t?r.push("HP上限"):t.startsWith("自元素")?r.push(t.replace(/^自/,String(e["元素"]))):t.startsWith("全元素")?le.forEach((e=>{r.push(t.replace(/^全/,e))})):t.startsWith("敵自元素")?r.push(t.replace(/^敵自/,"敵"+String(e["元素"]))):t.startsWith("敵全元素")?le.forEach((e=>{r.push(t.replace(/^敵全/,"敵"+e))})):r.push(t);const o={};r.forEach((e=>{o[e]=s}));for(const i of Object.keys(o))i in e?i.startsWith("別枠乗算")&&o[i]>0?e[i]*=o[i]/100:e[i]+=o[i]:e[i]=o[i];return console.debug(se.name,null,t,n,"=>",o),o}function re(e,t,n){const a=e["防御力"],l=e["敵レベル"],s=e["ダメージ軽減"],r=Q(e["物理"==n?"物理耐性":n+"元素耐性"]);let o=t*(1-a/(a+5*l+501))*(100-s)/100*r;return o=Math.max(0,o),o}function oe(e,t){S.PL.forEach((n=>{const a=n.replace(/TOP$/,"X7");let l=(0,S.A2)(a,e);l&&(e[n]=l);for(const s of t.teamMembers){const r=t.supporters[s];r?.statsInput?.statsObj&&(l=(0,S.A2)(a,r.statsInput.statsObj),void 0!==l&&e[n]<l&&(e[n]=l))}}))}const ie=["過負荷ダメージ","感電ダメージ","超電導ダメージ","拡散ダメージ","燃焼ダメージ","開花ダメージ","烈開花ダメージ","超開花ダメージ"],ce=new Map;function ue(){ie.forEach((e=>{const t=e.replace(/ダメージ$/,"");Object.keys(H.q4).forEach((n=>{const a=H.q4[n],l=Object.keys(a);l.includes(t)&&"元素"in a[t]&&ce.set(e,a[t].元素)}))}))}ue();const me=10,fe=4,de=new Map;function pe(e){let t;return e&&e in H.bw&&(t=H.bw[e]),t}async function he(e){const t=[];for(const n of e.members)n.name&&t.push((0,H.tm)(n.name).then((e=>{de.set(n.name,e)})));Promise.all(t)}function be(e){return de.get(e)}function ge(e,t){let n;if(e&&t&&e in H.Nd){const a=H.Nd[e];t in a&&(n=a[t])}return n}function ye(e){const t=e.split("_"),n=t[1];let a;return t.splice(0,2),a=t.length>0?t.join("_"):(0,S.K1)(n),a}function ve(e){return Object.keys(localStorage).filter((t=>t.startsWith((0,S.R4)(e))))}function ke(e,t){let n;const a=(0,S.R4)(e,t),l=localStorage.getItem(a);return l&&(n=JSON.parse(l)),n}const Ee=async(e,t)=>{const n=C().cloneDeep(S.Hd),a=C().cloneDeep(S.HN),l=C().cloneDeep(S.NY),s=C().cloneDeep(S.wX),r=C().cloneDeep(S.HO),o=C().cloneDeep(S.US),i={characterInput:n,artifactDetailInput:a,conditionInput:l,optionInput:s,statsInput:r,damageResult:o};if(!e.name)return i;n.character=e.name,n.characterMaster=await(0,H.tm)(n.character);const c=e.builddata;if(!c)return i;await(0,S.pS)(n,a,l,s,c),(0,S.ge)(n),(0,S.Cl)(n),(0,S.Vk)(n),(0,S.Hk)(l,n,s),W(a.聖遺物ステータスメイン効果,a.聖遺物メイン効果),R(a),l.checkboxList.forEach((e=>{l.conditionValues[e.name]=!1})),l.selectList.forEach((e=>{l.conditionValues[e.name]=0}));const u=n.characterMaster.元素,m={};if(t.members&&t.members.filter((e=>e.name)).forEach((e=>{const t=H.bw[e.name].元素;t in m?m[t]++:m[t]=1})),["千岩古剣","千岩長槍"].includes(n.weapon)){if(t.members){let e=0;for(const n of t.members.filter((e=>e))){const t=await(0,H.tm)(n.name);t.region&&["璃月港"].includes(t.region)&&e++}const a="["+n.weapon+"]璃月キャラ1人毎に攻撃力と会心率+";l.conditionValues[a]=e}}else if(["惡王丸","斬波のひれ長","曚雲の月"].includes(n.weapon)&&t.members){let e=0;for(const n of t.members.filter((e=>e))){const t=await(0,H.tm)(n.name);"元素エネルギー"in t.元素爆発&&(e+=t.元素爆発.元素エネルギー)}e&&(l.conditionValues["チーム全員の元素エネルギー上限の合計"]=e)}const f=m[u]-1,d=Object.keys(m).filter((e=>e!=u)),p=d.length?d.map((e=>m[e])).reduce(((e,t)=>e+t)):0;if(l.conditionValues["[チーム]同じ元素のキャラクター"]=f,l.conditionValues["[チーム]異なる元素のキャラクター"]=p,l.conditionValues["[チーム]キャラクターの元素タイプ"]=Object.keys(m).length-1,le.forEach((e=>{const t="[チーム]"+e+"元素キャラクター";l.conditionValues[t]=m[e]??0;const n="[チーム]"+e+"元素キャラクター(自分以外)";l.conditionValues[n]=(m[e]??0)-(e==u?1:0)})),_e(t)){const e={};_e(t).filter((e=>["炎元素共鳴","水元素共鳴","草元素共鳴","元素共鳴なし"].includes(e))).forEach((t=>{if(s.elementalResonance.conditionValues[t]=!0,"詳細"in H._9[t]){const n=H._9[t].詳細;if(n)for(const t of n)"種類"in t&&"数値"in t&&(t.種類 in e?e[t.種類]+=t.数値:e[t.種類]=t.数値)}})),(0,N.fX)(s.elementalResonance.conditionAdjustments,e)}return T(r,n,a,l,s),L(o,n,l,r),{characterInput:n,artifactDetailInput:a,conditionInput:l,optionInput:s,statsInput:r,damageResult:o}},we={characterInput:S.Hd,artifactDetailInput:S.HN,conditionInput:S.NY,optionInput:S.wX,statsInput:S.HO,damageResult:S.US},_e=e=>{const t=[],n={},a=e.members.filter((e=>e.name));return 4==a.length&&(a.forEach((e=>{const t=pe(e.name);t&&(t.元素 in n?n[t.元素]++:n[t.元素]=1)})),4==Object.keys(n).length?t.push("元素共鳴なし"):Object.keys(n).forEach((e=>{n[e]>=2&&t.push(e+"元素共鳴")}))),t},Ce={class:"title"},Oe={class:"name"},De=(0,l._)("span",{class:"handle"},"◆",-1),je={class:"elemental-resonance"},Me=["src"],Ne={class:"members"},Se={class:"res"},He={style:{"text-align":"left"}},Ve={class:"description"};function Ie(e,t,n,a,r,o){const i=(0,l.up)("MemberItem");return(0,l.wg)(),(0,l.iD)("div",{class:(0,s.C_)("team"+e.selectedClass)},[(0,l._)("div",Ce,[(0,l._)("label",Oe,[De,(0,l._)("span",null,(0,s.zw)(e.team.name),1),e.selected?((0,l.wg)(),(0,l.iD)("span",{key:0,class:"button material-symbols-outlined",onClick:t[0]||(t[0]=(...t)=>e.editOnClick&&e.editOnClick(...t))}," edit_square ")):(0,l.kq)("",!0)]),(0,l._)("div",je,[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)([0,1,2,3],(t=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[e.resonanceElementImgSrcs[t]?((0,l.wg)(),(0,l.iD)("img",{key:0,class:"elemental-resonance",src:e.resonanceElementImgSrcs[t],alt:"resonance"},null,8,Me)):(0,l.kq)("",!0)],64)))),64))])]),(0,l._)("div",Ne,[(0,l._)("table",null,[(0,l._)("tr",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.team.members,(t=>((0,l.wg)(),(0,l.iD)("td",{key:t.id},[(0,l.Wm)(i,{member:t,statsObj:e.memberStats[t.id],displayStat:e.displayStat,showEquipment:!0,viewable:!0,members:e.team.members.map((e=>e.name)),elementalResonance:e.elementalResonance},null,8,["member","statsObj","displayStat","members","elementalResonance"])])))),128))])])]),(0,l._)("table",Se,[(0,l._)("tr",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.resKey,(t=>((0,l.wg)(),(0,l.iD)("td",{key:t,class:(0,s.C_)(e.resBgClass(t))},(0,s.zw)(e.res[t]),3)))),128))])]),(0,l._)("div",He,[(0,l._)("span",{class:"material-symbols-outlined control-button",onClick:t[1]||(t[1]=(...t)=>e.jumpToRotation&&e.jumpToRotation(...t))},"stat_minus_2"),(0,l._)("div",Ve,(0,s.zw)(e.description),1)])],2)}const Ae={class:"member"},Pe={class:"with-tooltip"},We=["src","alt"],Re={class:"tooltip"},Te=["src"],xe={key:0,class:"tag tag-3"},Ue={key:1,class:"tag tag-2"},qe={key:2,class:"tag tag-1"},Fe={key:3,class:"tag tag-0"},Le=["src","alt"],ze=["src","alt"],Ke={key:0,class:"stat-value"},Ye={key:1},Be=["src"],$e=["src"],Ge=["src"];function Ze(e,t,n,r,o,i){return(0,l.wg)(),(0,l.iD)("div",Ae,[(0,l._)("div",{class:"member-img",onDblclick:t[0]||(t[0]=(...t)=>e.characterOnDblclick&&e.characterOnDblclick(...t))},[(0,l._)("div",Pe,[(0,l._)("img",{class:(0,s.C_)("character"+e.characterImgClass),src:e.characterImgSrc,alt:e.displayName(e.member.name)},null,10,We),(0,l._)("span",Re,(0,s.zw)(e.displayName(e.member.name)),1)]),(0,l._)("img",{class:"vision",src:e.visionImgSrc,alt:"vision"},null,8,Te),(0,l.wy)((0,l._)("div",{class:"constellation"},(0,s.zw)(e.constellation),513),[[a.F8,e.constellation]]),e.member.tags[3]?((0,l.wg)(),(0,l.iD)("div",xe,(0,s.zw)(e.member.tags[3]),1)):(0,l.kq)("",!0),e.member.tags[2]?((0,l.wg)(),(0,l.iD)("div",Ue,(0,s.zw)(e.member.tags[2]),1)):(0,l.kq)("",!0),e.member.tags[1]?((0,l.wg)(),(0,l.iD)("div",qe,(0,s.zw)(e.member.tags[1]),1)):(0,l.kq)("",!0),e.member.tags[0]?((0,l.wg)(),(0,l.iD)("div",Fe,(0,s.zw)(e.member.tags[0]),1)):(0,l.kq)("",!0),e.member.replacements[0]?((0,l.wg)(),(0,l.iD)("img",{key:4,class:"replacement replacement-0",src:e.replaceImgSrc(0),alt:e.member.replacements[0]},null,8,Le)):(0,l.kq)("",!0),e.member.replacements[1]?((0,l.wg)(),(0,l.iD)("img",{key:5,class:"replacement replacement-1",src:e.replaceImgSrc(1),alt:e.member.replacements[1]},null,8,ze)):(0,l.kq)("",!0)],32),e.displayStat?((0,l.wg)(),(0,l.iD)("div",Ke,(0,s.zw)(e.statValue),1)):(0,l.kq)("",!0),e.showEquipment?((0,l.wg)(),(0,l.iD)("div",Ye,[(0,l._)("img",{class:"weapon",src:e.imgWeaponSrc,alt:"weapon"},null,8,Be),(0,l._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(0),alt:"artifact-set"},null,8,$e),(0,l._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(1),alt:"artifact-set"},null,8,Ge)])):(0,l.kq)("",!0)])}var Xe=(0,l.aZ)({name:"MemberItem",props:{member:{type:Object,required:!0},statsObj:{type:Object},displayStat:{type:String},showEquipment:{type:Boolean},viewable:{type:Boolean},tags:{type:Array},members:{type:Array},elementalResonance:{type:Array}},emits:["click:character","change:buildname"],setup(e){const{displayName:t,displayStatValue:n}=(0,M.Z)(),a=(0,j.iH)("locate"),s=(0,j.iH)(0);(0,l.YP)(e,(()=>{s.value++}));const r=(0,l.Fl)((()=>e.member.name?H.bw[e.member.name]??void 0:void 0)),o=(0,l.Fl)((()=>r.value?.icon_url??H.bx)),i=(0,l.Fl)((()=>{const e=r.value?.レアリティ;return e?" "+H.dr[String(e)]:""})),c=(0,l.Fl)((()=>r.value?.元素?H.GN[r.value.元素]:H.bx)),u=(0,l.Fl)((()=>f.value?f.value.命ノ星座:"")),m=t=>{const n=t<e.member.replacements.length?e.member.replacements[t]:void 0;return n?H.bw[n].icon_url:H.bx},f=(0,l.Fl)((()=>{let t;const n=e.member.name;return n&&e.member.buildname&&(t=ke(n,e.member.buildname)),t})),d=(0,l.Fl)((()=>{let e;if(f.value){const t=f.value.武器;t&&r.value&&(e=H.Nd[r.value.武器][t])}return e})),p=(0,l.Fl)((()=>d.value?d.value.icon_url:H.bx)),h=(0,l.Fl)((()=>d.value?d.value.key:"")),b=(0,l.Fl)((()=>{const e=[];if(f.value)for(let t=0;t<2;t++){const n="聖遺物セット効果"+(t+1);let a=f.value[n]??"NONE";e.push(H.oN[a])}return e})),g=e=>b.value[e]?.image??H.bx,y=e=>b.value[e]?.key??"",v=(0,l.Fl)((()=>{s.value;let t="-";if(f.value){let a=e.displayStat;e.statsObj&&a&&("会心率/ダメージ"===a?(t=n("会心率",e.statsObj["会心率"]),t+="/",t+=n("会心ダメージ",e.statsObj["会心ダメージ"])):t=n(a,e.statsObj[a]))}return t})),k=()=>{e.viewable&&E()},E=()=>{const t=e.member;if(t?.name&&confirm("げんかるくで"+t.name+"を開きます。よろしいですか？")){const n=e.members?.filter((e=>e!=t.name));(0,S.Ac)(t.name,t.buildname,void 0,n),window.open("./","_blank")}};return{displayName:t,characterImgSrc:o,characterImgClass:i,visionImgSrc:c,constellation:u,replaceImgSrc:m,imgWeaponSrc:p,weaponName:h,imgArtifactSetSrc:g,artifactSetName:y,statValue:v,extraControl:a,characterOnDblclick:k}}}),Qe=n(89);const Je=(0,Qe.Z)(Xe,[["render",Ze]]);var et=Je,tt=(0,l.aZ)({name:"TeamItem",props:{team:{type:Object,required:!0},selected:{type:Boolean,requied:!0},displayStat:{type:String}},emits:["click:edit","change:buildname","click:jump-to-rotation","update:member-result"],components:{MemberItem:et},setup(e,t){const{displayName:n}=(0,M.Z)(),a=(0,j.qj)({}),s=(0,j.qj)({}),r=(0,l.Fl)((()=>e.selected?" selected":"")),o=(0,j.iH)(!1),i=(0,j.qj)({}),c=["炎","水","風","雷","草","氷","岩","物理"],u=localStorage.getItem("キャラクター所持状況");let m;m=u?JSON.parse(u):{};const f=(0,j.iH)(0);async function d(e){const n=[];for(const t of e.members)n.push({key:t.id,value:await Ee(t,e)});await Promise.all(n).then((e=>{e.forEach((e=>{a[e.key]=e.value?.statsInput?.statsObj,s[e.key]=e.value}))})),p(),b(),t.emit("update:member-result",e.id,s)}function p(){const e={};Object.keys(a).forEach((t=>{e[t]={}})),Object.keys(a).forEach((t=>{const n=s[t],a=n?.characterInput?.characterMaster,l=n?.characterInput?.weaponMaster;if(a&&a.チームバフ)for(const r of a.チームバフ){if(r.条件)continue;const a=F(r.数値,n.statsInput.statsObj,n.damageResult,r.最大値,r.最小値),l=r.種類.replace(/V[1-3]$/,"");Object.keys(s).forEach((n=>{n!=t&&(l in e?e[n][l]+=a:e[n][l]=a)}))}if(l&&l.チームバフ)for(const r of l.チームバフ){if(r.条件)continue;const a=F(r.数値,n.statsInput.statsObj,n.damageResult,r.最大値,r.最小値),l=r.種類.replace(/V[1-3]$/,"");Object.keys(s).forEach((n=>{n!=t&&(l in e?e[n][l]+=a:e[n][l]=a)}))}}));for(const t of Object.keys(a))if(t in e)for(const n of Object.keys(e[t]))a[t]&&(n in a[t]?a[t][n]+=e[t][n]:a[t][n]=e[t][n])}function h(){c.forEach((e=>{i[e]=0}))}function b(){h();const e=[],t=[];Object.keys(s).forEach((n=>{const a=s[n],l=a?.characterInput?.characterMaster,r=a?.characterInput?.artifactSetMasters;if(l){if(l&&e.push(l.元素),l.元素スキル?.詳細)for(const e of l.元素スキル?.詳細)if(e.種類&&e.種類.startsWith("敵")&&e.種類.endsWith("耐性")&&e.数値){const t=e.種類.replace(/^敵/,"").replace(/元素耐性$/,"").replace(/耐性$/,"");let n=0;if(C().isNumber(e.数値))n=e.数値;else if(C().isPlainObject(e.数値)){const t=a.characterInput?.元素スキルレベル;t&&t in e.数値&&(n=e.数値[t])}"全"===t?c.filter((e=>"物理"!==e)).forEach((e=>{i[e]-=n})):i[t]-=n}if(l.元素爆発?.詳細)for(const e of l.元素爆発?.詳細)if(e.種類&&e.種類.startsWith("敵")&&e.種類.endsWith("耐性")&&e.数値){const t=e.種類.replace(/^敵/,"").replace(/元素耐性$/,"").replace(/耐性$/,"");let n=0;if(C().isNumber(e.数値))n=e.数値;else if(C().isPlainObject(e.数値)){const t=a.characterInput?.元素爆発レベル;t&&t in e.数値&&(n=e.数値[t])}"全"===t?c.filter((e=>"物理"!==e)).forEach((e=>{i[e]-=n})):i[t]-=n}if(l.固有天賦)for(const e of l.固有天賦)if(e.種類&&e.種類.startsWith("敵")&&e.種類.endsWith("耐性")&&e.数値){const t=e.種類.replace(/^敵/,"").replace(/元素耐性$/,"").replace(/耐性$/,"");let n=0;C().isNumber(e.数値)&&(n=e.数値),"全"===t?c.filter((e=>"物理"!==e)).forEach((e=>{i[e]-=n})):i[t]-=n}let t=0;if(void 0!==a.characterInput?.命ノ星座?t=a.characterInput?.命ノ星座:l.名前 in m&&(t=m[l.名前]),l.命ノ星座)for(let e=1;e<=t;e++){const t=l.命ノ星座[String(e)];if(t.詳細)for(const e of t.詳細)if(e.種類&&e.種類.startsWith("敵")&&e.種類.endsWith("耐性")&&e.数値){const t=e.種類.replace(/^敵/,"").replace(/元素耐性$/,"").replace(/耐性$/,"");C().isNumber(e.数値)&&("全"===t?c.filter((e=>"物理"!==e)).forEach((t=>{i[t]-=e.数値})):i[t]-=e.数値)}}}r&&2==r.length&&r[0].key==r[1].key&&(t.includes(r[0].key)||(t.push(r[0].key),r[0]["4セット効果"]?.詳細&&r[0]["4セット効果"]?.詳細.forEach((e=>{if(e.種類.startsWith("敵")&&e.種類.endsWith("耐性")&&e.数値){const t=e.種類.replace(/^敵/,"").replace(/元素耐性$/,"").replace(/耐性$/,"");i[t]-=Number(e.数値)}}))))})),e.filter((e=>"岩"===e)).length>=2&&(i["岩"]-=-20),e.includes("雷")&&e.includes("氷")&&(i["物理"]-=-40),c.forEach((t=>{"物理"===t||e.includes(t)||(i[t]=0)}))}(0,l.YP)(e,(async e=>{d(e.team),f.value++})),(0,l.bv)((()=>{d(e.team)})),h();const g=(0,l.Fl)((()=>_e(e.team))),y=(0,l.Fl)((()=>{const t=[];return g.value.forEach((n=>{if("元素共鳴なし"==n){const n=e.team.members.filter((e=>e.name));4==n.length&&n.forEach((e=>{const n=H.bw[e.name],a=H.GN[n.元素];t.push(a)}))}else{const e=H.GN[n.replace("元素共鳴","")];t.push(e),t.push(e)}})),t})),v=(0,l.Fl)((()=>e.team.description??"")),k=e=>0!==i[e]?e in H.Cb?H.Cb[e]:"physical":"",E=()=>{t.emit("click:edit",e.team.id)},w=()=>{t.emit("click:jump-to-rotation")};return{displayName:n,selectedClass:r,editable:o,memberStats:a,elementalResonance:g,resonanceElementImgSrcs:y,description:v,res:i,resKey:c,resBgClass:k,editOnClick:E,jumpToRotation:w}}});const nt=(0,Qe.Z)(tt,[["render",Ie]]);var at=nt;const lt=e=>((0,l.dD)("data-v-328fa432"),e=e(),(0,l.Cn)(),e),st=lt((()=>(0,l._)("hr",null,null,-1))),rt={class:"input-name"},ot={class:"character-select-mode"},it={key:0},ct={key:1},ut={class:"tags"},mt=["onClick"],ft={class:"buildname-select"},dt=["value"],pt={class:"input-description"},ht={class:"buttons"};function bt(e,t,n,r,o,i){const c=(0,l.up)("CharacterSelect"),u=(0,l.up)("MemberItem");return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.characterSelectMode?((0,l.wg)(),(0,l.j4)(c,{key:1,visible:!0,characters:e.replacements,"onUpdate:characters":e.updateReplacements},null,8,["characters","onUpdate:characters"])):((0,l.wg)(),(0,l.j4)(c,{key:0,visible:!0,characters:e.characters,"onUpdate:characters":e.updateCharacters},null,8,["characters","onUpdate:characters"])),st,(0,l._)("div",rt,[(0,l.Uk)(" Team Name: "),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.workTeam.name=t),type:"text",minlength:"1",maxlength:"16",placeholder:"INPUT TEAM NAME"},null,512),[[a.nr,e.workTeam.name]])]),(0,l._)("div",ot,[(0,l.Uk)(" Character Select Mode: "),(0,l._)("button",{class:"character-select-mode",onClick:t[1]||(t[1]=(...t)=>e.characterSelectModeOnClick&&e.characterSelectModeOnClick(...t))},(0,s.zw)(e.characterSelectMode?"REPLACEMENTS":"MEMBERS"),1),(0,l._)("div",null,[e.characterSelectMode?((0,l.wg)(),(0,l.iD)("span",ct,(0,s.zw)(e.selectedMemberName()+"の代替キャラクターを選択して下さい"),1)):((0,l.wg)(),(0,l.iD)("span",it," チームメンバーを選択して下さい "))])]),(0,l._)("div",ut,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.TAG_LIST,(t=>((0,l.wg)(),(0,l.iD)("span",{class:(0,s.C_)("tag"+e.tagSelectedClass(t)),key:t,onClick:n=>e.tagOnClick(t)},(0,s.zw)(t),11,mt)))),128))]),(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.workTeam.members,(t=>((0,l.wg)(),(0,l.iD)("div",{class:(0,s.C_)("member"+e.memberSelectedClass(t.id)),key:t.id},[(0,l.Wm)(u,{member:t,onClick:n=>e.memberOnClick(t.id)},null,8,["member","onClick"])],2)))),128)),(0,l._)("div",ft,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedMemberBuildname=t),onChange:t[3]||(t[3]=(...t)=>e.buildnameOnChange&&e.buildnameOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.buildnames,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,s.zw)(e),9,dt)))),128))],544),[[a.F8,e.buildnames.length],[a.bM,e.selectedMemberBuildname]])])]),(0,l._)("div",pt,[(0,l.Uk)(" Short Note: "),(0,l.wy)((0,l._)("input",{class:"description","onUpdate:modelValue":t[4]||(t[4]=t=>e.workTeam.description=t),type:"text",maxlength:"40",placeholder:"INPUT NOTE"},null,512),[[a.nr,e.workTeam.description]])]),(0,l._)("div",ht,[(0,l._)("button",{type:"button",onClick:t[5]||(t[5]=(...t)=>e.cancelOnClick&&e.cancelOnClick(...t))},"cancel"),(0,l._)("button",{type:"button",onClick:t[6]||(t[6]=(...t)=>e.okOnClick&&e.okOnClick(...t))},"ok")])],64)}var gt=n(4485),yt=(0,l.aZ)({name:"TeamEditorModal",components:{CharacterSelect:gt.Z,MemberItem:et},props:{visible:{type:Boolean,required:!0},team:{type:Object,required:!0}},emits:["click:cancel","click:ok"],setup(e,t){const n=(0,j.iH)(!1),a=(0,j.qj)({id:-1,name:"",members:[],description:"",rotation:[],rotationDescription:""}),s=(0,j.iH)(-1),r=["Main-DPS","Carry","Sub-DPS","Support","Driver","Enabler","Battery","Free"],o=(0,j.iH)(""),i=(0,j.iH)(-1);function c(){a.id=e.team.id,a.name=e.team.name;const t=[];for(let n=0;n<e.team.members.length;n++)t.push({id:n,name:e.team.members[n].name,buildname:e.team.members[n].buildname,builddata:e.team.members[n].builddata,tags:C().cloneDeep(e.team.members[n].tags.filter((e=>r.includes(e)))),replacements:e.team.members[n].replacements?[...e.team.members[n].replacements]:[]});a.members.splice(0,a.members.length,...t),a.description=e.team.description,a.rotation=e.team.rotation}c(),(0,l.YP)(e,(e=>{e.team.members&&(c(),s.value>=0&&s.value<a.members.length&&(o.value=a.members[s.value].buildname)),n.value=!1}));const u=(0,l.Fl)((()=>a.members.map((e=>e.name)))),m=(0,l.Fl)((()=>{let e=[];if(s.value>=0&&s.value<a.members.length){const t=a.members[s.value];e=[...t.replacements];for(let n=e.length;n<2;n++)e.push("")}return e})),f=e=>{for(let t=0;t<e.length;t++)if(a.members[t].name!=e[t]&&(a.members[t].tags=[],a.members[t].replacements=[]),a.members[t].name=e[t],a.members[t].name){const e=ve(a.members[t].name).map((e=>ye(e)));e.length?(a.members[t].buildname&&e.includes(a.members[t].buildname)||(a.members[t].buildname=(0,S.K1)(a.members[t].name)),t==s.value&&(o.value=a.members[t].buildname)):a.members[t].buildname=void 0}},d=()=>{s.value>=0&&s.value<a.members.length&&a.members[s.value].name&&(n.value=!n.value)},p=e=>{if(s.value=e,s.value>=0&&s.value<a.members.length){const e=a.members[s.value];o.value=e.buildname,i.value=-1}n.value=!1},h=e=>e==s.value?" selected":"",b=()=>s.value>=0&&s.value<a.members.length?a.members[s.value].name:"",g=e=>{if(s.value<0||s.value>=a.members.length)return;const t=a.members[s.value];if(t&&t.name){const n=t.tags;n&&(n.includes(e)?n.splice(0,n.length,...n.filter((t=>t!=e))):n.push(e))}},y=e=>{let t=!1;if(s.value>=0||s.value<a.members.length){const n=a.members[s.value];n&&n.name&&(t=n.tags.includes(e))}return t?" selected":""},v=(0,l.Fl)((()=>{let e=[];if(s.value>=0&&s.value<a.members.length){const t=a.members[s.value],n=t.name;if(n){e=ve(n).map((e=>ye(e)));const t=(0,S.K1)(n);if(e.includes(t)){const n=e.filter((e=>e!=t)).sort();n.length&&(e=[t,...n])}}}return e})),k=()=>{if(s.value<0||s.value>=a.members.length)return;const e=a.members[s.value];e.buildname=o.value},E=e=>{const t=a.members[s.value];t.replacements=[...e]},w=()=>{t.emit("click:cancel")},_=()=>{t.emit("click:ok",a)};return{characterSelectMode:n,characters:u,replacements:m,TAG_LIST:r,characterSelectModeOnClick:d,selectedMemberId:s,selectedMemberName:b,tagOnClick:g,tagSelectedClass:y,workTeam:a,memberOnClick:p,memberSelectedClass:h,selectedMemberBuildname:o,buildnames:v,buildnameOnChange:k,updateReplacements:E,updateCharacters:f,cancelOnClick:w,okOnClick:_}}});const vt=(0,Qe.Z)(yt,[["render",bt],["__scopeId","data-v-328fa432"]]);var kt=vt;const Et=e=>((0,l.dD)("data-v-59204c35"),e=e(),(0,l.Cn)(),e),wt={class:"team-rotation"},_t={class:"icon-list"},Ct={key:0,class:"action with-tooltip"},Ot=["src","alt","onClick"],Dt={class:"tooltip"},jt={key:1,class:"action with-tooltip"},Mt=["src","alt","onClick"],Nt={class:"tooltip"},St={key:2,class:"action with-tooltip"},Ht=["src","alt","onClick"],Vt={class:"tooltip"},It={class:"control-button"},At={style:{width:"30px"}},Pt=Et((()=>(0,l._)("span",{class:"material-symbols-outlined"},"delete",-1))),Wt=Et((()=>(0,l._)("td",{style:{width:"30px"}},null,-1))),Rt={class:"rotation-list"},Tt={class:"rotation-item"},xt=["src","alt"],Ut=["onTouchend"],qt=["src","alt","onClick"],Ft={class:"tooltip"},Lt=["onClick"],zt={class:"action-attribute"},Kt=Et((()=>(0,l._)("br",null,null,-1))),Yt=Et((()=>(0,l._)("br",null,null,-1))),Bt={key:0};function $t(e,t,n,r,o,i){const c=(0,l.up)("draggable"),u=(0,l.up)("ERCalculator");return(0,l.wg)(),(0,l.iD)("div",wt,[(0,l._)("fieldset",_t,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.team.members,(t=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t.id},[e.getNormalAttackDetail(t)?((0,l.wg)(),(0,l.iD)("div",Ct,[(0,l._)("img",{class:(0,s.C_)("action-icon"+e.bgColorClass(t.name)),src:e.getNormalAttackDetail(t).icon_url??e.IMG_SRC_DUMMY,alt:e.displayName(e.getNormalAttackDetail(t).名前),onClick:n=>e.listActionOnClick(t,"N")},null,10,Ot),(0,l._)("span",Dt,(0,s.zw)(e.displayName(t.name))+" "+(0,s.zw)(e.displayName("通常攻撃")),1)])):(0,l.kq)("",!0),e.getElementalSkillDetail(t)?((0,l.wg)(),(0,l.iD)("div",jt,[(0,l._)("img",{class:(0,s.C_)("action-icon"+e.bgColorClass(t.name)),src:e.getElementalSkillDetail(t).icon_url,alt:e.displayName(e.getElementalSkillDetail(t).名前),onClick:n=>e.listActionOnClick(t,"E")},null,10,Mt),(0,l._)("span",Nt,(0,s.zw)(e.displayName(t.name))+" "+(0,s.zw)(e.displayName("元素スキル")),1)])):(0,l.kq)("",!0),e.getElementalBurstDetail(t)?((0,l.wg)(),(0,l.iD)("div",St,[(0,l._)("img",{class:(0,s.C_)("action-icon"+e.bgColorClass(t.name)),src:e.getElementalBurstDetail(t).icon_url,alt:e.displayName(e.getElementalBurstDetail(t).名前),onClick:n=>e.listActionOnClick(t,"Q")},null,10,Ht),(0,l._)("span",Vt,(0,s.zw)(e.displayName(t.name))+" "+(0,s.zw)(e.displayName("元素爆発")),1)])):(0,l.kq)("",!0)],64)))),128)),(0,l._)("table",It,[(0,l._)("tr",null,[(0,l._)("td",At,[(0,l._)("span",{class:"material-symbols-outlined control-button",onClick:t[0]||(t[0]=t=>e.$emit("click:jump-to-team"))},"stat_2")]),(0,l._)("td",null,[(0,l._)("label",{class:(0,s.C_)(e.removeMode?"checked":"")},[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=t=>e.removeMode=t)},null,512),[[a.e8,e.removeMode]]),Pt],2)]),Wt])])]),(0,l._)("fieldset",Rt,[(0,l.Wm)(c,{list:e.rotationList,"item-key":"id",sort:!0,handle:".handle",onChange:e.rotationListOnChange},{item:(0,l.w5)((({element:t})=>[(0,l._)("div",Tt,[e.previousRotation(t)?.member!=t.member?((0,l.wg)(),(0,l.iD)("img",{key:0,class:"character-icon",src:e.getCharacterMaster(t.member).icon_url,alt:e.displayName(t.member)},null,8,xt)):(0,l.kq)("",!0),(0,l._)("div",{class:(0,s.C_)("action-item "+e.colorClass(t.member))},[(0,l._)("div",{class:"with-tooltip",onTouchend:n=>e.rotationActionOnClick(t)},[(0,l._)("img",{class:(0,s.C_)("action-icon handle"+e.bgColorClass(t.member)),src:e.getActionDetail(t).icon_url,alt:e.displayName(e.getActionDetail(t).名前),onClick:n=>e.rotationActionOnClick(t)},null,10,qt),(0,l._)("span",Ft,(0,s.zw)(e.displayName(e.getActionDetail(t).名前)),1),e.removeMode?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"remove-mark",onClick:n=>e.removeItemOnClick(t)},null,8,Lt)):(0,l.kq)("",!0)],40,Ut),(0,l._)("div",zt,(0,s.zw)(e.actionDisplay(t)),1)],2)])])),_:1},8,["list","onChange"]),Kt,(0,l.wy)((0,l._)("textarea",{class:"rotation-description","onUpdate:modelValue":t[2]||(t[2]=t=>e.rotationDescription=t),rows:"10",maxlength:"400",onChange:t[3]||(t[3]=(...t)=>e.updateRotation&&e.updateRotation(...t))},null,544),[[a.nr,e.rotationDescription]])]),Yt,((0,l.wg)(),(0,l.iD)("div",Bt,[(0,l.Wm)(u,{team:e.team,rotationList:e.rotationList,teamMemberResult:e.teamMemberResult},null,8,["team","rotationList","teamMemberResult"])]))])}const Gt=e=>((0,l.dD)("data-v-73ffed64"),e=e(),(0,l.Cn)(),e),Zt={class:"er-calculator"},Xt=Gt((()=>(0,l._)("div",null,[(0,l._)("p",null,"実験中")],-1))),Qt={class:"er-calculator"},Jt=Gt((()=>(0,l._)("th",{colspan:"2"},null,-1))),en=["src","alt"],tn={colspan:"2"},nn=["onUpdate:modelValue"],an={colspan:"2"},ln=["onUpdate:modelValue"],sn=["value"],rn={colspan:"2"},on=["src","alt"],cn=["onUpdate:modelValue"],un=["value"],mn={class:"result-row"},fn={colspan:"2"},dn={colspan:"2"},pn=["onUpdate:modelValue"],hn={class:"label-row"},bn=Gt((()=>(0,l._)("th",null,"元素粒子",-1))),gn={colspan:"4"},yn=["onUpdate:modelValue"],vn=["src","alt"],kn=["src","alt"],En=["onUpdate:modelValue"],wn={colspan:"2"},_n={class:"label-row"},Cn=Gt((()=>(0,l._)("th",{colspan:"2"},"元素エネルギー",-1))),On={colspan:"4"},Dn=["src","alt"],jn=["src","alt"],Mn=Gt((()=>(0,l._)("td",null,null,-1))),Nn=["onUpdate:modelValue"],Sn={colspan:"2"},Hn=["onUpdate:modelValue"],Vn={colspan:"2"},In=["src","alt","onClick"],An=Gt((()=>(0,l._)("br",null,null,-1))),Pn={class:"supply-from-enemy"},Wn=Gt((()=>(0,l._)("tr",null,[(0,l._)("th"),(0,l._)("th",null,"元素オーブ"),(0,l._)("th",null,"元素粒子")],-1))),Rn=["onUpdate:modelValue"],Tn=["onUpdate:modelValue"],xn={class:"message-area"},Un=Gt((()=>(0,l._)("hr",null,null,-1))),qn={class:"character"},Fn={key:0},Ln=(0,l.uE)('<div class="message-area" data-v-73ffed64><hr data-v-73ffed64><dl data-v-73ffed64><dt data-v-73ffed64>元素スキルが生成する元素粒子</dt><dd data-v-73ffed64><ol data-v-73ffed64><li data-v-73ffed64>大部分のキャラクター<br data-v-73ffed64> 元素スキル使用時に元素粒子が発生するタイプの元素スキルは、 直後のアクション実行者が元素粒子を拾得する。 </li><li data-v-73ffed64>胡桃、宵宮、神里綾人、アルハイゼン、放浪者 等<br data-v-73ffed64> 元素スキル使用時に元素粒子が発生せず、 その後の通常攻撃または重撃命中時に元素粒子が発生するタイプの元素スキルは、 継続時間一杯攻撃した場合に発生するであろう数の元素粒子を使用者自身が拾得する。 </li><li data-v-73ffed64>フィッシュル、鍾離、アルベド、珊瑚宮心海、八重神子 等<br data-v-73ffed64> 設置物からの攻撃命中時に元素粒子が発生するタイプの元素スキルは、 ローテーションまたは継続時間の間ずっと攻撃し続けた場合に発生するであろう数の元素粒子を出場時間を基準に全員に按分する。 </li></ol></dd><dt data-v-73ffed64>雷元素共鳴が生成する元素粒子</dt><dd data-v-73ffed64> ローテーションの間ずっと5秒間隔で雷元素関連反応が起き続けた場合に発生するであろう数の元素粒子を出場時間を基準に全員に按分する。 </dd><dt data-v-73ffed64>西風武器が生成する元素粒子</dt><dd data-v-73ffed64> 使用者の出場回数および出場時間(%)、ローテーション長から武器効果をトリガーする回数を決定する。 トリガー回数はローテーション長をクールタイムで割った数を超えない。<br data-v-73ffed64> 元素粒子は基本的に使用者が拾得するが、使用者が1アクションだけで退場する場合は次のアクション実行者が拾得する。 </dd><dt data-v-73ffed64>刻晴とガイアとフィッシュル</dt><dd data-v-73ffed64></dd></dl></div>',1);function zn(e,t,n,r,o,i){return(0,l.wg)(),(0,l.iD)("div",Zt,[Xt,(0,l._)("div",null,[(0,l._)("label",null,[(0,l.Uk)((0,s.zw)(e.displayName("ローテーションの長さ(秒)"))+" ",1),(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=t=>e.rotationLength=t),min:"10",max:"180",onChange:t[1]||(t[1]=(...t)=>e.inputOnChange&&e.inputOnChange(...t))},null,544),[[a.nr,e.rotationLength]])])]),(0,l._)("table",Qt,[(0,l._)("tr",null,[Jt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.calculatorInput,((t,n)=>((0,l.wg)(),(0,l.iD)("td",{key:n,class:(0,s.C_)(e.bgColorClass(n))},[(0,l._)("img",{src:e.characterImgSrc(t.character),alt:e.displayName(t.character),class:"character"},null,8,en)],2)))),128))]),(0,l._)("tr",null,[(0,l._)("th",tn,(0,s.zw)(e.displayName("元素爆発")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.calculatorInput,((t,n)=>((0,l.wg)(),(0,l.iD)("td",{key:n,class:(0,s.C_)(e.bgColorClass(n))},[(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":e=>t.energyCost=e},null,8,nn),[[a.nr,t.energyCost]])],2)))),128))]),(0,l._)("tr",null,[(0,l._)("th",an,(0,s.zw)(e.displayName("命ノ星座")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.calculatorInput,((n,r)=>((0,l.wg)(),(0,l.iD)("td",{key:r,class:(0,s.C_)(e.bgColorClass(r))},[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":e=>n.constellation=e,onChange:t[2]||(t[2]=(...t)=>e.inputOnChange&&e.inputOnChange(...t))},[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)([0,1,2,3,4,5,6],(e=>(0,l._)("option",{key:e,value:e},(0,s.zw)("C"+e),9,sn))),64))],40,ln),[[a.bM,n.constellation]])],2)))),128))]),(0,l._)("tr",null,[(0,l._)("th",rn,(0,s.zw)(e.displayName("武器")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.calculatorInput,((n,r)=>((0,l.wg)(),(0,l.iD)("td",{key:r,class:(0,s.C_)("weapon"+e.bgColorClass(r))},[(0,l._)("img",{src:e.weaponImgSrc(n.character,n.currentWeapon),alt:e.displayName(n.currentWeapon),class:"input-item"},null,8,on),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":e=>n.weaponRefine=e,onChange:t[3]||(t[3]=(...t)=>e.inputOnChange&&e.inputOnChange(...t))},[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)([1,2,3,4,5],(e=>(0,l._)("option",{key:e,value:e},(0,s.zw)("R"+e),9,un))),64))],40,cn),[[a.bM,n.weaponRefine]])],2)))),128))]),(0,l._)("tr",mn,[(0,l._)("th",fn,(0,s.zw)(e.displayName("元素チャージ効率")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.energyRechargeGls,((t,n)=>((0,l.wg)(),(0,l.iD)("td",{key:n,class:(0,s.C_)(e.bgColorClass(n))},(0,s.zw)(t+"%"),3)))),128))]),(0,l._)("tr",null,[(0,l._)("th",dn,(0,s.zw)(e.displayName("出場時間(%)")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.calculatorInput,((n,r)=>((0,l.wg)(),(0,l.iD)("td",{key:r,class:(0,s.C_)(e.bgColorClass(r))},[(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":e=>n.onField=e,min:"0",max:"100",onChange:t[4]||(t[4]=(...t)=>e.inputOnChange&&e.inputOnChange(...t))},null,40,pn),[[a.nr,n.onField]])],2)))),128))]),(0,l._)("tr",hn,[bn,(0,l._)("th",null,(0,s.zw)(e.displayName("生成数")),1),(0,l._)("th",gn,(0,s.zw)(e.displayName("拾得数")),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.inputRowParticleEnemy,((t,n)=>((0,l.wg)(),(0,l.iD)("tr",{key:n,class:(0,s.C_)(e.bgColorClass2(t))},[(0,l._)("th",null,(0,s.zw)(e.displayName("敵")),1),(0,l._)("td",null,(0,s.zw)(Math.round(10*t.currentValues.reduce(((e,t)=>e+t),0))/10),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Array.from({length:t.currentValues.length},((e,t)=>t)),(e=>((0,l.wg)(),(0,l.iD)("td",{key:e},[(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":n=>t.currentValues[e]=n,min:"0"},null,8,yn),[[a.nr,t.currentValues[e]]])])))),128))],2)))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.inputRowParticle,((t,n)=>((0,l.wg)(),(0,l.iD)("tr",{key:n,class:(0,s.C_)(e.bgColorClass2(t))},[(0,l._)("th",null,[(0,l._)("img",{src:e.rowImgSrc1(t),alt:e.displayName(t.character),class:(0,s.C_)(e.rowImgSrc1Class(t))},null,10,vn),(0,l._)("img",{src:e.rowImgSrc2(t),alt:e.displayName(t.triggerName),class:"input-item"},null,8,kn)]),(0,l._)("td",null,(0,s.zw)(Math.round(10*t.currentValues.reduce(((e,t)=>e+t),0))/10),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Array.from({length:t.currentValues.length},((e,t)=>t)),(e=>((0,l.wg)(),(0,l.iD)("td",{key:e},[(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":n=>t.currentValues[e]=n,min:"0"},null,8,En),[[a.nr,t.currentValues[e]]])])))),128))],2)))),128)),(0,l._)("tr",null,[(0,l._)("th",wn,(0,s.zw)(e.displayName("元素チャージ")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.particleRecharges,((e,t)=>((0,l.wg)(),(0,l.iD)("td",{key:t,class:"result"},(0,s.zw)(e),1)))),128))]),(0,l._)("tr",_n,[Cn,(0,l._)("th",On,(0,s.zw)(e.displayName("獲得量")),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.inputRowEnergy,((t,n)=>((0,l.wg)(),(0,l.iD)("tr",{key:n,class:(0,s.C_)(e.bgColorClass2(t))},[(0,l._)("th",null,[(0,l._)("img",{src:e.rowImgSrc1(t),alt:e.displayName(t.character),class:(0,s.C_)(e.rowImgSrc1Class(t))},null,10,Dn),(0,l._)("img",{src:e.rowImgSrc2(t),alt:e.displayName(t.triggerName),class:"input-item"},null,8,jn)]),Mn,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Array.from({length:t.currentValues.length},((e,t)=>t)),(e=>((0,l.wg)(),(0,l.iD)("td",{key:e},[(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":n=>t.currentValues[e]=n,min:"0"},null,8,Nn),[[a.nr,t.currentValues[e]]])])))),128))],2)))),128)),(0,l._)("tr",null,[(0,l._)("th",Sn,(0,s.zw)(e.displayName("元素爆発(回数)")),1),((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)([0,1,2,3],(t=>(0,l._)("td",{key:t,class:(0,s.C_)(e.bgColorClass(t))},[(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":n=>e.burstCounts[t]=n,min:"0"},null,8,Hn),[[a.nr,e.burstCounts[t]]])],2))),64))]),(0,l._)("tr",null,[(0,l._)("th",Vn,(0,s.zw)(e.displayName("武器変更")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.calculatorInput,((t,n)=>((0,l.wg)(),(0,l.iD)("td",{key:n,class:(0,s.C_)(e.bgColorClass(n))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.replaceWeapons,((n,a)=>((0,l.wg)(),(0,l.iD)("img",{key:a,src:e.replaceWeaponImgSrc(t,n),alt:e.displayName(n),class:(0,s.C_)("input-item"+e.replaceWeaponClass(t,n)),onClick:a=>e.replaceWeaponOnClick(t,n)},null,10,In)))),128))],2)))),128))])]),An,(0,l._)("div",null,[(0,l._)("label",null,[(0,l.Uk)((0,s.zw)(e.displayName("戦闘の長さ(秒)"))+" ",1),(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=t=>e.combatLength=t),min:"1",onChange:t[6]||(t[6]=(...t)=>e.inputOnChange&&e.inputOnChange(...t))},null,544),[[a.nr,e.combatLength]])]),(0,l._)("table",Pn,[(0,l._)("caption",{onClick:t[7]||(t[7]=t=>e.isOpenSupplyFromEnemy=!e.isOpenSupplyFromEnemy)},(0,s.zw)(e.isOpenSupplyFromEnemy?"-":"+")+" "+(0,s.zw)(e.displayName("敵"))+" "+(0,s.zw)(e.isOpenSupplyFromEnemy?"-":"+"),1),Wn,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.supplyFromEnemy,((t,n)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("tr",{key:n},[(0,l._)("th",null,(0,s.zw)(e.displayName(t[0])),1),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":e=>t[1]=e,min:"0"},null,8,Rn),[[a.nr,t[1]]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":e=>t[2]=e,min:"0"},null,8,Tn),[[a.nr,t[2]]])])])),[[a.F8,e.isOpenSupplyFromEnemy||t[1]||t[2]]]))),128))])]),(0,l._)("div",xn,[Un,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.messages,((e,t)=>((0,l.wg)(),(0,l.iD)("p",{key:t},[(0,l._)("span",qn,(0,s.zw)(e[0]),1),(0,l.Uk)("   "),(0,l._)("span",null,(0,s.zw)(e[1]),1),e[0]||e[1]?((0,l.wg)(),(0,l.iD)("br",Fn)):(0,l.kq)("",!0),(0,l.Uk)("   "+(0,s.zw)(e[2]),1)])))),128))]),Ln])}const Kn={"ヌヴィレット":{E:[4,1,0,12]},"リネ":{E:5},"白朮":{E:3.5},"ディシア":{E:[.33,-1,12,20,2,.33,-1,18,20]},"アルハイゼン":{"E.Press":[6,0],"E.Hold":[6,0]},"放浪者":{E:[4,0]},"ナヒーダ":{"E.Press":[.36,-1,25,5],"E.Hold":[.36,-1,25,6]},"ニィロウ":{E:4.5},"セノ":{E:3,"E(burst)":1.5},"ティナリ":{E:3.5},"夜蘭":{"E.Press":4,"E.Hold":4},"神里綾人":{E:[4/6,0,6,12]},"八重神子":{E:[.36,-1,14,4]},"申鶴":{"E.Press":3,"E.Hold":4},"荒瀧一斗":{E:3.5},"珊瑚宮心海":{E:[.33,-1,12,20]},"雷電将軍":{E:[.45,-1,25,10]},"アーロイ":{E:5},"宵宮":{E:[.4,0,10,18]},"神里綾華":{E:4.5},"楓原万葉":{"E.Press":3,"E.Hold":4},"エウルア":{"E.Press":1.5,"E.Hold":2.5},"胡桃":{E:[5/9,0,9,16]},"魈":{E:3,"E(burst)":0},"甘雨":{E:[1,-1,4,10]},"アルベド":{"E.Press":[.3,-1,30,4],"E.Hold":[.3,-1,30,4]},"鍾離":{"E.Press":[.25,-1,20,4],"E.Hold":[.25,-1,20,12]},"タルタリヤ":{E:3.5},"クレー":{E:3.5},"ウェンティ":{"E.Press":3,"E.Hold":4},"刻晴":{"E.Press":2.5,"E.Hold":2.5},"モナ":{"E.Press":[3.33,5,5,12],"E.Hold":[3.33,5,5,12]},"七七":{E:0},"ディルック":{E:3.75},"ジン":{E:2.5},"フレミネ":{E:2,"E(burst)":1},"リネット":{"E.Press":4,"E.Hold":4},"綺良々":{"E.Press":3,"E.Hold":4},"カーヴェ":{E:2},"ミカ":{"E.Press":4,"E.Hold":4},"ヨォーヨ":{"E.Press":[.5,-1,10,15],"E.Hold":[.5,-1,10,15]},"ファルザン":{E:2},"レイラ":{E:[.11,-1,12,12]},"キャンディス":{"E.Press":2,"E.Hold":3},"ドリー":{E:2},"コレイ":{E:3},"鹿野院平蔵":{E:2},"久岐忍":{E:[.3,-1,12,15,2,.3,-1,15,15]},"雲菫":{"E.Press":2,"E.Hold":3},"ゴロー":{"E.Press":2,"E.Hold":2},"トーマ":{E:3.4},"九条裟羅":{E:0},"早柚":{"E.Press":2,"E.Hold":3},"煙緋":{E:3},"ロサリア":{E:2.5},"辛炎":{E:4},"ディオナ":{"E.Press":1.6,"E.Hold":4},"スクロース":{E:4},"重雲":{E:4},"ノエル":{E:0},"ベネット":{"E.Press":2.5,"E.Hold":3},"フィッシュル":{E:[2/3,-1,10,24,6,2/3,-1,12,24]},"凝光":{E:3},"行秋":{E:4.5},"北斗":{"E.Press":2,"E.Hold":3},"香菱":{E:[.5,-1,8,12]},"レザー":{"E.Press":3,"E.Hold":4,"E.Press(burst)":0},"バーバラ":{E:0},"リサ":{"E.Press":0,"E.Hold":5},"ガイア":{E:2.5},"アンバー":{"E.Press":[4,8,0,15],"E.Hold":[4,8,0,15]},"旅人(水)":{"E.Press":3+1/3,"E.Hold":3+1/3},"旅人(草)":{E:2.5},"旅人(雷)":{E:1},"旅人(岩)":{"E.Press":3+1/3,"E.Hold":3+1/3},"旅人(風)":{"E.Press":2,"E.Hold":3+1/3}};function Yn(e){const t=Kn[e];return t?Object.keys(t).filter((e=>e.startsWith("E")&&-1==e.indexOf("(burst)"))):["E"]}function Bn(e,t,n=0,a=!1){let l;const s=Kn[e];if(s){const e=a?"(burst)":"";for(const a of[t+e,t])if(l=s[a],C().isArray(l)&&l.length>4&&(l=l[4]>=n?l.slice(5):l.slice(0,4)),void 0!==l)break}return l}function $n(e,t){let n=0;if(C().isNumber(e))n=e;else{n=e[0];let a=Zn(e);a>0&&(void 0!==t&&a>t&&(a=Math.max(0,t)),n*=a)}return n}function Gn(e){return C().isArray(e)&&e.length>1?e[1]:1}function Zn(e){return C().isArray(e)&&e.length>2?e[2]:0}const Xn="01",Qn="02",Jn="03",ea="04",ta="06",na="11",aa="13",la="14",sa="16",ra="18",oa="19";function ia(e,t){return t?.length?t.filter((t=>(!e||t.member==e)&&t.action.startsWith("N"))).reduce(((e,t)=>e+Number(t.action.substring(1,2)??"1")),0):1}function ca(e,t){return t?.length?t.filter((t=>(!e||t.member==e)&&-1!=t.action.indexOf("C"))).length:1}function ua(e,t,n="E"){return t?.length?t.filter((t=>(!e||t.member==e)&&t.action.startsWith(n))).length:1}function ma(e,t){return t?.length?t.filter((t=>(!e||t.member==e)&&"Q"===t.action)).length:1}function fa(e,t,n){let a=[0,0,0,0];const l=e.members.map((e=>e.name));if(n?.length){a=[0,0,0,0];const e=Math.ceil(100/t),s=[0,0,0,0];let r,o=0;for(let t=0;t<n.length;t++){const e=n[t],a=pe(e.member);if(r&&e.member!=r&&(s[l.indexOf(r)]+=o>1?o:1,o=0),"Q"===e.action)o+=1,a?.レアリティ&&5===a.レアリティ&&(o+=.5);else if("E.Hold"===e.action)o+=1;else if(["E","E.Press"].includes(e.action))o+=.5;else if(e.action.startsWith("N")){const t=Number(e.action.substring(1,2))??1,n=e.action.endsWith("C");"片手剣"===a?.武器?"N"==e.action&&"神里綾人"===e.member?o+=6:o+=.3*t+(n?.5:0):"長柄武器"===a?.武器?o+=.3*t+(n?.5:0):"両手剣"===a?.武器?o+=.5*t:"弓"===a?.武器?o+=.3*t:"法器"===a?.武器&&(o+=.5*t)}else"C"==e.action&&("両手剣"===a?.武器?o+=3:"弓"===a?.武器?o+=1.5:"法器"===a?.武器&&("ヌヴィレット"===e.member?o+=3:o+=1));r=e.member}r&&o>0&&(s[l.indexOf(r)]+=o>1?o:1);const i=C().sum(s);for(let t=0;t<a.length;t++)i&&t<s.length?a[t]=Math.ceil(s[t]/i*100/e)*e:a[t]=25;const c=C().sum(a);if(c>100){const e=C().max(a);for(let t=0;t<a.length;t++)if(a[t]==e){a[t]-=c-100;break}}}else{const e=l.filter((e=>e)).length;if(e)for(const t of l.filter((e=>e)))a[l.indexOf(t)]=100/e}return a}function da(e,t,n,a,l,s){const r=n.members.map((e=>e.name)),o=r.indexOf(e);if(-1==o)return[];const i=new Array,c=[],u=n.members[o],m=ua(e,l),f=ma(e,l),d=s?s[u.id]:void 0;let p=0,h=0,b=0;const g=[0,0,0,0];if(!e)return[];if("ヌヴィレット"===e)p=0;else if("リネ"===e)c.push("リネがプロップアローを発射することでHPを消費した時、そのプロップアローによって召喚されたファニーキャット·ハットが敵に命中すると、リネの元素エネルギーが3ポイント回復"),p=3,i.push([Jn,"息を呑むパフォーマンス",p,h,b,g]);else if("白朮"===e)p=0;else if("ディシア"===e&&t>=4)c.push("炎哮獅子咬の熾鬣拳、または残火蹴が敵に命中した時、ディシアの元素エネルギーを1.5回復。この効果は0.2秒毎に1回のみ発動可能。"),p=1.5,i.push([ea,"4",p,h,b,g]);else if("アルハイゼン"===e)p=0;else if("放浪者"===e){c.push("・雷元素：通常攻撃および重撃が敵に命中した後、元素エネルギーが0.8ポイント回復する。この方式による元素エネルギー回復は、0.2秒毎に1回のみ可能。");const t=n.members.filter((e=>"雷"===be(e.name)?.元素)).length;if(t){const t=ia(e,l)+ca(e,l);p+=.8*t}i.push([Jn,"拾玉得花",p,h,b,g])}else if("ナヒーダ"===e)p=0;else if("ニィロウ"===e&&t>=4){c.push("七域のダンスのピルエット状態の3段目のステップが敵に命中すると、ニィロウの元素エネルギーが15回復する。");let t=m;if(l?.length){t=0;let n=!1;for(let a=0;a<l.length;a++){const s=l[a];s.member==e?"E"===s.action&&(n||t++,n=!0):n=!1}}p+=15*t,i.push([ea,"4",p,h,b,g])}else if("セノ"===e&&t>=4)c.push("聖儀·狼駆憑走の啓途誓使状態の時、感電、超電導、過負荷、原激化、超激化、超開花または雷元素拡散反応を起こすと、周囲のチーム全員（セノ自身を除く）の元素エネルギーを3回復する。この効果は一回の聖儀·狼駆憑走で、最大5回まで発動できる。"),n.members.filter((e=>["水","氷","炎","草"].includes(pe(e.name)?.元素??"--"))).length&&(b=15*f),i.push([ea,"4",p,h,b,g]);else if("ティナリ"===e)p=0;else if("夜蘭"===e)p=0;else if("神里綾人"===e)c.push("神里綾人が待機中の時、元素エネルギーが40未満の場合、1秒毎に元素エネルギーを2回復する。"),p=2,i.push([Jn,"神里流·満ちゆく破月",p,h,b,g]);else if("八重神子"===e&&t>=1)c.push("大密法·天狐顕現で天狐雷霆を1回発生させるたびに、八重神子自身の元素エネルギーを8ポイント回復する。"),p=24*f,i.push([ea,"1",p,h,b,g]);else if("申鶴"===e)p=0;else if("荒瀧一斗"===e&&t>=2){c.push("最凶鬼王·一斗轟臨！！を発動した後、チーム内に岩元素タイプキャラクターが1人いる毎に、クールタイム-1.5秒、荒瀧一斗の元素エネルギーを6ポイント回復する。この方式で短縮できるクールタイムは4.5秒までとなり、回復できる元素エネルギーは18ポイントまでとなる。");const e=n.members.filter((e=>"岩"===pe(e.name)?.元素)).length;p=Math.min(18,6*e)*f,i.push([ea,"2",p,h,b,g])}else if("珊瑚宮心海"===e&&t>=4)c.push("海人の羽衣による儀来羽衣状態の時、珊瑚宮心海の通常攻撃の攻撃速度+10%。そして通常攻撃が敵に命中すると、元素エネルギーを0.8ポイント回復する。この効果は0.2秒毎に1回のみ発動可能。"),p=.8,i.push([ea,"4",p,h,b,g]);else if("雷電将軍"===e){c.push("攻撃が敵に命中すると、周囲のチーム全員の元素エネルギーを回復する。この方式での元素エネルギー回復は1秒毎に1回のみ可能で、継続時間内に最大5回まで発動可能。"),c.push("元素チャージ効率が100%を超えている場合、超えた分1%につき、雷電将軍は下記の効果を獲得する。・夢想の一心状態で提供する元素エネルギー回復+0.6%。");let e=2.3*1.192;d&&d.damageResult.元素爆発.forEach((t=>{"夢想の一心エネルギー回復"===t[0]&&(e=t[2])})),h=5*e*f,i.push([Qn,"",p,h,b,g])}else if("アーロイ"===e)p=0;else if("宵宮"===e)p=0;else if("神里綾華"===e)p=0;else if("楓原万葉"===e&&t>=4)c.push("楓原万葉の元素エネルギーが45以下の時、下記の効果を獲得する。・一回押し/長押しで千早振るを発動した時、元素エネルギーを3/4回復する。・滑翔状態の時、1秒毎に元素エネルギーを2回復する。"),p=3,i.push([ea,"4",p,h,b,g]);else if("エウルア"===e)p=0;else if("胡桃"===e)p=0;else if("魈"===e)p=0;else if("甘雨"===e&&t>=1){c.push("二段チャージ重撃の霜華の矢または霜華満開が命中した時、敵の氷元素耐性-15%、継続時間6秒。命中時に甘雨の元素エネルギーを2回復。二段チャージの重撃による元素エネルギーの回復効果は、1回の重撃で1度のみ発動可能。");const t=ca(e,l);p=2*t,i.push([ea,"1",p,h,b,g])}else if("アルベド"===e&&t>=1)c.push("アルベドの創生術·擬似陽華の刹那の花が放たれた時、アルベド自身の元素エネルギーが1.2回復する。"),p=1.2*Math.trunc(a/2),i.push([ea,"1",p,h,b,g]);else if("鍾離"===e)p=0;else if("タルタリヤ"===e)p=0;else if("クレー"===e){c.push("クレーの重撃が会心を発生すると、チーム全員の元素エネルギーが2回復する。");const n=ca(e,l),a=d?.statsInput.statsObj.会心率??100;h=2*a/100*n,i.push([Jn,"無限花火",p,h,b,g]),t>=6&&(c.push("ドッカン花火状態中、クレーは3秒毎にチーム全員（クレー自身を除く）の元素エネルギーを3回復する。"),h=0,b=3,i.push([ea,"6",p,h,b,g]))}else if("ウェンティ"===e){c.push("風神の詩効果終了後、ウェンティの元素エネルギーを15回復する。元素変化があった場合、該当元素のチームメンバーの元素エネルギーを15回復する。"),p=15*f;const e=p;for(const t of["炎","水","雷","氷"]){let a=!1;for(let l=0;l<n.members.length;l++){const s=pe(n.members[l].name);s?.元素==t&&(g[l]=e,a=!0)}if(a)break}i.push([Jn,"暴風の目",p,h,b,g])}else if("刻晴"===e)p=0;else if("モナ"===e)p=0;else if("七七"===e&&t>=1)c.push("度厄のお札マークがついている敵に寒病鬼差が命中した時、七七の元素エネルギーを2回復する。"),p=2,i.push([ea,"1",p,h,b,g]);else if("ディルック"===e)p=0;else if("ジン"===e)p=16*f;else if("フレミネ"===e&&t>=2)c.push("プレッシャー·フロウ·高圧粉砕を発動すると、フレミネの元素エネルギーが2ポイント回復する。ランク4の高圧粉砕を発動すると、元素エネルギーの回復量が3ポイントに変わる。"),p=2*m,i.push([ea,"2",p,h,b,g]);else if("リネット"===e)p=0;else if("綺良々"===e)p=0;else if("カーヴェ"===e)p=0;else if("ミカ"===e&&t>=4)c.push("ミカ自身によるスカイフェザーソングの鷹の羽状態がチームにいるキャラクターのHPを回復した時、ミカの元素エネルギーを3回復する。1回のスカイフェザーソングの鷹の羽状態で、元素エネルギーは最大5回まで回復できる。"),p=15*f,i.push([ea,"4",p,h,b,g]);else if("ヨォーヨ"===e&&t>=2)c.push("玉颗珊々月中落の桂子仙機状態にある時、白玉大根の爆発が敵に命中すると、ヨォーヨの元素エネルギーを3ポイント回復する。この方法による元素エネルギーの回復は、0.8秒毎に1回のみ可能。"),p=3,i.push([ea,"2",p,h,b,g]);else if("ファルザン"===e&&t>=4)c.push("命中した敵の数に基づき、風圧崩潰のサイクロンはファルザンの元素エネルギーを回復する。1体の敵に命中した場合、ファルザンの元素エネルギーを2ポイント回復する。また、追加で1体の敵に命中するたびに、ファルザンの元素エネルギーが0.5ポイント回復する。この方法により1回のサイクロンで回復できる元素エネルギーは最大4ポイントまで。"),p=t>=6?2*Math.trunc(a/3):2*Math.min(2*m,ca(e,l)),i.push([ea,"4",p,h,b,g]);else if("レイラ"===e&&t>=2)c.push("垂裳凛然の夜が発射した飛星が敵に命中すると、レイラの元素エネルギーを1ポイント回復させる。この方法を通して、各飛星はレイラの元素エネルギーを最大で1回のみ回復できる。"),p=1,i.push([ea,"2",p,h,b,g]);else if("キャンディス"===e)p=0;else if("ドリー"===e){c.push("ジンニーランプ·トラブルシューターのトラブルシューター砲またはアフターサービス弾が敵に命中すると、ドリーの元素チャージ効率を基準にし、その100%の元素チャージ効率毎にドリーの元素エネルギーを5回復する。ジンニーランプ·トラブルシューター1回につき、この方式で回復できる元素エネルギーは15まで。");const e=d?.statsInput.statsObj.元素チャージ効率??100;p=Math.min(15,5*e/100*m),i.push([Jn,"砂だるま式利子",p,h,b,g])}else if("コレイ"===e)p=0;else if("鹿野院平蔵"===e&&t>=4)c.push("一回の廻風蹴で発生した「廻風真眼」が初めて爆発する時、鹿野院平蔵自身の元素エネルギーを9回復する。その後、爆発するたびに追加で元素エネルギーを1.5回復する。この方法により一回の廻風蹴で回復できる元素エネルギーは、最大13.5まで。"),p=9*f,i.push([ea,"4",p,h,b,g]);else if("久岐忍"===e)p=0;else if("雲菫"===e)p=0;else if("ゴロー"===e)p=0;else if("トーマ"===e&&t>=4)c.push("真紅熾炎の大鎧を発動すると、トーマの元素エネルギーを15ポイント回復する。"),p=15*f,i.push([ea,"4",p,h,b,g]);else if("九条裟羅"===e){c.push("天狗呪雷·伏は敵に命中すると、九条裟羅の元素チャージ効率を基準にし、その100%の元素チャージ効率毎に、チーム全員の元素エネルギーを1.2回復する。この効果は3秒毎に1回のみ発動可能。");const e=d?.statsInput.statsObj.元素チャージ効率??100;h=1.2*e/100*m,i.push([Jn,"御公儀",p,h,b,g])}else if("早柚"===e&&t>=4)c.push("早柚がフィールド上で拡散反応を起こした時、元素エネルギーを1.2ポイント回復する。この効果は2秒毎に1回のみ発動可能。"),p=1.2,i.push([ea,"4",p,h,b,g]);else if("煙緋"===e)p=0;else if("ロサリア"===e&&t>=4){c.push("罪喰いの懺悔で会心が発生すると、ロサリア自身の元素エネルギーが5回復する。この効果は、1回の罪喰いの懺悔で1度のみ発動可能。");const e=d?.statsInput.statsObj.会心率??100;p=5*e/100*m,i.push([ea,"4",p,h,b,g])}else if("辛炎"===e)p=0;else if("ディオナ"===e&&t>=1)c.push("特製スピリッツの効果終了時、ディオナの元素エネルギーを15回復する。"),p=15*f,i.push([ea,"1",p,h,b,g]);else if("スクロース"===e)p=0;else if("重雲"===e&&t>=4)c.push("重雲の攻撃が氷元素の影響を受けた敵に命中した時、自身の元素エネルギーを1回復する。この効果は2秒毎に1回のみ発動可能。"),p=1,i.push([ea,"4",p,h,b,g]);else if("ノエル"===e)p=0;else if("ベネット"===e)p=0;else if("フィッシュル"===e)p=0;else if("凝光"===e)p=0;else if("行秋"===e&&t>=6){c.push("古華剣·裁雨留虹が剣雨攻撃を2回発動する度に、次の剣雨攻撃が大幅に強化され、敵に命中する時行秋の元素エネルギーを3回復する。");const e=ia(void 0,l);p=3*Math.trunc(e/3),i.push([ea,"6",p,h,b,g])}else if("北斗"===e)p=0;else if("香菱"===e)p=0;else if("レザー"===e)c.push("無形の雷狼を召喚して自身を守り、周囲の敵に雷元素ダメージを与える。同時に、雷の印を消耗して自身の元素エネルギーを回復する。退場時、残り時間を基準に、元素エネルギーを最大10まで回復する。"),p=0,i.push([Qn,"",p,h,b,g]);else if("バーバラ"===e){if(t>=1&&(c.push("10秒毎に元素エネルギーを1回復する。"),p=Math.trunc(1*a/10),i.push([ea,"1",p,h,b,g])),t>=4){c.push("重撃が敵に命中する度に、バーバラの元素エネルギーが1回復する。一回で最大元素エネルギーが5まで回復できる。");const t=ca(e,l);p=1*t,i.push([ea,"4",p,h,b,g])}}else if("リサ"===e&&t>=1){c.push("蒼雷を長押しで発動した後、敵に命中する度にリサの元素エネルギーが2回復する。一回で最大10まで回復可能。");const t=ua(e,l,"E.Hold");p=2*t,i.push([ea,"1",p,h,b,g])}else"ガイア"===e&&t>=6?(c.push("凛冽なる輪舞の氷柱が1本追加され、発動時に元素エネルギーが15回復する。"),p=15*f,i.push([ea,"6",p,h,b,g])):"アンバー"===e||"旅人(水)"===e?p=0:"旅人(草)"===e&&t>=1?(c.push("草縁剣が敵に命中すると、旅人の元素エネルギーが3.5回復する。"),p=3.5*m,i.push([ea,"1",p,h,b,g])):"旅人(雷)"===e?(c.push("豊穰の勾玉 ·元素エネルギーが回復する。"),c.push("旅人自身の元素チャージ効率の10%を基準に、雷影剣が生成した豊穰の勾玉による元素チャージ効率をアップする。"),p=0,t>=4&&(c.push("キャラクターが雷影剣で生成した豊穰の勾玉を獲得した時、該当キャラクターの元素エネルギーが35%未満の場合、豊穰の勾玉で回復できる元素エネルギー+100%。"),p=0),i.push([Jn,"",p,h,b,g])):"旅人(岩)"===e&&t>=4?(c.push("岩潮幾重が引き起こす振動波が敵に命中する度に、元素エネルギーが5回復する。この方法で一回で最大25まで回復可能。"),p=5*f,i.push([ea,"4",p,h,b,g])):"旅人(風)"===e&&(p=0);const y=[];return i.length&&i.forEach((e=>{const t=[0,0,0,0];if(p&&(t[o]+=p),h)for(let n=0;n<t.length;n++)t[n]+=h;if(b)for(let n=0;n<t.length;n++)n!=o&&(t[n]+=b);for(let n=0;n<g.length;n++)t[n]+=g[n];y.push([e[0],e[1],t[0],t[1],t[2],t[3],c])})),y}function pa(e,t,n,a,l,s){const r=ta,o=[0,0,0,0],i=[],c=a.members.map((e=>e.name)),u=c.indexOf(e);let m=1;const f=ua(e,s),d=ma(e,s);let p=0;if("金珀·試作"===t)i.push("元素爆発を発動した後の6秒間、2秒毎に元素エネルギーを4/4.5/5/5.5/6回復し、チーム全員のHPを2秒毎に4%/4.5%/5%/5.5%/6%回復する。"),m=[4,4.5,5,5.5,6][n-1],p=3*m*d;else if("天目影打"===t)i.push("元素スキルを発動した後、継続時間30秒の継承の印を1つ獲得する。この効果は5秒毎に1回のみ発動可能で、継承の印は同時に最大3つまで存在可能。元素爆発を発動すると、所持している継承の印を全て消費し、消費した継承の印1つにつき、2秒後に該当キャラクターの元素エネルギーを6/7.5/9/10.5/12ポイント回復する。"),m=[6,7.5,9,10.5,12][n-1],d&&(p=m*f);else if("桂木斬長正"===t||"喜多院十文字槍"===t){if(i.push("元素スキルが命中した時、キャラクターは元素エネルギーを3失う。その後の6秒間、2秒毎に元素エネルギーを3/3.5/4/4.5/5獲得する。この効果は10秒毎に1回のみ発動でき、待機中のキャラクターも発動できる。"),m=[3,3.5,4,4.5,5][n-1],s?.length){let t=Number.MIN_SAFE_INTEGER;for(let n=0;n<s.length;n++){if(n<t)continue;const a=s[n];a.member==e&&a.action.startsWith("E")&&((0===n||s[n-1].member!=e&&"Q"!==s[n-1].action)&&(p-=3),p+=3*m,t=n+5)}}}else if("不滅の月華"===t)if(i.push("元素爆発を発動した後の12秒間、通常攻撃が敵に命中すると元素エネルギーが0.6ポイント回復する。この方式での元素エネルギー回復は、0.1秒毎に1回のみ可能。"),m=.6,s?.length){let t=!1;for(let n=0;n<s.length;n++){const a=s[n];if(a.member==e){if("Q"===a.action)t=!0;else if(t&&a.action.startsWith("N")){const e=Number(a.action.substring(1)??"1");p+=m*e}}else t=!1}}else p+=1*m;else"碧落の瓏"===t?(i.push("元素爆発を起動、またはシールドを生成した後の3秒間、「定土玉圭」効果を発動する。2.5秒毎に元素エネルギーを4.5/5/5.5/6/6.5回復"),m=[4.5,5,5.5,6,6.5][n-1],p=m*d*12/2.5):"正義の報酬"===t?(i.push("治療を受けた時、元素エネルギーを8/10/12/14/16ポイント回復する。この効果は10秒毎に1回のみ発動可能。キャラクターが待機中でも発動できる。"),m=[8,10,12,14,16][n-1],p=m*d):"久遠流転の大典"===t?(i.push("HP上限+16%/20%/24%/28%/32%。現在のHPが増える、または減る時、重撃ダメージ+14%/18%/22%/26%/30%。継続時間4秒、最大3層まで。0.3秒毎に1回のみ発動可能。3層まで重ねた時、または3層の継続時間がリセットされた時、元素エネルギーを8/9/10/11/12ポイント回復する。この方法による元素エネルギーの回復は、12秒に1回のみ。"),m=[8,9,10,11,12][n-1],p=m*d):"船渠剣"!==t&&"携帯型チェーンソー"!==t||(i.push("治療効果を受ける、または治療効果を与える時、強靭マークが1枚付与される。継続時間30秒、最大3枚まで。元素スキル、または元素爆発を発動する時、すべての強靭マークを消費し、継続時間10秒の「奮起」効果を獲得する。消費した強靭マーク1枚につき、元素熟知+40/50/60/70/80、さらに「奮起」効果を獲得した2秒後、消費した強靭マーク1枚につき、装備者の元素エネルギーを2/2.5/3/3.5/4ポイント回復する。「奮起」効果は15秒に1回のみ発動可能。キャラクターが待機中でも強靭マークを獲得できる。"),m=[2,2.5,3,3.5,4][n-1],(f||d)&&(p=3*m*d));if(p&&(o[u]+=p),o.filter((e=>e>0)).length||i.length)return[r,t,o[0],o[1],o[2],o[3],i]}function ha(e,t,n,a,l,s){const r=na,o=new Map;if(!e)return;const i=Kn[e];if(!i)return;l?.length||(l=[{id:0,member:e,action:Object.keys(i)[0]}]);const c=n.members.map((e=>e.name));let u,m=!1;const f=[0,0,0,0];for(let b=0;b<l.length;b++){const r=l[b];if(r.member!=u&&(m=!1),r.member==e){const i=c.indexOf(e);let d=r.action;if("Q"===d&&["フィッシュル","珊瑚宮心海"].includes(e)&&(d="E"),"Q"===d)m=!0;else if(d.startsWith("E")){if(["ディルック","ニィロウ"].includes(e)&&u==e)continue;const r=o.get(d)??[0,0,0,0];f[i]=va(r,e,d,t,n,a,l,b,s,f[i],m),o.set(d,r)}}u=r.member}const d=[],p=pe(e),h=p?.元素??"無色";return o.forEach(((e,t)=>{d.push([r,t,h,e[0],e[1],e[2],e[3]])})),d}function ba(e,t,n,a,l,s){let r,o,i;const c=ua(e,l);if("刻晴"===e&&t>=2){r=la;const e=5;o="雷",i=a/e}else"ガイア"===e?n.members.filter((e=>"水"===pe(e.name)?.元素)).length&&(r=aa,o="氷",i=2*c):"フィッシュル"===e&&t>=6&&(r=la,o="雷",i=1);let u;return r&&o&&i&&(u=[[r,"",o,0,0,0,0]]),u}function ga(e,t,n,a,l,s,r){let o;const i=sa,c=a.members.map((e=>e.name));if(["西風剣","西風大剣","西風長槍","西風猟弓","西風秘典"].includes(t)){o=[i,t,"無色",0,0,0,0];const a=[12,10.5,9,7.5,6][n-1];let u=1;if(l&&s&&r){const t=[];let n=0;for(let a=0;a<s.length;a++)s[a].member==e&&(n+=0===a||s[a-1].member!=e?1:0);const i=r[c.indexOf(e)];let m;u=Math.max(Math.round(l*i/100/a),n),u=Math.min(Math.round(l/a),u);for(let a=0;a<s.length;a++){const n=s[a];n.member==e&&n.member!=m&&t.push(a),m=n.member}for(let a=0;a<u;a++){let n=e;if(a<t.length){const e=t[a],l=e+1<s.length?s[e+1]:s[0];n=l.member}const l=c.indexOf(n);o[3+l]=3}}else{const t=c.indexOf(e);o[3+t]=3*u}}return o}function ya(e,t,n,a){let l;const s=ra,r=e.members.filter((e=>e.name)).length;if(4!==r)return l;const o=e.members.filter((e=>"雷"===pe(e.name)?.元素)).length;if(o>=2&&e.members.filter((e=>["氷","炎","水","草"].includes(pe(e.name)?.元素??"--"))).length){const n=5,r=1*Math.trunc(t/n),o=[0,0,0,0];Ea(o,r,e,a),l=[s,"雷元素共鳴","雷",o[0],o[1],o[2],o[3]]}return l}function va(e,t,n,a,l,s,r,o,i,c,u=!1){const m=Bn(t,n,a,u);if(m){const t=r[o];if(t){const t=$n(m,s-c),n=Gn(m),a=Zn(m);n>=0?ka(e,t,l,r,o,n):Ea(e,t,l,i),c+=a}}return c}function ka(e,t,n,a,l,s=1){const r=n.members.map((e=>e.name)),o=l+s<a.length?a[l+s]:a[0];e[r.indexOf(o.member)]+=t}function Ea(e,t,n,a){for(let l=0;l<e.length;l++)if(n.members[l].name){const n=a[l];e[l]+=t*n/100}}var wa=(0,l.aZ)({name:"ERCalculator",props:{team:{type:Object,required:!0},rotationList:{type:Array,required:!0},teamMemberResult:{type:Object,required:!0}},setup(e){const{displayName:t}=(0,M.Z)(),n=(0,j.qj)([]),a=(0,j.qj)([]),s=(0,j.qj)([]),r=(0,j.qj)([]),o=(0,j.qj)([]),i=(0,j.iH)(20),c=(0,j.iH)(90),u=(0,j.qj)([["無色",3,0],["炎",0,0],["水",0,0],["雷",0,0],["草",0,0],["氷",0,0],["岩",0,0]]),m=(0,j.iH)(!1),f={"片手剣":["西風剣","天目影打"],"両手剣":["西風大剣","桂木斬長正"],"長柄武器":["西風長槍","喜多院十文字槍","正義の報酬"],"弓":["西風猟弓"],"法器":["西風秘典","金珀·試作"]};(0,l.bv)((()=>{he(e.team).then((()=>{p(e.team,e.rotationList,e.teamMemberResult)}))}));const d=(0,j.iH)(0);(0,l.YP)(e,((e,t)=>{he(e.team).then((()=>{p(e.team,e.rotationList,e.teamMemberResult),g(e.team,e.rotationList,e.teamMemberResult)})),d.value++}));const p=(e,t,a)=>{if(!e)return;const l=[],s=fa(e,i.value,t);for(let n=0;n<e.members.length;n++){const t=e.members[n],r=be(t.name),o=a[t.id],i=o?.characterInput.命ノ星座??0,c=o?.characterInput.weapon,u=o?.characterInput.武器精錬ランク??1;let m=[];r&&(m=f[r.武器]),l.push({character:t.name,energyCost:r?.元素爆発.元素エネルギー??0,constellation:i,initialWeapon:c,currentWeapon:c,weaponRefine:u,onField:s[n],replaceWeapons:m})}n.splice(0,n.length,...l),g(e,t,a)};function h(e,t,n){const a=[0,0,0,0];for(let l=0;l<a.length;l++)a[l]=Math.round(100*Number(n[3+l]))/100;e.push({character:t,rechargeKind:n[0],triggerName:n[1],element:n[2],initialValues:a,currentValues:C().cloneDeep(a),unit:1})}function b(e,t,n,a){const l=[0,0,0,0];for(let s=0;s<l.length;s++)l[s]=Math.round(100*Number(a[2+s]))/100;e.push({character:n,rechargeKind:a[0],triggerName:a[1],element:"",initialValues:l,currentValues:C().cloneDeep(l),unit:.1}),a[6].length&&a[6].forEach((e=>{let l="";a[0]===Xn?l="元素スキル":a[0]===Qn?l="元素爆発":a[0]===ea?a[1]&&(l="C"+a[1]):l=a[1],t.push([n,l,e])}))}const g=(e,t,l)=>{if(!e)return;const m=[],f=[],d=[],p=[],g=[],y=[],v=n.map((e=>e.onField));for(let a=0;a<n.length;a++){const s=n[a].character,r=n[a].constellation,o=n[a].currentWeapon,c=n[a].weaponRefine;[ha(s,r,e,i.value,t,v),ba(s,r,e,i.value,t,v)].forEach((e=>{e&&e.forEach((e=>{h(m,s,e)}))}));const u=da(s,r,e,i.value,t,l);if(u.forEach((e=>{b(d,y,s,e)})),o){const n=ga(s,o,c,e,i.value,t,v);n&&h(f,s,n);const a=pa(s,o,c,e,i.value,t);a&&b(d,y,s,a)}}const k=ya(e,i.value,t,v);k&&h(p,"",k),u.filter((e=>e[1]||e[2])).forEach((e=>{const t=3*e[1]+e[2],n=[0,0,0,0];for(let a=0;a<v.length;a++)n[a]=i.value/c.value*t*v[a]/100;h(g,"",[oa,"",e[0],n[0],n[1],n[2],n[3]])})),a.splice(0,a.length,...m,...f,...p),s.splice(0,s.length,...d),r.splice(0,r.length,...g),o.splice(0,o.length,...y)},y=(0,l.Fl)((()=>{const t={0:1,1:1,2:1,3:1};if(e.rotationList&&e.rotationList.length)for(let n=0;n<e.team.members.length;n++){const a=e.team.members[n];a.name&&(t[n]=ma(a.name,e.rotationList))}return t})),v=(0,l.Fl)((()=>{const t=[0,0,0,0];for(let n=0;n<e.team.members.length;n++){const l=e.team.members[n];if(!l.name)continue;const s=pe(l.name),o=s?.元素;o&&[a,r].forEach((e=>{e.filter((e=>[na,aa,la,sa,ra,oa].includes(e.rechargeKind))).forEach((e=>{let a=0;for(let t=0;t<e.currentValues.length;t++)a+=t==n?e.currentValues[t]:.6*e.currentValues[t];e.element==o?a*=3:"無色"==e.element&&(a*=2),t[n]=Math.round(10*(t[n]+a))/10}))}))}return t})),k=(0,l.Fl)((()=>{const t=[100,100,100,100];for(let a=0;a<e.team.members.length;a++){if(!e.team.members[a].name)continue;let l=n[a]?.energyCost;if(!l)continue;s.filter((e=>[Xn,Qn,Jn,ea,ta].includes(e.rechargeKind))).forEach((e=>{l-=e.currentValues[a]}));const r=y.value[a]>0?y.value[a]:1,o=v.value[a]/r;if(l>0&&o){const e=Math.ceil(100*l/o);t[a]=Math.max(100,e)}}return t})),E=e=>pe(e)?.icon_url??H.bx,w=(e,t)=>{const n=pe(e);return t&&n?ge(n.武器,t)?.icon_url??H.bx:H.bx},_=(e,t)=>{let n=H.bx;if(e.character&&e.replaceWeapons.length&&e.replaceWeapons.includes(t)){const a=pe(e.character);a&&(n=ge(a.武器,t)?.icon_url??H.bx)}return n},O=e=>{let t=H.bx;return e.rechargeKind&&([na,aa,la,sa,Xn,Qn,Jn,ea,ta].includes(e.rechargeKind)?t=pe(e.character)?.icon_url??H.bx:[ra].includes(e.rechargeKind)&&(t=H.GN[e.element]??H.bx)),t},D=e=>e.rechargeKind&&[na,aa,la,sa,Xn,Qn,Jn,ea,ta].includes(e.rechargeKind)?"input-item-character":"input-item",N=e=>{let t=H.bx;if(e.rechargeKind)if([na].includes(e.rechargeKind)){const n=be(e.character);t=n?.元素スキル.icon_url??H.bx}else if([sa,ta].includes(e.rechargeKind)&&e.triggerName){const n=pe(e.character);if(n){const a=n.武器,l=ge(a,e.triggerName);l&&(t=l.icon_url)}}else[ra].includes(e.rechargeKind)&&(t=H.GN[e.element]??H.bx);return t},S=t=>{const n=t<e.team.members.length?pe(e.team.members[t].name):void 0;return" "+(n?H.Cb[n.元素]:"white")},V=e=>" "+(e.element?H.Cb[e.element]:"white"),I=(e,t)=>e.currentWeapon==t?" disabled":"",A=()=>{g(e.team,e.rotationList,e.teamMemberResult)},P=(t,n)=>{t.replaceWeapons.length&&t.replaceWeapons.includes(n)&&(t.currentWeapon==n?t.currentWeapon=t.initialWeapon:t.currentWeapon=n,g(e.team,e.rotationList,e.teamMemberResult))},W=()=>{r.forEach((e=>{e.currentValues.splice(0,e.currentValues.length,...e.initialValues)})),a.forEach((e=>{e.currentValues.splice(0,e.currentValues.length,...e.initialValues)})),s.forEach((e=>{e.currentValues.splice(0,e.currentValues.length,...e.initialValues)}))};return{displayName:t,rotationLength:i,combatLength:c,supplyFromEnemy:u,isOpenSupplyFromEnemy:m,calculatorInput:n,inputRowParticle:a,inputRowEnergy:s,inputRowParticleEnemy:r,burstCounts:y,messages:o,characterImgSrc:E,weaponImgSrc:w,replaceWeaponImgSrc:_,rowImgSrc1:O,rowImgSrc1Class:D,rowImgSrc2:N,bgColorClass:S,bgColorClass2:V,replaceWeaponClass:I,particleRecharges:v,energyRechargeGls:k,inputOnChange:A,replaceWeaponOnClick:P,resetInput:W}}});const _a=(0,Qe.Z)(wa,[["render",zn],["__scopeId","data-v-73ffed64"]]);var Ca=_a,Oa=(0,l.aZ)({name:"TeamRotation",components:{draggable:D(),ERCalculator:Ca},props:{team:{type:Object,required:!0},teamMemberResult:{type:Object,required:!0}},emit:["update:rotation","click:jump-to-team"],setup(e,t){const{displayName:n}=(0,M.Z)(),a=(0,j.iH)(!1),s=["N","C","P"],r=new Map,o=new Map,i=new Map,c=(0,j.qj)([]),u=(0,j.iH)(0),m=(0,j.iH)(""),f=["片手剣","長柄武器"],d=["鹿野院平蔵","リオセスリ"],p=(0,j.iH)(0);async function h(e){if(e){for(const t of e.members)if(t.name){const e=await(0,H.tm)(t.name);r.set(t.name,e),o.set(t.name,y(t.name)),i.set(t.name,Yn(t.name))}if(e.rotation&&e.rotation.length){const t=C().cloneDeep(e.rotation);t.forEach((e=>{if(e.action.startsWith("E")){const t=i.get(e.member);t&&t.length>0&&!t.includes(e.action)&&(e.action=t[0])}})),c.splice(0,c.length,...t),u.value=Math.max(...c.map((e=>e.id)))}else c.splice(0,c.length),u.value=0;m.value=e.rotationDescription}}(0,l.YP)(e,(async()=>{await h(e.team),p.value++})),(0,l.bv)((()=>{h(e.team)}));const b=e=>H.bw[e],g=e=>(p.value,r.get(e)??void 0);function y(e){let t=1;const n=g(e);if(n)for(const a of[n.特殊通常攻撃?.詳細,n.通常攻撃?.詳細]){if(!a)continue;let e=1;a.forEach((t=>{if(t.名前){const n=t.名前.match(/.*(\d)段.+/);if(!n)return;const a=Number(n[1]);a>e&&(e=a)}})),t<e&&(t=e)}return t}const v=e=>g(e.name)?.通常攻撃,k=e=>g(e.name)?.元素スキル,E=e=>g(e.name)?.元素爆発,w=e=>{let t;const n=g(e.member);return n&&(s.includes(e.action)||e.action.startsWith("N")?t=n.通常攻撃:e.action.startsWith("E")?t=n.元素スキル:"Q"==e.action&&(t=n.元素爆発)),t},_=e=>{let t;for(const n of c){if(e.id==n.id)break;t=n}return t},O=e=>{const t=b(e);return t?" "+H.X9[t.元素]:""},D=e=>{const t=b(e);return t?" "+H.Cb[t.元素]:""};function N(e){return s.includes(e)||e.startsWith("N")}const S=e=>e.action.startsWith("E")?e.action.replace(/^E\./,""):e.action,V=()=>{t.emit("update:rotation",c,m.value)},I=()=>{V()},A=(e,t)=>{let n=t;if(N(n)){const t=c.filter((t=>t.member==e.name&&N(t.action)));t.length>0&&(n=t[t.length-1].action)}else if(n.startsWith("E")){const t=c.filter((t=>t.member==e.name&&t.action.startsWith("E")));if(t.length>0)n=t[t.length-1].action;else{const t=i.get(e.name);t&&t.length>0&&(n=t[0])}}c.push({id:++u.value,member:e.name,action:n}),V()},P=e=>{if(a.value)W(e);else{if(N(e.action))if(e.action.startsWith("N")){const t=g(e.member),n=e.action.substring(1,2);let a=n?Number(n):1;const l=o.get(e.member)??1;t&&(f.includes(t.武器)||d.includes(e.member))?e.action.length<3?e.action="N"+a+"C":e.action=++a>l?"P":"N"+a:e.action=++a>l?"C":"N"+a}else{let t=s.indexOf(e.action);t=t<s.length-1?t+1:0,e.action=s[t]}else if(e.action.startsWith("E")){const t=i.get(e.member);if(t&&t.length>1){let n=t.indexOf(e.action);n=n<t.length-1?n+1:0,e.action=t[n]}}V()}},W=e=>{c.splice(0,c.length,...c.filter((t=>t!=e))),V()};return{displayName:n,IMG_SRC_DUMMY:H.bx,removeMode:a,colorClass:O,bgColorClass:D,getCharacterMaster:b,getNormalAttackDetail:v,getElementalSkillDetail:k,getElementalBurstDetail:E,rotationList:c,rotationDescription:m,previousRotation:_,getCharacterDetail:g,getActionDetail:w,actionDisplay:S,rotationListOnChange:I,listActionOnClick:A,rotationActionOnClick:P,removeItemOnClick:W,updateRotation:V}}});const Da=(0,Qe.Z)(Oa,[["render",$t],["__scopeId","data-v-59204c35"]]);var ja=Da;let Ma=1;var Na=(0,l.aZ)({name:"TeamManager",components:{draggable:D(),TeamItem:at,TeamEditorModal:kt,TeamRotation:ja},setup(){const{displayName:e}=(0,M.Z)(),t=(0,j.iH)(!1),n=[["","None"],["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],a=(0,j.iH)(me),s=(0,j.qj)([]),r=(0,j.qj)({}),o=(0,j.iH)(""),i=(0,j.iH)(0),c=(0,j.iH)("");(0,l.bv)((()=>{w()}));const u=(0,l.Fl)((()=>s.filter((e=>e.id==i.value))[0])),m=(0,l.Fl)((()=>{const e=C().cloneDeep(s);return e.forEach((e=>{e.members.forEach((e=>{e.builddata=void 0})),e.rotation&&e.rotation.length&&e.rotation.forEach((e=>{e.id=0}))})),JSON.stringify(e)})),f=(0,l.Fl)((()=>m.value==c.value)),d=e=>e==i.value;function p(e){return{id:e,name:"",buildname:void 0,builddata:void 0,tags:[],replacements:[]}}function h(e){const t={id:e,name:"チーム"+(e+1),members:[],description:"",rotation:[],rotationDescription:""};for(let n=0;n<fe;n++)t.members.push(p(Ma++));return t}function b(e){e.name="",e.buildname=void 0,e.builddata=void 0,e.tags=[],e.replacements=[]}function g(e){e.name="チーム"+(e.id+1),e.members.forEach((e=>{b(e)}))}for(let l=0;l<a.value;l++)s.push(h(l));const y=e=>{i.value=e},v=e=>{i.value==e&&(t.value=!0),i.value=e},k=()=>{if(a.value>s.length)for(let e=s.length;e<a.value;e++)s.push(h(e));else a.value<s.length&&(i.value>a.value&&(i.value=0),s.splice(a.value))},E=()=>{localStorage.setItem("teams",m.value),c.value=m.value},w=()=>{const e=localStorage.getItem("teams");if(e){const t=JSON.parse(e);a.value=t.length,k();let n=1;for(let e=0;e<s.length;e++){const a=s[e];if(t[e]){a.name=t[e].name;const l=a.members;for(let n=0;n<l.length;n++)t[e].members[n]&&(l[n].name=t[e].members[n].name,t[e].members[n].buildname?(l[n].buildname=t[e].members[n].buildname,l[n].builddata=ke(l[n].name,l[n].buildname)):(l[n].buildname=void 0,l[n].builddata=void 0),t[e].members[n].tags?l[n].tags=t[e].members[n].tags:l[n].tags=[],t[e].members[n].replacements?l[n].replacements=t[e].members[n].replacements:l[n].replacements=[]);a.description=t[e].description,t[e].rotation&&t[e].rotation.length?(a.rotation=t[e].rotation,a.rotation.forEach((e=>{e.id=n++}))):a.rotation=[],a.rotationDescription=t[e].rotationDescription??""}}}},_=()=>{s.forEach((e=>{g(e)}))},O=e=>{e==i.value?t.value=!0:i.value=e},D=e=>{if(-1!=i.value){const t=s.filter((e=>e.id==i.value))[0];if(t){t.name=e.name;const n=[];for(let a=0;a<e.members.length;a++){const l=p(t.members[a].id);l.name=e.members[a].name,l.buildname=e.members[a].buildname,l.builddata=ke(l.name,l.buildname),l.tags.splice(0,l.tags.length,...e.members[a].tags),l.replacements.splice(0,l.replacements.length,...e.members[a].replacements),n.push(l)}t.members.splice(0,t.members.length,...n)}t.description=e.description;const n=e.members.map((e=>e.name));e.rotation.filter((e=>!n.includes(e.member))).length?t.rotation=[]:t.rotation=e.rotation}t.value=!1},N=(e,t)=>{if(-1!=i.value){const n=s.filter((e=>e.id==i.value))[0];n&&(n.rotation.splice(0,n.rotation.length,...e),n.rotationDescription=t)}},S=()=>{document.getElementById("team-rotation")?.scrollIntoView({behavior:"smooth"})},H=()=>{-1!=i.value&&document.getElementById("team-"+i.value)?.scrollIntoView({behavior:"smooth"})},V=(e,t)=>{r[e]=t,e==i.value&&I.value},I=(0,l.Fl)((()=>{let e={};if(i.value in r)e=r[i.value];else if(-1!=i.value){const t=s.filter((e=>e.id==i.value))[0];t.members.forEach((t=>{e&&(e[t.id]=we)}))}return e}));return{displayName:e,teamEditorVisible:t,NUMBER_OF_TEAMS:me,NUMBER_OF_MEMBERS:fe,numberOfTeams:a,numberOfTeamsOnChange:k,DISPLAY_STAT_LIST:n,displayStat:o,clearOnClick:_,saveOnClick:E,loadOnClick:w,saveDisabled:f,selectedTeamId:i,teamSelected:d,teams:s,teamMemberResult:I,forcusedTeam:u,updateTeam:D,updateRotation:N,teamOnClick:y,editOnClick:O,memberOnClick:v,jumpToRotation:S,jumpToTeam:H,updateMemberResult:V}}});const Sa=(0,Qe.Z)(Na,[["render",w],["__scopeId","data-v-538570f2"]]);var Ha=Sa,Va=n(2540);async function Ia(){(0,a.ri)(Ha,{}).use(Va.Z).mount("#app")}Ia()}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var s=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,s){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],l=e[u][1],s=e[u][2];for(var o=!0,i=0;i<a.length;i++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(o=!1,s<r&&(r=s));if(o){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[a,l,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.j=299}(),function(){var e={299:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,s,r=a[0],o=a[1],i=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(l in o)n.o(o,l)&&(n.m[l]=o[l]);if(i)var u=i(n)}for(t&&t(a);c<r.length;c++)s=r[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},a=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998,64],(function(){return n(8973)}));a=n.O(a)})();
//# sourceMappingURL=TeamManager.b4f6bb27.js.map