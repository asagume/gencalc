(function(){"use strict";var e={5983:function(e,n,t){function a(e){return"string"===typeof e||e instanceof String}function l(e){return isFinite(e)&&null!=e}function r(e){const n=Object.prototype.toString.call(e);return"[object Object]"===n}function c(e){const n=JSON.parse(JSON.stringify(e));return n}function s(e,n){if(r(n)&&r(e)){const t=Object.keys(n);for(const a of t)e[a]=n[a];for(const n of Object.keys(e))t.includes(n)||delete e[n]}return e}t.d(n,{HD:function(){return a},PO:function(){return r},X8:function(){return c},fX:function(){return s},hj:function(){return l}})},2986:function(e,n,t){t.d(n,{Ac:function(){return $},Cl:function(){return W},HN:function(){return S},HO:function(){return M},Hd:function(){return E},Hk:function(){return U},K1:function(){return D},NY:function(){return j},R4:function(){return H},US:function(){return w},V6:function(){return b},Vd:function(){return r},Vk:function(){return R},e2:function(){return T},ge:function(){return V},iU:function(){return C},pS:function(){return x},q2:function(){return y},wX:function(){return A},yL:function(){return I}});t(7658);var a=t(3550),l=t(5983);const r=["基礎HP","基礎攻撃力","基礎防御力"],c=["HP上限","攻撃力","防御力","元素熟知"],s=["会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","クールタイム短縮","シールド強化"],i=["炎元素ダメージバフ","水元素ダメージバフ","風元素ダメージバフ","雷元素ダメージバフ","草元素ダメージバフ","氷元素ダメージバフ","岩元素ダメージバフ","物理ダメージバフ"],o=["炎元素耐性","水元素耐性","風元素耐性","雷元素耐性","草元素耐性","氷元素耐性","岩元素耐性","物理耐性"],u=["通常攻撃ダメージバフ","重撃ダメージバフ","落下攻撃ダメージバフ","元素スキルダメージバフ","元素爆発ダメージバフ","与えるダメージ"],m=["通常攻撃ダメージアップ","重撃ダメージアップ","落下攻撃ダメージアップ","元素スキルダメージアップ","元素爆発ダメージアップ","炎元素ダメージアップ","水元素ダメージアップ","風元素ダメージアップ","雷元素ダメージアップ","草元素ダメージアップ","氷元素ダメージアップ","岩元素ダメージアップ","物理ダメージアップ"],f=["蒸発反応ボーナス","溶解反応ボーナス","過負荷反応ボーナス","感電反応ボーナス","凍結反応ボーナス","超電導反応ボーナス","拡散反応ボーナス","結晶反応ボーナス","燃焼反応ボーナス","開花反応ボーナス","烈開花反応ボーナス","超開花反応ボーナス","超激化反応ボーナス","草激化反応ボーナス"],d=["ダメージ軽減","HP%","攻撃力%","防御力%","HP+","攻撃力+","防御力+"],h=["敵炎元素耐性","敵水元素耐性","敵風元素耐性","敵雷元素耐性","敵草元素耐性","敵氷元素耐性","敵岩元素耐性","敵物理耐性"],p=new Map([["基礎ステータス",r],["基本ステータス",c],["高級ステータス",s],["元素ステータス·ダメージ",i],["元素ステータス·耐性",o],["ダメージバフ",u],["実数ダメージ加算",m],["元素反応バフ",f],["その他",d],["敵元素ステータス·耐性",h]]),b=[...s,...i,...o,...u,...f,...h,"別枠乗算"];function g(){const e={};return p.forEach((n=>{n.forEach((n=>{e[n]=0}))})),e["会心率"]=5,e["会心ダメージ"]=50,e["元素チャージ効率"]=100,e["敵レベル"]=0,e["敵防御力"]=0,e}const y=g();function k(){const e={};return[o].forEach((n=>{n.forEach((n=>{e[n]=0}))})),e["防御力"]=0,e}k();const v={HP:0,"攻撃力":0,"防御力":0,"元素熟知":0,"会心率":0,"会心ダメージ":0,"元素チャージ効率":0,"HP%":0,"攻撃力%":0,"防御力%":0,"炎元素ダメージバフ":0,"水元素ダメージバフ":0,"風元素ダメージバフ":0,"雷元素ダメージバフ":0,"草元素ダメージバフ":0,"氷元素ダメージバフ":0,"岩元素ダメージバフ":0,"物理ダメージバフ":0,"与える治療効果":0},O={"元素":"炎","蒸発倍率":0,"溶解倍率":0,"過負荷ダメージ":0,"感電ダメージ":0,"超電導ダメージ":0,"拡散ダメージ":0,"拡散元素":"炎","結晶吸収量":0,"燃焼ダメージ":0,"開花ダメージ":0,"烈開花ダメージ":0,"超開花ダメージ":0,"超激化ダメージ":0,"草激化ダメージ":0},w={"元素反応":(0,l.X8)(O),"通常攻撃":[],"重撃":[],"落下攻撃":[],"元素スキル":[],"元素爆発":[],"その他":[],"キャラクター注釈":[]},C=[Array.from({length:20},((e,n)=>n+1)),Array.from({length:21},((e,n)=>n+20)),Array.from({length:11},((e,n)=>n+40)),Array.from({length:11},((e,n)=>n+50)),Array.from({length:11},((e,n)=>n+60)),Array.from({length:11},((e,n)=>n+70)),Array.from({length:11},((e,n)=>n+80))],_={key:"NONE","レアリティ":5,image:a.bx},E={character:"アンバー",characterMaster:{},"突破レベル":6,"レベル":90,"命ノ星座":0,"通常攻撃レベル":8,"元素スキルレベル":8,"元素爆発レベル":8,weapon:"西風猟弓",weaponMaster:{},"武器突破レベル":6,"武器レベル":90,"武器精錬ランク":1,artifactSets:["NONE","NONE"],artifactSetMasters:[_,_],damageDetailMyCharacter:null,damageDetailMyWeapon:null,damageDetailMyArtifactSets:null,buildname:"",recommendationSelectedIndex:0,saveDisabled:!0,removeDisabled:!0},S={"聖遺物メイン効果":["","","","",""],"聖遺物優先するサブ効果":["","",""],"聖遺物優先するサブ効果上昇値":Array.from(a.Ml[2].values),"聖遺物優先するサブ効果上昇回数":Array.from(a.Ml[2].counts),"聖遺物ステータス":(0,l.X8)(v),"聖遺物ステータスメイン効果":(0,l.X8)(v),"聖遺物ステータスサブ効果":(0,l.X8)(v),"聖遺物優先するサブ効果Disabled":!1},j={checkboxList:[],selectList:[],conditionValues:{},conditionAdjustments:{},"攻撃元素":[null,null,null]},M={statsObj:(0,l.X8)(y),statAdjustments:(0,l.X8)(y),enemyMaster:a.FX[0]};for(const Q of Object.keys(M.statAdjustments))M.statAdjustments[Q]=0;const A={elementalResonance:{conditionValues:{},conditionAdjustments:{}},supporterList:[],isSupporterOptionOpened:{},teamOption:(0,l.X8)(j),miscOption:(0,l.X8)(j)};(0,l.X8)(E),(0,l.X8)(S),(0,l.X8)(j),(0,l.X8)(M);function N(e){try{let n;n=(0,l.HD)(e)?Number(String(e).replace("+","")):Number(e);let t=0;for(let a=C.length-1;a>=0;a--)if(t=a,!(C[a][0]>n)){C[a][0]!=n||String(e).endsWith("+")||t--;break}return[t,n]}catch(n){throw console.error(e),n}}function D(e){return"あなたの"+e}function H(e,n){let t="構成_"+e;return n&&n!=D(e)&&(t+="_"+n),t}function P(e,n,t){const l=[];if(e[n]&&(t||(t=e[n]),t&&t in a._J)){const e=a._J[t];for(let n=0;n<e.length;n++)if(l.push(e[n]),n<e.length-1){const t=e[n+1]-e[n];l.push(e[n]+t/2)}}return l}async function x(e,n,t,r,c){try{const s=e.character,i=await(0,a.tm)(s);e.characterMaster=i;const o=(0,l.X8)(v);"レベル"in c&&([e.突破レベル,e.レベル]=N(c["レベル"])),["命ノ星座","通常攻撃レベル","元素スキルレベル","元素爆発レベル"].forEach((n=>{n in c&&(e[n]=Number(c[n]))}));const u=i["武器"];"武器"in c&&(Object.keys(a.Nd[u]).includes(c["武器"])?e.weapon=c["武器"]:e.weapon=Object.keys(a.Nd[u]).filter((e=>e.startsWith("西風")))[0],e.weaponMaster=await(0,a.i7)(e.weapon,u)),"武器レベル"in c&&([e.武器突破レベル,e.武器レベル]=N(c["武器レベル"])),"精錬ランク"in c&&(e.武器精錬ランク=Number(c["精錬ランク"]));let m=!1;for(const e of Object.keys(c).filter((e=>e.startsWith("聖遺物サブ効果")))){let n=e.replace(/^聖遺物サブ効果/,"");"HP"!=n&&(n=n.replace(/P$/,"%")),(c[e]||0==c[e])&&(m=!0,o[n]=Number(c[e]))}if(n.聖遺物優先するサブ効果Disabled=m,["聖遺物セット効果1","聖遺物セット効果2"].forEach(((n,t)=>{if(!(n in c))return;const l=c[n];l&&l in a.oN?(e.artifactSets[t]=l,e.artifactSetMasters[t]=a.oN[l]):e.artifactSetMasters[t]=_})),["聖遺物メイン効果1","聖遺物メイン効果2"].forEach(((e,t)=>{n["聖遺物メイン効果"][t]=e in c?c[e]:["5_HP","5_攻撃力"][t]})),["聖遺物メイン効果3","聖遺物メイン効果4","聖遺物メイン効果5"].forEach(((e,t)=>{if(!(e in c))return;const a=c[e];n["聖遺物メイン効果"][t+2]=a})),m||(["聖遺物優先するサブ効果1","聖遺物優先するサブ効果2","聖遺物優先するサブ効果3"].forEach(((e,t)=>{if(!(e in c))return;const a=c[e];n["聖遺物優先するサブ効果"][t]=a})),["聖遺物優先するサブ効果1上昇値","聖遺物優先するサブ効果2上昇値","聖遺物優先するサブ効果3上昇値"].forEach(((e,t)=>{let r=!1;if(n["聖遺物優先するサブ効果"][t]&&e in c&&(0,l.hj)(c[e])&&(r=!0),r){const a=Number(c[e]),l=n["聖遺物優先するサブ効果"][t],r=P([l],0);r.forEach(((e,l)=>{a<=e&&(n["聖遺物優先するサブ効果上昇値"][t]=l)}))}else n["聖遺物優先するサブ効果"][t]&&!n["聖遺物優先するサブ効果上昇値"][t]&&(n["聖遺物優先するサブ効果上昇値"][t]=a.Ml[2].values[t])})),["聖遺物優先するサブ効果1上昇回数","聖遺物優先するサブ効果2上昇回数","聖遺物優先するサブ効果3上昇回数"].forEach(((e,t)=>{let r=!1;if(n["聖遺物優先するサブ効果"][t]&&e in c&&(0,l.hj)(c[e])&&(r=!0),r){const a=Number(c[e]);n["聖遺物優先するサブ効果上昇回数"][t]=a}else n["聖遺物優先するサブ効果"][t]&&!n["聖遺物優先するサブ効果上昇回数"][t]&&(n["聖遺物優先するサブ効果上昇回数"][t]=a.Ml[2].counts[t])}))),Object.keys(c).filter((e=>!a.PW.has(e)&&!["options","artifactScoring"].includes(e))).forEach((e=>{null==c[e]?t.conditionValues[e]=c[e]:(0,l.HD)(c[e])?t.conditionValues[e]=Number(c[e]):t.conditionValues[e]=c[e]})),"options"in c){const e=Object.keys(c.options);e.length&&((0,l.fX)(r.elementalResonance.conditionValues,{}),(0,l.fX)(r.teamOption.conditionValues,{}),(0,l.fX)(r.miscOption.conditionValues,{}),e.forEach((e=>{if(e in a._9||"dendroOption"==e)r.elementalResonance.conditionValues[e]=c.options[e];else{const n=e.indexOf("*");if(-1!=n){const t=e.substring(0,n);t in a.bw?r.teamOption.conditionValues[e]=c.options[e]:r.miscOption.conditionValues[e]=c.options[e]}else r.miscOption.conditionValues[e]=c.options[e]}})))}(0,l.fX)(n.聖遺物ステータスサブ効果,o),console.debug("loadRecommendation",e,n,t,c)}catch(s){throw console.error(e,n,t,c),s}}const T="ステータス変更系詳細",I="天賦性能変更系詳細";function V(e){try{const n=e.characterMaster,t={};let a,l,r,c;const s="キャラクター",i=[],o=[];l=e["通常攻撃レベル"],c="法器"===n["武器"]?n["元素"]:null,["通常攻撃","重撃","落下攻撃"].forEach((e=>{a=n[e],r=e+"ダメージ",t[e]=q(a,l,r,c,i,o,s)})),["通常攻撃","重撃","落下攻撃"].forEach((u=>{const m="特殊"+u;if(m in n){if(a=n[m],"種類"in a)switch(r=a["種類"],r){case"元素スキルダメージ":l=e["元素スキルレベル"];break;case"元素爆発ダメージ":l=e["元素爆発レベル"];break}"元素"in a&&(c=a["元素"]);const u={"条件":a["条件"],"詳細":q(a,l,r,c,i,o,s)};t[m]=u}})),l=e["元素スキルレベル"],r="元素スキルダメージ",c=n["元素"],t["元素スキル"]=q(n["元素スキル"],l,r,c,i,o,s),l=e["元素爆発レベル"],r="元素爆発ダメージ",c=n["元素"],t["元素爆発"]=q(n["元素爆発"],l,r,c,i,o,s),t["その他"]=[],"その他戦闘天賦"in n&&n["その他戦闘天賦"].forEach((e=>{const n=q(e,null,null,null,i,o,s);n.length>0&&t["その他"].push(...n)})),n["固有天賦"].forEach((e=>{const n=q(e,null,null,null,i,o,s);n.length>0&&t["その他"].push(...n)})),"命ノ星座"in n&&Object.keys(n["命ノ星座"]).forEach((l=>{if(Number(l)>e.命ノ星座)return;a=n["命ノ星座"][l];const r=q(a,null,null,null,i,o,s);r.length>0&&t["その他"].push(...r)})),"風"==n["元素"]&&(0==o.filter((e=>e.条件&&e.条件.startsWith("拡散@"))).length&&["炎元素","水元素","雷元素","氷元素"].forEach((e=>{o.push({"名前":null,"種類":"固有変数","元素":null,"数値":null,"条件":"拡散@"+e,"対象":null,"上限":null,"HIT数":null,"ダメージバフ":null,"元素付与無効":null,"除外条件":null,"適用条件":null})})),"オプション初期値"in n?0==Object.keys(n["オプション初期値"]).filter((e=>"拡散"==e)).length&&(n["オプション初期値"]["拡散"]=1):n["オプション初期値"]={"拡散":1}),t[T]=i,t[I]=o;const u=new Map,m=new Map;return i.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],u,m)})),o.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],u,m)})),u.forEach(((e,n)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(n,["",...e]))})),t["条件"]=u,t["排他"]=m,e.damageDetailMyCharacter=t,t}catch(n){throw console.error(e),n}}function W(e){try{const n=e.weapon,t=e.weaponMaster,a={};if(!n||!t)return a;let r;const c=e.武器精錬ランク,s="武器",i=[],o=[];"武器スキル"in t&&(r=t["武器スキル"],a["その他"]=q(r,c,null,null,i,o,s)),a[T]=i,a[I]=o;const u=new Map,m=new Map;return i.filter((e=>e["条件"])).forEach((e=>{let n=e["条件"];(0,l.PO)(n)&&c in n&&(n=n[c]),L(n,u,m)})),o.filter((e=>e["条件"])).forEach((e=>{let n=e["条件"];(0,l.PO)(n)&&c in n&&(n=n[c]),L(n,u,m)})),u.forEach(((e,n)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(n,["",...e]))})),a["条件"]=u,a["排他"]=m,e.damageDetailMyWeapon=a,a}catch(n){throw console.error(e),n}}function R(e){try{const n=[];let t;const a="聖遺物セット効果",l=[],r=[],c=e.artifactSetMasters.filter((e=>e));if(c.length>0){const e=[];"2セット効果"in c[0]&&(t=c[0]["2セット効果"],e.push(...q(t,null,null,null,l,r,a))),2==c.length&&(c[0]==c[1]?(t=c[0]["4セット効果"],e.push(...q(t,null,null,null,l,r,a))):(t=c[1]["2セット効果"],e.push(...q(t,null,null,null,l,r,a)))),n["その他"]=e}n[T]=l,n[I]=r;const s=new Map,i=new Map;return l.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],s,i)})),r.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],s,i)})),s.forEach(((e,n)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||s.set(n,["",...e]))})),n["条件"]=s,n["排他"]=i,e.damageDetailMyArtifactSets=n,n}catch(n){throw console.error(e),n}}const F=function(e,n,t,r,c,s){let i="種類"in e?e["種類"]:t,o=null;-1!=i.indexOf(".")?(o=i.substring(i.indexOf(".")+1),i=i.substring(0,i.indexOf("."))):"対象"in e&&(o=e["対象"]);let u=null;"数値"in e&&(u=e["数値"],(0,l.hj)(u)||(0,l.HD)(u)||((0,l.PO)(u)&&n&&n in u?u=u[n]:console.error(e,n,t,r,u)),u=a.vN.includes(i+"ダメージ")||i.endsWith("ダメージ")?G(u,"攻撃力"):G(u,i));let m=null;m="条件"in e?(0,l.PO)(e["条件"])&&n&&n in e["条件"]?e["条件"][n]:e["条件"]:s??null;let f=null;"上限"in e&&(f=e["上限"],(0,l.PO)(f)&&n&&n in f&&(f=f[n]),f=G(f));const d={"名前":e["名前"],"種類":i,"元素":"元素"in e?e["元素"]:r,"数値":u,"条件":m,"対象":o,"上限":f,"HIT数":"HIT数"in e?e["HIT数"]:null,"ダメージバフ":"ダメージバフ"in e?e["ダメージバフ"]:null,"元素付与無効":"元素付与無効"in e?e["元素付与無効"]:"武器"==c,"除外条件":"除外条件"in e?e["除外条件"]:null,"適用条件":"適用条件"in e?e["適用条件"]:null};return d};function X(e){return e in y||new RegExp("[自全].+(バフ|アップ)").exec(e)||new RegExp("敵?[自全]元素耐性").exec(e)||["別枠乗算","回復量アップ"].includes(e)||["敵防御力"].includes(e)||["発動回数","使用回数"].includes(e)||["攻撃速度","通常攻撃速度","移動速度"].includes(e)||e.endsWith("継続時間")||e.endsWith("クールタイム")||e.endsWith("会心率")||e.endsWith("会心ダメージ")?"STATUS":e.endsWith("強化")||e.endsWith("付与")||"防御無視"==e||"固有変数"==e?"TALENT":void 0}const q=function(e,n,t,a,l,r,c,s){const i=[];return"詳細"in e?(e["詳細"].forEach((e=>{const o=F(e,n,t,a,c,s),u=o.種類;return null!=l&&"STATUS"==X(u)?(o["元素"]="元素"in e?e["元素"]:null,void l.push(o)):null!=r&&"TALENT"==X(u)?(o["元素"]="元素"in e?e["元素"]:null,void r.push(o)):void i.push(o)})),i):i},L=function(e,n,t){let a=null,l=e.split("^");l.length>1&&(a=l[1]);const r=l[0];-1!=r.indexOf("|")?(l=r.split("|"),l.forEach((e=>{B(e,n,t,a)}))):(l=r.split("&"),l.forEach((e=>{B(e,n,t,a)})))};function B(e,n,t,a){const l=e.split(/[@=]/),r=l[0];if(1==l.length)Y(n,r,null);else if(2==l.length)if(-1!=l[1].indexOf(",")){const e=new RegExp("([^0-9]*?)([\\+\\-0-9\\.,]+)(.*)"),t=e.exec(l[1]);if(t){const e=t[1],a=t[2].split(","),l=t[3];a.forEach((t=>{Y(n,r,e+t+l)}))}}else if(-1!=l[1].indexOf("-")){const e=new RegExp("([^0-9\\.]*)(-?[0-9\\.]+)-(-?[0-9\\.]+)(.*)"),t=new RegExp("/([0-9\\.]+)(.*)"),a=e.exec(l[1]);if(a){const e=a[1],l=Number(a[2]),c=Number(a[3]);let s=l,i=a[4];if(i){const e=t.exec(i);e&&(s=Number(e[1]),i=e[2])}for(let t=l;t<c;t=z(t,s,c))Y(n,r,e+String(t)+i);Y(n,r,e+String(c)+i)}else Y(n,r,l[1])}else Y(n,r,l[1]);else console.error(e,n,t);a&&a.split(",").forEach((e=>{Y(t,r,e)}))}function U(e,n){try{const t=e.conditionValues,a=e.checkboxList,l=e.selectList;a.splice(0,a.length),l.splice(0,l.length);const r=[n.characterMaster,n.weaponMaster,...n.artifactSetMasters];for(const e of r.filter((e=>e))){if("オプション初期値"in e)for(const n of Object.keys(e["オプション初期値"]))n in t||(t[n]=e["オプション初期値"][n]);if("4セット効果"in e&&"オプション初期値"in e["4セット効果"])for(const n of Object.keys(e["4セット効果"]["オプション初期値"]))n in t||(t[n]=e["4セット効果"]["オプション初期値"][n])}for(const e of[n.damageDetailMyCharacter,n.damageDetailMyWeapon,n.damageDetailMyArtifactSets])if(e){const n=e.条件,r=e.排他;n.forEach(((e,c)=>{if(null==e)0==a.filter((e=>e.name==c)).length&&a.push({name:c});else if(0==l.filter((e=>e.name==c)).length){const n=e[0].startsWith("required_");l.push({name:c,options:e,required:n})}if(c in t&&null!=t[c]){const e=r.get(c);if(e)for(const a of e)if(a in t){const e=n.get(a);void 0!==e&&(t[a]=null!==e&&0)}}else if(null===e){let e=!0;const n=r.get(c);n&&n.filter((e=>t[e])).length>0&&(e=!1),t[c]=e}else{let n=e.length-1;const a=r.get(c);a&&a.filter((e=>t[e])).length>0&&(n=0),t[c]=n}}))}}catch(t){throw console.error(e,n),t}}function Y(e,n,t){if(null==t)e.has(n)||e.set(n,null);else if(e.has(n)){const a=e.get(n);null==a?e.set(n,[t]):a.includes(t)||e.get(n).push(t)}else e.set(n,[t])}function Z(e){const n=(""+e).split(".");return n.length>1?n[1].length:0}function K(e,n){const t=Z(e)+Z(n),a=Number((""+e).replace(".","")),l=Number((""+n).replace(".","")),r=a*l/Math.pow(10,t);return Number(r)}function z(e,n,t){const a=Math.pow(10,Math.max(Z(e),Z(n)));let l=(K(e,a)+K(n,a))/a;return void 0!=t&&(l=Math.min(l,t)),l}const G=function(e,n=null){const t=[],a=new RegExp("([\\+\\-\\*/]?)([^\\+\\-\\*/]+)(.*)");let l=String(e);while(1){const e=a.exec(l);if(!e){t.push(l);break}if(e[1]&&t.push(e[1]),t.push(J(e[2],n)),!e[3])break;l=e[3]}return t};function J(e,n=null){const t=[];if((0,l.hj)(e))t.push(Number(e));else{const a=e.split("%");1==a.length?t.push(a[0]):(t.push(Number(a[0])/100),t.push("*"),a[1].length>0?t.push(a[1]):null!=n&&t.push(n))}return t}function $(e,n,t){sessionStorage.setItem("character",e),n&&sessionStorage.setItem("buildname",n),t&&sessionStorage.setItem("builddata",JSON.stringify(t))}},3550:function(e,n,t){t.d(n,{$Y:function(){return u},Cb:function(){return A},FX:function(){return C},GN:function(){return N},Ml:function(){return V},Nd:function(){return O},PW:function(){return P},X9:function(){return M},_9:function(){return d},_J:function(){return m},bw:function(){return a},bx:function(){return y},dr:function(){return H},i7:function(){return j},k9:function(){return D},oN:function(){return o},qy:function(){return v},tm:function(){return E},vN:function(){return x}});t(7658);var a=t(8667),l=t(7722),r=t(1930),c=t(7849),s=t(2364),i=t(1003),o=t(5678),u=t(2124),m=t(3185),f=t(8970),d=t(6385),h=t(5093),p=t(9286),b=t(8846),g=t(7646);const y="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7";function k(e){if(e.icon_url)return e.icon_url;if(e.image)return e.image;if(e.import){let n=e.import.replace("data/","images/");return-1!=n.indexOf("characters/")&&(n=n.replace("characters/","characters/face/")),n=n.replace(/json$/,"png"),n}return null}const v=[];Object.keys(a).forEach((e=>{const n=a[e];n.key=e,n.icon_url=k(n),v.push(n)}));const O={"片手剣":l,"両手剣":r,"長柄武器":c,"弓":s,"法器":i};Object.keys(O).forEach((e=>{const n=O[e];Object.keys(n).forEach((e=>{const t=n[e];t.key=e,t.icon_url=k(t)}))}));Object.keys(l).map((e=>l[e])),Object.keys(r).map((e=>r[e])),Object.keys(c).map((e=>c[e])),Object.keys(s).map((e=>s[e])),Object.keys(i).map((e=>i[e]));const w=[];Object.keys(o).forEach((e=>{const n=o[e];n.key=e,n.icon_url=k(n),w.push(n)}));Object.keys(u[5]),Object.keys(m);for(const W of Object.keys(f))for(const e of Object.keys(f[W]))f[W][e]>=1e3&&(f[W][e]=1/0);const C=Object.keys(f).map((e=>({key:e,...f[e]}))),_=(Object.keys(d).map((e=>({key:e,...d[e]}))),Object.keys(h).map((e=>({key:e,...h[e]}))),Object.keys(p).map((e=>({key:e,...p[e]}))),Object.keys(b).map((e=>({key:e,...b[e]}))),Object.keys(g).map((e=>({key:e,...g[e]}))),new Map);async function E(e){try{if(!_.has(e)){const n=a[e]["import"].replace(/^\//,""),t=await fetch(n).then((e=>e.json())),l=a[e].武器;t.通常攻撃.icon_url=D[l],_.set(e,t)}return _.get(e)}catch(n){throw console.error(e),n}}const S=new Map;async function j(e,n){try{if(!S.has(e)){let t;t=n?[n]:Object.keys(O);for(const n of t)if(e in O[n]){const t=O[n],a=t[e]["import"],l=await fetch(a).then((e=>e.json()));l.種類=n,S.set(e,l);break}}return S.get(e)}catch(t){throw console.error(e,n),t}}const M={"炎":"pyro","水":"hydro","風":"anemo","雷":"electro","草":"dendro","氷":"cryo","岩":"geo"},A={"炎":"pyro-bg","水":"hydro-bg","風":"anemo-bg","雷":"electro-bg","草":"dendro-bg","氷":"cryo-bg","岩":"geo-bg"},N={"炎":"images/element_pyro.png","水":"images/element_hydro.png","風":"images/element_anemo.png","雷":"images/element_electro.png","草":"images/element_dendro.png","氷":"images/element_cryo.png","岩":"images/element_geo.png"},D={"片手剣":"images/characters/NormalAttack_sword.png","両手剣":"images/characters/NormalAttack_claymore.png","長柄武器":"images/characters/NormalAttack_polearm.png","弓":"images/characters/NormalAttack_bow.png","法器":"images/characters/NormalAttack_catalyst.png"},H={1:"star1-bg",2:"star2-bg",3:"star3-bg",4:"star4-bg",5:"star5-bg"},P=new Map([["キャラクター",null],["レベル",null],["命ノ星座",0],["通常攻撃レベル",0],["元素スキルレベル",0],["元素爆発レベル",0],["武器",null],["武器レベル",0],["精錬ランク",0],["聖遺物セット効果1",null],["聖遺物セット効果2",null],["聖遺物メイン効果1",null],["聖遺物メイン効果2",null],["聖遺物メイン効果3",null],["聖遺物メイン効果4",null],["聖遺物メイン効果5",null],["聖遺物サブ効果HP",0],["聖遺物サブ効果攻撃力",0],["聖遺物サブ効果防御力",0],["聖遺物サブ効果元素熟知",0],["聖遺物サブ効果会心率",0],["聖遺物サブ効果会心ダメージ",0],["聖遺物サブ効果元素チャージ効率",0],["聖遺物サブ効果HPP",0],["聖遺物サブ効果攻撃力P",0],["聖遺物サブ効果防御力P",0],["聖遺物優先するサブ効果1",null],["聖遺物優先するサブ効果1上昇値",-1],["聖遺物優先するサブ効果1上昇回数",-1],["聖遺物優先するサブ効果2",null],["聖遺物優先するサブ効果2上昇値",-1],["聖遺物優先するサブ効果2上昇回数",-1],["聖遺物優先するサブ効果3",null],["聖遺物優先するサブ効果3上昇値",-1],["聖遺物優先するサブ効果3上昇回数",-1]]),x=["通常攻撃ダメージ","重撃ダメージ","落下攻撃ダメージ","元素スキルダメージ","元素爆発ダメージ"],T=(new Map([["HP%","HP"],["元素熟知","熟"],["元素チャージ効率","ﾁｬ"],["会心率","率"],["会心ダメージ","ダ"],["与える治療効果","治"]]),new Map([["HP%","HP"],["攻撃力%","AT"],["防御力%","DF"],["元素熟知","EM"],["会心率","CR"],["会心ダメージ","CD"],["元素チャージ効率","ER"],["与える治療効果","HE"],["炎元素ダメージバフ","Py"],["水元素ダメージバフ","Hy"],["風元素ダメージバフ","An"],["雷元素ダメージバフ","El"],["草元素ダメージバフ","De"],["氷元素ダメージバフ","Cr"],["岩元素ダメージバフ","Ge"],["物理ダメージバフ","Ph"]]),new Map([["HP","HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","ElementalMastery"],["会心率","CritRate"],["会心ダメージ","CritDMG"],["元素チャージ効率","EnergyRecharge"],["炎元素ダメージバフ","Pyro"],["水元素ダメージバフ","Hydro"],["風元素ダメージバフ","Anemo"],["雷元素ダメージバフ","Electro"],["草元素ダメージバフ","Dendro"],["氷元素ダメージバフ","Cryo"],["岩元素ダメージバフ","Geo"],["物理ダメージバフ","Physical"],["与える治療効果","Healing"],["HP%","HPp"],["攻撃力%","ATKp"],["防御力%","DEFp"]])),I=new Map;T.forEach(((e,n)=>{I.set(e,n)}));const V=[{key:"",values:[7,7,7],counts:[0,0,0]},{key:"厳選初心者",values:[3,3,3],counts:[7,4,4]},{key:"厳選1ヶ月",values:[3,3,3],counts:[8,5,5]},{key:"厳選3ヶ月",values:[3,3,3],counts:[11,8,7]},{key:"日々石割り",values:[1,1,1],counts:[14,11,10]}]},3007:function(e,n,t){var a=t(9242),l=t(3396),r=t(7139);const c=e=>((0,l.dD)("data-v-6ba1013f"),e=e(),(0,l.Cn)(),e),s={class:"base-container"},i={class:"pane1"},o={class:"display-stat-select"},u=["value"],m={class:"number-of-teams"},f=["min"],d={class:"data-control"},h=["disabled"],p={class:"pane2"},b={class:"pane3"},g=c((()=>(0,l._)("hr",null,null,-1))),y=c((()=>(0,l._)("div",{class:"pane4"},null,-1))),k=c((()=>(0,l._)("div",{class:"footer"},[(0,l._)("hr"),(0,l._)("h2",null,"チーム編成 Ver.0.1.1"),(0,l._)("ul",{class:"usage"},[(0,l._)("li",null,"右上の◆のドラッグ＆ドロップでチームの並べ替えができます。")]),(0,l._)("p",null,[(0,l._)("a",{href:"./"},"げんかるく - 原神ダメージシミュレーター")])],-1)));function v(e,n,t,c,v,O){const w=(0,l.up)("TeamItem"),C=(0,l.up)("draggable"),_=(0,l.up)("CharacterSelectModal"),E=(0,l.up)("TeamRotation");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",i,[(0,l._)("fieldset",null,[(0,l._)("div",o,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.DISPLAY_STAT_LIST,(t=>((0,l.wg)(),(0,l.iD)("label",{class:"display-stat",key:t[1]},[(0,l.wy)((0,l._)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":n[0]||(n[0]=n=>e.displayStat=n),value:t[0]},null,8,u),[[a.G2,e.displayStat]]),(0,l._)("span",null,(0,r.zw)(t[1]),1)])))),128))]),(0,l._)("label",m,[(0,l.Uk)(" Number of teams "),(0,l.wy)((0,l._)("input",{type:"number",min:e.NUMBER_OF_TEAMS,"onUpdate:modelValue":n[1]||(n[1]=n=>e.numberOfTeams=n),onChange:n[2]||(n[2]=(...n)=>e.numberOfTeamsOnChange&&e.numberOfTeamsOnChange(...n))},null,40,f),[[a.nr,e.numberOfTeams]])]),(0,l._)("div",d,[(0,l._)("button",{type:"button",disabled:e.saveDisabled,onClick:n[3]||(n[3]=(...n)=>e.saveOnClick&&e.saveOnClick(...n))}," Save ",8,h),(0,l._)("button",{type:"button",onClick:n[4]||(n[4]=(...n)=>e.clearOnClick&&e.clearOnClick(...n))},"Clear")])])]),(0,l._)("div",p,[(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(C,{list:e.teams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,l.w5)((({element:n})=>[(0,l.Wm)(w,{team:n,selected:e.teamSelected(n.id),displayStat:e.displayStat,onClick:t=>e.teamOnClick(n.id),"onChange:name":e.teamNameOnChange,"onChange:buildname":e.buildnameOnChange,"onClick:character":t=>e.characterOnClick(n)},null,8,["team","selected","displayStat","onClick","onChange:name","onChange:buildname","onClick:character"])])),_:1},8,["list"])],512),[[a.F8,!e.characterSelectVisible]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(_,{visible:e.characterSelectVisible,members:e.forcusedMembers,"onClick:cancel":n[5]||(n[5]=n=>e.characterSelectVisible=!1),"onClick:ok":e.updateCharacters},null,8,["visible","members","onClick:ok"])],512),[[a.F8,e.characterSelectVisible]])]),(0,l._)("div",b,[g,e.teams[e.selectedTeamId]?((0,l.wg)(),(0,l.j4)(E,{key:0,team:e.teams[e.selectedTeamId]},null,8,["team"])):(0,l.kq)("",!0)]),y,k])}t(7658);var O=t(6983),w=t.n(O),C=t(4870),_=t(589),E=t(5983),S=t(2986),j=t(3550);const M=10,A=4;function N(e){let n;return e.name&&e.name in j.bw&&(n=j.bw[e.name]),n}function D(e){const n=e.split("_"),t=n[1];let a;return n.splice(0,2),a=n.length>0?n.join("_"):(0,S.K1)(t),a}function H(e){return Object.keys(localStorage).filter((n=>n.startsWith((0,S.R4)(e))))}function P(e,n){let t;const a=(0,S.R4)(e,n),l=localStorage.getItem(a);return l&&(t=JSON.parse(l)),t}const x={class:"title"},T={class:"name"},I=(0,l._)("span",{class:"handle"},"◆",-1),V={key:0},W={key:1},R={class:"elemental-resonance"},F=["src"],X={class:"members"};function q(e,n,t,c,s,i){const o=(0,l.up)("MemberItem");return(0,l.wg)(),(0,l.iD)("div",{class:(0,r.C_)("team"+e.selectedClass)},[(0,l._)("div",x,[(0,l._)("label",T,[I,e.editable?((0,l.wg)(),(0,l.iD)("span",V,[(0,l.wy)((0,l._)("input",{type:"text",minlength:"1",maxlength:"16","onUpdate:modelValue":n[0]||(n[0]=n=>e.name=n),placeholder:"INPUT TEAM NAME",onChange:n[1]||(n[1]=(...n)=>e.nameOnChange&&e.nameOnChange(...n))},null,544),[[a.nr,e.name]]),(0,l._)("span",{class:"button material-symbols-outlined",onClick:n[2]||(n[2]=n=>e.editable=!1)}," edit_off ")])):((0,l.wg)(),(0,l.iD)("span",W,[(0,l._)("span",null,(0,r.zw)(e.name),1),(0,l._)("span",{class:"button material-symbols-outlined",onClick:n[3]||(n[3]=n=>e.editable=!0)}," edit ")]))]),(0,l._)("div",R,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.resonanceElementImgSrcs,(e=>((0,l.wg)(),(0,l.iD)("img",{class:"elemental-resonance",key:e,src:e,alt:"resonance"},null,8,F)))),128))])]),(0,l._)("div",X,[(0,l._)("table",null,[(0,l._)("tr",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.team.members,(n=>((0,l.wg)(),(0,l.iD)("td",{key:n.id},[(0,l.Wm)(o,{member:n,displayStat:e.displayStat,showEquipment:!0,viewable:!0,members:e.team.members.map((e=>e.name)),elementalResonance:e.elementalResonance,"onClick:character":e.characterOnClick,"onChange:buildname":e.changeBuildname},null,8,["member","displayStat","members","elementalResonance","onClick:character","onChange:buildname"])])))),128))])])])],2)}const L={class:"member"},B=["src","alt"],U=["src"],Y={key:0,class:"tag tag-3"},Z={key:1,class:"tag tag-2"},K={key:2,class:"tag tag-1"},z={key:3,class:"tag tag-0"},G={key:0,class:"stat-value"},J={key:1},$=["src"],Q=["src"],ee=["src"],ne={class:"extra-control"},te={key:0};function ae(e,n,t,c,s,i){return(0,l.wg)(),(0,l.iD)("div",L,[(0,l._)("div",{class:"member-img",onClick:n[0]||(n[0]=(...n)=>e.characterOnClick&&e.characterOnClick(...n))},[(0,l._)("img",{class:(0,r.C_)("character"+e.characterImgClass),src:e.characterImgSrc,alt:e.displayName(e.member.name)},null,10,B),(0,l._)("img",{class:"vision",src:e.visionImgSrc,alt:"vision"},null,8,U),(0,l.wy)((0,l._)("div",{class:"constellation"},(0,r.zw)(e.constellation),513),[[a.F8,e.constellation]]),e.member.tags[3]?((0,l.wg)(),(0,l.iD)("div",Y,(0,r.zw)(e.member.tags[3]),1)):(0,l.kq)("",!0),e.member.tags[2]?((0,l.wg)(),(0,l.iD)("div",Z,(0,r.zw)(e.member.tags[2]),1)):(0,l.kq)("",!0),e.member.tags[1]?((0,l.wg)(),(0,l.iD)("div",K,(0,r.zw)(e.member.tags[1]),1)):(0,l.kq)("",!0),e.member.tags[0]?((0,l.wg)(),(0,l.iD)("div",z,(0,r.zw)(e.member.tags[0]),1)):(0,l.kq)("",!0)]),e.displayStat?((0,l.wg)(),(0,l.iD)("div",G,(0,r.zw)(e.statValue),1)):(0,l.kq)("",!0),e.showEquipment?((0,l.wg)(),(0,l.iD)("div",J,[(0,l._)("img",{class:"weapon",src:e.imgWeaponSrc,alt:"weapon"},null,8,$),(0,l._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(0),alt:"artifact-set"},null,8,Q),(0,l._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(1),alt:"artifact-set"},null,8,ee)])):(0,l.kq)("",!0),(0,l._)("div",ne,[e.viewable&&"locate"==e.extraControl?((0,l.wg)(),(0,l.iD)("div",te,[(0,l._)("button",{type:"button",onClick:n[1]||(n[1]=(...n)=>e.locate&&e.locate(...n))},"view")])):(0,l.kq)("",!0)])])}function le(e,n){return n+S.iU[e][0]==n?"+":""}function re(e,n,t){if(!e)return 0;const a=le(n,t);if(a in e)return e[a];const l=S.iU[n][0],r=S.iU[n][S.iU[n].length-1],c=e[l+"+"],s=e[r];return c+(s-c)*(t-l)/(r-l)}function ce(e,n){const t=S.iU[n][0];return e[t+"+"]}function se(e,n){Object.keys(e).forEach((n=>{e[n]=0}));for(const t of n){if(!t)continue;const n=t.split("_");e[n[1]]+=j.$Y[n[0]][n[1]]}}function ie(e){const n=e.聖遺物ステータス,t=e.聖遺物ステータスメイン効果,a=e.聖遺物ステータスサブ効果;for(const l of Object.keys(n))n[l]=0;for(const l of Object.keys(t))l in n?n[l]+=t[l]:n[l]=t[l];for(const l of Object.keys(a))l in n?n[l]+=a[l]:n[l]=a[l]}const oe=function(e,n,t,a,l){if(n&&t&&a&&l)try{const r=n.characterMaster,c=n.突破レベル,s=n.レベル,i=n.命ノ星座,o=n.weaponMaster,u=n.武器突破レベル,m=n.武器レベル,f=(0,E.X8)(S.q2);if(f["突破レベル"]=c,f["レベル"]=s,f["命ノ星座"]=i,f["元素"]=r.元素,"元素エネルギー"in r["元素爆発"]&&(f["元素エネルギー"]=r["元素爆発"]["元素エネルギー"]),"固有変数"in r)for(const e of Object.keys(r["固有変数"]))e in a.conditionValues?f[e]=Number(a.conditionValues[e]):f[e]=r["固有変数"][e];for(const n of Object.keys(e.enemyMaster).filter((e=>"key"!=e))){const t="敵"+n;f[t]=e.enemyMaster[n]}Object.keys(e.statAdjustments).forEach((n=>{n in f&&(f[n]+=e.statAdjustments[n])}));for(const e of Object.keys(r["ステータス"]))if(S.Vd.includes(e))f[e]+=re(r["ステータス"][e],c,s);else{const n=["HP","攻撃力","防御力"].includes(e)?e+"+":e;n in f&&(f[n]+=ce(r["ステータス"][e],c))}for(const e of Object.keys(o["ステータス"]))f[e]+=re(o["ステータス"][e],u,m);const d=t.聖遺物ステータス;for(const e of Object.keys(d)){const n=["HP","攻撃力","防御力"].includes(e)?e+"+":e;f[n]+=d[e]}let h="法器"==r.武器?r.元素:"物理",p="法器"==r.武器?r.元素:"物理",b="法器"==r.武器?r.元素:"物理";l&&[l.elementalResonance,l.teamOption,l.miscOption].forEach((e=>{e&&Object.keys(e.conditionAdjustments).forEach((n=>{if(e.conditionAdjustments[n]===1/0){if(n.endsWith("元素付与")&&["片手剣","両手剣","長柄武器"].includes(r.武器)){const e=n.replace(/元素付与$/,"");h=e,p=e,b=e}}else n in f?f[n]+=e.conditionAdjustments[n]:f[n]=e.conditionAdjustments[n]}))}));const g=de(a),y=ue(n,g,f);for(const e of[n.damageDetailMyCharacter,n.damageDetailMyWeapon,n.damageDetailMyArtifactSets])if(e&&S.yL in e)for(const n of e[S.yL]){if(n["条件"]){const e=he(n["条件"],g,i);if(0==e)continue}if(n["種類"]&&n["種類"].endsWith("元素付与")){const e=n["種類"].replace("元素付与","");n["対象"]?"通常攻撃ダメージ"==n["対象"]?h=e:"重撃ダメージ"==n["対象"]?p=e:"落下攻撃ダメージ"==n["対象"]&&(b=e):(h=e,p=e,b=e)}}a.攻撃元素=[h,p,b],(0,E.fX)(e.statsObj,f),(0,E.fX)(a.conditionAdjustments,y)}catch(r){throw console.error(e,n,t,a,l),r}};function ue(e,n,t){const a=e.命ノ星座,l={},r=["元素熟知","元素チャージ効率"],c=[],s=[],i=[];for(const o of[e.damageDetailMyCharacter,e.damageDetailMyWeapon,e.damageDetailMyArtifactSets])if(o&&S.e2 in o)for(const e of o[S.e2]){let t=!1,l=e["数値"];if(e["条件"]){const r=he(e["条件"],n,a);if(0==r)continue;1!=r&&(l=l.concat(["*",r])),t=!0}if(e["種類"])if(e["対象"]){const n=e["種類"]+"."+e["対象"];i.push([n,l,e["上限"],t])}else r.includes(e["種類"])?c.push([e["種類"],l,e["上限"],t]):e["種類"].endsWith("%")?s.push([e["種類"],l,e["上限"],t]):i.push([e["種類"],l,e["上限"],t])}return c.forEach((e=>{const n=ge(t,e[0],e[1],e[2]);if(e[3])for(const t of Object.keys(n))t in l?l[t]+=n[t]:l[t]=n[t]})),s.sort(me),s.forEach((e=>{const n=ge(t,e[0],e[1],e[2]);if(e[3])for(const t of Object.keys(n))t in l?l[t]+=n[t]:l[t]=n[t]})),t["HP上限"]+=t["基礎HP"]+t["HP+"],t["HP上限"]+=t["基礎HP"]*t["HP%"]/100,t["攻撃力"]+=t["基礎攻撃力"]+t["攻撃力+"],t["攻撃力"]+=t["基礎攻撃力"]*t["攻撃力%"]/100,t["防御力"]+=t["基礎防御力"]+t["防御力+"],t["防御力"]+=t["基礎防御力"]*t["防御力%"]/100,i.sort(me),i.forEach((e=>{const n=ge(t,e[0],e[1],e[2]);if(e[3])for(const t of Object.keys(n))t in l?l[t]+=n[t]:l[t]=n[t]})),l}function me(e,n){const t=["HP%","HP","HP上限","防御力%","防御力","元素熟知","会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","攻撃力%","攻撃力"],a=["ダメージ軽減"];let l=t.indexOf(e[0]);a.indexOf(e[0])>=0&&(l=t.length+1);let r=t.indexOf(n[0]);return a.indexOf(n[0])>=0&&(r=t.length+1),(-1!=l?l:t.length)-(-1!=r?r:t.length)}const fe=function(e,n,t,a=null){try{let l=0;if(Array.isArray(e)){let r=null;for(const c of e){let s=0;if(["+","-","*","/"].includes(c))r=c;else{if((0,E.hj)(c))s=Number(c);else if(Array.isArray(c))s=fe(c,n,t);else if(c in n)s=Number(n[c]);else if(-1!=c.indexOf("#")){const l=c.split("#");if(t&&l[0]in t){const r=t[l[0]];let i=null;for(const e of r)if(l[1]==e[0]){i=e[4];break}null!=i?s=i:console.error(e,n,t,a,c)}}else console.error(e,n,t,a,c);if(null==r)l+=s;else switch(r){case"+":l+=s;break;case"-":l-=s;break;case"*":l*=s,l=Math.floor(100*l)/100;break;case"/":l/=s;break}}}}else(0,E.hj)(e)?l=Number(e):e in n?l=n[e]:console.error(n,e,a);if(null!=a){const e=fe(a,n,t);l>e&&(l=e)}return l}catch(l){throw console.error(e,n,t,a),l}};function de(e){try{const n=[];if(!e)return n;const t=e.checkboxList;t&&t.forEach((t=>{e.conditionValues[t.name]&&n.push(t.name)}));const a=e.selectList;return a&&a.forEach((t=>{const a=e.conditionValues[t.name];void 0!==a&&null!==a&&(a>0||0==a&&t.required)&&n.push(t.name+"@"+t.options[a])})),n}catch(n){throw console.error(e),n}}const he=function(e,n,t){const a=e.split("^")[0];if(-1!=a.indexOf("|")){const e=a.split("|");for(let a=0;a<e.length;a++){const l=pe(e[a],n,t);if(1==l)return 1}return 0}const l=a.split("&");let r=1;for(let c=0;c<l.length;c++){const e=pe(l[c],n,t);if(0==e)return 0;1!=e&&(r=e)}return r};function pe(e,n,t){const a=e.split(/[@=]/);if("命ノ星座"==a[0]){if(2==a.length&&(0,E.hj)(a[1])){const e=Number(a[1]);if(e<=t)return 1}return 0}if(n.includes(e)||n.includes(e.replace("=","@")))return 1;if(1==a.length)return n.filter((n=>n.split("@")[0]==e)).length>0?1:0;if(-1!=e.indexOf("="))return 0;const l=new RegExp("[^0-9]*?([\\-0-9\\.]+).*");for(let r=0;r<n.length;r++)if(n[r].startsWith(a[0]+"@")){const e=n[r].split("@"),t=l.exec(e[1]);if(t){const e=Number(t[1]);return e}}return 0}const be=["炎","水","風","雷","草","氷","岩"];function ge(e,n,t,a=null){const l=fe(t,e,S.US,a);(0,E.hj)(l)||console.error(e,n,t,l);const r=[];"HP"==n?r.push("HP上限"):n.startsWith("自元素")?r.push(n.replace(/^自/,String(e["元素"]))):n.startsWith("全元素")?be.forEach((e=>{r.push(n.replace(/^全/,e))})):n.startsWith("敵自元素")?r.push(n.replace(/^敵自/,"敵"+String(e["元素"]))):n.startsWith("敵全元素")?be.forEach((e=>{r.push(n.replace(/^敵全/,"敵"+e))})):r.push(n);const c={};r.forEach((e=>{c[e]=l}));for(const s of Object.keys(c))s in e?s.startsWith("別枠乗算")&&c[s]>0?e[s]*=c[s]/100:e[s]+=c[s]:e[s]=c[s];return console.debug(ge.name,null,n,t,"=>",c),c}var ye=(0,l.aZ)({name:"MemberItem",props:{member:{type:Object,required:!0},displayStat:{type:String},showEquipment:{type:Boolean},viewable:{type:Boolean},tags:{type:Array},members:{type:Array},elementalResonance:{type:Array}},emits:["click:character","change:buildname"],setup(e,n){const{displayName:t,displayStatValue:a}=(0,_.Z)(),r=(0,C.iH)("locate"),c=(0,C.iH)(0);(0,l.YP)(e,(async()=>{await f(),c.value++}));const s=(0,E.X8)(S.Hd),i=(0,E.X8)(S.HN),o=(0,E.X8)(S.NY),u=(0,E.X8)(S.wX),m=(0,E.X8)(S.HO),f=async()=>{if(!e.member.name)return;s.character=e.member.name,s.characterMaster=await(0,j.tm)(s.character);const n=O.value;if(!n)return{};await(0,S.pS)(s,i,o,u,n),(0,S.ge)(s),(0,S.Cl)(s),(0,S.Vk)(s),(0,S.Hk)(o,s),se(i.聖遺物ステータスメイン効果,i.聖遺物メイン効果),ie(i),o.checkboxList.forEach((e=>{o.conditionValues[e.name]=!1})),o.selectList.forEach((e=>{o.conditionValues[e.name]=0}));const t=s.characterMaster.元素,a={};if(e.members&&e.members.filter((e=>e)).forEach((e=>{const n=j.bw[e].元素;n in a?a[n]++:a[n]=1})),"夜蘭"==s.character&&(o.conditionValues["先後の決め手"]=Object.keys(a).length),["千岩古剣","千岩長槍"].includes(s.weapon)&&e.members){let n=0;for(const a of e.members.filter((e=>e))){const e=await(0,j.tm)(a);e.region&&["璃月港"].includes(e.region)&&n++}const t="["+s.weapon+"]璃月キャラ1人毎に攻撃力と会心率+";o.conditionValues[t]=n}const l=s.artifactSets.filter((e=>"金メッキの夢"==e)).length;if(2==l){let e=a[t]-1,n=Object.keys(a).filter((e=>e!=t)).map((e=>a[e])).reduce(((e,n)=>e+n));o.conditionValues["[金メッキの夢4]同じ元素タイプ"]=e,o.conditionValues["[金メッキの夢4]異なる元素タイプ"]=n}if(e.elementalResonance){const n={};e.elementalResonance.forEach((e=>{if(u.elementalResonance.conditionValues[e]=!0,"詳細"in j._9[e]){const t=j._9[e].詳細;if(t)for(const e of t)"種類"in e&&"数値"in e&&(e.種類 in n?n[e.種類]+=e.数値:n[e.種類]=e.数値)}})),(0,E.fX)(u.elementalResonance.conditionAdjustments,n)}oe(m,s,i,o,u)};f();const d=(0,l.Fl)((()=>e.member.name?j.bw[e.member.name]??void 0:void 0)),h=(0,l.Fl)((()=>d.value?.icon_url??j.bx)),p=(0,l.Fl)((()=>{const e=d.value?.レアリティ;return e?" "+j.dr[String(e)]:""})),b=(0,l.Fl)((()=>d.value?.元素?j.GN[d.value.元素]:j.bx)),g=(0,l.Fl)((()=>O.value?O.value.命ノ星座:"")),y=(0,l.Fl)((()=>w.value?w.value.icon_url:j.bx)),k=e=>M.value[e]?.image??j.bx,v=()=>{n.emit("click:character")},O=(0,l.Fl)((()=>{let n;const t=e.member.name;return t&&e.member.buildname&&(n=P(t,e.member.buildname)),n})),w=(0,l.Fl)((()=>{let e;if(O.value){const n=O.value.武器;n&&d.value&&(e=j.Nd[d.value.武器][n])}return e})),M=(0,l.Fl)((()=>{const e=[];if(O.value)for(let n=0;n<2;n++){const t="聖遺物セット効果"+(n+1);let a=O.value[t]??"NONE";e.push(j.oN[a])}return e})),A=(0,l.Fl)((()=>{c.value;let n="-";if(O.value){let t=e.displayStat;t&&("会心率/ダメージ"===t?(n=a("会心率",m.statsObj["会心率"]),n+="/",n+=a("会心ダメージ",m.statsObj["会心ダメージ"])):n=a(t,m.statsObj[t]))}return n})),N=()=>{const n=e.member;(0,S.Ac)(n.name,e.member.buildname),window.open("./","_blank")};return{displayName:t,characterImgSrc:h,characterImgClass:p,visionImgSrc:b,constellation:g,imgWeaponSrc:y,imgArtifactSetSrc:k,statValue:A,extraControl:r,locate:N,characterOnClick:v}}}),ke=t(89);const ve=(0,ke.Z)(ye,[["render",ae]]);var Oe=ve,we=(0,l.aZ)({name:"TeamItem",props:{team:{type:Object,required:!0},selected:{type:Boolean,requied:!0},displayStat:{type:String}},emits:["change:name","click:character","change:buildname"],components:{MemberItem:Oe},setup(e,n){const{displayName:t}=(0,_.Z)();(0,l.YP)(e,(e=>{c.value=e.team.name}));const a=(0,l.Fl)((()=>e.selected?" selected":"")),r=(0,C.iH)(!1),c=(0,C.iH)(e.team.name),s=()=>{n.emit("change:name",e.team.id,c)},i=(0,l.Fl)((()=>{const n=[],t={},a=e.team.members.filter((e=>e.name));return 4==a.length&&(a.forEach((e=>{const n=N(e);n&&(n.元素 in t?t[n.元素]++:t[n.元素]=1)})),4==Object.keys(t).length?n.push("元素共鳴なし"):Object.keys(t).forEach((e=>{t[e]>=2&&n.push(e+"元素共鳴")}))),n})),o=(0,l.Fl)((()=>{const n=[];return i.value.forEach((t=>{if("元素共鳴なし"==t){const t=e.team.members.filter((e=>e.name));t.forEach((e=>{const t=j.bw[e.name],a=j.GN[t.元素];n.push(a)}))}else{const e=j.GN[t.replace("元素共鳴","")];n.push(e),n.push(e)}})),n})),u=()=>{n.emit("click:character")},m=(t,a)=>{n.emit("change:buildname",e.team.id,t,a)};return{displayName:t,selectedClass:a,editable:r,name:c,elementalResonance:i,resonanceElementImgSrcs:o,nameOnChange:s,characterOnClick:u,changeBuildname:m}}});const Ce=(0,ke.Z)(we,[["render",q]]);var _e=Ce;const Ee=e=>((0,l.dD)("data-v-14ee9842"),e=e(),(0,l.Cn)(),e),Se=Ee((()=>(0,l._)("hr",null,null,-1))),je={class:"tags"},Me=["onClick"],Ae={class:"buildname-select"},Ne=["value"],De={class:"buttons"};function He(e,n,t,c,s,i){const o=(0,l.up)("CharacterSelect"),u=(0,l.up)("MemberItem");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(o,{visible:!0,characters:e.characters,"onUpdate:characters":e.updateCharacters},null,8,["characters","onUpdate:characters"]),Se,(0,l._)("div",je,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.TAG_LIST,(n=>((0,l.wg)(),(0,l.iD)("span",{class:"tag",key:n,onClick:t=>e.tagOnClick(n)},(0,r.zw)(n),9,Me)))),128))]),(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.workMembers,(n=>((0,l.wg)(),(0,l.iD)("div",{class:(0,r.C_)("member"+e.memberSelectedClass(n.id)),key:n.id},[(0,l.Wm)(u,{member:n,onClick:t=>e.memberOnClick(n.id)},null,8,["member","onClick"])],2)))),128)),(0,l._)("div",Ae,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":n[0]||(n[0]=n=>e.selectedMemberBuildname=n),onChange:n[1]||(n[1]=(...n)=>e.buildnameOnChange&&e.buildnameOnChange(...n))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.buildnames,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,r.zw)(e),9,Ne)))),128))],544),[[a.F8,e.buildnames.length],[a.bM,e.selectedMemberBuildname]])])]),(0,l._)("div",De,[(0,l._)("button",{type:"button",onClick:n[2]||(n[2]=(...n)=>e.cancelOnClick&&e.cancelOnClick(...n))},"cancel"),(0,l._)("button",{type:"button",onClick:n[3]||(n[3]=(...n)=>e.okOnClick&&e.okOnClick(...n))},"ok")])],64)}var Pe=t(7167),xe=(0,l.aZ)({name:"CharacterSelectModal",components:{CharacterSelect:Pe.Z,MemberItem:Oe},props:{visible:{type:Boolean,required:!0},members:{type:Array,required:!0}},emits:["click:cancel","click:ok"],setup(e,n){const t=(0,C.qj)([]),a=(0,C.iH)(-1),r=["FREE"],c=(0,C.iH)("");function s(){const n=[];for(let t=0;t<e.members.length;t++)n.push({id:t,name:e.members[t].name,buildname:e.members[t].buildname,savedata:e.members[t].savedata,tags:(0,E.X8)(e.members[t].tags)});t.splice(0,t.length,...n)}s(),(0,l.YP)(e,(e=>{e.members&&(s(),a.value>=0&&a.value<t.length&&(c.value=t[a.value].buildname))}));const i=(0,l.Fl)((()=>t.map((e=>e.name)))),o=e=>{for(let n=0;n<e.length;n++)if(t[n].name=e[n],t[n].name){const e=H(t[n].name).map((e=>D(e)));e.length?(t[n].buildname&&e.includes(t[n].buildname)||(t[n].buildname=(0,S.K1)(t[n].name)),n==a.value&&(c.value=t[n].buildname)):t[n].buildname=void 0}},u=e=>{if(a.value=e,a.value>=0&&a.value<t.length){const e=t[a.value];c.value=e.buildname}},m=e=>e==a.value?" selected":"",f=e=>{if(a.value<0||a.value>=t.length)return;const n=t[a.value];if(console.log(e,n),n&&n.name){const t=n.tags;t&&(t.includes(e)?t.splice(0,t.length,...t.filter((n=>n!=e))):t.push(e))}},d=(0,l.Fl)((()=>{let e=[];if(a.value>=0&&a.value<t.length){const n=t[a.value],l=n.name;if(l){e=H(l).map((e=>D(e)));const n=(0,S.K1)(l);if(e.includes(n)){const t=e.filter((e=>e!=n)).sort();t.length&&(e=[n,...t])}}}return e})),h=()=>{if(a.value<0||a.value>=t.length)return;const e=t[a.value];e.buildname=c.value},p=()=>{n.emit("click:cancel")},b=()=>{n.emit("click:ok",t)};return{characters:i,TAG_LIST:r,tagOnClick:f,workMembers:t,memberOnClick:u,memberSelectedClass:m,selectedMemberBuildname:c,buildnames:d,buildnameOnChange:h,updateCharacters:o,cancelOnClick:p,okOnClick:b}}});const Te=(0,ke.Z)(xe,[["render",He],["__scopeId","data-v-14ee9842"]]);var Ie=Te;const Ve={class:"team-rotation"},We={class:"icon-list"},Re=["src","alt","onClick"],Fe=["src","alt","onClick"],Xe={class:"rotation-list"},qe={class:"index"},Le=["src","alt"],Be=["src","alt"],Ue={class:"information"},Ye={class:"control"},Ze=["onClick"];function Ke(e,n,t,a,c,s){const i=(0,l.up)("draggable");return(0,l.wg)(),(0,l.iD)("div",Ve,[(0,l._)("fieldset",We,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.team.members,(n=>((0,l.wg)(),(0,l.iD)(l.HY,{key:n.id},[e.elementalSkill(n)?((0,l.wg)(),(0,l.iD)("img",{key:0,class:"action-icon",src:e.elementalSkill(n).icon_url,alt:e.displayName(e.elementalSkill(n).名前),onClick:t=>e.actionOnClick(n,"E")},null,8,Re)):(0,l.kq)("",!0),e.elementalBurst(n)?((0,l.wg)(),(0,l.iD)("img",{key:1,class:"action-icon",src:e.elementalBurst(n).icon_url,alt:e.displayName(e.elementalBurst(n).名前),onClick:t=>e.actionOnClick(n,"Q")},null,8,Fe)):(0,l.kq)("",!0)],64)))),128))]),(0,l._)("fieldset",Xe,[(0,l.Wm)(i,{list:e.rotationList,"item-key":"id",sort:!0,handle:".handle"},{item:(0,l.w5)((({element:n,index:t})=>[e.actionDetail(n)?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,r.C_)("rotation-item"+e.colorClass(n.member))},[(0,l._)("span",qe,(0,r.zw)(("00"+(t+1)).slice(-2)),1),(0,l._)("img",{class:"character-icon handle",src:e.characterMasterDetail(n.member).icon_url,alt:e.displayName(e.characterMasterDetail(n.member).key)},null,8,Le),(0,l._)("img",{class:(0,r.C_)("action-icon handle"+e.bgColorClass(n.member)),src:e.actionDetail(n).icon_url,alt:e.displayName(e.actionDetail(n).名前)},null,10,Be),(0,l._)("span",null,(0,r.zw)(e.displayName(e.actionDetail(n).名前)),1),(0,l._)("div",Ue,(0,r.zw)(e.actionEnergyFluctuation(n)),1),(0,l._)("div",Ye,[(0,l._)("button",{type:"button",onClick:t=>e.removeItemOnClick(n)},"×",8,Ze)])],2)):(0,l.kq)("",!0)])),_:1},8,["list"])])])}let ze=0;var Ge=(0,l.aZ)({name:"TeamRotation",components:{draggable:w()},props:{team:{type:Object,required:!0}},setup(e,n){const{displayName:t}=(0,_.Z)(),a=new Map,r=(0,C.qj)([]),c=(0,C.iH)(0);(0,l.YP)(e,(async()=>{if(e.team){for(const n of e.team.members)if(n.name){const e=await(0,j.tm)(n.name);a.set(n.name,e)}r.splice(0,r.length),c.value++}}));const s=e=>(c.value,a.get(e)??void 0),i=e=>{const n=s(e.name);return n?n.元素スキル:void 0},o=e=>{const n=s(e.name);return n?n.元素爆発:void 0},u=e=>{const n=s(e);return n?" "+j.X9[n.元素]:""},m=e=>{const n=s(e);return n?" "+j.Cb[n.元素]:""},f=(e,n)=>{r.push({id:++ze,member:e.name,action:n})},d=e=>{const n=s(e.member);return n?"E"==e.action?n.元素スキル:"Q"==e.action?n.元素爆発:void 0:void 0},h=e=>{let n="";const t=s(e.member),a=d(e);return t&&a&&(a.名前==t.元素スキル.名前?n="":a.名前==t.元素爆発.名前&&(n+=a.元素エネルギー?"-"+a.元素エネルギー:"")),n},p=e=>{r.splice(0,r.length,...r.filter((n=>n!=e)))};return{displayName:t,colorClass:u,bgColorClass:m,elementalSkill:i,elementalBurst:o,actionOnClick:f,rotationList:r,characterMasterDetail:s,actionDetail:d,actionEnergyFluctuation:h,removeItemOnClick:p}}});const Je=(0,ke.Z)(Ge,[["render",Ke]]);var $e=Je;let Qe=1;var en=(0,l.aZ)({name:"TeamManager",components:{draggable:w(),TeamItem:_e,CharacterSelectModal:Ie,TeamRotation:$e},setup(){const{displayName:e}=(0,_.Z)(),n=(0,C.iH)(!1),t=(0,C.iH)(M),a=[["","None"],["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],r=(0,C.iH)(""),c=(0,C.iH)(0),s=e=>e==c.value;function i(e){return{id:e,name:"",buildname:void 0,savedata:void 0,tags:[]}}function o(e){const n={id:e,name:"チーム"+(e+1),members:[]};for(let t=0;t<A;t++)n.members.push(i(Qe++));return n}function u(e){e.name="",e.buildname=void 0,e.savedata=void 0}function m(e){e.name="チーム"+(e.id+1),e.members.forEach((e=>{u(e)}))}const f=(0,C.qj)([]);for(let l=0;l<t.value;l++)f.push(o(l));const d=e=>{c.value=e},h=e=>{c.value==e&&(n.value=!0),c.value=e},p=()=>{f.forEach((e=>{m(e)}))},b=(0,l.Fl)((()=>{const e=(0,E.X8)(f);return e.forEach((e=>{e.members.forEach((e=>{e.savedata=void 0}))})),JSON.stringify(e)})),g=(0,C.iH)(""),y=()=>{localStorage.setItem("teams",b.value),g.value=b.value},k=(0,l.Fl)((()=>b.value==g.value)),v=()=>{const e=localStorage.getItem("teams");if(e){const n=JSON.parse(e);for(let e=0;e<f.length;e++){const t=f[e];if(n[e]){t.name=n[e].name;const a=t.members;for(let t=0;t<a.length;t++)n[e].members[t]&&(a[t].name=n[e].members[t].name,n[e].members[t].buildname?a[t].buildname=n[e].members[t].buildname:a[t].buildname=void 0,a[t].savedata=void 0,n[e].members[t].tags?a[t].tags=n[e].members[t].tags:a[t].tags=[])}}}};v();const O=()=>{if(t.value>f.length)for(let e=f.length;e<t.value;e++)f.push(o(e));else t.value<f.length&&(c.value>t.value&&(c.value=0),f.splice(t.value))},w=(0,l.Fl)((()=>f[c.value].members)),S=e=>{if(-1!=c.value){const n=f.filter((e=>e.id==c.value))[0];if(n){const t=[];for(let a=0;a<e.length;a++){const l=i(n.members[a].id);l.name=e[a].name,l.buildname=e[a].buildname,l.savedata=void 0,l.tags.splice(0,l.tags.length,...e[a].tags),t.push(l)}n.members.splice(0,n.members.length,...t)}}n.value=!1},j=e=>{s(e.id)?n.value=!0:c.value=e.id},N=(e,n)=>{const t=f.filter((n=>n.id==e))[0];t&&(t.name=n)},D=(e,n,t)=>{const a=f.filter((n=>n.id==e))[0];if(a){const e=a.members.filter((e=>e.id==n))[0];e&&(e.buildname=t)}};return{displayName:e,characterSelectVisible:n,NUMBER_OF_TEAMS:M,NUMBER_OF_MEMBERS:A,numberOfTeams:t,numberOfTeamsOnChange:O,DISPLAY_STAT_LIST:a,displayStat:r,clearOnClick:p,saveOnClick:y,loadOnClick:v,saveDisabled:k,selectedTeamId:c,teamSelected:s,teams:f,forcusedMembers:w,teamOnClick:d,characterOnClick:j,memberOnClick:h,updateCharacters:S,teamNameOnChange:N,buildnameOnChange:D}}});const nn=(0,ke.Z)(en,[["render",v],["__scopeId","data-v-6ba1013f"]]);var tn=nn,an=t(2540);async function ln(){(0,a.ri)(tn,{}).use(an.Z).mount("#app")}ln()}},n={};function t(a){var l=n[a];if(void 0!==l)return l.exports;var r=n[a]={exports:{}};return e[a].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,a,l,r){if(!a){var c=1/0;for(u=0;u<e.length;u++){a=e[u][0],l=e[u][1],r=e[u][2];for(var s=!0,i=0;i<a.length;i++)(!1&r||c>=r)&&Object.keys(t.O).every((function(e){return t.O[e](a[i])}))?a.splice(i--,1):(s=!1,r<c&&(c=r));if(s){e.splice(u--,1);var o=l();void 0!==o&&(n=o)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,l,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.j=299}(),function(){var e={299:0};t.O.j=function(n){return 0===e[n]};var n=function(n,a){var l,r,c=a[0],s=a[1],i=a[2],o=0;if(c.some((function(n){return 0!==e[n]}))){for(l in s)t.o(s,l)&&(t.m[l]=s[l]);if(i)var u=i(t)}for(n&&n(a);o<c.length;o++)r=c[o],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},a=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998,64],(function(){return t(3007)}));a=t.O(a)})();
//# sourceMappingURL=TeamManager.2873a299.js.map