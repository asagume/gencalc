(function(){"use strict";var e={2986:function(e,t,a){a.d(t,{CN:function(){return ne},Cl:function(){return G},Em:function(){return u},F_:function(){return Y},HN:function(){return I},HO:function(){return L},Hd:function(){return A},Hk:function(){return oe},Hx:function(){return D},Jd:function(){return be},K1:function(){return q},Ke:function(){return X},Mz:function(){return O},NY:function(){return z},Nh:function(){return we},PH:function(){return ye},R4:function(){return T},U3:function(){return r},UR:function(){return se},US:function(){return M},V6:function(){return y},Vd:function(){return s},Vk:function(){return Q},W3:function(){return le},YO:function(){return k},Z3:function(){return P},ZT:function(){return ee},e0:function(){return ae},e2:function(){return B},ge:function(){return $},i1:function(){return C},i5:function(){return ge},iU:function(){return j},jq:function(){return v},kA:function(){return R},kE:function(){return K},kM:function(){return g},pS:function(){return F},q2:function(){return w},qT:function(){return Z},tH:function(){return c},uc:function(){return p},vo:function(){return V},wB:function(){return d},wM:function(){return x},wX:function(){return E},wn:function(){return S},yL:function(){return J},zf:function(){return H}});a(7658);var n=a(3550),l=a(5983);const s=["基礎HP","基礎攻撃力","基礎防御力"],i=["HP上限","攻撃力","防御力","元素熟知"],o=["会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","クールタイム短縮","シールド強化"],r=["炎元素ダメージバフ","水元素ダメージバフ","風元素ダメージバフ","雷元素ダメージバフ","草元素ダメージバフ","氷元素ダメージバフ","岩元素ダメージバフ","物理ダメージバフ"],c=["炎元素耐性","水元素耐性","風元素耐性","雷元素耐性","草元素耐性","氷元素耐性","岩元素耐性","物理耐性"],u=["通常攻撃ダメージバフ","重撃ダメージバフ","落下攻撃ダメージバフ","元素スキルダメージバフ","元素爆発ダメージバフ","与えるダメージ"],d=["通常攻撃ダメージアップ","重撃ダメージアップ","落下攻撃ダメージアップ","元素スキルダメージアップ","元素爆発ダメージアップ","炎元素ダメージアップ","水元素ダメージアップ","風元素ダメージアップ","雷元素ダメージアップ","草元素ダメージアップ","氷元素ダメージアップ","岩元素ダメージアップ","物理ダメージアップ"],p=["蒸発反応ボーナス","溶解反応ボーナス","過負荷反応ボーナス","感電反応ボーナス","凍結反応ボーナス","超電導反応ボーナス","拡散反応ボーナス","結晶反応ボーナス","燃焼反応ボーナス","開花反応ボーナス","烈開花反応ボーナス","超開花反応ボーナス","超激化反応ボーナス","草激化反応ボーナス"],f=["ダメージ軽減","HP%","攻撃力%","防御力%","HP+","攻撃力+","防御力+","HP上限V1","攻撃力V1","防御力V1","元素熟知V1","会心率V1","会心ダメージV1","与える治療効果V1","受ける治療効果V1","元素チャージ効率V1","HP上限V2","攻撃力V2","防御力V2","元素熟知V2","会心率V2","会心ダメージV2","与える治療効果V2","受ける治療効果V2","元素チャージ効率V2"],m=["敵炎元素耐性","敵水元素耐性","敵風元素耐性","敵雷元素耐性","敵草元素耐性","敵氷元素耐性","敵岩元素耐性","敵物理耐性"],h=["敵防御力"],g=new Map([["基礎ステータス",s],["基本ステータス",i],["高級ステータス",o],["元素ステータス·ダメージ",r],["元素ステータス·耐性",c],["ダメージバフ",u],["実数ダメージ加算",d],["元素反応バフ",p],["その他",f],["敵ステータス·元素耐性",m],["敵ステータス·その他",h]]),y=[...o,...r,...c,...u,...p,...m,"別枠乗算"];function b(){const e={};return g.forEach((t=>{t.forEach((t=>{e[t]=0}))})),e["会心率"]=5,e["会心ダメージ"]=50,e["元素チャージ効率"]=100,e["敵レベル"]=0,e["敵防御力"]=0,e}const w=b();function _(){const e={};return[c].forEach((t=>{t.forEach((t=>{e[t]=0}))})),e["防御力"]=0,e}_();const v=["5_HP","4_HP"],k=["5_攻撃力","4_攻撃力"],S=["5_元素チャージ効率","5_HP%","5_攻撃力%","5_防御力%","5_元素熟知","4_元素チャージ効率","4_HP%","4_攻撃力%","4_防御力%","4_元素熟知"],C=["5_炎元素ダメージバフ","5_水元素ダメージバフ","5_風元素ダメージバフ","5_雷元素ダメージバフ","5_草元素ダメージバフ","5_氷元素ダメージバフ","5_岩元素ダメージバフ","5_物理ダメージバフ","5_HP%","5_攻撃力%","5_防御力%","5_元素熟知","4_炎元素ダメージバフ","4_水元素ダメージバフ","4_風元素ダメージバフ","4_雷元素ダメージバフ","4_草元素ダメージバフ","4_氷元素ダメージバフ","4_岩元素ダメージバフ","4_物理ダメージバフ","4_HP%","4_攻撃力%","4_防御力%","4_元素熟知"],O=["5_会心率","5_会心ダメージ","5_HP%","5_攻撃力%","5_防御力%","5_元素熟知","5_与える治療効果","4_会心率","4_会心ダメージ","4_HP%","4_攻撃力%","4_防御力%","4_元素熟知","4_与える治療効果"],D=["HP","攻撃力","防御力","元素熟知","会心率","会心ダメージ","元素チャージ効率","攻撃力%","HP%","防御力%"],R=["攻撃力%","HP%","防御力%","元素熟知","会心率","会心ダメージ","元素チャージ効率"],N={HP:0,"攻撃力":0,"防御力":0,"元素熟知":0,"会心率":0,"会心ダメージ":0,"元素チャージ効率":0,"HP%":0,"攻撃力%":0,"防御力%":0,"炎元素ダメージバフ":0,"水元素ダメージバフ":0,"風元素ダメージバフ":0,"雷元素ダメージバフ":0,"草元素ダメージバフ":0,"氷元素ダメージバフ":0,"岩元素ダメージバフ":0,"物理ダメージバフ":0,"与える治療効果":0},V={"元素":"炎","蒸発倍率":0,"溶解倍率":0,"過負荷ダメージ":0,"感電ダメージ":0,"超電導ダメージ":0,"拡散ダメージ":0,"拡散元素":"炎","結晶吸収量":0,"燃焼ダメージ":0,"開花ダメージ":0,"烈開花ダメージ":0,"超開花ダメージ":0,"超激化ダメージ":0,"草激化ダメージ":0},M={"元素反応":(0,l.X8)(V),"通常攻撃":[],"重撃":[],"落下攻撃":[],"元素スキル":[],"元素爆発":[],"その他":[],"キャラクター注釈":[]},j=[Array.from({length:20},((e,t)=>t+1)),Array.from({length:21},((e,t)=>t+20)),Array.from({length:11},((e,t)=>t+40)),Array.from({length:11},((e,t)=>t+50)),Array.from({length:11},((e,t)=>t+60)),Array.from({length:11},((e,t)=>t+70)),Array.from({length:11},((e,t)=>t+80))],H={key:"NONE","レアリティ":5,image:n.bx},A={character:"アンバー",characterMaster:{},"突破レベル":6,"レベル":90,"命ノ星座":0,"通常攻撃レベル":8,"元素スキルレベル":8,"元素爆発レベル":8,weapon:"西風猟弓",weaponMaster:{},"武器突破レベル":6,"武器レベル":90,"武器精錬ランク":1,artifactSets:["NONE","NONE"],artifactSetMasters:[H,H],damageDetailMyCharacter:null,damageDetailMyWeapon:null,damageDetailMyArtifactSets:null,damageDetailElementalResonance:null,buildname:"",recommendationSelectedIndex:0,saveDisabled:!0,removeDisabled:!0},I={"聖遺物メイン効果":["","","","",""],"聖遺物優先するサブ効果":["","",""],"聖遺物優先するサブ効果上昇値":Array.from(n.Ml[2].values),"聖遺物優先するサブ効果上昇回数":Array.from(n.Ml[2].counts),"聖遺物ステータス":(0,l.X8)(N),"聖遺物ステータスメイン効果":(0,l.X8)(N),"聖遺物ステータスサブ効果":(0,l.X8)(N),"聖遺物優先するサブ効果Disabled":!1},z={checkboxList:[],selectList:[],conditionValues:{},conditionAdjustments:{},"攻撃元素":[null,null,null]},L={statsObj:(0,l.X8)(w),statAdjustments:(0,l.X8)(w),enemyMaster:n.FX[0]};for(const _e of Object.keys(L.statAdjustments))L.statAdjustments[_e]=0;const E={elementalResonance:{conditionValues:{},conditionAdjustments:{}},supporterBuildname:{},teamOption:(0,l.X8)(z),miscOption:(0,l.X8)(z)};(0,l.X8)(A),(0,l.X8)(I),(0,l.X8)(z),(0,l.X8)(L);function U(e){try{let t;t=(0,l.HD)(e)?Number(String(e).replace("+","")):Number(e);let a=0;for(let n=j.length-1;n>=0;n--)if(a=n,!(j[n][0]>t)){j[n][0]!=t||String(e).endsWith("+")||a--;break}return[a,t]}catch(t){throw console.error(e),t}}function q(e){return"あなたの"+e}function T(e,t){let a="構成_"+e;return t&&t!=q(e)&&(a+="_"+t),a}function P(e,t){return"オプション"+T(e,t)}function Y(e,t){return T(e,t).replace(/^構成/,"ArtifactScoring")}function x(e,t){const a=[],l=e["名前"];let s=null;t&&(a.push({name:"IMPORTED DATA",build:t,overwrite:!1}),s=!0,console.log(t));const i=[];Object.keys(localStorage).forEach((e=>{e.startsWith(T(l))&&(i.push(e),null==s&&(s=!1))})),i.sort();const o=new RegExp("^構成_"+l+"_");return i.forEach((e=>{let t;t=e==T(l)?q(l):e.replace(o,"");const n=JSON.parse(localStorage[e]),s="オプション"+e;if(s in localStorage){const e=JSON.parse(localStorage[s]);n.options=e}const i=e.replace(/^構成/,"ArtifactScoring");if(i in localStorage){const e=JSON.parse(localStorage[i]);n.artifactScoring=e}const r=e.replace(/^構成/,"SupporterBuildname");if(r in localStorage){const e=JSON.parse(localStorage[r]);n.supporterBuildname=e}a.push({name:t,build:n,overwrite:!0})})),e["おすすめセット"].forEach((e=>{const t=e;["聖遺物優先するサブ効果1","聖遺物優先するサブ効果2","聖遺物優先するサブ効果3"].forEach((t=>{t in e||(e[t]=null)}));const l=[[5,5,5,5,5],[4,4,5,5,5],[4,4,4,5,4]];let s=0;const i=t["聖遺物セット効果1"],o=t["聖遺物セット効果2"];4==n.oN[i]["レアリティ"]&&s++,4==n.oN[o]["レアリティ"]&&s++;for(let a=0;a<2;a++){const e="聖遺物メイン効果"+(a+1);e in t||(0==a?t[e]=l[s][a]+"_HP":1==a&&(t[e]=l[s][a]+"_攻撃力"))}let r=t["武器"];r+=" ",t["聖遺物セット効果1"]==t["聖遺物セット効果2"]?r+=t["聖遺物セット効果1"]:(r+=W(t["聖遺物セット効果1"]),r+="/",r+=W(t["聖遺物セット効果2"])),r+=" [";for(let a=3;a<=5;a++){const e=t["聖遺物メイン効果"+a].split("_")[1];n.kf.has(e)?r+=n.kf.get(e):r+=e.substring(0,1)}r+="]",a.push({name:r,build:t,overwrite:!1})})),a}function W(e){const t=/[\p{sc=Hiragana}\p{sc=Katakana}ー]+/gu;let a=e.replace(t,"");return a.length>2&&(a=e.split(t).sort(((e,t)=>t.length-e.length))[0]),a.length>3&&(a=a.substring(0,2)),a}function K(e,t,a){const l=[];if(e[t]&&(a||(a=e[t]),a&&a in n._J)){const e=n._J[a];for(let t=0;t<e.length;t++)if(l.push(e[t]),t<e.length-1){const a=e[t+1]-e[t];l.push(e[t]+a/2)}}return l}async function F(e,t,a,s,i){try{const o=e.character,r=await(0,n.tm)(o);e.characterMaster=r;const c=(0,l.X8)(N);"レベル"in i&&([e.突破レベル,e.レベル]=U(i["レベル"])),["命ノ星座","通常攻撃レベル","元素スキルレベル","元素爆発レベル"].forEach((t=>{t in i&&(e[t]=Number(i[t]))}));const u=r["武器"];"武器"in i&&(Object.keys(n.Nd[u]).includes(i["武器"])?e.weapon=i["武器"]:e.weapon=Object.keys(n.Nd[u]).filter((e=>e.startsWith("西風")))[0],e.weaponMaster=await(0,n.i7)(e.weapon,u)),"武器レベル"in i&&([e.武器突破レベル,e.武器レベル]=U(i["武器レベル"])),"精錬ランク"in i&&(e.武器精錬ランク=Number(i["精錬ランク"]));let d=!1;for(const e of Object.keys(i).filter((e=>e.startsWith("聖遺物サブ効果")))){let t=e.replace(/^聖遺物サブ効果/,"");"HP"!=t&&(t=t.replace(/P$/,"%")),(i[e]||0==i[e])&&(d=!0,c[t]=Number(i[e]))}if(t.聖遺物優先するサブ効果Disabled=d,["聖遺物セット効果1","聖遺物セット効果2"].forEach(((t,a)=>{if(!(t in i))return;const l=i[t];l&&l in n.oN?(e.artifactSets[a]=l,e.artifactSetMasters[a]=n.oN[l]):e.artifactSetMasters[a]=H})),["聖遺物メイン効果1","聖遺物メイン効果2"].forEach(((e,a)=>{t["聖遺物メイン効果"][a]=e in i?i[e]:["5_HP","5_攻撃力"][a]})),["聖遺物メイン効果3","聖遺物メイン効果4","聖遺物メイン効果5"].forEach(((e,a)=>{if(!(e in i))return;const n=i[e];t["聖遺物メイン効果"][a+2]=n})),d||(["聖遺物優先するサブ効果1","聖遺物優先するサブ効果2","聖遺物優先するサブ効果3"].forEach(((e,a)=>{if(!(e in i))return;const n=i[e];t["聖遺物優先するサブ効果"][a]=n})),["聖遺物優先するサブ効果1上昇値","聖遺物優先するサブ効果2上昇値","聖遺物優先するサブ効果3上昇値"].forEach(((e,a)=>{let s=!1;if(t["聖遺物優先するサブ効果"][a]&&e in i&&(0,l.hj)(i[e])&&(s=!0),s){const n=Number(i[e]),l=t["聖遺物優先するサブ効果"][a],s=K([l],0);s.forEach(((e,l)=>{n<=e&&(t["聖遺物優先するサブ効果上昇値"][a]=l)}))}else t["聖遺物優先するサブ効果"][a]&&!t["聖遺物優先するサブ効果上昇値"][a]&&(t["聖遺物優先するサブ効果上昇値"][a]=n.Ml[2].values[a])})),["聖遺物優先するサブ効果1上昇回数","聖遺物優先するサブ効果2上昇回数","聖遺物優先するサブ効果3上昇回数"].forEach(((e,a)=>{let s=!1;if(t["聖遺物優先するサブ効果"][a]&&e in i&&(0,l.hj)(i[e])&&(s=!0),s){const n=Number(i[e]);t["聖遺物優先するサブ効果上昇回数"][a]=n}else t["聖遺物優先するサブ効果"][a]&&!t["聖遺物優先するサブ効果上昇回数"][a]&&(t["聖遺物優先するサブ効果上昇回数"][a]=n.Ml[2].counts[a])}))),Object.keys(i).filter((e=>!n.PW.has(e)&&!["options","artifactScoring","supporterBuildname"].includes(e))).forEach((e=>{null==i[e]?a.conditionValues[e]=i[e]:(0,l.HD)(i[e])?a.conditionValues[e]=Number(i[e]):a.conditionValues[e]=i[e]})),"options"in i){const e=Object.keys(i.options);e.length&&((0,l.fX)(s.elementalResonance.conditionValues,{}),(0,l.fX)(s.teamOption.conditionValues,{}),(0,l.fX)(s.miscOption.conditionValues,{}),e.forEach((e=>{if(e in n._9||"dendroOption"==e)s.elementalResonance.conditionValues[e]=i.options[e];else{const t=e.indexOf("*");if(-1!=t){const a=e.substring(0,t);a in n.bw?s.teamOption.conditionValues[e]=i.options[e]:s.miscOption.conditionValues[e]=i.options[e]}else s.miscOption.conditionValues[e]=i.options[e]}})))}if("supporterBuildname"in i){const e=Object.keys(i.supporterBuildname);e.length&&((0,l.fX)(s.supporterBuildname,{}),e.forEach((e=>{s.supporterBuildname[e]=i.supporterBuildname[e]})))}(0,l.fX)(t.聖遺物ステータスサブ効果,c),console.debug("loadRecommendation",e,t,a,i)}catch(o){throw console.error(e,t,a,i),o}}function X(e,t,a){const n={};n["キャラクター"]=e.character,n["レベル"]=e.レベル+(j[e.突破レベル][0]==e.レベル?"+":""),n["命ノ星座"]=e.命ノ星座,n["通常攻撃レベル"]=e.通常攻撃レベル,n["元素スキルレベル"]=e.元素スキルレベル,n["元素爆発レベル"]=e.元素爆発レベル,n["武器"]=e.weapon,n["武器レベル"]=e.武器レベル+(j[e.突破レベル][0]==e.武器レベル?"+":""),n["精錬ランク"]=e.武器精錬ランク,n["聖遺物セット効果1"]=e.artifactSets[0],n["聖遺物セット効果2"]=e.artifactSets[1],n["聖遺物メイン効果1"]=t.聖遺物メイン効果[0],n["聖遺物メイン効果2"]=t.聖遺物メイン効果[1],n["聖遺物メイン効果3"]=t.聖遺物メイン効果[2],n["聖遺物メイン効果4"]=t.聖遺物メイン効果[3],n["聖遺物メイン効果5"]=t.聖遺物メイン効果[4],n["聖遺物サブ効果HP"]=t.聖遺物ステータスサブ効果["HP"],n["聖遺物サブ効果攻撃力"]=t.聖遺物ステータスサブ効果["攻撃力"],n["聖遺物サブ効果防御力"]=t.聖遺物ステータスサブ効果["防御力"],n["聖遺物サブ効果元素熟知"]=t.聖遺物ステータスサブ効果["元素熟知"],n["聖遺物サブ効果会心率"]=t.聖遺物ステータスサブ効果["会心率"],n["聖遺物サブ効果会心ダメージ"]=t.聖遺物ステータスサブ効果["会心ダメージ"],n["聖遺物サブ効果元素チャージ効率"]=t.聖遺物ステータスサブ効果["元素チャージ効率"],n["聖遺物サブ効果HPP"]=t.聖遺物ステータスサブ効果["HP%"],n["聖遺物サブ効果攻撃力P"]=t.聖遺物ステータスサブ効果["攻撃力%"],n["聖遺物サブ効果防御力P"]=t.聖遺物ステータスサブ効果["防御力%"],n["聖遺物優先するサブ効果1"]=t.聖遺物優先するサブ効果[0],n["聖遺物優先するサブ効果1上昇値"]=t.聖遺物優先するサブ効果上昇値[0],n["聖遺物優先するサブ効果1上昇回数"]=t.聖遺物優先するサブ効果上昇回数[0],n["聖遺物優先するサブ効果2"]=t.聖遺物優先するサブ効果[1],n["聖遺物優先するサブ効果2上昇値"]=t.聖遺物優先するサブ効果上昇値[1],n["聖遺物優先するサブ効果2上昇回数"]=t.聖遺物優先するサブ効果上昇回数[1],n["聖遺物優先するサブ効果3"]=t.聖遺物優先するサブ効果[2],n["聖遺物優先するサブ効果3上昇値"]=t.聖遺物優先するサブ効果上昇値[2],n["聖遺物優先するサブ効果3上昇回数"]=t.聖遺物優先するサブ効果上昇回数[2];for(const l of a.checkboxList)n[l.name]=a.conditionValues[l.name];for(const l of a.selectList)n[l.name]=a.conditionValues[l.name];return n}function Z(e,t){const a={};{const e=t.elementalResonance.conditionValues;Object.keys(e).forEach((t=>{e[t]&&(a[t]=e[t])}))}{const n=t.teamOption.conditionValues;Object.keys(n).forEach((t=>{t.startsWith(e+"*")||n[t]&&(a[t]=n[t])}))}{const e=t.miscOption.conditionValues;Object.keys(e).forEach((t=>{e[t]&&(a[t]=e[t])}))}return a}const B="ステータス変更系詳細",J="天賦性能変更系詳細";function $(e){try{const t=e.characterMaster,a={};let n,l,s,i;const o="キャラクター",r=[],c=[];l=e["通常攻撃レベル"],i="法器"===t["武器"]?t["元素"]:null,["通常攻撃","重撃","落下攻撃"].forEach((e=>{n=t[e],s=e+"ダメージ",a[e]=ne(n,l,s,i,r,c,o)})),["通常攻撃","重撃","落下攻撃"].forEach((u=>{const d="特殊"+u;if(d in t){if(n=t[d],"種類"in n)switch(s=n["種類"],s){case"元素スキルダメージ":l=e["元素スキルレベル"];break;case"元素爆発ダメージ":l=e["元素爆発レベル"];break}"元素"in n&&(i=n["元素"]);const u={"条件":n["条件"],"詳細":ne(n,l,s,i,r,c,o)};a[d]=u}})),l=e["元素スキルレベル"],s="元素スキルダメージ",i=t["元素"],a["元素スキル"]=ne(t["元素スキル"],l,s,i,r,c,o),l=e["元素爆発レベル"],s="元素爆発ダメージ",i=t["元素"],a["元素爆発"]=ne(t["元素爆発"],l,s,i,r,c,o),a["その他"]=[],"その他戦闘天賦"in t&&t["その他戦闘天賦"].forEach((e=>{const t=ne(e,null,null,null,r,c,o);t.length>0&&a["その他"].push(...t)})),t["固有天賦"].forEach((e=>{const t=ne(e,null,null,null,r,c,o);t.length>0&&a["その他"].push(...t)})),"命ノ星座"in t&&Object.keys(t["命ノ星座"]).forEach((l=>{if(Number(l)>e.命ノ星座)return;n=t["命ノ星座"][l];const s=ne(n,null,null,null,r,c,o);s.length>0&&a["その他"].push(...s)})),"風"==t["元素"]&&(0==c.filter((e=>e.条件&&e.条件.startsWith("拡散@"))).length&&["炎元素","水元素","雷元素","氷元素"].forEach((e=>{c.push({"名前":null,"種類":"固有変数","元素":null,"数値":null,"条件":"拡散@"+e,"対象":null,"上限":null,"HIT数":null,"ダメージバフ":null,"元素付与無効":null,"除外条件":null,"適用条件":null})})),"オプション初期値"in t?0==Object.keys(t["オプション初期値"]).filter((e=>"拡散"==e)).length&&(t["オプション初期値"]["拡散"]=1):t["オプション初期値"]={"拡散":1}),a[B]=r,a[J]=c;const u=new Map,d=new Map;return r.filter((e=>e["条件"])).forEach((e=>{se(e["条件"],u,d)})),c.filter((e=>e["条件"])).forEach((e=>{se(e["条件"],u,d)})),u.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(t,["",...e]))})),a["条件"]=u,a["排他"]=d,e.damageDetailMyCharacter=a,a}catch(t){throw console.error(e),t}}function G(e){try{const t=e.weapon,a=e.weaponMaster,n={};if(!t||!a)return n;let s;const i=e.武器精錬ランク,o="武器",r=[],c=[];"武器スキル"in a&&(s=a["武器スキル"],n["その他"]=ne(s,i,null,null,r,c,o)),n[B]=r,n[J]=c;const u=new Map,d=new Map;return r.filter((e=>e["条件"])).forEach((e=>{let t=e["条件"];(0,l.PO)(t)&&i in t&&(t=t[i]),se(t,u,d)})),c.filter((e=>e["条件"])).forEach((e=>{let t=e["条件"];(0,l.PO)(t)&&i in t&&(t=t[i]),se(t,u,d)})),u.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(t,["",...e]))})),n["条件"]=u,n["排他"]=d,e.damageDetailMyWeapon=n,n}catch(t){throw console.error(e),t}}function Q(e){try{const t=[];let a;const n="聖遺物セット効果",l=[],s=[],i=e.artifactSetMasters.filter((e=>e));if(i.length>0){const e=[];"2セット効果"in i[0]&&(a=i[0]["2セット効果"],e.push(...ne(a,null,null,null,l,s,n))),2==i.length&&(i[0]==i[1]?(a=i[0]["4セット効果"],e.push(...ne(a,null,null,null,l,s,n))):(a=i[1]["2セット効果"],e.push(...ne(a,null,null,null,l,s,n)))),t["その他"]=e}t[B]=l,t[J]=s;const o=new Map,r=new Map;return l.filter((e=>e["条件"])).forEach((e=>{se(e["条件"],o,r)})),s.filter((e=>e["条件"])).forEach((e=>{se(e["条件"],o,r)})),o.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||o.set(t,["",...e]))})),t["条件"]=o,t["排他"]=r,e.damageDetailMyArtifactSets=t,t}catch(t){throw console.error(e),t}}function ee(e){try{const t=[],a="元素共鳴",s=[],i=[],o=[];for(const e of n.TG){const t=(0,l.X8)(e);t.詳細&&t.詳細.forEach((t=>{t.名前=e.key})),s.push(...ne(t,null,null,null,i,o,a))}t["その他"]=s,t[B]=i,t[J]=o;const r=new Map,c=new Map;i.filter((e=>e["条件"])).forEach((e=>{se(e["条件"],r,c)})),o.filter((e=>e["条件"])).forEach((e=>{se(e["条件"],r,c)})),r.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||r.set(t,["",...e]))})),t["条件"]=r,t["排他"]=c,e.damageDetailElementalResonance=t}catch(t){throw console.error(e),t}}const te=function(e,t,a,s,i,o){let r="種類"in e?e["種類"]:a,c=null;-1!=r.indexOf(".")?(c=r.substring(r.indexOf(".")+1),r=r.substring(0,r.indexOf("."))):"対象"in e&&(c=e["対象"]);let u=null;"数値"in e&&(u=e["数値"],(0,l.hj)(u)||(0,l.HD)(u)||((0,l.PO)(u)&&t&&t in u?u=u[t]:console.error(e,t,a,s,u)),u=n.vN.includes(r+"ダメージ")||r.endsWith("ダメージ")?pe(u,"攻撃力"):pe(u,r));let d=null;d="条件"in e?(0,l.PO)(e["条件"])&&t&&t in e["条件"]?e["条件"][t]:e["条件"]:o??null;let p=null;"上限"in e&&(p=e["上限"],(0,l.PO)(p)&&t&&t in p&&(p=p[t]),p=pe(p));let f=null;"下限"in e&&(f=e["下限"],(0,l.PO)(f)&&t&&t in f&&(f=f[t]),f=pe(f));const m={"名前":e["名前"],"種類":r,"元素":"元素"in e?e["元素"]:s,"数値":u,"条件":d,"対象":c,"上限":p,"下限":f,"HIT数":"HIT数"in e?e["HIT数"]:null,"ダメージバフ":"ダメージバフ"in e?e["ダメージバフ"]:null,"元素付与無効":"元素付与無効"in e?e["元素付与無効"]:"武器"==i,"除外条件":"除外条件"in e?e["除外条件"]:null,"適用条件":"適用条件"in e?e["適用条件"]:null};return m};function ae(e){return e in w||new RegExp("[自全].+(バフ|アップ)").exec(e)||new RegExp("敵?[自全]元素耐性").exec(e)||["別枠乗算","回復量アップ"].includes(e)||["敵防御力"].includes(e)||["発動回数","使用回数"].includes(e)||["攻撃速度","通常攻撃速度","移動速度"].includes(e)||e.endsWith("継続時間")||e.endsWith("クールタイム")||e.endsWith("会心率")||e.endsWith("会心ダメージ")?"STATUS":e.endsWith("強化")||e.endsWith("付与")||"防御無視"==e||"固有変数"==e?"TALENT":void 0}const ne=function(e,t,a,n,l,s,i,o){const r=[];return"詳細"in e?(e["詳細"].forEach((e=>{const c=te(e,t,a,n,i,o),u=c.種類;return null!=l&&"STATUS"==ae(u)?(c["元素"]="元素"in e?e["元素"]:null,void l.push(c)):null!=s&&"TALENT"==ae(u)?(c["元素"]="元素"in e?e["元素"]:null,void s.push(c)):void r.push(c)})),r):r},le=function(e){const t=[];return e.forEach((e=>{const a=te(e,null,null,null,null);a&&t.push(a)})),t},se=function(e,t,a){let n=null,l=e.split("^");l.length>1&&(n=l[1]);const s=l[0];-1!=s.indexOf("|")?(l=s.split("|"),l.forEach((e=>{ie(e,t,a,n)}))):(l=s.split("&"),l.forEach((e=>{ie(e,t,a,n)})))};function ie(e,t,a,n){const l=e.split(/[@=]/),s=l[0];if(1==l.length)re(t,s,null);else if(2==l.length)if(-1!=l[1].indexOf(",")){const e=new RegExp("([^0-9]*?)([\\+\\-0-9\\.,]+)(.*)"),a=e.exec(l[1]);if(a){const e=a[1],n=a[2].split(","),l=a[3];n.forEach((a=>{re(t,s,e+a+l)}))}}else if(-1!=l[1].indexOf("-")){const e=new RegExp("([^0-9\\.]*)(-?[0-9\\.]+)-(-?[0-9\\.]+)(.*)"),a=new RegExp("/([0-9\\.]+)(.*)"),n=e.exec(l[1]);if(n){const e=n[1],l=Number(n[2]),i=Number(n[3]);let o=l,r=n[4];if(r){const e=a.exec(r);e&&(o=Number(e[1]),r=e[2])}for(let a=l;a<i;a=de(a,o,i))re(t,s,e+String(a)+r);re(t,s,e+String(i)+r)}else re(t,s,l[1])}else re(t,s,l[1]);else console.error(e,t,a);n&&n.split(",").forEach((e=>{re(a,s,e)}))}function oe(e,t,a){try{const l=e.conditionValues,s=e.checkboxList,i=e.selectList;s.splice(0,s.length),i.splice(0,i.length);const o=[t.characterMaster,t.weaponMaster,...t.artifactSetMasters];for(const e of o.filter((e=>e))){if("オプション初期値"in e)for(const t of Object.keys(e["オプション初期値"]))t in l||(l[t]=e["オプション初期値"][t]);if("4セット効果"in e&&"オプション初期値"in e["4セット効果"])for(const t of Object.keys(e["4セット効果"]["オプション初期値"]))t in l||(l[t]=e["4セット効果"]["オプション初期値"][t])}for(const e of[t.damageDetailMyCharacter,t.damageDetailMyWeapon,t.damageDetailMyArtifactSets])if(e){const t=e.条件,a=e.排他;t.forEach(((e,n)=>{if(null==e)0==s.filter((e=>e.name==n)).length&&s.push({name:n});else if(0==i.filter((e=>e.name==n)).length){const t=e[0].startsWith("required_");i.push({name:n,options:e,required:t})}if(n in l&&null!=l[n]){const e=a.get(n);if(e)for(const a of e)if(a in l){const e=t.get(a);void 0!==e&&(l[a]=null!==e&&0)}}else if(null===e){let e=!0;const t=a.get(n);t&&t.filter((e=>l[e])).length>0&&(e=!1),l[n]=e}else{let t=e.length-1;const s=a.get(n);s&&s.filter((e=>l[e])).length>0&&(t=0),l[n]=t}}))}if(a.elementalResonance){const e=new Map,t=new Map;for(const l of Object.keys(n._9)){if(!a.elementalResonance.conditionValues[l])continue;const s=n._9[l];if(s.詳細)for(const a of s.詳細)a.条件&&se(a.条件,e,t)}e.forEach(((a,n)=>{if(null==a)0==s.filter((e=>e.name==n)).length&&s.push({name:n});else if(0==i.filter((e=>e.name==n)).length){const e=a[0].startsWith("required_");i.push({name:n,options:a,required:e})}if(n in l&&null!=l[n]){const a=t.get(n);if(a)for(const t of a)if(t in l){const a=e.get(t);void 0!==a&&(l[t]=null!==a&&0)}}else if(null===a){let e=!0;const a=t.get(n);a&&a.filter((e=>l[e])).length>0&&(e=!1),l[n]=e}else{let e=a.length-1;const s=t.get(n);s&&s.filter((e=>l[e])).length>0&&(e=0),l[n]=e}}))}}catch(l){throw console.error(e,t),l}}function re(e,t,a){if(null==a)e.has(t)||e.set(t,null);else if(e.has(t)){const n=e.get(t);null==n?e.set(t,[a]):n.includes(a)||e.get(t).push(a)}else e.set(t,[a])}function ce(e){const t=(""+e).split(".");return t.length>1?t[1].length:0}function ue(e,t){const a=ce(e)+ce(t),n=Number((""+e).replace(".","")),l=Number((""+t).replace(".","")),s=n*l/Math.pow(10,a);return Number(s)}function de(e,t,a){const n=Math.pow(10,Math.max(ce(e),ce(t)));let l=(ue(e,n)+ue(t,n))/n;return void 0!=a&&(l=Math.min(l,a)),l}const pe=function(e,t=null){const a=[],n=new RegExp("([\\+\\-\\*/]?)([^\\+\\-\\*/]+)(.*)");let l=String(e);while(1){const e=n.exec(l);if(!e){a.push(l);break}if(e[1]&&a.push(e[1]),a.push(fe(e[2],t)),!e[3])break;l=e[3]}return a};function fe(e,t=null){const a=[];if((0,l.hj)(e))a.push(Number(e));else{const n=e.split("%");1==n.length?a.push(n[0]):(a.push(Number(n[0])/100),a.push("*"),n[1].length>0?a.push(n[1]):null!=t&&a.push(t))}return a}function me(e){const t=[];let a,s;return n.PW.forEach(((i,o)=>{let r,c=e[o];switch(o){case"キャラクター":a=c,r=(0,l.EZ)(n.bw[a]["import"]),c=r.split("_")[r.split("_").length-1];break;case"武器":s=n.bw[a]["武器"],r=(0,l.EZ)(n.Nd[s][c]["import"]),c=r.split("_")[r.split("_").length-1];break;case"聖遺物セット効果1":case"聖遺物セット効果2":"NONE"==c?c="":(r=(0,l.EZ)(n.oN[c]["image"]),c=r.split("_")[r.split("_").length-1]);break;case"聖遺物メイン効果1":case"聖遺物メイン効果2":case"聖遺物メイン効果3":case"聖遺物メイン効果4":case"聖遺物メイン効果5":c&&(c=c.split("_")[0]+"_"+n.Kl.get(c.split("_")[1]));break;case"聖遺物優先するサブ効果1":case"聖遺物優先するサブ効果2":case"聖遺物優先するサブ効果3":c&&(c=n.Kl.get(c));break}t.push(c)})),Object.keys(e).forEach((a=>{n.PW.has(a)||t.push(a+"="+e[a])})),t.join(",")}function he(e,t,a,n){const l="https://twitter.com/intent/tweet?",s=new URLSearchParams;s.append("text",e),s.append("url",t),a&&s.append("hashtags",a),n&&s.append("via",n);const i=s.toString(),o=`${l}${i}`;console.log(s),console.log(o),window.open(o)}function ge(e,t,a){const n=X(e,t,a),l=me(n),s=e.buildname,i=encodeURI(l),o="https://asagume.github.io/gencalc/?allin="+i;he(s,o)}function ye(e){let t=0;return"命ノ星座"in e&&(t=Object.keys(e.命ノ星座).length),t}function be(e,t){let a=10;if(t in e){const n=e[t];if("詳細"in n)for(const e of n.詳細)if("数値"in e&&(0,l.PO)(e.数値)){const t=Object.keys(e.数値).length;a<t&&(a=t)}}return a}function we(){const e=[void 0,void 0,void 0],t=sessionStorage.getItem("character");if(t){e[0]=t;const a=sessionStorage.getItem("buildname");a&&(e[1]=a);const n=sessionStorage.getItem("builddata");n&&(e[2]=JSON.parse(n))}return sessionStorage.removeItem("character"),sessionStorage.removeItem("buildname"),sessionStorage.removeItem("builddata"),e}},3920:function(e,t,a){var n=a(9242),l=a(3396),s=a(7139);const i=e=>((0,l.dD)("data-v-46554518"),e=e(),(0,l.Cn)(),e),o={class:"base-container"},r={class:"pane1"},c={class:"pane2"},u={class:"pane3",style:{"margin-bottom":"15px"}},d={class:"pane4"},p={class:"pane6"},f={class:"toggle-switch",for:"pane6-toggle-1"},m={class:"toggle-switch",for:"pane6-toggle-2"},h={class:"toggle-switch",for:"pane6-toggle-3"},g={key:0,style:{"margin-bottom":"10px"}},y={key:1,style:{"margin-bottom":"10px"}},b={class:"tab-switch"},w={for:"status-input-tab-1"},_={for:"status-input-tab-2"},v={for:"status-input-tab-3"},k={class:"enemy"},S=["value"],C={class:"enemy-level"},O={key:2,style:{"margin-bottom":"10px"}},D={class:"tab-switch"},R={for:"option-input-tab-1"},N={for:"option-input-tab-2"},V={for:"option-input-tab-3"},M={class:"result-pane"},j={class:"pane5"},H={class:"bottom-pane"},A={class:"toggle-switch no-border",for:"own-list-toggle-1"},I={class:"toggle-switch no-border",for:"own-list-toggle-2"},z=i((()=>(0,l._)("hr",null,null,-1))),L=["disabled"],E={class:"pane7"},U=i((()=>(0,l._)("hr",null,null,-1))),q=i((()=>(0,l._)("div",{class:"footer"},[(0,l._)("hr"),(0,l._)("p",null,"© 2021 asagume"),(0,l._)("p",{class:"left"}," 本サイト内の画像はHoYoverse/COGNOSPHEREの著作物です。 Copyright © COGNOSPHERE. All Rights Reserved. ")],-1)));function T(e,t,a,i,T,P){const Y=(0,l.up)("TitleAndHeader"),x=(0,l.up)("CharacterSelect"),W=(0,l.up)("CharacterInput"),K=(0,l.up)("CharacterInfo"),F=(0,l.up)("WeaponSelect"),X=(0,l.up)("ArtifactSetSelect"),Z=(0,l.up)("ArtifactDetailInput"),B=(0,l.up)("ArtifactScoreFormula"),J=(0,l.up)("ConditionInput"),$=(0,l.up)("StatsInput"),G=(0,l.up)("ElementalResonanceInput"),Q=(0,l.up)("TeamOptionInput"),ee=(0,l.up)("MiscOptionInput"),te=(0,l.up)("DamageResult"),ae=(0,l.up)("RotationDamage"),ne=(0,l.up)("ShareSns"),le=(0,l.up)("CharacterOwnList"),se=(0,l.up)("WeaponOwnList"),ie=(0,l.up)("AboutMyApp"),oe=(0,l.up)("ConfigurationInput");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",o,[(0,l._)("div",r,[(0,l.Wm)(Y)]),(0,l._)("div",c,[(0,l.Wm)(x,{character:e.characterInputRea.character,visible:e.characterSelectVisibleRef,"onUpdate:character":t[0]||(t[0]=t=>e.updateCharacter(t))},null,8,["character","visible"])]),(0,l._)("div",u,[(0,l.Wm)(W,{ref:"characterInputVmRef",characterInput:e.characterInputRea,recommendationList:e.recommendationListRea,recommendation:e.recommendationRef,artifactSetSelectVisible:e.artifactSetSelectVisibleRef,artifactScore:e.artifactScore,"onOpen:characterSelect":t[1]||(t[1]=t=>e.characterSelectVisibleRef=!e.characterSelectVisibleRef),onSaveToStorage:t[2]||(t[2]=t=>e.saveToStorage(t)),onRemoveFromStorage:t[3]||(t[3]=t=>e.removeFromStorage(t)),"onUpdate:recommendation":t[4]||(t[4]=t=>e.updateRecommendation(t)),"onOpen:weaponSelect":e.openWeaponSelect,"onOpen:artifactSetSelect":t[5]||(t[5]=t=>e.openArtifactSetSelect(t)),"onOpen:artifactDetailInput":e.openArtifactDetailInput,"onUpdate:characterInputCharacter":t[6]||(t[6]=t=>e.updateCharacterInputCharacter(t)),"onUpdate:characterInputWeapon":t[7]||(t[7]=t=>e.updateCharacterInputWeapon(t)),"onOpen:characterInfo":t[8]||(t[8]=t=>e.openCharacterInfo(t))},null,8,["characterInput","recommendationList","recommendation","artifactSetSelectVisible","artifactScore","onOpen:weaponSelect","onOpen:artifactDetailInput"])]),(0,l._)("div",d,[(0,l.Wm)(K,{visible:e.characterInfoVisibleRef,mode:e.characterInfoModeRef,characterMaster:e.characterInputRea.characterMaster,ascension:e.characterInputRea.突破レベル,level:e.characterInputRea.レベル,normalAttackLevel:e.characterInputRea.通常攻撃レベル,elementalSkillLevel:e.characterInputRea.元素スキルレベル,elementalBurstLevel:e.characterInputRea.元素爆発レベル,normalAttackReplacing:e.normalAttackReplacing},null,8,["visible","mode","characterMaster","ascension","level","normalAttackLevel","elementalSkillLevel","elementalBurstLevel","normalAttackReplacing"]),(0,l.Wm)(F,{visible:e.weaponSelectVisibleRef,weapon:e.characterInputRea.weapon,weaponType:e.weaponType,weaponMaster:e.characterInputRea.weaponMaster,ascension:e.characterInputRea.武器突破レベル,level:e.characterInputRea.武器レベル,"onUpdate:weapon":t[9]||(t[9]=t=>e.updateWeapon(t))},null,8,["visible","weapon","weaponType","weaponMaster","ascension","level"]),(0,l.Wm)(X,{visible:e.artifactSetSelectVisibleRef,index:e.artifactSetIndexRef,artifactSet:e.artifactSets[e.artifactSetIndexRef],artifactSetMasters:e.characterInputRea.artifactSetMasters,"onUpdate:artifactSet":t[10]||(t[10]=t=>e.updateArtifactSet(t))},null,8,["visible","index","artifactSet","artifactSetMasters"]),(0,l.Wm)(Z,{ref:"artifactDetailInputVmRef",visible:e.artifactDetailInputVisibleRef,artifactDetailInput:e.artifactDetailInputRea,"onUpdate:artifactDetail":t[11]||(t[11]=t=>e.updateArtifactDetail(t))},null,8,["visible","artifactDetailInput"]),(0,l.Wm)(B,{ref:"artifactScoreFormulaVmRef",visible:e.artifactDetailInputVisibleRef,"onApply:formula":e.applyArtifactScoreFormula},null,8,["visible","onApply:formula"])]),(0,l._)("div",p,[(0,l._)("div",null,[(0,l.wy)((0,l._)("input",{class:"hidden",id:"pane6-toggle-1",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=t=>e.pane6Toggle1Ref=t)},null,512),[[n.e8,e.pane6Toggle1Ref]]),(0,l._)("label",f,(0,s.zw)(e.displayName("オプション条件")),1),(0,l.wy)((0,l._)("input",{class:"hidden",id:"pane6-toggle-2",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=t=>e.pane6Toggle2Ref=t)},null,512),[[n.e8,e.pane6Toggle2Ref]]),(0,l._)("label",m,(0,s.zw)(e.displayName("ステータス")),1),(0,l.wy)((0,l._)("input",{class:"hidden",id:"pane6-toggle-3",type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=t=>e.pane6Toggle3Ref=t)},null,512),[[n.e8,e.pane6Toggle3Ref]]),(0,l._)("label",h,(0,s.zw)(e.displayName("バフ/デバフ")),1)]),e.pane6Toggle1Ref?((0,l.wg)(),(0,l.iD)("div",g,[(0,l.Wm)(J,{ref:"conditionInputVmRef",characterInput:e.characterInputRea,conditionInput:e.conditionInputRea,conditionAdjustments:e.conditionInputRea.conditionAdjustments,"onUpdate:condition":e.updateCondition},null,8,["characterInput","conditionInput","conditionAdjustments","onUpdate:condition"])])):(0,l.kq)("",!0),e.pane6Toggle2Ref?((0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("div",b,[(0,l.wy)((0,l._)("input",{id:"status-input-tab-1",type:"radio",value:"1","onUpdate:modelValue":t[15]||(t[15]=t=>e.statInputTabRef=t)},null,512),[[n.G2,e.statInputTabRef]]),(0,l._)("label",w,(0,s.zw)(e.displayName("ステータス1")),1),(0,l.wy)((0,l._)("input",{id:"status-input-tab-2",type:"radio",value:"2","onUpdate:modelValue":t[16]||(t[16]=t=>e.statInputTabRef=t)},null,512),[[n.G2,e.statInputTabRef]]),(0,l._)("label",_,(0,s.zw)(e.displayName("ステータス2")),1),(0,l.wy)((0,l._)("input",{id:"status-input-tab-3",type:"radio",value:"3","onUpdate:modelValue":t[17]||(t[17]=t=>e.statInputTabRef=t)},null,512),[[n.G2,e.statInputTabRef]]),(0,l._)("label",v,(0,s.zw)(e.displayName("敵")),1)]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)($,{statsInput:e.statsInput,category1List:e.characterStats1Category1List,category2List:e.characterStats1Category2List,"onUpdate:statAdjustments":t[18]||(t[18]=t=>e.updateStatAdjustments(t))},null,8,["statsInput","category1List","category2List"])],512),[[n.F8,1==e.statInputTabRef]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)($,{statsInput:e.statsInput,category1List:e.characterStats2Category1List,category2List:e.characterStats2Category2List,"onUpdate:statAdjustments":t[19]||(t[19]=t=>e.updateStatAdjustments(t))},null,8,["statsInput","category1List","category2List"])],512),[[n.F8,2==e.statInputTabRef]]),(0,l.wy)((0,l._)("div",null,[(0,l._)("label",k,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[20]||(t[20]=t=>e.selectedEnemyRef=t),onChange:t[21]||(t[21]=(...t)=>e.updateEnemy&&e.updateEnemy(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.enemyList,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t,key:t.key},(0,s.zw)(e.displayName(t.key)),9,S)))),128))],544),[[n.bM,e.selectedEnemyRef]])]),(0,l._)("label",C,[(0,l.Uk)("Lv. "),(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t[22]||(t[22]=t=>e.statsInput.statAdjustments["敵レベル"]=t),min:"1",onChange:t[23]||(t[23]=(...t)=>e.updateStatAdjustments&&e.updateStatAdjustments(...t))},null,544),[[n.nr,e.statsInput.statAdjustments["敵レベル"]]])]),(0,l.Wm)($,{statsInput:e.statsInput,category1List:e.enemyStatsCategory1List,category2List:e.enemyStatsCategory2List,"onUpdate:statAdjustments":t[24]||(t[24]=t=>e.updateStatAdjustments(t))},null,8,["statsInput","category1List","category2List"])],512),[[n.F8,3==e.statInputTabRef]])])):(0,l.kq)("",!0),e.pane6Toggle3Ref?((0,l.wg)(),(0,l.iD)("div",O,[(0,l._)("div",D,[(0,l.wy)((0,l._)("input",{id:"option-input-tab-1",type:"radio",value:"1","onUpdate:modelValue":t[25]||(t[25]=t=>e.optionInputTabRef=t)},null,512),[[n.G2,e.optionInputTabRef]]),(0,l._)("label",R,(0,s.zw)(e.displayName("元素共鳴")),1),(0,l.wy)((0,l._)("input",{id:"option-input-tab-2",type:"radio",value:"2","onUpdate:modelValue":t[26]||(t[26]=t=>e.optionInputTabRef=t)},null,512),[[n.G2,e.optionInputTabRef]]),(0,l._)("label",N,(0,s.zw)(e.displayName("チーム")),1),(0,l.wy)((0,l._)("input",{id:"option-input-tab-3",type:"radio",value:"3","onUpdate:modelValue":t[27]||(t[27]=t=>e.optionInputTabRef=t)},null,512),[[n.G2,e.optionInputTabRef]]),(0,l._)("label",V,(0,s.zw)(e.displayName("その他")),1)]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(G,{ref:"elementalResonanceInputVmRef",elementalResonance:e.optionInputRea.elementalResonance,"onUpdate:elementalResonance":e.updateElementalResonance},null,8,["elementalResonance","onUpdate:elementalResonance"])],512),[[n.F8,1==e.optionInputTabRef]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(Q,{ref:"teamOptionInputVmRef",character:e.characterInputRea.character,savedSupporters:e.savedSupporters,elementalResonance:e.optionInputRea.elementalResonance.conditionValues,"onUpdate:teamOption":e.updateTeamOption,"onUpdate:buildnameSelection":e.updateBuildnameSelection},null,8,["character","savedSupporters","elementalResonance","onUpdate:teamOption","onUpdate:buildnameSelection"])],512),[[n.F8,2==e.optionInputTabRef]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(ee,{ref:"miscOptionInputVmRef","onUpdate:miscOption":e.updateMiscOption},null,8,["onUpdate:miscOption"])],512),[[n.F8,3==e.optionInputTabRef]])])):(0,l.kq)("",!0)]),(0,l._)("div",M,[(0,l.Wm)(te,{damageResult:e.damageResult},null,8,["damageResult"])]),(0,l._)("div",j,[(0,l.Wm)(ae,{characterMaster:e.characterInputRea.characterMaster,damageResult:e.damageResult},null,8,["characterMaster","damageResult"]),(0,l.Wm)(ne,{"onShare:twitter":e.openTwitter},null,8,["onShare:twitter"])]),(0,l._)("div",H,[(0,l._)("h2",null,[(0,l.wy)((0,l._)("input",{class:"hidden",id:"own-list-toggle-1",type:"checkbox","onUpdate:modelValue":t[28]||(t[28]=t=>e.ownListToggle1Ref=t)},null,512),[[n.e8,e.ownListToggle1Ref]]),(0,l._)("label",A,(0,s.zw)(e.displayName("キャラクター所持状況")),1)]),e.ownListToggle1Ref?((0,l.wg)(),(0,l.j4)(le,{key:0})):(0,l.kq)("",!0),(0,l._)("h2",null,[(0,l.wy)((0,l._)("input",{class:"hidden",id:"own-list-toggle-2",type:"checkbox","onUpdate:modelValue":t[29]||(t[29]=t=>e.ownListToggle2Ref=t)},null,512),[[n.e8,e.ownListToggle2Ref]]),(0,l._)("label",I,(0,s.zw)(e.displayName("武器所持状況")),1)]),e.ownListToggle2Ref?((0,l.wg)(),(0,l.j4)(se,{key:1})):(0,l.kq)("",!0),z,(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[30]||(t[30]=t=>e.enableClearLocalStorage=t)},null,512),[[n.e8,e.enableClearLocalStorage]]),(0,l._)("span",null,(0,s.zw)(e.displayName("ローカルストレージをクリアする")),1)]),(0,l._)("button",{type:"button",onClick:t[31]||(t[31]=(...t)=>e.clearLocalStorage&&e.clearLocalStorage(...t)),disabled:!e.enableClearLocalStorage},(0,s.zw)(e.displayName("実行")),9,L),(0,l._)("p",null,(0,s.zw)(e.displayName("全ての保存データを削除します")),1)]),(0,l._)("div",E,[(0,l.Wm)(ie),(0,l.Wm)(oe,{configurationInput:e.configurationInputRea,"onUpdate:configurationInput":e.updateConfigurationInput,"onOrder:initializeArtifactStatsSub":e.orderInitializeArtifactStatsSub},null,8,["configurationInput","onUpdate:configurationInput","onOrder:initializeArtifactStatsSub"])]),U,q]),(0,l.kq)("",!0)],64)}a(7658);var P=a(4870);const Y=(0,l.uE)('<p data-v-7a16f281><a href="ArtifactSetList.html" data-v-7a16f281>聖遺物セット効果一覧</a><a href="BirthdayCalendar.html" data-v-7a16f281>誕生日カレンダー</a></p><p data-v-7a16f281><a href="WeaponList.html?kind=Sword" data-v-7a16f281>片手剣一覧</a><a href="WeaponList.html?kind=Claymore" data-v-7a16f281>両手剣一覧</a><a href="WeaponList.html?kind=Polearm" data-v-7a16f281>長柄武器一覧</a><a href="WeaponList.html?kind=Bow" data-v-7a16f281>弓一覧</a><a href="WeaponList.html?kind=Catalyst" data-v-7a16f281>法器一覧</a></p><p data-v-7a16f281><a href="RandomTeam.html" data-v-7a16f281>ランダムチーム編成メーカー</a><a href="HoYoDictionary.html" data-v-7a16f281>原神の辞書</a></p><p data-v-7a16f281><a href="EnkaNetwork3.html" data-v-7a16f281>DATA IMPORTER</a><a href="TeamManager.html" data-v-7a16f281>チーム編成</a><a href="index2.html" data-v-7a16f281>旧バージョン(V2)</a></p><div class="top-left" data-v-7a16f281><a href="history.html" data-v-7a16f281>更新履歴</a></div><div class="top-right" data-v-7a16f281><a href="https://zawazawa.jp/gencalc/topic/1" target="_blank" rel="noopener noreferrer" data-v-7a16f281>バグ報告·要望</a></div><div class="bottom-left" data-v-7a16f281><a href="RotationVisualizer.html" data-v-7a16f281>げんろーて</a></div>',7),x={class:"bottom-right"},W=["value"];function K(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)("fieldset",null,[(0,l._)("legend",null,"げんかるく - 原神ダメージシミュレーター Ver."+(0,s.zw)(e.version),1),Y,(0,l._)("label",x,[(0,l.Uk)(" Language "),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.locale=t),onChange:t[1]||(t[1]=t=>e.localeOnChange(e.targetValue(t)))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.localeList,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e.value,key:e.value},(0,s.zw)(e.name),9,W)))),128))],544),[[n.bM,e.locale]])])])}var F=a(5658),X=a(589),Z=(0,l.aZ)({name:"TitleAndHeader",setup(){const{locale:e}=(0,F.QT)({useScope:"global"}),{localeList:t,setI18nLanguage:n,displayName:l,targetValue:s}=(0,X.Z)(),i=e=>{e&&n(e)};return{locale:e,localeList:t,displayName:l,targetValue:s,localeOnChange:i,version:a(4147).i8}}}),B=a(89);const J=(0,B.Z)(Z,[["render",K],["__scopeId","data-v-7a16f281"]]);var $=J,G=a(7167);const Q=e=>((0,l.dD)("data-v-04ab752c"),e=e(),(0,l.Cn)(),e),ee=Q((()=>(0,l._)("span",{class:"material-symbols-outlined"}," info ",-1))),te={style:{width:"20%"}},ae=["value"],ne=["value"],le=["value"],se={style:{position:"relative",width:"30%"}},ie=["src","alt"],oe=["src","alt"],re={class:"icon"},ce=["src","alt"],ue={class:"tooltip"},de={style:{width:"20%"}},pe=["value"],fe=["value"],me=["value"],he={class:"talent-and-artifact"},ge={class:"icon"},ye=["src","alt"],be={class:"tooltip"},we={class:"icon"},_e=["src","alt"],ve={class:"tooltip"},ke={class:"icon"},Se=["src","alt"],Ce={class:"tooltip"},Oe={class:"icon"},De=["src","alt"],Re={class:"tooltip"},Ne={class:"icon"},Ve=["src","alt"],Me={class:"tooltip"},je={class:"artifact-detail-button icon"},He=["src","alt"],Ae=Q((()=>(0,l._)("img",{class:"left-icon",src:"images/artifact.png",alt:"artifact"},null,-1))),Ie=Q((()=>(0,l._)("img",{class:"right-icon",src:"images/artifact.png",alt:"artifact"},null,-1))),ze={class:"artifact-score"},Le=Q((()=>(0,l._)("br",null,null,-1))),Ee={class:"tooltip"},Ue=["value"],qe=["value"],Te=["value"],Pe={style:{"table-layout":"fixed"}},Ye=Q((()=>(0,l._)("td",null,"buildname",-1))),xe={colspan:"3"},We=["disabled"],Ke=["disabled"],Fe={colspan:"6"},Xe=["value"];function Ze(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("table",null,[(0,l._)("tr",null,[(0,l._)("td",{class:(0,s.C_)("name "+e.colorClass(e.characterMaster)),colspan:"2"},[(0,l._)("span",{onClick:t[0]||(t[0]=t=>e.$emit("open:character-info",1))},[(0,l.Uk)((0,s.zw)(e.displayName(e.characterMaster.名前))+" ",1),ee])],2),(0,l._)("td",{colspan:"2",class:(0,s.C_)("title "+e.colorClass(e.characterMaster))},[(0,l.wy)((0,l._)("span",null,(0,s.zw)(e.displayName(e.characterMaster.baseInfo.称号)),513),[[n.F8,e.characterMaster.baseInfo.称号]])],2)]),(0,l._)("tr",null,[(0,l._)("td",te,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.characterInputRea.突破レベル=t),onChange:t[2]||(t[2]=(...t)=>e.ascensionOnChange&&e.ascensionOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.ascensionRange,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e}," A"+(0,s.zw)(e),9,ae)))),128))],544),[[n.bM,e.characterInputRea.突破レベル]]),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.characterInputRea.レベル=t),onChange:t[4]||(t[4]=(...t)=>e.characterOnChange&&e.characterOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.levelRange,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e}," Lv."+(0,s.zw)(e),9,ne)))),128))],544),[[n.bM,e.characterInputRea.レベル]]),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.characterInputRea.命ノ星座=t),onChange:t[6]||(t[6]=(...t)=>e.characterOnChange&&e.characterOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.constellationRange,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e}," C"+(0,s.zw)(e),9,le)))),128))],544),[[n.bM,e.characterInputRea.命ノ星座]])]),(0,l._)("td",se,[(0,l._)("img",{class:(0,s.C_)("character"+e.bgImageClass(e.characterMaster)),src:e.characterMaster.icon_url,alt:e.characterMaster.名前,onClick:t[7]||(t[7]=t=>e.$emit("open:character-select"))},null,10,ie),(0,l._)("img",{class:"vision",src:e.visionSrc(e.characterMaster),alt:e.characterMaster.元素},null,8,oe)]),(0,l._)("td",re,[(0,l._)("img",{class:(0,s.C_)("weapon"+e.bgImageClass(e.weaponMaster)),src:e.weaponMaster["icon_url"],alt:e.weaponMaster.名前,onClick:t[8]||(t[8]=t=>e.$emit("open:weapon-select"))},null,10,ce),(0,l._)("div",ue,(0,s.zw)(e.displayName(e.weaponMaster.名前)),1)]),(0,l._)("td",de,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[9]||(t[9]=t=>e.characterInputRea.武器突破レベル=t),onChange:t[10]||(t[10]=(...t)=>e.weaponAscensionOnChange&&e.weaponAscensionOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.weaponAscensionRange,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e}," A"+(0,s.zw)(e),9,pe)))),128))],544),[[n.bM,e.characterInputRea.武器突破レベル]]),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[11]||(t[11]=t=>e.characterInputRea.武器レベル=t),onChange:t[12]||(t[12]=(...t)=>e.weaponOnChange&&e.weaponOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.weaponLevelRange,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e}," Lv."+(0,s.zw)(e),9,fe)))),128))],544),[[n.bM,e.characterInputRea.武器レベル]]),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[13]||(t[13]=t=>e.characterInputRea.武器精錬ランク=t),onChange:t[14]||(t[14]=(...t)=>e.weaponOnChange&&e.weaponOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.weaponRefineRange,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e}," R"+(0,s.zw)(e),9,me)))),128))],544),[[n.bM,e.characterInputRea.武器精錬ランク]])])])]),(0,l._)("table",he,[(0,l._)("tr",null,[(0,l._)("td",ge,[(0,l._)("img",{class:(0,s.C_)("talent "+e.bgColorClass(e.characterMaster)),src:e.characterMaster["通常攻撃"]["icon_url"],alt:e.characterMaster["通常攻撃"]["名前"],onClick:t[15]||(t[15]=t=>e.$emit("open:character-info",2))},null,10,ye),(0,l._)("div",be,(0,s.zw)(e.displayName(e.characterMaster["通常攻撃"]["名前"])),1)]),(0,l._)("td",we,[(0,l._)("img",{class:(0,s.C_)("talent "+e.bgColorClass(e.characterMaster)),src:e.characterMaster["元素スキル"]["icon_url"],alt:e.characterMaster["元素スキル"]["名前"],onClick:t[16]||(t[16]=t=>e.$emit("open:character-info",3))},null,10,_e),(0,l._)("div",ve,(0,s.zw)(e.displayName(e.characterMaster["元素スキル"]["名前"])),1)]),(0,l._)("td",ke,[(0,l._)("img",{class:(0,s.C_)("talent "+e.bgColorClass(e.characterMaster)),src:e.characterMaster["元素爆発"]["icon_url"],alt:e.characterMaster["元素爆発"]["名前"],onClick:t[17]||(t[17]=t=>e.$emit("open:character-info",4))},null,10,Se),(0,l._)("div",Ce,(0,s.zw)(e.displayName(e.characterMaster["元素爆発"]["名前"])),1)]),(0,l._)("td",Oe,[(0,l._)("label",{onClick:t[18]||(t[18]=t=>e.openArtifactSetSelect(0))},[(0,l._)("img",{class:(0,s.C_)("artifact-set"+e.artifactSetSelectClass(0)),src:e.artifactSetMasters[0].image,alt:e.artifactSetMasters[0].key},null,10,De)]),(0,l._)("div",Re,(0,s.zw)(e.displayName(e.artifactSetMasters[0].key)),1)]),(0,l._)("td",Ne,[(0,l._)("label",{onClick:t[19]||(t[19]=t=>e.openArtifactSetSelect(1))},[(0,l._)("img",{class:(0,s.C_)("artifact-set"+e.artifactSetSelectClass(1)),src:e.artifactSetMasters[1].image,alt:e.artifactSetMasters[1].key},null,10,Ve)]),(0,l._)("div",Me,(0,s.zw)(e.displayName(e.artifactSetMasters[1].key)),1)]),(0,l._)("td",je,[(0,l._)("label",{onClick:t[20]||(t[20]=t=>e.$emit("open:artifact-detail-input"))},[(0,l._)("img",{class:"artifact-set",src:e.IMG_SRC_DUMMY,alt:e.displayName("聖遺物ステータス")},null,8,He),Ae,Ie,(0,l._)("div",ze,[(0,l.Uk)(" score "),Le,(0,l.Uk)(" "+(0,s.zw)(Math.round(e.artifactScore)),1)])]),(0,l._)("div",Ee,(0,s.zw)(e.displayName("聖遺物詳細")),1)])]),(0,l._)("tr",null,[(0,l._)("td",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[21]||(t[21]=t=>e.characterInputRea.通常攻撃レベル=t),onChange:t[22]||(t[22]=(...t)=>e.characterOnChange&&e.characterOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.normalAttackLevelRange,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e}," Lv."+(0,s.zw)(e),9,Ue)))),128))],544),[[n.bM,e.characterInputRea.通常攻撃レベル]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[23]||(t[23]=t=>e.characterInputRea.元素スキルレベル=t),onChange:t[24]||(t[24]=(...t)=>e.characterOnChange&&e.characterOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.elementalSkillLevelRange,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e}," Lv."+(0,s.zw)(e),9,qe)))),128))],544),[[n.bM,e.characterInputRea.元素スキルレベル]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[25]||(t[25]=t=>e.characterInputRea.元素爆発レベル=t),onChange:t[26]||(t[26]=(...t)=>e.characterOnChange&&e.characterOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.elementalBurstLevelRange,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e}," Lv."+(0,s.zw)(e),9,Te)))),128))],544),[[n.bM,e.characterInputRea.元素爆発レベル]])])])]),(0,l._)("table",Pe,[(0,l._)("tr",null,[Ye,(0,l._)("td",xe,[(0,l.wy)((0,l._)("input",{class:"save-name",type:"text","onUpdate:modelValue":t[27]||(t[27]=t=>e.characterInputRea.buildname=t),maxlength:"20",placeholder:"input build name",onChange:t[28]||(t[28]=t=>e.characterInputRea.saveDisabled=!1)},null,544),[[n.nr,e.characterInputRea.buildname]])]),(0,l._)("td",null,[(0,l._)("button",{type:"button",disabled:e.saveDisabled,onClick:t[29]||(t[29]=(...t)=>e.saveOnClick&&e.saveOnClick(...t))}," Save ",8,We)]),(0,l._)("td",null,[(0,l._)("button",{type:"button",disabled:e.characterInputRea.removeDisabled,onClick:t[30]||(t[30]=(...t)=>e.removeOnClick&&e.removeOnClick(...t))}," Remove ",8,Ke)])]),(0,l._)("tr",null,[(0,l._)("td",Fe,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[31]||(t[31]=t=>e.characterInputRea.recommendationSelectedIndex=t),onChange:t[32]||(t[32]=t=>e.recommendationOnChange(e.targetValue(t))),placeholder:"select preset or saved build"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.recommendationList,((t,a)=>((0,l.wg)(),(0,l.iD)("option",{value:a,key:a},(0,s.zw)(e.displayBuildName(t)),9,Xe)))),128))],544),[[n.bM,e.characterInputRea.recommendationSelectedIndex]])])])])],64)}var Be=a(2540),Je=a(2986),$e=a(3550),Ge=(0,l.aZ)({name:"CharacterInput",props:{characterInput:{type:Object,required:!0},recommendationList:{type:Array,required:!0},recommendation:{type:Object,required:!0},artifactSetSelectVisible:{type:Boolean},artifactScore:{type:Number,required:!0}},emits:["open:character-select","open:character-info","update:recommendation","saveToStorage","removeFromStorage","open:weapon-select","open:artifact-set-select","open:artifact-detail-input","update:character-input-character","update:character-input-weapon","open:character-info"],setup(e,t){const{displayName:a,targetValue:n}=(0,X.Z)(),s=(0,P.qj)(e.characterInput),i=(0,P.iH)("0"),o=e=>{if("ja-jp"==Be.Z.global.locale.value)return e.name;if(e.overwrite)return e.name;let t="";t+=a(e.build["武器"]),t+=" - ",e.build["聖遺物セット効果1"]&&(t+=a(e.build["聖遺物セット効果1"])),e.build["聖遺物セット効果2"]&&e.build["聖遺物セット効果2"]!=e.build["聖遺物セット効果1"]&&(t+="/",t+=a(e.build["聖遺物セット効果2"])),t+="[";for(const a of["聖遺物メイン効果3","聖遺物メイン効果4","聖遺物メイン効果5"]){const n=e.build[a].split("_");t+=$e.mU.get(n[1])}return t+="]",t},r=(0,l.Fl)((()=>s.characterMaster)),c=(0,l.Fl)((()=>s.weaponMaster)),u=(0,l.Fl)((()=>s.artifactSetMasters??[Je.zf,Je.zf])),d=e=>$e.GN[e.元素],p=e=>" "+$e.dr[e.レアリティ],f=e=>$e.X9[e.元素],m=e=>$e.Cb[e.元素],h=(0,l.Fl)((()=>{let e=s.saveDisabled;return s.characterMaster.武器!=s.weaponMaster.種類&&(e=!0),e})),g=async()=>{s.saveDisabled=!1,s.removeDisabled=!0,await(0,l.Y3)(),t.emit("saveToStorage",s.buildname)},y=async()=>{s.removeDisabled=!1,s.saveDisabled=!0,await(0,l.Y3)(),t.emit("removeFromStorage",s.buildname)},b=(0,l.Fl)((()=>[0,1,2,3,4,5,6])),w=(0,l.Fl)((()=>Je.iU[s.突破レベル])),_=(0,l.Fl)((()=>{const e=(0,Je.PH)(r.value);return Array.from({length:e+1},((e,t)=>t))})),v=async()=>{const e=w.value[0],t=w.value[w.value.length-1];s.レベル<e?s.レベル=e:s.レベル>t&&(s.レベル=t),await(0,l.Y3)(),A()},k=async a=>{if(!e.recommendationList||!a)return;await(0,l.Y3)();const n=e.recommendationList[Number(a)];console.debug(n.name),t.emit("update:recommendation",n)},S=(0,l.Fl)((()=>{const e=(0,Je.Jd)(r.value,"通常攻撃");return Array.from({length:e},((e,t)=>t+1))})),C=(0,l.Fl)((()=>{const e=(0,Je.Jd)(r.value,"元素スキル");return Array.from({length:e},((e,t)=>t+1))})),O=(0,l.Fl)((()=>{const e=(0,Je.Jd)(r.value,"元素爆発");return Array.from({length:e},((e,t)=>t+1))})),D=(0,l.Fl)((()=>{let e=6;return c.value.レアリティ<3&&(e=4),Array.from({length:e+1},((e,t)=>t))})),R=(0,l.Fl)((()=>Je.iU[s.武器突破レベル])),N=(0,l.Fl)((()=>{let e=5;return c.value.レアリティ<3&&(e=1),Array.from({length:e},((e,t)=>t+1))})),V=async()=>{const e=R.value[0],t=R.value[R.value.length-1];s.武器レベル<e?s.武器レベル=e:s.武器レベル>t&&(s.武器レベル=t),await(0,l.Y3)(),I()},M=(0,P.iH)(0),j=t=>e.artifactSetSelectVisible&&t==M.value?" selected":"",H=e=>{M.value=e,t.emit("open:artifact-set-select",e)},A=async()=>{const e={};e.突破レベル=s.突破レベル,e.レベル=s.レベル,e.命ノ星座=s.命ノ星座,e.通常攻撃レベル=s.通常攻撃レベル,e.元素スキルレベル=s.元素スキルレベル,e.元素爆発レベル=s.元素爆発レベル,await(0,l.Y3)(),t.emit("update:character-input-character",e)},I=async()=>{const e={};e.武器突破レベル=s.武器突破レベル,e.武器レベル=s.武器レベル,e.武器精錬ランク=s.武器精錬ランク,await(0,l.Y3)(),t.emit("update:character-input-weapon",e)};return{displayName:a,targetValue:n,displayBuildName:o,visionSrc:d,bgImageClass:p,colorClass:f,bgColorClass:m,characterInputRea:s,characterMaster:r,weaponMaster:c,artifactSetMasters:u,recommendationOnChange:k,saveDisabled:h,saveOnClick:g,removeOnClick:y,ascensionRange:b,levelRange:w,constellationRange:_,ascensionOnChange:v,weaponAscensionRange:D,weaponLevelRange:R,weaponRefineRange:N,weaponAscensionOnChange:V,storageOrRecommendationRef:i,normalAttackLevelRange:S,elementalSkillLevelRange:C,elementalBurstLevelRange:O,openArtifactSetSelect:H,artifactSetSelectClass:j,characterOnChange:A,weaponOnChange:I,IMG_SRC_DUMMY:$e.bx}}});const Qe=(0,B.Z)(Ge,[["render",Ze],["__scopeId","data-v-04ab752c"]]);var et=Qe;const tt=e=>((0,l.dD)("data-v-0955c541"),e=e(),(0,l.Cn)(),e),at={class:"character-info status"},nt={class:"character-info"},lt={rowspan:"2"},st=["src","alt"],it={class:"title"},ot=["innerHTML"],rt={class:"character-info"},ct={rowspan:"2"},ut=["src","alt"],dt={class:"title"},pt=["innerHTML"],ft={key:1,class:"character-info"},mt=tt((()=>(0,l._)("caption",null,null,-1))),ht={colspan:"2",class:"title"},gt=["innerHTML"],yt={class:"key"},bt={class:"value"},wt={class:"key"},_t={class:"value"},vt={class:"key"},kt={class:"value"},St={key:2,class:"character-info"},Ct=tt((()=>(0,l._)("caption",null,null,-1))),Ot={colspan:"2",class:"title"},Dt={class:"key"},Rt={class:"value"},Nt=["innerHTML"],Vt={class:"key"},Mt={class:"value"},jt={key:3,class:"character-info"},Ht=tt((()=>(0,l._)("caption",null,null,-1))),At={colspan:"2",class:"title"},It={class:"key"},zt={class:"value"},Lt=["innerHTML"],Et={class:"key"},Ut={class:"value"};function qt(e,t,a,n,i,o){return e.visible?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[1==e.mode?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("table",at,[(0,l._)("caption",null,(0,s.zw)(e.displayName("ステータス")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.statsInfoList,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("th",null,(0,s.zw)(e.displayName(t.key)),1),(0,l._)("td",null,(0,s.zw)(e.displayStatValue(t.key,t.value)),1)])))),128))]),(0,l._)("table",nt,[(0,l._)("caption",null,(0,s.zw)(e.displayName("命ノ星座")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.constellationInfoList,((t,a)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a},[(0,l._)("tr",null,[(0,l._)("td",lt,[(0,l._)("img",{class:"icon",src:t.icon_url,alt:t.名前},null,8,st)]),(0,l._)("th",it,(0,s.zw)(e.displayName("第"+(a+1)+"重"))+" "+(0,s.zw)(e.displayName(t.名前)),1)]),(0,l._)("tr",null,[(0,l._)("td",{class:"description",innerHTML:t.説明},null,8,ot)])],64)))),128))]),(0,l._)("table",rt,[(0,l._)("caption",null,(0,s.zw)(e.displayName("固有天賦")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.passiveTalentInfoList,((t,a)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a},[(0,l._)("tr",null,[(0,l._)("td",ct,[(0,l._)("img",{class:"icon",src:t.icon_url,alt:t.名前},null,8,ut)]),(0,l._)("th",dt,(0,s.zw)(e.displayName(t.名前)),1)]),(0,l._)("tr",null,[(0,l._)("td",{class:"description",innerHTML:t.説明},null,8,pt)])],64)))),128))])],64)):(0,l.kq)("",!0),2==e.mode?((0,l.wg)(),(0,l.iD)("table",ft,[mt,(0,l._)("tr",null,[(0,l._)("th",ht,(0,s.zw)(e.displayName(e.characterMaster.通常攻撃.名前)),1)]),(0,l._)("tr",null,[(0,l._)("td",{colspan:"2",class:"description",innerHTML:e.characterMaster.通常攻撃.説明},null,8,gt)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.talentNormalAttack("通常攻撃").詳細,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("th",yt,(0,s.zw)(e.displayName(t.名前)),1),(0,l._)("td",bt,(0,s.zw)(e.talentValue(t.数値,e.levelNormalAttack("通常攻撃"))),1)])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.talentNormalAttack("重撃").詳細,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("th",wt,(0,s.zw)(e.displayName(t.名前)),1),(0,l._)("td",_t,(0,s.zw)(e.talentValue(t.数値,e.levelNormalAttack("重撃"))),1)])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.talentNormalAttack("落下攻撃").詳細,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("th",vt,(0,s.zw)(e.displayName(t.名前)),1),(0,l._)("td",kt,(0,s.zw)(e.talentValue(t.数値,e.levelNormalAttack("落下攻撃"))),1)])))),128))])):(0,l.kq)("",!0),3==e.mode?((0,l.wg)(),(0,l.iD)("table",St,[Ct,(0,l._)("tr",null,[(0,l._)("th",Ot,(0,s.zw)(e.displayName(e.characterMaster.元素スキル.名前)),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.talentAttributes(e.characterMaster.元素スキル,e.elementalSkillLevel),((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("th",Dt,(0,s.zw)(e.displayName(t[0])),1),(0,l._)("td",Rt,(0,s.zw)(t[1]),1)])))),128)),(0,l._)("tr",null,[(0,l._)("td",{colspan:"2",class:"description",innerHTML:e.characterMaster.元素スキル.説明},null,8,Nt)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.characterMaster.元素スキル.詳細,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("th",Vt,(0,s.zw)(e.displayName(t.名前)),1),(0,l._)("td",Mt,(0,s.zw)(e.talentValue(t.数値,e.elementalSkillLevel)),1)])))),128))])):(0,l.kq)("",!0),4==e.mode?((0,l.wg)(),(0,l.iD)("table",jt,[Ht,(0,l._)("tr",null,[(0,l._)("th",At,(0,s.zw)(e.displayName(e.characterMaster.元素爆発.名前)),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.talentAttributes(e.characterMaster.元素爆発,e.elementalBurstLevel),((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("th",It,(0,s.zw)(e.displayName(t[0])),1),(0,l._)("td",zt,(0,s.zw)(t[1]),1)])))),128)),(0,l._)("tr",null,[(0,l._)("td",{colspan:"2",class:"description",innerHTML:e.characterMaster.元素爆発.説明},null,8,Lt)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.characterMaster.元素爆発.詳細,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("th",Et,(0,s.zw)(e.displayName(t.名前)),1),(0,l._)("td",Ut,(0,s.zw)(e.talentValue(t.数値,e.elementalBurstLevel)),1)])))),128))])):(0,l.kq)("",!0)],64)):(0,l.kq)("",!0)}var Tt=a(5983);function Pt(e,t){return t+Je.iU[e][0]==t?"+":""}function Yt(e,t,a){if(!e)return 0;const n=Pt(t,a);if(n in e)return e[n];const l=Je.iU[t][0],s=Je.iU[t][Je.iU[t].length-1],i=e[l+"+"],o=e[s];return i+(o-i)*(a-l)/(s-l)}function xt(e,t){const a=Je.iU[t][0];return e[a+"+"]}function Wt(e,t){if(e in t)return t[e];e=Number(e);const a=Object.keys(t).map((e=>Number(e)));let n,l;for(let s=0;s<a.length-1;s++)a[s]<=e&&a[s+1]>=e&&(n=a[s],l=a[s+1]);return n&&l?t[n]+(t[l]-t[n])*(e-n)/(l-n):0}function Kt(e,t){Object.keys(e).forEach((t=>{e[t]=0}));for(const a of t){if(!a)continue;const t=a.split("_");e[t[1]]+=$e.$Y[t[0]][t[1]]}}function Ft(e,t,a,n,l,s){Object.keys(e).forEach((t=>{e[t]=0}));let i=0;for(let d=0;d<3;d++)a[d]&&n[d]&&s[d]&&(e[a[d]]+=l[d][n[d]]*s[d],i+=s[d]);const o=Je.Hx.filter((e=>!a.includes(e)));let r=Math.min(45,40+Math.round(Math.max(0,(i-12)/4)));r-=Math.min(45,i);for(let d=r;d>0;d--){const t=o[d%o.length];e[t]+=$e._J[t][3]}const c=t.filter((e=>e&&e.startsWith("4"))).length,u=1-.07*c;Object.keys(e).forEach((t=>{e[t]*=u,e[t]=Math.round(10*e[t])/10}))}function Xt(e){const t=e.聖遺物ステータス,a=e.聖遺物ステータスメイン効果,n=e.聖遺物ステータスサブ効果;for(const l of Object.keys(t))t[l]=0;for(const l of Object.keys(a))l in t?t[l]+=a[l]:t[l]=a[l];for(const l of Object.keys(n))l in t?t[l]+=n[l]:t[l]=n[l]}const Zt=function(e,t,a,n,l){if(t&&a&&n&&l)try{const s=t.characterMaster,i=t.突破レベル,o=t.レベル,r=t.命ノ星座,c=t.weaponMaster,u=t.武器突破レベル,d=t.武器レベル,p=(0,Tt.X8)(Je.q2);if(p["突破レベル"]=i,p["レベル"]=o,p["命ノ星座"]=r,p["元素"]=s.元素,"元素エネルギー"in s["元素爆発"]&&(p["元素エネルギー"]=s["元素爆発"]["元素エネルギー"]),"固有変数"in s)for(const e of Object.keys(s["固有変数"]))e in n.conditionValues?p[e]=Number(n.conditionValues[e]):p[e]=s["固有変数"][e];for(const t of Object.keys(e.enemyMaster).filter((e=>"key"!=e))){const a="敵"+t;p[a]=e.enemyMaster[t]}Object.keys(e.statAdjustments).forEach((t=>{t in p&&(p[t]+=e.statAdjustments[t])}));for(const e of Object.keys(s["ステータス"]))if(Je.Vd.includes(e))p[e]+=Yt(s["ステータス"][e],i,o);else{const t=["HP","攻撃力","防御力"].includes(e)?e+"+":e;t in p&&(p[t]+=xt(s["ステータス"][e],i))}for(const e of Object.keys(c["ステータス"]))p[e]+=Yt(c["ステータス"][e],u,d);const f=a.聖遺物ステータス;for(const e of Object.keys(f)){const t=["HP","攻撃力","防御力"].includes(e)?e+"+":e;p[t]+=f[e]}let m="法器"==s.武器?s.元素:"物理",h="法器"==s.武器?s.元素:"物理",g="法器"==s.武器?s.元素:"物理";l&&[l.elementalResonance,l.teamOption,l.miscOption].forEach((e=>{e&&Object.keys(e.conditionAdjustments).forEach((t=>{if(e.conditionAdjustments[t]===1/0&&t.endsWith("元素付与")&&["片手剣","両手剣","長柄武器"].includes(s.武器)){const e=t.replace(/元素付与$/,"");m=e,h=e,g=e}if(t in p?p[t]+=e.conditionAdjustments[t]:p[t]=e.conditionAdjustments[t],t.endsWith("V1")||t.endsWith("V2")||t.endsWith("V3")){const a=t.replace(/V[1-3]$/,"");a in p?p[a]+=e.conditionAdjustments[t]:p[a]=e.conditionAdjustments[t]}}))}));const y=ta(n),b=Bt(t,y,p);for(const e of[t.damageDetailMyCharacter,t.damageDetailMyWeapon,t.damageDetailMyArtifactSets])if(e&&Je.yL in e)for(const t of e[Je.yL]){if(t["条件"]){const e=aa(t["条件"],y,r);if(0==e)continue}if(t["種類"]&&t["種類"].endsWith("元素付与")){const e=t["種類"].replace("元素付与","");t["対象"]?"通常攻撃ダメージ"==t["対象"]?m=e:"重撃ダメージ"==t["対象"]?h=e:"落下攻撃ダメージ"==t["対象"]&&(g=e):(m=e,h=e,g=e)}}n.攻撃元素=[m,h,g],(0,Tt.fX)(e.statsObj,p),(0,Tt.fX)(n.conditionAdjustments,b)}catch(s){throw console.error(e,t,a,n,l),s}};function Bt(e,t,a){const n=e.命ノ星座,l={},s=new Map;for(const d of[e.damageDetailMyCharacter,e.damageDetailMyWeapon,e.damageDetailMyArtifactSets])if(d&&Je.e2 in d)for(const e of d[Je.e2]){let a=!1,l=e["数値"];if(e["条件"]){const s=aa(e.条件,t,n);if(0==s)continue;1!=s&&(l=l.concat(["*",s])),a=!0}let i=e["種類"];i&&(e["対象"]&&(i+="."+e["対象"]),s.has(i)||s.set(i,[]),s.get(i)?.push([i,l,e.上限,e.下限,a]))}const i=["基礎HP","HP%","HP+","HP上限"],o=["基礎防御力","防御力%","防御力+","防御力"],r=["基礎攻撃力","攻撃力%","攻撃力+","攻撃力"],c=[...Je.U3,...Je.tH,...Je.Em,...Je.wB,...Je.uc,"ダメージ軽減"];c.push(...Array.from(s.keys()).filter((e=>-1!=e.indexOf("ダメージバフ.")))),c.push(...Array.from(s.keys()).filter((e=>-1!=e.indexOf("ダメージアップ."))));const u=[...new Set(Array.from(s.keys()).map((e=>e.replace(/V[1-3]$/,""))))].filter((e=>![...i,...o,...r,...c].includes(e)));u.sort($t);for(const d of i){const e={};["V1","V2","V3"].forEach((t=>{const n=d+t;e[n]=n in a?a[n]:0})),Jt(l,a,s,d),["V1","V2","V3"].forEach((t=>{const n=d+t;a[n]&&(d in a?a[d]+=a[n]-e[n]:a[d]=a[n]-e[n])}))}a["HP上限"]+=a["基礎HP"]+a["HP+"],a["HP上限"]+=a["基礎HP"]*a["HP%"]/100;for(const d of u){const e={};["V1","V2","V3"].forEach((t=>{const n=d+t;e[n]=n in a?a[n]:0})),Jt(l,a,s,d),["V1","V2","V3"].forEach((t=>{const n=d+t;a[n]&&(d in a?a[d]+=a[n]-e[n]:a[d]=a[n]-e[n])}))}for(const d of o){const e={};["V1","V2","V3"].forEach((t=>{const n=d+t;e[n]=n in a?a[n]:0})),Jt(l,a,s,d),["V1","V2","V3"].forEach((t=>{const n=d+t;a[n]&&(d in a?a[d]+=a[n]-e[n]:a[d]=a[n]-e[n])}))}a["防御力"]+=a["基礎防御力"]+a["防御力+"],a["防御力"]+=a["基礎防御力"]*a["防御力%"]/100;for(const d of r){const e={};["V1","V2","V3"].forEach((t=>{const n=d+t;e[n]=n in a?a[n]:0})),Jt(l,a,s,d),["V1","V2","V3"].forEach((t=>{const n=d+t;a[n]&&(d in a?a[d]+=a[n]-e[n]:a[d]=a[n]-e[n])}))}a["攻撃力"]+=a["基礎攻撃力"]+a["攻撃力+"],a["攻撃力"]+=a["基礎攻撃力"]*a["攻撃力%"]/100;for(const d of c){const e={};["V1","V2","V3"].forEach((t=>{const n=d+t;e[n]=n in a?a[n]:0})),Jt(l,a,s,d),["V1","V2","V3"].forEach((t=>{const n=d+t;a[n]&&(d in a?a[d]+=a[n]-e[n]:a[d]=a[n]-e[n])}))}return l}function Jt(e,t,a,n){for(const l of[a.get(n),...["V1","V2","V3"].map((e=>a.get(n+e)))])l&&l.forEach((a=>{const n=ga(t,a[0],a[1],a[2],a[3]);if(a[4])for(const t of Object.keys(n))t in e?e[t]+=n[t]:e[t]=n[t]}))}function $t(e,t){const a=["元素熟知","会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","シールド強化"],n=["ダメージ軽減"];let l=a.indexOf(e);n.indexOf(e)>=0&&(l=a.length+1);let s=a.indexOf(t);return n.indexOf(t)>=0&&(s=a.length+1),(-1!=l?l:a.length)-(-1!=s?s:a.length)}function Gt(e,t){const a={},n=ta(t);for(const l of Object.keys($e._9)){if(!e[l])continue;const t=$e._9[l];if(t.詳細)for(const e of t.詳細){if(e.条件){const t=aa(e.条件,n,0);if(0==t)continue}e.種類&&e.数値&&(e.種類 in a?a[e.種類]+=e.数値:a[e.種類]=e.数値)}"草元素共鳴"==l&&e.dendroOption&&(a["元素熟知"]+=Number(e.dendroOption))}return a}const Qt=function(e,t,a,n=null,l=null){try{let s=0;const i=/(.+)X([0-8])$/;if(Array.isArray(e)){let o=null;for(const r of e){let c=0;if(["+","-","*","/"].includes(r))o=r;else{if((0,Tt.hj)(r))c=Number(r);else if(Array.isArray(r))c=Qt(r,t,a);else if(-1!=r.indexOf("#")){const s=r.split("#");if(a&&s[0]in a){const i=a[s[0]];let o=null;for(const e of i)if(s[1]==e[0]){o=e[4];break}null!=o?c=o:console.error(e,t,a,n,l,r)}}else{const a=i.exec(r);if(a){const s=a[1];if(s in t){c=t[s];let e=Number(a[2]);e%2==1&&s+"V1"in t&&(c-=t[s+"V1"]),e=Math.trunc(e/2),e%2==1&&s+"V2"in t&&(c-=t[s+"V2"]),e=Math.trunc(e/2),e%2==1&&s+"V3"in t&&(c-=t[s+"V3"])}else console.error(e,t,null,n,l)}else r in t?c=t[r]:console.error(e,t,null,n,l)}if(null==o)s+=c;else switch(o){case"+":s+=c;break;case"-":s-=c;break;case"*":s*=c,s=Math.floor(100*s)/100;break;case"/":s/=c;break}}}}else if((0,Tt.hj)(e))s=Number(e);else{const a=i.exec(e);if(a){const i=a[1];if(i in t){s=t[i];let e=Number(a[2]);e%2==1&&i+"V1"in t&&(s-=t[i+"V1"]),e=Math.trunc(e/2),e%2==1&&i+"V2"in t&&(s-=t[i+"V2"]),e=Math.trunc(e/2),e%2==1&&i+"V3"in t&&(s-=t[i+"V3"])}else console.error(e,t,null,n,l)}else e in t?s=t[e]:console.error(e,t,null,n,l)}if(null!=n){const e=Qt(n,t,a);s=Math.min(s,e)}if(null!=l){const e=Qt(l,t,a);s=Math.max(s,e)}return s}catch(s){throw console.error(e,t,a,n,l),s}};function ea(e,t,a,n){try{if(!t)return;if(!a)return;if(!n)return;const l=t.characterMaster,s=t["命ノ星座"],i=l["元素"],o=(0,Tt.X8)(Je.vo),r=[[i,$e.q4[i]]];if(a.selectList.filter((e=>"元素変化"==e.name)).length){const e=a.selectList.filter((e=>"元素変化"==e.name))[0],t=a.conditionValues["元素変化"];if(t){const a=e.options[t].replace(/元素$/,"");r.push([a,$e.q4[a]])}}if(a.selectList.filter((e=>"拡散"==e.name)).length){const e=a.selectList.filter((e=>"拡散"==e.name))[0],t=a.conditionValues["拡散"];if(t){const a=e.options[t].replace(/元素$/,"");r.push([a,$e.q4[a]])}}o["元素"]=i,r.forEach((e=>{const t=e[0],l=e[1];Object.keys(l).forEach((e=>{const s=l[e];let i=0;if("結晶"==e)i=ia(t,n.statsObj);else if("拡散"==e){let l="炎";for(const e of a.selectList)if("拡散"==e.name){const t=e.options[Number(a.conditionValues["拡散"])];t&&(l=t.replace(/元素$/,""));break}o["拡散元素"]=l,i=sa(e,t,n.statsObj,l)}else switch(s["種類"]){case"乗算":i=la(e,t,n.statsObj);break;case"固定":i=sa(e,t,n.statsObj);break;case"加算":i=oa(e,t,n.statsObj);break}Object.keys(o).forEach((t=>{t.startsWith(e)&&(0,Tt.hj)(o[t])&&(o[t]=i)}))}))})),(0,Tt.fX)(e.元素反応,o),console.debug("元素反応",e.元素反応);const c=ta(a),u=t.damageDetailMyCharacter,d=t.damageDetailMyWeapon,p=t.damageDetailMyArtifactSets;if(Array.isArray(e.キャラクター注釈)&&e.キャラクター注釈.splice(0,e.キャラクター注釈.length),u){for(const l of["通常攻撃","重撃","落下攻撃"]){if(e[l]=[],!(l in u))continue;const i=a.攻撃元素[["通常攻撃","重撃","落下攻撃"].indexOf(l)];let o=u[l];if("特殊"+l in u){const e=u["特殊"+l];0!=aa(e["条件"],c,s)&&(o=e["詳細"])}for(const r of o){if(r["条件"]&&0==aa(r["条件"],c,s))continue;const o=da(r,t,a,n.statsObj,e,i);e[l].push(o)}if("通常攻撃"==l){let t=0;const a=["合計ダメージ",null,0,0,0,null,0,0,1];for(const n of e[l])!n[0].endsWith("段ダメージ")&&!["水月ダメージ"].includes(n[0])||n[0].startsWith("非表示_")||(a[1]=n[1],a[2]+=n[2],null==n[3]?a[3]=null:null!=a[3]&&(a[3]+=n[3]),a[4]+=n[4],null!=a[6]&&(n[6]?a[6]+=n[6]:a[6]++),a[7]=n[7],a[8]=n[8],t++);t>0&&e[l].splice(t,0,a)}}for(const l of["元素スキル","元素爆発","その他"]){if(e[l]=[],!(l in u))continue;const i=u[l];for(const o of i){if(o["条件"]&&0==aa(o["条件"],c,s))continue;const i=da(o,t,a,n.statsObj,e);e[l].push(i)}}}for(const h of[d,p]){const l="その他";if(!h||!(l in h))continue;const i=h[l];for(const o of i){if(o["条件"]&&0==aa(o["条件"],c,s))continue;const i=da(o,t,a,n.statsObj,e);e[l].push(i)}}const f=[];for(const e of Je.tH){const t=e.replace(/元素耐性$/,"").replace(/耐性$/,""),a=ya(n.statsObj,1e4,t);f.push({key:t,value:a})}e["被ダメージ"]=f;const m=[];for(const e of f)m.push({key:e.key,value:1e4*n.statsObj["HP上限"]/e.value});e["耐久スコア"]=m,console.debug(e)}catch(l){throw console.error(e,t,a,n),l}}function ta(e){try{const t=[];if(!e)return t;const a=e.checkboxList;a&&a.forEach((a=>{e.conditionValues[a.name]&&t.push(a.name)}));const n=e.selectList;return n&&n.forEach((a=>{const n=e.conditionValues[a.name];void 0!==n&&null!==n&&(n>0||0==n&&a.required)&&t.push(a.name+"@"+a.options[n])})),t}catch(t){throw console.error(e),t}}const aa=function(e,t,a){const n=e.split("^")[0];if(-1!=n.indexOf("|")){const e=n.split("|");for(let n=0;n<e.length;n++){const l=na(e[n],t,a);if(1==l)return 1}return 0}const l=n.split("&");let s=1;for(let i=0;i<l.length;i++){const e=na(l[i],t,a);if(0==e)return 0;1!=e&&(s=e)}return s};function na(e,t,a){const n=e.split(/[@=]/);if("命ノ星座"==n[0]){if(2==n.length&&(0,Tt.hj)(n[1])){const e=Number(n[1]);if(e<=a)return 1}return 0}if(t.includes(e)||t.includes(e.replace("=","@")))return 1;if(1==n.length)return t.filter((t=>t.split("@")[0]==e)).length>0?1:0;if(-1!=e.indexOf("="))return 0;const l=new RegExp("[^0-9]*?([\\-0-9\\.]+).*");for(let s=0;s<t.length;s++)if(t[s].startsWith(n[0]+"@")){const e=t[s].split("@"),a=l.exec(e[1]);if(a){const e=Number(a[1]);return e}}return 0}function la(e,t,a){try{if(!t||"物理"==t)return 0;const n=a["元素熟知"],l=a[e+"反応ボーナス"]??0;let s=$e.q4[t][e]["数値"];return s*=1+25*n/(9*(n+1400))+l/100,s}catch(n){throw console.error(e,t,a),n}}function sa(e,t,a,n){try{if(!t||"物理"==t)return 0;const l=a["レベル"],s=a["元素熟知"],i=a[e+"反応ボーナス"]??0,o=n??$e.q4[t][e]["元素"];let r=Wt(l,$e.q4[t][e]["数値"]);return r*=1+16*s/(s+2e3)+i/100,r*=ua(o,a),r}catch(l){throw console.error(e,t,a,n),l}}function ia(e,t){try{if(!e||"物理"==e)return 0;const a=t["レベル"],n=t["元素熟知"],l=t["結晶反応ボーナス"]??0;let s=Wt(a,$e.q4[e]["結晶"]["数値"]);return s*=1+40*n/(9*(n+1400))+l/100,s}catch(a){throw console.error(e,t),a}}function oa(e,t,a){try{if(!t||"物理"==t)return 0;const n=a["レベル"],l=a["元素熟知"],s=a[e+"反応ボーナス"]??0,i=$e.q4[t][e]["元素"];let o=Wt(n,$e.q4[t][e]["数値"]);return o*=1+5*l/(l+1200)+s/100,o*=ua(i,a),o}catch(n){throw console.error(e,t,a),n}}function ra(e,t=0){try{const a=e["レベル"]??0,n=e["敵レベル"]??0,l=t/100,s=Math.max(-100,e["敵防御力"]??0)/100,i=(a+100)/((1-l)*(1+s)*(n+100)+a+100);return i}catch(a){throw console.error(e,t),a}}function ca(e){if(e==1/0)return 0;let t=e;return t=t<0?100-t/2:t<75?100-t:1e4/(4*t+100),t/=100,t}function ua(e,t){try{const a="敵"+e+("物理"!=e?"元素":"")+"耐性",n=ca(t[a]??0);return n}catch(a){throw console.error(e,t),a}}function da(e,t,a,n,l,s=null){try{const i=[];let o=!0,r=!0,c=!0,u=null!=e["元素"]?e["元素"]:null!=s?s:null,d=0,p=0;const f=null!=e["HIT数"]?Number(e["HIT数"]):1,m={},h=n["命ノ星座"],g=fa(t,Je.yL);let y=ta(a);const b=(0,Tt.X8)(a.conditionValues);if(e["除外条件"])for(const t of e["除外条件"]){let e=t;(0,Tt.PO)(t)&&(e=t.名前),e in b&&((0,Tt.hj)(b[e])?b[e]=0:(0,Tt.jn)(b[e])&&(b[e]=!1))}if(e["適用条件"])for(const t of e["適用条件"])if((0,Tt.HD)(t))t in b&&(0,Tt.jn)(b[t])&&(b[t]=!0);else if((0,Tt.PO)(t)){if(t.名前 in b){let e=b[t.名前];if("数値"in t){if((0,Tt.HD)(t.数値)){const a=String(t.数値).replace(/^\+/,"");e+=Number(a)}else e=((0,Tt.hj)(t.数値),t.数値);(0,Tt.hj)(e)&&(e<0?e=0:a.selectList.filter((e=>e.name==t.名前)).forEach((t=>{e>=t.options.length&&(e=t.options.length-1)})))}else e=!0;b[t.名前]=e}if(t.説明)if(Array.isArray(t.説明))t.説明.forEach((e=>{l["キャラクター注釈"].includes(e)||l["キャラクター注釈"].push(e)}));else{const e=t.説明;l["キャラクター注釈"].includes(e)||l["キャラクター注釈"].push(e)}}if(e["除外条件"]||e["適用条件"]){const e=(0,Tt.X8)(a);e.conditionValues=b;const s=ta(e);[t.damageDetailMyCharacter,t.damageDetailMyWeapon,t.damageDetailMyArtifactSets].forEach((e=>{e&&e.ステータス変更系詳細.filter((e=>e.条件)).forEach((e=>{const t=e.条件;let a=0,i=0;const o=aa(t,y,h),r=aa(t,s,h);if(o==r)return;if(0!=o){let t=e.数値;1!=o&&(t=t.concat(["*",o])),a=Qt(t,n,l,e.上限,e.下限)}if(0!=r){let t=e.数値;1!=r&&(t=t.concat(["*",r])),i=Qt(t,n,l,e.上限,e.下限)}const c=i-a;if(c){let t=e.種類;e.対象&&(t+="."+e.対象),t in m?m[t]+=c:m[t]=c}}))})),y=s}const w=[];g&&g.forEach((t=>{let a=null;if(!t.条件||(a=aa(t.条件,y,h),0!=a)){if(t.対象)if(t.対象.endsWith("元素ダメージ")){if(!t.対象.startsWith(u))return}else if("物理ダメージ"==t.対象){if("物理"!=u)return}else{const a=e.種類,n=t.対象.split(".");if(n[0]!=a)return;if(n.length>1&&n[n.length-1]!=e.名前)return}if(t["種類"].endsWith("元素付与"))["通常攻撃ダメージ","重撃ダメージ","落下攻撃ダメージ"].includes(e.種類)&&(e["元素付与無効"]||(u=t["種類"].replace("元素付与","")));else if("防御無視"==t.種類){const e=Qt(t.数値,n,l,t.上限,t.下限);d+=e}else if("固有変数"==t.種類);else if(null!=a&&1!=a){const e=JSON.parse(JSON.stringify(t));e.数値=e.数値.concat(["*",a]),w.push(e)}else w.push(t)}})),console.debug(e["名前"]+":myTalentChangeDetailObjArr"),console.debug(w);const _={};[n,m].forEach((t=>{Object.keys(t).forEach((a=>{const n=a.split(".");if(1==n.length)return;let l=!1;if(n[1]==e.種類&&(2==n.length||n[2]==e.名前&&3==n.length)&&(l=!0),l){const e=n[0];e in _?"別枠乗算"==e&&_[e]>0?_[e]*=t[a]/100:_[e]+=t[a]:_[e]=t[a]}}))})),Object.keys(_).forEach((e=>{e in m?e.startsWith("別枠乗算")&&m[e]>0?m[e]*=_[e]/100:m[e]+=_[e]:m[e]=_[e]})),console.debug("myステータス補正",m);const v=t.damageDetailMyArtifactSets;if(v&&"通常攻撃ダメージ"==e.種類&&e.HIT数>1&&"来歆の余響"==t.artifactSets[0]&&"来歆の余響"==t.artifactSets[1]){let t=!1;for(const a of v[Je.e2].filter((e=>e.条件&&e.種類&&e.数値))){const s=a.種類,i=a.条件,o=e.HIT数;if(0!=aa(i,y,h)){const e=Qt(a.数値,n,l,a.上限,a.下限);s in m||(m[s]=0),m[s]-=e*(o-Math.max(1,Math.floor(o/2)))/o,t=!0}}if(t){const e="来歆の余響4セット効果の幽谷祭祀のダメージアップは多段HITダメージの全てには乗らない。3HIT以下：1回分、4HIT：2回分を計上する";l["キャラクター注釈"].includes(e)||l["キャラクター注釈"].push(e)}}switch(Object.keys(m).forEach((e=>{e in n?e.startsWith("別枠乗算")&&n[e]>0?n[e]*=m[e]:n[e]+=m[e]:n[e]=m[e],console.debug("ステータス補正",e,m[e])})),n["別枠乗算"]&&(p=n["別枠乗算"]),e.種類){case"HP回復":i.push("与える治療効果"),i.push("受ける治療効果"),o=!1,r=!1,c=!1,u=null;break;case"シールド":i.push("シールド強化"),o=!1,r=!1,c=!1;break;case"元素創造物HP":o=!1,r=!1,c=!1,u=null;break;case"他所基準ダメージ":r=!1,c=!1;break;case"他所基準HP回復":o=!1,r=!1,c=!1,u=null;break;case"付加元素ダメージ":["炎","水","雷","氷"].includes(u)||(u="炎");break;default:e.種類.startsWith("表示")||e.種類.startsWith("非表示")?(o=!1,r=!1,c=!1,u=null):(i.push("与えるダメージ"),"NONE"!=e.ダメージバフ&&(e.ダメージバフ?i.push(e.ダメージバフ):$e.vN.includes(e.種類)&&i.push(e.種類+"バフ")),u&&i.push("物理"==u?"物理ダメージバフ":u+"元素ダメージバフ"));break}const k=pa(n,l,e.数値,i,o,r,c,u,d,p,e.上限,e.下限);if(w.forEach((t=>{const a=pa(n,l,t.数値,i,o,r,c,u,d,null,t.上限,t.下限);if(t.種類.endsWith("ダメージアップ")){if("ダメージアップ"==e.名前)return;$e.vN.includes(e.種類)&&f>1&&(a[2]*=f,null!=a[3]&&(a[3]*=f),a[4]*=f)}k[2]+=a[2],null!=k[3]&&a[3]&&(k[3]+=a[3]),k[4]+=a[4]})),$e.vN.includes(e.種類)){let t=e.種類;if(e.ダメージバフ){const a=e.ダメージバフ.replace(/バフ$/,"");$e.vN.includes(a)&&(t=a)}const a=[];a.push(t+"アップ"),u&&a.push("物理"==u?"物理ダメージアップ":u+"元素ダメージアップ"),a.forEach((t=>{if(!n[t])return;if(!r||!c)return;if(e.名前.startsWith("非表示_狼の魂基礎"))return;const a=pa(n,l,n[t],i,o,r,c,u,d,null);f>1&&(a[2]*=f,null!=a[3]&&(a[3]*=f),a[4]*=f),k[2]+=a[2],null!=k[3]&&a[3]&&(k[3]+=a[3]),k[4]+=a[4]}))}Object.keys(m).forEach((e=>{n[e]-=m[e]})),"シールド"==e.種類&&"岩"==k[1]&&(k[2]=1.5*k[2],k[4]=1.5*k[4]);const S=[e.名前,k[1],k[2],k[3],k[4],e.種類,e.HIT数,k[7],k[8]];return console.debug("calculateDamageFromDetail",e,t,a,n,s,S),S}catch(i){throw console.error(e,t,a,n,s),i}}function pa(e,t,a,n,l,s,i,o,r,c,u=null,d=null){const p=Qt(a,e,t,u,d);let f=p;c?f*=c/100:c=1,ma(a)&&(n=null,s=!1,i=!1);let m=1;n&&(m=100,n.forEach((t=>{e[t]&&(m+=e[t])})),m/=100,f*=m);let h=1;s&&(h=ra(e,r),f*=h);let g=1;i&&o&&(g=ua(o,e),f*=g);let y=e["会心率"];"物理"==o?"物理ダメージ会心率"in e&&(y+=e["物理ダメージ会心率"]):o+"元素ダメージ会心率"in e&&(y+=e[o+"元素ダメージ会心率"]),y=Math.min(100,Math.max(0,y))/100;let b=e["会心ダメージ"];"物理"==o?"物理ダメージ会心ダメージ"in e&&(b+=e["物理ダメージ会心ダメージ"]):o+"元素ダメージ会心ダメージ"in e&&(b+=e[o+"元素ダメージ会心ダメージ"]),b=(100+b)/100;let w=null,_=f;return l&&y>0&&(w=f*b,_=w*y+f*(1-y)),console.debug("%f * %f * [%o]=%f * [%f,%f] * %f * %f => %f,%f,%f",p,c,n,m,y,b,h,g,_,w,f),["未設定",o,_,w,f,null,null,m,h]}function fa(e,t){let a=[];return e?(e.damageDetailMyCharacter&&t in e.damageDetailMyCharacter&&(a=a.concat(e.damageDetailMyCharacter[t])),e.damageDetailMyWeapon&&t in e.damageDetailMyWeapon&&(a=a.concat(e.damageDetailMyWeapon[t])),e.damageDetailMyArtifactSets&&t in e.damageDetailMyArtifactSets&&(a=a.concat(e.damageDetailMyArtifactSets[t])),a):a}function ma(e){if(!Array.isArray(e))return!(0,Tt.hj)(e)&&-1!=String(e).indexOf("#");let t=!1;return e.forEach((e=>{["+","-","*","/"].includes(String(e))||(0,Tt.hj)(e)||(Array.isArray(e)?ma(e)&&(t=!0):-1!=String(e).indexOf("#")&&(t=!0))})),t}const ha=["炎","水","風","雷","草","氷","岩"];function ga(e,t,a,n=null,l=null){const s=Qt(a,e,Je.US,n,l);(0,Tt.hj)(s)||console.error(e,t,a,s);const i=[];"HP"==t?i.push("HP上限"):t.startsWith("自元素")?i.push(t.replace(/^自/,String(e["元素"]))):t.startsWith("全元素")?ha.forEach((e=>{i.push(t.replace(/^全/,e))})):t.startsWith("敵自元素")?i.push(t.replace(/^敵自/,"敵"+String(e["元素"]))):t.startsWith("敵全元素")?ha.forEach((e=>{i.push(t.replace(/^敵全/,"敵"+e))})):i.push(t);const o={};i.forEach((e=>{o[e]=s}));for(const r of Object.keys(o))r in e?r.startsWith("別枠乗算")&&o[r]>0?e[r]*=o[r]/100:e[r]+=o[r]:e[r]=o[r];return console.debug(ga.name,null,t,a,"=>",o),o}function ya(e,t,a){const n=e["防御力"],l=e["敵レベル"],s=e["ダメージ軽減"],i=ca(e["物理"==a?"物理耐性":a+"元素耐性"]);let o=t*(1-n/(n+5*l+501))*(100-s)/100*i;return o=Math.max(0,o),o}const ba=[[["攻撃力%",1],["会心率",2],["会心ダメージ",1]],[["HP%",1],["会心率",2],["会心ダメージ",1]],[["防御力%",1],["会心率",2],["会心ダメージ",1]],[["HP%",.5],["攻撃力%",.5],["会心率",2],["会心ダメージ",1]],[["攻撃力%",.5],["防御力%",.5],["会心率",2],["会心ダメージ",1]],[["攻撃力%",.5],["元素熟知",.125],["会心率",2],["会心ダメージ",1]]];function wa(e,t,a){let n=0;for(const l of a){const e=l[0],a=l[1];t.聖遺物ステータスサブ効果[e]&&(n+=t.聖遺物ステータスサブ効果[e]*a)}return n}var _a=(0,l.aZ)({name:"CharacterInfo",props:{visible:{type:Boolean,required:!0},mode:{type:Number,required:!0},characterMaster:{type:Object,required:!0},ascension:{type:Number,required:!0},level:{type:Number,required:!0},normalAttackLevel:{type:Number,required:!0},elementalSkillLevel:{type:Number,required:!0},elementalBurstLevel:{type:Number,required:!0},normalAttackReplacing:{type:Array,required:!0}},setup(e){const{displayName:t,displayStatValue:a}=(0,X.Z)(),n=(0,l.Fl)((()=>{const t=[];if("ステータス"in e.characterMaster)for(const a of Object.keys(e.characterMaster.ステータス)){const n=e.characterMaster.ステータス[a],l=Yt(n,e.ascension,e.level);t.push({key:a,value:l})}return t})),s=(0,l.Fl)((()=>{const t=[];if("命ノ星座"in e.characterMaster)for(const a of Object.keys(e.characterMaster.命ノ星座))t.push(e.characterMaster.命ノ星座[a]);return t})),i=(0,l.Fl)((()=>{const t=[];if("固有天賦"in e.characterMaster)for(const a of e.characterMaster.固有天賦)t.push(a);return t})),o=t=>{let a;return"通常攻撃"==t?a=e.normalAttackReplacing[0]?e.characterMaster.特殊通常攻撃:e.characterMaster.通常攻撃:"重撃"==t?a=e.normalAttackReplacing[1]?e.characterMaster.特殊重撃:e.characterMaster.重撃:"落下攻撃"==t&&(a=e.normalAttackReplacing[2]?e.characterMaster.特殊落下攻撃:e.characterMaster.落下攻撃),a},r=t=>{let a=e.normalAttackLevel;const n=o(t);if("種類"in n)switch(n["種類"]){case"元素スキルダメージ":a=e.elementalSkillLevel;break;case"元素爆発ダメージ":a=e.elementalBurstLevel;break}return a},c=(e,t)=>{const a=[];return["継続時間","クールタイム","元素エネルギー"].forEach((n=>{const l=Object.keys(e).filter((e=>e.endsWith(n)));for(const s of l){let n=e[s];(0,Tt.PO)(n)&&(n=n[String(t)]),a.push([s,n])}})),a},u=(e,t)=>(0,Tt.PO)(e)?e[String(t)]:e;return{displayName:t,displayStatValue:a,statsInfoList:n,constellationInfoList:s,passiveTalentInfoList:i,talentNormalAttack:o,levelNormalAttack:r,talentAttributes:c,talentValue:u}}});const va=(0,B.Z)(_a,[["render",qt],["__scopeId","data-v-0955c541"]]);var ka=va;const Sa={key:0},Ca={class:"title"},Oa={class:"stat"},Da={class:"stat-value"},Ra={class:"stat"},Na={class:"stat-value"},Va={class:"title",colspan:"3"},Ma=["innerHTML"],ja={class:"select-list"},Ha=["src","alt","onClick"],Aa={class:"tooltip"};function Ia(e,t,a,n,i,o){return e.visible?((0,l.wg)(),(0,l.iD)("div",Sa,[(0,l._)("table",null,[(0,l._)("tr",null,[(0,l._)("th",Ca,(0,s.zw)(e.displayName(e.weaponMaster.名前)),1),(0,l._)("th",Oa,(0,s.zw)(e.displayName("基礎攻撃力")),1),(0,l._)("td",Da,(0,s.zw)(e.displayStatValue("基礎攻撃力",e.stats[0].value)),1)]),(0,l._)("tr",null,[(0,l._)("td",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Array.from({length:e.weaponMaster.レアリティ},((e,t)=>t)),(e=>((0,l.wg)(),(0,l.iD)("img",{class:"star",src:"images/star.png",alt:"star",key:e})))),128))]),(0,l._)("th",Ra,[e.stats[1]?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,s.zw)(e.displayName(e.stats[1].key)),1)],64)):(0,l.kq)("",!0)]),(0,l._)("td",Na,[e.stats[1]?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,s.zw)(e.displayStatValue(e.stats[1].key,e.stats[1].value)),1)],64)):(0,l.kq)("",!0)])]),e.weaponMaster.武器スキル?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("tr",null,[(0,l._)("th",Va,(0,s.zw)(e.weaponMaster.武器スキル.名前),1)]),(0,l._)("tr",null,[(0,l._)("td",{colspan:"3",class:"description",innerHTML:e.weaponMaster.武器スキル.説明},null,8,Ma)])],64)):(0,l.kq)("",!0)]),(0,l._)("ul",ja,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.filteredList,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"icon",key:t.key},[(0,l._)("img",{class:(0,s.C_)("weapon"+e.bgImageClass(t)+e.selectedClass(t)),src:t.icon_url,alt:t.key,onClick:a=>e.updateWeapon(t.key)},null,10,Ha),(0,l._)("div",Aa,(0,s.zw)(e.displayName(t.key)),1)])))),128))])])):(0,l.kq)("",!0)}var za=(0,l.aZ)({name:"WeaponSelect",props:{visible:{type:Boolean,required:!0},weapon:{type:String,required:!0},weaponType:{type:String},weaponMaster:{type:Object,required:!0},ascension:{type:Number,required:!0},level:{type:Number,required:!0}},emits:["update:weapon"],setup(e,t){const{displayName:a,displayStatValue:n}=(0,X.Z)(),s=e=>" "+$e.dr[e.レアリティ],i=t=>t.key==e.weapon?" selected":"",o=(0,P.iH)(e.weapon),r=(0,l.Fl)((()=>{const t=[];if(e.weaponMaster&&e.weaponMaster.ステータス&&void 0!==e.ascension&&void 0!==e.level)for(const a of Object.keys(e.weaponMaster.ステータス))t.push({key:a,value:Yt(e.weaponMaster.ステータス[a],e.ascension,e.level)});return t})),c=(0,l.Fl)((()=>{if(e.weaponType)return $e.JP[e.weaponType];const t=[];return Object.keys($e.JP).forEach((e=>{const a=$e.JP[e];t.push(...a)})),t})),u=async e=>{o.value=e,await(0,l.Y3)(),t.emit("update:weapon",e)};return{displayName:a,displayStatValue:n,bgImageClass:s,selectedClass:i,filteredList:c,updateWeapon:u,stats:r}}});const La=(0,B.Z)(za,[["render",Ia],["__scopeId","data-v-168e4589"]]);var Ea=La;const Ua={key:0},qa={class:"title"},Ta={class:"description"},Pa={class:"select-list"},Ya=["src","alt","onClick"],xa={class:"tooltip"};function Wa(e,t,a,n,i,o){return e.visible?((0,l.wg)(),(0,l.iD)("div",Ua,[(0,l._)("table",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.artifactSetEffects,(t=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[(0,l._)("tr",null,[(0,l._)("th",qa,(0,s.zw)(e.displayName(t.key)),1)]),(0,l._)("tr",null,[(0,l._)("td",Ta,(0,s.zw)(t.value),1)])],64)))),128))]),(0,l._)("ul",Pa,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.filteredList,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"with-tooltip",key:t.key},[(0,l._)("img",{class:(0,s.C_)("artifact-set"+e.bgImageClass(t)+e.selectedClass(t)),src:t.icon_url,alt:t.key,onClick:a=>e.$emit("update:artifact-set",t.key)},null,10,Ya),(0,l._)("div",xa,(0,s.zw)(e.displayName(t.key)),1)])))),128))])])):(0,l.kq)("",!0)}var Ka=(0,l.aZ)({name:"ArtifactSetSelect",props:{visible:{type:Boolean,required:!0},index:{type:Number,required:!0},artifactSet:{type:String,required:!0},artifactSetMasters:{type:Array,required:!0}},emits:["update:artifact-set"],setup(e){const{displayName:t}=(0,X.Z)(),a=e=>" "+$e.dr[e.レアリティ],n=t=>t.key==e.artifactSet?" selected":"",s=(0,P.qj)(e.artifactSetMasters),i=(0,l.Fl)((()=>$e._j)),o=(0,l.Fl)((()=>{const e=[];return s.length>0&&("2セット効果"in s[0]&&e.push({key:s[0].key+" 2セット効果",value:s[0]["2セット効果"]?.説明}),s.length>1&&(s[0].key==s[1].key?"4セット効果"in s[0]&&e.push({key:s[0].key+" 4セット効果",value:s[0]["4セット効果"]?.説明}):"2セット効果"in s[1]&&e.push({key:s[1].key+" 2セット効果",value:s[1]["2セット効果"]?.説明}))),e}));return{displayName:t,bgImageClass:a,selectedClass:n,filteredList:i,artifactSetEffects:o}}});const Fa=(0,B.Z)(Ka,[["render",Wa],["__scopeId","data-v-771cf910"]]);var Xa=Fa;const Za=e=>((0,l.dD)("data-v-48d69117"),e=e(),(0,l.Cn)(),e),Ba={key:0},Ja={class:"two"},$a=Za((()=>(0,l._)("option",{value:""},null,-1))),Ga=["value"],Qa={class:"two"},en=Za((()=>(0,l._)("option",{value:""},null,-1))),tn=["value"],an={class:"three"},nn=Za((()=>(0,l._)("option",{value:""},null,-1))),ln=["value"],sn={class:"three"},on=Za((()=>(0,l._)("option",{value:""},null,-1))),rn=["value"],cn={class:"three"},un=Za((()=>(0,l._)("option",{value:""},null,-1))),dn=["value"],pn={class:"detail"},fn={class:"stat-value"},mn=["min","step"],hn={key:1},gn={class:"stat-value"},yn=["min","step"],bn={key:1},wn={class:"stat-value"},_n=["min","step"],vn={key:1},kn={class:"stat-value"},Sn=["min","step"],Cn={key:1},On={class:"stat-value"},Dn=["min","step"],Rn={key:1},Nn={class:"stat-value"},Vn=["min","step"],Mn={key:1},jn={class:"stat-value"},Hn=["min","step"],An={key:1},In={rowspan:"4",colspan:"2",style:{"border-color":"transparent"}},zn={class:"button"},Ln={style:{position:"relative"}},En={key:0,class:"wait-icon",src:"images/icon_loader_f_ww_01_s1.gif",width:"25",height:"25"},Un={class:"stat-value"},qn=["min","step"],Tn={key:1},Pn={class:"stat-value"},Yn=["min","step"],xn={key:1},Wn={class:"stat-value"},Kn=["min","step"],Fn={key:1},Xn={class:"priority-substat"},Zn={style:{"border-color":"transparent"}},Bn=["onUpdate:modelValue"],Jn=Za((()=>(0,l._)("option",{value:""},null,-1))),$n=["value"],Gn=["onUpdate:modelValue"],Qn=["value"],el=["onUpdate:modelValue"],tl=["value"],al={style:{"border-color":"transparent"}},nl={style:{"border-color":"transparent"}},ll=["disabled"],sl=["value"],il=Za((()=>(0,l._)("canvas",{id:"artifact-stats-canvas"},null,-1))),ol=[il];function rl(e,t,a,i,o,r){const c=(0,l.up)("ArtifactDetailOcrResult");return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.visible?((0,l.wg)(),(0,l.iD)("div",Ba,[(0,l._)("fieldset",null,[(0,l._)("legend",null,(0,s.zw)(e.displayName("聖遺物詳細")),1),(0,l._)("label",Ja,[(0,l.Uk)((0,s.zw)(e.displayName("生の花"))+" ",1),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.mainstats[0]=t),onChange:t[1]||(t[1]=(...t)=>e.updateMainstats&&e.updateMainstats(...t))},[$a,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.mainstat1List,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t,key:t},(0,s.zw)(e.displayName(t)),9,Ga)))),128))],544),[[n.bM,e.mainstats[0]]])]),(0,l._)("label",Qa,[(0,l.Uk)((0,s.zw)(e.displayName("死の羽"))+" ",1),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.mainstats[1]=t),onChange:t[3]||(t[3]=(...t)=>e.updateMainstats&&e.updateMainstats(...t))},[en,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.mainstat2List,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t,key:t},(0,s.zw)(e.displayName(t)),9,tn)))),128))],544),[[n.bM,e.mainstats[1]]])]),(0,l._)("label",an,[(0,l.Uk)((0,s.zw)(e.displayName("時の砂"))+" ",1),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.mainstats[2]=t),onChange:t[5]||(t[5]=(...t)=>e.updateMainstats&&e.updateMainstats(...t))},[nn,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.mainstat3List,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t,key:t},(0,s.zw)(e.displayName(t)),9,ln)))),128))],544),[[n.bM,e.mainstats[2]]])]),(0,l._)("label",sn,[(0,l.Uk)((0,s.zw)(e.displayName("空の杯"))+" ",1),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.mainstats[3]=t),onChange:t[7]||(t[7]=(...t)=>e.updateMainstats&&e.updateMainstats(...t))},[on,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.mainstat4List,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t,key:t},(0,s.zw)(e.displayName(t)),9,rn)))),128))],544),[[n.bM,e.mainstats[3]]])]),(0,l._)("label",cn,[(0,l.Uk)((0,s.zw)(e.displayName("理の冠"))+" ",1),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.mainstats[4]=t),onChange:t[9]||(t[9]=(...t)=>e.updateMainstats&&e.updateMainstats(...t))},[un,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.mainstat5List,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t,key:t},(0,s.zw)(e.displayName(t)),9,dn)))),128))],544),[[n.bM,e.mainstats[4]]])]),(0,l._)("table",pn,[(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("HP")),1),(0,l._)("td",fn,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[10]||(t[10]=t=>e.artifactStats.HP=t),min:e.substatMin("HP"),step:e.substatStep("HP"),onChange:t[11]||(t[11]=t=>e.artifactStatsOnChange("HP",e.targetValue(t)))},null,40,mn)),[[n.nr,e.artifactStats.HP]]):((0,l.wg)(),(0,l.iD)("span",hn,(0,s.zw)(e.displayStatValue("HP",e.artifactStats.HP)),1))]),(0,l._)("th",null,(0,s.zw)(e.displayName("HP%")),1),(0,l._)("td",gn,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[12]||(t[12]=t=>e.artifactStats["HP%"]=t),min:e.substatMin("HP%"),step:e.substatStep("HP%"),onChange:t[13]||(t[13]=t=>e.artifactStatsOnChange("HP%",e.targetValue(t)))},null,40,yn)),[[n.nr,e.artifactStats["HP%"]]]):((0,l.wg)(),(0,l.iD)("span",bn,(0,s.zw)(e.displayStatValue("HP%",e.artifactStats["HP%"])),1))])]),(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("攻撃力")),1),(0,l._)("td",wn,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[14]||(t[14]=t=>e.artifactStats.攻撃力=t),min:e.substatMin("攻撃力"),step:e.substatStep("攻撃力"),onChange:t[15]||(t[15]=t=>e.artifactStatsOnChange("攻撃力",e.targetValue(t)))},null,40,_n)),[[n.nr,e.artifactStats.攻撃力]]):((0,l.wg)(),(0,l.iD)("span",vn,(0,s.zw)(e.displayStatValue("攻撃力",e.artifactStats.攻撃力)),1))]),(0,l._)("th",null,(0,s.zw)(e.displayName("攻撃力%")),1),(0,l._)("td",kn,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[16]||(t[16]=t=>e.artifactStats["攻撃力%"]=t),min:e.substatMin("攻撃力%"),step:e.substatStep("攻撃力%"),onChange:t[17]||(t[17]=t=>e.artifactStatsOnChange("攻撃力%",e.targetValue(t)))},null,40,Sn)),[[n.nr,e.artifactStats["攻撃力%"]]]):((0,l.wg)(),(0,l.iD)("span",Cn,(0,s.zw)(e.displayStatValue("攻撃力%",e.artifactStats["攻撃力%"])),1))])]),(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("防御力")),1),(0,l._)("td",On,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[18]||(t[18]=t=>e.artifactStats.防御力=t),min:e.substatMin("防御力"),step:e.substatStep("防御力"),onChange:t[19]||(t[19]=t=>e.artifactStatsOnChange("防御力",e.targetValue(t)))},null,40,Dn)),[[n.nr,e.artifactStats.防御力]]):((0,l.wg)(),(0,l.iD)("span",Rn,(0,s.zw)(e.displayStatValue("防御力",e.artifactStats.防御力)),1))]),(0,l._)("th",null,(0,s.zw)(e.displayName("防御力%")),1),(0,l._)("td",Nn,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[20]||(t[20]=t=>e.artifactStats["防御力%"]=t),min:e.substatMin("防御力%"),step:e.substatStep("防御力%"),onChange:t[21]||(t[21]=t=>e.artifactStatsOnChange("防御力%",e.targetValue(t)))},null,40,Vn)),[[n.nr,e.artifactStats["防御力%"]]]):((0,l.wg)(),(0,l.iD)("span",Mn,(0,s.zw)(e.displayStatValue("防御力%",e.artifactStats["防御力%"])),1))])]),(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("元素熟知")),1),(0,l._)("td",jn,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[22]||(t[22]=t=>e.artifactStats.元素熟知=t),min:e.substatMin("元素熟知"),step:e.substatStep("元素熟知"),onChange:t[23]||(t[23]=t=>e.artifactStatsOnChange("元素熟知",e.targetValue(t)))},null,40,Hn)),[[n.nr,e.artifactStats.元素熟知]]):((0,l.wg)(),(0,l.iD)("span",An,(0,s.zw)(e.displayStatValue("元素熟知",e.artifactStats.元素熟知)),1))]),(0,l._)("td",In,[(0,l._)("div",null,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=t=>e.editableRef=t)},null,512),[[n.e8,e.editableRef]]),(0,l.Uk)(" "+(0,s.zw)(e.displayName("直接入力モード")),1)])]),(0,l._)("div",null,[(0,l._)("label",zn,[(0,l.Uk)((0,s.zw)(e.displayName("聖遺物詳細画面OCR"))+" ",1),(0,l._)("input",{class:"hidden",type:"file",id:"artifact-stats-image",onChange:t[25]||(t[25]=t=>e.loadArtifactStatsByOcr(t))},null,32)])]),(0,l._)("div",Ln,[e.isScanning?((0,l.wg)(),(0,l.iD)("img",En)):(0,l.kq)("",!0)])])]),(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("会心率")),1),(0,l._)("td",Un,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[26]||(t[26]=t=>e.artifactStats.会心率=t),min:e.substatMin("会心率"),step:e.substatStep("会心率"),onChange:t[27]||(t[27]=t=>e.artifactStatsOnChange("会心率",e.targetValue(t)))},null,40,qn)),[[n.nr,e.artifactStats.会心率]]):((0,l.wg)(),(0,l.iD)("span",Tn,(0,s.zw)(e.displayStatValue("会心率",e.artifactStats.会心率)),1))])]),(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("会心ダメージ")),1),(0,l._)("td",Pn,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[28]||(t[28]=t=>e.artifactStats.会心ダメージ=t),min:e.substatMin("会心ダメージ"),step:e.substatStep("会心ダメージ"),onChange:t[29]||(t[29]=t=>e.artifactStatsOnChange("会心ダメージ",e.targetValue(t)))},null,40,Yn)),[[n.nr,e.artifactStats.会心ダメージ]]):((0,l.wg)(),(0,l.iD)("span",xn,(0,s.zw)(e.displayStatValue("会心ダメージ",e.artifactStats.会心ダメージ)),1))])]),(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("元素チャージ効率")),1),(0,l._)("td",Wn,[e.editableRef?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,type:"number","onUpdate:modelValue":t[30]||(t[30]=t=>e.artifactStats.元素チャージ効率=t),min:e.substatMin("元素チャージ効率"),step:e.substatStep("元素チャージ効率"),onChange:t[31]||(t[31]=t=>e.artifactStatsOnChange("元素チャージ効率",e.targetValue(t)))},null,40,Kn)),[[n.nr,e.artifactStats.元素チャージ効率]]):((0,l.wg)(),(0,l.iD)("span",Fn,(0,s.zw)(e.displayStatValue("元素チャージ効率",e.artifactStats.元素チャージ効率)),1))])])])]),(0,l._)("fieldset",null,[(0,l._)("legend",null,(0,s.zw)(e.displayName("聖遺物サブ効果 簡易設定")),1),(0,l._)("table",Xn,[(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("優先するサブ効果")),1),(0,l._)("th",null,(0,s.zw)(e.displayName("上昇値")),1),(0,l._)("th",null,(0,s.zw)(e.displayName("初期+強化")),1),(0,l._)("td",Zn,"合計 "+(0,s.zw)(e.upTotalCount)+" 回",1)]),((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)([0,1,2],(a=>(0,l._)("tr",{key:a},[(0,l._)("td",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t=>e.prioritySubstats[a]=t,onChange:t[32]||(t[32]=(...t)=>e.updatePrioritySubstats&&e.updatePrioritySubstats(...t))},[Jn,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.prioritySubstatList,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t,key:t},(0,s.zw)(e.displayName(t)),9,$n)))),128))],40,Bn),[[n.bM,e.prioritySubstats[a]]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t=>e.prioritySubstatIndices[a]=t,onChange:t[33]||(t[33]=(...t)=>e.updatePrioritySubstats&&e.updatePrioritySubstats(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.prioritySubstatValueList(a),((e,t)=>((0,l.wg)(),(0,l.iD)("option",{value:t,key:t},(0,s.zw)(Math.round(10*e)/10),9,Qn)))),128))],40,Gn),[[n.bM,e.prioritySubstatIndices[a]]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t=>e.prioritySubstatCounts[a]=t,onChange:t[34]||(t[34]=(...t)=>e.updatePrioritySubstats&&e.updatePrioritySubstats(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.prioritySubstatCountList,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e},(0,s.zw)(" × "+e),9,tl)))),128))],40,el),[[n.bM,e.prioritySubstatCounts[a]]])]),(0,l.wy)((0,l._)("td",al,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[35]||(t[35]=t=>e.gensenEnabledRef=t)},null,512),[[n.e8,e.gensenEnabledRef]]),(0,l.Uk)(" "+(0,s.zw)(e.displayName("一括変更")),1)])],512),[[n.F8,0==a]]),(0,l.wy)((0,l._)("td",nl,[(0,l.wy)((0,l._)("select",{class:"gensen","onUpdate:modelValue":t[36]||(t[36]=t=>e.gensenRef=t),onChange:t[37]||(t[37]=(...t)=>e.gensenOnChange&&e.gensenOnChange(...t)),disabled:!e.gensenEnabledRef},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.gensenMasterList,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t,key:t.key},(0,s.zw)(e.displayName(t.key)),9,sl)))),128))],40,ll),[[n.bM,e.gensenRef]])],512),[[n.F8,1==a]])]))),64))])])])):(0,l.kq)("",!0),(0,l._)("div",null,[(0,l.Wm)(c,{visible:e.ocrResultVisible,ocrResult:e.ocrResult,"onCancel:artifactDetailOcrResult":e.cancelArtifactDetailOcrResult,"onAccept:artifactDetailOcrResult":e.acceptArtifactDetailOcrResult},null,8,["visible","ocrResult","onCancel:artifactDetailOcrResult","onAccept:artifactDetailOcrResult"])]),(0,l.wy)((0,l._)("div",null,ol,512),[[n.F8,!1]])],64)}const cl=e=>((0,l.dD)("data-v-7f3f3a1f"),e=e(),(0,l.Cn)(),e),ul={class:"modal"},dl={class:"modal-content"},pl={class:"ocr-result"},fl=cl((()=>(0,l._)("caption",null,"OCR RESULT",-1))),ml=cl((()=>(0,l._)("br",null,null,-1)));function hl(e,t,a,i,o,r){return(0,l.wg)(),(0,l.j4)(l.lR,{to:"body"},[(0,l.wy)((0,l._)("div",ul,[(0,l._)("div",dl,[(0,l._)("table",pl,[fl,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.items,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.key},[(0,l._)("th",null,(0,s.zw)(e.displayStatName(t.key)),1),(0,l._)("td",null,(0,s.zw)(e.displayStatValue(t.key,t.value)),1)])))),128))]),ml,(0,l._)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.ok&&e.ok(...t))}," OK "),(0,l._)("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>e.cancel&&e.cancel(...t))}," CANCEL ")])],512),[[n.F8,e.visible]])])}var gl=(0,l.aZ)({name:"ArtifactDetailOcrResult",props:{visible:{type:Boolean,required:!0,default:!1},ocrResult:{type:Object,required:!0}},emits:["cancel:artifact-detail-ocr-result","accept:artifact-detail-ocr-result"],setup(e,t){const{displayStatName:a,displayStatValue:n}=(0,X.Z)(),s=(0,l.Fl)((()=>Object.keys(e.ocrResult).map((t=>({key:t,value:e.ocrResult[t]}))))),i=()=>{t.emit("cancel:artifact-detail-ocr-result")},o=()=>{t.emit("accept:artifact-detail-ocr-result")};return{displayStatName:a,displayStatValue:n,items:s,cancel:i,ok:o}}});const yl=(0,B.Z)(gl,[["render",hl],["__scopeId","data-v-7f3f3a1f"]]);var bl=yl,wl=a(6124),_l=a.n(wl);const{createWorker:vl}=_l();let kl="0123456789.%+";function Sl(e){return new Promise((function(t,a){const n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(e){a(e)},n.readAsDataURL(e)}))}function Cl(e){return new Promise((function(t,a){const n=new Image;n.onload=function(){t(n)},n.onerror=function(e){a(e)},n.src=e.toString()}))}async function Ol(e){const t=await Sl(e),a=await Cl(t),n=document.getElementById("artifact-stats-canvas"),l=n.getContext("2d"),s=2;n.width=a.width*s,n.height=a.height*s,l.drawImage(a,0,0,n.width,n.height);const i=l.getImageData(0,0,n.width,n.height);for(let o=0;o<i.height;o++)for(let e=0;e<i.width;e++){const t=4*o*i.width+4*e,a=(i.data[t]+i.data[t+1]+i.data[t+2])/3;i.data[t]=255-(a<64?0:i.data[t]),i.data[t+1]=255-(a<64?0:i.data[t+1]),i.data[t+2]=255-(a<64?0:i.data[t+2])}return l.putImageData(i,0,0,0,0,i.width,i.height),n}function Dl(e){console.log(e),e=e.replace(/[,\s]/g,""),e=e.replace(/[Ａ-Ｚａ-ｚ０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})),e=e.replace(/[①②③④⑤⑥⑦⑧⑨]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-("①".charCodeAt(0)-"1".charCodeAt(0)))})),[["⑪","11"],["⑫","12"],["⑬","13"],["⑭","14"],["⑮","15"],["⑯","16"],["⑰","17"],["⑱","18"],["⑲","19"],["⑳","20"]].forEach((t=>{e=e.replace(new RegExp(t[0],"g"),t[1])})),console.log(e);const t={};return["HP上限","攻撃力","防御力","元素.*?知","会心率","会心ダメージ","元素チャージ効率"].forEach((a=>{let n=a;"HP上限"==a&&(n="HP"),"元素.*?知"==a&&(n="元素熟知");const l=new RegExp(a+"\\+([0-9\\.]+)"),s=l.exec(e);s?(["HP","攻撃力","防御力","元素熟知"].includes(n)?t[n]=Number(s[1].replace(".","")):t[n]=Number(s[1]),console.log(n,t[n])):t[n]=0})),t}async function Rl(e){const t=await Ol(e),a=vl({logger:e=>console.debug(e)});await a.load(),await a.loadLanguage("jpn"),await a.initialize("jpn"),await a.setParameters({tessedit_char_whitelist:kl,preserve_interword_spaces:"1"});const{data:{text:n}}=await a.recognize(t);await a.terminate();const l=Dl(n);return l}async function Nl(e){let t;const a=e.currentTarget,n=a.files;if(n&&n[0]){const e=n[0];e.type.match("image.*")&&(a.files=null,a.value="",t=await Rl(e))}return console.log("resizePinnedImage",t),t}["HP上限","攻撃力","防御力","元素熟知","会心率","会心ダメージ","元素チャージ効率","基本ステータス","高級ステータス","元素ステータス","スタミナ上限","与える治療効果","受ける治療効果","クールタイム短縮","シールド強化","炎元素ダメージ","水元素ダメージ","風元素ダメージ","雷元素ダメージ","草元素ダメージ","氷元素ダメージ","岩元素ダメージ","物理ダメージ","？"].forEach((e=>{e.split("").forEach((e=>{-1==kl.indexOf(e)&&(kl+=e)}))}));var Vl=(0,l.aZ)({name:"ArtifactDetailInput",props:{visible:Boolean,artifactDetailInput:{type:Object,required:!0}},components:{ArtifactDetailOcrResult:bl},emits:["update:artifact-detail"],setup(e,t){const{displayName:a,targetValue:n,displayStatValue:s}=(0,X.Z)(),i=(0,P.qj)(e.artifactDetailInput),o=(0,P.qj)(i.聖遺物メイン効果),r=(0,P.qj)(i.聖遺物優先するサブ効果),c=(0,P.qj)(i.聖遺物優先するサブ効果上昇値),u=(0,P.qj)(i.聖遺物優先するサブ効果上昇回数),d=(0,P.qj)(i.聖遺物ステータス),p=(0,P.qj)(i.聖遺物ステータスメイン効果),f=(0,P.qj)(i.聖遺物ステータスサブ効果),m=(0,P.iH)(!1),h=(0,P.iH)(!1),g=$e.Ml,y=(0,P.iH)($e.Ml[2]),b=(0,l.Fl)((()=>{let e=0;for(let t of u)e+=t;return Math.min(45,40+Math.round(Math.max(0,(e-12)/4)))})),w=(e,t)=>(0,Je.kE)(r,e,t),_=e=>e in p?p[e]:0,v=e=>["HP","攻撃力","防御力","元素熟知"].includes(e)?1:.1,k=()=>{Kt(p,o)},S=()=>{if(i.聖遺物優先するサブ効果Disabled)return;const e=[w(0),w(1),w(2)];Ft(f,o,r,c,e,u)};k(),S(),Xt(i);const C=async()=>{k(),Xt(i),await(0,l.Y3)(),t.emit("update:artifact-detail",i)},O=async(e,a)=>{Object.keys(d).filter((t=>!e||t==e)).forEach((t=>{t==e&&void 0!==a&&(f[t]=Number(a)),f[t]=d[t]-p[t],f[t]<0&&(f[t]=0,d[t]=p[t])})),Xt(i),await(0,l.Y3)(),t.emit("update:artifact-detail",i)},D=async()=>{i.聖遺物優先するサブ効果Disabled=!1,S(),Xt(i),await(0,l.Y3)(),t.emit("update:artifact-detail",i)},R=async()=>{i.聖遺物優先するサブ効果Disabled=!1,h.value=!1,y.value&&y.value.key&&(c.splice(0,c.length,...y.value.values),u.splice(0,u.length,...y.value.counts),S(),Xt(i),await(0,l.Y3)(),t.emit("update:artifact-detail",i))},N=async()=>{i.聖遺物優先するサブ効果Disabled=!0;for(const e of Object.keys(f))f[e]=0;Xt(i),await(0,l.Y3)(),t.emit("update:artifact-detail",i)},V=(0,P.iH)(!1),M=(0,P.iH)(!1),j=(0,P.qj)({}),H=async e=>{V.value=!0;const t=await Nl(e);V.value=!1,t&&((0,Tt.fX)(j,t),M.value=!0)},A=()=>{M.value=!1},I=()=>{if(A(),j){i.聖遺物優先するサブ効果Disabled=!0;for(const e of Object.keys(f))f[e]=e in j?j[e]:0;for(const[e,t]of o.entries())t.endsWith("ダメージバフ")||"与える治療効果"==t||o.splice(e,1,"");C()}};return{displayName:a,targetValue:n,displayStatValue:s,mainstat1List:Je.jq,mainstat2List:Je.YO,mainstat3List:Je.wn,mainstat4List:Je.i1,mainstat5List:Je.Mz,substatMin:_,substatStep:v,prioritySubstatList:Je.kA,prioritySubstatValueList:w,prioritySubstatCountList:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],mainstats:o,prioritySubstats:r,prioritySubstatIndices:c,prioritySubstatCounts:u,artifactStats:d,upTotalCount:b,editableRef:m,gensenEnabledRef:h,gensenRef:y,gensenMasterList:g,gensenOnChange:R,artifactStatsOnChange:O,updateMainstats:C,updatePrioritySubstats:D,loadArtifactStatsByOcr:H,isScanning:V,ocrResultVisible:M,ocrResult:j,cancelArtifactDetailOcrResult:A,acceptArtifactDetailOcrResult:I,initializeArtifactStatsSub:N}}});const Ml=(0,B.Z)(Vl,[["render",rl],["__scopeId","data-v-48d69117"]]);var jl=Ml;const Hl=e=>((0,l.dD)("data-v-2b2e2c5c"),e=e(),(0,l.Cn)(),e),Al=["onUpdate:modelValue","value","onChange"],Il=["onUpdate:modelValue","onChange"],zl=["value"],Ll={style:{"text-align":"center"}},El={class:"open-close"},Ul=Hl((()=>(0,l._)("span",null,null,-1))),ql={key:0,class:"option-description"};function Tl(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)("fieldset",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.checkboxList,(t=>((0,l.wg)(),(0,l.iD)("label",{key:t.name},[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":a=>e.conditionValues[t.name]=a,value:t.name,onChange:a=>e.updateCondition(a,t)},null,40,Al),[[n.e8,e.conditionValues[t.name]]]),(0,l._)("span",null,(0,s.zw)(e.displayName(t.name)),1)])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.selectList,(t=>((0,l.wg)(),(0,l.iD)("label",{key:t.name},[(0,l._)("span",null,(0,s.zw)(e.displayName(t.name)),1),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":a=>e.conditionValues[t.name]=a,onChange:a=>e.updateCondition(a,t)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.options,((t,a)=>((0,l.wg)(),(0,l.iD)("option",{value:a,key:a},(0,s.zw)(e.displayOptionName(t)),9,zl)))),128))],40,Il),[[n.bM,e.conditionValues[t.name]]])])))),128)),(0,l._)("div",Ll,[(0,l._)("label",El,[(0,l.wy)((0,l._)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.isDisplayDescription=t)},null,512),[[n.e8,e.isDisplayDescription]]),Ul])]),e.isDisplayDescription?((0,l.wg)(),(0,l.iD)("ul",ql,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.displayStatAjustmentList,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},(0,s.zw)(e),1)))),128))])):(0,l.kq)("",!0)])}var Pl=(0,l.aZ)({name:"ConditionInput",props:{characterInput:{type:Object,required:!0},conditionInput:{type:Object,required:!0},conditionAdjustments:{type:Object,required:!0}},emits:["update:condition"],setup(e,t){const{displayName:a,displayStatName:n,displayStatValue:s,displayOptionName:i}=(0,X.Z)(),o=(0,P.qj)((0,Tt.X8)(e.conditionInput.checkboxList)),r=(0,P.qj)((0,Tt.X8)(e.conditionInput.selectList)),c=(0,P.qj)((0,Tt.X8)(e.conditionInput.conditionValues)),u=(0,P.iH)(!1),d=e=>{o.splice(0,o.length,...e.checkboxList),r.splice(0,r.length,...e.selectList),(0,Tt.fX)(c,e.conditionValues)},p=(0,l.Fl)((()=>{const t=new Map;return[e.characterInput.damageDetailMyCharacter,e.characterInput.damageDetailMyWeapon,e.characterInput.damageDetailMyArtifactSets].forEach((e=>{e&&e.排他&&e.排他.forEach(((e,a)=>{t.set(a,e)}))})),t})),f=async(e,a)=>{let n;e.currentTarget instanceof HTMLInputElement?e.currentTarget.checked&&(n=p.value.get(a.name)):e.currentTarget instanceof HTMLSelectElement&&e.currentTarget.value&&(n=p.value.get(a.name)),n&&n.forEach((e=>{o.filter((t=>t.name==e)).length>0&&(c[e]=!1),r.filter((t=>t.name==e)).length>0&&(c[e]=0)})),await(0,l.Y3)(),t.emit("update:condition",c)},m=(0,l.Fl)((()=>{const t=[];for(const a of Object.keys(e.conditionAdjustments)){const l=e.conditionAdjustments[a];let i=n(a).replace("%","");if(null==l);else if((0,Tt.hj)(l)){if(0==l)continue;l>=0&&("別枠乗算"==a.split(".")[0]?i+="=":i+="+"),i+=s(a,l)}else l&&(i+="="+l);t.push(i)}return t}));return{displayName:a,displayOptionName:i,initialize:d,checkboxList:o,selectList:r,conditionValues:c,updateCondition:f,isDisplayDescription:u,displayStatAjustmentList:m}}});const Yl=(0,B.Z)(Pl,[["render",Tl],["__scopeId","data-v-2b2e2c5c"]]);var xl=Yl;const Wl={key:0,class:"stats"},Kl={colspan:"3"},Fl={class:"open-close"},Xl=["onUpdate:modelValue"],Zl=["onUpdate:modelValue"],Bl={class:"stat-value"},Jl={class:"left"},$l={colspan:"2",class:"right"},Gl=["disabled"],Ql={key:1,class:"two-table"},es={class:"stats"},ts={colspan:"2"},as={class:"open-close"},ns=["onUpdate:modelValue"],ls={class:"stat-value"},ss={class:"stats"},is={colspan:"2"},os={class:"open-close"},rs=["onUpdate:modelValue"],cs={class:"stat-value"},us={class:"left"};function ds(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)("fieldset",null,[e.editable?((0,l.wg)(),(0,l.iD)("table",Wl,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.categoryList,(a=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a},[(0,l._)("tr",null,[(0,l._)("th",Kl,[(0,l._)("label",Fl,[(0,l.wy)((0,l._)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":t=>e.categoryOpenClose[a]=t},null,8,Xl),[[n.e8,e.categoryOpenClose[a]]]),(0,l._)("span",null,(0,s.zw)(e.displayName(a)),1)])])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.visibleStatList(a),(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("th",null,(0,s.zw)(e.displayStatAbbrev(a)),1),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":t=>e.statAdjustments[a]=t,onChange:t[0]||(t[0]=(...t)=>e.adjustmentsOnChange&&e.adjustmentsOnChange(...t))},null,40,Zl),[[n.nr,e.statAdjustments[a]]])]),(0,l._)("td",Bl,(0,s.zw)(e.displayStatValue(a,e.statsObj[a])),1)])))),128))],64)))),128)),(0,l._)("tr",null,[(0,l._)("td",Jl,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=t=>e.editable=t)},null,512),[[n.e8,e.editable]]),(0,l.Uk)(" "+(0,s.zw)(e.displayName("補正値入力モード")),1)])]),(0,l._)("td",$l,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.initializable=t)},null,512),[[n.e8,e.initializable]]),(0,l.Uk)(" "+(0,s.zw)(e.displayName("補正値0初期化")),1)]),(0,l._)("button",{type:"button",disabled:!e.initializable,onClick:t[3]||(t[3]=(...t)=>e.initializeAdjustments&&e.initializeAdjustments(...t))},(0,s.zw)(e.displayName("実行")),9,Gl)])])])):(0,l.kq)("",!0),e.editable?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("table",Ql,[(0,l._)("tr",null,[(0,l._)("td",null,[(0,l._)("table",es,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.category1List,(t=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[(0,l._)("tr",null,[(0,l._)("th",ts,[(0,l._)("label",as,[(0,l.wy)((0,l._)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":a=>e.categoryOpenClose[t]=a},null,8,ns),[[n.e8,e.categoryOpenClose[t]]]),(0,l._)("span",null,(0,s.zw)(e.displayName(t)),1)])])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.visibleStatList(t),(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("th",null,(0,s.zw)(e.displayStatAbbrev(t)),1),(0,l._)("td",ls,(0,s.zw)(e.displayStatValue(t,e.statsObj[t])),1)])))),128))],64)))),128))])]),(0,l._)("td",null,[(0,l._)("table",ss,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.category2List,(t=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[(0,l._)("tr",null,[(0,l._)("th",is,[(0,l._)("label",os,[(0,l.wy)((0,l._)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":a=>e.categoryOpenClose[t]=a},null,8,rs),[[n.e8,e.categoryOpenClose[t]]]),(0,l._)("span",null,(0,s.zw)(e.displayName(t)),1)])])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.visibleStatList(t),(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("th",null,(0,s.zw)(e.displayStatAbbrev(t)),1),(0,l._)("td",cs,(0,s.zw)(e.displayStatValue(t,e.statsObj[t])),1)])))),128))],64)))),128))])])]),(0,l._)("tr",null,[(0,l._)("td",us,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=t=>e.editable=t)},null,512),[[n.e8,e.editable]]),(0,l.Uk)(" "+(0,s.zw)(e.displayName("補正値入力モード")),1)])])])]))])}var ps=(0,l.aZ)({name:"StatsInput1",props:{statsInput:{type:Object,required:!0},category1List:{type:Array,required:!0},category2List:{type:Array,required:!0}},emits:["update:stat-adjustments"],setup(e,t){const{displayName:a,displayStatAbbrev:n,displayStatValue:s}=(0,X.Z)(),i=(0,P.qj)(e.statsInput),o=(0,P.iH)(!1),r=(0,P.iH)(!1),c=e=>Je.kM.get(e),u=i.statsObj,d=i.statAdjustments,p=[...e.category1List,...e.category2List],f=(0,P.iH)({});for(const l of p)f.value[l]=!1;const m=e=>c(e)?.filter((t=>f.value[e]||i.statsObj&&i.statsObj[t]||i.statAdjustments&&i.statAdjustments[t]))??[],h=async()=>{await(0,l.Y3)(),t.emit("update:stat-adjustments",i.statAdjustments)},g=()=>{for(const e of p){const t=c(e);if(t)for(const e of t)i.statAdjustments[e]=0}h()};return g(),{displayName:a,displayStatAbbrev:n,displayStatValue:s,categoryList:p,statList:c,visibleStatList:m,statsObj:u,statAdjustments:d,categoryOpenClose:f,adjustmentsOnChange:h,editable:o,initializable:r,initializeAdjustments:g}}});const fs=(0,B.Z)(ps,[["render",ds],["__scopeId","data-v-1eeb9bd3"]]);var ms=fs;const hs=e=>((0,l.dD)("data-v-93daef92"),e=e(),(0,l.Cn)(),e),gs={class:"elemental-resonance"},ys=["onUpdate:modelValue","onChange"],bs=["onChange"],ws=hs((()=>(0,l._)("option",{value:""},null,-1))),_s=hs((()=>(0,l._)("option",{value:"20"},"+20",-1))),vs=hs((()=>(0,l._)("option",{value:"30"},"+30",-1))),ks=hs((()=>(0,l._)("option",{value:"50"},"+50",-1))),Ss=[ws,_s,vs,ks],Cs=hs((()=>(0,l._)("hr",null,null,-1))),Os={class:"option-description"},Ds=hs((()=>(0,l._)("hr",null,null,-1)));function Rs(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)("fieldset",gs,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.elementalResonanceList,(a=>((0,l.wg)(),(0,l.iD)("label",{key:a.key},[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.elementalResonanceChecked[a.key]=t,onChange:t=>e.onChange(a.key)},null,40,ys),[[n.e8,e.elementalResonanceChecked[a.key]]]),(0,l._)("span",null,(0,s.zw)(e.displayName(a.名前)),1),"草元素共鳴"==a.key?(0,l.wy)(((0,l.wg)(),(0,l.iD)("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dendroOption=t),onChange:t=>e.onChange(a.key)},Ss,40,bs)),[[n.bM,e.dendroOption]]):(0,l.kq)("",!0)])))),128)),Cs,(0,l._)("ul",Os,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.displayStatAjustmentList,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},(0,s.zw)(e),1)))),128))]),Ds,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.descriptionList,((t,a)=>((0,l.wg)(),(0,l.iD)("article",{key:a,class:(0,s.C_)(e.elementClass(t[0]))},(0,s.zw)(t[1]),3)))),128))])}var Ns=(0,l.aZ)({name:"ElementalResonanceInput",props:{elementalResonance:{type:Object}},emits:["update:elemental-resonance"],setup(e,t){const{displayName:a}=(0,X.Z)(),n=$e.TG,s=(0,P.qj)({});n.forEach((e=>{s[e.key]=!1}));const i=(0,P.iH)(0),o=(0,P.qj)((0,Tt.X8)(Je.NY)),r=o.conditionValues,c=(0,l.Fl)((()=>e.elementalResonance?.conditionAdjustments??{})),u=(0,l.Fl)((()=>{const t=[],a=e.elementalResonance?.conditionAdjustments;if(a)for(const e of Object.keys(a)){const a=c.value[e];if(!a)continue;let n=e.replace("%","").replace(/^敵/,"敵の");n+=a>=0?"+":"",n+=a,(e.endsWith("%")||Je.V6.includes(e))&&(n+="%"),t.push(n)}return t})),d=async e=>{if(e&&s[e])if("元素共鳴なし"==e)for(const t of Object.keys(s).filter((e=>"元素共鳴なし"!=e)))s[t]=!1;else Object.keys(s).filter((e=>"元素共鳴なし"!=e&&s[e])).length>2&&(s[e]=!1),s["元素共鳴なし"]=!1;await(0,l.Y3)(),Object.keys(s).forEach((e=>{r[e]=s[e]})),i.value&&(r["dendroOption"]=i.value),t.emit("update:elemental-resonance",r)},p=e=>{Object.keys(s).forEach((t=>{t in e.conditionValues?s[t]=Boolean(e.conditionValues[t]):s[t]=!1})),"dendroOption"in e.conditionValues&&(i.value=Number(e.conditionValues["dendroOption"])),d()},f=(0,l.Fl)((()=>{const e=[];for(const t of Object.keys(s).filter((e=>s[e])))e.push([t,$e._9[t].説明]);return e}));(0,l.YP)(e,(()=>{u.value}));const m=e=>{let t="";return e&&(t=$e.X9[e.substring(0,1)]),t};return{displayName:a,elementalResonanceList:n,elementalResonanceChecked:s,dendroOption:i,displayStatAjustmentList:u,descriptionList:f,elementClass:m,onChange:d,initializeValues:p}}});const Vs=(0,B.Z)(Ns,[["render",Rs],["__scopeId","data-v-93daef92"]]);var Ms=Vs;const js=e=>((0,l.dD)("data-v-4041f6c7"),e=e(),(0,l.Cn)(),e),Hs={class:"team-option"},As={key:0,class:"supporter"},Is={class:"supporter"},zs=["id","onUpdate:modelValue"],Ls=["for"],Es=["onClick"],Us=js((()=>(0,l._)("span",{class:"material-symbols-outlined"}," settings ",-1))),qs=[Us],Ts={class:"builddata-selector"},Ps=["onUpdate:modelValue"],Ys=["value"],xs={class:"left"},Ws=["onUpdate:modelValue","value","disabled"],Ks=["onUpdate:modelValue","disabled"],Fs=["value"],Xs={key:1,class:"supporter-else"},Zs=["id","onUpdate:modelValue"],Bs=["for"],Js=js((()=>(0,l._)("hr",null,null,-1))),$s={class:"option-description"},Gs=js((()=>(0,l._)("p",{class:"notice"},[(0,l.Uk)(" キャラクターの天賦レベルやステータスによって効果量が変動する種類のオプションはデフォルト名称の構成保存データが存在する場合に選択可能になります。 "),(0,l._)("br"),(0,l.Uk)(" 構成保存データのデフォルト名称：あなたの{キャラクターの名前} ")],-1)));function Qs(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("fieldset",Hs,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.supporterKeyList,(a=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a},[e.supporterOpenClose[a]?(0,l.wy)(((0,l.wg)(),(0,l.iD)("fieldset",As,[(0,l._)("legend",Is,[(0,l.wy)((0,l._)("input",{class:"hidden",id:"supporter-"+a,type:"checkbox","onUpdate:modelValue":t=>e.supporterOpenClose[a]=t},null,8,zs),[[n.e8,e.supporterOpenClose[a]]]),(0,l._)("label",{class:"toggle-switch unfold",for:"supporter-"+a},[(0,l._)("span",null,(0,s.zw)(e.displayName(a)),1)],8,Ls),e.builddataSelectable(a)?((0,l.wg)(),(0,l.iD)("span",{key:0,class:"builddata-selector",onClick:t=>e.builddataSelectorVisible[a]=!e.builddataSelectorVisible[a]},qs,8,Es)):(0,l.kq)("",!0)]),(0,l.wy)((0,l._)("div",Ts,[(0,l._)("label",null,[(0,l.Uk)("buildname "),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t=>e.selectedBuildname[a]=t,onChange:t[0]||(t[0]=(...t)=>e.buildnameSelectionOnChange&&e.buildnameSelectionOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.buildnameList(a),(e=>((0,l.wg)(),(0,l.iD)("option",{value:e,key:e},(0,s.zw)(e),9,Ys)))),128))],40,Ps),[[n.bM,e.selectedBuildname[a]]])])],512),[[n.F8,e.builddataSelectorVisible[a]]]),(0,l._)("div",xs,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.supporterCheckboxList(a),(a=>((0,l.wg)(),(0,l.iD)("label",{class:"condition",key:a.name},[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.conditionValues[a.name]=t,value:a.name,disabled:e.conditionDisabled(a),onChange:t[1]||(t[1]=(...t)=>e.onChange&&e.onChange(...t))},null,40,Ws),[[n.e8,e.conditionValues[a.name]]]),(0,l._)("span",null,(0,s.zw)(e.displayName(a.displayName)),1)])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.supporterSelectList(a),(a=>((0,l.wg)(),(0,l.iD)("label",{class:"condition",key:a.name},[(0,l._)("span",null,(0,s.zw)(e.displayName(a.displayName)),1),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t=>e.conditionValues[a.name]=t,disabled:e.conditionDisabled(a),onChange:t[2]||(t[2]=(...t)=>e.onChange&&e.onChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.options,((t,a)=>((0,l.wg)(),(0,l.iD)("option",{value:a,key:t},(0,s.zw)(e.displayOptionName(t)),9,Fs)))),128))],40,Ks),[[n.bM,e.conditionValues[a.name]]])])))),128))])],512)),[[n.F8,e.supporterVisible(a)]]):(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",Xs,[(0,l.wy)((0,l._)("input",{class:"hidden",id:"supporter-else-"+a,type:"checkbox","onUpdate:modelValue":t=>e.supporterOpenClose[a]=t},null,8,Zs),[[n.e8,e.supporterOpenClose[a]]]),(0,l._)("label",{class:(0,s.C_)("toggle-switch fold"+e.supporterOptionSelectedClass(a)),for:"supporter-else-"+a},[(0,l._)("span",null,(0,s.zw)(e.displayName(a)),1)],10,Bs)],512)),[[n.F8,e.supporterVisible(a)]])],64)))),128)),Js,(0,l._)("ul",$s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.displayStatAjustmentList,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},(0,s.zw)(e),1)))),128))]),(0,l._)("label",null,[(0,l.Uk)((0,s.zw)(e.displayName("すべて閉じる"))+" ",1),(0,l._)("button",{type:"button",onClick:t[3]||(t[3]=(...t)=>e.closeAllSupporters&&e.closeAllSupporters(...t))},(0,s.zw)(e.displayName("実行")),1)]),(0,l._)("label",null,[(0,l.Uk)((0,s.zw)(e.displayName("すべてクリア"))+" ",1),(0,l._)("button",{type:"button",onClick:t[4]||(t[4]=(...t)=>e.clearAllSupporterOptions&&e.clearAllSupporterOptions(...t))},(0,s.zw)(e.displayName("実行")),1)])]),Gs],64)}a(541);var ei=a(4806),ti=a.n(ei),ai=(0,l.aZ)({name:"TeamOptionInput",props:{character:{type:String,required:!0},savedSupporters:{type:Object,required:!0},elementalResonance:{type:Object}},emits:["update:team-option","update:buildname-selection"],setup(e,t){const{displayName:a,displayStatName:n,displayStatValue:s,displayOptionName:i}=(0,X.Z)(),o=Object.keys($e.bw),r=(0,P.qj)({}),c=[],u=[],d=[],p=new Map,f=new Map,m=(0,P.qj)((0,Tt.X8)(Je.NY)),h=m.conditionValues,g=m.checkboxList,y=m.selectList,b=(0,Tt.X8)(Je.q2),w=(0,Tt.X8)(Je.US),_=[],v=(0,P.qj)({}),k=(0,P.qj)({});for(const l of[$e.Rj])for(const e of l){const t=e.key.split("_")[0];if("詳細"in e)for(const a of e.詳細)"条件"in a?a.条件.startsWith(t+"*")||(a.条件=t+"*"+a.条件):a.条件=t+"*"+e.名前;c.splice(c.length,0,...(0,Je.CN)(e,null,null,null,u,d,"その他オプション"))}c.filter((e=>e["条件"])).forEach((e=>{(0,Je.UR)(e["条件"],p,f)})),u.filter((e=>e["条件"])).forEach((e=>{(0,Je.UR)(e["条件"],p,f)})),d.filter((e=>e["条件"])).forEach((e=>{(0,Je.UR)(e["条件"],p,f)})),p.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||p.set(t,["",...e]))}));const S=()=>{p.forEach(((e,t)=>{if(e){if(0==y.filter((e=>e.name==t)).length){const a=e[0].startsWith("required_");y.push({name:t,options:a||!e[0]?e:["",...e],required:a,displayName:t.replace(/^.+\*/,"")})}}else 0==g.filter((e=>e.name==t)).length&&g.push({name:t,displayName:t.replace(/^.+\*/,"")})})),p.forEach(((e,t)=>{null===e?t in h||(h[t]=!1):t in h||(h[t]=0)}))};S();for(const l of o)r[l]=!1;const C=(0,P.qj)(new Map),O=(e,t)=>{if("チームバフ"in t){const a=t.チームバフ,n=(0,Je.W3)(a);n.forEach((t=>{let a=e+"*";t.条件?a+=t.条件:a+=t.名前,t.条件=a,_.includes(a)||_.push(a);const n=(0,Je.e0)(t.種類);"STATUS"==n&&0==u.filter((e=>e.条件==a&&e.種類==t.種類)).length&&u.splice(u.length,0,t),"TALENT"==n&&0==d.filter((e=>e.条件==a&&e.種類==t.種類)).length&&d.splice(d.length,0,t),(0,Je.UR)(a,p,f)})),S()}},D=async t=>{const a=(0,Tt.X8)(Je.Hd),n=(0,Tt.X8)(Je.HN),l=(0,Tt.X8)(Je.NY),s=(0,Tt.X8)(Je.wX),i=(0,Tt.X8)(Je.HO),o=(0,Tt.X8)(Je.US);a.character=t.key,a.characterMaster=await(0,$e.tm)(a.character);const r=JSON.parse(t.value);if(await(0,Je.pS)(a,n,l,s,r),(0,Je.ge)(a),(0,Je.Cl)(a),(0,Je.Vk)(a),(0,Je.Hk)(l,a,s),Kt(n.聖遺物ステータスメイン効果,n.聖遺物メイン効果),Xt(n),e.elementalResonance&&(s.elementalResonance.conditionValues=e.elementalResonance,s.elementalResonance.conditionAdjustments=Gt(e.elementalResonance,l)),Zt(i,a,n,l,s),"雷電将軍"==a.character){const t=await(0,$e.tm)(e.character);i.statsObj["元素エネルギー"]=t["元素爆発"]["元素エネルギー"]}ea(o,a,l,i);const c=_.filter((e=>e.startsWith(a.character+"*")));return c.length>0&&(u.splice(0,u.length,...u.filter((e=>!c.includes(e.条件)))),d.splice(0,d.length,...d.filter((e=>!c.includes(e.条件)))),c.forEach((e=>{p.has(e)&&p.delete(e)})),g.splice(0,g.length,...g.filter((e=>!c.includes(e.name)))),y.splice(0,y.length,...y.filter((e=>!c.includes(e.name)))),_.splice(0,_.length,..._.filter((e=>!c.includes(e))))),O(a.character,a.characterMaster),O(a.character,a.weaponMaster),[i.statsObj,o]},R=async()=>{const t=[];for(const a of e.savedSupporters)k[a.key]=a.buildname,t.push(D(a).then((e=>({key:a.key,value:e}))));await Promise.all(t).then((e=>{e.forEach((e=>{C.set(e.key,e.value)}))}))};R();const N=e=>g.filter((t=>t.name.startsWith(e+"*"))),V=e=>y.filter((t=>t.name.startsWith(e+"*"))),M=t=>t!=e.character&&(!!N(t).length||!!V(t).length),j=e=>{for(const t of N(e))if(h[t.name])return" selected";for(const t of V(e))if(!t.required&&h[t.name])return" selected";return""},H=t=>{const a=t.name.split("*")[0];if(e.savedSupporters.filter((e=>e.key==a)).length>0)return!1;for(const e of u)if(e.条件&&e.条件.startsWith(t.name)){if((0,Tt.hj)(e.数値))return!1;if(Array.isArray(e.数値))for(const t of e.数値)if(!(0,Tt.hj)(t)&&!["+","-","*","/"].includes(t))return!0}for(const e of d)if(e.条件&&e.条件.startsWith(t.name)){if((0,Tt.hj)(e.数値))return!1;if(Array.isArray(e.数値))for(const t of e.数値)if(!(0,Tt.hj)(t)&&!["+","-","*","/"].includes(t))return!0}return!1},A=(0,l.Fl)((()=>{const t={},a=ta(m);return[u,d].forEach((n=>{if(n)for(const l of n){let n,s=l.数値;const i=l.上限,o=l.下限;if(l.条件){if(n=l.条件.substring(0,l.条件.indexOf("*")),n==e.character)continue;const t=aa(l.条件,a,6);if(0==t)continue;1!=t&&s&&(s=s.concat(["*",t]))}let r=b,c=w;if(n){const e=C.get(n);e&&(r=e[0],c=e[1])}let u=1/0;s&&(u=Qt(s,r,c,i,o));const d=[];if(l.種類)if(l.種類.startsWith("全")||l.種類.startsWith("敵全"))for(const e of["炎","水","風","雷","草","氷","岩"])d.push(l.種類.replace("全",e));else d.push(l.種類);for(const e of d){let a=e;l.対象&&(a+="."+l.対象),a in t?t[a]+=u:t[a]=u}}})),t})),I=(0,l.Fl)((()=>{const e=[];for(const t of Object.keys(A.value)){let a=n(t).replace("%","");const l=A.value[t];l!=1/0&&((0,Tt.hj)(l)?(l>=0&&("別枠乗算"==t.split(".")[0]?a+="=":a+="+"),a+=s(t,l)):l&&(a+="="+l)),e.push(a)}return e})),z=async()=>{await(0,l.Y3)(),(0,Tt.fX)(m.conditionAdjustments,A.value),t.emit("update:team-option",m)},L=async t=>{Object.keys(h).forEach((e=>{e in t.conditionValues?h[e]=t.conditionValues[e]:p.has(e)&&(p.get(e)?h[e]=0:h[e]=!1)}));const a=[];for(const n of e.savedSupporters)k[n.key]=n.buildname,a.push(D(n).then((e=>({key:n.key,value:e}))));await Promise.all(a).then((e=>{e.forEach((e=>{C.set(e.key,e.value)}))})),z()},E=()=>{for(const e of Object.keys(r))r[e]=!1},U=()=>{for(const e of g)h[e.name]=!1;for(const e of y)h[e.name]=0};function q(e,t){const a=(0,Je.R4)(e);return t==a?(0,Je.K1)(e):t.replace(new RegExp("^"+a+"_"),"")}const T=e=>{const t=new RegExp("^構成_"+e+"(_|$)"),a=Object.keys(localStorage).filter((e=>t.test(e))),n=a.map((t=>q(e,t))),l=(0,Je.K1)(e),s=n.filter((e=>e!=l)).sort();return n.includes(l)&&s.unshift(l),s},Y=e=>T(e).length>0;o.forEach((t=>{v[t]=!1;const a=T(t);if(a.length>0){let n=a[0];const l=e.savedSupporters.filter((e=>e.key==t));l.length&&(n=l[0].buildname),k[t]=n}}));const x=()=>{t.emit("update:buildname-selection",k)};return(0,l.YP)(e,(async(e,t)=>{const a=!ti().isEqual(e.elementalResonance?.conditionAdjustments,t.elementalResonance?.conditionAdjustments),n=[];if(ti().isEqual(e.savedSupporters,t.savedSupporters)){for(const l of e.savedSupporters){let e;e=!!a||("雷電将軍"==l.key||0==t.savedSupporters.filter((e=>ti().isEqual(e,l))).length),e&&n.push(D(l).then((e=>({key:l.key,value:e})))),k[l.key]=l.buildname}for(const a of t.savedSupporters){const t=0==e.savedSupporters.filter((e=>e.key==a.key)).length;t&&(C.delete(a.key),delete k[a.key])}await Promise.all(n).then((e=>{e.forEach((e=>{C.set(e.key,e.value)}))}))}z()})),{displayName:a,displayOptionName:i,supporterKeyList:o,supporterCheckboxList:N,supporterSelectList:V,conditionValues:h,supporterVisible:M,supporterOptionSelectedClass:j,conditionDisabled:H,displayStatAjustmentList:I,onChange:z,initializeValues:L,supporterOpenClose:r,closeAllSupporters:E,clearAllSupporterOptions:U,builddataSelectable:Y,builddataSelectorVisible:v,buildnameList:T,selectedBuildname:k,buildnameSelectionOnChange:x}}});const ni=(0,B.Z)(ai,[["render",Qs],["__scopeId","data-v-4041f6c7"]]);var li=ni;const si=e=>((0,l.dD)("data-v-5def4660"),e=e(),(0,l.Cn)(),e),ii=["onUpdate:modelValue","value"],oi=["onUpdate:modelValue"],ri=["value"],ci=si((()=>(0,l._)("hr",null,null,-1))),ui={class:"option-description"};function di(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)("fieldset",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.checkboxList,(a=>((0,l.wg)(),(0,l.iD)("label",{key:a.name},[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.conditionValues[a.name]=t,value:a,onChange:t[0]||(t[0]=(...t)=>e.onChange&&e.onChange(...t))},null,40,ii),[[n.e8,e.conditionValues[a.name]]]),(0,l._)("span",null,(0,s.zw)(e.displayName(a.name)),1)])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.selectList,(a=>((0,l.wg)(),(0,l.iD)("label",{key:a.name},[(0,l._)("span",null,(0,s.zw)(e.displayName(a.name)),1),(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t=>e.conditionValues[a.name]=t,onChange:t[1]||(t[1]=(...t)=>e.onChange&&e.onChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.options,((t,a)=>((0,l.wg)(),(0,l.iD)("option",{value:a,key:t},(0,s.zw)(e.displayOptionName(t)),9,ri)))),128))],40,oi),[[n.bM,e.conditionValues[a.name]]])])))),128)),ci,(0,l._)("ul",ui,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.displayStatAjustmentList,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},(0,s.zw)(e),1)))),128))])])}var pi=(0,l.aZ)({name:"MiscOptionInput",emits:["update:misc-option"],setup(e,t){const{displayName:a,displayStatName:n,displayStatValue:s,displayOptionName:i}=(0,X.Z)(),o=[],r=[],c=[],u=new Map,d=new Map,p=(0,P.qj)((0,Tt.X8)(Je.NY)),f=p.conditionValues,m=p.checkboxList,h=p.selectList,g=(0,Tt.X8)(Je.US);for(const l of[$e.L6,$e.dJ])for(const e of l){if("詳細"in e)for(const t of e.詳細)"条件"in t||(t.条件=e.key);o.splice(o.length-1,0,...(0,Je.CN)(e,null,null,null,r,c,"その他オプション"))}r.filter((e=>e["条件"])).forEach((e=>{(0,Je.UR)(e["条件"],u,d)})),c.filter((e=>e["条件"])).forEach((e=>{(0,Je.UR)(e["条件"],u,d)})),u.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(t,["",...e]))})),u.forEach(((e,t)=>{if(e){if(0==h.filter((e=>e.name==t)).length){const a=e[0].startsWith("required_");h.push({name:t,options:e,required:a})}}else 0==m.filter((e=>e.name==t)).length&&m.push({name:t})})),u.forEach(((e,t)=>{f[t]=null!==e&&0}));const y=(0,l.Fl)((()=>{const e={},t=ta(p);for(const a of r){let n;if(a["数値"]){let l=a["数値"];if(a["条件"]){const e=aa(a["条件"],t,0);if(0==e)continue;1!=e&&(l=l.concat(["*",e]))}n=Qt(l,e,g)}a["種類"]&&(void 0===n?e[a["種類"]]=0:a["種類"]in e?e[a["種類"]]+=n:e[a["種類"]]=n)}return e})),b=(0,l.Fl)((()=>{const e=[];for(const t of Object.keys(y.value)){const a=y.value[t];let l=n(t).replace("%","");(0,Tt.hj)(a)?(a>=0&&("別枠乗算"==t.split(".")[0]?l+="=":l+="+"),l+=s(t,a)):a&&(l+="="+a),e.push(l)}return e})),w=async()=>{await(0,l.Y3)(),(0,Tt.fX)(p.conditionAdjustments,y.value),t.emit("update:misc-option",p)},_=e=>{Object.keys(f).forEach((t=>{t in e.conditionValues?f[t]=e.conditionValues[t]:u.has(t)&&(u.get(t)?f[t]=0:f[t]=!1)})),w()};return{displayName:a,displayOptionName:i,checkboxList:m,selectList:h,conditionValues:f,displayStatAjustmentList:b,onChange:w,initializeValues:_}}});const fi=(0,B.Z)(pi,[["render",di],["__scopeId","data-v-5def4660"]]);var mi=fi;const hi=e=>((0,l.dD)("data-v-3f7057fe"),e=e(),(0,l.Cn)(),e),gi={class:"elemental-reaction"},yi={for:"増幅反応-なし"},bi={for:"増幅反応-蒸発"},wi={for:"増幅反応-溶解"},_i={for:"増幅反応-超激化"},vi={for:"増幅反応-草激化"},ki={key:4,class:"pyro"},Si={key:5,class:"electro"},Ci={key:6,class:"cryo"},Oi={key:8},Di={key:9,class:"pyro"},Ri={key:10,class:"dendro"},Ni={key:11,class:"dendro"},Vi={key:12,class:"dendro"},Mi={key:0,class:"result v-style"},ji=["onClick"],Hi=["rowspan"],Ai={key:1,class:"result h-style"},Ii=["onClick"],zi=["colspan"],Li=hi((()=>(0,l._)("hr",null,null,-1))),Ei={class:"result damage-result"},Ui={key:0},qi={class:"notes"},Ti={class:"right"},Pi=hi((()=>(0,l._)("option",{value:"1"},"V-style",-1))),Yi=hi((()=>(0,l._)("option",{value:"0"},"H-style",-1))),xi=[Pi,Yi];function Wi(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",gi,[(0,l._)("input",{id:"増幅反応-なし",type:"radio",value:"なし",name:"増幅反応-name",onChange:t[0]||(t[0]=t=>e.増幅反応="なし"),checked:""},null,32),(0,l._)("label",yi,(0,s.zw)(e.displayName("反応なし")),1),e.damageResult.元素反応.蒸発倍率?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("input",{id:"増幅反応-蒸発",type:"radio",value:"蒸発",name:"増幅反応-name",onChange:t[1]||(t[1]=t=>e.増幅反応="蒸発")},null,32),(0,l._)("label",bi,[(0,l.Uk)((0,s.zw)(e.displayName("蒸発"))+"×",1),(0,l._)("span",null,(0,s.zw)(Math.round(100*e.damageResult.元素反応.蒸発倍率)/100),1)])],64)):(0,l.kq)("",!0),e.damageResult.元素反応.溶解倍率?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("input",{id:"増幅反応-溶解",type:"radio",value:"溶解",name:"増幅反応-name",onChange:t[2]||(t[2]=t=>e.増幅反応="溶解")},null,32),(0,l._)("label",wi,[(0,l.Uk)((0,s.zw)(e.displayName("溶解"))+"×",1),(0,l._)("span",null,(0,s.zw)(Math.round(100*e.damageResult.元素反応.溶解倍率)/100),1)])],64)):(0,l.kq)("",!0),e.damageResult.元素反応.超激化ダメージ?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l._)("input",{id:"増幅反応-超激化",type:"radio",value:"超激化",name:"増幅反応-name",onChange:t[3]||(t[3]=t=>e.増幅反応="超激化")},null,32),(0,l._)("label",_i,[(0,l.Uk)((0,s.zw)(e.displayName("超激化"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.超激化ダメージ)),1)])],64)):(0,l.kq)("",!0),e.damageResult.元素反応.草激化ダメージ?((0,l.wg)(),(0,l.iD)(l.HY,{key:3},[(0,l._)("input",{id:"増幅反応-草激化",type:"radio",value:"草激化",name:"増幅反応-name",onChange:t[4]||(t[4]=t=>e.増幅反応="草激化")},null,32),(0,l._)("label",vi,[(0,l.Uk)((0,s.zw)(e.displayName("草激化"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.草激化ダメージ)),1)])],64)):(0,l.kq)("",!0),e.damageResult.元素反応.過負荷ダメージ?((0,l.wg)(),(0,l.iD)("label",ki,[(0,l.Uk)((0,s.zw)(e.displayName("過負荷"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.過負荷ダメージ)),1)])):(0,l.kq)("",!0),e.damageResult.元素反応.感電ダメージ?((0,l.wg)(),(0,l.iD)("label",Si,[(0,l.Uk)((0,s.zw)(e.displayName("感電"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.感電ダメージ)),1)])):(0,l.kq)("",!0),e.damageResult.元素反応.超電導ダメージ?((0,l.wg)(),(0,l.iD)("label",Ci,[(0,l.Uk)((0,s.zw)(e.displayName("超電導"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.超電導ダメージ)),1)])):(0,l.kq)("",!0),e.damageResult.元素反応.拡散ダメージ?((0,l.wg)(),(0,l.iD)("label",{key:7,class:(0,s.C_)(e.elementClass(e.元素反応.拡散元素))},[(0,l.Uk)((0,s.zw)(e.displayName("拡散"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.swirlDmg)),1)],2)):(0,l.kq)("",!0),e.damageResult.元素反応.結晶吸収量?((0,l.wg)(),(0,l.iD)("label",Oi,[(0,l.Uk)((0,s.zw)(e.displayName("結晶"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.結晶吸収量)),1)])):(0,l.kq)("",!0),e.damageResult.元素反応.燃焼ダメージ?((0,l.wg)(),(0,l.iD)("label",Di,[(0,l.Uk)((0,s.zw)(e.displayName("燃焼"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.燃焼ダメージ)),1)])):(0,l.kq)("",!0),e.damageResult.元素反応.開花ダメージ?((0,l.wg)(),(0,l.iD)("label",Ri,[(0,l.Uk)((0,s.zw)(e.displayName("開花"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.開花ダメージ)),1)])):(0,l.kq)("",!0),e.damageResult.元素反応.烈開花ダメージ?((0,l.wg)(),(0,l.iD)("label",Ni,[(0,l.Uk)((0,s.zw)(e.displayName("烈開花"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.烈開花ダメージ)),1)])):(0,l.kq)("",!0),e.damageResult.元素反応.超開花ダメージ?((0,l.wg)(),(0,l.iD)("label",Vi,[(0,l.Uk)((0,s.zw)(e.displayName("超開花"))+" ",1),(0,l._)("span",null,(0,s.zw)(Math.round(e.damageResult.元素反応.超開花ダメージ)),1)])):(0,l.kq)("",!0)]),(0,l._)("fieldset",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.CATEGORY_LIST,(t=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[e.damageResult[t]&&e.damageResult[t].length>0?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},["1"==e.resultStyleRef?((0,l.wg)(),(0,l.iD)("table",Mi,[(0,l._)("thead",null,[(0,l._)("tr",{onClick:a=>e.categoryOnClick(t)},[(0,l._)("th",null,(0,s.zw)(e.displayName(t)),1),(0,l._)("th",null,(0,s.zw)(e.displayName("期待値")),1),(0,l._)("th",null,(0,s.zw)(e.displayName("会心")),1),(0,l._)("th",null,(0,s.zw)(e.displayName("非会心")),1)],8,ji)]),e.categoryOpenClose[t]?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:0},(0,l.Ko)(e.itemList(t),(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a[0]},[a[a.length-1]?((0,l.wg)(),(0,l.iD)("th",{key:0,rowspan:a[a.length-1]},(0,s.zw)(e.displayNameV(a[0])),9,Hi)):(0,l.kq)("",!0),(0,l._)("td",{class:(0,s.C_)("damage-value "+e.elementClass(a[1]))},(0,s.zw)(e.displayDamageValue(a,2,t)),3),(0,l._)("td",{class:(0,s.C_)("damage-value "+e.elementClass(a[1]))},(0,s.zw)(e.displayDamageValue(a,3,t)),3),(0,l._)("td",{class:(0,s.C_)("damage-value "+e.elementClass(a[1]))},(0,s.zw)(e.displayDamageValue(a,4,t)),3)])))),128)):(0,l.kq)("",!0)])):(0,l.kq)("",!0),"0"==e.resultStyleRef?((0,l.wg)(),(0,l.iD)("table",Ai,[(0,l._)("thead",null,[(0,l._)("tr",{onClick:a=>e.categoryOnClick(t)},[(0,l._)("th",null,(0,s.zw)(e.displayName(t)),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.itemList(t),(a=>((0,l.wg)(),(0,l.iD)(l.HY,{key:a[0]},[a[a.length-1]?((0,l.wg)(),(0,l.iD)("th",{key:0,colspan:a[a.length-1]},(0,s.zw)(e.displayNameH(a[0],t)),9,zi)):(0,l.kq)("",!0)],64)))),128))],8,Ii)]),(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("期待値")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.itemList(t),(a=>((0,l.wg)(),(0,l.iD)("td",{key:a[0],class:(0,s.C_)("damage-value "+e.elementClass(a[1]))},(0,s.zw)(e.displayDamageValue(a,2,t)),3)))),128))]),e.categoryOpenClose[t]?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("会心")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.itemList(t),(a=>((0,l.wg)(),(0,l.iD)("td",{key:a[0],class:(0,s.C_)("damage-value "+e.elementClass(a[1]))},(0,s.zw)(e.displayDamageValue(a,3,t)),3)))),128))]),(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("非会心")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.itemList(t),(a=>((0,l.wg)(),(0,l.iD)("td",{key:a[0],class:(0,s.C_)("damage-value "+e.elementClass(a[1]))},(0,s.zw)(e.displayDamageValue(a,4,t)),3)))),128))])],64)):(0,l.kq)("",!0)])):(0,l.kq)("",!0)],64)):(0,l.kq)("",!0)],64)))),128)),Li,(0,l._)("table",Ei,[(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("被ダメージ")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.damageTakenList,(t=>((0,l.wg)(),(0,l.iD)("td",{class:"damage-value",key:t.key},[(0,l._)("span",{class:(0,s.C_)(e.elementClass(t.key))},(0,s.zw)(Math.round(t.value)),3)])))),128))]),(0,l._)("tr",null,[(0,l._)("th",null,(0,s.zw)(e.displayName("耐久スコア")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.resScoreList,(t=>((0,l.wg)(),(0,l.iD)("td",{class:"damage-value",key:t.key},[(0,l._)("span",{class:(0,s.C_)(e.elementClass(t.key))},(0,s.zw)(Math.round(t.value)),3)])))),128))])])]),e.damageResult.キャラクター注釈.length>0?((0,l.wg)(),(0,l.iD)("div",Ui,[(0,l._)("ul",qi,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.damageResult.キャラクター注釈,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t},(0,s.zw)(e),1)))),128))])])):(0,l.kq)("",!0),(0,l._)("div",Ti,[(0,l._)("label",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.resultStyleRef=t)},xi,512),[[n.bM,e.resultStyleRef]])])])],64)}var Ki=(0,l.aZ)({name:"DamageResult",props:{damageResult:{type:Object,required:!0}},setup(e){const{displayName:t}=(0,X.Z)(),a=(0,P.qj)(e.damageResult.元素反応),n=(0,P.iH)("なし"),s=e=>$e.X9[e],i=(0,P.iH)("1");(0,l.YP)(a,(()=>{("蒸発"==n.value&&0==a.蒸発倍率||"溶解"==n.value&&0==a.溶解倍率||"超激化"==n.value&&0==a.超激化ダメージ||"草激化"==n.value&&0==a.草激化ダメージ)&&(n.value="なし",document.getElementById("増幅反応-なし").checked=!0)}));const o=(0,l.Fl)((()=>{let e=a.拡散ダメージ;return"蒸発"==n.value&&["炎","水"].includes(a.拡散元素)?e*=a.蒸発倍率:"溶解"==n.value&&["炎","氷"].includes(a.拡散元素)?e*=a.溶解倍率:"超激化"==n.value&&"雷"==a.拡散元素&&(e+=a.超激化ダメージ),e})),r=(0,l.Fl)((()=>d("通常攻撃").filter((e=>e[0].endsWith("段ダメージ")&&!e[0].startsWith("非表示_"))).length)),c=(e,t,l)=>{let s=e[t];if(!s)return"-";if(!["シールド"].includes(e[5]))if("蒸発"==n.value&&["炎","水"].includes(e[1]))s*=a.蒸発倍率,a.拡散ダメージ&&["炎","水"].includes(a.拡散元素)&&e[1]!=a.拡散元素&&("炎"==e[1]?s*=1.5:"水"==e[1]&&(s*=2),"炎"==a.拡散元素?s/=1.5:"水"==a.拡散元素&&(s/=2));else if("溶解"==n.value&&["炎","氷"].includes(e[1]))s*=a.溶解倍率,a.拡散ダメージ&&["炎","氷"].includes(a.拡散元素)&&e[1]!=a.拡散元素&&("炎"==e[1]?s*=2:"氷"==e[1]&&(s*=1.5),"炎"==a.拡散元素?s/=2:"氷"==a.拡散元素&&(s/=1.5));else if("超激化"==n.value&&["雷"].includes(e[1])){let n=a.超激化ダメージ;e[7]&&(n*=e[7]),e[8]&&(n*=e[8]),n*=e[t]/e[4],"合計ダメージ"==e[0]&&"通常攻撃"==l&&(n*=r.value),s+=n}else if("草激化"==n.value&&["草"].includes(e[1])){let n=a.草激化ダメージ;e[7]&&(n*=e[7]),e[8]&&(n*=e[8]),n*=e[t]/e[4],"合計ダメージ"==e[0]&&"通常攻撃"==l&&(n*=r.value),s+=n}return s=s<10?Math.round(100*s)/100:s<100?Math.round(10*s)/10:Math.round(s),s},u=["通常攻撃","重撃","落下攻撃","元素スキル","元素爆発","その他"],d=t=>{const a=[],n=e.damageResult[t].filter((e=>!e[0].startsWith("非表示")));for(let e=0;e<n.length;e++){let t=1;t=e>0&&n[e][0]==n[e-1][0]?0:n.slice(e).filter((t=>t[0]==n[e][0])).length,a.push([...n[e],t])}return a},p=(0,P.qj)({});for(const l of u)p[l]=!0;const f=e=>{p[e]=!p[e]},m=e=>{if(e&&"ja-jp"==Be.Z.global.locale.value&&e.length>10){let t=e;return t=t.replace(/のダメージ$/,"").replace(/ダメージ$/,""),t}return t(e)},h=(e,a)=>{if(e&&"ja-jp"==Be.Z.global.locale.value&&d(a).length>2){let t=e;return t=t.replace(/のダメージ$/,"").replace(/ダメージ$/,""),t}return t(e)},g=(0,l.Fl)((()=>{const t=e.damageResult.被ダメージ.filter((e=>"物理"==e.key));for(const a of e.damageResult.被ダメージ.filter((e=>"物理"!=e.key))){const e=t.map((e=>e.value));e.includes(a.value)||t.push(a)}return t})),y=(0,l.Fl)((()=>{const t=e.damageResult.耐久スコア.filter((e=>"物理"==e.key));for(const a of e.damageResult.耐久スコア.filter((e=>"物理"!=e.key))){const e=t.map((e=>e.value));e.includes(a.value)||t.push(a)}return t}));return{displayName:t,displayNameV:m,displayNameH:h,"元素反応":a,"増幅反応":n,swirlDmg:o,elementClass:s,displayDamageValue:c,CATEGORY_LIST:u,itemList:d,categoryOpenClose:p,categoryOnClick:f,resultStyleRef:i,damageTakenList:g,resScoreList:y}}});const Fi=(0,B.Z)(Ki,[["render",Wi],["__scopeId","data-v-3f7057fe"]]);var Xi=Fi;const Zi=e=>((0,l.dD)("data-v-0a19816a"),e=e(),(0,l.Cn)(),e),Bi={class:"total-damage"},Ji={class:"damage-name"},$i={class:"total-damage-value"},Gi=Zi((()=>(0,l._)("hr",null,null,-1))),Qi={class:"action-list"},eo=["onClick"],to=["src","alt"],ao=Zi((()=>(0,l._)("hr",null,null,-1))),no={class:"customized-result"},lo={class:"category handle with-tooltip"},so=["src","alt"],io={class:"tooltip"},oo={class:"damage"},ro={class:"damage-name"},co={class:"reaction-list"},uo=["onClick"],po=["src","alt"],fo={class:"tooltip"},mo=["onUpdate:modelValue","onChange"],ho=["onClick"],go=Zi((()=>(0,l._)("span",{class:"material-symbols-outlined"}," close ",-1))),yo=[go],bo={class:"savedata"},wo=["value"],_o=Zi((()=>(0,l._)("p",{class:"notice"}," 天賦アイコンまたは元素反応アイコンをクリックしてスキルローテーションを設定してください。 ",-1)));function vo(e,t,a,i,o,r){const c=(0,l.up)("draggable");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("fieldset",null,[(0,l._)("table",Bi,[(0,l._)("tr",null,[(0,l._)("th",Ji,(0,s.zw)(e.displayName("合計ダメージ")),1),(0,l._)("td",$i,(0,s.zw)(Math.round(e.totalDamage)),1)])]),Gi,(0,l._)("ul",Qi,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.itemList,(t=>((0,l.wg)(),(0,l.iD)("li",{key:t.id},[(0,l._)("div",{class:"add-item",onClick:a=>e.addItem(t)},[(0,l._)("img",{class:(0,s.C_)("action"+e.itemImgClass(t)),src:t.src,alt:e.displayName(t.name)},null,10,to)],8,eo),(0,l._)("div",null,(0,s.zw)(e.displayName(t.name)),1)])))),128))]),ao,(0,l._)("table",no,[(0,l.Wm)(c,{list:e.customizedResultList,"item-key":"id",group:"action",sort:!0,handle:".handle"},{item:(0,l.w5)((({element:t,index:a})=>[(0,l._)("tr",null,[(0,l._)("th",lo,[(0,l._)("img",{class:(0,s.C_)("action"+e.itemImgClass(t)),src:t.src,alt:e.displayName(t.name)},null,10,so),(0,l._)("div",io,(0,s.zw)(e.displayName(t.name)),1)]),(0,l._)("td",oo,[(0,l._)("table",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.damageResultEntryList(t),((a,i)=>((0,l.wg)(),(0,l.iD)("tr",{key:i},[(0,l._)("th",ro,(0,s.zw)(e.displayName(a[0])),1),(0,l._)("td",co,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.amplifyingReactionList(t,i),(a=>((0,l.wg)(),(0,l.iD)("div",{class:"reaction with-tooltip",key:a[0],onClick:n=>e.reactionOnClick(t,i,a)},[(0,l._)("span",null,(0,s.zw)(e.reactionCount(t,i,a)),1),(0,l._)("img",{class:(0,s.C_)("reaction"+e.reactionUnselectedClass(t,i,a)),src:a[1],alt:e.displayName(a[0])},null,10,po),(0,l._)("div",fo,(0,s.zw)(e.displayName(a[0])),1)],8,uo)))),128))]),(0,l._)("td",null,[(0,l.Uk)(" × "),(0,l.wy)((0,l._)("input",{type:"number","onUpdate:modelValue":e=>t.counts[i]=e,min:"0",onChange:a=>e.countOnChange(t,i)},null,40,mo),[[n.nr,t.counts[i]]])]),(0,l._)("td",{class:(0,s.C_)("damage-value"+e.elementColorClass(t,i))},(0,s.zw)(Math.round(e.damageValue(t,i))),3)])))),128))])]),(0,l._)("td",null,[(0,l._)("button",{type:"button",onClick:t=>e.doDelete(a)},yo,8,ho)])])])),_:1},8,["list"])])]),(0,l._)("div",bo,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.savedataIndex=t),onChange:t[1]||(t[1]=(...t)=>e.load&&e.load(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.savedataList,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e[0],key:e[0]},(0,s.zw)(e[1]),9,wo)))),128))],544),[[n.bM,e.savedataIndex]]),(0,l._)("button",{type:"button",onClick:t[2]||(t[2]=(...t)=>e.save&&e.save(...t))},"Save"),(0,l._)("button",{type:"button",onClick:t[3]||(t[3]=(...t)=>e.remove&&e.remove(...t))},"Remove")]),_o],64)}var ko=a(6983),So=a.n(ko);let Co=1;var Oo=(0,l.aZ)({name:"RotationDamage",components:{draggable:So()},props:{characterMaster:{type:Object,required:!0},damageResult:{type:Object,required:!0}},setup(e){const{displayName:t,targetValue:a}=(0,X.Z)(),{characterMaster:n}=(0,P.BK)(e),s=["過負荷ダメージ","感電ダメージ","超電導ダメージ","拡散ダメージ","燃焼ダメージ","開花ダメージ","烈開花ダメージ","超開花ダメージ"],i=(0,l.Fl)((()=>{const e=new Map;return s.forEach((t=>{const a=t.replace(/ダメージ$/,"");Object.keys($e.q4).forEach((n=>{const l=$e.q4[n],s=Object.keys(l);s.includes(a)&&"元素"in l[a]&&e.set(t,l[a].元素)}))})),e})),o=t=>{let a=[];const n=t.category;return s.includes(n)?a.push([n,i.value.get(n),e.damageResult.元素反応[n],null,e.damageResult.元素反応[n],null,1,null,null]):a=e.damageResult[n].filter((e=>!e[0].startsWith("非表示")&&!e[0].endsWith("合計ダメージ")&&e[5]?.endsWith("ダメージ"))),a},r=(0,l.Fl)((()=>{const t=[];return $e.vN.forEach((e=>{const a=e.replace(/ダメージ$/,""),l=["重撃","落下攻撃"].includes(a)?"通常攻撃":a,s={};s.id=Co++,s.name=a,s.src=n.value[l].icon_url,s.category=a,s.reactions=[],s.counts=[];const i=o(s);for(let t=0;t<i.length;t++)s.reactions.push({}),["落下期間のダメージ"].includes(i[t][0])||"弓"==n.value.武器&&"重撃"==a&&i.length>3&&t<2?s.counts.push(0):s.counts.push(1);t.push(s)})),s.forEach((a=>{if(e.damageResult.元素反応[a]){const n=a.replace(/ダメージ$/,"");let l;l="拡散ダメージ"==a?e.damageResult.元素反応.拡散元素:i.value.get(a);const s={};s.id=Co++,s.name=n,s.src=$e.GN[l],s.category=a,s.reactions=[{}],s.counts=[1],t.push(s)}})),t})),c=e=>s.includes(e.category)?" reaction ":"",u=(0,P.qj)([]),d=e=>{const t=n.value.名前,a="ROTATION_"+t+"_"+e;return a},p=(0,P.iH)(1),f=new Map([["通常攻撃","N"],["重撃","C"],["落下攻撃","P"],["元素スキル","E"],["元素爆発","Q"]]),m="**** NEW DATA ****",h=(0,P.iH)(0),g=(0,l.Fl)((()=>{const e=[],t=n.value.名前,a=Object.keys(localStorage).filter((e=>e.startsWith("ROTATION_"+t+"_"))),l=a.map((e=>Number(e.replace("ROTATION_"+t+"_",""))));let s=Math.max(0,...l);for(let n=1;n<=s;n++){const t=d(n);let a=n+" : ";if(t in localStorage){const e=localStorage.getItem(t),n=JSON.parse(e);Array.isArray(n)&&n.forEach((e=>{if(f.has(e.name)){const t=f.get(e.name);if(a+=t,["N","C","P"].includes(t)){const t=Math.max(...e.counts);t&&(a+=t)}}else a+="*"}))}else a+=m;e.push([n,a,h.value])}const i=s+1,o=i+" : "+m;return e.push([i,o,h.value]),e})),y=()=>{if(u.length>0){const e=d(p.value),t=JSON.stringify(u);localStorage.setItem(e,t),h.value++}},b=()=>{const e=d(p.value);if(e in localStorage){const t=localStorage.getItem(e),a=JSON.parse(t);Array.isArray(a)&&u.splice(0,u.length,...a)}};b();const w=()=>{const e=d(p.value);e in localStorage&&(localStorage.removeItem(e),h.value++)};(0,l.YP)(n,(()=>{u.splice(0,u.length),p.value=1,b()}));const _=({id:e})=>{const t=r.value.filter((t=>t.id==e))[0],a=(0,Tt.X8)(t);return a.id=e++,a},v=e=>{u.push(_(e))},k=(t,a)=>{const n=[],l=o(t),s=l[a],i=s[1];return i&&(["炎","水"].includes(i)&&e.damageResult.元素反応.蒸発倍率>0&&n.push(["蒸発",$e.GN[["炎","水"].filter((e=>e!=i))[0]]]),["炎","氷"].includes(i)&&e.damageResult.元素反応.溶解倍率>0&&n.push(["溶解",$e.GN[["炎","氷"].filter((e=>e!=i))[0]]]),["雷"].includes(i)&&e.damageResult.元素反応.超激化ダメージ>0&&n.push(["超激化",$e.GN["草"]]),["草"].includes(i)&&e.damageResult.元素反応.草激化ダメージ>0&&n.push(["草激化",$e.GN["雷"]])),n},S=(e,t,a)=>{let n="";const l=e.reactions[t];return a[0]in l&&l[a[0]]&&(n=l[a[0]]),n},C=(e,t,a)=>{let n;return n=S(e,t,a)?"":" unselected ",n},O=(e,t,a)=>{const n=e.reactions[t];let l=e.counts[t];const s=o(e)[t];s[6]&&(l*=s[6]),a[0]in n?n[a[0]]<l?n[a[0]]++:n[a[0]]=0:n[a[0]]=1},D=(e,t)=>{const a=e.reactions[t],n=e.counts[t];Object.keys(a).forEach((e=>{n<a[e]&&(a[e]=n)}))},R=(t,a)=>{const n=o(t),l=n[a];let s=0;const i=t.reactions[a],r=t.counts[a];for(let o=0;o<r;o++){let t=l[2];["蒸発","溶解"].forEach((a=>{a in i&&o<i[a]&&(t*=e.damageResult.元素反応[a+"倍率"])})),s+=t}return["超激化","草激化"].forEach((t=>{if(t in i){let a=e.damageResult.元素反応[t+"ダメージ"];l[2]&&(a*=l[2]/l[4]),l[7]&&(a*=l[7]),l[8]&&(a*=l[8]),s+=a*i[t]}})),s},N=(e,t)=>{const a=o(e),n=a[t];return n[1]?" "+$e.X9[n[1]]+" ":""},V=(0,l.Fl)((()=>{let e=0;return u.forEach((t=>{const a=o(t);for(let n=0;n<a.length;n++)e+=R(t,n)})),e})),M=e=>{u.splice(e,1)};return{displayName:t,targetValue:a,itemList:r,itemImgClass:c,addItem:v,clone:_,damageResultEntryList:o,customizedResultList:u,amplifyingReactionList:k,reactionCount:S,reactionUnselectedClass:C,reactionOnClick:O,countOnChange:D,damageValue:R,elementColorClass:N,doDelete:M,totalDamage:V,savedataIndex:p,savedataList:g,save:y,load:b,remove:w}}});const Do=(0,B.Z)(Oo,[["render",vo],["__scopeId","data-v-0a19816a"]]);var Ro=Do;const No=e=>((0,l.dD)("data-v-358e4396"),e=e(),(0,l.Cn)(),e),Vo=No((()=>(0,l._)("img",{width:"32",height:"32",src:"images/Twitter social icons - rounded square - blue.png",alt:"Twitter"},null,-1))),Mo=[Vo];function jo(e,t,a,n,s,i){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("button",{type:"button",onClick:t[0]||(t[0]=t=>e.$emit("share:twitter"))},Mo)])}var Ho=(0,l.aZ)({name:"ShareSns",emits:["share:twitter"]});const Ao=(0,B.Z)(Ho,[["render",jo],["__scopeId","data-v-358e4396"]]);var Io=Ao;const zo=(0,l.uE)('<h2 data-v-477757e3>げんかるく</h2><fieldset data-v-477757e3><legend data-v-477757e3>構成保存の対象範囲</legend><button type="button" data-v-477757e3>キャラクター</button><button type="button" data-v-477757e3>武器</button><button type="button" data-v-477757e3>聖遺物セット効果</button><button type="button" data-v-477757e3>聖遺物メイン効果</button><button type="button" data-v-477757e3>聖遺物サブ効果</button><button type="button" data-v-477757e3>オプション条件</button><hr data-v-477757e3><a href="SavedataList.html" data-v-477757e3>保存構成リンク集</a></fieldset><fieldset data-v-477757e3><legend data-v-477757e3>聖遺物詳細画面OCR</legend><div class="description" data-v-477757e3> キャラクター＞聖遺物＞聖遺物詳細のスクリーンショットから聖遺物のステータスを設定する機能です。 読み取り精度はいまひとつなので、実行後に目視にて確認、修正願います。 本機能はすべてブラウザ内で処理されます。外部へのデータ送信などはありません。 </div></fieldset><fieldset data-v-477757e3><legend data-v-477757e3>被ダメージ表示</legend><div class="description" data-v-477757e3> 基礎ダメージ10000に対する被ダメージ(推定値)を表示します。<br data-v-477757e3> 基礎ダメージはざっくり防御力0の場合の被ダメージです。 </div></fieldset><p data-v-477757e3><a href="index2.html" data-v-477757e3>旧バージョン(V2)</a></p>',5);function Lo(e,t,a,n,l,s){return zo}var Eo=(0,l.aZ)({name:"AboutMyApp"});const Uo=(0,B.Z)(Eo,[["render",Lo],["__scopeId","data-v-477757e3"]]);var qo=Uo;const To=e=>((0,l.dD)("data-v-240789da"),e=e(),(0,l.Cn)(),e),Po=To((()=>(0,l._)("legend",null,"おまけ",-1))),Yo={class:"left"},xo=To((()=>(0,l._)("span",null,"全ての武器が選択可能になる",-1))),Wo=To((()=>(0,l._)("div",{class:"notice"}," ※正規の武器タイプ以外の武器を選択した場合、構成保存できなくなります。 ",-1))),Ko=To((()=>(0,l._)("span",null,"聖遺物サブ効果の自動計算を止める",-1))),Fo=To((()=>(0,l._)("div",{class:"notice"},[(0,l.Uk)(" 聖遺物サブ効果が自動計算されなくなります。"),(0,l._)("br"),(0,l.Uk)(" 手動で入力して下さい。 ")],-1))),Xo=To((()=>(0,l._)("span",null,"聖遺物サブ効果0初期化",-1))),Zo=["disabled"];function Bo(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)("fieldset",null,[Po,(0,l._)("div",Yo,[(0,l._)("article",null,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.configurationInputRea["全武器解放"]=t),onChange:t[1]||(t[1]=t=>e.$emit("update:configuration-input",e.configurationInputRea))},null,544),[[n.e8,e.configurationInputRea["全武器解放"]]]),xo]),Wo]),(0,l._)("article",null,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.configurationInputRea["聖遺物サブ効果計算停止"]=t),onChange:t[3]||(t[3]=t=>e.$emit("update:configuration-input",e.configurationInputRea))},null,544),[[n.e8,e.configurationInputRea["聖遺物サブ効果計算停止"]]]),Ko]),Fo]),(0,l._)("article",null,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=t=>e.initializeArtifactStatsSubClickableRef=t)},null,512),[[n.e8,e.initializeArtifactStatsSubClickableRef]]),Xo]),(0,l._)("button",{type:"button",disabled:!e.initializeArtifactStatsSubClickableRef,onClick:t[5]||(t[5]=(...t)=>e.initializeArtifactStatsSub&&e.initializeArtifactStatsSub(...t))},(0,s.zw)(e.displayName("実行")),9,Zo)])])])}var Jo=(0,l.aZ)({name:"ConfigurationInput",props:{configurationInput:{type:Object,required:!0}},emits:["update:configuration-input","order:initialize-artifact-stats-sub"],setup(e,t){const{displayName:a}=(0,X.Z)(),n=(0,P.qj)(e.configurationInput),l=(0,P.iH)(!1),s=()=>{t.emit("order:initialize-artifact-stats-sub"),l.value=!1};return{displayName:a,configurationInputRea:n,initializeArtifactStatsSubClickableRef:l,initializeArtifactStatsSub:s}}});const $o=(0,B.Z)(Jo,[["render",Bo],["__scopeId","data-v-240789da"]]);var Go=$o;const Qo={class:"own-list"},er=["src","alt","onClick"],tr={class:"tooltip"},ar=["src","alt"],nr={class:"constellation"},lr=["disabled"],sr=["disabled"];function ir(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("ul",Qo,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.characterList,(t=>((0,l.wg)(),(0,l.iD)("li",{key:t.key},[(0,l._)("img",{class:(0,s.C_)("character"+e.bgImageClass(t)+e.notOwnedClass(t)),src:t.icon_url,alt:t.key,onClick:a=>e.onClick(t)},null,10,er),(0,l._)("div",tr,(0,s.zw)(e.displayName(t.key)),1),(0,l._)("img",{class:"vision",src:e.visionSrc(t),alt:t.元素},null,8,ar),(0,l._)("div",nr,(0,s.zw)(e.constellationObj[t.key]),1)])))),128))]),(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.savable=t),disabled:!e.changed},null,8,lr),[[n.e8,e.savable]]),(0,l._)("span",null,(0,s.zw)(e.displayName("キャラクター所持状況を保存する")),1)]),(0,l._)("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>e.save&&e.save(...t)),disabled:!e.savable},(0,s.zw)(e.displayName("実行")),9,sr)],64)}var or=(0,l.aZ)({name:"CharacterOwnList",setup(){const{displayName:e}=(0,X.Z)(),t=e=>$e.GN[e.元素],a=e=>" "+$e.dr[e.レアリティ],n=$e.qy,l=(0,P.qj)({});for(const u of n)l[u.key]=null;if(localStorage["キャラクター所持状況"]){const e=JSON.parse(localStorage["キャラクター所持状況"]);Object.keys(e).forEach((t=>{(0,Tt.hj)(e[t])&&(l[t]=Number(e[t]))}))}const s=(0,P.iH)(!1),i=(0,P.iH)(!1),o=e=>null==l[e.key]?" not-owned":"",r=e=>{if(null===l[e.key])l[e.key]=0;else if(6==l[e.key])l[e.key]=null;else{let t=l[e.key];l[e.key]=t+1}s.value=!0},c=()=>{const e={};Object.keys(l).filter((e=>null!==l[e])).forEach((t=>{e[t]=l[t]})),localStorage.setItem("キャラクター所持状況",JSON.stringify(e)),i.value=!1,s.value=!1};return{displayName:e,visionSrc:t,bgImageClass:a,characterList:n,constellationObj:l,onClick:r,changed:s,savable:i,save:c,notOwnedClass:o}}});const rr=(0,B.Z)(or,[["render",ir],["__scopeId","data-v-17c0caf6"]]);var cr=rr;const ur={class:"select-list"},dr=["value"],pr=["src","alt"],fr={key:0,class:"own-list"},mr=["src","alt","onClick"],hr={class:"tooltip"},gr={class:"refine"},yr=["disabled"],br=["disabled"];function wr(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("ul",ur,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.weaponTypeList,(a=>((0,l.wg)(),(0,l.iD)("li",{key:a},[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{class:"hidden",type:"radio","onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedWeaponType=t),value:a,name:"weapon-own-list-type"},null,8,dr),[[n.G2,e.selectedWeaponType]]),(0,l._)("img",{class:"filter",src:e.weaponSrc(a),alt:a},null,8,pr)])])))),128))]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.weaponTypeList,(t=>((0,l.wg)(),(0,l.iD)("div",{key:t},[t==e.selectedWeaponType?((0,l.wg)(),(0,l.iD)("ul",fr,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.weaponList(t),(t=>((0,l.wg)(),(0,l.iD)("li",{key:t.key},[(0,l._)("img",{class:(0,s.C_)("weapon"+e.bgImageClass(t)+e.notOwnedClass(t)),src:t.icon_url,alt:t.key,onClick:a=>e.onClick(t)},null,10,mr),(0,l._)("div",hr,(0,s.zw)(e.displayName(t.key)),1),(0,l._)("div",gr,(0,s.zw)(e.refineObj[t.key]),1)])))),128))])):(0,l.kq)("",!0)])))),128)),(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=t=>e.savable=t),disabled:!e.changed},null,8,yr),[[n.e8,e.savable]]),(0,l._)("span",null,(0,s.zw)(e.displayName("武器所持状況を保存する")),1)]),(0,l._)("button",{type:"button",onClick:t[2]||(t[2]=(...t)=>e.save&&e.save(...t)),disabled:!e.savable},(0,s.zw)(e.displayName("実行")),9,br)],64)}var _r=(0,l.aZ)({name:"WeaponOwnList",setup(){const{displayName:e,targetValue:t}=(0,X.Z)(),a=e=>" "+$e.dr[e.レアリティ],n=(0,l.Fl)((()=>Object.keys($e.k9))),s=e=>$e.k9[e],i=e=>$e.JP[e],o=(0,P.iH)(n.value[0]),r=(0,P.qj)({});for(const l of n.value)for(const e of i(l))r[e.key]=null;if(localStorage["武器所持状況"]){const e=JSON.parse(localStorage["武器所持状況"]);Object.keys(e).forEach((t=>{(0,Tt.hj)(e[t])&&(r[t]=Number(e[t]))}))}const c=(0,P.iH)(!1),u=(0,P.iH)(!1),d=e=>null==r[e.key]?" not-owned":"",p=e=>{if(null===r[e.key])r[e.key]=1;else if(5==r[e.key])r[e.key]=null;else{let t=r[e.key];r[e.key]=t+1}c.value=!0},f=()=>{const e={};Object.keys(r).filter((e=>null!==r[e])).forEach((t=>{e[t]=r[t]})),localStorage.setItem("武器所持状況",JSON.stringify(e)),u.value=!1,c.value=!1};return{displayName:e,targetValue:t,bgImageClass:a,weaponTypeList:n,weaponSrc:s,weaponList:i,selectedWeaponType:o,refineObj:r,onClick:p,changed:c,savable:u,save:f,notOwnedClass:d}}});const vr=(0,B.Z)(_r,[["render",wr],["__scopeId","data-v-06e46a1a"]]);var kr=vr;const Sr={key:0},Cr={for:"artifact-score-formula",class:"toggle-switch header"},Or={value:"-1"},Dr=["value"],Rr={class:"formula-detail"},Nr=["onUpdate:modelValue"],Vr={class:"formula-detail"},Mr=["disabled"];function jr(e,t,a,i,o,r){return e.visible?((0,l.wg)(),(0,l.iD)("div",Sr,[(0,l.wy)((0,l._)("input",{id:"artifact-score-formula",type:"checkbox",class:"hidden","onUpdate:modelValue":t[0]||(t[0]=t=>e.expanded=t)},null,512),[[n.e8,e.expanded]]),(0,l._)("label",Cr,(0,s.zw)(e.displayName("聖遺物スコア計算式")),1),(0,l.wy)((0,l._)("div",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedIndex=t),onChange:t[2]||(t[2]=(...t)=>e.selectOnChange&&e.selectOnChange(...t))},[(0,l._)("option",Or,(0,s.zw)(e.artifactScoreFormulaName(e.currentFormula)),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.artifactScoreFormulaList,((t,a)=>((0,l.wg)(),(0,l.iD)("option",{key:a,value:a},"   "+(0,s.zw)(e.artifactScoreFormulaName(t)),9,Dr)))),128))],544),[[n.bM,e.selectedIndex]]),(0,l._)("div",Rr,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.currentFormula,((a,i)=>((0,l.wg)(),(0,l.iD)("div",{class:"right",key:i},[(0,l._)("label",null,[(0,l.Uk)((0,s.zw)(e.displayName(a[0]))+" × ",1),(0,l.wy)((0,l._)("input",{type:"number",min:"0","onUpdate:modelValue":e=>a[1]=e,onChange:t[3]||(t[3]=t=>e.changed=!0)},null,40,Nr),[[n.nr,a[1]]])])])))),128))]),(0,l._)("div",Vr,[(0,l._)("button",{type:"button",disabled:!e.changed,onClick:t[4]||(t[4]=(...t)=>e.applyFormula&&e.applyFormula(...t))},"Apply",8,Mr)])],512),[[n.F8,e.expanded]])])):(0,l.kq)("",!0)}var Hr=(0,l.aZ)({name:"ArtifactScoreFormula",emits:["apply:formula"],props:{visible:Boolean},setup(e,t){const{displayName:a}=(0,X.Z)(),n=(0,P.iH)(!1),l=(0,P.iH)(!1),s=(0,P.qj)([]);ba.forEach((e=>{s.push(e)}));const i=(0,P.iH)(-1),o=(0,P.qj)((0,Tt.X8)(s[0])),r=()=>{if(-1==i.value)return;const e=(0,Tt.X8)(s[i.value]);o.splice(0,o.length,...e),l.value=!0},c=e=>{let t=[];return e.forEach((e=>{let n=a(e[0]);1!=e[1]&&(n+="*"+e[1]),t.push(n)})),t.join("+")},u=()=>{t.emit("apply:formula",o),l.value=!1},d=e=>{o.splice(0,o.length,...(0,Tt.X8)(e)),i.value=-1,l.value=!1};return{displayName:a,expanded:n,artifactScoreFormulaList:s,artifactScoreFormulaName:c,selectedIndex:i,currentFormula:o,selectOnChange:r,changed:l,applyFormula:u,initialize:d}}});const Ar=(0,B.Z)(Hr,[["render",jr],["__scopeId","data-v-edb2186e"]]);var Ir=Ar,zr=(0,l.aZ)({name:"App",props:{characterInput:{type:Object,required:!0},artifactDetailInput:{type:Object,required:!0},conditionInput:{type:Object,required:!0},recommendationList:{type:Array,required:!0},recommendation:{type:Object,required:!0},urldata:{type:Object}},components:{TitleAndHeader:$,CharacterSelect:G.Z,CharacterInput:et,CharacterInfo:ka,WeaponSelect:Ea,ArtifactSetSelect:Xa,ArtifactDetailInput:jl,ConditionInput:xl,StatsInput:ms,ElementalResonanceInput:Ms,TeamOptionInput:li,MiscOptionInput:mi,DamageResult:Xi,RotationDamage:Ro,ShareSns:Io,AboutMyApp:qo,ConfigurationInput:Go,CharacterOwnList:cr,WeaponOwnList:kr,ArtifactScoreFormula:Ir},setup(e){const{setI18nLanguage:t,displayName:a}=(0,X.Z)(),n=(0,P.iH)(),s=(0,P.iH)(),i=(0,P.iH)(),o=(0,P.iH)(),r=(0,P.iH)(),c=(0,P.iH)(),u=(0,P.iH)(),d=(0,P.qj)((0,Tt.fX)((0,Tt.X8)(Je.Hd),e.characterInput)),p=(0,P.qj)((0,Tt.fX)((0,Tt.X8)(Je.HN),e.artifactDetailInput)),f=(0,P.qj)((0,Tt.fX)((0,Tt.X8)(Je.NY),e.conditionInput)),m=(0,P.qj)([...e.recommendationList]),h=(0,P.iH)(e.recommendation),g=(0,P.qj)((0,Tt.X8)(ba[0]));e.recommendation?.build?.artifactScoring&&g.splice(0,g.length,...e.recommendation.build.artifactScoring);const y=e=>{g.splice(0,g.length,...e)},b=(0,l.Fl)((()=>wa(d,p,g))),w=(0,P.iH)(!1),_=(0,P.iH)(!1),v=(0,P.iH)(!1),k=(0,P.iH)(0),S=d.artifactSets,C=(0,P.iH)(!0),O=Object.keys($e.bw),D=(0,P.qj)({}),R=(0,P.iH)(!1),N=(0,P.iH)(0),V=(0,P.qj)({"全武器解放":!1,"聖遺物サブ効果計算停止":!1});t("en-us"),t("ja-jp");const M=(0,P.qj)((0,Tt.X8)(Je.HO)),j=["基本ステータス","高級ステータス"],H=["元素ステータス·ダメージ","ダメージバフ","実数ダメージ加算","元素反応バフ"],A=["元素ステータス·耐性"],I=["基礎ステータス","その他"],z=["敵ステータス·元素耐性"],L=["敵ステータス·その他"],E=$e.FX,U=(0,P.iH)(E[0]);M.statAdjustments["敵レベル"]=90,M.statAdjustments["敵防御力"]=0;const q=(0,P.qj)([]),T=()=>{const e=Object.keys(D),t=[];O.forEach((a=>{const n=(0,Je.R4)(a);let l=n,s=(0,Je.K1)(a);e.includes(a)&&(s=D[a],l=(0,Je.R4)(a,s));let i=localStorage[l];if(i)t.push({key:a,value:i,buildname:s});else{const e=Object.keys(localStorage).filter((e=>e.startsWith(n)));e.length&&(l=e.sort()[0],i=localStorage[l],s=l.replace(new RegExp("^"+n+"_"),""),t.push({key:a,value:i,buildname:s}),D[a]=s)}})),q.splice(0,q.length,...t)};T(),console.log("App","savedSupporters",q);const Y=(0,P.qj)((0,Tt.X8)(Je.wX)),x=(0,P.qj)((0,Tt.X8)(Je.US)),W=(0,l.Fl)((()=>{const e=["特殊通常攻撃","特殊重撃","特殊落下攻撃"],t=[!1,!1,!1],a=Object.keys(d.characterMaster).filter((t=>e.includes(t))).map((e=>[e,d.characterMaster[e]]));if(a.length>0)for(const n of a){const a=e.indexOf(n[0]),l=n[1];l.条件 in f.conditionValues&&f.conditionValues[l.条件]&&(t[a]=!0)}return t})),K=(0,P.iH)(!0),F=(0,P.iH)(!0),Z=(0,P.iH)(!0),B=(0,P.iH)(1),J=(0,P.iH)(1),$=(0,P.iH)(!1),G=(0,P.iH)(!1),Q=()=>{M.enemyMaster=U.value,Zt(M,d,p,f,Y),ea(x,d,f,M)};Q();const ee=t=>{const a=(0,Je.R4)(d.character,t),n=(0,Je.Ke)(d,p,f);localStorage.setItem(a,JSON.stringify(n));const l=(0,Je.qT)(d.character,Y),s=(0,Je.Z3)(d.character,t);localStorage.setItem(s,JSON.stringify(l));const i=g,o=(0,Je.F_)(d.character,t);let r;localStorage.setItem(o,JSON.stringify(i)),e.urldata&&e.urldata.キャラクター==d.character&&(r=e.urldata),m.splice(0,m.length,...(0,Je.wM)(d.characterMaster,r)),T(),a==(0,Je.R4)(d.character)&&(d.buildname=(0,Je.K1)(d.character)),d.saveDisabled=!0,d.removeDisabled=!1},te=t=>{let a=d.character;const n=[(0,Je.K1)(d.character)];t&&!n.includes(t)&&(a+="_"+t);const l="構成_"+a;localStorage.removeItem(l);const s="オプション構成_"+a;localStorage.removeItem(s);const i="ArtifactScoring_"+a;let o;localStorage.removeItem(i),e.urldata&&e.urldata.キャラクター==d.character&&(o=e.urldata),m.splice(0,m.length,...(0,Je.wM)(d.characterMaster,o)),T(),d.saveDisabled=!1,d.removeDisabled=!0},ae=async e=>{if(console.debug("updateRecommendation",e),!d||!p||!f)return;if(await(0,Je.pS)(d,p,f,Y,e.build),e.overwrite?d.buildname=e.name:d.buildname="",!("精錬ランク"in e.build)){const e=d.weapon;let t,a=[1,1,1,5,3,1][d.weaponMaster.レアリティ];if("武器所持状況"in localStorage){const a=JSON.parse(localStorage["武器所持状況"]);e in a&&a[e]&&(t=Number(a[e]))}t?a=t:"精錬ランク"in d.weaponMaster&&(a=d.weaponMaster.精錬ランク);const n=d.weaponMaster.レアリティ<3?1:5;a>n&&(a=n),d.武器精錬ランク=Number(a)}if("artifactScoring"in e.build){const t=e.build.artifactScoring;g.splice(0,g.length,...t),u.value.initialize(g)}(0,Je.ge)(d),(0,Je.Cl)(d),(0,Je.Vk)(d),(0,Je.ZT)(d),(0,Je.Hk)(f,d,Y),Kt(p.聖遺物ステータスメイン効果,p.聖遺物メイン効果);let t=!p.聖遺物優先するサブ効果Disabled;if("聖遺物サブ効果計算停止"in V&&V.聖遺物サブ効果計算停止&&(t=!1),t){const e=[(0,Je.kE)(p.聖遺物優先するサブ効果,0),(0,Je.kE)(p.聖遺物優先するサブ効果,1),(0,Je.kE)(p.聖遺物優先するサブ効果,2)];Ft(p.聖遺物ステータスサブ効果,p.聖遺物メイン効果,p.聖遺物優先するサブ効果,p.聖遺物優先するサブ効果上昇値,e,p.聖遺物優先するサブ効果上昇回数)}Xt(p),i.value.initialize(f);const a=Gt(Y.elementalResonance.conditionValues,f);(0,Tt.fX)(Y.elementalResonance.conditionAdjustments,a),Zt(M,d,p,f,Y),ea(x,d,f,M),d.saveDisabled=!1,d.removeDisabled=!e.overwrite,"options"in e.build&&(o.value.initializeValues(Y.elementalResonance),r.value.initializeValues(Y.teamOption),c.value.initializeValues(Y.miscOption))},ne=async function(t){if(!d||!m||!p||!f)return;console.debug("updateCharacter",t),w.value=!1,d.character=t,d.characterMaster=await(0,$e.tm)(t);let a=0;if("キャラクター所持状況"in localStorage){const e=JSON.parse(localStorage["キャラクター所持状況"]);t in e&&e[t]&&(a=Number(e[t]))}const n=(0,Je.PH)(d.characterMaster);a>n&&(a=n),d.命ノ星座=a;const l=(0,Je.Jd)(d.characterMaster,"通常攻撃");d.通常攻撃レベル>l&&(d.通常攻撃レベル=l);const s=(0,Je.Jd)(d.characterMaster,"元素スキル");d.元素スキルレベル>s&&(d.元素スキルレベル=s);const i=(0,Je.Jd)(d.characterMaster,"元素爆発");let o;d.元素爆発レベル>i&&(d.元素爆発レベル=i),e.urldata&&e.urldata.キャラクター==t&&(o=e.urldata),m.splice(0,m.length,...(0,Je.wM)(d.characterMaster,o)),h.value=m[0],d.recommendationSelectedIndex=0,await ae(h.value)},le=e=>{d&&(Object.keys(e).forEach((t=>{t in d&&(d[t]=e[t])})),(0,Je.ge)(d),(0,Je.Hk)(f,d,Y),i.value.initialize(f),Zt(M,d,p,f,Y),ea(x,d,f,M),d.saveDisabled=!1)},se=(0,l.Fl)((()=>{let e=d.characterMaster.武器;return V.全武器解放&&(e=void 0),e})),ie=()=>{_.value=!_.value,_.value&&(v.value=!1,C.value=!1,R.value=!1)},oe=async e=>{if(!d)return;_.value=!1,d.weapon=e,d.weaponMaster=await(0,$e.i7)(e);let t,a=[1,1,1,5,3,1][d.weaponMaster.レアリティ];if("武器所持状況"in localStorage){const a=JSON.parse(localStorage["武器所持状況"]);e in a&&a[e]&&(t=Number(a[e]))}t?a=t:"精錬ランク"in d.weaponMaster&&(a=d.weaponMaster.精錬ランク);const n=d.weaponMaster.レアリティ<3?1:5;a>n&&(a=n),d.武器精錬ランク=Number(a),(0,Je.Cl)(d),(0,Je.Hk)(f,d,Y),i.value.initialize(f),Zt(M,d,p,f,Y),ea(x,d,f,M),d.saveDisabled=!1},re=e=>{Object.keys(e).forEach((t=>{d&&t in d&&(d[t]=e[t])})),(0,Je.Cl)(d),(0,Je.Hk)(f,d,Y),i.value.initialize(f),Zt(M,d,p,f,Y),ea(x,d,f,M),d.saveDisabled=!1},ce=e=>{e==k.value?v.value=!v.value:(k.value=e,v.value=!0),v.value&&(_.value=!1,C.value=!1,R.value=!1)},ue=e=>{if(!d)return;S[k.value]=e;const t=$e.oN[e];d.artifactSetMasters.splice(k.value,1,t),v.value=!1,(0,Je.Vk)(d),(0,Je.Hk)(f,d,Y),i.value.initialize(f),Zt(M,d,p,f,Y),ea(x,d,f,M),d.saveDisabled=!1},de=()=>{C.value=!C.value,C.value&&(_.value=!1,v.value=!1,R.value=!1)},pe=e=>{if(p){for(const t of Object.keys(e.聖遺物ステータス))p.聖遺物ステータス[t]=e.聖遺物ステータス[t];Zt(M,d,p,f,Y),ea(x,d,f,M),V.聖遺物サブ効果計算停止=e.聖遺物優先するサブ効果Disabled,d.saveDisabled=!1}},fe=e=>{console.log(e,N.value,R.value),N.value==e?R.value=!R.value:(N.value=e,R.value=!0),R.value&&(_.value=!1,v.value=!1,C.value=!1)},me=e=>{(0,Tt.fX)(f.conditionValues,e);const t=Gt(Y.elementalResonance.conditionValues,f);(0,Tt.fX)(Y.elementalResonance.conditionAdjustments,t),Zt(M,d,p,f,Y),ea(x,d,f,M),d.saveDisabled=!1},he=(0,l.Fl)((()=>d?[d.damageDetailMyCharacter,d.damageDetailMyWeapon,d.damageDetailMyArtifactSets]:[])),ge=e=>e&&(0,Tt.PO)(e)?Object.keys(e):[],ye=(e,t)=>{if(e&&(0,Tt.PO)(e))return e[t]},be=e=>{e&&Object.keys(e).forEach((t=>{M.statAdjustments[t]=e[t]})),Zt(M,d,p,f,Y),ea(x,d,f,M)},we=e=>{if(e&&Object.keys(e).length){(0,Tt.fX)(Y.elementalResonance.conditionValues,e),(0,Je.Hk)(f,d,Y);const t=Gt(Y.elementalResonance.conditionValues,f);(0,Tt.fX)(Y.elementalResonance.conditionAdjustments,t),Zt(M,d,p,f,Y),ea(x,d,f,M),i.value.initialize(f)}},_e=e=>{e&&Object.keys(e).length&&((0,Tt.fX)(Y.miscOption,e),Zt(M,d,p,f,Y),ea(x,d,f,M))},ve=e=>{e&&Object.keys(e).length&&((0,Tt.fX)(Y.teamOption,e),Zt(M,d,p,f,Y),ea(x,d,f,M))},ke=e=>{(0,Tt.fX)(D,e),T()},Se=()=>{(0,Je.i5)(d,p,f)},Ce=e=>{console.debug(e),e.全武器解放&&console.log("全武器解放"),e.聖遺物サブ効果計算停止&&(p.聖遺物優先するサブ効果Disabled=!0)},Oe=()=>{s.value.initializeArtifactStatsSub(),d.saveDisabled=!1};ne(d.character);const De=(0,P.iH)(!1),Re=()=>{localStorage.clear(),De.value=!1};return{displayName:a,characterInputVmRef:n,artifactDetailInputVmRef:s,conditionInputVmRef:i,elementalResonanceInputVmRef:o,teamOptionInputVmRef:r,miscOptionInputVmRef:c,artifactScoreFormulaVmRef:u,characterInputRea:d,artifactDetailInputRea:p,conditionInputRea:f,recommendationListRea:m,recommendationRef:h,artifactScore:b,artifactScoringStats:g,applyArtifactScoreFormula:y,characterSelectVisibleRef:w,weaponSelectVisibleRef:_,weaponType:se,artifactSetSelectVisibleRef:v,artifactSetIndexRef:k,artifactSets:S,artifactDetailInputVisibleRef:C,characterInfoVisibleRef:R,characterInfoModeRef:N,updateCondition:me,statsInput:M,characterStats1Category1List:j,characterStats1Category2List:H,characterStats2Category1List:A,characterStats2Category2List:I,enemyStatsCategory1List:z,enemyStatsCategory2List:L,enemyList:E,selectedEnemyRef:U,updateEnemy:Q,optionInputRea:Y,damageResult:x,savedSupporters:q,normalAttackReplacing:W,openTwitter:Se,configurationInputRea:V,pane6Toggle1Ref:K,pane6Toggle2Ref:F,pane6Toggle3Ref:Z,statInputTabRef:B,optionInputTabRef:J,ownListToggle1Ref:$,ownListToggle2Ref:G,saveToStorage:ee,removeFromStorage:te,updateRecommendation:ae,updateCharacter:ne,openWeaponSelect:ie,updateWeapon:oe,openArtifactSetSelect:ce,updateArtifactSet:ue,openArtifactDetailInput:de,updateCharacterInputCharacter:le,updateCharacterInputWeapon:re,updateArtifactDetail:pe,openCharacterInfo:fe,updateStatAdjustments:be,updateElementalResonance:we,updateMiscOption:_e,updateTeamOption:ve,updateBuildnameSelection:ke,updateConfigurationInput:Ce,orderInitializeArtifactStatsSub:Oe,myDamageDatailArr:he,objectKeys:ge,getValue:ye,enableClearLocalStorage:De,clearLocalStorage:Re}}});const Lr=(0,B.Z)(zr,[["render",T],["__scopeId","data-v-46554518"]]);var Er=Lr;function Ur(e){const t={};try{const a=e.split(",");let n,l=0;for(($e.PW.forEach(((e,s)=>{let i=a[l];switch(s){case"キャラクター":Object.keys($e.bw).forEach((e=>{if("import"in $e.bw[e]){const t=(0,Tt.EZ)($e.bw[e]["import"]),a=t.split("_")[t.split("_").length-1];i==a&&(n=e,i=n)}}));break;case"武器":if(n){const e=$e.bw[n]["武器"],t=$e.Nd[e];let a;Object.keys(t).forEach((t=>{if("import"in $e.Nd[e][t]){const n=(0,Tt.EZ)($e.Nd[e][t]["import"]),l=n.split("_")[n.split("_").length-1];i==l&&(a=t)}})),a||(a=Object.keys($e.Nd[e]).filter((e=>e.startsWith("西風")))[0]),i=a}break;case"聖遺物セット効果1":case"聖遺物セット効果2":i?Object.keys($e.oN).forEach((e=>{if("image"in $e.oN[e]){const t=(0,Tt.EZ)($e.oN[e]["image"]),a=t.split("_")[t.split("_").length-1];i==a&&(i=e)}})):i="NONE";break;case"聖遺物メイン効果1":case"聖遺物メイン効果2":case"聖遺物メイン効果3":case"聖遺物メイン効果4":case"聖遺物メイン効果5":i&&(i=i.split("_")[0]+"_"+$e.Ps.get(i.split("_")[1]));break;case"聖遺物優先するサブ効果1":case"聖遺物優先するサブ効果2":case"聖遺物優先するサブ効果3":i&&(i=$e.Ps.get(i));break}null!=e&&(0,Tt.hj)(e)?t[s]=i?Number(i):0:t[s]=i||"",l++})));l<a.length;l++){const e=a[l];let n,s;if(1!=e.indexOf("=")){const a=e.split("=");n=a[0],s=a[1],t[n]=s}}return t}catch(a){throw console.error(a),a}}function qr(){const e=new Date;let t=Number.MAX_SAFE_INTEGER,a=$e.qy[0].key;for(const n of $e.qy)if(n["誕生日"]){const l=n["誕生日"].split("/"),s=new Date(e.getFullYear(),Number(l[0])-1,Number(l[1]),0,0,0,0),i=e.getTime()-s.getTime();if(i<0)continue;i<t&&(t=i,a=n.key)}return a}async function Tr(){const e=(0,Tt.X8)(Je.Hd),t=(0,Tt.X8)(Je.HN),a=(0,Tt.X8)(Je.NY),l=(0,Tt.X8)(Je.wX),s=new URLSearchParams(window.location.search);let i,o,r;if(s.has("allin")){const e=s.get("allin");e?(r=Ur(e),i=r.キャラクター):console.error("query strings are not valid!")}else[i,o,r]=(0,Je.Nh)(),i||(i=qr());e.character=i,e.characterMaster=await(0,$e.tm)(e.character);const c=(0,Je.wM)(e.characterMaster,r);let u;o&&(u=c.filter((e=>e.name==o))[0]),u||(u=c[0]),await(0,Je.pS)(e,t,a,l,c[0].build),(0,n.ri)(Er,{characterInput:e,artifactDetailInput:t,conditionInput:a,recommendationList:c,recommendation:u,urldata:r}).use(Be.Z).mount("#app")}Tr()},3550:function(e,t,a){a.d(t,{$Y:function(){return u},Cb:function(){return q},FX:function(){return V},GN:function(){return T},JP:function(){return R},Kl:function(){return X},L6:function(){return H},Ml:function(){return B},Nd:function(){return v},PW:function(){return x},Ps:function(){return Z},Rj:function(){return j},TG:function(){return M},X9:function(){return U},_9:function(){return f},_J:function(){return d},_j:function(){return N},bw:function(){return n},bx:function(){return b},dJ:function(){return A},dr:function(){return Y},i7:function(){return E},k9:function(){return P},kf:function(){return K},mU:function(){return F},oN:function(){return c},q4:function(){return y},qy:function(){return _},tm:function(){return z},vN:function(){return W}});a(7658);var n=a(8667),l=a(7722),s=a(1930),i=a(7849),o=a(2364),r=a(1003),c=a(5678),u=a(2124),d=a(3185),p=a(8970),f=a(6385),m=a(5093),h=a(9286),g=a(8846),y=a(7646);const b="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7";function w(e){if(e.icon_url)return e.icon_url;if(e.image)return e.image;if(e.import){let t=e.import.replace("data/","images/");return-1!=t.indexOf("characters/")&&(t=t.replace("characters/","characters/face/")),t=t.replace(/json$/,"png"),t}return null}const _=[];Object.keys(n).forEach((e=>{const t=n[e];t.key=e,t.icon_url=w(t),_.push(t)}));const v={"片手剣":l,"両手剣":s,"長柄武器":i,"弓":o,"法器":r};Object.keys(v).forEach((e=>{const t=v[e];Object.keys(t).forEach((e=>{const a=t[e];a.key=e,a.icon_url=w(a)}))}));const k=Object.keys(l).map((e=>l[e])),S=Object.keys(s).map((e=>s[e])),C=Object.keys(i).map((e=>i[e])),O=Object.keys(o).map((e=>o[e])),D=Object.keys(r).map((e=>r[e])),R={"片手剣":k,"両手剣":S,"長柄武器":C,"弓":O,"法器":D},N=[];Object.keys(c).forEach((e=>{const t=c[e];t.key=e,t.icon_url=w(t),N.push(t)}));Object.keys(u[5]),Object.keys(d);for(const J of Object.keys(p))for(const e of Object.keys(p[J]))p[J][e]>=1e3&&(p[J][e]=1/0);const V=Object.keys(p).map((e=>({key:e,...p[e]}))),M=Object.keys(f).map((e=>({key:e,...f[e]}))),j=Object.keys(m).map((e=>({key:e,...m[e]}))),H=Object.keys(h).map((e=>({key:e,...h[e]}))),A=Object.keys(g).map((e=>({key:e,...g[e]}))),I=(Object.keys(y).map((e=>({key:e,...y[e]}))),new Map);async function z(e){try{if(!I.has(e)){const t=n[e]["import"].replace(/^\//,""),a=await fetch(t).then((e=>e.json())),l=n[e].武器;a.通常攻撃.icon_url=P[l],I.set(e,a)}return I.get(e)}catch(t){throw console.error(e),t}}const L=new Map;async function E(e,t){try{if(!L.has(e)){let a;a=t?[t]:Object.keys(v);for(const t of a)if(e in v[t]){const a=v[t],n=a[e]["import"],l=await fetch(n).then((e=>e.json()));l.種類=t,L.set(e,l);break}}return L.get(e)}catch(a){throw console.error(e,t),a}}const U={"炎":"pyro","水":"hydro","風":"anemo","雷":"electro","草":"dendro","氷":"cryo","岩":"geo"},q={"炎":"pyro-bg","水":"hydro-bg","風":"anemo-bg","雷":"electro-bg","草":"dendro-bg","氷":"cryo-bg","岩":"geo-bg"},T={"炎":"images/element_pyro.png","水":"images/element_hydro.png","風":"images/element_anemo.png","雷":"images/element_electro.png","草":"images/element_dendro.png","氷":"images/element_cryo.png","岩":"images/element_geo.png"},P={"片手剣":"images/characters/NormalAttack_sword.png","両手剣":"images/characters/NormalAttack_claymore.png","長柄武器":"images/characters/NormalAttack_polearm.png","弓":"images/characters/NormalAttack_bow.png","法器":"images/characters/NormalAttack_catalyst.png"},Y={1:"star1-bg",2:"star2-bg",3:"star3-bg",4:"star4-bg",5:"star5-bg"},x=new Map([["キャラクター",null],["レベル",null],["命ノ星座",0],["通常攻撃レベル",0],["元素スキルレベル",0],["元素爆発レベル",0],["武器",null],["武器レベル",0],["精錬ランク",0],["聖遺物セット効果1",null],["聖遺物セット効果2",null],["聖遺物メイン効果1",null],["聖遺物メイン効果2",null],["聖遺物メイン効果3",null],["聖遺物メイン効果4",null],["聖遺物メイン効果5",null],["聖遺物サブ効果HP",0],["聖遺物サブ効果攻撃力",0],["聖遺物サブ効果防御力",0],["聖遺物サブ効果元素熟知",0],["聖遺物サブ効果会心率",0],["聖遺物サブ効果会心ダメージ",0],["聖遺物サブ効果元素チャージ効率",0],["聖遺物サブ効果HPP",0],["聖遺物サブ効果攻撃力P",0],["聖遺物サブ効果防御力P",0],["聖遺物優先するサブ効果1",null],["聖遺物優先するサブ効果1上昇値",-1],["聖遺物優先するサブ効果1上昇回数",-1],["聖遺物優先するサブ効果2",null],["聖遺物優先するサブ効果2上昇値",-1],["聖遺物優先するサブ効果2上昇回数",-1],["聖遺物優先するサブ効果3",null],["聖遺物優先するサブ効果3上昇値",-1],["聖遺物優先するサブ効果3上昇回数",-1]]),W=["通常攻撃ダメージ","重撃ダメージ","落下攻撃ダメージ","元素スキルダメージ","元素爆発ダメージ"],K=new Map([["HP%","HP"],["元素熟知","熟"],["元素チャージ効率","ﾁｬ"],["会心率","率"],["会心ダメージ","ダ"],["与える治療効果","治"]]),F=new Map([["HP%","HP"],["攻撃力%","AT"],["防御力%","DF"],["元素熟知","EM"],["会心率","CR"],["会心ダメージ","CD"],["元素チャージ効率","ER"],["与える治療効果","HE"],["炎元素ダメージバフ","Py"],["水元素ダメージバフ","Hy"],["風元素ダメージバフ","An"],["雷元素ダメージバフ","El"],["草元素ダメージバフ","De"],["氷元素ダメージバフ","Cr"],["岩元素ダメージバフ","Ge"],["物理ダメージバフ","Ph"]]),X=new Map([["HP","HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","ElementalMastery"],["会心率","CritRate"],["会心ダメージ","CritDMG"],["元素チャージ効率","EnergyRecharge"],["炎元素ダメージバフ","Pyro"],["水元素ダメージバフ","Hydro"],["風元素ダメージバフ","Anemo"],["雷元素ダメージバフ","Electro"],["草元素ダメージバフ","Dendro"],["氷元素ダメージバフ","Cryo"],["岩元素ダメージバフ","Geo"],["物理ダメージバフ","Physical"],["与える治療効果","Healing"],["HP%","HPp"],["攻撃力%","ATKp"],["防御力%","DEFp"]]),Z=new Map;X.forEach(((e,t)=>{Z.set(e,t)}));const B=[{key:"",values:[7,7,7],counts:[0,0,0]},{key:"厳選初心者",values:[3,3,3],counts:[7,4,4]},{key:"厳選1ヶ月",values:[3,3,3],counts:[8,5,5]},{key:"厳選3ヶ月",values:[3,3,3],counts:[11,8,7]},{key:"日々石割り",values:[1,1,1],counts:[14,11,10]}]},4147:function(e){e.exports={i8:"3.2.5"}}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=e,function(){var e=[];a.O=function(t,n,l,s){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],l=e[u][1],s=e[u][2];for(var o=!0,r=0;r<n.length;r++)(!1&s||i>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[r])}))?n.splice(r--,1):(o=!1,s<i&&(i=s));if(o){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,l,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.j=826}(),function(){var e={826:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,s,i=n[0],o=n[1],r=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(l in o)a.o(o,l)&&(a.m[l]=o[l]);if(r)var u=r(a)}for(t&&t(n);c<i.length;c++)s=i[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},n=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998,64],(function(){return a(3920)}));n=a.O(n)})();
//# sourceMappingURL=index.bf814fb3.js.map