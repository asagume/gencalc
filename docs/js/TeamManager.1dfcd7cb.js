(function(){"use strict";var t={5132:function(t,e,n){var a=n(9242),i=n(3396),o=n(7139);const l=t=>((0,i.dD)("data-v-432c14a0"),t=t(),(0,i.Cn)(),t),r={class:"base-container"},c=l((()=>(0,i._)("div",{class:"header"},[(0,i.Uk)("   "),(0,i._)("a",{href:"./"},"げんかるく")],-1))),u={class:"pane1"},s={class:"display-stat-select"},d=["value"],m={class:"number-of-teams"},p=["min"],f={class:"data-control"},b=["disabled"],v={class:"pane2",id:"team-list-and-editor"},h=["id"],g={class:"pane3"},I=l((()=>(0,i._)("hr",null,null,-1))),k=l((()=>(0,i._)("h3",null,"ROTATION",-1))),y={id:"team-rotation"},O=(0,i.uE)('<div class="pane4" data-v-432c14a0></div><div class="footer" data-v-432c14a0><hr data-v-432c14a0><h2 data-v-432c14a0>チーム編成 Ver.1.0.0</h2><ul class="usage" data-v-432c14a0><li data-v-432c14a0>右上の◆のドラッグ＆ドロップでチームの並べ替えができます。</li></ul><dl class="history" data-v-432c14a0><dt data-v-432c14a0>1.0.0</dt><dd data-v-432c14a0> 元素チャージ効率計算機能が（ひとまず）完成しました。 </dd><dt data-v-432c14a0>0.5.0</dt><dd data-v-432c14a0> ローテーションが保存されるようになりました。チームデータの一部として記憶します。 </dd></dl><p data-v-432c14a0><a href="./TeamExample.html" data-v-432c14a0>EXAMPLE</a></p><p data-v-432c14a0><a href="./" data-v-432c14a0>げんかるく - 原神ダメージシミュレーター</a>   <a href="./TeamOptionList.html" data-v-432c14a0>強化・弱体効果一覧</a></p></div>',2);function T(t,e,n,l,T,C){const E=(0,i.up)("TeamItem"),_=(0,i.up)("draggable"),w=(0,i.up)("TeamEditorModal"),S=(0,i.up)("TeamRotation");return(0,i.wg)(),(0,i.iD)("div",r,[c,(0,i._)("div",u,[(0,i._)("fieldset",null,[(0,i._)("div",s,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.DISPLAY_STAT_LIST,(n=>((0,i.wg)(),(0,i.iD)("label",{class:"display-stat",key:n[1]},[(0,i.wy)((0,i._)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":e[0]||(e[0]=e=>t.displayStat=e),value:n[0]},null,8,d),[[a.G2,t.displayStat]]),(0,i._)("span",null,(0,o.zw)(n[1]),1)])))),128))]),(0,i._)("label",m,[(0,i.Uk)(" Number of teams "),(0,i.wy)((0,i._)("input",{type:"number",min:t.NUMBER_OF_TEAMS,max:999,"onUpdate:modelValue":e[1]||(e[1]=e=>t.numberOfTeams=e),onChange:e[2]||(e[2]=(...e)=>t.numberOfTeamsOnChange&&t.numberOfTeamsOnChange(...e))},null,40,p),[[a.nr,t.numberOfTeams]])]),(0,i._)("div",f,[(0,i._)("button",{type:"button",disabled:t.saveDisabled,onClick:e[3]||(e[3]=(...e)=>t.saveOnClick&&t.saveOnClick(...e))}," Save ",8,b),(0,i._)("button",{type:"button",onClick:e[4]||(e[4]=(...e)=>t.loadOnClick&&t.loadOnClick(...e))}," Load "),(0,i._)("button",{type:"button",onClick:e[5]||(e[5]=(...e)=>t.clearOnClick&&t.clearOnClick(...e))}," Clear ")])])]),(0,i._)("div",v,[(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(_,{list:t.teams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,i.w5)((({element:e})=>[(0,i._)("div",{style:{display:"inline-block"},id:"team-"+e.id},[(0,i.Wm)(E,{team:e,selected:t.teamSelected(e.id),"display-stat":t.displayStat,"display-res":t.displayRes,constellations:t.constellations,editable:!0,"show-equipment":!0,onClick:n=>t.teamOnClick(e.id),"onClick:edit":t.editOnClick,"onClick:jumpToRotation":t.jumpToRotation,"onUpdate:memberResult":t.updateMemberResult},null,8,["team","selected","display-stat","display-res","constellations","onClick","onClick:edit","onClick:jumpToRotation","onUpdate:memberResult"])],8,h)])),_:1},8,["list"])],512),[[a.F8,!t.teamEditorVisible]]),(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(w,{visible:t.teamEditorVisible,team:t.forcusedTeam,"onClick:cancel":t.teamEditorOnClickCancel,"onClick:ok":t.teamEditorOnClickOk},null,8,["visible","team","onClick:cancel","onClick:ok"])],512),[[a.F8,t.teamEditorVisible]])]),(0,i._)("div",g,[I,k,(0,i._)("div",y,[t.forcusedTeam?((0,i.wg)(),(0,i.j4)(S,{key:0,team:t.forcusedTeam,"team-member-result":t.teamMemberResult,constellations:t.constellations,"onUpdate:rotation":t.updateRotation,"onClick:jumpToTeam":t.jumpToTeam},null,8,["team","team-member-result","constellations","onUpdate:rotation","onClick:jumpToTeam"])):(0,i.kq)("",!0)])]),O])}n(7658);var C=n(4806),E=n.n(C),_=n(6983),w=n.n(_),S=n(4870),j=n(6552),R=n(5983),D=n(9541),M=n(5295),V=n(4119),N=n(3622),F=(0,i.aZ)({name:"TeamManager",components:{draggable:w(),TeamItem:V.Z,TeamEditorModal:M.Z,TeamRotation:N.Z},setup(){const{displayName:t}=(0,j.Z)(),e=(0,S.iH)(!1),n=[["","None"],["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],a=(0,S.iH)(D.g6),o=(0,S.qj)([]);for(let i=0;i<a.value;i++)o.push((0,D.un)(i));const l=(0,S.qj)({}),r=(0,S.iH)(""),c=(0,S.iH)(!0),u=(0,S.iH)(0),s=(0,S.iH)(""),d=(0,S.qj)({});(0,i.bv)((()=>{I()}));const m=(0,i.Fl)((()=>o.filter((t=>t.id==u.value))[0])),p=(0,i.Fl)((()=>(0,D.Jc)(o))),f=(0,i.Fl)((()=>p.value==s.value)),b=t=>t==u.value,v=(0,i.Fl)((()=>{let t={};if(u.value in l)t=l[u.value];else if(-1!=u.value){const e=o.filter((t=>t.id==u.value))[0];e.members.forEach((e=>{t&&(t[e.id]=(0,D.V5)())}))}return t})),h=()=>{if(a.value>o.length)for(let t=o.length;t<a.value;t++)o.push((0,D.un)(t));else a.value<o.length&&(u.value>a.value&&(u.value=0),o.splice(a.value))},g=()=>{localStorage.setItem("teams",p.value),s.value=p.value},I=()=>{const t=localStorage.getItem("キャラクター所持状況");if(t){const e={},n=JSON.parse(t);Object.keys(n).forEach((t=>{const a=Number(n[t]);Number.isNaN(a)&&(e[t]=a)})),(0,R.fX)(d,e)}const e=localStorage.getItem("teams"),n=[];for(let i=0;i<a.value;i++)n.push((0,D.un)(i));if(e){const t=JSON.parse(e);(0,D.FF)(n,t,!0),a.value=n.length,s.value=e}o.splice(0,o.length,...n)},k=()=>{o.forEach((t=>{(0,D.mt)(t)}))},y=t=>{u.value=t},O=t=>{t==u.value?(e.value=!0,(0,i.Y3)().then((()=>{document.getElementById("team-list-and-editor")?.scrollIntoView({behavior:"smooth"})}))):u.value=t},T=t=>{if(e.value=!1,u.value<0)return;M();const n=o.filter((t=>t.id==u.value))[0];if(n){n.name=t.name;for(let e=0;e<t.members.length;e++){const a=t.members[e],i=n.members[e];i.name==a.name&&i.buildname==t.members[e].buildname||(i.name=t.members[e].name,i.buildname=t.members[e].buildname,i.builddata=i.buildname?(0,D.XY)(i.name,i.buildname):void 0),E().isEqual(i.tags,a.tags)||i.tags.splice(0,i.tags.length,...a.tags),E().isEqual(i.replacements,a.replacements)||i.replacements.splice(0,i.replacements.length,...a.replacements)}n.description=t.description,E().isEqual(n.rotation,t.rotation)||n.rotation.splice(0,n.rotation.length,...t.rotation)}},C=()=>{e.value=!1,M()},_=(t,e)=>{if(-1!=u.value){const n=o.filter((t=>t.id==u.value))[0];n&&(n.rotation.splice(0,n.rotation.length,...t),n.rotationDescription=e)}},w=()=>{(0,i.Y3)().then((()=>{document.getElementById("team-rotation")?.scrollIntoView({behavior:"smooth"})}))},M=()=>{-1!=u.value&&(0,i.Y3)().then((()=>{document.getElementById("team-"+u.value)?.scrollIntoView({behavior:"smooth"})}))},V=(t,e)=>{l[t]=e,t==u.value&&v.value};return{displayName:t,DISPLAY_STAT_LIST:n,NUMBER_OF_TEAMS:D.g6,numberOfTeams:a,displayStat:r,displayRes:c,teams:o,constellations:d,teamEditorVisible:e,teamSelected:b,forcusedTeam:m,saveDisabled:f,teamMemberResult:v,numberOfTeamsOnChange:h,saveOnClick:g,loadOnClick:I,clearOnClick:k,teamOnClick:y,editOnClick:O,teamEditorOnClickOk:T,teamEditorOnClickCancel:C,updateRotation:_,jumpToRotation:w,jumpToTeam:M,updateMemberResult:V}}}),H=n(89);const P=(0,H.Z)(F,[["render",T],["__scopeId","data-v-432c14a0"]]);var x=P,A=n(2540);async function L(){(0,a.ri)(x,{}).use(A.Z).mount("#app")}L()},9541:function(t,e,n){n.d(e,{$C:function(){return m},FF:function(){return M},FP:function(){return p},Jc:function(){return D},R7:function(){return _},V5:function(){return C},VN:function(){return k},XY:function(){return T},_t:function(){return I},bV:function(){return g},br:function(){return E},c1:function(){return O},g6:function(){return s},gw:function(){return f},mt:function(){return R},n7:function(){return d},qQ:function(){return h},sE:function(){return y},un:function(){return S}});n(7658);var a=n(4806),i=n.n(a),o=n(8710),l=n(5983),r=n(2986),c=n(6125),u=n(9098);const s=10,d=4,m=["片手剣","長柄武器"],p=["鹿野院平蔵","リオセスリ"],f=["フリーナ"];let b=0;const v=new Map;function h(t){let e;return t&&t in c.bw&&(e=c.bw[t]),e}async function g(){const t=[];for(const e of Object.keys(c.bw))t.push((0,c.tm)(e).then((t=>{v.set(e,t)})));await Promise.all(t)}function I(t){return v.get(t)}function k(t,e){let n;if(t&&e&&t in c.Nd){const a=c.Nd[t];e in a&&(n=a[e])}return n}function y(t){const e=t.split("_"),n=e[1];let a;return e.splice(0,2),a=e.length>0?e.join("_"):(0,r.K1)(n),a}function O(t){return Object.keys(localStorage).filter((e=>e.startsWith((0,r.R4)(t))))}function T(t,e){let n;const a=(0,r.R4)(t,e),i=localStorage.getItem(a);return i&&(n=JSON.parse(i)),n}function C(){return{characterInput:(0,r.Yy)(),artifactDetailInput:(0,r.sx)(),conditionInput:(0,r.tQ)(),optionInput:(0,r.hh)(),statsInput:(0,r.O$)(),damageResult:(0,r.F7)()}}const E=async(t,e)=>{const n=C();if(!t.name)return n;n.characterInput.character=t.name,n.characterInput.characterMaster=await(0,c.tm)(n.characterInput.character);const a={"片手剣":"無鋒の剣","両手剣":"訓練用大剣","長柄武器":"新米の長槍","弓":"狩猟弓","法器":"生徒ノート"};n.characterInput.weapon=a[n.characterInput.characterMaster.武器];const i=t.builddata;if(!i)return n;if(await(0,r.pS)(n.characterInput,n.artifactDetailInput,n.conditionInput,n.optionInput,i),(0,r.ge)(n.characterInput),(0,r.Cl)(n.characterInput),(0,r.Vk)(n.characterInput),(0,r.Hk)(n.conditionInput,n.characterInput,n.optionInput),(0,o.fk)(n.artifactDetailInput.聖遺物ステータスメイン効果,n.artifactDetailInput.聖遺物メイン効果),(0,o.Zr)(n.artifactDetailInput),n.conditionInput.checkboxList.forEach((t=>{n.conditionInput.conditionValues[t.name]=!1})),n.conditionInput.selectList.forEach((t=>{n.conditionInput.conditionValues[t.name]=0})),await(0,r.a_)(n.characterInput,n.conditionInput,n.optionInput),_(e)){const t={};_(e).filter((t=>["炎元素共鳴","水元素共鳴","草元素共鳴","元素共鳴なし"].includes(t))).forEach((e=>{if(n.optionInput.elementalResonance.conditionValues[e]=!0,"詳細"in c._9[e]){const n=c._9[e].詳細;if(n)for(const e of n)"種類"in e&&"数値"in e&&(e.種類 in t?t[e.種類]+=e.数値:t[e.種類]=e.数値)}})),(0,l.fX)(n.optionInput.elementalResonance.conditionAdjustments,t)}return(0,o.i6)(n.statsInput,n.characterInput,n.artifactDetailInput,n.conditionInput,n.optionInput),(0,o.V1)(n.damageResult,n.characterInput,n.conditionInput,n.statsInput),n},_=t=>{const e=[],n={},a=t.members.filter((t=>t.name));return 4==a.length&&(a.forEach((t=>{const e=h(t.name);e&&(e.元素 in n?n[e.元素]++:n[e.元素]=1)})),4==Object.keys(n).length?e.push("元素共鳴なし"):Object.keys(n).forEach((t=>{n[t]>=2&&e.push(t+"元素共鳴")}))),e};function w(t){return{id:t,name:"",buildname:void 0,builddata:void 0,tags:[],replacements:[]}}function S(t){const e={id:t,name:"チーム"+(t+1),members:[],description:"",rotation:[],rotationDescription:""};for(let n=0;n<d;n++)e.members.push(w(b++));return e}function j(t){t.name="",t.buildname=void 0,t.builddata=void 0,t.tags=[],t.replacements=[]}function R(t){t.name="チーム"+(t.id+1),t.members.forEach((t=>{j(t)}))}function D(t){const e=i().cloneDeep(t);return e.forEach((t=>{t.id=0,t.members.forEach((t=>{t.id=0,t.builddata=void 0})),t.rotation?.length&&t.rotation.forEach((t=>{t.id=0}))})),JSON.stringify(e)}function M(t,e,n=!1){let a=0;for(let o=0;o<e.length;o++){const l=e[o];let r=t[o];r||(r=S(o),t.push(r)),r.name=l.name;for(let t=0;t<r.members.length;t++)if(l.members?.length){const e=l.members[t];e&&(r.members[t].name=e.name,n?(r.members[t].buildname=e.buildname,r.members[t].builddata=e.buildname?T(e.name,e.buildname):void 0):(r.members[t].buildname=void 0,r.members[t].builddata=void 0),r.members[t].tags=e.tags??[],r.members[t].replacements=e.replacements??[])}r.description=l.description??"",l.rotation?.length&&(r.rotation=i().cloneDeep(l.rotation),r.rotation.forEach((t=>{if(t.id=a++,t.action.startsWith("E")){const e=(0,u.H0)(t.member);e.includes(t.action)||(t.action=e[0])}}))),r.rotationDescription=l.rotationDescription??""}t.length>e.length&&t.length>=s&&t.splice(e.length)}}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var o=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,function(){var t=[];n.O=function(e,a,i,o){if(!a){var l=1/0;for(s=0;s<t.length;s++){a=t[s][0],i=t[s][1],o=t[s][2];for(var r=!0,c=0;c<a.length;c++)(!1&o||l>=o)&&Object.keys(n.O).every((function(t){return n.O[t](a[c])}))?a.splice(c--,1):(r=!1,o<l&&(l=o));if(r){t.splice(s--,1);var u=i();void 0!==u&&(e=u)}}return e}o=o||0;for(var s=t.length;s>0&&t[s-1][2]>o;s--)t[s]=t[s-1];t[s]=[a,i,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){n.j=299}(),function(){var t={299:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,o,l=a[0],r=a[1],c=a[2],u=0;if(l.some((function(e){return 0!==t[e]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(c)var s=c(n)}for(e&&e(a);u<l.length;u++)o=l[u],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(s)},a=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998,64],(function(){return n(5132)}));a=n.O(a)})();
//# sourceMappingURL=TeamManager.1dfcd7cb.js.map