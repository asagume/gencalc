{"version":3,"file":"js/chunk-common.197fa129.js","mappings":"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","sources":["webpack://gencalc/./src/calculate.ts","webpack://gencalc/./src/common.ts","webpack://gencalc/./src/i18n.ts","webpack://gencalc/./src/input.ts","webpack://gencalc/./src/master.ts","webpack://gencalc/./src/particlemaster.ts","webpack://gencalc/./src/components/ArtifactItem.vue?52dd","webpack://gencalc/./src/components/ArtifactItem.vue?f1bd","webpack://gencalc/./src/components/ArtifactItem.vue","webpack://gencalc/./src/components/ArtifactSetSelect.vue?96cd","webpack://gencalc/./src/components/ArtifactSetSelect.vue?c0d4","webpack://gencalc/./src/components/ArtifactSetSelect.vue","webpack://gencalc/./src/components/CharacterSelect.vue?9536","webpack://gencalc/./src/components/CharacterSelect.vue?1f8b","webpack://gencalc/./src/components/CharacterSelect.vue","webpack://gencalc/./src/components/CompositionFunction.vue?c68d","webpack://gencalc/./src/components/CompositionFunction.vue","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?2696","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?b372","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue?893c","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue?47be","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?a681","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?4cc0","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?d65a","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?9acb","webpack://gencalc/./src/pages/TeamManager/ERCalculatorCommon.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFuncCharacter.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFuncWeapon.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFunc.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?0eca","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?a17d","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue"],"sourcesContent":["import _ from 'lodash';\r\nimport { isNumeric, overwriteObject } from '@/common';\r\nimport {\r\n    CHANGE_KIND_STATUS,\r\n    CHANGE_KIND_TALENT,\r\n    DAMAGE_RESULT_TEMPLATE,\r\n    getStatValue,\r\n    NUMBER_CONDITION_VALUE_RE,\r\n    TArtifactDetailInput,\r\n    TCharacterInput,\r\n    TConditionInput,\r\n    TConditionValues,\r\n    TDamageResult,\r\n    TDamageResultEntry,\r\n    TOptionInput,\r\n    TStats,\r\n    TStatsInput,\r\n    TEMPLATE,\r\n    ARRAY,\r\n    ARRAY,\r\n    _ARRAY,\r\n    _ARRAY,\r\n    TEMPLATE,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n    loadRecommendation,\r\n    makeDamageDetailObjArrObjCharacter,\r\n    makeDamageDetailObjArrObjWeapon,\r\n    makeDamageDetailObjArrObjArtifactSets,\r\n    setupConditionValues,\r\n    updateNumberConditionValues,\r\n    TDamageResultElementalReaction,\r\n    getDefaultCharacterInput,\r\n    getDefaultArtifactDetailInput,\r\n    getDefaultConditionInput,\r\n    getDefaultStatsInput,\r\n    getDefaultDamageResultInput,\r\n} from '@/input';\r\nimport { ALL_ELEMENTS, ARTIFACT_MAIN_MASTER, ARTIFACT_SUB_MASTER, DAMAGE_CATEGORY_ARRAY, ELEMENTAL_REACTION_MASTER, ELEMENTAL_RESONANCE_MASTER, getCharacterMasterDetail, TArtifactMainRarity, TArtifactMainStat, TCharacterKey } from '@/master';\r\n\r\n/** [, ] => \\+?  */\r\nexport function getLevelStr(ascension: number, level: number): string {\r\n    return level + ARRAY[ascension][0] == level ? '+' : '';\r\n}\r\n\r\n/** / */\r\nexport function getStatValueByLevel(statObj: any, ascension: number, level: number): number {\r\n    if (!statObj) return 0;\r\n    const myLevelStr = getLevelStr(ascension, level);\r\n    if (myLevelStr in statObj) {\r\n        return statObj[myLevelStr];\r\n    }\r\n    const lowLevel = ARRAY[ascension][0];\r\n    const highLevel = ARRAY[ascension][ARRAY[ascension].length - 1];\r\n    const lowValue = statObj[lowLevel + '+'];\r\n    const highValue = statObj[highLevel];\r\n    return lowValue + (highValue - lowValue) * (level - lowLevel) / (highLevel - lowLevel);\r\n}\r\n\r\n/** / */\r\nexport function getPropertyValueByLevel(statObj: any, ascension: number): number {\r\n    const lowLevel = ARRAY[ascension][0];\r\n    return statObj[lowLevel + '+'];\r\n}\r\n\r\nexport function getValueByLevel(level: number | string, valueObj: any): number {\r\n    if (level in valueObj) return valueObj[level];\r\n    level = Number(level);\r\n    const levelArr = Object.keys(valueObj).map(s => Number(s));\r\n    let lowLevel;\r\n    let highLevel;\r\n    for (let i = 0; i < levelArr.length - 1; i++) {\r\n        if (levelArr[i] <= level && levelArr[i + 1] >= level) {\r\n            lowLevel = levelArr[i];\r\n            highLevel = levelArr[i + 1];\r\n        }\r\n    }\r\n    if (!lowLevel || !highLevel) return 0;\r\n    return valueObj[lowLevel] + (valueObj[highLevel] - valueObj[lowLevel]) * (level - lowLevel) / (highLevel - lowLevel);\r\n}\r\n\r\n/**  */\r\nexport function calculateArtifactStatsMain(artifactStatsMain: any, mainstats: string[]) {\r\n    (Object.keys(artifactStatsMain) as (keyof typeof artifactStatsMain)[]).forEach(\r\n        (key) => {\r\n            artifactStatsMain[key] = 0;\r\n        }\r\n    );\r\n    for (const statWithRarity of mainstats) {\r\n        if (!statWithRarity) continue;\r\n        const stat: any[] = statWithRarity.split('_');\r\n        artifactStatsMain[stat[1]] += ARTIFACT_MAIN_MASTER[stat[0] as TArtifactMainRarity][stat[1] as TArtifactMainStat];\r\n    }\r\n}\r\n\r\n/**  */\r\nexport function calculateArtifactSubStatByPriority(\r\n    artifactStatsSub: any,\r\n    mainstats: string[],\r\n    prioritySubstats: string[],\r\n    priotritySubstatIndices: number[],\r\n    priotritySubstatValues: number[][],\r\n    prioritySubstatCounts: number[]) {\r\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach((key) => {\r\n        artifactStatsSub[key] = 0;\r\n    });\r\n    let totalCount = 0;\r\n    for (let i = 0; i < prioritySubstats.length; i++) {\r\n        if (!prioritySubstats[i]) continue;\r\n        if (priotritySubstatIndices[i] === undefined || priotritySubstatIndices[i] < 0) continue;\r\n        if (!prioritySubstatCounts[i]) continue;\r\n        artifactStatsSub[prioritySubstats[i]] += priotritySubstatValues[i][priotritySubstatIndices[i]] * prioritySubstatCounts[i];\r\n        totalCount += prioritySubstatCounts[i];\r\n    }\r\n    // : 3 or 4\r\n    // : 5 (+4 +8 +12 +16 +20)\r\n    // +: min=40 max=45\r\n    const noPrioritySubstatArr = ARRAY.filter(s => !prioritySubstats.includes(s));\r\n    let noPriorityCount = Math.min(45, 40 + Math.floor(Math.max(0, (totalCount - 12) / 5)));\r\n    noPriorityCount -= Math.min(45, totalCount);\r\n    for (let i = noPriorityCount; i > 0; i--) {\r\n        const substat = noPrioritySubstatArr[i % noPrioritySubstatArr.length] as keyof typeof ARTIFACT_SUB_MASTER;\r\n        artifactStatsSub[substat] += ARTIFACT_SUB_MASTER[substat][3];\r\n    }\r\n    const star4Count = mainstats.filter(s => s && s.startsWith('4')).length;\r\n    const multiplier = 1 - (0.07 * star4Count); // 47%\r\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach(\r\n        (key) => {\r\n            artifactStatsSub[key] *= multiplier;\r\n            artifactStatsSub[key] = Math.round(artifactStatsSub[key] * 10) / 10;\r\n        }\r\n    );\r\n}\r\n\r\nexport function calculateArtifactStats(artifactDetailInput: TArtifactDetailInput) {\r\n    const artifactStats = artifactDetailInput.;\r\n    const artifactStatsMain = artifactDetailInput.;\r\n    const artifactStatsSub = artifactDetailInput.;\r\n    for (const stat of Object.keys(artifactStats)) {\r\n        (artifactStats as any)[stat] = 0;\r\n    }\r\n    for (const stat of Object.keys(artifactStatsMain)) {\r\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsMain as any)[stat];\r\n        else (artifactStats as any)[stat] = (artifactStatsMain as any)[stat];\r\n    }\r\n    for (const stat of Object.keys(artifactStatsSub)) {\r\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsSub as any)[stat];\r\n        else (artifactStats as any)[stat] = (artifactStatsSub as any)[stat];\r\n    }\r\n}\r\n\r\n/**  */\r\nexport const calculateStats = function (\r\n    statsInput: TStatsInput,\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput\r\n) {\r\n    if (!characterInput) return;\r\n    if (!artifactDetailInput) return;\r\n    if (!conditionInput) return;\r\n    if (!optionInput) return;\r\n\r\n    try {\r\n        const characterMaster = characterInput.characterMaster;\r\n        const ascension = characterInput.;\r\n        const level = characterInput.;\r\n        const constellation = characterInput.;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n        const weaponAscension = characterInput.;\r\n        const weaponLevel = characterInput.;\r\n\r\n        const workStatsObj = _.cloneDeep(TEMPLATE);\r\n\r\n        workStatsObj[''] = ascension;\r\n        workStatsObj[''] = level;\r\n        workStatsObj[''] = constellation;\r\n        (workStatsObj as any)[''] = characterMaster.;\r\n\r\n        // \r\n        if ('' in characterMaster['']) {\r\n            workStatsObj[''] = Number(characterMaster['']['']);\r\n        }\r\n        if ('' in characterMaster) {\r\n            for (const name of Object.keys(characterMaster[''])) {\r\n                if (name in conditionInput.conditionValues) {\r\n                    workStatsObj[name] = Number(conditionInput.conditionValues[name]);\r\n                } else {\r\n                    workStatsObj[name] = characterMaster[''][name];\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const stat of Object.keys(statsInput.enemyMaster).filter(s => s != 'key')) {\r\n            const toStat = '' + stat;\r\n            workStatsObj[toStat] = statsInput.enemyMaster[stat];\r\n        }\r\n\r\n        // \r\n        Object.keys(statsInput.statAdjustments).filter(s => !ARRAY.includes(s)).forEach(stat => {\r\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustments[stat];\r\n        });\r\n        Object.keys(statsInput.statAdjustmentsEx).filter(s => !ARRAY.includes(s)).forEach(stat => {\r\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustmentsEx[stat];\r\n        });\r\n\r\n        // \r\n        for (const stat of Object.keys(characterMaster[''])) {\r\n            if (ARRAY.includes(stat)) {\r\n                workStatsObj[stat] += getStatValueByLevel(characterMaster[''][stat], ascension, level);\r\n            } else {\r\n                const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\r\n                if (toStat in workStatsObj) {\r\n                    workStatsObj[toStat] += getPropertyValueByLevel(characterMaster[''][stat], ascension);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const stat of Object.keys(weaponMaster[''])) {\r\n            workStatsObj[stat] += getStatValueByLevel(weaponMaster[''][stat], weaponAscension, weaponLevel);\r\n        }\r\n\r\n        // \r\n        const artifactStats = artifactDetailInput.;\r\n        for (const stat of Object.keys(artifactStats)) {\r\n            const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\r\n            workStatsObj[toStat] += (artifactStats as any)[stat];\r\n        }\r\n\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n\r\n        if (optionInput) {\r\n            // \r\n            [optionInput.elementalResonance, optionInput.teamOption, optionInput.miscOption].forEach(optionObj => {\r\n                if (optionObj && optionObj.conditionAdjustments) {\r\n                    Object.keys(optionObj.conditionAdjustments).forEach(stat => {\r\n                        const workValue = optionObj.conditionAdjustments[stat];\r\n                        if (workValue === Infinity) {\r\n                            if (stat.endsWith('')) {\r\n                                if (['', '', ''].includes(characterMaster.)) {\r\n                                    const my = stat.replace(/$/, '');\r\n                                    _Var = my;\r\n                                    _Var = my;\r\n                                    _Var = my;\r\n                                }\r\n                            }\r\n                        } else if (workValue !== null) {\r\n                            if (stat in workStatsObj) {\r\n                                workStatsObj[stat] += workValue;\r\n                            } else {\r\n                                workStatsObj[stat] = workValue;\r\n                            }\r\n                            if (stat.endsWith('V1') || stat.endsWith('V2') || stat.endsWith('V3')) {\r\n                                const toStat = stat.replace(/V[1-3]$/, '');\r\n                                if (toStat in workStatsObj) {\r\n                                    workStatsObj[toStat] += workValue;\r\n                                } else {\r\n                                    workStatsObj[toStat] = workValue;\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n\r\n        // \r\n        calculateStatsTop(workStatsObj, optionInput);\r\n        // \r\n        ARRAY.forEach(stat => {\r\n            if (stat in statsInput.statAdjustments) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += statsInput.statAdjustments[stat];\r\n                }\r\n            }\r\n        });\r\n\r\n        // \r\n        const conditionAdjustments = updateStatsWithCondition(characterInput, validConditionValueArr, workStatsObj);\r\n\r\n        // \r\n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n            if (myDamageDetail && CHANGE_KIND_TALENT in myDamageDetail) {\r\n                for (const myDetailObj of myDamageDetail[CHANGE_KIND_TALENT]) {\r\n                    if (myDetailObj['']) {\r\n                        const number = checkConditionMatches(myDetailObj[''], validConditionValueArr, constellation);\r\n                        if (number == 0) continue;\r\n                    }\r\n                    if (myDetailObj[''] && myDetailObj[''].endsWith('')) {\r\n                        const my = myDetailObj[''].replace('', '');\r\n                        if (!myDetailObj['']) {\r\n                            _Var = my;\r\n                            _Var = my;\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        conditionInput. = [_Var, _Var, _Var];\r\n\r\n        overwriteObject(statsInput.statsObj, workStatsObj);\r\n        overwriteObject(conditionInput.conditionAdjustments, conditionAdjustments);\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nfunction updateStatsWithCondition(\r\n    characterInput: TCharacterInput,\r\n    validConditionValueArr: string[],\r\n    workStatsObj: TStats\r\n) {\r\n    const constellation = characterInput.;\r\n    const workConditionAdjustments = {} as { [key: string]: number };\r\n    const statFormulaMap: Map<string, any[]> = new Map();\r\n\r\n    for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n        if (myDamageDetail && CHANGE_KIND_STATUS in myDamageDetail) {\r\n            for (const myDetailObj of myDamageDetail[CHANGE_KIND_STATUS]) {\r\n                let hasCondition = false;\r\n                let myNew = myDetailObj[''];\r\n                if (myDetailObj['']) {\r\n                    const number = checkConditionMatches(myDetailObj., validConditionValueArr, constellation);\r\n                    if (number == 0) continue;\r\n                    if (number != 1) {\r\n                        if (_.isString(myNew)) {\r\n                            myNew += '*' + number;\r\n                        } else if (_.isArray(myNew)) {\r\n                            myNew = (myNew as any).concat(['*', number]);\r\n                        }\r\n                    }\r\n                    hasCondition = true;\r\n                }\r\n                let myNew = myDetailObj[''];\r\n                if (myNew) {\r\n                    if (myDetailObj['']) {\r\n                        myNew += '.' + myDetailObj[''];\r\n                    }\r\n                    if (!statFormulaMap.has(myNew)) {\r\n                        statFormulaMap.set(myNew, []);\r\n                    }\r\n                    statFormulaMap.get(myNew)?.push([myNew, myNew, myDetailObj., myDetailObj., hasCondition]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const hpStatArr = ['HP', 'HP%', 'HP+', 'HP'];\r\n    const defStatArr = ['', '%', '+', ''];\r\n    const atkStatArr = ['', '%', '+', ''];\r\n    const otherStatArr = [..._ARRAY, ..._ARRAY, ...ARRAY, ...ARRAY, ...ARRAY, ''];\r\n    otherStatArr.push(...Array.from(statFormulaMap.keys()).filter(s => s.indexOf('.') != -1));\r\n\r\n    const formulaStatArr = [...new Set(Array.from(statFormulaMap.keys()).map(s => s.replace(/V[1-3]$/, '')))].filter(s => ![...hpStatArr, ...defStatArr, ...atkStatArr, ...otherStatArr].includes(s));\r\n    formulaStatArr.sort(compareFunction);\r\n\r\n    // HP\r\n    for (const stat of hpStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    workStatsObj['HP'] += workStatsObj['HP'] + workStatsObj['HP+'];\r\n    workStatsObj['HP'] += (workStatsObj['HP'] * workStatsObj['HP%']) / 100;\r\n\r\n    for (const stat of formulaStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // \r\n    for (const stat of defStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\r\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\r\n\r\n    // \r\n    for (const stat of atkStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\r\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\r\n\r\n    // \r\n    for (const stat of otherStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return workConditionAdjustments;\r\n}\r\n\r\nfunction updateStatsWithConditionSub(\r\n    workConditionAdjustments: TStats,\r\n    workStatsObj: TStats,\r\n    statFormulaMap: Map<string, any[]>,\r\n    formulaKey: string\r\n) {\r\n    for (const formulaArr of [statFormulaMap.get(formulaKey), ...['V1', 'V2', 'V3'].map(s => statFormulaMap.get(formulaKey + s))]) {\r\n        if (!formulaArr) continue;\r\n        formulaArr.forEach(formula => {\r\n            const diffStats = updateStats(workStatsObj, formula[0], formula[1], formula[2], formula[3]);\r\n            for (const stat of Object.keys(diffStats)) {\r\n                if (ARRAY.includes(stat + 'TOP')) {\r\n                    const statValue = getStatValue(stat + 'X7', workStatsObj);\r\n                    const topValue = workStatsObj[stat + 'TOP'];\r\n                    if (statValue !== undefined && topValue !== undefined) {\r\n                        if (statValue > topValue) {\r\n                            workStatsObj[stat + 'TOP'] = statValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (formula[4]) {\r\n                for (const stat of Object.keys(diffStats)) {\r\n                    if (stat in workConditionAdjustments) {\r\n                        workConditionAdjustments[stat] += diffStats[stat];\r\n                    } else {\r\n                        workConditionAdjustments[stat] = diffStats[stat];\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nfunction compareFunction(a: string, b: string) {\r\n    const arr = ['', '', '', '', '', '', ''];\r\n    const lowestArr = [''];\r\n    let aIndex = arr.indexOf(a);\r\n    if (lowestArr.indexOf(a) >= 0) {\r\n        aIndex = arr.length + 1;\r\n    }\r\n    let bIndex = arr.indexOf(b);\r\n    if (lowestArr.indexOf(b) >= 0) {\r\n        bIndex = arr.length + 1;\r\n    }\r\n    return (aIndex != -1 ? aIndex : arr.length) - (bIndex != -1 ? bIndex : arr.length);\r\n}\r\n\r\nexport function calculateElementalResonance(\r\n    conditionValues: TConditionValues,\r\n    conditionInput: TConditionInput,\r\n): TStats {\r\n    const result: TStats = {};\r\n    const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n    for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\r\n        if (!conditionValues[key]) continue;\r\n        const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\r\n        if (master.) {\r\n            for (const detailObj of master.) {\r\n                if (detailObj.) {\r\n                    const matchRet = checkConditionMatches(detailObj., validConditionValueArr, 0);\r\n                    if (matchRet == 0) continue;\r\n                }\r\n                if (detailObj. && detailObj.) {\r\n                    if (detailObj. in result) {\r\n                        result[detailObj.] += detailObj.;\r\n                    } else {\r\n                        result[detailObj.] = detailObj.;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (key == '' && conditionValues.dendroOption) {\r\n            result[''] += Number(conditionValues.dendroOption);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n// /**  */\r\n// function calculateFormulaArray(\r\n//     formulaArr: any,\r\n//     statsObj: TStats,\r\n//     damageResult: TDamageResult,\r\n//     opt_max: number | string | Array<number | string> | null = null,\r\n//     opt_min: number | string | Array<number | string> | null = null\r\n// ): number {\r\n//     try {\r\n//         let result = 0;\r\n//         if (Array.isArray(formulaArr)) {\r\n//             let operator: string | null = null;\r\n//             for (const entry of formulaArr) {\r\n//                 let subResult = 0;\r\n//                 if (['+', '-', '*', '/'].includes(entry)) {\r\n//                     operator = entry;\r\n//                     continue;\r\n//                 } else if (isNumeric(entry)) {\r\n//                     subResult = Number(entry);\r\n//                 } else if (Array.isArray(entry)) {\r\n//                     subResult = calculateFormulaArray(entry, statsObj, damageResult);\r\n//                 } else if (entry.indexOf('#') != -1) {\r\n//                     const nameArr = entry.split('#');\r\n//                     if (damageResult && nameArr[0] in damageResult) {\r\n//                         const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\r\n//                         let damage = null;\r\n//                         for (const damageArr of damageArrArr) {\r\n//                             if (nameArr[1] == damageArr[0]) {\r\n//                                 damage = damageArr[4];  // \r\n//                                 break;\r\n//                             }\r\n//                         }\r\n//                         if (damage != null) {\r\n//                             subResult = damage;\r\n//                         } else {\r\n//                             console.error(formulaArr, statsObj, damageResult, opt_max, opt_min, entry);\r\n//                         }\r\n//                     }\r\n//                 } else {\r\n//                     const temp = getStatValue(entry, statsObj);\r\n//                     if (temp === undefined) {\r\n//                         console.error(formulaArr, statsObj, null, opt_max, opt_min, entry);\r\n//                     } else {\r\n//                         subResult = temp;\r\n//                     }\r\n//                 }\r\n//                 if (operator == null) {\r\n//                     result += subResult;\r\n//                 } else {\r\n//                     switch (operator) {\r\n//                         case '+':\r\n//                             result += subResult;\r\n//                             break;\r\n//                         case '-':\r\n//                             result -= subResult;\r\n//                             break;\r\n//                         case '*':\r\n//                             result *= subResult;\r\n//                             result = Math.floor(result * 100) / 100;\r\n//                             break;\r\n//                         case '/':\r\n//                             result /= subResult;\r\n//                             break;\r\n//                     }\r\n//                 }\r\n//             }\r\n//         } else if (isNumeric(formulaArr)) {\r\n//             result = Number(formulaArr);\r\n//         } else if (formulaArr.indexOf('#') != -1) {\r\n//             const nameArr = formulaArr.split('#');\r\n//             if (damageResult && nameArr[0] in damageResult) {\r\n//                 const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\r\n//                 for (const damageArr of damageArrArr) {\r\n//                     if (nameArr[1] == damageArr[0]) {\r\n//                         result = damageArr[4];  // \r\n//                         break;\r\n//                     }\r\n//                 }\r\n//             }\r\n//         } else {\r\n//             const temp = getStatValue(formulaArr, statsObj);\r\n//             if (temp !== undefined) {\r\n//                 result = temp;\r\n//             } else {\r\n//                 console.error(formulaArr, statsObj, null, opt_max, opt_min);\r\n//                 result = 0; // \r\n//             }\r\n//         }\r\n//         if (opt_max != null) {\r\n//             const maxValue = calculateFormulaArray(opt_max, statsObj, damageResult);\r\n//             result = Math.min(result, maxValue);\r\n//         }\r\n//         if (opt_min != null) {\r\n//             const minValue = calculateFormulaArray(opt_min, statsObj, damageResult);\r\n//             result = Math.max(result, minValue);\r\n//         }\r\n//         return result;\r\n//     } catch (error) {\r\n//         console.error(error);\r\n//         console.error(formulaArr, statsObj, damageResult, opt_max, opt_min);\r\n//         throw error;\r\n//     }\r\n// }\r\n\r\n/**  */\r\nexport function calculateDamageResult(\r\n    damageResult: TDamageResult,\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    statsInput: TStatsInput,\r\n) {\r\n    try {\r\n        if (!characterInput) return;\r\n        if (!conditionInput) return;\r\n        if (!statsInput) return;\r\n        const characterMaster = characterInput.characterMaster;\r\n        const constellation = characterInput[''];\r\n        const vision = characterMaster[''];\r\n\r\n        // \r\n        const reactionResult = _.cloneDeep(TEMPLATE);\r\n        const reactionMasterArr = [];\r\n        const dmgElementSet = new Set<string>();\r\n        dmgElementSet.add(vision); // \r\n        if (conditionInput.selectList.filter(s => s.name == '').length) {\r\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\r\n            const selectedIndex = conditionInput.conditionValues[''] as number;\r\n            if (selectedIndex) {\r\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\r\n                dmgElementSet.add(dmgElement); // \r\n            }\r\n        }\r\n        if (conditionInput.selectList.filter(s => s.name == '').length) {\r\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\r\n            const selectedIndex = conditionInput.conditionValues[''] as number;\r\n            if (selectedIndex) {\r\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\r\n                dmgElementSet.add(dmgElement); // \r\n            }\r\n        }\r\n        for (const dmgElement of conditionInput.) {\r\n            if (dmgElement && dmgElement != '') {\r\n                dmgElementSet.add(dmgElement); // //\r\n            }\r\n        }\r\n        for (const dmgElement of dmgElementSet) {\r\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\r\n        }\r\n        let has = false;\r\n        if (characterMaster. == '' || characterMaster. == '') {\r\n            has = true;\r\n        } else {\r\n            const characterArr = (ELEMENTAL_REACTION_MASTER as any).?.?.;\r\n            if (characterArr && characterArr.includes(characterMaster.)) {\r\n                has = true;\r\n            }\r\n        }\r\n        if (has) {\r\n            const dmgElement = '';\r\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\r\n        }\r\n        reactionResult[''] = vision;\r\n        reactionMasterArr.forEach(entry => {\r\n            const element = entry[0];\r\n            const reactionMaster = entry[1];\r\n            Object.keys(reactionMaster).forEach(reaction => {\r\n                const reactionObj = reactionMaster[reaction];\r\n                let resultValue = 0;\r\n                if (reaction == '') {\r\n                    resultValue = calculate(element, statsInput.statsObj);\r\n                } else if (reaction == '') {\r\n                    let dmgElement = '';\r\n                    for (const entry of conditionInput.selectList) {\r\n                        if (entry.name == '') {\r\n                            const optionValue = entry.options[Number(conditionInput.conditionValues[''])];\r\n                            if (optionValue) dmgElement = optionValue.replace(/$/, '');\r\n                            break;\r\n                        }\r\n                    }\r\n                    reactionResult[''] = dmgElement;\r\n                    resultValue = calculate(reaction, element, statsInput.statsObj, dmgElement);\r\n                } else {\r\n                    switch (reactionObj['']) {\r\n                        case '':    //  \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                        case '':    //    \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                        case '':    //  \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                    }\r\n                }\r\n                ['', '', ''].forEach(suffix => {\r\n                    let key = reaction + suffix;\r\n                    if (suffix === '') {\r\n                        key += '_' + element;\r\n                    }\r\n                    if (key in reactionResult) {\r\n                        (reactionResult as any)[key] = resultValue;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        Object.keys(reactionResult).filter(s => s.endsWith('') && s.indexOf('') == -1).forEach(dmg => {\r\n            ['', ''].forEach(stat => {\r\n                const key = dmg + stat;\r\n                if (key in statsInput.statsObj) {\r\n                    (reactionResult as any)[key] = statsInput.statsObj[key];\r\n                }\r\n            });\r\n        });\r\n        overwriteObject(damageResult., reactionResult);\r\n\r\n        // \r\n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n\r\n        const damageDetailMyCharacter = characterInput.damageDetailMyCharacter;\r\n        const damageDetailMyWeapon = characterInput.damageDetailMyWeapon;\r\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\r\n\r\n        if (Array.isArray(damageResult[''])) {\r\n            damageResult[''].splice(0, damageResult[''].length);\r\n        }\r\n\r\n        if (damageDetailMyCharacter) {\r\n            for (const category of ['', '', '']) {\r\n                damageResult[category] = [];\r\n                if (!(category in damageDetailMyCharacter)) continue;\r\n                const element = conditionInput.[['', '', ''].indexOf(category)];\r\n                let talentDetailArr = (damageDetailMyCharacter as any)[category];\r\n                if (('' + category) in damageDetailMyCharacter) {\r\n                    const workObj = (damageDetailMyCharacter as any)['' + category];\r\n                    if (checkConditionMatches(workObj[''], validConditionValueArr, constellation) != 0) {\r\n                        talentDetailArr = workObj[''];\r\n                    }\r\n                }\r\n                for (const talentDetail of talentDetailArr) {\r\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation) == 0) {\r\n                        continue;\r\n                    }\r\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult, element);\r\n                    (damageResult[category] as any).push(resultArr);\r\n                }\r\n                if (category == '') {\r\n                    let n = 0;\r\n                    const sum = ['', null, 0, 0, 0, null, 0, 0, 1] as TDamageResultEntry;\r\n                    for (const entry of damageResult[category]) {\r\n                        if ((entry[0].endsWith('') || [''].includes(entry[0])) && !entry[0].startsWith('_')) {  // \r\n                            sum[1] = entry[1];\r\n                            sum[2] += entry[2];\r\n                            if (entry[3] == null) sum[3] = null;\r\n                            else if (sum[3] != null) sum[3] += entry[3];\r\n                            sum[4] += entry[4];\r\n                            if (sum[6] != null) {   // HIT\r\n                                if (entry[6]) sum[6] += entry[6];\r\n                                else sum[6]++;\r\n                            }\r\n                            sum[7] = entry[7];  // \r\n                            sum[8] = entry[8];  // \r\n                            n++;\r\n                        }\r\n                    }\r\n                    if (n > 0) {\r\n                        damageResult[category].splice(n, 0, sum);\r\n                    }\r\n                }\r\n            }\r\n            for (const category of ['', '', '']) {\r\n                damageResult[category] = [];\r\n                if (!(category in damageDetailMyCharacter)) continue;\r\n                const talentDetailArr = (damageDetailMyCharacter as any)[category];\r\n                for (const talentDetail of talentDetailArr) {\r\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation) == 0) {\r\n                        continue;\r\n                    }\r\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\r\n                    (damageResult[category] as TDamageResultEntry[]).push(resultArr);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const myDamageDetail of [damageDetailMyWeapon, damageDetailMyArtifactSets]) {\r\n            const category = '';\r\n            if (!myDamageDetail || !(category in myDamageDetail)) continue;\r\n            const talentDetailArr = (myDamageDetail as any)[category];\r\n            for (const talentDetail of talentDetailArr) {\r\n                if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation) == 0) {\r\n                    continue;\r\n                }\r\n                const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\r\n                (damageResult[category] as TDamageResultEntry[]).push(resultArr);\r\n            }\r\n        }\r\n\r\n        // \r\n        const damageTakenArr = [] as any;\r\n        for (const stat of _ARRAY) {\r\n            const element = stat.replace(/$/, '').replace(/$/, '');\r\n            const damageTaken = calculateDamageTaken(statsInput.statsObj, 10000, element);\r\n            damageTakenArr.push({ key: element, value: damageTaken });\r\n        }\r\n        damageResult[''] = damageTakenArr;\r\n\r\n        // \r\n        const resScoreArr = [] as any;\r\n        for (const damageTaken of damageTakenArr) {\r\n            resScoreArr.push({ key: damageTaken.key, value: statsInput.statsObj['HP'] * 10000 / damageTaken.value });\r\n        }\r\n        damageResult[''] = resScoreArr;\r\n\r\n        console.debug('damageResult', damageResult);\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(damageResult, characterInput, conditionInput, statsInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeValidConditionValueArr(conditionInput: any) {\r\n    try {\r\n        const result = [] as string[];\r\n        if (!conditionInput) return result;\r\n        const checkboxList = conditionInput.checkboxList;\r\n        if (checkboxList) {\r\n            checkboxList.forEach((entry: any) => {\r\n                if (conditionInput.conditionValues[entry.name]) {\r\n                    result.push(entry.name);\r\n                }\r\n            });\r\n        }\r\n        const selectList = conditionInput.selectList;\r\n        if (selectList) {\r\n            selectList.forEach((entry: any) => {\r\n                const value = conditionInput.conditionValues[entry.name];\r\n                if (value !== undefined && value !== null) {\r\n                    if (value > 0 || (value == 0 && entry.required)) {\r\n                        result.push(entry.name + '@' + entry.options[value]);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const numberList = conditionInput.numberList;\r\n        if (numberList) {\r\n            numberList.forEach((entry: any) => {\r\n                const value = conditionInput.conditionValues[entry.name];\r\n                if (value !== undefined && value !== null) {\r\n                    result.push(entry.name + '=' + value);\r\n                }\r\n            });\r\n        }\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(conditionInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function checkConditionMatches(\r\n    conditionStr: string,\r\n    validConditionValueArr: string[],\r\n    constellation: number,\r\n): number {\r\n    const myCondStr = conditionStr.split('^')[0];\r\n\r\n    if (myCondStr.indexOf('|') != -1) {  // |OR\r\n        const myCondStrArr = myCondStr.split('|');\r\n        for (let i = 0; i < myCondStrArr.length; i++) {\r\n            const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation);\r\n            if (resultSub == 1) {\r\n                return 1;   // \r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    const myCondStrArr = myCondStr.split('&');    // &AND\r\n    let result = 1;\r\n    for (let i = 0; i < myCondStrArr.length; i++) {\r\n        const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation);\r\n        if (resultSub == 0) {\r\n            return 0;   // \r\n        }\r\n        if (resultSub != 1) {\r\n            result = resultSub;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction checkConditionMatchesSub(\r\n    conditionStr: string,\r\n    validConditionValueArr: string[],\r\n    constellation: number,\r\n): number {\r\n    const myCondArr = conditionStr.split(/[@=]/);\r\n    if (myCondArr[0] == '') {\r\n        if (myCondArr.length == 2) {\r\n            if (isNumeric(myCondArr[1])) {\r\n                const work = Number(myCondArr[1]);\r\n                if (work <= constellation) {\r\n                    return 1;\r\n                }\r\n            }\r\n        }\r\n        return 0;   // \r\n    }\r\n    if (validConditionValueArr.includes(conditionStr) || validConditionValueArr.includes(conditionStr.replace('=', '@'))) {\r\n        return 1;   //  \r\n    }\r\n    if (myCondArr.length == 1) {\r\n        if (validConditionValueArr.filter(s => s.split('@')[0] == conditionStr).length > 0) {\r\n            return 1;   //  \r\n        }\r\n        return 0;   // \r\n    }\r\n    if (conditionStr.indexOf('=') != -1) {\r\n        if (NUMBER_CONDITION_VALUE_RE.test(myCondArr[1])) { // \r\n            const workArr = validConditionValueArr.filter(s => s.split('=')[0] == myCondArr[0]);\r\n            if (workArr.length > 0) {\r\n                return Number(workArr[0].split('=')[1]);   // \r\n            }\r\n        }\r\n        return 0;   // \r\n    }\r\n    const re = new RegExp('[^0-9]*?([\\\\-0-9\\\\.]+).*');    // ={prefix}{}{postfix}\r\n    for (let i = 0; i < validConditionValueArr.length; i++) {\r\n        if (validConditionValueArr[i].startsWith(myCondArr[0] + '@')) {\r\n            const workCondArr = validConditionValueArr[i].split('@');\r\n            const reRet = re.exec(workCondArr[1]);\r\n            if (reRet) {\r\n                const work = Number(reRet[1]);\r\n                return work;    //  \r\n            }\r\n        }\r\n    }\r\n    return 0;   // \r\n}\r\n\r\n/**  */\r\nfunction calculate(\r\n    reaction: any,\r\n    element: string,\r\n    statsObj: any,\r\n) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        let result = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        result *= 1 + (25 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction calculate(\r\n    reaction: any,\r\n    element: string,\r\n    statsObj: TStats,\r\n    opt_dmgElement?: string,\r\n) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        const dmgElement = opt_dmgElement ?? (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        let result = getValueByLevel(level, (ELEMENTAL_REACTION_MASTER as any)[element][reaction]['']);\r\n        result *= 1 + (16 * elementalMastery / (elementalMastery + 2000)) + dmgBuff / 100;\r\n        result *= calculateEnemyRes(dmgElement, statsObj);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj, opt_dmgElement);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculate(element: string, statsObj: TStats) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[''] ?? 0;\r\n        let result = getValueByLevel(level, (ELEMENTAL_REACTION_MASTER as any)[element]['']['']);\r\n        result *= 1 + (40 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculate(reaction: any, element: string, statsObj: TStats) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        const dmgElement = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        let result = getValueByLevel(level, (ELEMENTAL_REACTION_MASTER as any)[element][reaction]['']);\r\n        result *= 1 + (5 * elementalMastery / (elementalMastery + 1200)) + dmgBuff / 100;\r\n        result *= calculateEnemyRes(dmgElement, statsObj);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nexport function calculateEnemyDef(statsObj: TStats, opt_ignoreDef = 0) { // , \r\n    try {\r\n        const level = statsObj[''] ?? 0;\r\n        const enemyLevel = statsObj[''] ?? 0;\r\n        const calcIgnoreDef = opt_ignoreDef / 100;\r\n        const calcDef = Math.max(-100, statsObj[''] ?? 0) / 100;    //  -100%\r\n        const result = (level + 100) / ((1 - calcIgnoreDef) * (1 + calcDef) * (enemyLevel + 100) + level + 100);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(statsObj, opt_ignoreDef);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/** () */\r\nfunction calculateRes(res: number) {\r\n    if (res == Infinity) return 0;  // \r\n    let result = res;\r\n    if (result < 0) {\r\n        result = 100 - result / 2;\r\n    } else if (result < 75) {\r\n        result = 100 - result;\r\n    } else {\r\n        result = 10000 / (4 * result + 100)\r\n    }\r\n    result /= 100;\r\n    return result;\r\n}\r\n\r\n/** () */\r\nexport function calculateEnemyRes(element: string, statsObj: TStats) {\r\n    try {\r\n        const statName = '' + element + (element != '' ? '' : '') + '';\r\n        const result = calculateRes(statsObj[statName] ?? 0);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculateDamageFromDetail(\r\n    detailObj: any,\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    opt_element: string | null = null\r\n): TDamageResultEntry {\r\n    try {\r\n        const myArr = [] as Array<string>;\r\n        let isCalc = true;\r\n        let isCalc = true;\r\n        let isCalc = true;\r\n        let my = detailObj[''] != null ? detailObj[''] : opt_element != null ? opt_element : null;\r\n        let my = 0; // for \r\n        let my = 0; // for \r\n        const myHIT = detailObj['HIT'] != null ? Number(detailObj['HIT']) : 1;\r\n        const my = {} as { [key: string]: number };\r\n\r\n        const constellation = statsObj[''];\r\n        const talentChangeDetailObjArr = getChangeDetailObjArr(characterInput, CHANGE_KIND_TALENT);\r\n\r\n        let validConditionValueArr = makeValidConditionValueArr(conditionInput);  // \r\n        const myConditionValuesAfter = _.cloneDeep(conditionInput.conditionValues);\r\n\r\n        if (detailObj['']) {\r\n            for (const delCondition of detailObj['']) {\r\n                let work = delCondition;\r\n                if (_.isPlainObject(delCondition)) {\r\n                    work = delCondition.;\r\n                }\r\n                if (work in myConditionValuesAfter) {\r\n                    if (isNumeric(myConditionValuesAfter[work])) {\r\n                        myConditionValuesAfter[work] = 0;\r\n                    } else if (_.isBoolean(myConditionValuesAfter[work])) {\r\n                        myConditionValuesAfter[work] = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (detailObj['']) {\r\n            for (const addCondition of detailObj['']) {\r\n                if (_.isString(addCondition)) {\r\n                    if (addCondition in myConditionValuesAfter) {\r\n                        if (_.isBoolean(myConditionValuesAfter[addCondition])) {\r\n                            myConditionValuesAfter[addCondition] = true;\r\n                        }\r\n                    }\r\n                } else if (_.isPlainObject(addCondition)) {\r\n                    if (addCondition. in myConditionValuesAfter) {\r\n                        let newValue = myConditionValuesAfter[addCondition.];\r\n                        if ('' in addCondition) {\r\n                            if (_.isString(addCondition.)) {\r\n                                const work = String(addCondition.).replace(/^\\+/, '');\r\n                                (newValue as number) += Number(work);\r\n                            } else if (isNumeric(addCondition.)) {\r\n                                newValue = addCondition.;\r\n                            } else {\r\n                                newValue = addCondition.;\r\n                            }\r\n                            if (newValue !== null && isNumeric(newValue)) {\r\n                                if ((newValue as number) < 0) {\r\n                                    newValue = 0;\r\n                                } else {\r\n                                    conditionInput.selectList.filter(s => s.name == addCondition.).forEach(entry => {\r\n                                        if (newValue !== null && (newValue as number) >= entry.options.length) {\r\n                                            newValue = entry.options.length - 1;\r\n                                        }\r\n                                    })\r\n                                }\r\n                            }\r\n                        } else {\r\n                            newValue = true;\r\n                        }\r\n                        myConditionValuesAfter[addCondition.] = newValue;\r\n                    }\r\n                    if (addCondition.) {\r\n                        if (Array.isArray(addCondition.)) {\r\n                            addCondition..forEach((desc: string) => {\r\n                                if (!damageResult[''].includes(desc)) {\r\n                                    damageResult[''].push(desc);\r\n                                }\r\n                            })\r\n                        } else {\r\n                            const desc = addCondition.;\r\n                            if (!damageResult[''].includes(desc)) {\r\n                                damageResult[''].push(desc);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (detailObj[''] || detailObj['']) {\r\n            const myConditionInputAfter: TConditionInput = _.cloneDeep(conditionInput);\r\n            myConditionInputAfter.conditionValues = myConditionValuesAfter;\r\n            const validConditionValueArrAfter = makeValidConditionValueArr(myConditionInputAfter);\r\n\r\n            [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets].forEach(damageDetail => {\r\n                if (!damageDetail) return;\r\n                damageDetail..filter(s => s.).forEach(damageDetailObj => {\r\n                    const conditionStr = damageDetailObj. as string;\r\n                    let valueBefore = 0;\r\n                    let valueAfter = 0;\r\n                    const matchesBefore = checkConditionMatches(conditionStr, validConditionValueArr, constellation);\r\n                    const matchesAfter = checkConditionMatches(conditionStr, validConditionValueArrAfter, constellation);\r\n                    if (matchesBefore == matchesAfter) return;\r\n                    if (matchesBefore !== 0) {\r\n                        let new = damageDetailObj.;\r\n                        if (new !== null) {\r\n                            new = '(' + new + ')*' + matchesBefore;\r\n                            valueBefore = evalFormula(new, statsObj, damageResult, damageDetailObj., damageDetailObj.);\r\n                        }\r\n                    }\r\n                    if (matchesAfter !== 0) {\r\n                        let new = damageDetailObj.;\r\n                        if (new !== null) {\r\n                            new = '(' + new + ')*' + matchesAfter;\r\n                            valueAfter = evalFormula(new, statsObj, damageResult, damageDetailObj., damageDetailObj.);\r\n                        }\r\n                    }\r\n                    const diff = valueAfter - valueBefore;\r\n                    if (diff) {\r\n                        let new = damageDetailObj. as string;\r\n                        if (damageDetailObj.) {\r\n                            new += '.' + damageDetailObj.;\r\n                        }\r\n                        if (new in my) {\r\n                            my[new] += diff;\r\n                        } else {\r\n                            my[new] = diff;\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n\r\n            validConditionValueArr = validConditionValueArrAfter;\r\n        }\r\n\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n        if (talentChangeDetailObjArr) {\r\n            // \r\n            talentChangeDetailObjArr.forEach(valueObj => {\r\n                let number = null;\r\n                if (valueObj.) {\r\n                    number = checkConditionMatches(valueObj., validConditionValueArr, constellation);\r\n                    if (number == 0) {\r\n                        return;\r\n                    }\r\n                }\r\n                if (valueObj.) {\r\n                    if (valueObj..endsWith('')) {    // for \r\n                        if (!valueObj..startsWith(my)) {\r\n                            return;\r\n                        }\r\n                    } else if (valueObj. == '') {\r\n                        if (my != '') {\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        //  or .\r\n                        const my = detailObj.;\r\n                        const myArr = valueObj..split('.');\r\n                        if (myArr[0] != my) {\r\n                            return;\r\n                        }\r\n                        if (myArr.length > 1 && myArr[myArr.length - 1] != detailObj.) {\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                if (valueObj[''].endsWith('')) {   // \r\n                    if (['', '', ''].includes(detailObj.)) {\r\n                        if (!detailObj['']) {\r\n                            my = valueObj[''].replace('', '');\r\n                        }\r\n                    }\r\n                } else if (valueObj. == '') {   //  for \r\n                    const myValue = evalFormula(valueObj., statsObj, damageResult, valueObj., valueObj.);\r\n                    my += myValue;\r\n                } else if (valueObj. == '') {\r\n                    // nop\r\n                } else {\r\n                    if (number != null && number != 1) {    // @\r\n                        const myNewValueObj = JSON.parse(JSON.stringify(valueObj)); // _.cloneDeep\r\n                        if (_.isString(myNewValueObj.)) {\r\n                            myNewValueObj. += '*' + number;\r\n                        } else if (_.isArray(myNewValueObj.)) {\r\n                            myNewValueObj. = myNewValueObj..concat(['*', number]);\r\n                        }\r\n                        myTalentChangeDetailObjArr.push(myNewValueObj);\r\n                    } else {\r\n                        myTalentChangeDetailObjArr.push(valueObj);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // \r\n        const tempStatsObj: TStats = {};\r\n        [statsObj, my].forEach(entryObj => {\r\n            Object.keys(entryObj).forEach(stat => {\r\n                const tempArr = stat.split('.');\r\n                if (tempArr.length == 1) return;\r\n                let isValid = false;\r\n                if (tempArr[1] == detailObj.) {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    } else if (tempArr[2] == detailObj.) {\r\n                        if (tempArr.length == 3) {\r\n                            isValid = true;\r\n                        }\r\n                    }\r\n                } else if (tempArr[1] == (my + '')) {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    }\r\n                } else if (tempArr[1] == '' && my == '') {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                if (isValid) {\r\n                    const toStat = tempArr[0];\r\n                    if (toStat in tempStatsObj) {\r\n                        if (toStat == '' && tempStatsObj[toStat] > 0) {\r\n                            tempStatsObj[toStat] *= entryObj[stat] / 100;   // for \r\n                        } else {\r\n                            tempStatsObj[toStat] += entryObj[stat];\r\n                        }\r\n                    } else {\r\n                        tempStatsObj[toStat] = entryObj[stat];\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        Object.keys(tempStatsObj).forEach(stat => {\r\n            if (stat in my) {\r\n                if (stat.startsWith('') && my[stat] > 0) {\r\n                    my[stat] *= tempStatsObj[stat] / 100;   // for \r\n                } else {\r\n                    my[stat] += tempStatsObj[stat];\r\n                }\r\n            } else {\r\n                my[stat] = tempStatsObj[stat];\r\n            }\r\n        });\r\n\r\n        // for  0.05\r\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\r\n        if (damageDetailMyArtifactSets) {\r\n            if (detailObj. == '' && detailObj.HIT > 1\r\n                && characterInput.artifactSets[0] == '' && characterInput.artifactSets[1] == '') {\r\n                let isValid = false;\r\n                for (const valueObj of damageDetailMyArtifactSets[CHANGE_KIND_STATUS].filter(s => s. && s. && s.)) {\r\n                    const my = valueObj. as string; // \r\n                    const my = valueObj. as string;\r\n                    const myHIT = detailObj.HIT;\r\n                    if (checkConditionMatches(my, validConditionValueArr, constellation) != 0) {\r\n                        const my = valueObj.;\r\n                        const myValue = evalFormula(my, statsObj, damageResult, valueObj., valueObj.);\r\n                        if (!(my in my)) {\r\n                            my[my] = 0;\r\n                        }\r\n                        my[my] -= myValue * (myHIT - Math.max(1, Math.floor(myHIT / 2))) / myHIT;\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                if (isValid) {\r\n                    const description = '4HIT3HIT14HIT2';\r\n                    if (!damageResult[''].includes(description)) {\r\n                        damageResult[''].push(description);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        Object.keys(my).forEach(stat => {\r\n            if (stat in statsObj) {\r\n                if (stat.startsWith('') && statsObj[stat] > 0) {\r\n                    statsObj[stat] *= my[stat];\r\n                } else {\r\n                    statsObj[stat] += my[stat];\r\n                }\r\n            } else {\r\n                statsObj[stat] = my[stat];\r\n            }\r\n        });\r\n\r\n        if (statsObj['']) {\r\n            my = statsObj[''];\r\n        }\r\n\r\n        switch (detailObj.) {\r\n            case 'HP':\r\n                myArr.push('');\r\n                myArr.push('');\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':\r\n                myArr.push('');\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                break;\r\n            case 'HP':    // for  \r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':\r\n                isCalc = false;\r\n                isCalc = false;\r\n                break;\r\n            case 'HP':\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':    // for \r\n                if (!['', '', '', ''].includes(my)) {\r\n                    my = '';\r\n                }\r\n                break;\r\n            case 'HP':  // for  \r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            default:\r\n                if (detailObj..startsWith('') || detailObj..startsWith('')) {\r\n                    isCalc = false;\r\n                    isCalc = false;\r\n                    isCalc = false;\r\n                    my = null;\r\n                } else {\r\n                    myArr.push('');\r\n                    if (detailObj. != 'NONE') {  // for \r\n                        if (detailObj.) {\r\n                            myArr.push(detailObj.);\r\n                        } else if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\r\n                            myArr.push(detailObj. + '');\r\n                        }\r\n                    }\r\n                    if (my) {\r\n                        myArr.push(my == '' ? '' : my + '');\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        const myResult = calculateDamageFromDetailSub(statsObj, damageResult, detailObj., myArr, isCalc, isCalc, isCalc, my, my, my, detailObj., detailObj.);\r\n\r\n        myTalentChangeDetailObjArr.forEach(valueObj => {\r\n            const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, valueObj., myArr, isCalc, isCalc, isCalc, my, my, null, valueObj., valueObj.);\r\n            if (valueObj..endsWith('')) {  // \r\n                if (detailObj. == '') return;  // for \r\n                if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\r\n                    // HITHIT\r\n                    if (myHIT > 1) {\r\n                        myResultWork[2] *= myHIT;\r\n                        if (myResultWork[3] != null) {\r\n                            myResultWork[3] *= myHIT;\r\n                        }\r\n                        myResultWork[4] *= myHIT;\r\n                    }\r\n                }\r\n            }\r\n            myResult[2] += myResultWork[2];\r\n            if (myResult[3] != null && myResultWork[3]) {\r\n                myResult[3] += myResultWork[3];\r\n            }\r\n            myResult[4] += myResultWork[4];\r\n        });\r\n\r\n        // \r\n        if ([...DAMAGE_CATEGORY_ARRAY, ''].includes(detailObj.)) {\r\n            let my = detailObj.;\r\n            if (detailObj.) {    // for \r\n                const temp = detailObj..replace(/$/, '');\r\n                if (DAMAGE_CATEGORY_ARRAY.includes(temp)) {\r\n                    my = temp;\r\n                }\r\n            }\r\n\r\n            const dmgUpStatArr = [];\r\n            dmgUpStatArr.push(my + '');\r\n            if (my) {\r\n                dmgUpStatArr.push(my == '' ? '' : my + '');\r\n            }\r\n            dmgUpStatArr.forEach(dmgUpStat => {\r\n                if (!statsObj[dmgUpStat]) return;\r\n                if (!isCalc || !isCalc) return;\r\n\r\n                if (detailObj..startsWith('_')) return;    // for \r\n\r\n                const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, statsObj[dmgUpStat], myArr, isCalc, isCalc, isCalc, my, my, null);\r\n                // HITHIT\r\n                if (myHIT > 1) {\r\n                    myResultWork[2] *= myHIT;\r\n                    if (myResultWork[3] != null) {\r\n                        myResultWork[3] *= myHIT;\r\n                    }\r\n                    myResultWork[4] *= myHIT;\r\n                }\r\n                myResult[2] += myResultWork[2];\r\n                if (myResult[3] != null && myResultWork[3]) {\r\n                    myResult[3] += myResultWork[3];\r\n                }\r\n                myResult[4] += myResultWork[4];\r\n            });\r\n        }\r\n\r\n        // \r\n        Object.keys(my).forEach(statName => {\r\n            statsObj[statName] -= my[statName];\r\n        });\r\n\r\n        if (detailObj. == '') {\r\n            if (myResult[1] == '') {  //  for  \r\n                myResult[2] = myResult[2] * 1.5;\r\n                myResult[4] = myResult[4] * 1.5;\r\n            }\r\n        }\r\n\r\n        const resultArr = [detailObj., myResult[1], myResult[2], myResult[3], myResult[4], detailObj., detailObj.HIT, myResult[7], myResult[8]] as TDamageResultEntry;\r\n        console.debug(resultArr);\r\n        return resultArr;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(detailObj, characterInput, conditionInput, statsObj, opt_element);\r\n        throw error;\r\n    }\r\n}\r\n\r\nfunction calculateDamageFromDetailSub(\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    formula: number | string,\r\n    buffArr: Array<string> | null,\r\n    isCalc: boolean,\r\n    isCalc: boolean,\r\n    isCalc: boolean,\r\n    : string,\r\n    : number,\r\n    : number | null,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null\r\n): TDamageResultEntry {\r\n    const my = evalFormula(formula, statsObj, damageResult, opt_max, opt_min);\r\n    let my = my;\r\n\r\n    if () { //  for \r\n        my *=  / 100;\r\n    } else {\r\n         = 1;\r\n    }\r\n\r\n    // \r\n    if (isUseReference(formula)) {\r\n        buffArr = null;\r\n        isCalc = false;\r\n        isCalc = false;\r\n    }\r\n\r\n    let my = 1;\r\n    if (buffArr) {\r\n        my = 100;   // percent\r\n        buffArr.forEach(buff => {\r\n            if (statsObj[buff]) {\r\n                my += statsObj[buff];\r\n            }\r\n        });\r\n        my = my / 100;\r\n        my *= my;\r\n    }\r\n\r\n    let my = 1;\r\n    if (isCalc) {\r\n        my = calculateEnemyDef(statsObj, );\r\n        my *= my;\r\n    }\r\n\r\n    let my = 1;\r\n    if (isCalc && ) {\r\n        my = calculateEnemyRes(, statsObj);\r\n        my *= my;\r\n    }\r\n\r\n    let my = statsObj[''];\r\n    if ( == '') {\r\n        if ('' in statsObj) {\r\n            my += statsObj[''];\r\n        }\r\n    } else if (( + '') in statsObj) {\r\n        my += statsObj[ + ''];\r\n    }\r\n    my = Math.min(100, Math.max(0, my)) / 100;    // 01\r\n\r\n    let my = statsObj[''];\r\n    if ( == '') {\r\n        if ('' in statsObj) {\r\n            my += statsObj[''];\r\n        }\r\n    } else if (( + '') in statsObj) {\r\n        my += statsObj[ + ''];\r\n    }\r\n    my = (100 + my) / 100;\r\n\r\n    let myResult = null;\r\n    let myResult = my;\r\n    if (isCalc && my > 0) {\r\n        myResult = my * my;\r\n        myResult = (myResult * my) + (my * (1 - my));\r\n    }\r\n\r\n    console.debug('[%f] [%o=%f] [%f,%f] [%f] [%f]', , buffArr, my, my, my, my, my);\r\n    return ['', , myResult, myResult, my, null, null, my, my];\r\n}\r\n\r\nfunction getChangeDetailObjArr(characterInput: TCharacterInput, changeKind: string) {\r\n    let result = [] as any[];\r\n    if (!characterInput) return result;\r\n\r\n    if (characterInput.damageDetailMyCharacter && changeKind in characterInput.damageDetailMyCharacter) {\r\n        result = result.concat((characterInput.damageDetailMyCharacter as any)[changeKind]);\r\n    }\r\n    if (characterInput.damageDetailMyWeapon && changeKind in characterInput.damageDetailMyWeapon) {\r\n        result = result.concat((characterInput.damageDetailMyWeapon as any)[changeKind]);\r\n    }\r\n    if (characterInput.damageDetailMyArtifactSets && changeKind in characterInput.damageDetailMyArtifactSets) {\r\n        result = result.concat((characterInput.damageDetailMyArtifactSets as any)[changeKind]);\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport function isUseReference(formula: number | string) {\r\n    return _.isString(formula) && formula.includes('#');\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction updateStats(\r\n    statsObj: TStats,\r\n    statName: string,\r\n    formulaArr: number | string,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null,\r\n) {\r\n    const value = evalFormula(formulaArr, statsObj, DAMAGE_RESULT_TEMPLATE, opt_max, opt_min);    // DAMAGE_RESULT_TEMPLATE\r\n    if (!isNumeric(value)) {\r\n        console.error(statsObj, statName, formulaArr, value);\r\n    }\r\n    const nameArr = [];\r\n    if (statName == 'HP') {\r\n        nameArr.push('HP');\r\n    } else if (statName.startsWith('')) {\r\n        nameArr.push(statName.replace(/^/, String(statsObj[''])));\r\n    } else if (statName.startsWith('')) {\r\n        ALL_ELEMENTS.forEach(entry => {\r\n            nameArr.push(statName.replace(/^/, entry));\r\n        });\r\n    } else if (statName.startsWith('')) {\r\n        nameArr.push(statName.replace(/^/, '' + String(statsObj[''])));\r\n    } else if (statName.startsWith('')) {\r\n        ALL_ELEMENTS.forEach(entry => {\r\n            nameArr.push(statName.replace(/^/, '' + entry));\r\n        });\r\n    } else {\r\n        nameArr.push(statName);\r\n    }\r\n    const diffStats = {} as { [key: string]: number };\r\n    nameArr.forEach(name => {\r\n        diffStats[name] = value;\r\n    });\r\n    for (const name of Object.keys(diffStats)) {\r\n        if (name in statsObj) {\r\n            if (name.startsWith('') && diffStats[name] > 0) {\r\n                statsObj[name] *= diffStats[name] / 100;    // for \r\n            } else {\r\n                statsObj[name] += diffStats[name];\r\n            }\r\n        } else {\r\n            statsObj[name] = diffStats[name];\r\n        }\r\n    }\r\n    console.debug(updateStats.name, null, statName, formulaArr, '=>', diffStats);\r\n    return diffStats;\r\n}\r\n\r\n/**  */\r\nfunction calculateDamageTaken(statsObj: TStats, damage: number, element: string) {\r\n    const def = statsObj[''];\r\n    const enemyLevel = statsObj[''];\r\n    const dmgReduction = statsObj[''];\r\n    const res = calculateRes(statsObj[element == '' ? '' : element + '']);\r\n    let result = damage * (1 - def / (def + 5 * enemyLevel + 501)) * (100 - dmgReduction) / 100 * res;\r\n    result = Math.max(0, result);\r\n    return result;\r\n}\r\n\r\n// function flattenArray(value: any) {\r\n//     const result: any[] = [];\r\n//     if (Array.isArray(value)) {\r\n//         value.forEach(e => {\r\n//             if (Array.isArray(e)) {\r\n//                 result.push(...flattenArray(e));\r\n//             } else {\r\n//                 result.push(e);\r\n//             }\r\n//         });\r\n//     }\r\n//     return result;\r\n// }\r\n\r\nexport type TArtifactScoreFormulaElement = [string, number];\r\nexport type TArtifactScoreFormula = TArtifactScoreFormulaElement[];\r\n\r\nexport const ARTIFACT_SCORE_FACTORS = [\r\n    'HP%', '%', '%', '', '', '', '',\r\n];\r\n\r\nexport const ARTIFACT_SCORE_FORMULA_TEMPLATE: TArtifactScoreFormula[] = [\r\n    [['', 2], ['', 1]],\r\n    [['%', 1], ['', 2], ['', 1]],\r\n    [['HP%', 1], ['', 2], ['', 1]],\r\n    [['%', 1], ['', 2], ['', 1]],\r\n    [['HP%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\r\n    [['%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\r\n    [['%', 0.5], ['', 0.125], ['', 2], ['', 1]],\r\n];\r\n\r\nexport function calculateArtifactScore(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    scoringStats: [string, number][]\r\n) {\r\n    let result = 0;\r\n    for (const scoringStat of scoringStats) {\r\n        const stat = scoringStat[0];\r\n        const magnification = scoringStat[1];\r\n        const statValue = (artifactDetailInput. as any)[stat];\r\n        if (statValue) {\r\n            result += statValue * magnification;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateStatsTop(\r\n    statsObj: TStats,\r\n    optionInput: TOptionInput,\r\n) {\r\n    ARRAY.forEach(stat => {\r\n        const srcStat = stat.replace(/TOP$/, 'X7');\r\n        let srcStatValue = getStatValue(srcStat, statsObj);\r\n        if (srcStatValue) {\r\n            statsObj[stat] = srcStatValue;\r\n        }\r\n        for (const member of optionInput.teamMembers) {\r\n            const calculatedSupporter = optionInput.supporters[member];\r\n            if (!calculatedSupporter?.statsInput?.statsObj) continue;\r\n            srcStatValue = getStatValue(srcStat, calculatedSupporter.statsInput.statsObj);\r\n            if (srcStatValue !== undefined) {\r\n                if (statsObj[stat] < srcStatValue) {\r\n                    statsObj[stat] = srcStatValue;\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport async function calculateSupporter(\r\n    optionInput: TOptionInput,\r\n    supporter: TCharacterKey,\r\n    build: string,\r\n    character: TCharacterKey,\r\n): Promise<[TStats, TDamageResult]> {\r\n    const characterInput = getDefaultCharacterInput();\r\n    const artifactDetailInput = getDefaultArtifactDetailInput();\r\n    const conditionInput = getDefaultConditionInput();\r\n    const statsInput = getDefaultStatsInput();\r\n    const damageResult = getDefaultDamageResultInput();\r\n\r\n    characterInput.character = supporter;\r\n    characterInput.characterMaster = await getCharacterMasterDetail(characterInput.character);\r\n\r\n    const builddata = JSON.parse(build);\r\n\r\n    await loadRecommendation(characterInput, artifactDetailInput, conditionInput, optionInput, builddata);\r\n    makeDamageDetailObjArrObjCharacter(characterInput);\r\n    makeDamageDetailObjArrObjWeapon(characterInput);\r\n    makeDamageDetailObjArrObjArtifactSets(characterInput);\r\n    setupConditionValues(conditionInput, characterInput, optionInput);\r\n    calculateArtifactStatsMain(artifactDetailInput., artifactDetailInput.);\r\n    calculateArtifactStats(artifactDetailInput);\r\n    if (optionInput.elementalResonance) {\r\n        optionInput.elementalResonance.conditionAdjustments = calculateElementalResonance(optionInput.elementalResonance.conditionValues, conditionInput);\r\n    }\r\n    calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n    updateNumberConditionValues(conditionInput, characterInput, statsInput.statsObj);\r\n    calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n\r\n    if (characterInput.character === '') {\r\n        // for \r\n        const myCharacterMaster = await getCharacterMasterDetail(character);\r\n        if ('' in myCharacterMaster['']) {\r\n            statsInput.statsObj[''] = Number(myCharacterMaster['']['']);\r\n        }\r\n    }\r\n\r\n    calculateDamageResult(damageResult, characterInput, conditionInput, statsInput);\r\n\r\n    optionInput.supporters[supporter] = {\r\n        characterInput: characterInput,\r\n        artifactDetailInput: artifactDetailInput,\r\n        conditionInput: conditionInput,\r\n        statsInput: statsInput,\r\n        damageResult: damageResult,\r\n    };\r\n\r\n    return [statsInput.statsObj, damageResult];\r\n}\r\n\r\nexport type TRotationDamageEntry = {\r\n    name: string;\r\n    category: string;\r\n    reactions: object[];\r\n    counts: number[];\r\n};\r\n\r\nexport type TRotationDamageInfo = {\r\n    totalDamage: number,\r\n    rotationDamages: TRotationDamageEntry[],\r\n};\r\n\r\nexport function getCritFromResultEntry(entry: TDamageResultEntry) {\r\n    let critRate = 0;\r\n    let critDmg = 0;\r\n    if (entry[2] && entry[3] && entry[4]) {\r\n        critRate = entry[2] - entry[4]; //  - \r\n        critRate /= entry[3] - entry[4]; //  - \r\n        critRate = Math.round(critRate * 1000) / 10;\r\n        critDmg = Math.round((entry[3] / entry[4] - 1) * 1000) / 10;\r\n    }\r\n    return [critRate, critDmg];\r\n}\r\n\r\nexport const REACTION_DMG_ARR = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\n\r\nexport const REACTION_DMG_ELEMENT_MAP = new Map<string, string>();\r\nfunction setupReactionDmgElementMap() {\r\n    REACTION_DMG_ARR.forEach((reactionDmg) => {\r\n        const reaction = reactionDmg.replace(/$/, '');\r\n        Object.keys(ELEMENTAL_REACTION_MASTER).forEach((element) => {\r\n            const reactionMaster = (ELEMENTAL_REACTION_MASTER as any)[element];\r\n            const workArr = Object.keys(reactionMaster);\r\n            if (workArr.includes(reaction)) {\r\n                if ('' in reactionMaster[reaction]) {\r\n                    REACTION_DMG_ELEMENT_MAP.set(reactionDmg, reactionMaster[reaction].);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\nsetupReactionDmgElementMap();\r\n\r\nexport function getDamageResultArr(\r\n    rotationDamageEntry: TRotationDamageEntry,\r\n    damageResult: TDamageResult,\r\n): TDamageResultEntry[] {\r\n    const result = [] as TDamageResultEntry[];\r\n    const category = rotationDamageEntry.category;\r\n    if (REACTION_DMG_ARR.includes(category)) {\r\n        result.push([\r\n            category,\r\n            REACTION_DMG_ELEMENT_MAP?.get(category) ?? null,\r\n            (damageResult. as any)[category],\r\n            null,\r\n            (damageResult. as any)[category],\r\n            null,\r\n            1,\r\n            null,\r\n            null,\r\n        ]);\r\n    } else {\r\n        for (let entry of damageResult[category] as TDamageResultEntry[]) {\r\n            if (entry[0].startsWith('')) continue;\r\n            if (entry[0].endsWith('')) continue;\r\n            if (entry[5]?.endsWith('')) {\r\n                if (entry[0].startsWith('')) {  // \r\n                    entry = _.cloneDeep(entry);\r\n                    const [critRate] = getCritFromResultEntry(entry);\r\n                    entry[2] = entry[2] * critRate / 100;\r\n                }\r\n                result.push(entry);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateRotationDamageEntry(\r\n    rotationDamageEntry: TRotationDamageEntry,\r\n    index: number,\r\n    damageResult: TDamageResult,\r\n) {\r\n    let result = 0;\r\n    const list = getDamageResultArr(rotationDamageEntry, damageResult);\r\n    if (list && list.length > index && rotationDamageEntry.reactions.length > index) {\r\n        const dmgResultEntry = list[index];\r\n        const reactionObj: any = rotationDamageEntry.reactions[index];\r\n        const count = rotationDamageEntry.counts[index];\r\n        const plainDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., ''); // \r\n        for (let n = 0; n < count; n++) {\r\n            let workDmg = plainDmg;\r\n            ['', ''].forEach((reaction) => {\r\n                if (reaction in reactionObj && n < reactionObj[reaction]) {\r\n                    workDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction);\r\n                }\r\n            });\r\n            result += workDmg;\r\n        }\r\n        ['', ''].forEach((reaction) => {\r\n            if (reaction in reactionObj) {\r\n                result += calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction, reactionObj[reaction]) - plainDmg;\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateRotationTotalDamage(\r\n    rotationDamageArr: TRotationDamageEntry[],\r\n    damageResult: TDamageResult,\r\n) {\r\n    let result = 0;\r\n    rotationDamageArr.forEach((rotationDamageEntry) => {\r\n        const list = getDamageResultArr(rotationDamageEntry, damageResult);\r\n        for (let i = 0; i < list.length; i++) {\r\n            result += calculateRotationDamageEntry(rotationDamageEntry, i, damageResult);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function calculateReactedDamage(\r\n    dmgResultEntry: TDamageResultEntry,\r\n    dmgIndex: number,\r\n    elementalReaction: TDamageResultElementalReaction,\r\n    reaction: string,\r\n    reactionTimes = 1\r\n) {\r\n    let result = Number(dmgResultEntry[dmgIndex]); // 2:/3:/4:\r\n    const dmgElement = dmgResultEntry[1];\r\n    if (reaction && dmgElement) {\r\n        if (['', ''].includes(reaction)) {\r\n            const reactionKey = reaction + '_' + dmgElement;\r\n            if (reactionKey in elementalReaction) {\r\n                result *= (elementalReaction as any)[reactionKey];\r\n            }\r\n        } else if (['', ''].includes(reaction)) {\r\n            const reactionKey = reaction + '';\r\n            if (reactionKey in elementalReaction) {\r\n                let reactionDmg = (elementalReaction as any)[reactionKey];\r\n                if (dmgResultEntry[2]) {\r\n                    reactionDmg *= result / dmgResultEntry[4]; //  \r\n                }\r\n                if (dmgResultEntry[7]) {\r\n                    reactionDmg *= dmgResultEntry[7]; // \r\n                }\r\n                if (dmgResultEntry[8]) {\r\n                    reactionDmg *= dmgResultEntry[8]; // \r\n                }\r\n                reactionDmg *= reactionTimes; // \r\n                result += reactionDmg;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getAmplifyingReactionElement(reaction: string, dmgElement: string) {\r\n    let reactionElement;\r\n    if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    }\r\n    return reactionElement;\r\n}\r\n\r\nfunction makeEvalableScript(\r\n    formula: string,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n) {\r\n    const replaceMap = new Map<string, string>();\r\n    const re = /\\$\\{(.+?)\\}/g;\r\n    let reRet;\r\n    while ((reRet = re.exec(formula)) !== null) {\r\n        const key = reRet[1];\r\n        if (!replaceMap.has(key)) {\r\n            let value;\r\n            if (key.includes('#')) {   // # \r\n                const arr = key.split('#');\r\n                if (arr.length === 2) {\r\n                    const major = arr[0];\r\n                    const minor = arr[1];\r\n                    if (major in damageResult) {\r\n                        const entryArr = (damageResult[major] as TDamageResultEntry[]).filter(s => s[0] == minor);\r\n                        if (entryArr.length) {\r\n                            value = String(entryArr[0][4]);  // \r\n                        }\r\n                    }\r\n                }\r\n                if (value === undefined) {\r\n                    console.warn(formula, damageResult, key);\r\n                    value = '0';\r\n                }\r\n            } else {    // \r\n                value = String(getStatValue(key, statsObj));\r\n            }\r\n            if (value !== undefined) {\r\n                replaceMap.set(key, value);\r\n            }\r\n        }\r\n    }\r\n    let result = formula;\r\n    replaceMap.forEach((value, key) => {\r\n        result = result.replaceAll('${' + key + '}', value);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function evalFormula(\r\n    formula: number | string | null | undefined,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null\r\n) {\r\n    let result = 0;\r\n    let script;\r\n    if (!formula) {\r\n        // nop\r\n    } else if (_.isNumber(formula)) {\r\n        result = formula;\r\n    } else {\r\n        script = makeEvalableScript(formula, statsObj, damageResult);\r\n        try {\r\n            result = eval(script);\r\n        } catch (error) {\r\n            console.error(error);\r\n            console.error(formula, statsObj, damageResult, script);\r\n        }\r\n    }\r\n    if (opt_max !== null) {\r\n        const max = evalFormula(opt_max, statsObj, damageResult);\r\n        result = Math.min(result, max);\r\n    }\r\n    if (opt_min !== null) {\r\n        const min = evalFormula(opt_min, statsObj, damageResult);\r\n        result = Math.max(result, min);\r\n    }\r\n    console.debug(formula, opt_max, opt_min, script, result);\r\n    return result;\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport type TKeyValue = {\r\n    key: string, value: any,\r\n};\r\n\r\nexport function isString(value: any): boolean {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\n\r\nexport function isNumeric(value: any): boolean {\r\n    return isFinite(value) && value != null;\r\n}\r\n\r\nexport function isBoolean(value: any): boolean {\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isPlainObject(value: any): boolean {\r\n    const myType = Object.prototype.toString.call(value);\r\n    return myType === '[object Object]';\r\n}\r\n\r\n// /** deep copyundefined */\r\n// export function deepcopy(value: any): any {\r\n//     const result = JSON.parse(JSON.stringify(value));\r\n//     return result;\r\n// }\r\n\r\nexport function overwriteObject(dst: any, src: any) {\r\n    if (_.isPlainObject(src) && _.isPlainObject(dst)) {\r\n        const srcKeys = Object.keys(src);\r\n        for (const key of srcKeys) {\r\n            dst[key] = src[key];\r\n        }\r\n        for (const key of Object.keys(dst)) {\r\n            if (!srcKeys.includes(key)) delete dst[key];\r\n        }\r\n    }\r\n    return dst;\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport const basename = (path: string) => path!.split('/')!.pop()!.split('.')!.shift()!;\r\n","import { createI18n } from 'vue-i18n'\r\n\r\nconst i18n = createI18n({\r\n  legacy: false,\r\n  locale: 'ja-jp',\r\n  fallbackLocale: 'en-us',\r\n  isGlobal: true,\r\n})\r\nexport default i18n;\r\n","import { ALL_ELEMENTS, ARTIFACT_SET_MASTER, ARTIFACT_STAT_JA_EN_ABBREV_MAP, ARTIFACT_SUB_MASTER, CHARACTER_MASTER, ELEMENTAL_RESONANCE_MASTER, ELEMENTAL_RESONANCE_MASTER_LIST, ENEMY_MASTER_LIST, GENSEN_MASTER_LIST, getCharacterMasterDetail, getWeaponMasterDetail, IMG_SRC_DUMMY, NUMBER_OF_PRIORITY_SUBSTATS, RECOMMEND_ABBREV_MAP, TAnyObject, TArtifactSet, TArtifactSetEntry, TArtifactSetKey, TArtifactSubKey, TCharacterDetail, TCharacterKey, TEnemyEntry, TWeaponDetail, TWeaponKey, TWeaponTypeKey, WEAPON_MASTER, PROPERTY_MAP } from '@/master';\r\nimport _ from 'lodash';\r\nimport { basename, isNumeric, overwriteObject } from './common';\r\n\r\nexport const ARRAY = [\r\n    'HP',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    'HP',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    'HP%',\r\n    '%',\r\n    '%',\r\n    'HP+',\r\n    '+',\r\n    '+',\r\n];\r\nexport const ARRAY = [\r\n    'HPV1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n];\r\nexport const ARRAY = [\r\n    'TOP',\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    ''\r\n];\r\n\r\nexport const ARRAY_MAP = new Map([\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', _ARRAY],\r\n    ['', _ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', _ARRAY],\r\n    ['', _ARRAY],\r\n]);\r\n\r\nexport const STAT_PERCENT_LIST = [\r\n    ...ARRAY, ..._ARRAY, ..._ARRAY, ...ARRAY, ...ARRAY, ..._ARRAY,\r\n    '', '', '',\r\n];\r\n\r\nexport type TStats = {\r\n    [key: string]: number,\r\n};\r\n\r\nfunction makeStatusTemplate() {\r\n    const statsObj: TStats = {};\r\n    ARRAY_MAP.forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj[''] = 5;\r\n    statsObj[''] = 50;\r\n    statsObj[''] = 100;\r\n    statsObj[''] = 0;\r\n    statsObj[''] = 0;\r\n    return statsObj;\r\n}\r\nexport const TEMPLATE = makeStatusTemplate();\r\n\r\nfunction makeEnemyStatusTemplate() {\r\n    const statsObj: TStats = {};\r\n    [_ARRAY].forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj[''] = 0;\r\n    return statsObj;\r\n}\r\nexport const TEMPLATE = makeEnemyStatusTemplate();\r\n\r\nexport const _ARRAY = [\r\n    '5_HP', '4_HP'\r\n];\r\nexport const _ARRAY = [\r\n    '5_', '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '5_',\r\n    '4_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_',\r\n    '4_'\r\n];\r\n\r\nexport const ARRAY = [\r\n    'HP%',\r\n    'HP',\r\n    '%',\r\n    '',\r\n    '%',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '%',\r\n    'HP%',\r\n    '%',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    'HP',\r\n    '',\r\n    '',\r\n];\r\n\r\nexport const TEMPLATE = {\r\n    'HP': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    'HP%': 0,\r\n    '%': 0,\r\n    '%': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n};\r\n\r\nexport const TEMPLATE = {\r\n    : '',\r\n    _: 0,                 // 1.5\r\n    _: 0,                 // 2\r\n    _: 0,                 // 1.5\r\n    _: 0,                 // 2\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : '',\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n};\r\nexport type TDamageResultElementalReaction = typeof TEMPLATE;\r\nexport type TDamageResultElementalReactionKey = keyof typeof TEMPLATE;\r\n\r\nexport type TDamageResultEntry = [string, string | null, number, number | null, number, string | null, number | null, number | null, number | null];    // 0:, 1:, 2:, 3:, 4:, 5:, 6:HIT, 7:, 8:\r\nexport type TDamageResult = {\r\n    : TDamageResultElementalReaction,\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : string[],\r\n    : any[],\r\n    : any[],\r\n    [key: string]: TDamageResultElementalReaction | TDamageResultEntry[] | string[],\r\n};\r\n\r\nexport const DAMAGE_RESULT_TEMPLATE = {\r\n    : _.cloneDeep(TEMPLATE) as TDamageResultElementalReaction,\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as string[],\r\n    : [] as any[],\r\n    : [] as any[],\r\n};\r\n\r\nexport const ARRAY = [\r\n    Array.from({ length: 20 }, (_, i) => i + 1),\r\n    Array.from({ length: 21 }, (_, i) => i + 20),\r\n    Array.from({ length: 11 }, (_, i) => i + 40),\r\n    Array.from({ length: 11 }, (_, i) => i + 50),\r\n    Array.from({ length: 11 }, (_, i) => i + 60),\r\n    Array.from({ length: 11 }, (_, i) => i + 70),\r\n    Array.from({ length: 11 }, (_, i) => i + 80),\r\n];\r\n\r\nexport type TDamageDetailObj = {\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    HIT: number | null,\r\n    : string | null,\r\n    : boolean | null,\r\n    : (string | object)[] | null,\r\n    : (string | object)[] | null,\r\n};\r\n\r\nexport type TDamageDetail = {\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    : TDamageDetailObj[],\r\n    : TDamageDetailObj[],\r\n    : Map<string, string[]>,\r\n    : Map<string, string[]>,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_DUMMY = {\r\n    key: 'NONE' as TArtifactSetKey,\r\n    : 5,\r\n    image: IMG_SRC_DUMMY,\r\n} as TArtifactSet;\r\n\r\nexport const CHARACTER_INPUT_TEMPLATE = {\r\n    character: '' as TCharacterKey,\r\n    characterMaster: {} as TCharacterDetail,\r\n    : 6,\r\n    : 90,\r\n    : 0,\r\n    : 8,\r\n    : 8,\r\n    : 8,\r\n    weapon: '' as TWeaponKey,\r\n    weaponMaster: {} as TWeaponDetail,\r\n    : 6,\r\n    : 90,\r\n    : 1,\r\n    artifactSets: ['NONE' as TArtifactSetKey, 'NONE' as TArtifactSetKey],\r\n    artifactSetMasters: [ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[],\r\n    damageDetailMyCharacter: null as TDamageDetail | null,\r\n    damageDetailMyWeapon: null as TDamageDetail | null,\r\n    damageDetailMyArtifactSets: null as TDamageDetail | null,\r\n    damageDetailElementalResonance: null as TDamageDetail | null,\r\n    buildname: '',\r\n    recommendationSelectedIndex: 0,\r\n    saveDisabled: true,     // \r\n    removeDisabled: true,   // \r\n};\r\nexport type TCharacterInput = typeof CHARACTER_INPUT_TEMPLATE;\r\n\r\nexport const ARTIFACT_TEMPLATE = {\r\n    name: '',\r\n    rarity: 1,\r\n    setname: 'NONE',\r\n    cat_id: 1,\r\n    mainStat: '',\r\n    mainStatValue: 0,\r\n    subStats: [\r\n        { name: 'HP', value: 0 },\r\n        { name: '', value: 0 },\r\n        { name: '', value: 0 },\r\n        { name: '', value: 0 },\r\n    ]\r\n};\r\nexport type TArtifact = typeof ARTIFACT_TEMPLATE;\r\n\r\nexport const ARTIFACT_DETAIL_INPUT_TEMPLATE = {\r\n    : ['', '', '', '', ''],\r\n    : _.fill(Array(NUMBER_OF_PRIORITY_SUBSTATS), ''),\r\n    : Array.from(GENSEN_MASTER_LIST[2].values),     // 1\r\n    : Array.from(GENSEN_MASTER_LIST[2].counts),   // 1\r\n    : _.cloneDeep(TEMPLATE),\r\n    : _.cloneDeep(TEMPLATE),\r\n    : _.cloneDeep(TEMPLATE),\r\n    Disabled: false,\r\n    artifact_list: [] as TArtifact[],\r\n};\r\nexport type TArtifactDetailInput = typeof ARTIFACT_DETAIL_INPUT_TEMPLATE;\r\n\r\nexport type TCheckboxEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n};\r\nexport type TSelectEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n    options: string[];\r\n    required: boolean;\r\n};\r\nexport type TNumberEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n    min: number | string;\r\n    max?: number | string | undefined;\r\n    step: number;\r\n};\r\nexport type TConditionValues = {\r\n    [key: string]: boolean | number | null,\r\n};\r\nexport type TConditionAdjustments = {\r\n    [key: string]: number | null,\r\n};\r\nexport const CONDITION_INPUT_TEMPLATE = {\r\n    checkboxList: [] as TCheckboxEntry[],\r\n    selectList: [] as TSelectEntry[],\r\n    numberList: [] as TNumberEntry[],\r\n    conditionValues: {} as TConditionValues,\r\n    conditionAdjustments: {} as TConditionAdjustments,\r\n    : [null, null, null] as (string | null)[],\r\n};\r\nexport type TConditionInput = typeof CONDITION_INPUT_TEMPLATE;\r\n\r\nexport const STATS_INPUT_TEMPLATE = {\r\n    statsObj: _.cloneDeep(TEMPLATE) as TStats,\r\n    statAdjustments: _.cloneDeep(TEMPLATE) as TStats,\r\n    statAdjustmentsEx: {} as TStats,\r\n    enemyMaster: ENEMY_MASTER_LIST[0] as TEnemyEntry,\r\n};\r\nfor (const stat of Object.keys(STATS_INPUT_TEMPLATE.statAdjustments)) {\r\n    STATS_INPUT_TEMPLATE.statAdjustments[stat] = 0;\r\n}\r\nexport type TStatsInput = typeof STATS_INPUT_TEMPLATE;\r\n\r\nexport function getDefaultCharacterInput(): TCharacterInput {\r\n    return _.cloneDeep(CHARACTER_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultArtifactDetailInput(): TArtifactDetailInput {\r\n    return _.cloneDeep(ARTIFACT_DETAIL_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultConditionInput(): TConditionInput {\r\n    return _.cloneDeep(CONDITION_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultOptionInput(): TOptionInput {\r\n    return _.cloneDeep(OPTION_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultStatsInput(): TStatsInput {\r\n    return _.cloneDeep(STATS_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultDamageResultInput(): TDamageResult {\r\n    return _.cloneDeep(DAMAGE_RESULT_TEMPLATE);\r\n}\r\n\r\nexport type TElementalResonance = {\r\n    conditionValues: TConditionValues,\r\n    conditionAdjustments: TConditionAdjustments,\r\n};\r\n\r\nexport const SUPPORTER_INPUT_TEMPLATE = {\r\n    characterInput: getDefaultCharacterInput(),\r\n    artifactDetailInput: getDefaultArtifactDetailInput(),\r\n    conditionInput: getDefaultConditionInput(),\r\n    statsInput: getDefaultStatsInput(),\r\n    damageResult: getDefaultDamageResultInput(),\r\n};\r\nexport type TSupporterInput = typeof SUPPORTER_INPUT_TEMPLATE;\r\n\r\nexport const OPTION_INPUT_TEMPLATE = {\r\n    elementalResonance: {\r\n        conditionValues: {},\r\n        conditionAdjustments: {},\r\n    } as TElementalResonance,\r\n    supporterBuildname: {} as { [key: string]: string | undefined },\r\n    supporters: {} as { [key: string]: TSupporterInput | undefined },\r\n    teamMembers: [] as string[],\r\n    teamOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n    miscOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n};\r\nexport type TOptionInput = typeof OPTION_INPUT_TEMPLATE;\r\n\r\n/** 1+,20,20+,...,90 */\r\nfunction parseLevelStr(levelStr: number | string): [number, number] {\r\n    let result: [number, number] = [0, 1];\r\n    try {\r\n        let level: number;\r\n        if (_.isString(levelStr)) {\r\n            level = Number(String(levelStr).replace('+', ''));\r\n        } else {\r\n            level = Number(levelStr);\r\n        }\r\n        let ascension = 0;\r\n        for (let i = (ARRAY.length - 1); i >= 0; i--) {\r\n            ascension = i;\r\n            if (ARRAY[i][0] > level) continue;\r\n            if (ARRAY[i][0] == level && !String(levelStr).endsWith('+')) {\r\n                ascension--;\r\n            }\r\n            break;\r\n        }\r\n        result = [Math.max(0, ascension), level];\r\n    } catch (error) {\r\n        console.error(levelStr);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport type TRecommendation = {\r\n    name: string,\r\n    build: any,\r\n    overwrite: boolean\r\n}\r\n\r\nexport function makeDefaultBuildname(character: any) {\r\n    return '' + character;\r\n}\r\n\r\nexport function makeBuildStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    let result = '_' + character;\r\n    if (buildname && buildname != makeDefaultBuildname(character)) {\r\n        result += '_' + buildname;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeOptionStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return '' + makeBuildStorageKey(character, buildname);\r\n}\r\n\r\nexport function makeArtifactScoringStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'ArtifactScoring');\r\n}\r\n\r\nexport function makeSupporterBuildnameStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'SupporterBuildname');\r\n}\r\n\r\n/** . [, , ][] */\r\nexport function makeRecommendationList(\r\n    characterMaster: TAnyObject,\r\n    opt_buildData?: TAnyObject,\r\n): TRecommendation[] {\r\n    const result: TRecommendation[] = [];\r\n\r\n    const character = characterMaster[''];\r\n    let isSavable: boolean | null = null;\r\n\r\n    if (opt_buildData) {\r\n        result.push({ name: 'IMPORTED DATA', build: opt_buildData, overwrite: false });\r\n        isSavable = true;\r\n        console.log(opt_buildData);\r\n    }\r\n\r\n    const storageKeyArr: string[] = [];\r\n    Object.keys(localStorage).forEach(key => {\r\n        if (key.startsWith(makeBuildStorageKey(character))) {\r\n            storageKeyArr.push(key);\r\n            if (isSavable === null) {\r\n                isSavable = false;\r\n            }\r\n        }\r\n    });\r\n    storageKeyArr.sort();\r\n    const re = new RegExp('^_' + character + '_');\r\n    storageKeyArr.forEach(key => {\r\n        let buildname;\r\n        if (key == makeBuildStorageKey(character)) {\r\n            buildname = makeDefaultBuildname(character);\r\n        } else {\r\n            buildname = key.replace(re, '');\r\n        }\r\n        const buildObj = JSON.parse(localStorage[key]);\r\n        const key2 = '' + key;\r\n        if (key2 in localStorage) {\r\n            const optionsObj = JSON.parse(localStorage[key2]);\r\n            buildObj.options = optionsObj;\r\n        }\r\n        const key3 = key.replace(/^/, 'ArtifactScoring');\r\n        if (key3 in localStorage) {\r\n            const artifactScoringObj = JSON.parse(localStorage[key3]);\r\n            buildObj.artifactScoring = artifactScoringObj;\r\n        }\r\n        const key4 = key.replace(/^/, 'SupporterBuildname');\r\n        if (key4 in localStorage) {\r\n            const supporterBuildnameObj = JSON.parse(localStorage[key4]);\r\n            buildObj.supporterBuildname = supporterBuildnameObj;\r\n        }\r\n        result.push({ name: buildname, build: buildObj, overwrite: true });\r\n    });\r\n\r\n    characterMaster[''].forEach((obj: { [key: string]: any }) => {\r\n        const myRecommendation = obj;\r\n        for (let i = 1; i <= NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n            const subkey = '' + i;\r\n            if (!(subkey in obj)) {\r\n                obj[subkey] = null;\r\n            }\r\n        }\r\n        const artifactRarerityArrArr = [[5, 5, 5, 5, 5], [4, 4, 5, 5, 5], [4, 4, 4, 5, 4]];\r\n        let artifactRarerity4Num = 0;\r\n        const artifactSet1 = myRecommendation['1'] as TArtifactSetKey;\r\n        const artifactSet2 = myRecommendation['2'] as TArtifactSetKey;\r\n        if (ARTIFACT_SET_MASTER[artifactSet1][''] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        if (ARTIFACT_SET_MASTER[artifactSet2][''] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        for (let i = 0; i < 2; i++) {\r\n            const name = '' + (i + 1);\r\n            if (!(name in myRecommendation)) {\r\n                if (i == 0) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_HP';\r\n                } else if (i == 1) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_';\r\n                }\r\n            }\r\n        }\r\n\r\n        let buildname = myRecommendation[''];\r\n        buildname += ' ';\r\n        if (myRecommendation['1'] == myRecommendation['2']) {\r\n            buildname += myRecommendation['1'];\r\n        } else {\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['1']);\r\n            buildname += '/';\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['2']);\r\n        }\r\n        buildname += ' [';\r\n        for (let i = 3; i <= 5; i++) {\r\n            const statusName = myRecommendation['' + i].split('_')[1];\r\n            if (RECOMMEND_ABBREV_MAP.has(statusName)) {\r\n                buildname += RECOMMEND_ABBREV_MAP.get(statusName);\r\n            } else {\r\n                buildname += statusName.substring(0, 1);\r\n            }\r\n        }\r\n        buildname += ']';\r\n        result.push({ name: buildname, build: myRecommendation, overwrite: false });\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\n/**  */\r\nfunction makeArtifactSetAbbrev(name: string): string {\r\n    const abbrRe = /[\\p{sc=Hiragana}\\p{sc=Katakana}]+/ug;\r\n    let abbr = name.replace(abbrRe, '');\r\n    if (abbr.length > 2) {\r\n        abbr = name.split(abbrRe).sort((a, b) => {\r\n            return b.length - a.length;\r\n        })[0];\r\n    }\r\n    if (abbr.length > 3) {\r\n        abbr = abbr.substring(0, 2);\r\n    }\r\n    return abbr;\r\n}\r\n\r\nexport function makePrioritySubstatValueList(\r\n    prioritySubstats: string[],\r\n    index: number,\r\n    opt_substat?: string\r\n) {\r\n    const result: number[] = [];\r\n    if (prioritySubstats[index]) {\r\n        if (!opt_substat) opt_substat = prioritySubstats[index];\r\n        if (opt_substat && opt_substat in ARTIFACT_SUB_MASTER) {\r\n            const valueArr = ARTIFACT_SUB_MASTER[opt_substat as TArtifactSubKey];\r\n            for (let i = 0; i < valueArr.length; i++) {\r\n                result.push(valueArr[i]);\r\n                if (i < valueArr.length - 1) {\r\n                    const diff = valueArr[i + 1] - valueArr[i];\r\n                    result.push(valueArr[i] + diff / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeEasyInputSubstatValueList(\r\n    substat: TArtifactSubKey\r\n) {\r\n    const result: number[] = [];\r\n    if (substat && substat in ARTIFACT_SUB_MASTER) {\r\n        const valueArr = ARTIFACT_SUB_MASTER[substat];\r\n        for (let i = 0; i < valueArr.length; i++) {\r\n            result.push(valueArr[i]);\r\n            if (i < valueArr.length - 1) {\r\n                const diff = valueArr[i + 1] - valueArr[i];\r\n                result.push(valueArr[i] + diff / 2);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport async function loadRecommendation(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n    build: { [key: string]: any }\r\n) {\r\n    try {\r\n        const character = characterInput.character;\r\n        const characterMaster = await getCharacterMasterDetail(character);\r\n        characterInput.characterMaster = characterMaster;\r\n        const artifactStatsSub = _.cloneDeep(TEMPLATE);\r\n\r\n        if ('' in build) {\r\n            [characterInput., characterInput.] = parseLevelStr(build['']);\r\n        }\r\n        ['', '', '', ''].forEach(key => {\r\n            if (key in build) {\r\n                (characterInput as any)[key] = Number(build[key]);\r\n            }\r\n        });\r\n\r\n        const weaponType = characterMaster[''];\r\n        if ('' in build) {\r\n            if (Object.keys(WEAPON_MASTER[weaponType]).includes(build[''])) {\r\n                characterInput.weapon = build[''] as TWeaponKey;\r\n            } else {\r\n                characterInput.weapon = Object.keys(WEAPON_MASTER[weaponType]).filter(s => s.startsWith(''))[0] as TWeaponKey;\r\n            }\r\n            characterInput.weaponMaster = await getWeaponMasterDetail(characterInput.weapon, weaponType);\r\n        }\r\n        if ('' in build) {\r\n            [characterInput., characterInput.] = parseLevelStr(build['']);\r\n        }\r\n        if ('' in build) {\r\n            characterInput. = Number(build['']);\r\n        }\r\n\r\n        let prioritySubstatsDisabled = false;\r\n        for (const key of Object.keys(build).filter((s: string) => s.startsWith(''))) {\r\n            let toKey = key.replace(/^/, '');\r\n            if (toKey != 'HP') toKey = toKey.replace(/P$/, '%');\r\n            if (build[key] || build[key] == 0) {\r\n                prioritySubstatsDisabled = true;\r\n                (artifactStatsSub as any)[toKey] = Number(build[key]);\r\n            }\r\n        }\r\n        artifactDetailInput.Disabled = prioritySubstatsDisabled;\r\n\r\n        ['1', '2'].forEach((key, index) => {\r\n            if (!(key in build)) return;\r\n            const artifactSet = build[key] as TArtifactSetKey;\r\n            if (artifactSet && artifactSet in ARTIFACT_SET_MASTER) {\r\n                characterInput.artifactSets[index] = artifactSet;\r\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER[artifactSet] as TArtifactSetEntry;\r\n            } else {\r\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER_DUMMY as TArtifactSetEntry;\r\n            }\r\n        });\r\n\r\n        ['1', '2'].forEach((key, index) => {\r\n            if (key in build) {\r\n                artifactDetailInput[''][index] = build[key];\r\n            } else {\r\n                artifactDetailInput[''][index] = ['5_HP', '5_'][index];\r\n            }\r\n        });\r\n        ['3', '4', '5'].forEach((key, index) => {\r\n            if (!(key in build)) return;\r\n            const mainstat = build[key];\r\n            artifactDetailInput[''][index + 2] = mainstat;\r\n        });\r\n\r\n        for (let i = 0; i < artifactDetailInput[''].length; i++) {\r\n            const subkey1 = '' + (i + 1);\r\n            const subkey2 = subkey1 + '';\r\n            const subkey3 = subkey1 + '';\r\n            const substat = build[subkey1];\r\n            const substatValue = build[subkey2];\r\n            const substatCount = build[subkey3];\r\n            artifactDetailInput[''][i] = substat ?? '';\r\n            if (substat && substatValue && isNumeric(substatValue)) {\r\n                const prioritySubstatValueList = makePrioritySubstatValueList([substat], 0);\r\n                prioritySubstatValueList.forEach((value, index) => {\r\n                    if (substatValue <= value) {\r\n                        artifactDetailInput[''][i] = index;\r\n                    }\r\n                })\r\n            } else {\r\n                if (artifactDetailInput[''][i] && !artifactDetailInput[''][i]) {\r\n                    artifactDetailInput[''][i] = GENSEN_MASTER_LIST[2].values[i];\r\n                }\r\n            }\r\n            if (substat && substatCount && isNumeric(substatCount)) {\r\n                artifactDetailInput[''][i] = substatCount;\r\n            } else {\r\n                if (artifactDetailInput[''][i] && !artifactDetailInput[''][i]) {\r\n                    artifactDetailInput[''][i] = GENSEN_MASTER_LIST[2].counts[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        Object.keys(build).filter(s => !PROPERTY_MAP.has(s) && !['options', 'artifactScoring', 'supporterBuildname', 'artifact_list'].includes(s)).forEach(key => {\r\n            if (build[key] == null) {\r\n                conditionInput.conditionValues[key] = build[key];   // null\r\n            } else if (_.isString(build[key])) {\r\n                conditionInput.conditionValues[key] = Number(build[key]);\r\n            } else {\r\n                conditionInput.conditionValues[key] = build[key];\r\n            }\r\n        });\r\n\r\n        if ('options' in build) {\r\n            const keys = Object.keys(build.options);\r\n            if (keys.length) {\r\n                overwriteObject(optionInput.elementalResonance.conditionValues, {});\r\n                overwriteObject(optionInput.teamOption.conditionValues, {});\r\n                overwriteObject(optionInput.miscOption.conditionValues, {});\r\n                keys.forEach(key => {\r\n                    if (key in ELEMENTAL_RESONANCE_MASTER || key === 'dendroOption') {\r\n                        // \r\n                        optionInput.elementalResonance.conditionValues[key] = build.options[key];\r\n                    } else {\r\n                        const astarIndex = key.indexOf('*');\r\n                        if (astarIndex != -1) {\r\n                            const workCharacter = key.substring(0, astarIndex);\r\n                            if (workCharacter in CHARACTER_MASTER) {\r\n                                // \r\n                                optionInput.teamOption.conditionValues[key] = build.options[key];\r\n                            } else {\r\n                                // \r\n                                optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                            }\r\n                        } else {\r\n                            // \r\n                            optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        if ('supporterBuildname' in build) {\r\n            const keys = Object.keys(build.supporterBuildname);\r\n            if (keys.length) {\r\n                overwriteObject(optionInput.supporterBuildname, {});\r\n                keys.forEach(key => {\r\n                    optionInput.supporterBuildname[key] = build.supporterBuildname[key];\r\n                });\r\n            }\r\n        }\r\n\r\n        if ('artifact_list' in build) {\r\n            const ARTIFACT_KEYS = Object.keys(ARTIFACT_TEMPLATE).sort();\r\n            const newList = build.artifact_list.filter((s: any) => _.isEqual(Object.keys(s).sort(), ARTIFACT_KEYS));\r\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length, ...newList);\r\n        } else {\r\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length);\r\n        }\r\n\r\n        overwriteObject(artifactDetailInput., artifactStatsSub);\r\n\r\n        console.debug('loadRecommendation', characterInput, artifactDetailInput, conditionInput, build);\r\n    }\r\n    catch (error) {\r\n        console.error(characterInput, artifactDetailInput, conditionInput, build);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeSavedata(characterInput: TCharacterInput, artifactDetailInput: TArtifactDetailInput, conditionInput: TConditionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // \r\n    resultObj[''] = characterInput.character;\r\n    // \r\n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.weapon;\r\n    // \r\n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // 1\r\n    resultObj['1'] = characterInput.artifactSets[0];\r\n    // 2\r\n    resultObj['2'] = characterInput.artifactSets[1];\r\n    // 1\r\n    resultObj['1'] = artifactDetailInput.[0];\r\n    // 2\r\n    resultObj['2'] = artifactDetailInput.[1];\r\n    // 3\r\n    resultObj['3'] = artifactDetailInput.[2];\r\n    // 4\r\n    resultObj['4'] = artifactDetailInput.[3];\r\n    // 5\r\n    resultObj['5'] = artifactDetailInput.[4];\r\n    // HP\r\n    resultObj['HP'] = artifactDetailInput.['HP'];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // HPP\r\n    resultObj['HPP'] = artifactDetailInput.['HP%'];\r\n    // P\r\n    resultObj['P'] = artifactDetailInput.['%'];\r\n    // P\r\n    resultObj['P'] = artifactDetailInput.['%'];\r\n    // *,  *, *\r\n    for (let i = 0; i < artifactDetailInput..length; i++) {\r\n        const substat = artifactDetailInput.[i];\r\n        if (substat) {\r\n            const key = '' + (i + 1);\r\n            resultObj[key] = substat;\r\n            resultObj[key + ''] = artifactDetailInput.[i];\r\n            resultObj[key + ''] = artifactDetailInput.[i];\r\n        }\r\n    }\r\n\r\n    for (const entry of conditionInput.checkboxList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n    for (const entry of conditionInput.selectList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n\r\n    resultObj['artifact_list'] = artifactDetailInput.artifact_list;\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeOptionsSavedata(character: string, optionInput: TOptionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // \r\n    {\r\n        const conditionValues = optionInput.elementalResonance.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    // \r\n    {\r\n        const conditionValues = optionInput.teamOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (key.startsWith(character + '*')) return;\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    // \r\n    {\r\n        const conditionValues = optionInput.miscOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeSupporterBuildnameSavedata(buildnameSelection: TAnyObject, optionInput: TOptionInput) {\r\n    const result: TAnyObject = {};\r\n    const conditionKeys = Object.keys(optionInput.teamOption.conditionValues);\r\n    for (const supporter of Object.keys(buildnameSelection)) {\r\n        if (!buildnameSelection[supporter]) continue;\r\n        if (conditionKeys.filter(s => s.startsWith(supporter + '*')).length == 0) continue;\r\n        result[supporter] = buildnameSelection[supporter];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport const CHANGE_KIND_STATUS = '';\r\nexport const CHANGE_KIND_TALENT = '';\r\n\r\nexport function makeDamageDetailObjArrObjCharacter(characterInput: TCharacterInput): TDamageDetail {\r\n    const result = {} as any;\r\n    try {\r\n        const characterMaster = characterInput.characterMaster as any;\r\n\r\n        let myTalentDetail;\r\n        let myTalentLevel: number;\r\n        let myDefaultKind: string | null;\r\n        let myDefaultElement: string | null;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        //   \r\n        myTalentLevel = characterInput[''];\r\n        myDefaultElement = characterMaster[''] === '' ? characterMaster[''] : null;\r\n        ['', '', ''].forEach(category => {\r\n            myTalentDetail = characterMaster[category];\r\n            myDefaultKind = category + '';\r\n            result[category] = makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        });\r\n\r\n        ['', '', ''].forEach(category => {\r\n            const workCategory = '' + category;\r\n            if (workCategory in characterMaster) {\r\n                myTalentDetail = characterMaster[workCategory];\r\n                if ('' in myTalentDetail) {\r\n                    myDefaultKind = myTalentDetail[''];\r\n                    switch (myDefaultKind) {\r\n                        case '':\r\n                            myTalentLevel = characterInput[''];\r\n                            break;\r\n                        case '':\r\n                            myTalentLevel = characterInput[''];\r\n                            break;\r\n                    }\r\n                }\r\n                if ('' in myTalentDetail) {\r\n                    myDefaultElement = myTalentDetail[''];\r\n                }\r\n                const workObj = {\r\n                    : myTalentDetail[''],\r\n                    : makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory)\r\n                };\r\n                result[workCategory] = workObj;\r\n            }\r\n        });\r\n\r\n        // \r\n        myTalentLevel = characterInput[''];\r\n        myDefaultKind = '';\r\n        myDefaultElement = characterMaster[''];\r\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        // \r\n        myTalentLevel = characterInput[''];\r\n        myDefaultKind = '';\r\n        myDefaultElement = characterMaster[''];\r\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        result[''] = [] as TDamageDetailObj[];\r\n\r\n        // \r\n        if ('' in characterMaster) {\r\n            characterMaster[''].forEach((myTalentDetail: any) => {\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result[''].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // \r\n        characterMaster[''].forEach((myTalentDetail: any) => {\r\n            const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n            if (workArr.length > 0) result[''].push(...workArr);\r\n        });\r\n\r\n        // \r\n        if ('' in characterMaster) {\r\n            Object.keys(characterMaster['']).forEach(key => {\r\n                if (Number(key) > characterInput.) return;\r\n                myTalentDetail = characterMaster[''][key];\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result[''].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // \r\n        if (characterMaster[''] == '') {\r\n            if (myTalentChangeDetailObjArr.filter(s => s. && s..startsWith('@')).length == 0) {\r\n                ['', '', '', ''].forEach(cond => {\r\n                    myTalentChangeDetailObjArr.push({\r\n                        : null,\r\n                        : '',\r\n                        : null,\r\n                        : null,\r\n                        : '@' + cond,\r\n                        : null,\r\n                        : null,\r\n                        : null,\r\n                        HIT: null,\r\n                        : null,\r\n                        : null,\r\n                        : null,\r\n                        : null\r\n                    });\r\n                });\r\n            }\r\n            if ('' in characterMaster) {\r\n                if (Object.keys(characterMaster['']).filter(s => s == '').length == 0) {\r\n                    characterMaster[''][''] = 1;\r\n                }\r\n            } else {\r\n                characterMaster[''] = { : 1 };\r\n            }\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        // conditionMap.delete('');\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyCharacter = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjWeapon(characterInput: any) {\r\n    const result = {} as any;\r\n    try {\r\n        const name = characterInput.weapon;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n        if (!name || !weaponMaster) return result;\r\n\r\n        let myTalentDetail;\r\n        const myLevel = characterInput.;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        if ('' in weaponMaster) {\r\n            myTalentDetail = weaponMaster[''];\r\n            result[''] = makeDamageDetailObjArr(myTalentDetail, myLevel, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            let condition = detailObj[''];\r\n            if (_.isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            let condition = detailObj[''];\r\n            if (_.isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyWeapon = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjArtifactSets(characterInput: any) {\r\n    const result = [] as any;\r\n    try {\r\n        let myTalentDetail;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        const artifactSetMasters = characterInput.artifactSetMasters.filter((s: any) => s);\r\n\r\n        if (artifactSetMasters.length > 0) {\r\n            const damageDetailObjArr = [] as TDamageDetailObj[];\r\n            if ('2' in artifactSetMasters[0]) {\r\n                myTalentDetail = artifactSetMasters[0]['2'];\r\n                damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n            }\r\n            if (artifactSetMasters.length == 2) {\r\n                if (artifactSetMasters[0] == artifactSetMasters[1]) {\r\n                    myTalentDetail = artifactSetMasters[0]['4'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                } else {\r\n                    myTalentDetail = artifactSetMasters[1]['2'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                }\r\n            }\r\n            result[''] = damageDetailObjArr;\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyArtifactSets = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjElementalResonance(characterInput: any) {\r\n    const result = [] as any;\r\n    try {\r\n        const myInputCategory = '';\r\n        const damageDetailObjArr = [] as TDamageDetailObj[];\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n        for (const myTalentDetail of ELEMENTAL_RESONANCE_MASTER_LIST) {\r\n            const workObj = _.cloneDeep(myTalentDetail);\r\n            if (workObj.) {\r\n                workObj..forEach((detailObj: TAnyObject) => {\r\n                    detailObj. = myTalentDetail.key;\r\n                });\r\n            }\r\n            damageDetailObjArr.push(...makeDamageDetailObjArr(workObj, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n        }\r\n        result[''] = damageDetailObjArr;\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailElementalResonance = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDetailObj(\r\n    detailObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    inputCategory: string | null,\r\n    opt_condition?: string,\r\n): TDamageDetailObj {\r\n    let my = detailObj. ?? defaultKind;\r\n    let my = detailObj. ?? null;\r\n    if (my && my.indexOf('.') !== -1) {\r\n        my = my.substring(my.indexOf('.') + 1);\r\n        my = my.substring(0, my.indexOf('.'));\r\n    }\r\n\r\n    let my = detailObj. ?? null;\r\n    if (_.isPlainObject(my)) {  // |\r\n        if (level && level in my) {\r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = 0;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    let my = detailObj. ?? opt_condition ?? null;\r\n    if (_.isPlainObject(my) && level && level in my) {  // \r\n        my = my[level];\r\n    }\r\n\r\n    let my = detailObj. ?? null;\r\n    if (_.isPlainObject(my)) {\r\n        if (level && level in my) { // for \r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = null;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    let my = detailObj. ?? null; // for \r\n    if (_.isPlainObject(my)) {\r\n        if (level && level in my) {\r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = null;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    return {\r\n        : detailObj. ?? null,\r\n        : my,\r\n        : detailObj. ?? defaultElement ?? null,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        HIT: detailObj.HIT ?? null,\r\n        : detailObj. ?? null,\r\n        : detailObj. ?? inputCategory === '',\r\n        : detailObj. ?? null,\r\n        : detailObj. ?? null,\r\n    }\r\n}\r\n\r\nexport function getChangeKind(kind: string) {\r\n    if (kind in TEMPLATE\r\n        || new RegExp('[].+(|)').exec(kind)\r\n        || [''].includes(kind)  // for \r\n        || new RegExp('?[]').exec(kind)\r\n        || ['', ''].includes(kind)\r\n        || [''].includes(kind)\r\n        || ['', ''].includes(kind)\r\n        || ['', '', '', ''].includes(kind)\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n    ) {\r\n        return 'STATUS';\r\n    } else if (kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind == '' ||\r\n        kind == ''\r\n    ) {   // ex.,\r\n        return 'TALENT';\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function makeDamageDetailObjArr(\r\n    talentDataObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    statusChangeDetailObjArr: any[],\r\n    talentChangeDetailObjArr: any[],\r\n    inputCategory: string,\r\n    opt_condition?: string,\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as any[];\r\n    if (!('' in talentDataObj)) return resultArr;\r\n\r\n    talentDataObj[''].forEach((detailObj: TAnyObject) => {\r\n        const resultObj = makeDetailObj(detailObj, level, defaultKind, defaultElement, inputCategory, opt_condition);\r\n        const my = resultObj. as string;\r\n        if (statusChangeDetailObjArr != null && getChangeKind(my) === 'STATUS') {\r\n            resultObj[''] = detailObj. ?? null;\r\n            statusChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        if (talentChangeDetailObjArr != null && getChangeKind(my) === 'TALENT') {\r\n            resultObj[''] = detailObj. ?? null;\r\n            talentChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        resultArr.push(resultObj);\r\n    });\r\n\r\n    return resultArr;\r\n}\r\n\r\nexport function makeTeamOptionDetailObjArr(\r\n    detailObjArr: any[],\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as TDamageDetailObj[];\r\n    detailObjArr.forEach((detailObj: { [x: string]: any; }) => {\r\n        const resultObj = makeDetailObj(detailObj, null, null, null, null);\r\n        if (resultObj) {\r\n            resultArr.push(resultObj);\r\n        }\r\n    });\r\n    return resultArr;\r\n}\r\n\r\n// \r\n// @prefixpostfix\r\n// @prefix(From)-(To)postfix\r\n// @prefix1,2,3postfix\r\n// =prefixpostfix\r\n// @\r\n// =\r\n// ={min=|,max=|,step=}\r\n// OR   A|B\r\n// AND  A&B\r\n//  A^B\r\nexport function makeConditionExclusionMapFromStr(\r\n    conditionStr: string,\r\n    conditionMap: Map<string, string[] | null | object>,\r\n    exclusionMap: Map<string, string[] | null>\r\n) {\r\n    // \r\n    let exclusionStr: string | undefined = undefined;\r\n    const workArr = conditionStr.split('^');\r\n    if (workArr.length > 1) {\r\n        exclusionStr = workArr[1];\r\n    }\r\n    const workStr = workArr[0];\r\n    if (workStr.includes('|')) {\r\n        // OR for \r\n        const conditionStrArr = workStr.split('|');\r\n        conditionStrArr.forEach((elem) => {\r\n            makeConditionExclusionMapFromStrSub(elem, conditionMap, exclusionMap, exclusionStr);\r\n        })\r\n    } else {\r\n        // AND\r\n        const conditionStrArr = workStr.split('&');\r\n        conditionStrArr.forEach((elem) => {\r\n            makeConditionExclusionMapFromStrSub(elem, conditionMap, exclusionMap, exclusionStr);\r\n        })\r\n    }\r\n}\r\n\r\nexport const NUMBER_CONDITION_VALUE_RE = /^\\s*{.+}\\s*$/;\r\n\r\nfunction makeConditionExclusionMapFromStrSub(\r\n    conditionStr: string,\r\n    conditionMap: Map<string, string[] | null | object>,\r\n    exclusionMap: Map<string, string[] | null>,\r\n    exclusion?: string,\r\n) {\r\n    const workArr = conditionStr.split(/[@=]/);\r\n    const name = workArr[0];\r\n    if (workArr.length === 1) {\r\n        pushToMapValueArray(conditionMap, name, null);\r\n    } else if (workArr.length === 2) {\r\n        if (NUMBER_CONDITION_VALUE_RE.test(workArr[1])) {\r\n            try {\r\n                const workObj = JSON.parse(workArr[1]);\r\n                const min = workObj.min;\r\n                const max = workObj.max;\r\n                if (!_.isNumber(min) && !_.isString(min)) {\r\n                    console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                } if (max !== undefined && !_.isNumber(max) && !_.isString(max)) {\r\n                    console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                } else {\r\n                    const conditionObj = {\r\n                        min: min,\r\n                        max: max,\r\n                        step: isNumeric(workObj.step) ? Number(workObj.step) : 1,\r\n                    };\r\n                    pushToMapValueArray(conditionMap, name, conditionObj);\r\n                }\r\n            } catch (error) {\r\n                console.error(error);\r\n                console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n            }\r\n        } else if (workArr[1].includes(',')) {\r\n            const re = new RegExp('([^0-9]*?)([\\\\+\\\\-0-9\\\\.,]+)(.*)');  // :-10,+60%\r\n            const reRet = re.exec(workArr[1]);\r\n            if (reRet) {\r\n                const prefix = reRet[1];\r\n                const condValueArr = reRet[2].split(',');\r\n                const postfix = reRet[3];\r\n                condValueArr.forEach(value => {\r\n                    pushToMapValueArray(conditionMap, name, prefix + value + postfix);\r\n                })\r\n            }\r\n        } else if (workArr[1].includes('-')) {\r\n            const re = new RegExp('([^0-9\\\\.]*)(-?[0-9\\\\.]+)-(-?[0-9\\\\.]+)(.*)');   // +prefix\r\n            const re2 = new RegExp('/([0-9\\\\.]+)(.*)');\r\n            const reRet = re.exec(workArr[1]);\r\n            if (reRet) {\r\n                const prefix = reRet[1];\r\n                const rangeStart = Number(reRet[2]);\r\n                const rangeEnd = Number(reRet[3]);\r\n                let step = rangeStart;\r\n                let postfix = reRet[4];\r\n                if (postfix) {\r\n                    const re2Ret = re2.exec(postfix);\r\n                    if (re2Ret) {\r\n                        step = Number(re2Ret[1]);\r\n                        postfix = re2Ret[2];\r\n                    }\r\n                }\r\n                step = step ? step : 1;\r\n                for (let i = rangeStart; i < rangeEnd; i = addDecimal(i, step, rangeEnd)) {\r\n                    pushToMapValueArray(conditionMap, name, prefix + String(i) + postfix);\r\n                }\r\n                pushToMapValueArray(conditionMap, name, prefix + String(rangeEnd) + postfix);\r\n            } else {\r\n                pushToMapValueArray(conditionMap, name, workArr[1]);\r\n            }\r\n        } else {\r\n            pushToMapValueArray(conditionMap, name, workArr[1]);\r\n        }\r\n    } else {\r\n        console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n    }\r\n    if (exclusion) {\r\n        exclusion.split(',').forEach(e => {\r\n            pushToMapValueArray(exclusionMap, name, e);\r\n        })\r\n    }\r\n}\r\n\r\nexport function setupConditionValues(\r\n    conditionInput: TConditionInput,\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    try {\r\n        const workConditionValues = _.cloneDeep(conditionInput.conditionValues);\r\n        const workCheckboxList: TCheckboxEntry[] = [];\r\n        const workSelectList: TSelectEntry[] = [];\r\n        const workNumberList: TNumberEntry[] = [];\r\n\r\n        // \r\n        for (const master of [characterInput.characterMaster, characterInput.weaponMaster, ...characterInput.artifactSetMasters]) {\r\n            if ('' in master) {\r\n                for (const key of Object.keys((master as any)[''])) {\r\n                    if (!(key in workConditionValues)) {\r\n                        workConditionValues[key] = (master as any)[''][key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const conditionMap = makeConditionMapFromCharacterInput(characterInput);\r\n        const exclusionMap = makeExclusionMapFromCharacterInput(characterInput);\r\n\r\n        if (optionInput.elementalResonance) {\r\n            for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\r\n                if (!optionInput.elementalResonance.conditionValues[key]) continue;\r\n                const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\r\n                if (!master.) continue;\r\n                for (const detailObj of master.) {\r\n                    if (!detailObj.) continue;\r\n                    makeConditionExclusionMapFromStr(detailObj., conditionMap, exclusionMap);\r\n                }\r\n            }\r\n        }\r\n\r\n        conditionMap.forEach((value, key) => {\r\n            if (value === null) {\r\n                if (workCheckboxList.filter(s => s.name == key).length === 0) {\r\n                    workCheckboxList.push({ name: key });\r\n                }\r\n            } else if (_.isArray(value)) {\r\n                if (workSelectList.filter(s => s.name == key).length === 0) {\r\n                    const required = value[0].startsWith('required_');\r\n                    workSelectList.push({\r\n                        name: key,\r\n                        options: value,\r\n                        required: required,\r\n                    });\r\n                }\r\n            } else if (_.isPlainObject(value)) {\r\n                if (workNumberList.filter(s => s.name == key).length === 0) {\r\n                    const numberObj = value as any;\r\n                    const entry = {\r\n                        name: key,\r\n                        min: numberObj.min,\r\n                        max: numberObj.max,\r\n                        step: numberObj.step,\r\n                    };\r\n                    workNumberList.push(entry);\r\n                }\r\n            }\r\n            if (key in workConditionValues && workConditionValues[key] !== null) {\r\n                const exclusions = exclusionMap.get(key);\r\n                if (exclusions) {\r\n                    for (const exclusion of exclusions) {\r\n                        if (exclusion in workConditionValues) {\r\n                            const conditionValue = conditionMap.get(exclusion);\r\n                            if (conditionValue === null) {  // checkbox\r\n                                workConditionValues[exclusion] = false;\r\n                            } else if (_.isArray(value)) {  // select\r\n                                workConditionValues[exclusion] = 0;\r\n                            } else if (_.isPlainObject(value)) {    // number\r\n                                const minValue = (value as any).min;\r\n                                if (isNumeric(minValue)) {\r\n                                    workConditionValues[exclusion] = Number(minValue);\r\n                                } else {\r\n                                    workConditionValues[exclusion] = 0;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (value === null) {   // checkbox\r\n                    let checked = true;\r\n                    const arr = exclusionMap.get(key);\r\n                    if (arr && arr.filter(s => workConditionValues[s]).length > 0) {\r\n                        checked = false;\r\n                    }\r\n                    workConditionValues[key] = checked;\r\n                } else if (_.isArray(value)) {  // select\r\n                    let selectedIndex = value.length - 1;\r\n                    const arr = exclusionMap.get(key);\r\n                    if (arr && arr.filter(s => workConditionValues[s]).length > 0) {\r\n                        selectedIndex = 0;\r\n                    }\r\n                    workConditionValues[key] = selectedIndex;\r\n                } else if (_.isPlainObject(value)) {    // number\r\n                    const minValue = (value as any).min;\r\n                    if (isNumeric(minValue)) {\r\n                        workConditionValues[key] = Number(minValue);\r\n                    } else {\r\n                        workConditionValues[key] = 0;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        if (!_.isEqual(conditionInput.conditionValues, workConditionValues)) {\r\n            overwriteObject(conditionInput.conditionValues, workConditionValues);\r\n        }\r\n        if (!_.isEqual(conditionInput.checkboxList, workCheckboxList)) {\r\n            conditionInput.checkboxList.splice(0, conditionInput.checkboxList.length, ...workCheckboxList);\r\n        }\r\n        if (!_.isEqual(conditionInput.selectList, workSelectList)) {\r\n            conditionInput.selectList.splice(0, conditionInput.selectList.length, ...workSelectList);\r\n        }\r\n        if (!_.isEqual(conditionInput.numberList, workNumberList)) {\r\n            conditionInput.numberList.splice(0, conditionInput.numberList.length, ...workNumberList);\r\n        }\r\n    } catch (error) {\r\n        console.error(conditionInput, characterInput, optionInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeConditionMapFromCharacterInput(characterInput: TCharacterInput) {\r\n    const result = new Map() as Map<string, any[] | null | object>;\r\n    [\r\n        characterInput.damageDetailMyCharacter,\r\n        characterInput.damageDetailMyWeapon,\r\n        characterInput.damageDetailMyArtifactSets,\r\n    ].forEach((damageDetail) => {\r\n        if (damageDetail && damageDetail.) {\r\n            damageDetail..forEach((value, key) => {\r\n                result.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport function makeExclusionMapFromCharacterInput(characterInput: TCharacterInput) {\r\n    const result = new Map() as Map<string, string[] | null>;\r\n    [\r\n        characterInput.damageDetailMyCharacter,\r\n        characterInput.damageDetailMyWeapon,\r\n        characterInput.damageDetailMyArtifactSets,\r\n    ].forEach((damageDetail) => {\r\n        if (damageDetail && damageDetail.) {\r\n            damageDetail..forEach((value, key) => {\r\n                result.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport function getStatValue(stat: string, statsObj: TStats) {\r\n    let result;\r\n    if (stat in statsObj) {\r\n        result = statsObj[stat];\r\n    } else {\r\n        const re = /(.+)X([0-7])$/;\r\n        const reRet = re.exec(stat);\r\n        if (reRet) {\r\n            if (reRet[1] in statsObj) {\r\n                result = statsObj[reRet[1]];\r\n                let n = Number(reRet[2]);\r\n                for (let i = 1; i <= 3; i++) {\r\n                    if ((n % 2) == 1) {\r\n                        const vStat: string = reRet[1] + 'V' + i;\r\n                        if (vStat in statsObj) {\r\n                            result -= statsObj[vStat];\r\n                        }\r\n                    }\r\n                    n = Math.trunc(n / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (result === undefined) {\r\n        console.warn(stat, statsObj); // \r\n        result = 0; // fixed\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function updateNumberConditionValues(\r\n    conditionInput: TConditionInput,\r\n    characterInput: TCharacterInput,\r\n    statsObj: TStats,\r\n) {\r\n    const conditionMap = makeConditionMapFromCharacterInput(characterInput);\r\n    conditionMap.forEach((value, key) => {\r\n        if (_.isPlainObject(value)) {\r\n            const numberEntryArr = conditionInput.numberList.filter(s => s.name == key);\r\n            if (numberEntryArr.length > 0) {\r\n                let minValue = (value as any).min;\r\n                let maxValue = (value as any).max;\r\n                if (_.isString(minValue) || _.isString(maxValue)) {\r\n                    if (_.isString(minValue)) {\r\n                        minValue = getStatValue(minValue, statsObj);\r\n                    }\r\n                    if (_.isString(maxValue)) {\r\n                        maxValue = getStatValue(maxValue, statsObj);\r\n                    }\r\n                    numberEntryArr[0].min = minValue;\r\n                    numberEntryArr[0].max = maxValue;\r\n                    if (key in conditionInput.conditionValues) {\r\n                        const value = conditionInput.conditionValues[key];\r\n                        if (_.isNumber(value)) {\r\n                            if (value < minValue) {\r\n                                conditionInput.conditionValues[key] = minValue;\r\n                            } else if (maxValue !== undefined && value > maxValue) {\r\n                                conditionInput.conditionValues[key] = maxValue;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction pushToMapValueArray(map: Map<any, any>, key: any, value: any) {\r\n    if (value === null) {    // checkbox\r\n        if (!map.has(key)) {\r\n            map.set(key, null);\r\n        }\r\n    } else if (_.isString(value)) { // select\r\n        if (map.has(key)) {\r\n            const oldValue = map.get(key);\r\n            if (oldValue === null) {\r\n                map.set(key, [value]);\r\n            } else if (_.isArray(oldValue)) {\r\n                if (!oldValue.includes(value)) {\r\n                    map.get(key).push(value);\r\n                }\r\n            } else {\r\n                console.error(map, key, value);\r\n            }\r\n        } else {\r\n            map.set(key, [value]);\r\n        }\r\n    } else if (_.isPlainObject(value)) {    // number\r\n        map.set(key, value);\r\n    }\r\n}\r\n\r\nfunction getDecimalLength(value: number): number {\r\n    const arr = ('' + value).split('.');\r\n    return arr.length > 1 ? arr[1].length : 0;\r\n}\r\n\r\nexport function multiplyDecimal(value1: number, value2: number): number {\r\n    const decimalLength = getDecimalLength(value1) + getDecimalLength(value2);\r\n    const intValue1 = Number(('' + value1).replace('.', ''));\r\n    const intValue2 = Number(('' + value2).replace('.', ''));\r\n    const result = (intValue1 * intValue2) / Math.pow(10, decimalLength);\r\n    return Number(result);\r\n}\r\n\r\nexport function addDecimal(value1: number, value2: number, opt_max?: number): number {\r\n    const k = Math.pow(10, Math.max(getDecimalLength(value1), getDecimalLength(value2)));\r\n    let result = (multiplyDecimal(value1, k) + multiplyDecimal(value2, k)) / k;\r\n    if (opt_max != undefined) {\r\n        result = Math.min(result, opt_max);\r\n    }\r\n    return result;\r\n}\r\n\r\n// function analyzeFormulaStr(\r\n//     formulaStr: number | string,\r\n//     opt_defaultItem: string | null = null\r\n// ) {\r\n//     const resultArr = [] as any[];\r\n//     const re = new RegExp('([\\\\+\\\\-\\\\*/]?)([^\\\\+\\\\-\\\\*/]+)(.*)');\r\n//     let workStr = String(formulaStr);\r\n//     // eslint-disable-next-line no-constant-condition\r\n//     while (true) {\r\n//         const reRet = re.exec(workStr);\r\n//         if (!reRet) {\r\n//             resultArr.push(workStr);\r\n//             break;\r\n//         }\r\n//         if (reRet[1]) { // + - * /\r\n//             resultArr.push(reRet[1]);\r\n//         }\r\n//         resultArr.push(analyzeFormulaStrSub(reRet[2], opt_defaultItem));\r\n//         if (!reRet[3]) {\r\n//             break;\r\n//         }\r\n//         workStr = reRet[3];\r\n//     }\r\n//     return resultArr;\r\n// }\r\n//\r\n// function analyzeFormulaStrSub(\r\n//     formulaStr: string,\r\n//     opt_defaultItem: string | null = null\r\n// ) {\r\n//     const resultArr = [] as any;\r\n//     if (isNumeric(formulaStr)) {\r\n//         resultArr.push(Number(formulaStr));\r\n//     } else {\r\n//         const strArr = (formulaStr as string).split('%');\r\n//         if (strArr.length == 1) {\r\n//             resultArr.push(strArr[0]);\r\n//         } else {\r\n//             resultArr.push(Number(strArr[0]) / 100);\r\n//             resultArr.push('*');\r\n//             if (strArr[1].length > 0) {\r\n//                 resultArr.push(strArr[1]);\r\n//             } else if (opt_defaultItem != null) {\r\n//                 resultArr.push(opt_defaultItem);\r\n//             }\r\n//         }\r\n//     }\r\n//     return resultArr;\r\n// }\r\n\r\nexport function makeFormulaTemplate(\r\n    formula: number | string | null | undefined,\r\n) {\r\n    let result: string | null = '';\r\n    if (formula === undefined || formula === null) {\r\n        result = null;\r\n    } else if (_.isNumber(formula) || isNumeric(formula)) {\r\n        result = String(formula);\r\n    } else {\r\n        const symbols = \"!\\\"&'()*+,-/:;<=>?@[\\\\]^`|~\";\r\n        const escapedSymbols = symbols.split('').map(s => '\\\\' + s).join('');\r\n        const re = new RegExp('([^' + escapedSymbols + ']+|[' + escapedSymbols + ']+)', 'g');\r\n        let reRet;\r\n        while ((reRet = re.exec(formula)) !== null) {\r\n            let item = reRet[1];\r\n            if (!symbols.includes(item.substring(0, 1))) {\r\n                item = _.trim(item);\r\n                if (isNumeric(item)) {\r\n                    result += item;\r\n                } else if (item.length) {\r\n                    if (item.includes('%')) {   // 123.4% or 12.34%HP %\r\n                        const arr = item.split('%').map(s => _.trim(s));\r\n                        result += arr[0] + '/100*';\r\n                        item = arr[1].length ? arr[1] : '';\r\n                    }\r\n                    result += '${' + item + '}';\r\n                }\r\n            } else {\r\n                result += item;\r\n            }\r\n        }\r\n    }\r\n    console.debug(formula, result);\r\n    return result;\r\n}\r\n\r\nexport function makeSharedata(savedata: TAnyObject) {\r\n    const sharedataArr = [] as any[];\r\n\r\n    let character: TCharacterKey;\r\n    let weaponType: TWeaponTypeKey;\r\n\r\n    PROPERTY_MAP.forEach((value, key) => {\r\n        let newValue = savedata[key];\r\n        let myBasename;\r\n        switch (key) {\r\n            case '':\r\n                character = newValue as TCharacterKey;\r\n                myBasename = basename(CHARACTER_MASTER[character]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '':\r\n                weaponType = CHARACTER_MASTER[character][''] as TWeaponTypeKey;\r\n                myBasename = basename((WEAPON_MASTER as any)[weaponType][newValue]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '1':\r\n            case '2':\r\n                if (newValue == 'NONE') {\r\n                    newValue = '';  // \r\n                } else {\r\n                    myBasename = basename(ARTIFACT_SET_MASTER[newValue as TArtifactSetKey]['image']);\r\n                    newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                }\r\n                break;\r\n            case '1':\r\n            case '2':\r\n            case '3':\r\n            case '4':\r\n            case '5':\r\n                if (newValue) {\r\n                    newValue = newValue.split('_')[0] + '_' + ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue.split('_')[1]);\r\n                }\r\n                break;\r\n        }\r\n        if (key.match(/^\\d$/)) {\r\n            if (newValue) {\r\n                newValue = ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue);\r\n            }\r\n        }\r\n        sharedataArr.push(newValue);\r\n    });\r\n    Object.keys(savedata).forEach(key => {\r\n        if (!PROPERTY_MAP.has(key)) {\r\n            sharedataArr.push(key + '=' + savedata[key]);\r\n        }\r\n    });\r\n\r\n    return sharedataArr.join(',');\r\n}\r\n\r\nfunction openTwitter(text: string, url: string, opt_hashtags?: string, opt_via?: string) {\r\n    const baseUrl = 'https://twitter.com/intent/tweet?';\r\n    const params = new URLSearchParams();\r\n    params.append('text', text);\r\n    params.append('url', url);\r\n    if (opt_hashtags) {\r\n        params.append('hashtags', opt_hashtags);\r\n    }\r\n    if (opt_via) {\r\n        params.append('via', opt_via);\r\n    }\r\n    const query = params.toString();\r\n    const shareUrl = `${baseUrl}${query}`;\r\n    console.log(params);\r\n    console.log(shareUrl);\r\n    window.open(shareUrl);\r\n}\r\n\r\nexport function shareByTwitter(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput\r\n) {\r\n    const savedata = makeSavedata(characterInput, artifactDetailInput, conditionInput);\r\n    const sharedata = makeSharedata(savedata);\r\n\r\n    const text = characterInput.buildname;\r\n    const encoded = encodeURI(sharedata);\r\n    const url = 'https://asagume.github.io/gencalc/' + '?allin=' + encoded;\r\n\r\n    openTwitter(text, url);\r\n}\r\n\r\nexport function getMaxConstellation(characterMaster: TCharacterDetail) {\r\n    let max = 0;\r\n    if ('' in characterMaster) {\r\n        max = Object.keys(characterMaster.).length;\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function getMaxTalentLevel(characterMaster: TCharacterDetail, key: string) {\r\n    let max = 10;\r\n    if (key in characterMaster) {\r\n        const talentObj = (characterMaster as any)[key];\r\n        if ('' in talentObj) {\r\n            for (const detailObj of talentObj.) {\r\n                if ('' in detailObj && _.isPlainObject(detailObj.)) {\r\n                    const work = Object.keys(detailObj.).length;\r\n                    if (max < work) max = work;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function pushBuildinfoToSession(character: TCharacterKey | string, buildname?: string, builddata?: any, teammembers?: string[]) {\r\n    sessionStorage.setItem('character', character);\r\n    if (buildname) {\r\n        sessionStorage.setItem('buildname', buildname);\r\n    }\r\n    if (builddata) {\r\n        sessionStorage.setItem('builddata', JSON.stringify(builddata));\r\n    }\r\n    if (teammembers) {\r\n        sessionStorage.setItem('teammembers', JSON.stringify(teammembers));\r\n    }\r\n}\r\n\r\nexport function popBuildinfoFromSession() {\r\n    const result: [string | undefined, string | undefined, TAnyObject | undefined, string[] | undefined] = [undefined, undefined, undefined, undefined];\r\n    const character = sessionStorage.getItem('character');\r\n    if (character) {\r\n        result[0] = character;\r\n        const buildname = sessionStorage.getItem('buildname');\r\n        if (buildname) {\r\n            result[1] = buildname;\r\n        }\r\n        const builddata = sessionStorage.getItem('builddata');\r\n        if (builddata) {\r\n            result[2] = JSON.parse(builddata);\r\n        }\r\n        const teammembers = sessionStorage.getItem('teammembers');\r\n        if (teammembers) {\r\n            result[3] = JSON.parse(teammembers);\r\n        }\r\n        console.log(character, buildname, builddata, teammembers);\r\n    }\r\n    sessionStorage.removeItem('character');\r\n    sessionStorage.removeItem('builddata');\r\n    sessionStorage.removeItem('buildname');\r\n    sessionStorage.removeItem('teammembers');\r\n    return result;\r\n}\r\n\r\nexport async function updateConditionsByTeam(\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const character = characterInput.character;\r\n    const teamMembers: string[] = [character];\r\n    if (optionInput?.teamMembers) {\r\n        teamMembers.push(...optionInput.teamMembers.filter(s => s && s != character));\r\n    }\r\n    const myVision = CHARACTER_MASTER[character as TCharacterKey].;\r\n\r\n    // []*, []*\r\n    const regionCountMap = new Map<string, number>();\r\n    // []\r\n    let totalEnergyCost = 0;\r\n    // Map<, >\r\n    const visionCountMap = new Map<string, number>();\r\n    for (const entry of teamMembers) {\r\n        const characterDetail = await getCharacterMasterDetail(entry as TCharacterKey);\r\n        if (characterDetail.region) {\r\n            const count = regionCountMap.get(characterDetail.region);\r\n            if (count) {\r\n                regionCountMap.set(characterDetail.region, count + 1);\r\n            } else {\r\n                regionCountMap.set(characterDetail.region, 1);\r\n            }\r\n        }\r\n        if ('' in characterDetail.) {\r\n            totalEnergyCost += Number(characterDetail..);\r\n        }\r\n        if (characterDetail.) {\r\n            const count = visionCountMap.get(characterDetail.);\r\n            if (count) {\r\n                visionCountMap.set(characterDetail., count + 1);\r\n            } else {\r\n                visionCountMap.set(characterDetail., 1);\r\n            }\r\n        }\r\n    }\r\n    regionCountMap.forEach((value, key) => {\r\n        conditionInput.conditionValues['[]' + key + ''] = value;\r\n        conditionInput.conditionValues['[]' + key + ''] = teamMembers.length - value;\r\n    })\r\n    if (totalEnergyCost) {\r\n        conditionInput.conditionValues['[]'] = totalEnergyCost;\r\n    }\r\n    visionCountMap.forEach((value, key) => {\r\n        conditionInput.conditionValues['[]' + key + ''] = value;\r\n        conditionInput.conditionValues['[]' + key + ''] = teamMembers.length - value;\r\n        if (key == myVision) {\r\n            conditionInput.conditionValues['[]'] = value - 1;\r\n            conditionInput.conditionValues['[]'] = teamMembers.length - value;\r\n        }\r\n    })\r\n    conditionInput.conditionValues['[]'] = visionCountMap.size - 1; // required1\r\n    const pyroCount = visionCountMap.get('') ?? 0;\r\n    const hydroCount = visionCountMap.get('') ?? 0;\r\n    const electroCount = visionCountMap.get('') ?? 0;\r\n    const cryoCount = visionCountMap.get('') ?? 0;\r\n    conditionInput.conditionValues['[]'] = pyroCount + hydroCount + electroCount + cryoCount;\r\n}\r\n\r\nexport async function updateOptionsElementalResonanceByTeam(\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const character = characterInput.character;\r\n    const teamMembers: string[] = [character];\r\n    if (optionInput?.teamMembers) {\r\n        teamMembers.push(...optionInput.teamMembers.filter(s => s && s != character));\r\n    }\r\n\r\n    const visionCountMap = new Map<string, number>();\r\n    for (const entry of teamMembers) {\r\n        const characterDetail = await getCharacterMasterDetail(entry as TCharacterKey);\r\n        if (characterDetail.) {\r\n            const count = visionCountMap.get(characterDetail.);\r\n            if (count) {\r\n                visionCountMap.set(characterDetail., count + 1);\r\n            } else {\r\n                visionCountMap.set(characterDetail., 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    // \r\n    const newElementResonance: TConditionValues = {};\r\n    const resonanceElementArr: string[] = [];\r\n    const restMemberElementArr: string[] = [];\r\n    visionCountMap.forEach((value, key) => {\r\n        if (value >= 2) {\r\n            resonanceElementArr.push(key);\r\n        } else if (value == 1) {\r\n            restMemberElementArr.push(key);\r\n        }\r\n    })\r\n    if (optionInput.teamMembers.length == 3) {\r\n        if (resonanceElementArr.length > 1) {\r\n            newElementResonance[resonanceElementArr[0] + ''] = true;\r\n            newElementResonance[resonanceElementArr[1] + ''] = true;\r\n        } else if (resonanceElementArr.length > 0) {\r\n            newElementResonance[resonanceElementArr[0] + ''] = true;\r\n        } else {\r\n            newElementResonance[''] = true;\r\n        }\r\n    } else if (resonanceElementArr.length > 0) {\r\n        const tempArr: string[] = [resonanceElementArr[0] + ''];\r\n        const currentElementArr = Object.keys(optionInput.elementalResonance.conditionValues).filter(s => optionInput.elementalResonance.conditionValues[s] && s != '').map(s => s.replace(/$/, ''));\r\n        currentElementArr.forEach(element => {\r\n            if (restMemberElementArr.includes(element)) {\r\n                tempArr.push(element + '');\r\n            }\r\n        });\r\n        if (tempArr.length < 2) {\r\n            ALL_ELEMENTS.forEach(element => {\r\n                const resonance = element + '';\r\n                if (optionInput.elementalResonance.conditionValues[resonance]) {\r\n                    if (!tempArr.includes(resonance)) {\r\n                        tempArr.push(resonance);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        tempArr.forEach(resonance => {\r\n            newElementResonance[resonance] = true;\r\n        })\r\n    }\r\n    if (!_.isEqual(newElementResonance, optionInput.elementalResonance.conditionValues)) {\r\n        overwriteObject(optionInput.elementalResonance.conditionValues, newElementResonance);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","export type TAnyObject = {\r\n    [key: string]: any\r\n}\r\n\r\nimport CHARACTER_MASTER from '../public/data/CharacterMaster.json'// assert {type: 'json'}\r\n\r\nimport SWORD_MASTER from '../public/data/SwordMaster.json'// assert {type: 'json'}\r\nimport CLAYMORE_MASTER from '../public/data/ClaymoreMaster.json'// assert {type: 'json'}\r\nimport POLEARM_MASTER from '../public/data/PolearmMaster.json'// assert {type: 'json'}\r\nimport BOW_MASTER from '../public/data/BowMaster.json'// assert {type: 'json'}\r\nimport CATALYST_MASTER from '../public/data/CatalystMaster.json'// assert {type: 'json'}\r\n\r\nimport ARTIFACT_SET_MASTER from '../public/data/ArtifactSetMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_MAIN_MASTER from '../public/data/ArtifactMainMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_SUB_MASTER from '../public/data/ArtifactSubMaster.json'// assert {type: 'json'}\r\n\r\nimport ENEMY_MASTER from '../public/data/EnemyMaster.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_RESONANCE_MASTER from '../public/data/ElementalResonanceMaster.json'// assert {type: 'json'}\r\nimport TEAM_OPTION_MASTER from '../public/data/TeamOptionMaster.json'// assert {type: 'json'}\r\nimport OPTION1_MASTER from '../public/data/OptionMaster1.json'// assert {type: 'json'}\r\nimport OPTION2_MASTER from '../public/data/OptionMaster2.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_REACTION_MASTER from '../public/data/ElementalReactionMaster.json'// assert {type: 'json'}\r\n\r\n// import HOYO_DICTIONARY2 from '../public/data/HoYoDictionary2.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY4 from '../public/data/HoYoDictionary4.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY5 from '../public/data/HoYoDictionary5.json'// assert {type: 'json'}\r\n// import LOCAL_DICTIONARY from '../public/data/LocalDictionary.json'// assert {type: 'json'}\r\n// import { isPlainObject, isString } from './common'\r\n\r\nexport {\r\n    CHARACTER_MASTER,\r\n    ARTIFACT_SET_MASTER,\r\n    ARTIFACT_MAIN_MASTER,\r\n    ARTIFACT_SUB_MASTER,\r\n    ENEMY_MASTER,\r\n    ELEMENTAL_RESONANCE_MASTER,\r\n    TEAM_OPTION_MASTER,\r\n    OPTION1_MASTER,\r\n    OPTION2_MASTER,\r\n    ELEMENTAL_REACTION_MASTER\r\n};\r\n\r\n// function removeStrFromUrl(obj: any, str: string) {\r\n//     if (isPlainObject(obj)) {\r\n//         for (const key of Object.keys(obj)) {\r\n//             if (isString(obj[key])) {\r\n//                 obj[key] = obj[key].replace(str, '');\r\n//             } else if (isPlainObject(obj[key])) {\r\n//                 removeStrFromUrl(obj[key], str);\r\n//             } else if (Array.isArray(obj[key])) {\r\n//                 for (const entry of obj[key]) {\r\n//                     removeStrFromUrl(entry, str);\r\n//                 }\r\n//             }\r\n//         }\r\n//     }\r\n// }\r\n\r\n// for (const master of [\r\n//     CHARACTER_MASTER,\r\n//     SWORD_MASTER,\r\n//     CLAYMORE_MASTER,\r\n//     POLEARM_MASTER,\r\n//     BOW_MASTER,\r\n//     CATALYST_MASTER,\r\n//     ARTIFACT_SET_MASTER\r\n// ]) {\r\n//     for (const key of Object.keys(master)) {\r\n//         removeStrFromUrl((master as any)[key], '');\r\n//     }\r\n// }\r\n\r\nexport const IMG_SRC_DUMMY = 'data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7';\r\n\r\nexport type TVisionKey = '' | '' | '' | '' | '' | '' | '';\r\nexport type TWeaponTypeKey = '' | '' | '' | '' | '';\r\n\r\nexport type TCharacterMaster = typeof CHARACTER_MASTER;\r\nexport type TCharacter = {\r\n    : 4 | 5,\r\n    : TVisionKey,\r\n    : TWeaponTypeKey,\r\n    ?: string,\r\n    import: string,\r\n}\r\nexport type TCharacterKey = keyof typeof CHARACTER_MASTER\r\nexport type TCharacterEntry = TCharacter & {\r\n    key: TCharacterKey,\r\n    icon_url: string,\r\n}\r\n\r\nexport type TCharacterDetail = {\r\n    : TCharacterKey,\r\n    : string,\r\n    icon_url: string,\r\n    : 4 | 5,\r\n    : TWeaponTypeKey,\r\n    : TVisionKey,\r\n    baseInfo: any,\r\n    region?: string,\r\n    : TCharacterStats,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any[],\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any[],\r\n    ?: any,\r\n    ?: any,\r\n    : any[],\r\n    'NEXT STEP'?: string,\r\n}\r\nexport type TCharacterStats = {\r\n    HP: {\r\n        [key: string]: number,\r\n    },\r\n    : {\r\n        [key: string]: number,\r\n    },\r\n    : {\r\n        [key: string]: number,\r\n    },\r\n    [key: string]: {\r\n        [key: string]: number,\r\n    }\r\n};\r\nexport type TLeveldValue = {\r\n    [key: number | string]: number,\r\n};\r\nexport type TTalentFormula = number | string | TLeveldValue;\r\nexport type TCharacterTalent = {\r\n    ?: string,\r\n    ?: {\r\n        ?: string,\r\n        ?: string,\r\n        ?: string | number | any[],\r\n        ?: string,\r\n        ?: string,\r\n    }[],\r\n    [key: string]: string | number | any[] | undefined,\r\n};\r\n\r\nexport type TWeaponRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TWeaponStats = {\r\n    : any,\r\n    [key: string]: any,\r\n}\r\nexport type TWeapon = {\r\n    : TWeaponRarity,\r\n    import: string,\r\n}\r\nexport type TSwordKey = keyof typeof SWORD_MASTER;\r\nexport type TClaymoreKey = keyof typeof CLAYMORE_MASTER;\r\nexport type TPolearmKey = keyof typeof POLEARM_MASTER;\r\nexport type TBowKey = keyof typeof BOW_MASTER;\r\nexport type TCatalystKey = keyof typeof CATALYST_MASTER;\r\nexport type TWeaponKey = TSwordKey | TClaymoreKey | TPolearmKey | TBowKey | TCatalystKey;\r\nexport type TWeaponEntry = TWeapon & {\r\n    key: TWeaponKey,\r\n    icon_url: string,\r\n};\r\nexport const WEAPON_DETAIL_TEMPLATE = {\r\n    : '',\r\n    : '',\r\n    icon_url: IMG_SRC_DUMMY,\r\n    : 4,\r\n    : '',\r\n    : {\r\n        : {}\r\n    },\r\n};\r\nexport type TWeaponDetail = {\r\n    : TWeaponKey,\r\n    : string,\r\n    icon_url: string,\r\n    : TWeaponRarity,\r\n    : TWeaponTypeKey,\r\n    : TWeaponStats,\r\n    ?: any,\r\n    ?: any[],\r\n    ?: any,\r\n    ?: any,\r\n    ?: number,\r\n};\r\n\r\nexport type TArtifactSetEffect = {\r\n    : string,\r\n    ?: any[],\r\n};\r\nexport type TArtifactSetRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TArtifactSet = {\r\n    : TArtifactSetRarity,\r\n    image: string,\r\n    '2'?: TArtifactSetEffect,\r\n    '4'?: TArtifactSetEffect,\r\n    ?: { [key: string]: boolean | number },\r\n    artifact_list?: string[],\r\n};\r\nexport type TArtifactSetKey = keyof typeof ARTIFACT_SET_MASTER;\r\nexport type TArtifactSetEntry = TArtifactSet & {\r\n    key: TArtifactSetKey,\r\n    icon_url: string,\r\n};\r\n\r\nexport type TArtifactMainStat = keyof typeof ARTIFACT_MAIN_MASTER[5]\r\nexport type TArtifactMainRarity = 4 | 5;\r\nexport type TArtifactMain = {\r\n    5: TArtifactMainStat,\r\n    4: TArtifactMainStat,\r\n};\r\n\r\nfunction getIconUrl(master: TAnyObject) {\r\n    let result = null;\r\n    if (master.icon_url) {\r\n        result = master.icon_url;\r\n    } else if (master.image) {\r\n        result = master.image;\r\n    } else if (master.import) {\r\n        result = master.import.replace('data/', 'images/');\r\n        if (result.indexOf('characters/') != -1) {\r\n            result = result.replace('characters/', 'characters/face/');\r\n        }\r\n        result = result.replace(/json$/, 'png');\r\n    }\r\n    return result;\r\n}\r\n\r\nexport const CHARACTER_MASTER_LIST: TCharacterEntry[] = [];\r\n(Object.keys(CHARACTER_MASTER) as TCharacterKey[]).forEach(key => {\r\n    const master: any = CHARACTER_MASTER[key];\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    CHARACTER_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const WEAPON_MASTER = {\r\n    : SWORD_MASTER,\r\n    : CLAYMORE_MASTER,\r\n    : POLEARM_MASTER,\r\n    : BOW_MASTER,\r\n    : CATALYST_MASTER,\r\n};\r\n(Object.keys(WEAPON_MASTER) as TWeaponTypeKey[]).forEach(key2 => {\r\n    const typedMaster = WEAPON_MASTER[key2] as any; // \r\n    Object.keys(typedMaster).forEach(key => {\r\n        const master = typedMaster[key];\r\n        master.key = key;\r\n        master.icon_url = getIconUrl(master);\r\n    });\r\n})\r\nconst SWORD_MASTER_LIST = (Object.keys(SWORD_MASTER) as TSwordKey[]).map(key => SWORD_MASTER[key]);\r\nconst CLAYMORE_MASTER_LIST = (Object.keys(CLAYMORE_MASTER) as TClaymoreKey[]).map(key => CLAYMORE_MASTER[key]);\r\nconst POLEARM_MASTER_LIST = (Object.keys(POLEARM_MASTER) as TPolearmKey[]).map(key => POLEARM_MASTER[key]);\r\nconst BOW_MASTER_LIST = (Object.keys(BOW_MASTER) as TBowKey[]).map(key => BOW_MASTER[key]);\r\nconst CATALYST_MASTER_LIST = (Object.keys(CATALYST_MASTER) as TCatalystKey[]).map(key => CATALYST_MASTER[key]);\r\nexport const WEAPON_MASTER_LIST = {\r\n    : SWORD_MASTER_LIST,\r\n    : CLAYMORE_MASTER_LIST,\r\n    : POLEARM_MASTER_LIST,\r\n    : BOW_MASTER_LIST,\r\n    : CATALYST_MASTER_LIST,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_LIST: TArtifactSetEntry[] = [];\r\n(Object.keys(ARTIFACT_SET_MASTER) as TArtifactSetKey[]).forEach(key => {\r\n    const master = ARTIFACT_SET_MASTER[key] as any;\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    ARTIFACT_SET_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const ARTIFACT_MAIN_MASTER_STATLIST: string[] = Object.keys(ARTIFACT_MAIN_MASTER[5]);\r\n\r\nexport const ARTIFACT_SUB_MASTER_STATLIST = Object.keys(ARTIFACT_SUB_MASTER);\r\nexport type TArtifactSubKey = keyof typeof ARTIFACT_SUB_MASTER;\r\n\r\nexport type TEnemy = {\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    [key: string]: number,\r\n};\r\nexport type TEnemyKey = keyof typeof ENEMY_MASTER;\r\nexport type TEnemyEntry = TEnemy & {\r\n    key: TEnemyKey,\r\n};\r\nfor (const key of Object.keys(ENEMY_MASTER)) {\r\n    for (const stat of Object.keys((ENEMY_MASTER as any)[key])) {\r\n        if ((ENEMY_MASTER as any)[key][stat] >= 1000) { // \r\n            (ENEMY_MASTER as any)[key][stat] = Infinity;\r\n        }\r\n    }\r\n}\r\nexport const ENEMY_MASTER_LIST = (Object.keys(ENEMY_MASTER) as TEnemyKey[])\r\n    .map(key => ({ key: key, ...ENEMY_MASTER[key] }));\r\n\r\nexport type TElementalResonanceKey = keyof typeof ELEMENTAL_RESONANCE_MASTER;\r\nexport const ELEMENTAL_RESONANCE_MASTER_LIST = (Object.keys(ELEMENTAL_RESONANCE_MASTER) as TElementalResonanceKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_RESONANCE_MASTER[key] }));\r\n\r\nexport type TTeamOptionKey = keyof typeof TEAM_OPTION_MASTER;\r\nexport const TEAM_OPTION_MASTER_LIST = (Object.keys(TEAM_OPTION_MASTER) as TTeamOptionKey[])\r\n    .map(key => ({ key: key, ...TEAM_OPTION_MASTER[key] }));\r\n\r\nexport type TOption1Key = keyof typeof OPTION1_MASTER;\r\nexport const OPTION1_MASTER_LIST = (Object.keys(OPTION1_MASTER) as TOption1Key[])\r\n    .map(key => ({ key: key, ...OPTION1_MASTER[key] }));\r\n\r\nexport type TOption2Key = keyof typeof OPTION2_MASTER;\r\nexport const OPTION2_MASTER_LIST = (Object.keys(OPTION2_MASTER) as TOption2Key[])\r\n    .map(key => ({ key: key, ...OPTION2_MASTER[key] }));\r\n\r\nexport type TElementalReactionKey = keyof typeof ELEMENTAL_REACTION_MASTER;\r\nexport const ELEMENTAL_REACTION_MASTER_LIST = (Object.keys(ELEMENTAL_REACTION_MASTER) as TElementalReactionKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_REACTION_MASTER[key] }));\r\n\r\n// export const DICTIONARY_MASTER = { ...HOYO_DICTIONARY2, ...HOYO_DICTIONARY4, ...HOYO_DICTIONARY5, ...LOCAL_DICTIONARY };\r\n\r\n////////////////\r\n////////////////\r\nconst CHARACTER_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param {string} character \r\n * @returns {Promise<any>}\r\n */\r\nexport async function getCharacterMasterDetail(character: TCharacterKey): Promise<TCharacterDetail> {\r\n    try {\r\n        if (!CHARACTER_MASTER_DETAIL_MAP.has(character)) {\r\n            const url = CHARACTER_MASTER[character]['import'].replace(/^\\//, '');\r\n            const characterMaster = await fetch(url).then(resp => resp.json());\r\n            // URLURL\r\n            const weaponType = CHARACTER_MASTER[character]. as TWeaponTypeKey;\r\n            characterMaster..icon_url = WEAPON_IMG_SRC[weaponType];\r\n            CHARACTER_MASTER_DETAIL_MAP.set(character, characterMaster);\r\n        }\r\n        return CHARACTER_MASTER_DETAIL_MAP.get(character);\r\n    } catch (error) {\r\n        console.error(character);\r\n        throw error;\r\n    }\r\n}\r\n\r\nconst WEAPON_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param weapon \r\n * @param opt_weaponType \r\n * @returns \r\n */\r\nexport async function getWeaponMasterDetail(weapon: TWeaponKey, opt_weaponType?: TWeaponTypeKey): Promise<TWeaponDetail> {\r\n    try {\r\n        if (!WEAPON_MASTER_DETAIL_MAP.has(weapon)) {\r\n            let weaponTypeArr;\r\n            if (opt_weaponType) weaponTypeArr = [opt_weaponType];\r\n            else weaponTypeArr = Object.keys(WEAPON_MASTER);\r\n            for (const weaponType of weaponTypeArr) {\r\n                if (weapon in WEAPON_MASTER[weaponType as TWeaponTypeKey]) {\r\n                    const typedMaster: any = WEAPON_MASTER[weaponType as TWeaponTypeKey];\r\n                    const url = typedMaster[weapon]['import'];\r\n                    const weaponMaster: any = await fetch(url).then(resp => resp.json());\r\n                    weaponMaster. = weaponType; // \r\n                    WEAPON_MASTER_DETAIL_MAP.set(weapon, weaponMaster);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return WEAPON_MASTER_DETAIL_MAP.get(weapon);\r\n    } catch (error) {\r\n        console.error(weapon, opt_weaponType);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const ALL_ELEMENTS = ['', '', '', '', '', '', ''];\r\n\r\nexport const ELEMENT_COLOR_CLASS = {\r\n    : 'pyro',\r\n    : 'hydro',\r\n    : 'anemo',\r\n    : 'electro',\r\n    : 'dendro',\r\n    : 'cryo',\r\n    : 'geo'\r\n};\r\nexport type TElementColorClassKey = keyof typeof ELEMENT_COLOR_CLASS;\r\n\r\nexport const ELEMENT_BG_COLOR_CLASS = {\r\n    : 'pyro-bg',\r\n    : 'hydro-bg',\r\n    : 'anemo-bg',\r\n    : 'electro-bg',\r\n    : 'dendro-bg',\r\n    : 'cryo-bg',\r\n    : 'geo-bg'\r\n};\r\n\r\nexport const ELEMENT_IMG_SRC = {\r\n    : 'images/element_pyro.png',\r\n    : 'images/element_hydro.png',\r\n    : 'images/element_anemo.png',\r\n    : 'images/element_electro.png',\r\n    : 'images/element_dendro.png',\r\n    : 'images/element_cryo.png',\r\n    : 'images/element_geo.png'\r\n};\r\nexport type TElementImgSrcKey = keyof typeof ELEMENT_IMG_SRC;\r\n\r\nexport const WEAPON_IMG_SRC = {\r\n    : 'images/characters/NormalAttack_sword.png',\r\n    : 'images/characters/NormalAttack_claymore.png',\r\n    : 'images/characters/NormalAttack_polearm.png',\r\n    : 'images/characters/NormalAttack_bow.png',\r\n    : 'images/characters/NormalAttack_catalyst.png',\r\n};\r\n\r\nexport const STAR_BACKGROUND_IMAGE_CLASS = {\r\n    1: 'star1-bg',\r\n    2: 'star2-bg',\r\n    3: 'star3-bg',\r\n    4: 'star4-bg',\r\n    5: 'star5-bg'\r\n}\r\n\r\nexport const PROPERTY_MAP = new Map([\r\n    ['', null],\r\n    ['', null],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', null],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['1', null],\r\n    ['2', null],\r\n    ['1', null],\r\n    ['2', null],\r\n    ['3', null],\r\n    ['4', null],\r\n    ['5', null],\r\n    ['HP', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['HPP', 0],\r\n    ['P', 0],\r\n    ['P', 0],\r\n    ['1', null],\r\n    ['1', -1],\r\n    ['1', -1],\r\n    ['2', null],\r\n    ['2', -1],\r\n    ['2', -1],\r\n    ['3', null],\r\n    ['3', -1],\r\n    ['3', -1],\r\n    ['4', null],\r\n    ['4', -1],\r\n    ['4', -1],\r\n]);\r\n\r\nexport const NUMBER_OF_PRIORITY_SUBSTATS = Array.from(PROPERTY_MAP.keys()).filter(s => s.match(/^\\d$/)).length;\r\n\r\nexport const DAMAGE_CATEGORY_ARRAY = ['', '', '', '', ''];\r\n\r\nexport const RECOMMEND_ABBREV_MAP = new Map([\r\n    ['HP%', 'HP'], ['', ''], ['', ''], ['', ''], ['', ''], ['', '']\r\n]);\r\n\r\nexport const RECOMMEND_ABBREV_EN_MAP = new Map([\r\n    ['HP%', 'HP'], ['%', 'AT'], ['%', 'DF'], ['', 'EM'],\r\n    ['', 'CR'], ['', 'CD'], ['', 'ER'], ['', 'HE'],\r\n    ['', 'Py'], ['', 'Hy'], ['', 'An'], ['', 'El'], ['', 'De'], ['', 'Cr'], ['', 'Ge'], ['', 'Ph'],\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_MAP = new Map([\r\n    ['HP', 'HP'],\r\n    ['', 'ATK'],\r\n    ['', 'DEF'],\r\n    ['', 'ElementalMastery'],\r\n    ['', 'CritRate'],\r\n    ['', 'CritDMG'],\r\n    ['', 'EnergyRecharge'],\r\n    ['', 'Pyro'],\r\n    ['', 'Hydro'],\r\n    ['', 'Anemo'],\r\n    ['', 'Electro'],\r\n    ['', 'Dendro'],\r\n    ['', 'Cryo'],\r\n    ['', 'Geo'],\r\n    ['', 'Physical'],\r\n    ['', 'Healing'],\r\n    ['HP%', 'HPp'],\r\n    ['%', 'ATKp'],\r\n    ['%', 'DEFp']\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP = new Map();\r\nARTIFACT_STAT_JA_EN_ABBREV_MAP.forEach((value, key) => {\r\n    ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP.set(value, key);\r\n});\r\n\r\nexport const GENSEN_MASTER_LIST = [\r\n    {\r\n        key: '',\r\n        values: [7, 7, 7, 7],\r\n        counts: [0, 0, 0, 0],\r\n    },\r\n    {\r\n        key: '',\r\n        values: [3, 3, 3, 3],\r\n        counts: [7, 4, 4, 4],\r\n    },\r\n    {\r\n        key: '1',\r\n        values: [3, 3, 3, 3],\r\n        counts: [8, 5, 5, 4],\r\n    },\r\n    {\r\n        key: '3',\r\n        values: [3, 3, 3, 3],\r\n        counts: [11, 8, 7, 4],\r\n    },\r\n    {\r\n        key: '',\r\n        values: [1, 1, 1, 1],\r\n        counts: [14, 11, 10, 4],\r\n    },\r\n];\r\nfor (const gensen of GENSEN_MASTER_LIST) {\r\n    for (let i = gensen.values.length; i < NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n        gensen.values.push(gensen.values[0]);\r\n    }\r\n    for (let i = gensen.counts.length; i < NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n        gensen.counts.push(0);\r\n    }\r\n}\r\nexport type TGensen = { key: string; values: number[]; counts: number[] };\r\n\r\nexport const ARTIFACT_CAT_NAMES = {\r\n    '1': 'flower_of_life',\r\n    '2': 'plume_of_death',\r\n    '3': 'sands_of_eon',\r\n    '4': 'goblet_of_eonothem',\r\n    '5': 'circlet_of_logos',\r\n};\r\n\r\nexport function getArtifactIconUrl(setname: string, opt_cat_id: any = '1') {\r\n    let result = IMG_SRC_DUMMY;\r\n    if (setname in ARTIFACT_SET_MASTER) {\r\n        result = (ARTIFACT_SET_MASTER as any)[setname].icon_url;\r\n        if (!result.startsWith('data:image/gif;')) {\r\n            result = result.replace(/.png$/, '');\r\n            result += '/' + (ARTIFACT_CAT_NAMES as any)[String(opt_cat_id)] + '.png';\r\n        }\r\n    }\r\n    return result;\r\n}\r\n","import _ from \"lodash\";\r\n\r\n// 21\r\nexport type TParticleInfo = number | (number | undefined)[];\r\nexport type TParticleEntry = {\r\n    [key: string]: TParticleInfo,\r\n};\r\nexport type TParticleMaster = {\r\n    [key: string]: TParticleEntry,\r\n};\r\n\r\nexport const SP_SELF = 0x1000;      // =[0]       \r\nexport const SP_NEXT = 0x1001;      // =[0]       \r\nexport const SP_LONG = 0x1002;      // =[0]*[2]   \r\nexport const SP_SHRT = 0x1003;      // =[0]       \r\nconst C0 = 0x2000;\r\nconst C1 = 0x2001;\r\nconst C2 = 0x2002;\r\nconst C4 = 0x2004;\r\nconst C6 = 0x2006;\r\n// \r\n// , \r\n// , , \r\n// , , , , , \r\n// , , , , , , , , , , , \r\nconst PARTICLE_MASTER: TParticleMaster = {\r\n    '': {\r\n        'E.Press': 3.5,\r\n        'E.Hold': 3.5,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 5,\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 30, 20, 2.5],   // CT2.5s\r\n    },\r\n    '': {\r\n        'E': [3, SP_SELF, 10, 16, 2, C1, 3, SP_SELF, 14, 16, 2],    // CT2s\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 0, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': 5,\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 12, 20, 2.5, C2, 1, SP_LONG, 18, 20, 2.5],    //  CT2.5s\r\n    },\r\n    '': {\r\n        'E.Press': [6, SP_SELF],   // 11 CT1.6s\r\n        'E.Hold': [6, SP_SELF],    // 11 CT1.6s\r\n    },\r\n    '': {\r\n        'E': [5, SP_SELF, 10, 16, 2, C6, 5, SP_SELF, 12, 18, 2],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_LONG, 25, 5, 7],     // CT7s\r\n        'E.Hold': [3, SP_LONG, 25, 6, 7],      // CT7s\r\n    },\r\n    '': {\r\n        'E': [1.5 + 1 + 1 + 1, SP_SELF]\r\n    },\r\n    '': {\r\n        'E': 3,\r\n        'E(burst)': 1 + 1 / 3,\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, 0, 10, undefined],\r\n        'E.Hold': [4, SP_NEXT, 0, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_SELF, 6, 12, 0],\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 14, 4, 2.5],    // CT2.5s\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, 10, 10, undefined],\r\n        'E.Hold': [4, SP_NEXT, 15, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_LONG, 12, 20, 2],    // per damage CT2s\r\n    },\r\n    '': {\r\n        'E': [0.5, SP_LONG, 25, 10, 0.9],   // per damage CT0.9s\r\n    },\r\n    '': {\r\n        'E': 5,\r\n    },\r\n    '': {\r\n        'E': [4, SP_SELF, 10, 18, 2],   // CT2s\r\n    },\r\n    '': {\r\n        'E': 4.5,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 1.5,\r\n        'E.Hold': 2.5,\r\n    },\r\n    '': {\r\n        'E': [2.5 * 2, SP_SELF, 9, 16, undefined],\r\n    },\r\n    '': {\r\n        'E': 3,\r\n        'E(burst)': 0,\r\n    },\r\n    '': {\r\n        'E': [2 * 2, SP_SHRT, 6, 10, undefined]\r\n    },\r\n    '': {\r\n        'E.Press': [0.67, SP_LONG, 30, 4, 2],   // 10.67 CT2s\r\n        'E.Hold': [0.67, SP_LONG, 30, 4, 2],    // 10.67 CT2s\r\n    },\r\n    '': {\r\n        'E.Press': [0.5, SP_LONG, 20, 4, 1.5],  // CT1.5s\r\n        'E.Hold': [0.5, SP_LONG, 20, 12, 1.5],  // CT1.5s\r\n    },\r\n    '': {\r\n        'E': [1 / 3 * 9, SP_SELF],              // 9s\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 2.5,\r\n        'E.Hold': 2.5,\r\n    },\r\n    '': {\r\n        'E.Press': [3.33, SP_SHRT, 5, 12, undefined],\r\n        'E.Hold': [3.33, SP_SHRT, 5, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': 0,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E': 2.67,\r\n    },\r\n    '': {\r\n        'E': 2,\r\n        'E(burst)': 1,\r\n    },\r\n    '': {\r\n        'E.Press': 4,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 3 + 1,\r\n    },\r\n    '': {\r\n        'E': 2,\r\n    },\r\n    '': {\r\n        'E.Press': 4,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': [1, SP_LONG, 10, 15, 1.5],\r\n        'E.Hold': [1, SP_LONG, 10, 15, 1.5]\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, 18, 6, 5.5],      // CT5.5s\r\n    },\r\n    '': {\r\n        'E': [1.33, SP_LONG, 12, 12, 3]     // CT3s\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3\r\n    },\r\n    '': {\r\n        'E': 2,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E': 4,     // 2:0-1/2.5:2-3/3:4=\r\n    },\r\n    '': {\r\n        'E': [0.45, SP_LONG, 12, 15, 1.5, C2, 0.45, SP_LONG, 15, 15, 1.5],  // CT1.5s\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 2,\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 0.8 * 2,\r\n        'E.Hold': 0.8 * 5,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E': 0,\r\n    },\r\n    '': {\r\n        'E.Press': 2.25,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_LONG, 10, 25, 1, C6, 0.67, SP_LONG, 12, 25, 1],\r\n    },\r\n    '': {\r\n        'E': 3.33,\r\n    },\r\n    '': {\r\n        'E': [4.5, SP_NEXT, 15, 21, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E': [4, SP_SHRT, 8, 12, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 4,\r\n        'E.Press(burst)': 0,\r\n    },\r\n    '': {\r\n        'E': [0, SP_NEXT, 15, 32, undefined, C2, 0, SP_NEXT, 15, 27.2, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': 0,\r\n        'E.Hold': 5,\r\n    },\r\n    '': {\r\n        'E': 2.67,\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_SHRT, 8, 15, undefined],\r\n        'E.Hold': [4, SP_SHRT, 8, 15, undefined],\r\n    },\r\n    '()': {\r\n        'E.Press': 3.33,\r\n        'E.Hold': 3.33,\r\n    },\r\n    '()': {\r\n        'E': 2.5,\r\n    },\r\n    '()': {\r\n        'E': 1,\r\n    },\r\n    '()': {\r\n        'E.Press': 3.33,\r\n        'E.Hold': 3.33,\r\n    },\r\n    '()': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3.33,\r\n    },\r\n}\r\n\r\nObject.keys(PARTICLE_MASTER).forEach(key => {\r\n    const pentry = PARTICLE_MASTER[key];\r\n    Object.keys(pentry).forEach(key2 => {\r\n        const pinfo = pentry[key2];\r\n        if (_.isNumber(pinfo)) {\r\n            return;\r\n        }\r\n        if (_.isArray(pinfo)) {\r\n            if (pinfo.length === 2 || pinfo.length === 5 || pinfo.length === 11) {\r\n                const receiveTypeArr: (number | undefined)[] = [];\r\n                receiveTypeArr.push(pinfo[1]);\r\n                if (pinfo.length === 11) {\r\n                    receiveTypeArr.push(pinfo[7]);\r\n                }\r\n                if (pinfo.filter(s => s !== undefined && !_.isNumber(s)).length === 0\r\n                    && receiveTypeArr.filter(s => s === undefined || ![SP_SELF, SP_NEXT, SP_LONG, SP_SHRT].includes(s)).length === 0\r\n                    && (pinfo.length !== 11 || (pinfo[5] !== undefined && [C1, C2, C4, C6].includes(pinfo[5])))) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        console.error(key, key2, pinfo);\r\n    })\r\n})\r\n\r\n/**    */\r\nexport const CHARACTER_Q_TO_E_ARR = ['', ''];\r\n\r\n/**  */\r\nexport const CHARACTER_E_UNTIL_MAP = new Map<string, Map<string[], number>>();\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E'], 2],]));            // EEE\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E', 'C'], 1],]));             // E(E|C)\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E', 'N'], 3],]));         // E(E|N){3}\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E'], 1], [['N'], 4],]));  // E(E|N{4})\r\n\r\n/**  */\r\nexport const CHARACTER_E_DELAY_MAP = new Map<string, string[]>();\r\nCHARACTER_E_DELAY_MAP.set('', ['C']);\r\nCHARACTER_E_DELAY_MAP.set('', ['C']);\r\n\r\n/**  */\r\nexport const CHARACTER_Q_NOT_RECHARGEABLE = ['', ''];\r\n\r\nexport function getElementalSkillActions(character: string) {\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    return particleMaster ? Object.keys(particleMaster).filter(action => action.startsWith('E') && action.indexOf('(burst)') == -1) : ['E'];\r\n}\r\n\r\nexport function getParticleInfo(character: string, action: string, constellation = 0, isBursting = false) {\r\n    const result: TParticleInfo = [0, SP_NEXT, 0, undefined, undefined];    // , , , , CT\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    if (particleMaster) {\r\n        const keyArr: string[] = [];\r\n        if (isBursting) {\r\n            keyArr.push(action + '(burst)');\r\n        }\r\n        keyArr.push(action);\r\n        for (const key of keyArr) {\r\n            if (key in particleMaster) {\r\n                const work = particleMaster[key];\r\n                if (_.isNumber(work)) {\r\n                    result[0] = work;\r\n                } else if (_.isArray(work)) {\r\n                    let start = 0;\r\n                    if (work.length > 5 && work[5] !== undefined && work[5] <= (constellation + C0)) {\r\n                        start = 6;\r\n                    }\r\n                    for (let i = 0; i < 5; i++) {\r\n                        if (work.length > (i + start)) {\r\n                            result[i] = work[i + start];\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleNumFromInfo(particleInfo: TParticleInfo, leftTime?: number) {\r\n    let result = 0;\r\n    if (_.isNumber(particleInfo)) {\r\n        result = particleInfo;\r\n    } else {\r\n        result = particleInfo[0] ?? 0;\r\n        const receiveType = getReceiveTypeFromInfo(particleInfo);\r\n        if ([SP_LONG].includes(receiveType)) {\r\n            const particleCt = getParticleCooltimeFromInfo(particleInfo);\r\n            if (particleCt) {\r\n                result /= particleCt;\r\n            }\r\n            let duration = getDurationFromInfo(particleInfo);\r\n            if (duration > 0) {\r\n                if (leftTime !== undefined && duration > leftTime) {\r\n                    duration = Math.max(0, leftTime);\r\n                }\r\n                result *= duration;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getReceiveTypeFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 1) ? particleInfo[1] ?? SP_NEXT : SP_NEXT;\r\n}\r\n\r\n/**  */\r\nexport function getDurationFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 2) ? particleInfo[2] ?? 0 : 0;\r\n}\r\n\r\n/**  */\r\nexport function getCooltimeFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 3) ? particleInfo[3] : undefined;\r\n}\r\n\r\n/**  */\r\nexport function getParticleCooltimeFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 4) ? particleInfo[4] : undefined;\r\n}\r\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-fe60a4d2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"artifact\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"artifact\"\n}\nconst _hoisted_3 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_4 = { class: \"control\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_7 = { class: \"with-tooltip\" }\nconst _hoisted_8 = [\"src\", \"alt\"]\nconst _hoisted_9 = { class: \"tooltip\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"edit-mainstat\"\n}\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = [\"step\"]\nconst _hoisted_13 = {\n  key: 1,\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_14 = { key: 2 }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"5\" }, \" 5 \", -1))\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"4\" }, \" 4 \", -1))\nconst _hoisted_17 = [\n  _hoisted_15,\n  _hoisted_16\n]\nconst _hoisted_18 = { key: 3 }\nconst _hoisted_19 = { style: {\"width\":\"55%\"} }\nconst _hoisted_20 = { class: \"artifact-substat\" }\nconst _hoisted_21 = { class: \"right\" }\nconst _hoisted_22 = [\"onUpdate:modelValue\"]\nconst _hoisted_23 = [\"value\", \"disabled\"]\nconst _hoisted_24 = { class: \"right\" }\nconst _hoisted_25 = [\"onUpdate:modelValue\", \"step\"]\nconst _hoisted_26 = { key: 1 }\nconst _hoisted_27 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_28 = {\n  key: 0,\n  class: \"score\"\n}\nconst _hoisted_29 = { class: \"control\" }\nconst _hoisted_30 = {\n  key: 0,\n  type: \"button\"\n}\nconst _hoisted_31 = {\n  key: 0,\n  class: \"material-symbols-outlined\",\n  style: {\"color\":\"yellow\"}\n}\nconst _hoisted_32 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_33 = { class: \"with-tooltip\" }\nconst _hoisted_34 = [\"src\", \"alt\"]\nconst _hoisted_35 = { class: \"tooltip\" }\nconst _hoisted_36 = {\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_37 = { style: {\"width\":\"55%\"} }\nconst _hoisted_38 = { class: \"artifact-substat\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ArtifactSetSelect = _resolveComponent(\"ArtifactSetSelect\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_ctx.control == 'editable')\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_2, [\n          _createElementVNode(\"tr\", null, [\n            _createElementVNode(\"td\", _hoisted_3, [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createElementVNode(\"button\", {\n                  type: \"button\",\n                  onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.isEditing = !_ctx.isEditing))\n                }, [\n                  (_ctx.isEditing)\n                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \" edit_off \"))\n                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \" edit \"))\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_7, [\n                _createElementVNode(\"img\", {\n                  class: \"artifact-icon\",\n                  src: _ctx.artifactImgSrc,\n                  alt: _ctx.displayName(_ctx.copiedArtifact.name),\n                  onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.artifactIconOnClick()))\n                }, null, 8, _hoisted_8),\n                _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n              ]),\n              (_ctx.isEditing)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                    _withDirectives(_createElementVNode(\"select\", {\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.copiedArtifact.mainStat) = $event)),\n                      onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                    }, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.mainStatOptions, (option) => {\n                        return (_openBlock(), _createElementBlock(\"option\", {\n                          key: option,\n                          value: option\n                        }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_11))\n                      }), 128))\n                    ], 544), [\n                      [_vModelSelect, _ctx.copiedArtifact.mainStat]\n                    ]),\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"number\",\n                      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.copiedArtifact.mainStatValue) = $event)),\n                      step: _ctx.statStep(_ctx.copiedArtifact.mainStat),\n                      min: \"0\",\n                      onChange: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                    }, null, 40, _hoisted_12), [\n                      [_vModelText, _ctx.copiedArtifact.mainStatValue]\n                    ])\n                  ]))\n                : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' + _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                _ctx.copiedArtifact.mainStatValue)), 1)),\n              (_ctx.isEditing)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                    _withDirectives(_createElementVNode(\"select\", {\n                      class: \"star\",\n                      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.copiedArtifact.rarity) = $event)),\n                      onChange: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.starOnChange && _ctx.starOnChange(...args)))\n                    }, _hoisted_17, 544), [\n                      [_vModelSelect, _ctx.copiedArtifact.rarity]\n                    ])\n                  ]))\n                : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                      return (_openBlock(), _createElementBlock(\"img\", {\n                        class: \"star\",\n                        src: \"images/star.png\",\n                        key: dummy\n                      }))\n                    }), 128))\n                  ]))\n            ]),\n            _createElementVNode(\"td\", _hoisted_19, [\n              _createElementVNode(\"table\", _hoisted_20, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                  return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                    (_ctx.isEditing)\n                      ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                          _createElementVNode(\"td\", _hoisted_21, [\n                            _withDirectives(_createElementVNode(\"select\", {\n                              \"onUpdate:modelValue\": ($event: any) => ((subStat.name) = $event),\n                              onChange: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                            }, [\n                              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.subStatOptions, (option) => {\n                                return (_openBlock(), _createElementBlock(\"option\", {\n                                  key: option,\n                                  value: option,\n                                  disabled: _ctx.subStatOptionDisabled(option, subStat.name)\n                                }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_23))\n                              }), 128))\n                            ], 40, _hoisted_22), [\n                              [_vModelSelect, subStat.name]\n                            ])\n                          ]),\n                          _createElementVNode(\"td\", _hoisted_24, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                              type: \"number\",\n                              \"onUpdate:modelValue\": ($event: any) => ((subStat.value) = $event),\n                              step: _ctx.statStep(subStat.name),\n                              min: \"0\",\n                              onChange: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                            }, null, 40, _hoisted_25), [\n                              [_vModelText, subStat.value]\n                            ])\n                          ])\n                        ], 64))\n                      : (_openBlock(), _createElementBlock(\"td\", _hoisted_26, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1))\n                  ]))\n                }), 128))\n              ])\n            ])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"table\", {\n          key: 1,\n          class: \"artifact\",\n          onClick: _cache[10] || (_cache[10] = ($event: any) => (_ctx.selectOnClick()))\n        }, [\n          _createElementVNode(\"tr\", null, [\n            _createElementVNode(\"td\", _hoisted_27, [\n              (_ctx.score)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, _toDisplayString(Math.round(_ctx.score * 10) / 10), 1))\n                : _createCommentVNode(\"\", true),\n              _createElementVNode(\"div\", _hoisted_29, [\n                (_ctx.control == 'selectable')\n                  ? (_openBlock(), _createElementBlock(\"button\", _hoisted_30, [\n                      (_ctx.selected)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_31, \" select_check_box \"))\n                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_32, \" check_box_outline_blank \"))\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _createElementVNode(\"div\", _hoisted_33, [\n                _createElementVNode(\"img\", {\n                  class: \"artifact-icon\",\n                  src: _ctx.artifactImgSrc,\n                  alt: _ctx.displayName(_ctx.copiedArtifact.name)\n                }, null, 8, _hoisted_34),\n                _createElementVNode(\"div\", _hoisted_35, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n              ]),\n              _createElementVNode(\"div\", _hoisted_36, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' + _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                _ctx.copiedArtifact.mainStatValue)), 1),\n              _createElementVNode(\"div\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                  return (_openBlock(), _createElementBlock(\"img\", {\n                    class: \"star\",\n                    src: \"images/star.png\",\n                    key: dummy\n                  }))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"td\", _hoisted_37, [\n              _createElementVNode(\"table\", _hoisted_38, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                  return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                    _createElementVNode(\"td\", null, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1)\n                  ]))\n                }), 128))\n              ])\n            ])\n          ])\n        ])),\n    _withDirectives(_createElementVNode(\"div\", null, [\n      _createVNode(_component_ArtifactSetSelect, {\n        visible: true,\n        index: 1,\n        \"artifact-set\": _ctx.artifact.setname,\n        \"artifact-set-masters\": _ctx.artifactSetMasters,\n        cat_id: _ctx.artifact.cat_id,\n        \"onUpdate:artifactSet\": _ctx.updateArtifactSet\n      }, null, 8, [\"artifact-set\", \"artifact-set-masters\", \"cat_id\", \"onUpdate:artifactSet\"])\n    ], 512), [\n      [_vShow, _ctx.isListShow]\n    ])\n  ]))\n}","\r\nimport _ from 'lodash';\r\nimport { overwriteObject } from \"@/common\";\r\nimport { ARTIFACT_SET_MASTER_DUMMY, TArtifact, ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY } from \"@/input\";\r\nimport { ARTIFACT_SET_MASTER, TArtifactSetEntry, TArtifactSetKey, getArtifactIconUrl } from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\nimport ArtifactSetSelect from \"./ArtifactSetSelect.vue\";\r\n\r\nexport default defineComponent({\r\n  name: 'ArtifactItem',\r\n  props: {\r\n    artifact: { type: Object as PropType<TArtifact>, required: true },\r\n    id: { type: Number },\r\n    control: String,\r\n    initial: Boolean,\r\n    selected: Boolean,\r\n    score: Number,\r\n  },\r\n  components: {\r\n    ArtifactSetSelect,\r\n  },\r\n  emits: ['update:artifact', 'select:artifact'],\r\n  setup(props, context) {\r\n    const { displayName, displayStatValue, percent } = CompositionFunction();\r\n\r\n    const copiedArtifact = reactive(_.cloneDeep(props.artifact));\r\n    const artifactSetMasters = reactive([ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[]);\r\n    const isEditing = ref(false);\r\n    const isSelected = ref(false);\r\n    const isListShow = ref(false);\r\n\r\n    const artifactImgSrc = computed(() => {\r\n      return getArtifactIconUrl(copiedArtifact.setname, copiedArtifact.cat_id);\r\n    });\r\n\r\n    const MAINSTAT_CAT_ARR = {\r\n      '1': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '2': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '3': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '4': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '5': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n    };\r\n\r\n    const mainStatOptions = computed(() => {\r\n      return (MAINSTAT_CAT_ARR as any)[copiedArtifact.cat_id];\r\n    });\r\n\r\n    const subStatOptions = computed(() => {\r\n      return ARRAY;\r\n    });\r\n\r\n    const statStep = (stat: string) => {\r\n      return percent(stat) ? 0.1 : 1;\r\n    };\r\n\r\n    const subStatOptionDisabled = ((value: string, selected: string) => {\r\n      if (value == selected) return false;\r\n      const work = copiedArtifact.subStats.map(s => s.name);\r\n      return work.includes(value);\r\n    });\r\n\r\n    const onChange = () => {\r\n      context.emit('update:artifact', props.id, copiedArtifact);\r\n    };\r\n\r\n    const starOnChange = () => {\r\n      copiedArtifact.rarity = Number(copiedArtifact.rarity);\r\n    }\r\n\r\n    const artifactIconOnClick = () => {\r\n      if (isEditing.value) {\r\n        isListShow.value = !isListShow.value;\r\n      } else {\r\n        isListShow.value = false;\r\n      }\r\n    };\r\n\r\n    const selectOnClick = () => {\r\n      if (props.control === 'selectable') {\r\n        context.emit('select:artifact', props.id);\r\n      }\r\n    };\r\n\r\n    const updateArtifactSet = (artifactSet: TArtifactSetKey) => {\r\n      copiedArtifact.setname = artifactSet;\r\n      const master = ARTIFACT_SET_MASTER[artifactSet];\r\n      copiedArtifact.rarity = master.;\r\n      if ('artifact_list' in master) {\r\n        copiedArtifact.name = master.artifact_list[copiedArtifact.cat_id - 1];\r\n      }\r\n      isListShow.value = false;\r\n      onChange();\r\n    };\r\n\r\n    function onLoad() {\r\n      if (props.initial !== undefined) {\r\n        if (props.control === 'editable') {\r\n          isEditing.value = props.initial;\r\n        } else if (props.control === 'selectable') {\r\n          isSelected.value = props.initial;\r\n        }\r\n      }\r\n    }\r\n    onLoad();\r\n\r\n    watch(props, (newVal, oldVal) => {\r\n      overwriteObject(copiedArtifact, newVal.artifact);\r\n      if (newVal.initial != oldVal.initial) {\r\n        onLoad();\r\n      }\r\n    });\r\n\r\n    return {\r\n      displayName, displayStatValue,\r\n\r\n      copiedArtifact,\r\n      artifactSetMasters,\r\n      isEditing,\r\n      isSelected,\r\n      isListShow,\r\n\r\n      artifactImgSrc,\r\n      mainStatOptions,\r\n      subStatOptions,\r\n      subStatOptionDisabled,\r\n      statStep,\r\n\r\n      onChange,\r\n      starOnChange,\r\n      artifactIconOnClick,\r\n      updateArtifactSet,\r\n      selectOnClick,\r\n    }\r\n  }\r\n});\r\n","import { render } from \"./ArtifactItem.vue?vue&type=template&id=fe60a4d2&scoped=true&ts=true\"\nimport script from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactItem.vue?vue&type=style&index=0&id=fe60a4d2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fe60a4d2\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-91b28a50\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"title\" }\nconst _hoisted_3 = { class: \"description\" }\nconst _hoisted_4 = { class: \"select-list\" }\nconst _hoisted_5 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_6 = { class: \"tooltip\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"table\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.artifactSetEffects, (item) => {\n            return (_openBlock(), _createElementBlock(_Fragment, { key: item }, [\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"th\", _hoisted_2, _toDisplayString(_ctx.displayName(item.key)), 1)\n              ]),\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_3, _toDisplayString(item.value), 1)\n              ])\n            ], 64))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('artifact-set' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: _ctx.getArtifactIconUrl(item.key, _ctx.cat_id),\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.$emit('update:artifact-set', item.key))\n              }, null, 10, _hoisted_5),\n              _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.displayName(item.key)), 1)\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","\r\nimport {\r\n  ARTIFACT_SET_MASTER_LIST,\r\n  getArtifactIconUrl,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n  TArtifactSetEntry,\r\n} from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive } from \"vue\";\r\nimport CompositionFunction from './CompositionFunction.vue';\r\n\r\nexport default defineComponent({\r\n  name: \"ArtifactSetSelect\",\r\n  props: {\r\n    visible: { type: Boolean, required: true },\r\n    index: { type: Number, required: true },\r\n    artifactSet: { type: String, required: true },\r\n    artifactSetMasters: { type: Array as PropType<TArtifactSetEntry[]>, required: true },\r\n    cat_id: { type: Number },\r\n  },\r\n  emits: [\"update:artifact-set\"],\r\n  setup(props) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const bgImageClass = (item: TArtifactSetEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TArtifactSetEntry) => {\r\n      return item.key == props.artifactSet ? \" selected\" : \"\";\r\n    };\r\n    const artifactSetMastersRea = reactive(props.artifactSetMasters);\r\n\r\n    const filteredList = computed(() => {\r\n      return ARTIFACT_SET_MASTER_LIST as TArtifactSetEntry[];\r\n    });\r\n\r\n    const artifactSetEffects = computed(() => {\r\n      const result = [] as any;\r\n      if (artifactSetMastersRea.length > 0) {\r\n        if (\"2\" in artifactSetMastersRea[0]) {\r\n          result.push({\r\n            key: artifactSetMastersRea[0].key + \" \" + \"2\",\r\n            value: artifactSetMastersRea[0][\"2\"]?.,\r\n          });\r\n        }\r\n        if (artifactSetMastersRea.length > 1) {\r\n          if (artifactSetMastersRea[0].key == artifactSetMastersRea[1].key) {\r\n            if (\"4\" in artifactSetMastersRea[0]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[0].key + \" \" + \"4\",\r\n                value: artifactSetMastersRea[0][\"4\"]?.,\r\n              });\r\n            }\r\n          } else {\r\n            if (\"2\" in artifactSetMastersRea[1]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[1].key + \" \" + \"2\",\r\n                value: artifactSetMastersRea[1][\"2\"]?.,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    return {\r\n      displayName,\r\n      getArtifactIconUrl,\r\n\r\n      bgImageClass,\r\n      selectedClass,\r\n      filteredList,\r\n      artifactSetEffects,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./ArtifactSetSelect.vue?vue&type=template&id=91b28a50&scoped=true&ts=true\"\nimport script from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactSetSelect.vue?vue&type=style&index=0&id=91b28a50&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-91b28a50\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, vShow as _vShow, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6b0e72ca\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"select-list\" }\nconst _hoisted_3 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_4 = [\"src\", \"alt\"]\nconst _hoisted_5 = { class: \"select-list\" }\nconst _hoisted_6 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = { class: \"select-list\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"ul\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.elementList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.elementCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.elementCheckList))\n                }, null, 40, _hoisted_3), [\n                  [_vModelCheckbox, _ctx.elementCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.elementSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_4)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.weaponList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.weaponCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.weaponCheckList))\n                }, null, 40, _hoisted_6), [\n                  [_vModelCheckbox, _ctx.weaponCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.weaponSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_7)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('character' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: item.icon_url,\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.characterOnClick(item.key))\n              }, null, 10, _hoisted_9),\n              _createElementVNode(\"div\", _hoisted_10, _toDisplayString(_ctx.displayName(item.key)), 1),\n              _createElementVNode(\"img\", {\n                class: \"vision\",\n                src: _ctx.visionSrc(item),\n                alt: item.\n              }, null, 8, _hoisted_11),\n              _withDirectives(_createElementVNode(\"div\", { class: \"selection-number\" }, _toDisplayString(_ctx.selectionNumber(item.key)), 513), [\n                [_vShow, _ctx.selectionNumber(item.key)]\n              ])\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","\r\nimport {\r\n  TCharacterEntry,\r\n  ELEMENT_IMG_SRC,\r\n  TVisionKey,\r\n  WEAPON_IMG_SRC,\r\n  TWeaponTypeKey,\r\n  CHARACTER_MASTER_LIST,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n} from \"@/master\";\r\nimport { defineComponent, reactive, computed, PropType } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\n\r\ninterface ICheckList {\r\n  [key: string]: boolean;\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"CharacterSelect\",\r\n  props: {\r\n    character: { type: String },\r\n    characters: { type: Array as PropType<string[]> },\r\n    visible: { type: Boolean, required: true },\r\n  },\r\n  emits: [\"update:character\", \"update:characters\"],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const visionSrc = (item: TCharacterEntry) => ELEMENT_IMG_SRC[item.];\r\n    const bgImageClass = (item: TCharacterEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TCharacterEntry) => {\r\n      if (props.character && props.character == item.key) {\r\n        return \" selected\";\r\n      }\r\n      if (props.characters && props.characters.includes(item.key)) {\r\n        return \" selected\";\r\n      }\r\n      return \"\";\r\n    };\r\n\r\n    const elementList = Object.keys(ELEMENT_IMG_SRC) as TVisionKey[];\r\n    const elementSrc = (element: TVisionKey) => ELEMENT_IMG_SRC[element] as string;\r\n    const elementCheckList = reactive({}) as ICheckList;\r\n    for (let key of elementList) {\r\n      elementCheckList[key] = false;\r\n    }\r\n\r\n    const weaponList = Object.keys(WEAPON_IMG_SRC) as TWeaponTypeKey[];\r\n    const weaponSrc = (weapon: TWeaponTypeKey) => WEAPON_IMG_SRC[weapon] as string;\r\n    const weaponCheckList = reactive({}) as ICheckList;\r\n    for (let key of weaponList) {\r\n      weaponCheckList[key] = false;\r\n    }\r\n\r\n    const checkListOnChange = function (item: string, checkList: ICheckList) {\r\n      if (!checkList[item]) return;\r\n      Object.keys(checkList)\r\n        .filter((s) => s != item)\r\n        .forEach((key) => {\r\n          checkList[key] = false;\r\n        });\r\n    };\r\n\r\n    const filteredList = computed(() => {\r\n      const result = [];\r\n      const elementChecked =\r\n        Object.keys(elementCheckList).filter((s) => elementCheckList[s]).length > 0;\r\n      const weaponChecked =\r\n        Object.keys(weaponCheckList).filter((s) => weaponCheckList[s]).length > 0;\r\n      for (let entry of CHARACTER_MASTER_LIST as TCharacterEntry[]) {\r\n        if (elementChecked && !elementCheckList[entry.]) continue;\r\n        if (weaponChecked && !weaponCheckList[entry.]) continue;\r\n        result.push(entry);\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const selectionNumber = (character: string) => {\r\n      let result = \"\";\r\n      if (props.characters) {\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          result = String(index + 1);\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const characterOnClick = (character: string) => {\r\n      if (props.character) {\r\n        context.emit(\"update:character\", character);\r\n      }\r\n      if (props.characters) {\r\n        const characters: string[] = props.characters.map((s) => s);\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          characters[index] = \"\";\r\n        } else {\r\n          const blankIndex = props.characters.indexOf(\"\");\r\n          if (blankIndex != -1) {\r\n            characters[blankIndex] = character;\r\n          }\r\n        }\r\n        context.emit(\"update:characters\", characters);\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      visionSrc,\r\n      bgImageClass,\r\n      selectedClass,\r\n      elementList,\r\n      elementSrc,\r\n      elementCheckList,\r\n      weaponList,\r\n      weaponSrc,\r\n      weaponCheckList,\r\n      checkListOnChange,\r\n      filteredList,\r\n\r\n      selectionNumber,\r\n      characterOnClick,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./CharacterSelect.vue?vue&type=template&id=6b0e72ca&scoped=true&ts=true\"\nimport script from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./CharacterSelect.vue?vue&type=style&index=0&id=6b0e72ca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b0e72ca\"]])\n\nexport default __exports__","\r\nimport i18n from \"@/i18n\";\r\nimport { STAT_PERCENT_LIST } from \"@/input\";\r\nimport { nextTick } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\n\r\nexport default function CompositionFunction() {\r\n    const { t, te } = useI18n({\r\n        useScope: \"global\",\r\n    });\r\n\r\n    const localeList = [\r\n        { name: \"\", value: \"ja-jp\" },\r\n        { name: \"English\", value: \"en-us\" },\r\n        { name: \"\", value: \"zh-cn\" },\r\n        { name: \"\", value: \"zh-tw\" },\r\n        { name: \"\", value: \"ko-kr\" },\r\n        { name: \"Deutsch\", value: \"de-de\" },\r\n        { name: \"Espaol\", value: \"es-es\" },\r\n        { name: \"Franais\", value: \"fr-fr\" },\r\n        { name: \"Indonesia\", value: \"id-id\" },\r\n        { name: \"Portugus\", value: \"pt-pt\" },\r\n        { name: \"P\", value: \"ru-ru\" },\r\n        { name: '', value: 'th-th' },\r\n        { name: \"Ting Vit\", value: \"vi-vn\" },\r\n    ];\r\n\r\n    const setI18nLanguage = function (locale: string) {\r\n        i18n.global.locale.value = locale;\r\n        loadLocaleMessages(locale);\r\n        document.querySelector('html')?.setAttribute('lang', locale)\r\n    }\r\n\r\n    const loadLocaleMessages = async function (locale: string) {\r\n        if (locale != 'ja-jp') {\r\n            const messages = await fetch(`./locales/${locale}.json`).then(resp => resp.json());\r\n            i18n.global.setLocaleMessage(locale, messages);\r\n        }\r\n        return nextTick();\r\n    }\r\n\r\n    const displayName = function (key: any): string {\r\n        if (!key) return key;\r\n        if (i18n.global.locale.value === 'ja-jp') { // translate\r\n            let result = String(key);\r\n            if (['', '', '', ''].includes(result)) {\r\n                return result;\r\n            }\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace('', '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/^/, '');\r\n            return result;\r\n        }\r\n        if (te(key)) return t(key);\r\n        const re = new RegExp('(.*?)([\\\\s_\\\\(\\\\)/]+)(.*)');\r\n        let result = '';\r\n        let work = key;\r\n        while (work) {\r\n            const reRet = re.exec(work);\r\n            if (!reRet) {\r\n                result += t(work);\r\n                break;\r\n            }\r\n            if (reRet[1]) result += t(reRet[1]);\r\n            result += reRet[2];\r\n            work = reRet[3];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const percent = function (stat: string) {\r\n        const tempArr = stat.split('.');\r\n        let work = tempArr[0].replace(/V[1-3]$/, '');\r\n        let hasPercent = work.endsWith(\"%\") || STAT_PERCENT_LIST.includes(work);\r\n        if (!hasPercent) {\r\n            ['', '', '', ''].forEach(postfix => {\r\n                if (work.endsWith(postfix)) hasPercent = true;\r\n            })\r\n        }\r\n        return hasPercent ? '%' : '';\r\n    }\r\n\r\n    const displayStatName = function (stat: string) {\r\n        let result = stat.replace(/V[1-3]$/, '');\r\n        const tempArr = result.split('.');\r\n        if (tempArr.length == 1) {\r\n            result = displayName(result);\r\n            result = result.replace('', '')\r\n        } else if (i18n.global.locale.value === 'ja-jp') {\r\n            result = tempArr[tempArr.length - 1] + '' + displayName(tempArr[0]);\r\n        } else {\r\n            result = displayName(tempArr[tempArr.length - 1]) + ' ' + displayName(tempArr[0]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const displayStatValue = function (stat: string, value: number, opt_s?: number): string {\r\n        const myPercent = percent(stat);\r\n        let p = myPercent ? 10 : 1;\r\n        if (opt_s) p = Math.pow(10, opt_s);\r\n        return String(Math.round(value * p) / p) + myPercent;\r\n    }\r\n\r\n    const displayStatAbbrev = function (stat: string) {\r\n        let result = stat;\r\n        const tempArr = stat.split('.');\r\n        if (tempArr.length == 1) {\r\n            stat = stat.replace(/V\\d$/, '');\r\n            stat = stat.replace(/TOP$/, '');\r\n            if (stat.startsWith('')) stat = stat.replace(/^/, '');\r\n            if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            result = displayName(stat);\r\n        } else {\r\n            result = displayStatName(stat);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /** $event.target.valuetypescript */\r\n    const targetValue = function (event: Event) {\r\n        if (event.target instanceof HTMLInputElement) return event.target.value;\r\n        if (event.target instanceof HTMLSelectElement) return event.target.value;\r\n        return undefined;\r\n    }\r\n\r\n    const displayOptionName = function (name: string) {\r\n        return displayName(name.replace(/^required_/, \"\"));\r\n    }\r\n\r\n    return {\r\n        localeList,\r\n        setI18nLanguage,\r\n        loadLocaleMessages,\r\n        displayName,\r\n        displayStatName,\r\n        displayStatValue,\r\n        displayStatAbbrev,\r\n        targetValue,\r\n        displayOptionName,\r\n        percent,\r\n    }\r\n}\r\n","import script from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\nexport * from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"member\" }\nconst _hoisted_2 = { class: \"with-tooltip\" }\nconst _hoisted_3 = [\"src\", \"alt\"]\nconst _hoisted_4 = { class: \"tooltip\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = [\"src\", \"alt\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = {\n  key: 0,\n  class: \"stat-value\"\n}\nconst _hoisted_9 = { key: 1 }\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"src\"]\nconst _hoisted_12 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"member-img\",\n      onDblclick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.characterOnDblclick && _ctx.characterOnDblclick(...args)))\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"img\", {\n          class: _normalizeClass('character' + _ctx.characterImgClass),\n          src: _ctx.characterImgSrc,\n          alt: _ctx.displayName(_ctx.member.name)\n        }, null, 10, _hoisted_3),\n        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.displayName(_ctx.member.name)), 1)\n      ]),\n      _createElementVNode(\"img\", {\n        class: \"vision\",\n        src: _ctx.visionImgSrc,\n        alt: \"vision\"\n      }, null, 8, _hoisted_5),\n      _withDirectives(_createElementVNode(\"div\", { class: \"constellation\" }, _toDisplayString(_ctx.constellation), 513), [\n        [_vShow, _ctx.constellation]\n      ]),\n      (_ctx.member.tags[3])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: _normalizeClass('tag tag-3' + _ctx.tagColorClass(3))\n          }, _toDisplayString(_ctx.member.tags[3]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[2])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 1,\n            class: _normalizeClass('tag tag-2' + _ctx.tagColorClass(2))\n          }, _toDisplayString(_ctx.member.tags[2]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[1])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 2,\n            class: _normalizeClass('tag tag-1' + _ctx.tagColorClass(1))\n          }, _toDisplayString(_ctx.member.tags[1]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[0])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 3,\n            class: _normalizeClass('tag tag-0' + _ctx.tagColorClass(0))\n          }, _toDisplayString(_ctx.member.tags[0]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[0])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 4,\n            class: \"replacement replacement-0\",\n            src: _ctx.replaceImgSrc(0),\n            alt: _ctx.member.replacements[0]\n          }, null, 8, _hoisted_6))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[1])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 5,\n            class: \"replacement replacement-1\",\n            src: _ctx.replaceImgSrc(1),\n            alt: _ctx.member.replacements[1]\n          }, null, 8, _hoisted_7))\n        : _createCommentVNode(\"\", true)\n    ], 32),\n    (_ctx.displayStat)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString(_ctx.statValue), 1))\n      : _createCommentVNode(\"\", true),\n    (_ctx.showEquipment)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n          _createElementVNode(\"img\", {\n            class: \"weapon\",\n            src: _ctx.imgWeaponSrc,\n            alt: \"weapon\"\n          }, null, 8, _hoisted_10),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(0),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_11),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(1),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_12)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","\r\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\r\nimport { pushBuildinfoToSession, TStats } from \"@/input\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { ARTIFACT_SET_MASTER, CHARACTER_MASTER, ELEMENT_COLOR_CLASS, ELEMENT_IMG_SRC, IMG_SRC_DUMMY, STAR_BACKGROUND_IMAGE_CLASS, TArtifactSetEntry, TCharacterEntry, TCharacterKey, TElementColorClassKey, TWeaponEntry, WEAPON_MASTER } from \"@/master\";\r\nimport { getBuilddataFromStorage, TMember } from \"./team\";\r\n\r\nexport default defineComponent({\r\n  name: 'MemberItem',\r\n  props: {\r\n    member: { type: Object as PropType<TMember>, required: true },\r\n    displayStat: { type: String },\r\n    showEquipment: { type: Boolean },\r\n    statsObj: { type: Object as PropType<TStats> },\r\n    viewable: { type: Boolean },\r\n    tags: { type: Array as PropType<any[]> },\r\n    members: { type: Array as PropType<string[]> },\r\n    elementalResonance: { type: Array as PropType<string[]> },\r\n  },\r\n  setup(props) {\r\n    const { displayName, displayStatValue } = CompositionFunction();\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, () => {\r\n      watchCount.value++;\r\n    });\r\n\r\n    const characterMaster = computed(() => props.member.name ? (CHARACTER_MASTER[props.member.name as TCharacterKey] as TCharacterEntry) ?? undefined : undefined);\r\n    const characterImgSrc = computed(() => characterMaster.value?.icon_url ?? IMG_SRC_DUMMY);\r\n    const characterImgClass = computed(() => characterMaster.value?. ? (' ' + (STAR_BACKGROUND_IMAGE_CLASS as any)[String(characterMaster.value.)]) : '');\r\n    const visionImgSrc = computed(() => characterMaster.value?. ? (ELEMENT_IMG_SRC as any)[characterMaster.value.] : IMG_SRC_DUMMY);\r\n    const constellation = computed(() => (builddata.value ? builddata.value. : ''));\r\n    const builddata = computed(() => (props.member.name && props.member.buildname) ? getBuilddataFromStorage(props.member.name, props.member.buildname) : undefined);\r\n    const weaponMaster = computed((): TWeaponEntry => {\r\n      let result = undefined;\r\n      if (builddata.value) {\r\n        const weapon = builddata.value.;\r\n        if (weapon && characterMaster.value) {\r\n          result = (WEAPON_MASTER as any)[characterMaster.value.][weapon];\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const imgWeaponSrc = computed(() => weaponMaster.value?.icon_url ?? IMG_SRC_DUMMY);\r\n    const weaponName = computed(() => weaponMaster.value?.key ?? '');\r\n    const statValue = computed(() => {\r\n      watchCount.value;\r\n      let result = '-';\r\n      if (builddata.value) {\r\n        let stat = props.displayStat;\r\n        if (props.statsObj && stat) {\r\n          if (stat === '/') {\r\n            result = displayStatValue('', props.statsObj['']);\r\n            result += '/';\r\n            result += displayStatValue('', props.statsObj['']);\r\n          } else {\r\n            result = displayStatValue(stat, props.statsObj[stat]);\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const artifactSetMasters = computed((): TArtifactSetEntry[] => {\r\n      const result: TArtifactSetEntry[] = [];\r\n      if (builddata.value) {\r\n        for (let i = 0; i < 2; i++) {\r\n          const key = '' + (i + 1);\r\n          let value = builddata.value[key] ?? 'NONE';\r\n          result.push((ARTIFACT_SET_MASTER as any)[value]);\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const replaceImgSrc = (replIndex: number) => {\r\n      const name = replIndex < props.member.replacements.length ? props.member.replacements[replIndex] : undefined;\r\n      return name ? (CHARACTER_MASTER[name as TCharacterKey] as TCharacterEntry).icon_url : IMG_SRC_DUMMY;\r\n    };\r\n    const imgArtifactSetSrc = (index: number) => artifactSetMasters.value[index]?.image ?? IMG_SRC_DUMMY;\r\n    const artifactSetName = (index: number) => artifactSetMasters.value[index]?.key ?? '';\r\n    const tagColorClass = (index: number) =>\r\n      Object.keys(ELEMENT_COLOR_CLASS).map(key => ELEMENT_COLOR_CLASS[(key as TElementColorClassKey)]).includes(props.member.tags[index].toLowerCase()) ? ' ' + props.member.tags[index].toLowerCase() : '';\r\n\r\n    const characterOnDblclick = () => {\r\n      if (props.viewable) {\r\n        locate();\r\n      }\r\n    };\r\n\r\n    const locate = () => {\r\n      const member = props.member;\r\n      if (member?.name) {\r\n        if (confirm('' + member.name + '')) {\r\n          const teammembers = props.members?.filter(s => s != member.name);\r\n          pushBuildinfoToSession(member.name, member.buildname, undefined, teammembers);\r\n          window.open('./', '_blank');\r\n        }\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      characterImgSrc,\r\n      characterImgClass,\r\n      visionImgSrc,\r\n      constellation,\r\n      replaceImgSrc,\r\n      imgWeaponSrc,\r\n      weaponName,\r\n      imgArtifactSetSrc,\r\n      artifactSetName,\r\n      tagColorClass,\r\n      statValue,\r\n\r\n      characterOnDblclick,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./MemberItem.vue?vue&type=template&id=0f8e14be&ts=true\"\nimport script from \"./MemberItem.vue?vue&type=script&lang=ts\"\nexport * from \"./MemberItem.vue?vue&type=script&lang=ts\"\n\nimport \"./MemberItem.vue?vue&type=style&index=0&id=0f8e14be&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, createVNode as _createVNode, vShow as _vShow, vModelSelect as _vModelSelect, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7c066fb2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"Team Name\", -1))\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"Character Select Mode\", -1))\nconst _hoisted_4 = {\n  colspan: \"2\",\n  class: \"character-select-mode\"\n}\nconst _hoisted_5 = { key: 0 }\nconst _hoisted_6 = { key: 1 }\nconst _hoisted_7 = { class: \"member-tags\" }\nconst _hoisted_8 = { colspan: \"2\" }\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = { class: \"members\" }\nconst _hoisted_11 = { colspan: \"2\" }\nconst _hoisted_12 = { class: \"buildname-select\" }\nconst _hoisted_13 = [\"value\"]\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"Short Note\", -1))\nconst _hoisted_15 = { class: \"team-tags\" }\nconst _hoisted_16 = { colspan: \"2\" }\nconst _hoisted_17 = [\"onClick\"]\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"Tags\", -1))\nconst _hoisted_19 = { class: \"buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_CharacterSelect = _resolveComponent(\"CharacterSelect\")!\n  const _component_MemberItem = _resolveComponent(\"MemberItem\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (!_ctx.characterSelectMode)\n      ? (_openBlock(), _createBlock(_component_CharacterSelect, {\n          key: 0,\n          visible: true,\n          characters: _ctx.characters,\n          \"onUpdate:characters\": _ctx.updateCharacters\n        }, null, 8, [\"characters\", \"onUpdate:characters\"]))\n      : (_openBlock(), _createBlock(_component_CharacterSelect, {\n          key: 1,\n          visible: true,\n          characters: _ctx.replacements,\n          \"onUpdate:characters\": _ctx.updateReplacements\n        }, null, 8, [\"characters\", \"onUpdate:characters\"])),\n    _hoisted_1,\n    _createElementVNode(\"table\", null, [\n      _createElementVNode(\"tr\", null, [\n        _hoisted_2,\n        _createElementVNode(\"td\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.workTeam.name) = $event)),\n            type: \"text\",\n            minlength: \"1\",\n            maxlength: \"16\",\n            placeholder: \"INPUT TEAM NAME\"\n          }, null, 512), [\n            [_vModelText, _ctx.workTeam.name]\n          ])\n        ])\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _hoisted_3,\n        _createElementVNode(\"td\", null, [\n          _createElementVNode(\"button\", {\n            class: \"character-select-mode\",\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.characterSelectModeOnClick && _ctx.characterSelectModeOnClick(...args)))\n          }, _toDisplayString(_ctx.characterSelectMode ? 'REPLACEMENTS' : 'MEMBERS'), 1)\n        ])\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"td\", _hoisted_4, [\n          (!_ctx.characterSelectMode)\n            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"  \"))\n            : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(_ctx.selectedMemberName() + ''), 1))\n        ])\n      ]),\n      _createElementVNode(\"tr\", _hoisted_7, [\n        _createElementVNode(\"td\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.MEMBER_TAG_LIST, (tag) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: _normalizeClass('tag' + _ctx.tagSelectedClass(tag)),\n              key: tag,\n              onClick: ($event: any) => (_ctx.tagOnClick(tag))\n            }, _toDisplayString(tag), 11, _hoisted_9))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"tr\", _hoisted_10, [\n        _createElementVNode(\"td\", _hoisted_11, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.workTeam.members, (member) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: _normalizeClass('member' + _ctx.memberSelectedClass(member.id)),\n              key: member.id\n            }, [\n              _createVNode(_component_MemberItem, {\n                member: member,\n                onClick: ($event: any) => (_ctx.memberOnClick(member.id))\n              }, null, 8, [\"member\", \"onClick\"])\n            ], 2))\n          }), 128)),\n          _createElementVNode(\"div\", _hoisted_12, [\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.selectedMemberBuildname) = $event)),\n              onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.buildnameOnChange && _ctx.buildnameOnChange(...args)))\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.buildnames, (value) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: value,\n                  value: value\n                }, _toDisplayString(value), 9, _hoisted_13))\n              }), 128))\n            ], 544), [\n              [_vShow, _ctx.buildnames.length],\n              [_vModelSelect, _ctx.selectedMemberBuildname]\n            ])\n          ])\n        ])\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _hoisted_14,\n        _createElementVNode(\"td\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            class: \"description\",\n            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.workTeam.description) = $event)),\n            type: \"text\",\n            maxlength: \"40\",\n            placeholder: \"INPUT NOTE\"\n          }, null, 512), [\n            [_vModelText, _ctx.workTeam.description]\n          ])\n        ])\n      ]),\n      _createElementVNode(\"tr\", _hoisted_15, [\n        _createElementVNode(\"td\", _hoisted_16, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.workTeamTags, (tag) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: _normalizeClass(_ctx.teamTagSelected(tag) ? 'tag selected' : 'tag'),\n              key: tag,\n              onClick: ($event: any) => (_ctx.teamTagOnClick(tag))\n            }, _toDisplayString(tag), 11, _hoisted_17))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _hoisted_18,\n        _createElementVNode(\"td\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            class: \"team-tags\",\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.txtTeamTags) = $event)),\n            type: \"text\",\n            maxlength: \"40\",\n            placeholder: \"INPUT TAGS\",\n            onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.txtTeamTagsOnChange && _ctx.txtTeamTagsOnChange(...args)))\n          }, null, 544), [\n            [_vModelText, _ctx.txtTeamTags]\n          ])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_19, [\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.cancelOnClick && _ctx.cancelOnClick(...args)))\n      }, \"cancel\"),\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.okOnClick && _ctx.okOnClick(...args)))\n      }, \"ok\")\n    ])\n  ], 64))\n}","\r\nimport _ from 'lodash';\r\nimport { computed, defineComponent, PropType, reactive, ref, watch } from 'vue';\r\nimport { makeDefaultBuildname } from '@/input';\r\nimport CharacterSelect from '@/components/CharacterSelect.vue';\r\nimport { getBuildnameFromStorageKey, getBuildStorageKeys, TMember, TTeam } from './team';\r\nimport MemberItem from './MemberItem.vue';\r\n\r\nexport default defineComponent({\r\n  name: 'TeamEditorModal',\r\n  components: {\r\n    CharacterSelect,\r\n    MemberItem,\r\n  },\r\n  props: {\r\n    visible: { type: Boolean, required: true },\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    teamTags: { type: Array as PropType<string[]> },\r\n  },\r\n  emits: ['click:cancel', 'click:ok'],\r\n  setup(props, context) {\r\n    const characterSelectMode = ref(false); // =\r\n    const workTeam = reactive({\r\n      id: -1,\r\n      name: '',\r\n      members: [],\r\n      description: '',\r\n      rotation: [],\r\n      rotationDescription: '',\r\n      tags: [],\r\n    } as TTeam);\r\n    const selectedMemberId = ref(-1);\r\n    const MEMBER_TAG_LIST = ['Main-DPS', 'Sub-DPS', 'Support', 'Carry', 'Driver', 'Enabler', 'Healer', 'Shielder', 'Battery', 'Free', 'Flex'];\r\n    const selectedMemberBuildname = ref('' as string | undefined);\r\n    const replacementIndex = ref(-1);\r\n    const txtTeamTags = ref('');\r\n    const workTeamTags = reactive([] as string[]);\r\n\r\n    function duplicateTeam() {\r\n      workTeam.id = props.team.id;\r\n      workTeam.name = props.team.name;\r\n      const work: TMember[] = [];\r\n      for (let i = 0; i < props.team.members.length; i++) {\r\n        work.push({\r\n          id: i,\r\n          name: props.team.members[i].name,\r\n          buildname: props.team.members[i].buildname,\r\n          builddata: props.team.members[i].builddata,\r\n          tags: _.cloneDeep(props.team.members[i].tags.filter(s => MEMBER_TAG_LIST.includes(s))),\r\n          replacements: props.team.members[i].replacements ? [...props.team.members[i].replacements] : [],\r\n        });\r\n      }\r\n      workTeam.members.splice(0, workTeam.members.length, ...work);\r\n      workTeam.description = props.team.description;\r\n      workTeam.rotation = _.cloneDeep(props.team.rotation);\r\n      workTeam.tags = _.clone(props.team.tags);\r\n    }\r\n    duplicateTeam();\r\n    setupTxtTeamTags();\r\n\r\n    watch(props, (newVal) => {\r\n      if (newVal.team.members) {\r\n        duplicateTeam();\r\n        if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n          selectedMemberBuildname.value = workTeam.members[selectedMemberId.value].buildname;\r\n        }\r\n      }\r\n      if (newVal.teamTags) {\r\n        workTeamTags.splice(0, workTeamTags.length, ...newVal.teamTags);\r\n      }\r\n      setupTxtTeamTags();\r\n      characterSelectMode.value = false;\r\n    });\r\n\r\n    const characters = computed(() => workTeam.members.map((s) => s.name));\r\n\r\n    const replacements = computed(() => {\r\n      let result = [] as string[];\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        result = [...member.replacements];\r\n        for (let i = result.length; i < 2; i++) {\r\n          result.push('');\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const updateCharacters = (newCharacters: string[]) => {\r\n      for (let i = 0; i < newCharacters.length; i++) {\r\n        if (workTeam.members[i].name != newCharacters[i]) {\r\n          workTeam.members[i].tags = [];\r\n          workTeam.members[i].replacements = [];\r\n        }\r\n        workTeam.members[i].name = newCharacters[i];\r\n        if (workTeam.members[i].name) {\r\n          const workBuildnames = getBuildStorageKeys(workTeam.members[i].name).map(s => getBuildnameFromStorageKey(s));\r\n          if (workBuildnames.length) {\r\n            if (!workTeam.members[i].buildname || !workBuildnames.includes(workTeam.members[i].buildname as string)) {\r\n              workTeam.members[i].buildname = makeDefaultBuildname(workTeam.members[i].name);\r\n            }\r\n            if (i == selectedMemberId.value) {\r\n              selectedMemberBuildname.value = workTeam.members[i].buildname;\r\n            }\r\n          } else {\r\n            workTeam.members[i].buildname = undefined;\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    const characterSelectModeOnClick = () => {\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length && workTeam.members[selectedMemberId.value].name) {\r\n        characterSelectMode.value = !characterSelectMode.value;\r\n      }\r\n    };\r\n\r\n    const memberOnClick = (id: number) => {\r\n      selectedMemberId.value = id;\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        selectedMemberBuildname.value = member.buildname;\r\n        replacementIndex.value = -1;\r\n      }\r\n      characterSelectMode.value = false;  // \r\n    };\r\n    const memberSelectedClass = (id: number) =>\r\n      id == selectedMemberId.value ? ' selected' : '';\r\n    const selectedMemberName = () => {\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        return workTeam.members[selectedMemberId.value].name;\r\n      }\r\n      return '';\r\n    };\r\n\r\n    const tagOnClick = (tag: string) => {\r\n      if (selectedMemberId.value < 0 || selectedMemberId.value >= workTeam.members.length)\r\n        return;\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      if (member && member.name) {\r\n        const tags = member.tags;\r\n        if (tags) {\r\n          if (tags.includes(tag)) {\r\n            tags.splice(0, tags.length, ...tags.filter((s) => s != tag));\r\n          } else {\r\n            tags.push(tag);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    const tagSelectedClass = (tag: string) => {\r\n      let result = false;\r\n      if (selectedMemberId.value >= 0 || selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        if (member && member.name) {\r\n          result = member.tags.includes(tag);\r\n        }\r\n      }\r\n      return result ? ' selected' : '';\r\n    };\r\n\r\n    const buildnames = computed(() => {\r\n      let result: string[] = [];\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        const character = member.name;\r\n        if (character) {\r\n          result = getBuildStorageKeys(character).map((s) =>\r\n            getBuildnameFromStorageKey(s)\r\n          );\r\n          const defaultBuildname = makeDefaultBuildname(character);\r\n          if (result.includes(defaultBuildname)) {\r\n            const others = result.filter((s) => s != defaultBuildname).sort();\r\n            if (others.length) {\r\n              result = [defaultBuildname, ...others];\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const buildnameOnChange = () => {\r\n      if (selectedMemberId.value < 0 || selectedMemberId.value >= workTeam.members.length) return;\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      member.buildname = selectedMemberBuildname.value;\r\n    };\r\n\r\n    const updateReplacements = (newCharacters: string[]) => {\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      member.replacements = [...newCharacters];\r\n    };\r\n\r\n    function setupTxtTeamTags() {\r\n      txtTeamTags.value = workTeam.tags.join(' ');\r\n    }\r\n\r\n    const txtTeamTagsOnChange = () => {\r\n      let result: string[] = [];\r\n      if (txtTeamTags.value) {\r\n        result = txtTeamTags.value.split(/\\s+/).filter(tag => tag);\r\n      }\r\n      workTeam.tags = result;\r\n    }\r\n\r\n    const teamTagSelected = (tag: string) => workTeam.tags.includes(tag);\r\n\r\n    const teamTagOnClick = (tag: string) => {\r\n      if (teamTagSelected(tag)) {\r\n        workTeam.tags.splice(0, workTeam.tags.length, ...workTeam.tags.filter(s => s != tag));\r\n      } else {\r\n        workTeam.tags.push(tag);\r\n      }\r\n      setupTxtTeamTags();\r\n    }\r\n\r\n    const cancelOnClick = () => {\r\n      context.emit('click:cancel');\r\n    };\r\n\r\n    const okOnClick = () => {\r\n      context.emit('click:ok', workTeam);\r\n    };\r\n\r\n    return {\r\n      characterSelectMode,\r\n      characters,\r\n      replacements,\r\n      MEMBER_TAG_LIST,\r\n\r\n      characterSelectModeOnClick,\r\n      selectedMemberId,\r\n      selectedMemberName,\r\n\r\n      tagOnClick,\r\n      tagSelectedClass,\r\n\r\n      workTeam,\r\n      workTeamTags,\r\n      txtTeamTags,\r\n      txtTeamTagsOnChange,\r\n      teamTagSelected,\r\n      teamTagOnClick,\r\n      memberOnClick,\r\n      memberSelectedClass,\r\n      selectedMemberBuildname,\r\n      buildnames,\r\n      buildnameOnChange,\r\n      updateReplacements,\r\n\r\n      updateCharacters,\r\n      cancelOnClick,\r\n      okOnClick,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./TeamEditorModal.vue?vue&type=template&id=7c066fb2&scoped=true&ts=true\"\nimport script from \"./TeamEditorModal.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamEditorModal.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamEditorModal.vue?vue&type=style&index=0&id=7c066fb2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7c066fb2\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"title\" }\nconst _hoisted_2 = { class: \"name\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"handle\" }, \"\", -1)\nconst _hoisted_4 = { class: \"elemental-resonance\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = { class: \"members\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"res\"\n}\nconst _hoisted_8 = {\n  key: 1,\n  class: \"team-tags\"\n}\nconst _hoisted_9 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_10 = { class: \"description\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MemberItem = _resolveComponent(\"MemberItem\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass('team' + _ctx.selectedClass)\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"label\", _hoisted_2, [\n        _hoisted_3,\n        _createElementVNode(\"span\", null, _toDisplayString(_ctx.team.name), 1),\n        (_ctx.editable && _ctx.selected)\n          ? (_openBlock(), _createElementBlock(\"span\", {\n              key: 0,\n              class: \"button material-symbols-outlined\",\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.editOnClick && _ctx.editOnClick(...args)))\n            }, \" edit_square \"))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3], (index) => {\n          return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n            (_ctx.resonanceElementImgSrcs[index])\n              ? (_openBlock(), _createElementBlock(\"img\", {\n                  key: 0,\n                  class: \"elemental-resonance\",\n                  src: _ctx.resonanceElementImgSrcs[index],\n                  alt: \"resonance\"\n                }, null, 8, _hoisted_5))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        }), 64))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"table\", null, [\n        _createElementVNode(\"tr\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: member.id\n            }, [\n              _createVNode(_component_MemberItem, {\n                member: member,\n                statsObj: _ctx.memberStats[member.id],\n                displayStat: _ctx.displayStat,\n                showEquipment: _ctx.showEquipment,\n                viewable: true,\n                members: _ctx.team.members.map(s => s.name),\n                elementalResonance: _ctx.elementalResonance\n              }, null, 8, [\"member\", \"statsObj\", \"displayStat\", \"showEquipment\", \"members\", \"elementalResonance\"])\n            ]))\n          }), 128))\n        ])\n      ])\n    ]),\n    (_ctx.displayRes)\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_7, [\n          _createElementVNode(\"tr\", null, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.resKey, (key) => {\n              return (_openBlock(), _createElementBlock(\"td\", {\n                key: key,\n                class: _normalizeClass(_ctx.resBgClass(key))\n              }, _toDisplayString(_ctx.res[key]), 3))\n            }), 128))\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.displayTags)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.tags, (tag) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: \"tag\",\n              key: tag\n            }, _toDisplayString(tag), 1))\n          }), 128))\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_9, [\n      _createElementVNode(\"span\", {\n        class: \"material-symbols-outlined control-button\",\n        onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.jumpToRotation && _ctx.jumpToRotation(...args)))\n      }, \"stat_minus_2\"),\n      _createElementVNode(\"div\", _hoisted_10, _toDisplayString(_ctx.description), 1)\n    ])\n  ], 2))\n}","\r\nimport _ from 'lodash';\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { evalFormula } from \"@/calculate\";\r\nimport { makeDetailObj, TStats } from \"@/input\";\r\nimport { CHARACTER_MASTER, ELEMENT_IMG_SRC, TAnyObject, TCharacterKey, ELEMENT_BG_COLOR_CLASS } from \"@/master\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { calculateMemberResult, getElementalResonance, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport MemberItem from \"./MemberItem.vue\";\r\n\r\nexport default defineComponent({\r\n  name: 'TeamItem',\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    selected: { type: Boolean, requied: true },\r\n    editable: { type: Boolean },\r\n    showEquipment: { type: Boolean },\r\n    displayStat: { type: String },\r\n    displayRes: { type: Boolean },\r\n    displayTags: { type: Boolean },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n  },\r\n  emits: ['click:edit', 'click:jump-to-rotation', 'update:member-result'],\r\n  components: {\r\n    MemberItem,\r\n  },\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const memberStats = reactive({} as TAnyObject);\r\n    const memberResults = reactive({} as TTeamMemberResult);\r\n    const res = reactive({} as TAnyObject);\r\n    const resKey = ['', '', '', '', '', '', '', ''];\r\n    function initializeRes() {\r\n      resKey.forEach(key => {\r\n        res[key] = 0;\r\n      });\r\n    }\r\n    initializeRes();\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, async (newVal) => {\r\n      watchFunc(newVal.team);\r\n      watchCount.value++;\r\n    });\r\n\r\n    onMounted(() => {\r\n      watchFunc(props.team);\r\n    })\r\n\r\n    const elementalResonance = computed(() => getElementalResonance(props.team));\r\n    const resonanceElementImgSrcs = computed(() => {\r\n      const result: string[] = [];\r\n      elementalResonance.value.forEach((entry) => {\r\n        if (entry == \"\") {\r\n          const members = props.team.members.filter((s) => s.name);\r\n          if (members.length == 4) {\r\n            members.forEach((member) => {\r\n              const master = CHARACTER_MASTER[member.name as TCharacterKey];\r\n              const src = (ELEMENT_IMG_SRC as any)[master.];\r\n              result.push(src);\r\n            });\r\n          }\r\n        } else {\r\n          const src = (ELEMENT_IMG_SRC as any)[entry.replace(\"\", \"\")];\r\n          result.push(src);\r\n          result.push(src);\r\n        }\r\n      });\r\n      return result;\r\n    })\r\n    const description = computed(() => props.team.description ?? '')\r\n    const selectedClass = computed(() => (props.selected ? ' selected' : ''));\r\n\r\n    async function watchFunc(team: TTeam) {\r\n      const list = [];\r\n      for (const member of team.members) {\r\n        list.push({\r\n          key: member.id,\r\n          value: await calculateMemberResult(member, team),\r\n        });\r\n      }\r\n      await Promise.all(list).then(results => {\r\n        results.forEach(entry => {\r\n          memberStats[entry.key] = entry.value?.statsInput?.statsObj;\r\n          memberResults[entry.key] = entry.value;\r\n        });\r\n      });\r\n      calculateStat();\r\n      calculateRes();\r\n      context.emit('update:member-result', team.id, memberResults);\r\n    }\r\n\r\n    function calculateStat() {\r\n      const teamAdjustments: { [key: string]: TStats } = {};\r\n      Object.keys(memberStats).forEach(key => {\r\n        teamAdjustments[key] = {};\r\n      })\r\n      Object.keys(memberStats).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const weaponMaster = memberResult?.characterInput?.weaponMaster;\r\n        if (characterMaster && characterMaster.) {\r\n          for (const damageDetail of characterMaster.) {\r\n            const detailObj = makeDetailObj(damageDetail, null, null, null, null);\r\n            if (detailObj. || !detailObj. || !detailObj.) continue;\r\n            const value = evalFormula(detailObj., memberResult.statsInput.statsObj, memberResult.damageResult, detailObj., detailObj.);\r\n            const toStat = detailObj..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n        if (weaponMaster && weaponMaster.) {\r\n          for (const damageDetail of weaponMaster.) {\r\n            const detailObj = makeDetailObj(damageDetail, null, null, null, null);\r\n            if (detailObj. || !detailObj. || !detailObj.) continue;\r\n            const value = evalFormula(detailObj., memberResult.statsInput.statsObj, memberResult.damageResult, detailObj., detailObj.);\r\n            const toStat = detailObj..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n      for (const key of Object.keys(memberStats)) {\r\n        if (key in teamAdjustments) {\r\n          for (const stat of Object.keys(teamAdjustments[key])) {\r\n            if (!memberStats[key]) continue;\r\n            if (stat in memberStats[key]) {\r\n              memberStats[key][stat] += teamAdjustments[key][stat];\r\n            } else {\r\n              memberStats[key][stat] = teamAdjustments[key][stat];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // \r\n    function calculateRes() {\r\n      initializeRes();\r\n      const dmgElements: string[] = [];\r\n      const artifactSet4s: string[] = [];\r\n      Object.keys(memberResults).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const artifactSetMasters = memberResult?.characterInput?.artifactSetMasters;\r\n        if (characterMaster) {\r\n          if (characterMaster) {\r\n            dmgElements.push(characterMaster.);\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster.) {\r\n            for (const damageDetail of characterMaster.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          const constellation = memberResult.characterInput?. ?? (props.constellations ? props.constellations[characterMaster.] ?? 0 : 0);\r\n          if (characterMaster.) {\r\n            for (let i = 1; i <= constellation; i++) {\r\n              const constellationObj = characterMaster.[String(i)];\r\n              if (constellationObj.) {\r\n                for (const damageDetail of constellationObj.) {\r\n                  if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    if (_.isNumber(damageDetail.)) {\r\n                      if (element === '') {\r\n                        resKey.filter(s => s !== '').forEach(key => {\r\n                          res[key] -= damageDetail.;\r\n                        })\r\n                      } else {\r\n                        res[element] -= damageDetail.;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (artifactSetMasters && artifactSetMasters.length == 2) {\r\n          if (artifactSetMasters[0].key == artifactSetMasters[1].key) {\r\n            if (!artifactSet4s.includes(artifactSetMasters[0].key)) {\r\n              artifactSet4s.push(artifactSetMasters[0].key);\r\n              if (artifactSetMasters[0]['4']?.) {\r\n                artifactSetMasters[0]['4']?..forEach(damageDetail => {\r\n                  if (damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    res[element] -= Number(damageDetail.);\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n      if (dmgElements.filter(s => s === '').length >= 2) { // \r\n        res[''] -= -20;\r\n      }\r\n      if (dmgElements.includes('') && dmgElements.includes('')) { // \r\n        res[''] -= -40;\r\n      }\r\n      resKey.forEach(key => {\r\n        if (key !== '' && !dmgElements.includes(key)) {\r\n          res[key] = 0;\r\n        }\r\n      })\r\n    }\r\n\r\n    const resBgClass = (key: string) => {\r\n      if (res[key] !== 0) {\r\n        return key in ELEMENT_BG_COLOR_CLASS ? (ELEMENT_BG_COLOR_CLASS as any)[key] : 'physical';\r\n      } else {\r\n        return '';\r\n      }\r\n    }\r\n\r\n    const editOnClick = () => {\r\n      context.emit('click:edit', props.team.id);\r\n    }\r\n\r\n    const jumpToRotation = () => {\r\n      context.emit('click:jump-to-rotation');\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n\r\n      selectedClass,\r\n      memberStats,\r\n      elementalResonance,\r\n      resonanceElementImgSrcs,\r\n      description,\r\n      res,\r\n      resKey,\r\n      resBgClass,\r\n\r\n      editOnClick,\r\n      jumpToRotation,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./TeamItem.vue?vue&type=template&id=a5c50a68&ts=true\"\nimport script from \"./TeamItem.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamItem.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamItem.vue?vue&type=style&index=0&id=a5c50a68&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, vModelText as _vModelText, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-37a78f4d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"rotation-box\"\n}\nconst _hoisted_2 = { class: \"pane1\" }\nconst _hoisted_3 = { class: \"icon-list\" }\nconst _hoisted_4 = { key: 0 }\nconst _hoisted_5 = { class: \"action with-tooltip\" }\nconst _hoisted_6 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_7 = { class: \"tooltip\" }\nconst _hoisted_8 = { class: \"action with-tooltip\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = { class: \"action with-tooltip\" }\nconst _hoisted_12 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_13 = { class: \"tooltip\" }\nconst _hoisted_14 = { class: \"control-button\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"material-symbols-outlined\" }, \"delete\", -1))\nconst _hoisted_16 = { key: 0 }\nconst _hoisted_17 = [\"src\", \"alt\"]\nconst _hoisted_18 = {\n  key: 1,\n  class: \"action-attribute\"\n}\nconst _hoisted_19 = { class: \"rotation-list\" }\nconst _hoisted_20 = { class: \"rotation-item\" }\nconst _hoisted_21 = [\"src\", \"alt\"]\nconst _hoisted_22 = { class: \"with-tooltip handle\" }\nconst _hoisted_23 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_24 = [\"onClick\"]\nconst _hoisted_25 = { class: \"action-attribute\" }\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_30 = /*#__PURE__*/_createStaticVNode(\"<br data-v-37a78f4d><table class=\\\"guide\\\" data-v-37a78f4d><tr data-v-37a78f4d><th data-v-37a78f4d>N</th><td data-v-37a78f4d>1</td><th data-v-37a78f4d>N2</th><td data-v-37a78f4d>2</td><th data-v-37a78f4d>NX</th><td data-v-37a78f4d>X</td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>N1C</th><td data-v-37a78f4d>1+</td><th data-v-37a78f4d>N2C</th><td data-v-37a78f4d>2+</td><th data-v-37a78f4d>NXC</th><td data-v-37a78f4d>X+</td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>C</th><td data-v-37a78f4d></td><td colspan=\\\"4\\\" data-v-37a78f4d></td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>P</th><td data-v-37a78f4d></td><td colspan=\\\"4\\\" data-v-37a78f4d></td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>E</th><td data-v-37a78f4d></td><th data-v-37a78f4d>E.Press</th><td data-v-37a78f4d>()</td><th data-v-37a78f4d>E.Hold</th><td data-v-37a78f4d>()</td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>Q</th><td data-v-37a78f4d></td><td colspan=\\\"4\\\" data-v-37a78f4d></td></tr></table>\", 2)\nconst _hoisted_32 = {\n  key: 0,\n  class: \"pane2\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_draggable = _resolveComponent(\"draggable\")!\n  const _component_ERCalculator = _resolveComponent(\"ERCalculator\")!\n\n  return (_ctx.watchCount)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"fieldset\", _hoisted_3, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n              return (_openBlock(), _createElementBlock(_Fragment, {\n                key: member.id\n              }, [\n                (member.name)\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, [\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.normalAttackIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'N'))\n                        }, null, 10, _hoisted_6),\n                        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName('')), 1)\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_8, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.elementalSkillIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'E'))\n                        }, null, 10, _hoisted_9),\n                        _createElementVNode(\"span\", _hoisted_10, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName(\"\")), 1)\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_11, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.elementalBurstIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'Q'))\n                        }, null, 10, _hoisted_12),\n                        _createElementVNode(\"span\", _hoisted_13, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName('')), 1)\n                      ])\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ], 64))\n            }), 128)),\n            _createElementVNode(\"table\", _hoisted_14, [\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", null, [\n                  _createElementVNode(\"span\", {\n                    class: \"material-symbols-outlined control-button\",\n                    onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('click:jump-to-team')))\n                  }, \"stat_2\")\n                ]),\n                _createElementVNode(\"td\", null, [\n                  _createElementVNode(\"label\", {\n                    class: _normalizeClass(_ctx.removeMode ? 'checked' : '')\n                  }, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"checkbox\",\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.removeMode) = $event))\n                    }, null, 512), [\n                      [_vModelCheckbox, _ctx.removeMode]\n                    ]),\n                    _hoisted_15\n                  ], 2)\n                ]),\n                _createElementVNode(\"td\", null, [\n                  (_ctx.selectedAction)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon handle' + _ctx.bgColorClass(_ctx.selectedAction.member)),\n                          src: _ctx.getActionDetail(_ctx.selectedAction).icon_url,\n                          alt: _ctx.displayName(_ctx.getActionDetail(_ctx.selectedAction).),\n                          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.selectedActionOnClick(_ctx.selectedAction)))\n                        }, null, 10, _hoisted_17)\n                      ]))\n                    : _createCommentVNode(\"\", true),\n                  (_ctx.selectedAction)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, _toDisplayString(_ctx.actionDisplay(_ctx.selectedAction)), 1))\n                    : _createCommentVNode(\"\", true)\n                ])\n              ])\n            ])\n          ]),\n          _createElementVNode(\"fieldset\", _hoisted_19, [\n            _createVNode(_component_draggable, {\n              list: _ctx.rotationList,\n              \"item-key\": \"id\",\n              sort: true,\n              handle: \".handle\",\n              delay: 100,\n              animation: 200,\n              onChange: _ctx.rotationListOnChange\n            }, {\n              item: _withCtx(({ element }) => [\n                _createElementVNode(\"div\", _hoisted_20, [\n                  (_ctx.previousRotation(element)?.member != element.member)\n                    ? (_openBlock(), _createElementBlock(\"img\", {\n                        key: 0,\n                        class: \"character-icon\",\n                        src: _ctx.getCharacterMaster(element.member)?.icon_url ?? _ctx.IMG_SRC_DUMMY,\n                        alt: _ctx.displayName(element.member)\n                      }, null, 8, _hoisted_21))\n                    : _createCommentVNode(\"\", true),\n                  (_ctx.getActionDetail(element))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass('action-item ' + _ctx.colorClass(element.member))\n                      }, [\n                        _createElementVNode(\"div\", _hoisted_22, [\n                          _createElementVNode(\"img\", {\n                            class: _normalizeClass('action-icon' + _ctx.bgColorClass(element.member) + _ctx.selectedActionClass(element)),\n                            src: _ctx.getActionDetail(element).icon_url,\n                            alt: _ctx.displayName(_ctx.getActionDetail(element).),\n                            onClick: ($event: any) => (_ctx.rotationActionOnClick(element))\n                          }, null, 10, _hoisted_23),\n                          (_ctx.removeMode)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"remove-mark\",\n                                onClick: ($event: any) => (_ctx.removeItemOnClick(element))\n                              }, null, 8, _hoisted_24))\n                            : _createCommentVNode(\"\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_25, _toDisplayString(_ctx.actionDisplay(element)), 1)\n                      ], 2))\n                    : _createCommentVNode(\"\", true)\n                ])\n              ]),\n              _: 1\n            }, 8, [\"list\", \"onChange\"]),\n            _hoisted_26,\n            _withDirectives(_createElementVNode(\"textarea\", {\n              class: \"rotation-description\",\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.rotationDescription) = $event)),\n              rows: \"10\",\n              maxlength: \"400\",\n              onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateRotation && _ctx.updateRotation(...args)))\n            }, null, 544), [\n              [_vModelText, _ctx.rotationDescription]\n            ])\n          ]),\n          _hoisted_27,\n          _createTextVNode(),\n          _hoisted_28,\n          _hoisted_29,\n          _createTextVNode(),\n          _hoisted_30\n        ]),\n        true\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_32, [\n              _createVNode(_component_ERCalculator, {\n                team: _ctx.team,\n                rotationList: _ctx.rotationList,\n                teamMemberResult: _ctx.teamMemberResult,\n                constellations: _ctx.constellations\n              }, null, 8, [\"team\", \"rotationList\", \"teamMemberResult\", \"constellations\"])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]))\n    : _createCommentVNode(\"\", true)\n}","import { toDisplayString as _toDisplayString, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode, vShow as _vShow, vModelCheckbox as _vModelCheckbox, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-109f95d0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"er-calculator\" }\nconst _hoisted_2 = { class: \"er-calculator\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", { colspan: \"2\" }, null, -1))\nconst _hoisted_4 = { class: \"with-tooltip\" }\nconst _hoisted_5 = [\"src\", \"alt\"]\nconst _hoisted_6 = { class: \"tooltip\" }\nconst _hoisted_7 = { colspan: \"2\" }\nconst _hoisted_8 = [\"onUpdate:modelValue\"]\nconst _hoisted_9 = { colspan: \"2\" }\nconst _hoisted_10 = [\"onUpdate:modelValue\"]\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = { colspan: \"2\" }\nconst _hoisted_13 = [\"src\", \"alt\"]\nconst _hoisted_14 = [\"onUpdate:modelValue\"]\nconst _hoisted_15 = [\"value\"]\nconst _hoisted_16 = { class: \"result-row\" }\nconst _hoisted_17 = { colspan: \"2\" }\nconst _hoisted_18 = { colspan: \"2\" }\nconst _hoisted_19 = [\"onUpdate:modelValue\"]\nconst _hoisted_20 = { class: \"label-row\" }\nconst _hoisted_21 = { colspan: \"2\" }\nconst _hoisted_22 = { colspan: \"4\" }\nconst _hoisted_23 = [\"onUpdate:modelValue\"]\nconst _hoisted_24 = { class: \"with-tooltip\" }\nconst _hoisted_25 = [\"src\", \"alt\"]\nconst _hoisted_26 = [\"src\", \"alt\"]\nconst _hoisted_27 = { class: \"tooltip\" }\nconst _hoisted_28 = [\"onUpdate:modelValue\"]\nconst _hoisted_29 = { colspan: \"2\" }\nconst _hoisted_30 = {\n  key: 0,\n  class: \"label-row\"\n}\nconst _hoisted_31 = { colspan: \"2\" }\nconst _hoisted_32 = { colspan: \"4\" }\nconst _hoisted_33 = {\n  colspan: \"2\",\n  class: \"with-tooltip\"\n}\nconst _hoisted_34 = [\"src\", \"alt\"]\nconst _hoisted_35 = [\"src\", \"alt\"]\nconst _hoisted_36 = { class: \"tooltip\" }\nconst _hoisted_37 = [\"onUpdate:modelValue\"]\nconst _hoisted_38 = { colspan: \"2\" }\nconst _hoisted_39 = [\"onUpdate:modelValue\"]\nconst _hoisted_40 = { colspan: \"2\" }\nconst _hoisted_41 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_42 = { class: \"tooltip\" }\nconst _hoisted_43 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_44 = { class: \"supply-from-enemy\" }\nconst _hoisted_45 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, null, -1))\nconst _hoisted_46 = [\"onUpdate:modelValue\"]\nconst _hoisted_47 = [\"onUpdate:modelValue\"]\nconst _hoisted_48 = { class: \"message-area\" }\nconst _hoisted_49 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_50 = { class: \"character\" }\nconst _hoisted_51 = { key: 0 }\nconst _hoisted_52 = { class: \"message-area\" }\nconst _hoisted_53 = {\n  class: \"toggle-switch\",\n  for: \"show-usage-toggle\"\n}\nconst _hoisted_54 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_55 = { style: {\"text-align\":\"center\"} }\nconst _hoisted_56 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"ol\", null, [\n  /*#__PURE__*/_createElementVNode(\"li\", null, \" \"),\n  /*#__PURE__*/_createElementVNode(\"li\", null, \"HP\"),\n  /*#__PURE__*/_createElementVNode(\"li\", null, \"1\"),\n  /*#__PURE__*/_createElementVNode(\"li\", null, [\n    /*#__PURE__*/_createTextVNode(\" 8\"),\n    /*#__PURE__*/_createElementVNode(\"br\")\n  ])\n], -1))\nconst _hoisted_57 = { style: {\"text-align\":\"center\"} }\nconst _hoisted_58 = /*#__PURE__*/_createStaticVNode(\"<li data-v-109f95d0><br data-v-109f95d0>   20 </li><li data-v-109f95d0><br data-v-109f95d0>   </li><li data-v-109f95d0><br data-v-109f95d0>  </li><li data-v-109f95d0> <br data-v-109f95d0>  </li><li data-v-109f95d0> <br data-v-109f95d0>   </li><li data-v-109f95d0> <br data-v-109f95d0> () </li><li data-v-109f95d0><br data-v-109f95d0> 5 0 </li><li data-v-109f95d0><br data-v-109f95d0> (%)  1 </li><li data-v-109f95d0><br data-v-109f95d0>   </li>\", 9)\nconst _hoisted_67 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"li\", null, [\n  /*#__PURE__*/_createTextVNode(\" \"),\n  /*#__PURE__*/_createElementVNode(\"ul\", null, [\n    /*#__PURE__*/_createElementVNode(\"li\", null, \" : 9\"),\n    /*#__PURE__*/_createElementVNode(\"li\", null, \" : 4()\"),\n    /*#__PURE__*/_createElementVNode(\"li\", null, \" : 6\"),\n    /*#__PURE__*/_createElementVNode(\"li\", null, \" : 3\")\n  ])\n], -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.rotationLength) = $event)),\n          min: \"10\",\n          max: \"180\",\n          onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.rotationLength]\n        ])\n      ])\n    ]),\n    _createElementVNode(\"table\", _hoisted_2, [\n      _createElementVNode(\"tr\", null, [\n        _hoisted_3,\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"img\", {\n                src: _ctx.characterImgSrc(element.character),\n                alt: _ctx.displayName(element.character),\n                class: \"character\"\n              }, null, 8, _hoisted_5),\n              _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.displayName(element.character)), 1)\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_7, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              \"onUpdate:modelValue\": ($event: any) => ((element.energyCost) = $event)\n            }, null, 8, _hoisted_8), [\n              [_vModelText, element.energyCost]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_9, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": ($event: any) => ((element.constellation) = $event),\n              onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n            }, [\n              (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3, 4, 5, 6], (constellation) => {\n                return _createElementVNode(\"option\", {\n                  key: constellation,\n                  value: constellation\n                }, _toDisplayString('C' + constellation), 9, _hoisted_11)\n              }), 64))\n            ], 40, _hoisted_10), [\n              [_vModelSelect, element.constellation]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_12, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass('weapon' + _ctx.bgColorClass(index))\n          }, [\n            _createElementVNode(\"img\", {\n              src: _ctx.weaponImgSrc(element.character, element.currentWeapon),\n              alt: _ctx.displayName(element.currentWeapon),\n              class: \"input-item-weapon\"\n            }, null, 8, _hoisted_13),\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": ($event: any) => ((element.weaponRefine) = $event),\n              onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n            }, [\n              (_openBlock(), _createElementBlock(_Fragment, null, _renderList([1, 2, 3, 4, 5], (refine) => {\n                return _createElementVNode(\"option\", {\n                  key: refine,\n                  value: refine\n                }, _toDisplayString('R' + refine), 9, _hoisted_15)\n              }), 64))\n            ], 40, _hoisted_14), [\n              [_vModelSelect, element.weaponRefine]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", _hoisted_16, [\n        _createElementVNode(\"th\", _hoisted_17, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.energyRechargeGls, (value, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, _toDisplayString(value + '%'), 3))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_18, _toDisplayString(_ctx.displayName('(%)')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              \"onUpdate:modelValue\": ($event: any) => ((element.onField) = $event),\n              min: \"0\",\n              max: \"100\",\n              onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n            }, null, 40, _hoisted_19), [\n              [_vModelText, element.onField]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", _hoisted_20, [\n        _createElementVNode(\"th\", _hoisted_21, _toDisplayString(_ctx.displayName('')), 1),\n        _createElementVNode(\"th\", _hoisted_22, _toDisplayString(_ctx.displayName('')), 1)\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticleEnemy, (row, rowIndex) => {\n        return (_openBlock(), _createElementBlock(\"tr\", {\n          key: rowIndex,\n          class: _normalizeClass(_ctx.bgColorClass2(row))\n        }, [\n          _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 10) / 10), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n            return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_23), [\n                [_vModelText, row.currentValues[columnIndex]]\n              ])\n            ]))\n          }), 128))\n        ], 2))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticle, (row, rowIndex) => {\n        return (_openBlock(), _createElementBlock(\"tr\", {\n          key: rowIndex,\n          class: _normalizeClass(_ctx.bgColorClass2(row))\n        }, [\n          _createElementVNode(\"th\", _hoisted_24, [\n            _createElementVNode(\"span\", null, [\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc1(row),\n                alt: _ctx.displayName(row.character),\n                class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n              }, null, 10, _hoisted_25),\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc2(row),\n                alt: _ctx.displayName(row.triggerName),\n                class: \"input-item\"\n              }, null, 8, _hoisted_26)\n            ]),\n            _createElementVNode(\"span\", _hoisted_27, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n          ]),\n          _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 100) / 100), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n            return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_28), [\n                [_vModelText, row.currentValues[columnIndex]]\n              ])\n            ]))\n          }), 128))\n        ], 2))\n      }), 128)),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_29, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.particleRecharges, (value, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: \"result\"\n          }, _toDisplayString(value), 1))\n        }), 128))\n      ]),\n      (_ctx.inputRowEnergy.length)\n        ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_30, [\n            _createElementVNode(\"th\", _hoisted_31, _toDisplayString(_ctx.displayName('')), 1),\n            _createElementVNode(\"th\", _hoisted_32, _toDisplayString(_ctx.displayName('')), 1)\n          ]))\n        : _createCommentVNode(\"\", true),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowEnergy, (row, rowIndex) => {\n        return (_openBlock(), _createElementBlock(\"tr\", {\n          key: rowIndex,\n          class: _normalizeClass(_ctx.bgColorClass2(row))\n        }, [\n          _createElementVNode(\"th\", _hoisted_33, [\n            _createElementVNode(\"span\", null, [\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc1(row),\n                alt: _ctx.displayName(row.character),\n                class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n              }, null, 10, _hoisted_34),\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc2(row),\n                alt: _ctx.displayName(row.triggerName),\n                class: \"input-item\"\n              }, null, 8, _hoisted_35)\n            ]),\n            _createElementVNode(\"span\", _hoisted_36, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n          ]),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n            return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_37), [\n                [_vModelText, row.currentValues[columnIndex]]\n              ])\n            ]))\n          }), 128))\n        ], 2))\n      }), 128)),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_38, _toDisplayString(_ctx.displayName('()')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: _ctx.calculatorInput.length }, (_, i) => i), (index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              \"onUpdate:modelValue\": ($event: any) => ((_ctx.burstCounts[index]) = $event),\n              min: \"0\"\n            }, null, 8, _hoisted_39), [\n              [_vModelText, _ctx.burstCounts[index]]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_40, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(element.replaceWeapons, (weapon, weaponIndex) => {\n              return (_openBlock(), _createElementBlock(\"span\", {\n                key: weaponIndex,\n                class: \"with-tooltip\"\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.replaceWeaponImgSrc(element, weapon),\n                  alt: _ctx.displayName(weapon),\n                  class: _normalizeClass('input-item-weapon' + _ctx.replaceWeaponClass(element, weapon)),\n                  onClick: ($event: any) => (_ctx.replaceWeaponOnClick(element, weapon))\n                }, null, 10, _hoisted_41),\n                _createElementVNode(\"span\", _hoisted_42, _toDisplayString(_ctx.displayName(weapon)), 1)\n              ]))\n            }), 128))\n          ], 2))\n        }), 128))\n      ])\n    ]),\n    _hoisted_43,\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.combatLength) = $event)),\n          min: \"1\",\n          onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.combatLength]\n        ])\n      ]),\n      _createElementVNode(\"table\", _hoisted_44, [\n        _createElementVNode(\"caption\", {\n          onClick: _cache[7] || (_cache[7] = ($event: any) => (_ctx.isOpenSupplyFromEnemy = !_ctx.isOpenSupplyFromEnemy))\n        }, _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+') + \" \" + _toDisplayString(_ctx.displayName('')) + \" \" + _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+'), 1),\n        _createElementVNode(\"tr\", null, [\n          _hoisted_45,\n          _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.supplyFromEnemy, (element, index) => {\n          return _withDirectives((_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n            _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName(element[0])), 1),\n            _createElementVNode(\"td\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element[1]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_46), [\n                [_vModelText, element[1]]\n              ])\n            ]),\n            _createElementVNode(\"td\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element[2]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_47), [\n                [_vModelText, element[2]]\n              ])\n            ])\n          ])), [\n            [_vShow, _ctx.isOpenSupplyFromEnemy || element[1] || element[2]]\n          ])\n        }), 128))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_48, [\n      _hoisted_49,\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.messages, (message, index) => {\n        return (_openBlock(), _createElementBlock(\"p\", { key: index }, [\n          _createElementVNode(\"span\", _hoisted_50, _toDisplayString(message[0]), 1),\n          _createTextVNode(\"  \"),\n          _createElementVNode(\"span\", null, _toDisplayString(message[1]), 1),\n          (message[0] || message[1])\n            ? (_openBlock(), _createElementBlock(\"br\", _hoisted_51))\n            : _createCommentVNode(\"\", true),\n          _createTextVNode(\"  \" + _toDisplayString(message[2]), 1)\n        ]))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_52, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            class: \"hidden\",\n            type: \"checkbox\",\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_ctx.isShowUsage) = $event)),\n            id: \"show-usage-toggle\"\n          }, null, 512), [\n            [_vModelCheckbox, _ctx.isShowUsage]\n          ]),\n          _createElementVNode(\"label\", _hoisted_53, _toDisplayString(_ctx.displayName('')), 1)\n        ]),\n        _withDirectives(_createElementVNode(\"div\", _hoisted_54, [\n          _createElementVNode(\"div\", _hoisted_55, _toDisplayString(_ctx.displayName('')), 1),\n          _hoisted_56,\n          _createElementVNode(\"div\", _hoisted_57, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"ol\", null, [\n            _hoisted_58,\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\"  \"),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_DECREMENT_IN_BURST, (character, index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character)), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\"1 \"),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_UNTIL_MAP.entries(), ([character, untilMap], index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character) + ' : ' + _ctx.actionName('E') + '' +\r\n                                        Array.from(untilMap.entries())\r\n                                            .map(value => value[0]\r\n                                                .map(action => _ctx.actionName(action)).join(_ctx.displayName(''))\r\n                                                + '' + value[1] + _ctx.displayName('')).join(_ctx.displayName(''))), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\" \"),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_DELAY_MAP.entries(), ([character, delayArr], index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character) + ' : ' + _ctx.actionName('E') + '' +\r\n                                        delayArr.map(action => _ctx.actionName(action)).join(_ctx.displayName(''))), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\"0 \"),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_Q_NOT_RECHARGEABLE, (character, index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character)), 1))\n                }), 128))\n              ])\n            ]),\n            _hoisted_67\n          ])\n        ], 512), [\n          [_vShow, _ctx.isShowUsage]\n        ])\n      ])\n    ])\n  ]))\n}","import { CHARACTER_E_UNTIL_MAP, getParticleInfo, getDurationFromInfo, getReceiveTypeFromInfo, SP_SELF } from \"@/particlemaster\";\r\nimport _ from \"lodash\";\r\nimport { TActionItem, TTeam, NUMBER_OF_MEMBERS, getCharacterMaster, TTeamMemberResult, TMember, getDefaultMemberResult, getCharacterDetail, getNormalAttackDan } from \"./team\";\r\n\r\nexport const RECHARGE_ENERGY_SKILL = \"01\";              // \r\nexport const RECHARGE_ENERGY_BURST = \"02\";              // \r\nexport const RECHARGE_ENERGY_PASSIVE = \"03\";            // \r\nexport const RECHARGE_ENERGY_CONSTELLATION = \"04\";      // \r\nexport const RECHARGE_ENERGY_ATTACK = \"05\";             // \r\nexport const RECHARGE_ENERGY_WEAPON = \"06\";             // \r\nexport const RECHARGE_ENERGY_ARTIFACT = \"07\";           // \r\nexport const RECHARGE_PARTICLE_SKILL = \"11\";            // \r\nexport const RECHARGE_PARTICLE_PASSIVE = \"13\";          // \r\nexport const RECHARGE_PARTICLE_CONSTELLATION = \"14\";    // \r\nexport const RECHARGE_PARTICLE_FAVONIUS = \"16\";         // \r\nexport const RECHARGE_PARTICLE_RESONANCE = \"18\";        // \r\nexport const RECHARGE_PARTICLE_ENEMY = \"19\";            // \r\n\r\nexport const ATTACK_ENERGY_COUNT_OBJ = {\r\n    '': 4.52,     // 10% + 5% * n\r\n    '': 4.66,     // 0% + 10% * n\r\n    '': 6.95,   // 0% + 4% * n\r\n    '': 6.29,         // 0% + 5% * n\r\n    '': 4.66,       // 0% + 10% * n\r\n}\r\n\r\nconst NORMAL_ATTACK_LENGTH_OBJ = {\r\n    '': 0.4,\r\n    '': 0.8,\r\n    '': 0.4,\r\n    '': 0.6,\r\n    '': 0.6,\r\n}\r\n\r\nconst ACTION_LENGTH_MAP = new Map<string, Map<string, number>>();\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['E.Press', 1.5], ['E.Hold', 2]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['C', 0.8]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['C', 3]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['E.Hold', 2]]));\r\n\r\n// rechargeKind, triggerName, energies[], messages[]\r\nexport type TEREnergy = [string, string, number[], string[]];\r\n// rechargeKind, triggerName, element, particles[], messages[]\r\nexport type TERParticle = [string, string, string, number[], string[]];\r\n\r\nexport function isRechargeKindEnergy(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('0') : false;\r\n}\r\n\r\nexport function isRechargeKindParticle(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('1') : false;\r\n}\r\n\r\n/**  */\r\nexport function countN(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (rotation.action === 'Q') {\r\n                        isQing = true;\r\n                    } else if (rotation.action.startsWith('N') && isBursting == isQing) {\r\n                        result += rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2));\r\n                    }\r\n                } else {\r\n                    isQing = false;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith('N')).map(rotation => rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2))).reduce((p, c) => p + c, 0);\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countC(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.action === 'Q') {\r\n                    isQing = true;\r\n                } else if (rotation.action.includes('C') && isBursting == isQing) {\r\n                    result++;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.includes('C')).length;\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countE(character?: string, rotationList?: TActionItem[], action = 'E', isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character) {\r\n            let isQing = false;\r\n            let untilMap: Map<string[], number> | undefined;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (untilMap && untilMap.size > 0) {\r\n                        for (const [key, value] of untilMap.entries()) {\r\n                            if (key.filter(untilAction => rotation.action.indexOf(untilAction) != -1).length) {\r\n                                let untilCount = value;\r\n                                if (untilCount) {\r\n                                    untilCount -= rotation.action.startsWith('N') ? rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2)) : 1;\r\n                                    if (untilCount > 0) {\r\n                                        untilMap.set(key, untilCount);\r\n                                    } else {\r\n                                        untilMap.clear();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else if (rotation.action === 'Q') {\r\n                        isQing = true;\r\n                    } else if (rotation.action.startsWith(action)) {\r\n                        const workMap = CHARACTER_E_UNTIL_MAP.get(character);\r\n                        if (workMap && workMap.size > 0) {\r\n                            untilMap = _.cloneDeep(workMap);\r\n                        }\r\n                        result += (isBursting === undefined || isBursting == isQing) ? 1 : 0;\r\n                    }\r\n                } else {\r\n                    isQing = false;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith(action)).length;\r\n        }\r\n    } else {\r\n        result = 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countQ(character?: string, rotationList?: TActionItem[]) {\r\n    return rotationList?.length ?\r\n        rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action === 'Q').length\r\n        : 1;\r\n}\r\n/** (%) */\r\nexport function getOnFieldRate(team: TTeam, rotationLength: number, rotationList: TActionItem[], constellations: number[]) {\r\n    const result = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const danArr = team.members.map(member => member.name ? getNormalAttackDan(member.name) : 0);\r\n    if (rotationList?.length) {\r\n        const lengthList = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        let length = 0;\r\n        let isNCPIgnoring = false;\r\n        let preRotation = undefined;\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (preRotation && rotation.member != preRotation.member) {\r\n                lengthList[memberNameArr.indexOf(preRotation.member)] += (length > 1 ? length : 1);\r\n                length = 0;\r\n                isNCPIgnoring = false;\r\n            }\r\n            preRotation = rotation;\r\n            const actionLength1 = ACTION_LENGTH_MAP.get(rotation.member);\r\n            if (actionLength1) {\r\n                const actionLength2 = actionLength1.get(rotation.action);\r\n                if (actionLength2 !== undefined) {\r\n                    length += actionLength2;\r\n                    continue;\r\n                }\r\n            }\r\n            const characterMaster = getCharacterMaster(rotation.member);\r\n            if (rotation.action === 'Q') {\r\n                length += 0.8;\r\n                if (characterMaster?. && characterMaster. === 5) {\r\n                    length += 0.4;\r\n                }\r\n            } else if (rotation.action === 'E.Hold') {\r\n                length += 1;\r\n            } else if (['E', 'E.Press'].includes(rotation.action)) {\r\n                length += 0.5;\r\n                const particleInfo = getParticleInfo(rotation.member, rotation.action, constellations[memberNameArr.indexOf(rotation.member)]);\r\n                const duration = getDurationFromInfo(particleInfo);\r\n                if (getReceiveTypeFromInfo(particleInfo) === SP_SELF && duration) {\r\n                    // \r\n                    length += duration;\r\n                    isNCPIgnoring = true;\r\n                }\r\n            } else if (!isNCPIgnoring) {\r\n                if (rotation.action.startsWith('N')) {\r\n                    const maxDan = danArr[memberNameArr.indexOf(preRotation.member)];\r\n                    const dan = rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2));\r\n                    if (characterMaster?.) {\r\n                        const unitLength = NORMAL_ATTACK_LENGTH_OBJ[characterMaster.];\r\n                        for (let j = 0; j < dan; j++) {\r\n                            if ((j / maxDan) < (2 / 3)) {\r\n                                length += unitLength * 0.8;\r\n                            } else {\r\n                                length += unitLength * 1.2;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        length += 0.6 * dan;\r\n                    }\r\n                    if (rotation.action.endsWith('C')) {\r\n                        length += 0.5;\r\n                    }\r\n                    length += 0.3;\r\n                } else if (rotation.action == 'C') {\r\n                    if (characterMaster?. === '') {   //  or \r\n                        length += 3;\r\n                    } else if (characterMaster?. === '') {    // \r\n                        length += 1.5;  //  1/2=1s/1.5s\r\n                    } else if (characterMaster?. === '') {\r\n                        length += 1;\r\n                    } else {    // for \r\n                        length += 1;\r\n                    }\r\n                } else if (rotation.action == 'P') {\r\n                    length += 1.5;\r\n                }\r\n            }\r\n        }\r\n        if (preRotation && length > 0) {\r\n            lengthList[memberNameArr.indexOf(preRotation.member)] += (length > 1 ? length : 1);\r\n        }\r\n        const multiple = Math.ceil(100 / rotationLength);\r\n        const lengthSum = _.sum(lengthList);\r\n        for (let i = 0; i < result.length; i++) {\r\n            if (lengthSum && i < lengthList.length) {\r\n                result[i] = Math.ceil(lengthList[i] / lengthSum * 100 / multiple) * multiple;\r\n            } else {\r\n                result[i] = 25;\r\n            }\r\n        }\r\n        const sumVal = _.sum(result);\r\n        if (sumVal > 100) {\r\n            const maxVal = _.max(result);\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (result[i] == maxVal) {\r\n                    result[i] -= sumVal - 100;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        const memberNum = memberNameArr.filter(name => name).length;\r\n        if (memberNum) {\r\n            const rate = 100 / memberNum;\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (memberNameArr[i]) {\r\n                    result[i] = rate;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getMemberResult(character: string, members: TMember[], teamMemberResult?: TTeamMemberResult) {\r\n    let result = getDefaultMemberResult();\r\n    if (teamMemberResult) {\r\n        const memberArr = members.filter(member => member.name == character);\r\n        if (memberArr.length) {\r\n            result = teamMemberResult[memberArr[0].id];\r\n        }\r\n    } else {\r\n        const characterDetail = getCharacterDetail(character);\r\n        if (characterDetail?.) {\r\n            Object.keys(characterDetail.).forEach(key => {\r\n                result.statsInput.statsObj[key] += characterDetail.[key]['90'];\r\n            })\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getCharacterInputValue(character: string, members: TMember[], item: string, teamMemberResult?: TTeamMemberResult) {\r\n    return (getMemberResult(character, members, teamMemberResult).characterInput as any)[item];\r\n}\r\n\r\nexport function getStatsInputValue(character: string, members: TMember[], item: string, teamMemberResult?: TTeamMemberResult) {\r\n    return (getMemberResult(character, members, teamMemberResult).statsInput.statsObj as any)[item];\r\n}\r\n","import _ from \"lodash\";\r\nimport { TActionItem, TTeamMemberResult, NUMBER_OF_MEMBERS, getCharacterMaster, getCharacterDetail, TMember } from \"./team\";\r\nimport { countQ, RECHARGE_ENERGY_CONSTELLATION, RECHARGE_ENERGY_SKILL, RECHARGE_ENERGY_BURST, countE, countC, RECHARGE_ENERGY_PASSIVE, countN, getCharacterInputValue, getStatsInputValue, RECHARGE_PARTICLE_CONSTELLATION, RECHARGE_PARTICLE_PASSIVE, getMemberResult } from \"./ERCalculatorCommon\";\r\n\r\nexport type TCharacterEnergyRet = [string, string, number, number, number, number[], string[]];\r\nexport type TCharacterParticleRet = [string, string, string, number, number, number[], string[]];\r\n\r\nexport const CHARACTER_ENERGY_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        constellation: number,\r\n        members: TMember[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n        teamMemberResult?: TTeamMemberResult,\r\n    ) => TCharacterEnergyRet[]\r\n} = {\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '525',\r\n            ];\r\n            const myEnergy = 5 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            ' ',\r\n            '10%',\r\n        ];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            messages.push('35%+100%');\r\n        }\r\n        const skillLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = [3, 3, 3, 3.5, 3.5, 3.5, 4, 4, 4, 4, 4, 4, 4, 4, 4][skillLevel - 1] * (100 + (er / 10)) / 100;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_SKILL, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const messages2 = [\r\n            ' 0.51'\r\n        ];\r\n        const burstLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const somebodyEnergy = [0.8, 0.8, 0.8, 0.9, 0.9, 0.9, 1, 1, 1, 1, 1, 1, 1, 1, 1][burstLevel - 1];\r\n        result.push([RECHARGE_ENERGY_BURST, '', somebodyEnergy, allEnergy, otherEnergy, herEnergies, messages2]);\r\n        return result;\r\n    },\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '3.5',\r\n            ];\r\n            const myEnergy = 3.5 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '115',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '210',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList, 'E.Hold');\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        let constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '101',\r\n            ];\r\n            const myEnergy = 1 * Math.trunc(rotationLength / 10);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 1 * countC(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '10',\r\n        ];\r\n        const myEnergy = 0;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '23',\r\n            ];\r\n            const nCount = rotationList?.length ? Math.trunc(rotationList.filter(rotation => rotation.action.startsWith('N')).length / 3) : 1;\r\n            const myEnergy = 3 * nCount;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '121',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '511',\r\n            ];\r\n            const myEnergy = 5;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.221',\r\n            ];\r\n            const myEnergy = 1.2;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '100%1.231',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = 0;\r\n        const allEnergy = 1.2 * er / 100 * countE(character, rotationList);\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '91.513.5',\r\n            ];\r\n            const myEnergy = 9 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '100%5115',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = Math.min(15, 5 * er / 100) * countE(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const burstLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const somebodyEnergy = [1.6, 1.7, 1.8, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5][burstLevel - 1];\r\n        const messages2 = [\r\n            ' '\r\n        ];\r\n        result.push([RECHARGE_ENERGY_BURST, '', somebodyEnergy, allEnergy, otherEnergy, herEnergies, messages2]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '11',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1210.514',\r\n            ];\r\n            const myEnergy = 2 * (constellation >= 6 ? Math.trunc(rotationLength / 3) : Math.min(countE(character, rotationList) * 2, countC(character, rotationList)));\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '30.81',\r\n            ];\r\n            const myEnergy = 3;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                'HP315',\r\n            ];\r\n            const myEnergy = 3 * 5 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '243',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '20%',\r\n        ];\r\n        const myEnergy = 80 * 0.2 * countQ(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '2',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '1515',\r\n        ];\r\n        const qCount = countQ(character, rotationList);\r\n        const myEnergy = 15 * qCount;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        for (const element of ['', '', '', '']) {\r\n            let doBreak = false;\r\n            for (let herIndex = 0; herIndex < members.length; herIndex++) {\r\n                const herCm = getCharacterMaster(members[herIndex].name);\r\n                if (herCm?. == element) {\r\n                    herEnergies[herIndex] = myEnergy;\r\n                    doBreak = true;\r\n                }\r\n            }\r\n            if (doBreak) break;\r\n        }\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '2',\r\n        ];\r\n        const myEnergy = 2;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '33',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 3;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.2',\r\n            ];\r\n            const myEnergy = 1.2 * (countE(character, rotationList) ? Math.trunc(rotationLength / 2) : 1);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '-15%6211',\r\n            ];\r\n            const myEnergy = 2 * countC(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '45/3/412',\r\n            ];\r\n            const myEnergy = 3;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '115',\r\n            '100%1%+0.6%',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        let unit = 2.3 * (1 + (er - 100) * 0.006);\r\n        let unit2 = 0;\r\n        const memberResult = getMemberResult(character, members, teamMemberResult);\r\n        memberResult.damageResult..forEach(entry => {\r\n            if (entry[0] === '') {\r\n                unit = entry[2];\r\n            } else if (entry[0] === '_') {\r\n                unit2 = entry[2];\r\n            }\r\n        })\r\n        if (memberResult.characterInput.weapon === '') {\r\n            unit2 *= [30, 35, 40, 45, 50][memberResult.characterInput. - 1] * 0.006;\r\n        }\r\n        const myEnergy = 0;\r\n        const allEnergy = (unit + unit2) * 5 * countQ(character, rotationList);\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '+10%0.80.21',\r\n            ];\r\n            const myEnergy = 0.8 * countN(character, rotationList, true);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1-1.564.518',\r\n            ];\r\n            const geoCount = members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n            const myEnergy = Math.min(18, 6 * geoCount) * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '18',\r\n            ];\r\n            const myEnergy = 3 * 8 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '4012',\r\n        ];\r\n        const myEnergy = 2;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '35',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 3 * 5 * countQ(character, rotationList);\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '315',\r\n            ];\r\n            const myEnergy = 15 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '()0.80.21',\r\n        ];\r\n        const electroCount = members.filter(member => getCharacterDetail(member.name)?. === '').length;\r\n        const myEnergy = electroCount > 0 ? 0.8 * (countN(character, rotationList) + countC(character, rotationList)) : 0;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.50.21',\r\n            ];\r\n            const myEnergy = 1.5;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            'HP3',\r\n        ];\r\n        const myEnergy = 3;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                'HP451',\r\n            ];\r\n            const myEnergy = 4 * Math.trunc(rotationLength / 5);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '+10%2205',\r\n            ];\r\n            const myEnergy = 2;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '13193',\r\n            ];\r\n            const myEnergy = 3 * 3;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n}\r\n\r\nexport const CHARACTER_PARTICLE_EXTRA_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        constellation: number,\r\n        members: TMember[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n        onFields: number[],\r\n    ) => TCharacterParticleRet | undefined\r\n} = {\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const messages: string[] = [\r\n            '12',\r\n        ];\r\n        const hydroCount = members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n        const myParticle = hydroCount > 0 ? 2 * countE(character, rotationList) : 2;\r\n        const allParticle = 0;\r\n        result = [RECHARGE_PARTICLE_PASSIVE, '', '', myParticle, allParticle, [], messages];\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '30%',\r\n            ];\r\n            const myParticle = 0;\r\n            const allParticle = rotationList?.length ? (2 / 3) * countN(undefined, rotationList) : 1;\r\n            result = [RECHARGE_PARTICLE_CONSTELLATION, String(constellationLevel), '', myParticle, allParticle, [], messages];\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '50%151',\r\n            ];\r\n            const myParticle = 0;\r\n            const allParticle = 0;\r\n            const herParticles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            let triggerCnt = 1;\r\n            if (rotationList?.length) {\r\n                const ct = 5;\r\n                const rindexArr: number[] = [];\r\n                let isRecorded = false;\r\n                for (let i = 0; i < rotationList.length; i++) {\r\n                    const rotation = rotationList[i];\r\n                    if (rotation.member == character) {\r\n                        if (rotation.action.startsWith('N') && !isRecorded) {\r\n                            rindexArr.push(i);\r\n                            isRecorded = true;\r\n                        }\r\n                    } else {\r\n                        isRecorded = false;\r\n                    }\r\n                }\r\n                const memberNameArr = members.map(member => member.name);\r\n                const onField = onFields[memberNameArr.indexOf(character)];\r\n                triggerCnt = Math.min(Math.trunc(rotationLength / ct), rindexArr.length + Math.max(0, Math.trunc(rotationLength * onField / 100 / ct) - 1));\r\n                for (let i = 0; i < triggerCnt; i++) {\r\n                    let nxtCharacter = character;\r\n                    if (i < rindexArr.length && (rindexArr[i] + 1) < rotationList.length) {\r\n                        nxtCharacter = rotationList[rindexArr[i] + 1].member;\r\n                    }\r\n                    const toIndex = memberNameArr.indexOf(nxtCharacter);\r\n                    herParticles[toIndex] += 1;\r\n                }\r\n            }\r\n            result = [RECHARGE_PARTICLE_CONSTELLATION, String(constellationLevel), '', myParticle, allParticle, herParticles, messages];\r\n        }\r\n        return result;\r\n    },\r\n}\r\n","import _ from \"lodash\";\r\nimport { NUMBER_OF_MEMBERS, TActionItem } from \"./team\";\r\nimport { RECHARGE_ENERGY_WEAPON, countC, countE, countN, countQ } from \"./ERCalculatorCommon\";\r\n\r\nexport type TWeaponEnergyRet = [string, string, number, number, number, number[], string[]];\r\n\r\nexport const WEAPON_ENERGY_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        weapon: string,\r\n        weaponRefine: number,\r\n        members: string[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n    ) => TWeaponEnergyRet\r\n} = {\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '624/4.5/5/5.5/6HP24%/4.5%/5%/5.5%/6%',\r\n        ];\r\n        const myEnergy = [4, 4.5, 5, 5.5, 6][weaponRefine - 1] * 3 * countQ(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '301513126/7.5/9/10.5/12',\r\n        ];\r\n        const myEnergy = [6, 7.5, 9, 10.5, 12][weaponRefine - 1] * Math.min(countE(character, rotationList), countQ(character, rotationList) * 3, rotationLength / 5);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '120.60.11',\r\n        ];\r\n        const myEnergy = 0.6 * countN(character, rotationList, true);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '32.54.5/5/5.5/6/6.5',\r\n        ];\r\n        const myEnergy = [4.5, 5, 5.5, 6, 6.5][weaponRefine - 1];\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '8/10/12/14/16101',\r\n        ];\r\n        const myEnergy = [8, 10, 12, 14, 16][weaponRefine - 1] * Math.trunc(rotationLength / 10);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            'HP430.31338/9/10/11/12121',\r\n        ];\r\n        const myEnergy = [8, 9, 10, 11, 12][weaponRefine - 1];\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n}\r\n\r\nfunction weaponEnergySub_(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    members: string[],  // eslint-disable-line\r\n    rotationLength: number,  // eslint-disable-line\r\n    rotationList: TActionItem[] | undefined,\r\n): TWeaponEnergyRet {\r\n    const messages = [\r\n        '3623/3.5/4/4.5/5101',\r\n    ];\r\n    let myEnergy = 0;\r\n    const unit = [3, 3.5, 4, 4.5, 5][weaponRefine - 1];\r\n    if (rotationList?.length) {\r\n        let isInCt = false;\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (rotation.member == character) {\r\n                if (rotation.action.startsWith('E')) {\r\n                    if (!isInCt) {\r\n                        myEnergy += unit * 3;\r\n                        if (i === 0 || rotationList[i - 1].member != character || rotationList[i - 1].action !== 'Q') {\r\n                            myEnergy -= 3;\r\n                        }\r\n                    }\r\n                    isInCt = true;\r\n                }\r\n            } else {\r\n                isInCt = false;\r\n            }\r\n        }\r\n    } else {\r\n        myEnergy = unit * 3 - 3;\r\n    }\r\n    const allEnergy = 0;\r\n    const otherEnergy = 0;\r\n    const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n}\r\n\r\nfunction weaponEnergySub_(\r\n    character: string,  // eslint-disable-line\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    members: string[],  // eslint-disable-line\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,  // eslint-disable-line\r\n): TWeaponEnergyRet {\r\n    const messages = [\r\n        '130310212/2.5/3/3.5/4151',\r\n    ];\r\n    const myEnergy = [2, 2.5, 3, 3.5, 4][weaponRefine - 1] * 3 * Math.min(countE(character, rotationList) + countC(character, rotationList), Math.trunc(rotationLength / 15));\r\n    const allEnergy = 0;\r\n    const otherEnergy = 0;\r\n    const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n}\r\n","import _ from \"lodash\";\r\nimport { NUMBER_OF_MEMBERS, TActionItem, TTeam, TTeamMemberResult, getCharacterDetail, getCharacterMaster } from \"./team\";\r\nimport { CHARACTER_E_DELAY_MAP, CHARACTER_E_UNTIL_MAP, CHARACTER_Q_NOT_RECHARGEABLE, CHARACTER_Q_TO_E_ARR, SP_LONG, SP_NEXT, SP_SELF, SP_SHRT, getDurationFromInfo, getElementalSkillActions, getParticleInfo, getParticleNumFromInfo, getReceiveTypeFromInfo } from \"@/particlemaster\";\r\nimport { TERParticle, RECHARGE_PARTICLE_SKILL, countE, countC, countQ, RECHARGE_PARTICLE_FAVONIUS, RECHARGE_PARTICLE_RESONANCE, TEREnergy, RECHARGE_ENERGY_ARTIFACT, RECHARGE_ENERGY_ATTACK, ATTACK_ENERGY_COUNT_OBJ } from \"./ERCalculatorCommon\";\r\nimport { CHARACTER_ENERGY_FUNC, CHARACTER_PARTICLE_EXTRA_FUNC } from \"./ERCalculatorFuncCharacter\";\r\nimport { WEAPON_ENERGY_FUNC } from \"./ERCalculatorFuncWeapon\";\r\n\r\nexport function getParticleByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle[] | undefined {\r\n    const kind = RECHARGE_PARTICLE_SKILL;\r\n    const resultMap = new Map<string, number[]>();\r\n    if (!character) return undefined;\r\n    if (!rotationList?.length) {\r\n        rotationList = [{\r\n            id: 0,\r\n            member: character,\r\n            action: getElementalSkillActions(character)[0],\r\n        }];\r\n    }\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (character === '' && constellation >= 6) {\r\n        const eCount = countE(character, rotationList);\r\n        const cCount = countC(character, rotationList);\r\n        const qCount = countQ(character, rotationList);\r\n        const action = 'E';\r\n        const particleInfo = getParticleInfo(character, action);\r\n        const num = getParticleNumFromInfo(particleInfo) * Math.trunc(Math.min(rotationLength, Math.min(eCount, cCount) * 5.5 + qCount * 18) / 5.5);\r\n        const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(resultVal, num, team, onFields);\r\n        resultMap.set(action, resultVal);\r\n    } else if (character === '') {\r\n        let ousiaLength = 0;\r\n        let isOusia = true; // \r\n        rotationList.forEach(rotation => {\r\n            if (rotation.member == character && rotation.action.includes('C')) {    // \r\n                isOusia = !isOusia;\r\n            }\r\n            if (isOusia) {\r\n                ousiaLength++;\r\n            }\r\n        })\r\n        const action = 'E';\r\n        const particleInfo = getParticleInfo(character, action);\r\n        const num = getParticleNumFromInfo(particleInfo, rotationLength) * Math.trunc(ousiaLength / rotationList.length);\r\n        const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(resultVal, num, team, onFields);\r\n        resultMap.set(action, resultVal);\r\n    } else {\r\n        const timeArr = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        let curCharacter;\r\n        let isBursting = false;\r\n        let untilMap = new Map<string[], number>();\r\n        let delayActions: string[] | undefined;    // delayActions\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (rotation.member != curCharacter) {\r\n                isBursting = false;\r\n            }\r\n            if (rotation.member == character) {\r\n                let action = rotation.action;\r\n                if (action === 'Q') {\r\n                    isBursting = true; // \r\n                    if (CHARACTER_Q_TO_E_ARR.includes(character)) {\r\n                        action = 'E';\r\n                    }\r\n                }\r\n                if (untilMap && untilMap.size > 0) {\r\n                    for (const [key, value] of untilMap.entries()) {\r\n                        if (key.filter(untilAction => action.indexOf(untilAction) != -1).length > 0) {\r\n                            let untilCount = value;\r\n                            if (untilCount) {\r\n                                untilCount -= action.startsWith('N') ? action.length === 1 ? 1 : Number(action.substring(1, 2)) : 1;\r\n                                if (untilCount > 0) {\r\n                                    untilMap.set(key, untilCount);\r\n                                } else {\r\n                                    untilMap.clear();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (action.startsWith('E') || delayActions && delayActions.filter(delayAction => action.indexOf(delayAction) != -1).length) {\r\n                    const workMap = CHARACTER_E_UNTIL_MAP.get(character);\r\n                    if (workMap && workMap.size > 0) {\r\n                        untilMap = _.cloneDeep(workMap);\r\n                    } else if (CHARACTER_E_DELAY_MAP.has(character)) {\r\n                        if (action.startsWith('E')) {\r\n                            delayActions = _.cloneDeep(CHARACTER_E_DELAY_MAP.get(character));\r\n                            continue;\r\n                        }\r\n                        delayActions = undefined;\r\n                        action = 'E';\r\n                    }\r\n                    const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                    timeArr[myIndex] = setSkillParticleNumToArr(resultVal, character, action, constellation, team, rotationLength, rotationList, i, onFields, timeArr[myIndex], isBursting);\r\n                    resultMap.set(action, resultVal);\r\n                }\r\n            }\r\n            curCharacter = rotation.member;\r\n        }\r\n    }\r\n    const result: TERParticle[] = [];\r\n    const characterMaster = getCharacterMaster(character);\r\n    const element = characterMaster?. ?? '';\r\n    resultMap.forEach((value, key) => {\r\n        result.push([kind, key, element, value, []]);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getParticleByCharacterExtra(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle[] | undefined {\r\n    const func = CHARACTER_PARTICLE_EXTRA_FUNC[character];\r\n    if (func === undefined) return undefined;\r\n    const ret = func(character, constellation, team.members, rotationLength, rotationList, onFields);\r\n    if (ret === undefined) return undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (myIndex === -1) return undefined;\r\n    const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const result: TERParticle = [ret[0], ret[1], ret[2], particles, ret[6]];\r\n    if (ret[3]) {   // \r\n        particles[myIndex] += ret[3];\r\n    }\r\n    if (ret[4]) {   // \r\n        splitNumToArrByOnFieldRate(particles, ret[4], team, onFields);\r\n    }\r\n    if (ret[5].length) {   // \r\n        for (let i = 0; i < ret[5].length && i < particles.length; i++) {\r\n            particles[i] += ret[5][i];\r\n        }\r\n    }\r\n    return [result];\r\n}\r\n\r\nexport function getParticleByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    if (['', '', '', '', ''].includes(weapon)) {\r\n        const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        const ct = [12, 10.5, 9, 7.5, 6][weaponRefine - 1];\r\n        let triggerCnt = 1;\r\n        if (rotationList?.length) {\r\n            const rindexArr: number[] = [];\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character && (i === 0 || rotationList[i - 1].member != character)) {\r\n                    rindexArr.push(i);\r\n                }\r\n            }\r\n            const onField = onFields[memberNameArr.indexOf(character)];\r\n            triggerCnt = Math.min(Math.trunc(rotationLength / ct), rindexArr.length + Math.max(0, Math.trunc(rotationLength * onField / 100 / ct) - 1));\r\n            for (let i = 0; i < triggerCnt; i++) {\r\n                let nxtCharacter = character;\r\n                if (i < rindexArr.length && (rindexArr[i] + 1) < rotationList.length) {\r\n                    nxtCharacter = rotationList[rindexArr[i] + 1].member;\r\n                }\r\n                const toIndex = memberNameArr.indexOf(nxtCharacter);\r\n                particles[toIndex] += 3;\r\n            }\r\n        } else {\r\n            const toIndex = memberNameArr.indexOf(character);\r\n            particles[toIndex] = 3 * triggerCnt;\r\n        }\r\n        result = [RECHARGE_PARTICLE_FAVONIUS, weapon, '', particles, []];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleByResonance(\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined = undefined;\r\n    if (team.members.filter(member => member.name).length < 4) return result;\r\n    const electroCount = team.members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n    if (electroCount >= 2) { // \r\n        const messages = [\r\n            '100%5',\r\n        ];\r\n        let allParticle = 0; // \r\n        if (team.members.filter(member => ['', '', '', ''].includes(getCharacterMaster(member.name)?. ?? '--')).length) {\r\n            const ct = 5;\r\n            allParticle = 1 * Math.trunc(rotationLength / ct);\r\n        }\r\n        const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(particles, allParticle, team, onFields);\r\n        result = [RECHARGE_PARTICLE_RESONANCE, '', '', particles, messages];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n    teamMemberResult?: TTeamMemberResult,\r\n): TEREnergy[] {\r\n    const result: TEREnergy[] = [];\r\n    const func = CHARACTER_ENERGY_FUNC[character];\r\n    if (func === undefined) return result;\r\n    const ret = func(character, constellation, team.members, rotationLength, rotationList, teamMemberResult);\r\n    if (!ret?.length) return result;\r\n    const myIndex = team.members.map(member => member.name).indexOf(character);\r\n    if (myIndex === -1) return result;\r\n    ret.forEach(entry => {\r\n        const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        const workResult: TEREnergy = [entry[0], entry[1], energies, entry[6]];\r\n        if (entry[2]) {   // \r\n            energies[myIndex] += entry[2];\r\n        }\r\n        if (entry[3]) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                energies[i] += entry[3];\r\n            }\r\n        }\r\n        if (entry[4]) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                if (i != myIndex) {\r\n                    energies[i] += entry[4];\r\n                }\r\n            }\r\n        }\r\n        if (entry[5]?.length) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                energies[i] += entry[5][i];\r\n            }\r\n        }\r\n        result.push(workResult);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n): TEREnergy | undefined {\r\n    let result: TEREnergy | undefined = undefined;\r\n    const func = WEAPON_ENERGY_FUNC[weapon];\r\n    if (func === undefined) return result;\r\n    const members = team.members.map(member => member.name);\r\n    const ret = func(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    if (!ret?.length) return result;\r\n    const myIndex = members.indexOf(character);\r\n    if (myIndex === -1) return result;\r\n    const entry = ret;\r\n    const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    result = [entry[0], entry[1], energies, entry[6]];\r\n    if (entry[2]) {   // \r\n        energies[myIndex] += entry[2];\r\n    }\r\n    if (entry[3]) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            energies[i] += entry[3];\r\n        }\r\n    }\r\n    if (entry[4]) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            if (i != myIndex) {\r\n                energies[i] += entry[4];\r\n            }\r\n        }\r\n    }\r\n    if (entry[5]?.length) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            energies[i] += entry[5][i];\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByArtifact(\r\n    character: string,\r\n    artifactSet4: string,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n): TEREnergy | undefined {\r\n    const rechargeKind = RECHARGE_ENERGY_ARTIFACT;\r\n    const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const messages: string[] = [];\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const qCount = countQ(character, rotationList);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    let otherEnergy = 0;\r\n    if (artifactSet4 === '') {\r\n        otherEnergy = 6 * qCount;\r\n    }\r\n    if (otherEnergy) {\r\n        messages.push('226');\r\n        for (let i = 0; i < energies.length; i++) {\r\n            if (i != myIndex) {\r\n                energies[i] += otherEnergy;\r\n            }\r\n        }\r\n    }\r\n    if (energies.filter(e => e > 0).length || messages.length) {\r\n        return [rechargeKind, artifactSet4, energies, messages];\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function getEnergyByAttack(\r\n    character: string,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n): TEREnergy | undefined {\r\n    let result: TEREnergy | undefined = undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    const characterDetail = getCharacterDetail(character);\r\n    if (characterDetail) {\r\n        const denominator = ATTACK_ENERGY_COUNT_OBJ[characterDetail.];\r\n        if (denominator) {\r\n            let hitCount = 0;\r\n            if (rotationList?.length) {\r\n                rotationList.filter(rotation => rotation.member == character).forEach(rotation => {\r\n                    let withC = false;\r\n                    if (rotation.action.startsWith('N')) {\r\n                        let workHitCount = 0;\r\n                        let dans = 1;\r\n                        if (rotation.action.length > 1) {\r\n                            dans = Number(rotation.action.substring(1, 2));\r\n                        }\r\n                        characterDetail...forEach((obj: any) => {\r\n                            if (obj. && obj..endsWith('')) {\r\n                                const workDan = obj..substring(0, 1);\r\n                                if (!isNaN(workDan) && dans <= Number(workDan)) {\r\n                                    if (obj.HIT) {\r\n                                        workHitCount += obj.HIT;\r\n                                    }\r\n                                }\r\n                            }\r\n                        })\r\n                        if (workHitCount < dans) {\r\n                            workHitCount = dans;\r\n                        }\r\n                        hitCount += workHitCount;\r\n                        if (rotation.action.endsWith('C')) {\r\n                            withC = true;\r\n                        }\r\n                    }\r\n                    if (rotation.action === 'C' || withC) {\r\n                        let workHitCount = 1;\r\n                        characterDetail...forEach((obj: any) => {\r\n                            if (obj. && obj. === '') {\r\n                                if (obj.HIT) {\r\n                                    workHitCount = obj.HIT;\r\n                                }\r\n                            }\r\n                        })\r\n                        hitCount += workHitCount;\r\n                    }\r\n                })\r\n            }\r\n            const energy = Math.trunc(hitCount / denominator);\r\n            if (energy) {\r\n                const rechargeKind = RECHARGE_ENERGY_ATTACK;\r\n                const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                const messages: string[] = [];\r\n                result = [rechargeKind, '', energies, messages];\r\n                energies[myIndex] += energy;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction setSkillParticleNumToArr(\r\n    arr: number[],\r\n    character: string,\r\n    action: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    onFields: number[],\r\n    time: number,\r\n    isBursting = false,\r\n) {\r\n    const particleInfo = getParticleInfo(character, action, constellation, isBursting);\r\n    if (particleInfo) {\r\n        const rotation = rotationList[index];\r\n        if (rotation) {\r\n            const num = getParticleNumFromInfo(particleInfo, rotationLength - time);\r\n            const receiveType = getReceiveTypeFromInfo(particleInfo);\r\n            const duration = getDurationFromInfo(particleInfo);\r\n            if ([SP_SELF, SP_NEXT].includes(receiveType)) {\r\n                addNumToArr(arr, num, team, rotationList, index, receiveType);\r\n            } else if ([SP_LONG, SP_SHRT].includes(receiveType)) {\r\n                splitNumToArrByOnFieldRate(arr, num, team, onFields);\r\n            }\r\n            time += duration;\r\n        }\r\n    }\r\n    return time;\r\n}\r\n\r\nfunction addNumToArr(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    receiveType = SP_NEXT,\r\n) {\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const nxtRotation = (index + receiveType - SP_SELF) < rotationList.length ? rotationList[index + receiveType - SP_SELF] : rotationList[0];\r\n    if (nxtRotation.action === 'Q' && CHARACTER_Q_NOT_RECHARGEABLE.includes(nxtRotation.member)) {\r\n        num = 0;\r\n    }\r\n    arr[memberNameArr.indexOf(nxtRotation.member)] += num;\r\n}\r\n\r\nexport function splitNumToArrByOnFieldRate(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    onFields: number[],\r\n) {\r\n    const denominator = onFields.map(v => Math.pow(v / 100, 2)).reduce((p, c) => p + c, 0);\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if (team.members[i].name) {\r\n            const onField = onFields[i];\r\n            arr[i] += num * Math.pow(onField / 100, 2) / denominator;\r\n        }\r\n    }\r\n}\r\n","\r\nimport _ from \"lodash\";\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { ARTIFACT_SET_MASTER, CHARACTER_MASTER, ELEMENT_BG_COLOR_CLASS, ELEMENT_IMG_SRC, IMG_SRC_DUMMY, TArtifactSetKey, WEAPON_IMG_SRC } from \"@/master\";\r\nimport { CHARACTER_E_DELAY_MAP, CHARACTER_E_UNTIL_MAP, CHARACTER_Q_NOT_RECHARGEABLE, getCooltimeFromInfo, getDurationFromInfo, getElementalSkillActions, getParticleInfo } from \"@/particlemaster\";\r\nimport { getCharacterDetail, getCharacterMaster, getWeaponMaster, NUMBER_OF_MEMBERS, setupCharacterDetailMap, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport { getOnFieldRate, TERParticle, RECHARGE_PARTICLE_SKILL, RECHARGE_PARTICLE_PASSIVE, RECHARGE_PARTICLE_CONSTELLATION, TEREnergy, RECHARGE_ENERGY_SKILL, RECHARGE_ENERGY_BURST, RECHARGE_ENERGY_PASSIVE, RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_ENEMY, countQ, isRechargeKindParticle, isRechargeKindEnergy, RECHARGE_PARTICLE_RESONANCE, RECHARGE_PARTICLE_FAVONIUS, RECHARGE_ENERGY_WEAPON, RECHARGE_ENERGY_ARTIFACT, RECHARGE_ENERGY_ATTACK } from \"./ERCalculatorCommon\";\r\nimport { getEnergyByArtifact, getEnergyByAttack, getEnergyByCharacter, getEnergyByWeapon, getParticleByCharacter, getParticleByCharacterExtra, getParticleByResonance, getParticleByWeapon, splitNumToArrByOnFieldRate } from \"./ERCalculatorFunc\";\r\n\r\ntype TCalculatorInput = {\r\n    character: string,                  // \r\n    energyCost: number,                 //   40-90\r\n    constellation: number,              //  0-6\r\n    initialWeapon: string | undefined,  // \r\n    currentWeapon: string | undefined,  // \r\n    weaponRefine: number,               //  1-5\r\n    artifactSet4: string | undefined,   // 4\r\n    onField: number,                    // \r\n    replaceWeapons: string[],           //     \r\n}\r\n\r\ntype TCalculatorInputRow = {\r\n    character: string,          // \r\n    rechargeKind: string,       // \r\n    triggerName: string,        // ,,,\r\n    element: string,            // \r\n    initialValues: number[],    // \r\n    currentValues: number[],    // \r\n    unit: number,               // \r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"ERCalculator\",\r\n    props: {\r\n        team: { type: Object as PropType<TTeam>, required: true },\r\n        teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n        constellations: { type: Object as PropType<TConstellation> },\r\n    },\r\n    setup(props) {\r\n        const { displayName } = CompositionFunction();\r\n        const calculatorInput = reactive([] as TCalculatorInput[]);\r\n        const inputRowParticle = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowEnergy = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowParticleEnemy = reactive([] as TCalculatorInputRow[]);\r\n        const messages = reactive([] as string[][]);\r\n        const DEFAULT_ROTATION_LENGTH = 20;\r\n        const DEFAULT_COMBAT_LENGTH = 90;\r\n        const rotationLength = ref(DEFAULT_ROTATION_LENGTH); // \r\n        const combatLength = ref(DEFAULT_COMBAT_LENGTH);   // \r\n        const supplyFromEnemy = reactive([\r\n            ['', 3, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n        ] as [string, number, number][]);\r\n        const isOpenSupplyFromEnemy = ref(false);\r\n        const REPLACE_WEAPON_MAP = {\r\n            '': ['', ''],\r\n            '': ['', ''],\r\n            '': ['', '', ''],\r\n            '': [''],\r\n            '': ['', ''],\r\n        };\r\n        const isShowUsage = ref(false);\r\n\r\n        onMounted(() => {\r\n            setupCharacterDetailMap().then(() => {\r\n                updateRotationLength(props.team);\r\n                setupInput(props.team, props.teamMemberResult);\r\n            });\r\n        })\r\n\r\n        const watchCount = ref(0);\r\n        watch(() => _.cloneDeep(props), (newVal, oldVal) => {\r\n            updateRotationLength(newVal.team);\r\n            if (!_.isEqual(newVal.team.members, oldVal.team.members) || !_.isEqual(newVal.teamMemberResult, oldVal.teamMemberResult)) {\r\n                setupInput(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            } else {\r\n                setupInputRows(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            }\r\n        }, { deep: true })\r\n\r\n        function getConstellation(character: string, team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            if (teamMemberResult) {\r\n                const workArr = team.members.filter(member => member.name == character);\r\n                if (workArr.length) {\r\n                    return teamMemberResult[workArr[0].id]?.characterInput. ?? (props.constellations ? props.constellations[character] ?? 0 : 0);\r\n                }\r\n            }\r\n            return props.constellations ? props.constellations[character] ?? 0 : 0;\r\n        }\r\n\r\n        function updateRotationLength(team: TTeam) {\r\n            const memberNameArr = team.members.map(member => member.name);\r\n            const eLength = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            const qLength = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            if (team.rotation.length) {\r\n                for (let i = 0; i < team.rotation.length; i++) {\r\n                    const rotation = team.rotation[i];\r\n                    const memberIndex = memberNameArr.indexOf(rotation.member);\r\n                    if (memberIndex == -1) continue;\r\n                    if (rotation.action === 'Q' || rotation.action.startsWith('E')) {\r\n                        const characterDetail = getCharacterDetail(rotation.member);\r\n                        if (rotation.action === 'Q') {\r\n                            let ct = characterDetail?.. ?? 0;\r\n                            if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 2) {\r\n                                    ct *= 0.85;\r\n                                }\r\n                            } else if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 6) {\r\n                                    ct -= 5;\r\n                                }\r\n                            }\r\n                            qLength[memberIndex] += ct;\r\n                        } else {\r\n                            const constellation = getConstellation(rotation.member, props.team, props.teamMemberResult);\r\n                            const particleInfo = getParticleInfo(rotation.member, rotation.action, constellation);\r\n                            let ct = 0;\r\n                            let duration = 0;\r\n                            if (particleInfo) {\r\n                                ct = getCooltimeFromInfo(particleInfo) ?? 0;\r\n                                duration = getDurationFromInfo(particleInfo);\r\n                                if (memberNameArr.includes('') && rotation.member != '') {\r\n                                    const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                    if (constellation >= 2) {\r\n                                        ct *= 0.85;\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (ct > eLength[memberIndex] && ct > duration) {\r\n                                eLength[memberIndex] = ct;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let newLength = Math.max(...eLength, ...qLength);\r\n            if (newLength == 0) {\r\n                newLength = DEFAULT_ROTATION_LENGTH;\r\n            }\r\n            rotationLength.value = newLength;\r\n        }\r\n\r\n        function updateOnFields(team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                calculatorInput[i].onField = onFields[i];\r\n            }\r\n        }\r\n\r\n        const setupInput = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            const newInput: TCalculatorInput[] = [];\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < team.members.length; i++) {\r\n                const member = team.members[i];\r\n                const characterDetail = getCharacterDetail(member.name);\r\n                const constellation = constellations[i];\r\n                const memberResult = teamMemberResult ? teamMemberResult[member.id] : undefined;\r\n                const weapon = memberResult?.characterInput.weapon;\r\n                const weaponRefine = memberResult?.characterInput. ?? 1;\r\n                let artifactSet4 = undefined;\r\n                if (memberResult && memberResult.characterInput.artifactSets.length == 2) {\r\n                    artifactSet4 = memberResult.characterInput.artifactSets[0] == memberResult.characterInput.artifactSets[1] ? memberResult.characterInput.artifactSets[0] : undefined;\r\n                }\r\n                let replaceWeapons: string[] = [];\r\n                if (characterDetail) {\r\n                    replaceWeapons = REPLACE_WEAPON_MAP[characterDetail.];\r\n                }\r\n                newInput.push({\r\n                    character: member.name,\r\n                    energyCost: characterDetail?.. ?? 0,\r\n                    constellation: constellation,\r\n                    initialWeapon: weapon,\r\n                    currentWeapon: weapon,\r\n                    weaponRefine: weaponRefine,\r\n                    artifactSet4: artifactSet4,\r\n                    onField: onFields[i],\r\n                    replaceWeapons: replaceWeapons,\r\n                });\r\n            }\r\n            calculatorInput.splice(0, calculatorInput.length, ...newInput);\r\n\r\n            setupInputRows(team, teamMemberResult);\r\n        }\r\n\r\n        function pushInputRowParticle(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, particle: TERParticle) {\r\n            const initialValues = _.cloneDeep(particle[3]);\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(initialValues[i] * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: particle[0],\r\n                triggerName: particle[1],\r\n                element: particle[2],\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 1,\r\n            })\r\n            if (particle[4].length) {\r\n                particle[4].forEach(message => {\r\n                    let work = '';\r\n                    if (particle[0] === RECHARGE_PARTICLE_SKILL) {\r\n                        work = '';\r\n                    } else if (particle[0] === RECHARGE_PARTICLE_PASSIVE) {\r\n                        work = '';\r\n                    } else if (particle[0] === RECHARGE_PARTICLE_CONSTELLATION) {\r\n                        work = '';\r\n                        if (particle[1]) {\r\n                            work += ' ' + particle[1] + '';\r\n                        }\r\n                    } else {\r\n                        work = particle[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n        function pushInputRowEnergy(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, energy: TEREnergy) {\r\n            const initialValues = _.cloneDeep(energy[2]);\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(initialValues[i] * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: energy[0],\r\n                triggerName: energy[1],\r\n                element: '',\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 0.1,\r\n            })\r\n            if (energy[3].length) {\r\n                energy[3].forEach(message => {\r\n                    let work = '';\r\n                    if (energy[0] === RECHARGE_ENERGY_SKILL) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_BURST) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_PASSIVE) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_CONSTELLATION) {\r\n                        work = '';\r\n                        if (energy[1]) {\r\n                            work += ' ' + energy[1] + '';\r\n                        }\r\n                    } else {\r\n                        work = energy[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n\r\n        const setupInputRows = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            updateOnFields(team, teamMemberResult);\r\n            const newInputRowPacticle1: TCalculatorInputRow[] = [];\r\n            const newInputRowPacticle2: TCalculatorInputRow[] = [];\r\n            const newInputRowEnergy: TCalculatorInputRow[] = [];\r\n            const newInputRowResonance: TCalculatorInputRow[] = [];\r\n            const newinputRowParticleEnemy: TCalculatorInputRow[] = [];\r\n            const newMessages: string[][] = [];\r\n            const onFields = calculatorInput.map(s => s.onField);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                const character = calculatorInput[i].character;\r\n                if (!character) continue;\r\n                const constellation = calculatorInput[i].constellation;\r\n                const weapon = calculatorInput[i].currentWeapon;\r\n                const weaponRefine = calculatorInput[i].weaponRefine;\r\n                const artifactSet4 = calculatorInput[i].artifactSet4;\r\n                // \r\n                [\r\n                    getParticleByCharacter(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                    getParticleByCharacterExtra(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                ].forEach(result => {\r\n                    if (result) {\r\n                        result.forEach(entry => {\r\n                            pushInputRowParticle(newInputRowPacticle1, newMessages, character, entry);\r\n                        })\r\n                    }\r\n                })\r\n                // \r\n                const energyByCharacter = getEnergyByCharacter(character, constellation, team, rotationLength.value, team.rotation, teamMemberResult);\r\n                energyByCharacter.forEach(entry => {\r\n                    pushInputRowEnergy(newInputRowEnergy, newMessages, character, entry);\r\n                })\r\n                // \r\n                if (weapon) {\r\n                    // \r\n                    const particleByWeapon = getParticleByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation, onFields);\r\n                    if (particleByWeapon) {\r\n                        pushInputRowParticle(newInputRowPacticle2, newMessages, character, particleByWeapon);\r\n                    }\r\n                    // \r\n                    const energyByWeapon = getEnergyByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation);\r\n                    if (energyByWeapon) {\r\n                        pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByWeapon);\r\n                    }\r\n                }\r\n                if (artifactSet4) {\r\n                    const energyByArtifact = getEnergyByArtifact(character, artifactSet4, team, rotationLength.value, team.rotation);\r\n                    if (energyByArtifact) {\r\n                        pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByArtifact);\r\n                    }\r\n                }\r\n                // \r\n                const energyByAttack = getEnergyByAttack(character, team, rotationLength.value, team.rotation);\r\n                if (energyByAttack) {\r\n                    pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByAttack);\r\n                }\r\n            }\r\n            // \r\n            const particleByResonance = getParticleByResonance(team, rotationLength.value, team.rotation, onFields);\r\n            if (particleByResonance) {\r\n                pushInputRowParticle(newInputRowResonance, newMessages, '', particleByResonance);\r\n            }\r\n            // \r\n            supplyFromEnemy.filter(s => s[1] || s[2]).forEach(entry => {\r\n                const num = (entry[1] * 3 + entry[2]) * rotationLength.value / combatLength.value; // 3\r\n                const initialValues = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                splitNumToArrByOnFieldRate(initialValues, num, team, onFields);\r\n                pushInputRowParticle(newinputRowParticleEnemy, newMessages, '', [RECHARGE_PARTICLE_ENEMY, '', entry[0], initialValues, []]);\r\n            })\r\n            inputRowParticle.splice(0, inputRowParticle.length, ...newInputRowPacticle1, ...newInputRowPacticle2, ...newInputRowResonance);\r\n            inputRowEnergy.splice(0, inputRowEnergy.length, ...newInputRowEnergy);\r\n            inputRowParticleEnemy.splice(0, inputRowParticleEnemy.length, ...newinputRowParticleEnemy);\r\n            messages.splice(0, messages.length, ...newMessages);\r\n        }\r\n\r\n        /** () */\r\n        const burstCounts = computed(() => {\r\n            const result: { [key: number]: number } = { 0: 1, 1: 1, 2: 1, 3: 1 };\r\n            if (props.team.rotation?.length) {\r\n                for (let i = 0; i < props.team.members.length; i++) {\r\n                    const member = props.team.members[i];\r\n                    if (member.name) {\r\n                        result[i] = countQ(member.name, props.team.rotation);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /** () */\r\n        const particleRecharges = computed(() => {\r\n            const result: number[] = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                const member = props.team.members[i];\r\n                if (!member.name) continue;\r\n                const characterMaster = getCharacterMaster(member.name);\r\n                const myElement = characterMaster?.;\r\n                if (!myElement) continue;\r\n                [inputRowParticle, inputRowParticleEnemy].forEach(input => {\r\n                    input.filter(s => isRechargeKindParticle(s.rechargeKind)).forEach(entry => {\r\n                        let energy = 0;\r\n                        for (let j = 0; j < entry.currentValues.length; j++) {\r\n                            if (j == i) {\r\n                                energy += entry.currentValues[j];\r\n                            } else {\r\n                                energy += entry.currentValues[j] * 0.6;\r\n                            }\r\n                        }\r\n                        if (entry.element == myElement) {\r\n                            energy *= 3;\r\n                        } else if (entry.element == '') {\r\n                            energy *= 2;\r\n                        }\r\n                        result[i] = Math.round((result[i] + energy) * 10) / 10;\r\n                    })\r\n                })\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /**  */\r\n        const energyRechargeGls = computed(() => {\r\n            const result = _.fill(Array(NUMBER_OF_MEMBERS), 100);\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                if (!props.team.members[i].name) continue;\r\n                let energyCost = calculatorInput[i]?.energyCost;\r\n                if (!energyCost) continue;\r\n                inputRowEnergy.filter(s => isRechargeKindEnergy(s.rechargeKind)).forEach(entry => {\r\n                    energyCost -= entry.currentValues[i];\r\n                })\r\n                const burstCount = burstCounts.value[i] > 0 ? burstCounts.value[i] : 1;\r\n                const particleEnergy = particleRecharges.value[i] / burstCount;\r\n                if (energyCost > 0 && particleEnergy > 0) {\r\n                    const er = Math.ceil(energyCost * 100 / particleEnergy);\r\n                    result[i] = Math.max(100, er);\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n        const CHARACTER_E_DECREMENT_IN_BURST = computed(() =>\r\n            Object.keys(CHARACTER_MASTER).filter(key => Object.keys(getElementalSkillActions(key)).filter(action => action.indexOf('burst') != -1).length > 0).sort());\r\n\r\n        const characterImgSrc = (character: string) => getCharacterMaster(character)?.icon_url ?? IMG_SRC_DUMMY;\r\n        const weaponImgSrc = (character: string, weapon?: string) => {\r\n            const characterMater = getCharacterMaster(character);\r\n            return weapon ? characterMater ? getWeaponMaster(characterMater., weapon)?.icon_url ?? IMG_SRC_DUMMY : IMG_SRC_DUMMY : IMG_SRC_DUMMY;\r\n        }\r\n        const replaceWeaponImgSrc = (input: TCalculatorInput, weapon: string) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (input.character && input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                const characterMaster = getCharacterMaster(input.character);\r\n                if (characterMaster) {\r\n                    result = getWeaponMaster(characterMaster., weapon)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else {\r\n                    result = getCharacterMaster(row.character)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1Class = (row: TCalculatorInputRow) =>\r\n            (row.rechargeKind && row.rechargeKind == RECHARGE_PARTICLE_RESONANCE) ? 'input-item' : 'input-item-character';\r\n        const rowImgSrc2 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_PASSIVE, RECHARGE_PARTICLE_PASSIVE].includes(row.rechargeKind)) { // \r\n                    if (row.triggerName) {\r\n                        const characterDetail = getCharacterDetail(row.character);\r\n                        const workArr = characterDetail?..filter(obj => obj. == row.triggerName);\r\n                        result = workArr?.length ? workArr[0].icon_url ?? IMG_SRC_DUMMY : IMG_SRC_DUMMY;\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) { // \r\n                    if (row.triggerName) {\r\n                        const characterDetail = getCharacterDetail(row.character);\r\n                        const constellationObj = characterDetail?.[row.triggerName];\r\n                        result = constellationObj?.icon_url ?? IMG_SRC_DUMMY;\r\n                    }\r\n                } else if ([RECHARGE_PARTICLE_FAVONIUS, RECHARGE_ENERGY_WEAPON].includes(row.rechargeKind) && row.triggerName) { // \r\n                    const characterMater = getCharacterMaster(row.character);\r\n                    if (characterMater) {\r\n                        const weaponType = characterMater.;\r\n                        const weaponMaster = getWeaponMaster(weaponType, row.triggerName);\r\n                        if (weaponMaster) {\r\n                            result = weaponMaster.icon_url;\r\n                        }\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_ARTIFACT].includes(row.rechargeKind) && row.triggerName) { // \r\n                    const artifactSetMater = ARTIFACT_SET_MASTER[(row.triggerName as TArtifactSetKey)];\r\n                    if (artifactSetMater) {\r\n                        result = artifactSetMater.image;\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_ATTACK].includes(row.rechargeKind)) { // \r\n                    const characterMaster = getCharacterMaster(row.character);\r\n                    if (characterMaster) {\r\n                        result = WEAPON_IMG_SRC[characterMaster.];\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const bgColorClass = (index: number) => {\r\n            const master = index < props.team.members.length ? getCharacterMaster(props.team.members[index].name) : undefined;\r\n            return ' ' + (master ? (ELEMENT_BG_COLOR_CLASS as any)[master.] : 'white');\r\n        }\r\n        const bgColorClass2 = (row: TCalculatorInputRow) =>\r\n            ' ' + (row.element ? (ELEMENT_BG_COLOR_CLASS as any)[row.element] : 'white');\r\n        const replaceWeaponClass = (input: TCalculatorInput, weapon: string) =>\r\n            input.currentWeapon == weapon ? ' disabled' : '';\r\n        const triggerName = (row: TCalculatorInputRow) => {\r\n            let result = '';\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_PASSIVE, RECHARGE_PARTICLE_PASSIVE].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) {\r\n                    result = ' ' + row.triggerName + '';\r\n                } else if ([RECHARGE_ENERGY_WEAPON, RECHARGE_PARTICLE_FAVONIUS].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_ENERGY_ATTACK].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const actionName = (action: string) => {\r\n            let result = '';\r\n            if (action.startsWith('N')) {\r\n                result = '';\r\n            } else if (action === 'C') {\r\n                result = '';\r\n            } else if (action === 'P') {\r\n                result = '';\r\n            } else if (action.startsWith('E')) {\r\n                result = '';\r\n            } else if (action === 'Q') {\r\n                result = '';\r\n            }\r\n            return result;\r\n        }\r\n\r\n        const inputOnChange = () => {\r\n            setupInputRows(props.team, props.teamMemberResult);\r\n        }\r\n\r\n        const replaceWeaponOnClick = (input: TCalculatorInput, weapon: string) => {\r\n            if (input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                if (input.currentWeapon == weapon) {\r\n                    input.currentWeapon = input.initialWeapon;\r\n                } else {\r\n                    input.currentWeapon = weapon;\r\n                }\r\n                inputOnChange();\r\n            }\r\n        }\r\n\r\n        const resetInput = () => {\r\n            inputRowParticleEnemy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowParticle.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowEnergy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n        }\r\n\r\n        return {\r\n            displayName,\r\n\r\n            rotationLength,\r\n            combatLength,\r\n            supplyFromEnemy,\r\n            isOpenSupplyFromEnemy,\r\n            calculatorInput,\r\n            inputRowParticle,\r\n            inputRowEnergy,\r\n            inputRowParticleEnemy,\r\n            burstCounts,\r\n            messages,\r\n            CHARACTER_E_DECREMENT_IN_BURST,\r\n            CHARACTER_E_UNTIL_MAP,\r\n            CHARACTER_E_DELAY_MAP,\r\n            CHARACTER_Q_NOT_RECHARGEABLE,\r\n            actionName,\r\n            characterImgSrc,\r\n            weaponImgSrc,\r\n            replaceWeaponImgSrc,\r\n            rowImgSrc1,\r\n            rowImgSrc1Class,\r\n            rowImgSrc2,\r\n            bgColorClass,\r\n            bgColorClass2,\r\n            replaceWeaponClass,\r\n            particleRecharges,\r\n            energyRechargeGls,\r\n            triggerName,\r\n            isShowUsage,\r\n\r\n            inputOnChange,\r\n            replaceWeaponOnClick,\r\n            resetInput,\r\n        }\r\n    }\r\n});\r\n","import { render } from \"./ERCalculator.vue?vue&type=template&id=109f95d0&scoped=true&ts=true\"\nimport script from \"./ERCalculator.vue?vue&type=script&lang=ts\"\nexport * from \"./ERCalculator.vue?vue&type=script&lang=ts\"\n\nimport \"./ERCalculator.vue?vue&type=style&index=0&id=109f95d0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-109f95d0\"]])\n\nexport default __exports__","\r\nimport _ from \"lodash\";\r\nimport draggable from \"vuedraggable\";\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { ELEMENT_BG_COLOR_CLASS, ELEMENT_COLOR_CLASS, IMG_SRC_DUMMY } from \"@/master\";\r\nimport { getElementalSkillActions } from \"@/particlemaster\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { CHARGED_ONLY_CHARACTER, CHARGED_WITH_NORMAL_CHARACTER, CHARGED_WITH_NORMAL_WEAPON, getCharacterDetail, getCharacterMaster, getNormalAttackDan, setupCharacterDetailMap, TActionItem, TConstellation, TMember, TTeam, TTeamMemberResult } from \"./team\";\r\nimport ERCalculator from './ERCalculator.vue';\r\n\r\nexport default defineComponent({\r\n  name: \"TeamRotation\",\r\n  components: {\r\n    draggable,\r\n    ERCalculator,\r\n  },\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n  },\r\n  emit: ['update:rotation', 'click:jump-to-team'],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n    const removeMode = ref(false);\r\n    const normalAttackActions = reactive({} as { [key: string]: string[] }); // //\r\n    const elementalSkillActions = reactive({} as { [key: string]: string[] }); // \r\n    const rotationList = reactive([] as TActionItem[]);\r\n    const actionId = ref(0);\r\n    const rotationDescription = ref('');\r\n    const selectedActionId = ref(-1);\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, async () => {\r\n      await watchFunc(props.team);\r\n    });\r\n\r\n    async function watchFunc(team: TTeam) {\r\n      await setupCharacterDetailMap();\r\n      for (const member of team.members) {\r\n        if (member.name) {\r\n          const characterMaster = getCharacterMaster(member.name);\r\n          if (characterMaster) {\r\n            const isCWith = (CHARGED_WITH_NORMAL_WEAPON.includes(characterMaster?.) || CHARGED_WITH_NORMAL_CHARACTER.includes(member.name)) && !CHARGED_ONLY_CHARACTER.includes(member.name);\r\n            const workArr: string[] = [];\r\n            for (let i = 0; i < getNormalAttackDan(member.name); i++) {\r\n              const work = 'N' + (i > 0 ? String(i + 1) : '');\r\n              workArr.push(work);\r\n              if (isCWith) {\r\n                workArr.push(work + (work === 'N' ? '1C' : 'C'));\r\n              }\r\n            }\r\n            if (!isCWith) {\r\n              workArr.push('C');\r\n            }\r\n            workArr.push('P');\r\n            normalAttackActions[member.name] = workArr;\r\n          }\r\n          elementalSkillActions[member.name] = getElementalSkillActions(member.name);\r\n        }\r\n      }\r\n      const isSameMember = team.rotation.filter(rotation => !team.members.filter(member => member.name).map(member => member.name).includes(rotation.member)).length == 0;\r\n      if (isSameMember) {\r\n        if (team.rotation.length) {\r\n          const workArr = _.cloneDeep(team.rotation);\r\n          workArr.forEach(rotation => {\r\n            if (rotation.action === 'NC') {\r\n              rotation.action = 'N1C';\r\n            } else if (rotation.action.startsWith('E')) {\r\n              const actions = elementalSkillActions[rotation.member];\r\n              if (actions && actions.length > 0 && !actions.includes(rotation.action)) {\r\n                rotation.action = actions[0];\r\n              }\r\n            }\r\n          })\r\n          rotationList.splice(0, rotationList.length, ...workArr);\r\n          actionId.value = Math.max(...rotationList.map(s => s.id)) ?? rotationList.length;\r\n        } else {\r\n          rotationList.splice(0, rotationList.length);\r\n          actionId.value = 0;\r\n        }\r\n      } else {\r\n        rotationList.splice(0, rotationList.length);\r\n        actionId.value = 0;\r\n        updateRotation();\r\n      }\r\n      rotationDescription.value = team.rotationDescription;\r\n      watchCount.value++;\r\n    }\r\n\r\n    onMounted(() => {\r\n      watchFunc(props.team);\r\n      props.team.members.forEach(member => {\r\n        normalAttackIconSrc(member.name);\r\n      })\r\n    })\r\n\r\n    const selectedAction = computed((): TActionItem | undefined => {\r\n      const actionArr = rotationList.filter(rotation => rotation.id == selectedActionId.value);\r\n      return actionArr.length > 0 ? actionArr[0] : undefined;\r\n    })\r\n\r\n    const getActionDetail = (item: TActionItem) => {\r\n      let result;\r\n      const master = getCharacterDetail(item.member);\r\n      if (master) {\r\n        if (normalAttackActions[item.member].includes(item.action)) { // , , \r\n          result = master.;\r\n        } else if (elementalSkillActions[item.member].includes(item.action)) { // \r\n          result = master.;\r\n        } else if (item.action == 'Q') { // \r\n          result = master.;\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const previousRotation = (item: TActionItem) => {\r\n      let result;\r\n      for (const rotation of rotationList) {\r\n        if (item.id == rotation.id) {\r\n          break;\r\n        }\r\n        result = rotation;\r\n      }\r\n      return result;\r\n    }\r\n\r\n    const normalAttackIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const elementalSkillIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const elementalBurstIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const colorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n    const bgColorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_BG_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n\r\n    const actionDisplay = (item: TActionItem) =>\r\n      item.action.startsWith('E') ? item.action.replace(/^E\\./, '') : item.action;\r\n\r\n    const selectedActionClass = (item: TActionItem) =>\r\n      selectedActionId.value == item.id ? ' selected' : '';\r\n\r\n    const updateRotation = () => {\r\n      context.emit('update:rotation', rotationList, rotationDescription.value);\r\n    }\r\n\r\n    const rotationListOnChange = () => {\r\n      updateRotation();\r\n    }\r\n\r\n    const listActionOnClick = (member: TMember, actionKey: string) => {\r\n      let action = actionKey;\r\n      if (normalAttackActions[member.name].includes(action)) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && normalAttackActions[member.name].includes(s.action));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        }\r\n      } else if (action.startsWith('E')) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && elementalSkillActions[member.name].includes(s.action));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        } else {\r\n          const actions = elementalSkillActions[member.name];\r\n          if (actions && actions.length > 0) {\r\n            action = actions[0];\r\n          }\r\n        }\r\n      }\r\n      rotationList.push({\r\n        id: ++actionId.value,\r\n        member: member.name,\r\n        action: action,\r\n      });\r\n      updateRotation();\r\n    }\r\n\r\n    const rotationActionOnClick = (item: TActionItem) => {\r\n      if (removeMode.value) {\r\n        removeItemOnClick(item);\r\n      } else if (selectedActionId.value == item.id) {\r\n        selectedActionId.value = -1;\r\n      } else if (normalAttackActions[item.member].includes(item.action)) {\r\n        selectedActionId.value = item.id;\r\n      } else if (item.action.startsWith('E') && elementalSkillActions[item.member].length > 1) {\r\n        selectedActionId.value = item.id;\r\n      } else {\r\n        selectedActionId.value = -1;\r\n      }\r\n    }\r\n\r\n    const selectedActionOnClick = (item: TActionItem) => {\r\n      for (const actionArr of [normalAttackActions[item.member], elementalSkillActions[item.member]]) {\r\n        if (actionArr?.length) {\r\n          const index = actionArr.indexOf(item.action);\r\n          if (index != -1) {\r\n            item.action = (index + 1) < actionArr.length ? actionArr[index + 1] : actionArr[0];\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      updateRotation();\r\n    }\r\n\r\n    const removeItemOnClick = (item: TActionItem) => {\r\n      rotationList.splice(0, rotationList.length, ...rotationList.filter(s => s != item));\r\n      updateRotation();\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n      IMG_SRC_DUMMY,\r\n      removeMode,\r\n\r\n      watchCount,\r\n      normalAttackIconSrc,\r\n      elementalSkillIconSrc,\r\n      elementalBurstIconSrc,\r\n      colorClass,\r\n      bgColorClass,\r\n\r\n      getCharacterMaster,\r\n\r\n      rotationList,\r\n      rotationDescription,\r\n      previousRotation,\r\n      getCharacterDetail,\r\n      getActionDetail,\r\n      actionDisplay,\r\n      selectedAction,\r\n      selectedActionClass,\r\n\r\n      rotationListOnChange,\r\n      listActionOnClick,\r\n      rotationActionOnClick,\r\n      removeItemOnClick,\r\n      selectedActionOnClick,\r\n      updateRotation,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./TeamRotation.vue?vue&type=template&id=37a78f4d&scoped=true&ts=true\"\nimport script from \"./TeamRotation.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamRotation.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamRotation.vue?vue&type=style&index=0&id=37a78f4d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37a78f4d\"]])\n\nexport default __exports__"],"names":["getLevelStr","ascension","level","ARRAY","getStatValueByLevel","statObj","myLevelStr","lowLevel","highLevel","length","lowValue","highValue","getPropertyValueByLevel","getValueByLevel","valueObj","Number","levelArr","Object","keys","map","s","i","calculateArtifactStatsMain","artifactStatsMain","mainstats","forEach","key","statWithRarity","stat","split","ARTIFACT_MAIN_MASTER","calculateArtifactSubStatByPriority","artifactStatsSub","prioritySubstats","priotritySubstatIndices","priotritySubstatValues","prioritySubstatCounts","totalCount","undefined","noPrioritySubstatArr","ARRAY","filter","includes","noPriorityCount","Math","min","floor","max","substat","ARTIFACT_SUB_MASTER","star4Count","startsWith","multiplier","round","calculateArtifactStats","artifactDetailInput","artifactStats","","","","calculateStats","statsInput","characterInput","conditionInput","optionInput","characterMaster","","","constellation","","weaponMaster","weaponAscension","","weaponLevel","","workStatsObj","_","TEMPLATE","","name","conditionValues","enemyMaster","toStat","statAdjustments","ARRAY","statAdjustmentsEx","ARRAY","_Var","","_Var","_Var","elementalResonance","teamOption","miscOption","optionObj","conditionAdjustments","workValue","Infinity","endsWith","my","replace","validConditionValueArr","makeValidConditionValueArr","calculateStatsTop","updateStatsWithCondition","myDamageDetail","damageDetailMyCharacter","damageDetailMyWeapon","damageDetailMyArtifactSets","CHANGE_KIND_TALENT","myDetailObj","number","checkConditionMatches","my","","overwriteObject","statsObj","error","console","workConditionAdjustments","statFormulaMap","Map","CHANGE_KIND_STATUS","hasCondition","myNew","","concat","myNew","has","set","get","push","","","hpStatArr","defStatArr","atkStatArr","otherStatArr","_ARRAY","_ARRAY","ARRAY","ARRAY","ARRAY","Array","from","indexOf","formulaStatArr","Set","sort","compareFunction","oldStatsObj","postfix","workStat","updateStatsWithConditionSub","fromStat","formulaKey","formulaArr","formula","diffStats","updateStats","statValue","getStatValue","topValue","a","b","arr","lowestArr","aIndex","bIndex","calculateElementalResonance","result","ELEMENTAL_RESONANCE_MASTER","master","","detailObj","matchRet","","","dendroOption","calculateDamageResult","damageResult","vision","reactionResult","TEMPLATE","reactionMasterArr","dmgElementSet","add","selectList","selectEntry","selectedIndex","dmgElement","options","ELEMENTAL_REACTION_MASTER","has","characterArr","","","","","entry","element","reactionMaster","reaction","reactionObj","resultValue","calculate","optionValue","calculate","calculate","calculate","suffix","dmg","","isArray","splice","category","talentDetailArr","workObj","talentDetail","resultArr","calculateDamageFromDetail","n","sum","damageTakenArr","damageTaken","calculateDamageTaken","value","resScoreArr","debug","checkboxList","required","numberList","conditionStr","myCondStr","myCondStrArr","resultSub","checkConditionMatchesSub","myCondArr","isNumeric","work","NUMBER_CONDITION_VALUE_RE","test","workArr","re","RegExp","workCondArr","reRet","exec","elementalMastery","dmgBuff","opt_dmgElement","calculateEnemyRes","calculateEnemyDef","opt_ignoreDef","enemyLevel","calcIgnoreDef","calcDef","calculateRes","res","statName","opt_element","myArr","isCalc","isCalc","isCalc","my","my","myHIT","my","talentChangeDetailObjArr","getChangeDetailObjArr","myConditionValuesAfter","delCondition","addCondition","newValue","String","","desc","myConditionInputAfter","validConditionValueArrAfter","damageDetail","","damageDetailObj","valueBefore","valueAfter","matchesBefore","matchesAfter","new","evalFormula","diff","new","","myTalentChangeDetailObjArr","my","myArr","myValue","myNewValueObj","JSON","parse","stringify","tempStatsObj","entryObj","tempArr","isValid","HIT","artifactSets","my","my","my","description","","DAMAGE_CATEGORY_ARRAY","myResult","calculateDamageFromDetailSub","myResultWork","temp","dmgUpStatArr","dmgUpStat","buffArr","","","opt_max","opt_min","my","my","isUseReference","my","buff","my","my","my","my","myResult","myResult","changeKind","DAMAGE_RESULT_TEMPLATE","nameArr","ALL_ELEMENTS","damage","def","dmgReduction","ARTIFACT_SCORE_FACTORS","ARTIFACT_SCORE_FORMULA_TEMPLATE","calculateArtifactScore","scoringStats","scoringStat","magnification","srcStat","srcStatValue","member","teamMembers","calculatedSupporter","supporters","async","calculateSupporter","supporter","build","character","getDefaultCharacterInput","getDefaultArtifactDetailInput","getDefaultConditionInput","getDefaultStatsInput","getDefaultDamageResultInput","getCharacterMasterDetail","builddata","loadRecommendation","makeDamageDetailObjArrObjCharacter","makeDamageDetailObjArrObjWeapon","makeDamageDetailObjArrObjArtifactSets","setupConditionValues","","updateNumberConditionValues","myCharacterMaster","getCritFromResultEntry","critRate","critDmg","REACTION_DMG_ARR","REACTION_DMG_ELEMENT_MAP","setupReactionDmgElementMap","reactionDmg","getDamageResultArr","rotationDamageEntry","calculateRotationDamageEntry","index","list","reactions","dmgResultEntry","count","counts","plainDmg","calculateReactedDamage","workDmg","calculateRotationTotalDamage","rotationDamageArr","dmgIndex","elementalReaction","reactionTimes","reactionKey","getAmplifyingReactionElement","reactionElement","makeEvalableScript","replaceMap","major","minor","entryArr","warn","replaceAll","script","eval","isFinite","dst","src","srcKeys","basename","path","pop","shift","i18n","createI18n","legacy","locale","fallbackLocale","isGlobal","ARRAY","ARRAY","ARRAY","ARRAY","_ARRAY","_ARRAY","ARRAY_MAP","STAT_PERCENT_LIST","makeStatusTemplate","makeEnemyStatusTemplate","_ARRAY","_ARRAY","_ARRAY","_ARRAY","_ARRAY","ARRAY","TEMPLATE","_","_","_","_","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","ARTIFACT_SET_MASTER_DUMMY","","image","IMG_SRC_DUMMY","CHARACTER_INPUT_TEMPLATE","","","","weapon","","artifactSetMasters","damageDetailElementalResonance","buildname","recommendationSelectedIndex","saveDisabled","removeDisabled","ARTIFACT_TEMPLATE","rarity","setname","cat_id","mainStat","mainStatValue","subStats","ARTIFACT_DETAIL_INPUT_TEMPLATE","","NUMBER_OF_PRIORITY_SUBSTATS","","GENSEN_MASTER_LIST","values","","Disabled","artifact_list","CONDITION_INPUT_TEMPLATE","STATS_INPUT_TEMPLATE","ENEMY_MASTER_LIST","getDefaultOptionInput","OPTION_INPUT_TEMPLATE","SUPPORTER_INPUT_TEMPLATE","supporterBuildname","parseLevelStr","levelStr","makeDefaultBuildname","makeBuildStorageKey","makeOptionStorageKey","makeArtifactScoringStorageKey","makeRecommendationList","opt_buildData","isSavable","overwrite","log","storageKeyArr","localStorage","buildObj","key2","optionsObj","key3","artifactScoringObj","artifactScoring","key4","supporterBuildnameObj","obj","myRecommendation","subkey","artifactRarerityArrArr","artifactRarerity4Num","artifactSet1","artifactSet2","ARTIFACT_SET_MASTER","makeArtifactSetAbbrev","statusName","RECOMMEND_ABBREV_MAP","substring","abbrRe","abbr","makePrioritySubstatValueList","opt_substat","valueArr","makeEasyInputSubstatValueList","weaponType","WEAPON_MASTER","getWeaponMasterDetail","prioritySubstatsDisabled","toKey","artifactSet","mainstat","subkey1","subkey2","subkey3","substatValue","substatCount","prioritySubstatValueList","PROPERTY_MAP","astarIndex","workCharacter","CHARACTER_MASTER","ARTIFACT_KEYS","newList","makeSavedata","resultObj","makeOptionsSavedata","myTalentDetail","myTalentLevel","myDefaultKind","myDefaultElement","myInputCategory","myStatusChangeDetailObjArr","makeDamageDetailObjArr","workCategory","cond","","","","","conditionMap","exclusionMap","makeConditionExclusionMapFromStr","myLevel","condition","damageDetailObjArr","makeDamageDetailObjArrObjElementalResonance","ELEMENTAL_RESONANCE_MASTER_LIST","makeDetailObj","defaultKind","defaultElement","inputCategory","opt_condition","my","makeFormulaTemplate","my","my","getChangeKind","kind","talentDataObj","statusChangeDetailObjArr","makeTeamOptionDetailObjArr","detailObjArr","exclusionStr","workStr","conditionStrArr","elem","makeConditionExclusionMapFromStrSub","exclusion","pushToMapValueArray","conditionObj","step","prefix","condValueArr","re2","rangeStart","rangeEnd","re2Ret","addDecimal","e","workConditionValues","workCheckboxList","workSelectList","workNumberList","makeConditionMapFromCharacterInput","makeExclusionMapFromCharacterInput","numberObj","exclusions","conditionValue","minValue","checked","","vStat","trunc","numberEntryArr","maxValue","oldValue","getDecimalLength","multiplyDecimal","value1","value2","decimalLength","intValue1","intValue2","pow","k","symbols","escapedSymbols","join","item","makeSharedata","savedata","sharedataArr","myBasename","ARTIFACT_STAT_JA_EN_ABBREV_MAP","match","openTwitter","text","url","opt_hashtags","opt_via","baseUrl","params","URLSearchParams","append","query","toString","shareUrl","window","open","shareByTwitter","sharedata","encoded","encodeURI","getMaxConstellation","getMaxTalentLevel","talentObj","pushBuildinfoToSession","teammembers","sessionStorage","setItem","popBuildinfoFromSession","getItem","removeItem","updateConditionsByTeam","myVision","regionCountMap","totalEnergyCost","visionCountMap","characterDetail","region","","size","pyroCount","hydroCount","electroCount","cryoCount","updateOptionsElementalResonanceByTeam","newElementResonance","resonanceElementArr","restMemberElementArr","currentElementArr","resonance","getIconUrl","icon_url","import","CHARACTER_MASTER_LIST","","SWORD_MASTER","","CLAYMORE_MASTER","","POLEARM_MASTER","","BOW_MASTER","","CATALYST_MASTER","typedMaster","SWORD_MASTER_LIST","CLAYMORE_MASTER_LIST","POLEARM_MASTER_LIST","BOW_MASTER_LIST","CATALYST_MASTER_LIST","WEAPON_MASTER_LIST","ARTIFACT_SET_MASTER_LIST","ENEMY_MASTER","TEAM_OPTION_MASTER_LIST","TEAM_OPTION_MASTER","OPTION1_MASTER_LIST","OPTION1_MASTER","OPTION2_MASTER_LIST","OPTION2_MASTER","CHARACTER_MASTER_DETAIL_MAP","fetch","then","resp","json","WEAPON_IMG_SRC","WEAPON_MASTER_DETAIL_MAP","opt_weaponType","weaponTypeArr","ELEMENT_COLOR_CLASS","","","","","","","","ELEMENT_BG_COLOR_CLASS","ELEMENT_IMG_SRC","STAR_BACKGROUND_IMAGE_CLASS","RECOMMEND_ABBREV_EN_MAP","ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP","gensen","ARTIFACT_CAT_NAMES","getArtifactIconUrl","opt_cat_id","SP_SELF","SP_NEXT","SP_LONG","SP_SHRT","C0","C1","C2","C4","C6","PARTICLE_MASTER","pentry","pinfo","receiveTypeArr","CHARACTER_Q_TO_E_ARR","CHARACTER_E_UNTIL_MAP","CHARACTER_E_DELAY_MAP","CHARACTER_Q_NOT_RECHARGEABLE","getElementalSkillActions","particleMaster","action","getParticleInfo","isBursting","keyArr","start","getParticleNumFromInfo","particleInfo","leftTime","receiveType","getReceiveTypeFromInfo","particleCt","getParticleCooltimeFromInfo","duration","getDurationFromInfo","getCooltimeFromInfo","_withScopeId","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","style","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_createElementVNode","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","type","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","render","_ctx","_cache","$props","$setup","$data","$options","_component_ArtifactSetSelect","_resolveComponent","_openBlock","_createElementBlock","control","onClick","$event","isEditing","artifactImgSrc","alt","displayName","copiedArtifact","artifactIconOnClick","_toDisplayString","_withDirectives","onChange","args","_Fragment","_renderList","mainStatOptions","option","_vModelSelect","statStep","_vModelText","displayStatValue","starOnChange","dummy","subStat","subStatOptions","disabled","subStatOptionDisabled","selectOnClick","score","_createCommentVNode","selected","_createVNode","visible","artifact","updateArtifactSet","_vShow","isListShow","defineComponent","props","id","initial","Boolean","components","ArtifactSetSelect","emits","setup","context","percent","CompositionFunction","reactive","ref","isSelected","computed","MAINSTAT_CAT_ARR","emit","onLoad","watch","newVal","oldVal","__exports__","artifactSetEffects","filteredList","_normalizeClass","bgImageClass","selectedClass","$emit","artifactSetMastersRea","elementList","elementCheckList","checkListOnChange","_vModelCheckbox","elementSrc","weaponList","weaponCheckList","weaponSrc","characterOnClick","visionSrc","selectionNumber","characters","checkList","elementChecked","weaponChecked","blankIndex","t","te","useI18n","useScope","localeList","setI18nLanguage","global","loadLocaleMessages","document","querySelector","setAttribute","messages","setLocaleMessage","nextTick","hasPercent","displayStatName","opt_s","myPercent","p","displayStatAbbrev","targetValue","event","target","HTMLInputElement","HTMLSelectElement","displayOptionName","onDblclick","characterOnDblclick","characterImgClass","characterImgSrc","visionImgSrc","tags","tagColorClass","replacements","replaceImgSrc","displayStat","showEquipment","imgWeaponSrc","imgArtifactSetSrc","viewable","members","watchCount","getBuilddataFromStorage","weaponName","replIndex","artifactSetName","toLowerCase","locate","confirm","colspan","_component_CharacterSelect","_component_MemberItem","characterSelectMode","_createBlock","updateReplacements","updateCharacters","workTeam","minlength","maxlength","placeholder","characterSelectModeOnClick","selectedMemberName","MEMBER_TAG_LIST","tag","tagSelectedClass","tagOnClick","memberSelectedClass","memberOnClick","selectedMemberBuildname","buildnameOnChange","buildnames","workTeamTags","teamTagSelected","teamTagOnClick","txtTeamTags","txtTeamTagsOnChange","cancelOnClick","okOnClick","CharacterSelect","MemberItem","team","teamTags","rotation","rotationDescription","selectedMemberId","replacementIndex","duplicateTeam","setupTxtTeamTags","newCharacters","workBuildnames","getBuildStorageKeys","getBuildnameFromStorageKey","defaultBuildname","others","editable","editOnClick","resonanceElementImgSrcs","memberStats","displayRes","resKey","resBgClass","displayTags","jumpToRotation","requied","constellations","memberResults","initializeRes","watchFunc","onMounted","getElementalResonance","calculateMemberResult","Promise","all","results","calculateStat","teamAdjustments","memberResult","","dmgElements","artifactSet4s","","constellationObj","_createStaticVNode","_component_draggable","_component_ERCalculator","bgColorClass","normalAttackIconSrc","listActionOnClick","elementalSkillIconSrc","elementalBurstIconSrc","removeMode","selectedAction","getActionDetail","selectedActionOnClick","actionDisplay","rotationList","handle","delay","animation","rotationListOnChange","_withCtx","previousRotation","getCharacterMaster","colorClass","selectedActionClass","rotationActionOnClick","removeItemOnClick","rows","updateRotation","_createTextVNode","teamMemberResult","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","for","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_67","rotationLength","inputOnChange","calculatorInput","energyCost","weaponImgSrc","currentWeapon","weaponRefine","refine","energyRechargeGls","onField","inputRowParticleEnemy","row","rowIndex","bgColorClass2","currentValues","reduce","c","columnIndex","inputRowParticle","rowImgSrc1","rowImgSrc1Class","rowImgSrc2","triggerName","particleRecharges","inputRowEnergy","burstCounts","replaceWeapons","weaponIndex","replaceWeaponImgSrc","replaceWeaponClass","replaceWeaponOnClick","combatLength","isOpenSupplyFromEnemy","supplyFromEnemy","message","isShowUsage","CHARACTER_E_DECREMENT_IN_BURST","entries","untilMap","actionName","delayArr","RECHARGE_ENERGY_SKILL","RECHARGE_ENERGY_BURST","RECHARGE_ENERGY_PASSIVE","RECHARGE_ENERGY_CONSTELLATION","RECHARGE_ENERGY_ATTACK","RECHARGE_ENERGY_WEAPON","RECHARGE_ENERGY_ARTIFACT","RECHARGE_PARTICLE_SKILL","RECHARGE_PARTICLE_PASSIVE","RECHARGE_PARTICLE_CONSTELLATION","RECHARGE_PARTICLE_FAVONIUS","RECHARGE_PARTICLE_RESONANCE","RECHARGE_PARTICLE_ENEMY","ATTACK_ENERGY_COUNT_OBJ","NORMAL_ATTACK_LENGTH_OBJ","ACTION_LENGTH_MAP","isRechargeKindEnergy","rechargeKind","isRechargeKindParticle","countN","isQing","countC","countE","untilAction","untilCount","clear","workMap","countQ","getOnFieldRate","NUMBER_OF_MEMBERS","memberNameArr","danArr","getNormalAttackDan","lengthList","preRotation","isNCPIgnoring","actionLength1","actionLength2","maxDan","dan","unitLength","j","multiple","ceil","lengthSum","sumVal","maxVal","memberNum","rate","getMemberResult","getDefaultMemberResult","memberArr","getCharacterDetail","","getCharacterInputValue","getStatsInputValue","CHARACTER_ENERGY_FUNC","()","constellationLevel","myEnergy","allEnergy","otherEnergy","herEnergies","()","skillLevel","er","messages2","burstLevel","somebodyEnergy","()","","","","","","nCount","","","","","","","","","","","","","","","","","qCount","doBreak","herIndex","herCm","","","","","","unit","unit2","","","geoCount","","","","","","","","","","","CHARACTER_PARTICLE_EXTRA_FUNC","onFields","myParticle","allParticle","","","herParticles","triggerCnt","ct","rindexArr","isRecorded","nxtCharacter","toIndex","WEAPON_ENERGY_FUNC","","","","weaponEnergySub_","","","","","","","weaponEnergySub_","","isInCt","getParticleByCharacter","resultMap","myIndex","eCount","cCount","num","resultVal","splitNumToArrByOnFieldRate","ousiaLength","isOusia","timeArr","curCharacter","delayActions","delayAction","setSkillParticleNumToArr","getParticleByCharacterExtra","func","ret","particles","getParticleByWeapon","getParticleByResonance","getEnergyByCharacter","energies","workResult","getEnergyByWeapon","getEnergyByArtifact","artifactSet4","getEnergyByAttack","denominator","hitCount","withC","workHitCount","dans","workDan","isNaN","energy","time","addNumToArr","nxtRotation","v","DEFAULT_ROTATION_LENGTH","DEFAULT_COMBAT_LENGTH","REPLACE_WEAPON_MAP","setupCharacterDetailMap","updateRotationLength","setupInput","getConstellation","eLength","qLength","memberIndex","","newLength","updateOnFields","setupInputRows","deep","newInput","initialWeapon","pushInputRowParticle","inputRows","newMessages","particle","initialValues","pushInputRowEnergy","newInputRowPacticle1","newInputRowPacticle2","newInputRowEnergy","newInputRowResonance","newinputRowParticleEnemy","energyByCharacter","particleByWeapon","energyByWeapon","energyByArtifact","energyByAttack","particleByResonance","myElement","input","burstCount","particleEnergy","characterMater","getWeaponMaster","artifactSetMater","resetInput","inputRow","draggable","ERCalculator","normalAttackActions","elementalSkillActions","actionId","selectedActionId","isCWith","CHARGED_WITH_NORMAL_WEAPON","CHARGED_WITH_NORMAL_CHARACTER","CHARGED_ONLY_CHARACTER","isSameMember","actions","actionArr","actionKey"],"sourceRoot":""}