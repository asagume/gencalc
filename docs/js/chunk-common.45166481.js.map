{"version":3,"file":"js/chunk-common.45166481.js","mappings":"0SA0HA,MAAAA,EAAAC,EAAAC,EAAA,OACAC,EAAAD,EAAA,MACAE,EAAAF,EAAA,MACAG,EAAAH,EAAA,MACAI,EAAAJ,EAAA,MACAK,EAAAN,EAAAC,EAAA,MACAM,EAAAP,EAAAC,EAAA,OAEAO,EAAAA,YAAe,EAAAH,EAAAI,iBAAgB,CAC7BC,KAAM,eACNC,MAAO,CACLC,SAAU,CAAEC,KAAMC,OAA+BC,UAAU,GAC3DC,GAAI,CAAEH,KAAMI,QACZC,QAASC,OACTC,QAASC,QACTC,SAAUD,QACVE,MAAON,QAETO,WAAY,CACVC,kBAAAlB,EAAAmB,SAEFC,MAAO,CAAC,kBAAmB,mBAC3BC,KAAAA,CAAMjB,EAAOkB,GACX,MAAM,YAAEC,EAAW,iBAAEC,EAAgB,QAAEC,IAAY,EAAA1B,EAAAoB,WAE7CO,GAAiB,EAAA5B,EAAA6B,UAASnC,EAAA2B,QAAES,UAAUxB,EAAMC,WAC5CwB,GAAqB,EAAA/B,EAAA6B,UAAS,CAAC/B,EAAAkC,0BAA2BlC,EAAAkC,4BAC1DC,GAAY,EAAAjC,EAAAkC,MAAI,GAChBC,GAAa,EAAAnC,EAAAkC,MAAI,GACjBE,GAAa,EAAApC,EAAAkC,MAAI,GAEjBG,GAAiB,EAAArC,EAAAsC,WAAS,KACvB,EAAAvC,EAAAwC,oBAAmBX,EAAeY,QAASZ,EAAea,UAG7DC,EAAmB,CACvB,EAAKC,MAAMC,KAAK,IAAIC,IAAI/C,EAAAgD,kBAAkBC,KAAIC,GAAKA,EAAEC,QAAQ,OAAQ,QACrE,EAAKN,MAAMC,KAAK,IAAIC,IAAI/C,EAAAoD,kBAAkBH,KAAIC,GAAKA,EAAEC,QAAQ,OAAQ,QACrE,EAAKN,MAAMC,KAAK,IAAIC,IAAI/C,EAAAqD,kBAAkBJ,KAAIC,GAAKA,EAAEC,QAAQ,OAAQ,QACrE,EAAKN,MAAMC,KAAK,IAAIC,IAAI/C,EAAAsD,kBAAkBL,KAAIC,GAAKA,EAAEC,QAAQ,OAAQ,QACrE,EAAKN,MAAMC,KAAK,IAAIC,IAAI/C,EAAAuD,kBAAkBN,KAAIC,GAAKA,EAAEC,QAAQ,OAAQ,SAGjEK,GAAkB,EAAAtD,EAAAsC,WAAS,IACvBI,EAAyBd,EAAea,UAG5Cc,GAAiB,EAAAvD,EAAAsC,WAAS,IACvBxC,EAAA0D,eAGHC,EAAYC,GACT/B,EAAQ+B,GAAQ,GAAM,EAGzBC,EAAyBA,CAACC,EAAe3C,KAC7C,GAAI2C,GAAS3C,EAAU,OAAO,EAC9B,MAAM4C,EAAOjC,EAAekC,SAASf,KAAIC,GAAKA,EAAE3C,OAChD,OAAOwD,EAAKE,SAASH,EAAM,EAGvBI,EAAWA,KACfxC,EAAQyC,KAAK,kBAAmB3D,EAAMK,GAAIiB,EAAe,EAGrDsC,EAAeA,KACnBtC,EAAeuC,OAASvD,OAAOgB,EAAeuC,OAAO,EAGjDC,EAAsBA,KACtBnC,EAAU2B,MACZxB,EAAWwB,OAASxB,EAAWwB,MAE/BxB,EAAWwB,OAAQ,C,EAIjBS,EAAgBA,KACE,eAAlB/D,EAAMO,SACRW,EAAQyC,KAAK,kBAAmB3D,EAAMK,G,EAIpC2D,EAAqBC,IACzB3C,EAAeY,QAAU+B,EACzB,MAAMC,EAASzE,EAAA0E,oBAAoBF,GACnC3C,EAAeuC,OAASK,EAAOE,MAC3B,kBAAmBF,IACrB5C,EAAevB,KAAOmE,EAAOG,cAAc/C,EAAea,OAAS,IAErEL,EAAWwB,OAAQ,EACnBI,GAAU,EAGZ,SAASY,SACeC,IAAlBvE,EAAMS,UACc,aAAlBT,EAAMO,QACRoB,EAAU2B,MAAQtD,EAAMS,QACG,eAAlBT,EAAMO,UACfsB,EAAWyB,MAAQtD,EAAMS,SAG/B,CAUA,OATA6D,KAEA,EAAA5E,EAAA8E,OAAMxE,GAAO,CAACyE,EAAQC,MACpB,EAAAnF,EAAAoF,iBAAgBrD,EAAgBmD,EAAOxE,UACnCwE,EAAOhE,SAAWiE,EAAOjE,SAC3B6D,G,IAIG,CACLnD,cAAaC,mBAEbE,iBACAG,qBACAE,YACAE,aACAC,aAEAC,iBACAiB,kBACAC,iBACAI,wBACAF,WAEAO,WACAE,eACAE,sBACAE,oBACAD,gBAEJ,G,oKCvOF,MAAAtE,EAAAH,EAAA,MAMAI,EAAAJ,EAAA,MACAK,EAAAN,EAAAC,EAAA,MAEAO,EAAAA,YAAe,EAAAH,EAAAI,iBAAgB,CAC7BC,KAAM,oBACNC,MAAO,CACL4E,QAAS,CAAE1E,KAAMQ,QAASN,UAAU,GACpCyE,MAAO,CAAE3E,KAAMI,OAAQF,UAAU,GACjC6D,YAAa,CAAE/D,KAAMM,OAAQJ,UAAU,GACvCqB,mBAAoB,CAAEvB,KAAMmC,MAAwCjC,UAAU,GAC9E+B,OAAQ,CAAEjC,KAAMI,SAElBU,MAAO,CAAC,uBACRC,KAAAA,CAAMjB,GACJ,MAAM,YAAEmB,IAAgB,EAAAxB,EAAAoB,WAElB+D,EAAgBC,GACnB,IAAMtF,EAAAuF,4BAA4BD,EAAKX,OACpCa,EAAiBF,GACdA,EAAKG,KAAOlF,EAAMiE,YAAc,YAAc,GAEjDkB,GAAwB,EAAAzF,EAAA6B,UAASvB,EAAMyB,oBAEvC2D,GAAe,EAAA1F,EAAAsC,WAAS,IACrBvC,EAAA4F,2BAGHC,GAAqB,EAAA5F,EAAAsC,WAAS,KAClC,MAAMuD,EAAS,GA0Bf,OAzBIJ,EAAsBK,OAAS,IAC7B,WAAYL,EAAsB,IACpCI,EAAOE,KAAK,CACVP,IAAKC,EAAsB,GAAGD,IAAzBC,UACL7B,MAAO6B,EAAsB,GAAG,WAAWO,KAG3CP,EAAsBK,OAAS,IAC7BL,EAAsB,GAAGD,KAAOC,EAAsB,GAAGD,IACvD,WAAYC,EAAsB,IACpCI,EAAOE,KAAK,CACVP,IAAKC,EAAsB,GAAGD,IAAzBC,UACL7B,MAAO6B,EAAsB,GAAG,WAAWO,KAI3C,WAAYP,EAAsB,IACpCI,EAAOE,KAAK,CACVP,IAAKC,EAAsB,GAAGD,IAAzBC,UACL7B,MAAO6B,EAAsB,GAAG,WAAWO,OAM9CH,CAAM,IAGf,MAAO,CACLpE,cACAc,mBAAAxC,EAAAwC,mBAEA6C,eACAG,gBACAG,eACAE,qBAEJ,G,oKCjDF,MAAA7F,EAAAH,EAAA,MASAI,EAAAJ,EAAA,MACAK,EAAAN,EAAAC,EAAA,MAMAO,EAAAA,YAAe,EAAAH,EAAAI,iBAAgB,CAC7BC,KAAM,kBACNC,MAAO,CACL2F,UAAW,CAAEzF,KAAMM,QACnBoF,WAAY,CAAE1F,KAAMmC,OACpBuC,QAAS,CAAE1E,KAAMQ,QAASN,UAAU,IAEtCY,MAAO,CAAC,mBAAoB,qBAC5BC,KAAAA,CAAMjB,EAAOkB,GACX,MAAM,YAAEC,IAAgB,EAAAxB,EAAAoB,WAElB8E,EAAad,GAA0BtF,EAAAqG,gBAAgBf,EAAKgB,IAC5DjB,EAAgBC,GACnB,IAAMtF,EAAAuF,4BAA4BD,EAAKX,OACpCa,EAAiBF,GACjB/E,EAAM2F,WAAa3F,EAAM2F,WAAaZ,EAAKG,KAG3ClF,EAAM4F,YAAc5F,EAAM4F,WAAWnC,SAASsB,EAAKG,KAF9C,YAKF,GAGHc,EAAc7F,OAAO8F,KAAKxG,EAAAqG,iBAC1BI,EAAcC,GAAwB1G,EAAAqG,gBAAgBK,GACtDC,GAAmB,EAAA1G,EAAA6B,UAAS,CAAC,GACnC,IAAK,IAAI2D,KAAOc,EACdI,EAAiBlB,IAAO,EAG1B,MAAMmB,EAAalG,OAAO8F,KAAKxG,EAAA6G,gBACzBC,EAAaC,GAA2B/G,EAAA6G,eAAeE,GACvDC,GAAkB,EAAA/G,EAAA6B,UAAS,CAAC,GAClC,IAAK,IAAI2D,KAAOmB,EACdI,EAAgBvB,IAAO,EAGzB,MAAMwB,EAAoB,SAAU3B,EAAc4B,GAC3CA,EAAU5B,IACf5E,OAAO8F,KAAKU,GACTC,QAAQlE,GAAMA,GAAKqC,IACnB8B,SAAS3B,IACRyB,EAAUzB,IAAO,CAAK,GAE5B,EAEME,GAAe,EAAA1F,EAAAsC,WAAS,KAC5B,MAAMuD,EAAS,GACTuB,EACJ3G,OAAO8F,KAAKG,GAAkBQ,QAAQlE,GAAM0D,EAAiB1D,KAAI8C,OAAS,EACtEuB,EACJ5G,OAAO8F,KAAKQ,GAAiBG,QAAQlE,GAAM+D,EAAgB/D,KAAI8C,OAAS,EAC1E,IAAK,IAAIwB,KAASvH,EAAAwH,sBACZH,IAAmBV,EAAiBY,EAAMjB,KAC1CgB,IAAkBN,EAAgBO,EAAME,KAC5C3B,EAAOE,KAAKuB,GAEd,OAAOzB,CAAM,IAGT4B,EAAmBxB,IACvB,IAAIJ,EAAS,GACb,GAAIvF,EAAM4F,WAAY,CACpB,MAAMf,EAAQ7E,EAAM4F,WAAWwB,QAAQzB,IACzB,GAAVd,IACFU,EAAS/E,OAAOqE,EAAQ,G,CAG5B,OAAOU,CAAM,EAGT8B,EAAoB1B,IAIxB,GAHI3F,EAAM2F,WACRzE,EAAQyC,KAAK,mBAAoBgC,GAE/B3F,EAAM4F,WAAY,CACpB,MAAMA,EAAuB5F,EAAM4F,WAAWnD,KAAKC,GAAMA,IACnDmC,EAAQ7E,EAAM4F,WAAWwB,QAAQzB,GACvC,IAAc,GAAVd,EACFe,EAAWf,GAAS,OACf,CACL,MAAMyC,EAAatH,EAAM4F,WAAWwB,QAAQ,KACzB,GAAfE,IACF1B,EAAW0B,GAAc3B,E,CAG7BzE,EAAQyC,KAAK,oBAAqBiC,E,GAItC,MAAO,CACLzE,cAEA0E,YACAf,eACAG,gBACAe,cACAE,aACAE,mBACAC,aACAE,YACAE,kBACAC,oBACAtB,eAEA+B,kBACAE,mBAEJ,G,4JC3KF,MAAAE,EAAAlI,EAAAC,EAAA,OACAE,EAAAF,EAAA,MACAI,EAAAJ,EAAA,MACAkI,EAAAlI,EAAA,MAEA,SAAwBmI,IACpB,MAAM,EAAEC,EAAC,GAAEC,IAAO,EAAAH,EAAAI,SAAQ,CACtBC,SAAU,WAGRC,EAAa,CACf,CAAE/H,KAAM,MAAOuD,MAAO,SACtB,CAAEvD,KAAM,UAAWuD,MAAO,SAC1B,CAAEvD,KAAM,OAAQuD,MAAO,SACvB,CAAEvD,KAAM,OAAQuD,MAAO,SACvB,CAAEvD,KAAM,MAAOuD,MAAO,SACtB,CAAEvD,KAAM,UAAWuD,MAAO,SAC1B,CAAEvD,KAAM,UAAWuD,MAAO,SAC1B,CAAEvD,KAAM,WAAYuD,MAAO,SAC3B,CAAEvD,KAAM,YAAauD,MAAO,SAC5B,CAAEvD,KAAM,YAAauD,MAAO,SAC5B,CAAEvD,KAAM,UAAWuD,MAAO,SAC1B,CAAEvD,KAAM,UAAWuD,MAAO,SAC1B,CAAEvD,KAAM,aAAcuD,MAAO,UAG3ByE,EAAkB,SAAUC,GAC9BT,EAAAxG,QAAKkH,OAAOD,OAAO1E,MAAQ0E,EAC3BE,EAAmBF,GACnBG,SAASC,cAAc,SAASC,aAAa,OAAQL,EACzD,EAEME,EAAqBI,eAAgBN,GACvC,GAAc,SAAVA,EAAmB,CACnB,MAAMO,QAAiBC,MAAM,aAAaR,UAAeS,MAAKC,GAAQA,EAAKC,SAC3EpB,EAAAxG,QAAKkH,OAAOW,iBAAiBZ,EAAQO,E,CAEzC,OAAO,EAAA7I,EAAAmJ,WACX,EAEM1H,EAAc,SAAU+D,GAC1B,IAAKA,EAAK,OAAOA,EAEjB,GADAA,EAAM1E,OAAO0E,GAAKvC,QAAQ,QAAS,IACF,UAA7B4E,EAAAxG,QAAKkH,OAAOD,OAAO1E,MAAmB,CACtC,IAAIiC,EAAS/E,OAAO0E,GACpB,MAAI,CAAC,SAAU,UAAW,SAAU,KAAKzB,SAAS8B,KAGlDA,EAASA,EAAO5C,QAAQ,UAAW,QACnC4C,EAASA,EAAO5C,QAAQ,WAAY,QACpC4C,EAASA,EAAO5C,QAAQ,WAAY,aACpC4C,EAASA,EAAO5C,QAAQ,UAAW,UACnC4C,EAASA,EAAO5C,QAAQ,KAAM,OANnB4C,C,CASf,GAAIoC,EAAGzC,GAAM,OAAOwC,EAAExC,GACtB,MAAM4D,EAAK,IAAIC,OAAO,6BACtB,IAAIxD,EAAS,GACThC,EAAO2B,EACX,MAAO3B,EAAM,CACT,MAAMyF,EAAQF,EAAGG,KAAK1F,GACtB,IAAKyF,EAAO,CACRzD,GAAUmC,EAAEnE,GACZ,K,CAEAyF,EAAM,KAAIzD,GAAUmC,EAAEsB,EAAM,KAChCzD,GAAUyD,EAAM,GAChBzF,EAAOyF,EAAM,E,CAEjB,OAAOzD,CACX,EAEMlE,EAAU,SAAU+B,GACtB,MAAM8F,EAAU9F,EAAK+F,MAAM,KAC3B,IAAI5F,EAAO2F,EAAQ,GAAGvG,QAAQ,UAAW,IACrCyG,EAAa7F,EAAK8F,SAAS,MAAQ7J,EAAA8J,kBAAkB7F,SAASF,GAMlE,OALK6F,GACD,CAAC,MAAO,SAAU,SAAU,QAAQvC,SAAQ0C,IACpChG,EAAK8F,SAASE,KAAUH,GAAa,EAAI,IAG9CA,EAAa,IAAM,EAC9B,EAEMI,EAAkB,SAAUpG,GAC9B,IAAImC,EAASnC,EAAKT,QAAQ,UAAW,IACrC,MAAMuG,EAAU3D,EAAO4D,MAAM,KAS7B,OARsB,GAAlBD,EAAQ1D,QACRD,EAASpE,EAAYoE,GACrBA,EAASA,EAAO5C,QAAQ,SAAU,YAElC4C,EADoC,UAA7BgC,EAAAxG,QAAKkH,OAAOD,OAAO1E,MACjBnC,EAAY+H,EAAQA,EAAQ1D,OAAS,IAAM,IAAMrE,EAAY+H,EAAQ,IAErE/H,EAAY+H,EAAQA,EAAQ1D,OAAS,IAAM,IAAMrE,EAAY+H,EAAQ,IAE3E3D,CACX,EAEMnE,EAAmB,SAAUgC,EAAcE,EAAemG,GAC5D,MAAMC,EAAYrI,EAAQ+B,GAC1B,IAAIuG,EAAID,EAAY,GAAK,EAEzB,OADID,IAAOE,EAAIC,KAAKC,IAAI,GAAIJ,IACrBjJ,OAAOoJ,KAAKE,MAAMxG,EAAQqG,GAAKA,GAAKD,CAC/C,EAEMK,EAAoB,SAAU3G,GAChC,IAAImC,EAASnC,EACb,MAAM8F,EAAU9F,EAAK+F,MAAM,KAgB3B,OAfsB,GAAlBD,EAAQ1D,QACRpC,EAAOA,EAAKT,QAAQ,OAAQ,IAC5BS,EAAOA,EAAKT,QAAQ,OAAQ,IACxBS,EAAK4G,WAAW,OAAM5G,EAAOA,EAAKT,QAAQ,KAAM,KAChDS,EAAKiG,SAAS,UAAWjG,EAAOA,EAAKT,QAAQ,UAAW,IACnDS,EAAKiG,SAAS,eAAgBjG,EAAOA,EAAKT,QAAQ,eAAgB,MAClES,EAAKiG,SAAS,WAAYjG,EAAOA,EAAKT,QAAQ,WAAY,IAC1DS,EAAKiG,SAAS,UAAWjG,EAAOA,EAAKT,QAAQ,UAAW,IACxDS,EAAKiG,SAAS,UAAWjG,EAAOA,EAAKT,QAAQ,QAAS,IACtDS,EAAKiG,SAAS,UAAWjG,EAAOA,EAAKT,QAAQ,UAAW,IACxDS,EAAKiG,SAAS,QAAOjG,EAAOA,EAAKT,QAAQ,MAAO,KACzD4C,EAASpE,EAAYiC,IAErBmC,EAASiE,EAAgBpG,GAEtBmC,CACX,EAGM0E,EAAc,SAAUC,GAC1B,OAAIA,EAAMC,kBAAkBC,kBACxBF,EAAMC,kBAAkBE,kBADyBH,EAAMC,OAAO7G,WAClE,CAEJ,EAEMgH,EAAoB,SAAUvK,GAChC,OAAOoB,EAAYpB,EAAK4C,QAAQ,aAAc,IAClD,EAEA,MAAO,CACHmF,aACAC,kBACAG,qBACA/G,cACAqI,kBACApI,mBACA2I,oBACAE,cACAK,oBACAjJ,UAER,CAhJAxB,EAAAA,WAAA4H,C,oKCkRA,MAAArI,EAAAC,EAAAC,EAAA,OACAI,EAAAJ,EAAA,MACAK,EAAAN,EAAAC,EAAA,MACAG,EAAAH,EAAA,MACAiL,EAAAjL,EAAA,MACAkL,EAAAlL,EAAA,MACAmL,EAAAnL,EAAA,MACAoL,EAAApL,EAAA,MAwBAO,EAAAA,YAAe,EAAAH,EAAAI,iBAAgB,CAC3BC,KAAM,eACNC,MAAO,CACH2K,KAAM,CAAEzK,KAAMC,OAA2BC,UAAU,GACnDwK,iBAAkB,CAAE1K,KAAMC,QAC1B0K,eAAgB,CAAE3K,KAAMC,SAE5Bc,KAAAA,CAAMjB,GACF,MAAM,YAAEmB,IAAgB,EAAAxB,EAAAoB,WAClB+J,GAAkB,EAAApL,EAAA6B,UAAS,IAC3BwJ,GAAmB,EAAArL,EAAA6B,UAAS,IAC5ByJ,GAAiB,EAAAtL,EAAA6B,UAAS,IAC1B0J,GAAwB,EAAAvL,EAAA6B,UAAS,IACjCgH,GAAW,EAAA7I,EAAA6B,UAAS,IACpB2J,EAA0B,GAC1BC,EAAwB,GACxBC,GAAiB,EAAA1L,EAAAkC,KAAIsJ,GACrBG,GAAe,EAAA3L,EAAAkC,KAAIuJ,GACnBG,GAAkB,EAAA5L,EAAA6B,UAAS,CAC7B,CAAC,KAAM,EAAG,GACV,CAAC,IAAK,EAAG,GACT,CAAC,IAAK,EAAG,GACT,CAAC,IAAK,EAAG,GACT,CAAC,IAAK,EAAG,GACT,CAAC,IAAK,EAAG,GACT,CAAC,IAAK,EAAG,KAEPgK,GAAwB,EAAA7L,EAAAkC,MAAI,GAC5B4J,EAAqB,CACvB,MAAO,CAAC,MAAO,QACf,MAAO,CAAC,OAAQ,SAChB,OAAQ,CAAC,OAAQ,UAAW,SAC5B,IAAK,CAAC,QACN,KAAM,CAAC,OAAQ,UAEbC,GAAc,EAAA/L,EAAAkC,MAAI,IAExB,EAAAlC,EAAAgM,YAAU,MACN,EAAAlB,EAAAmB,2BAA0BlD,MAAK,KAC3BmD,EAAqB5L,EAAM2K,MAC3BkB,EAAW7L,EAAM2K,KAAM3K,EAAM4K,iBAAiB,GAChD,IAGN,MAAMkB,GAAa,EAAApM,EAAAkC,KAAI,GAYvB,SAASmK,EAAiBpG,EAAmBgF,EAAaC,GACtD,GAAIA,EAAkB,CAClB,MAAMoB,EAAUrB,EAAKsB,QAAQrF,QAAOsF,GAAUA,EAAOnM,MAAQ4F,IAC7D,GAAIqG,EAAQxG,OACR,OAAOoF,EAAiBoB,EAAQ,GAAG3L,KAAK8L,eAAeC,OAASpM,EAAM6K,eAAiB7K,EAAM6K,eAAelF,IAAc,EAAI,E,CAGtI,OAAO3F,EAAM6K,eAAiB7K,EAAM6K,eAAelF,IAAc,EAAI,CACzE,CAEA,SAASiG,EAAqBjB,GAC1B,MAAM0B,EAAgB1B,EAAKsB,QAAQxJ,KAAIyJ,GAAUA,EAAOnM,OAClDuM,EAAUlN,EAAA2B,QAAEwL,KAAKlK,MAAMmI,EAAAgC,mBAAoB,GAC3CC,EAAUrN,EAAA2B,QAAEwL,KAAKlK,MAAMmI,EAAAgC,mBAAoB,GACjD,GAAI7B,EAAK+B,SAASlH,OACd,IAAK,IAAImH,EAAI,EAAGA,EAAIhC,EAAK+B,SAASlH,OAAQmH,IAAK,CAC3C,MAAMD,EAAW/B,EAAK+B,SAASC,GACzBC,EAAcP,EAAcjF,QAAQsF,EAASR,QACnD,IAAoB,GAAhBU,IACoB,MAApBF,EAASG,QAAkBH,EAASG,OAAO7C,WAAW,MAAM,CAC5D,MAAM8C,GAAkB,EAAAtC,EAAAuC,oBAAmBL,EAASR,QACpD,GAAwB,MAApBQ,EAASG,OAAgB,CACzB,IAAIG,EAAKF,GAAiBG,KAAKC,QAAU,EACzC,GAAIb,EAAc5I,SAAS,OAA4B,MAAnBiJ,EAASR,OAAgB,CACzD,MAAMiB,EAAgBpB,EAAiB,KAAM/L,EAAM2K,KAAM3K,EAAM4K,kBAC3DuC,GAAiB,IACjBH,GAAM,I,MAEP,GAAIX,EAAc5I,SAAS,SAA8B,QAAnBiJ,EAASR,OAAkB,CACpE,MAAMiB,EAAgBpB,EAAiB,OAAQ/L,EAAM2K,KAAM3K,EAAM4K,kBAC7DuC,GAAiB,IACjBH,GAAM,E,MAEP,GAAIX,EAAc5I,SAAS,SAAkC,KAAvBqJ,GAAiB/G,GAAW,CACrE,MAAMoH,EAAgBpB,EAAiB,OAAQ/L,EAAM2K,KAAM3K,EAAM4K,kBAC7DuC,GAAiB,IACjBH,GAAM,E,CAGd,GAAIzC,EAAA6C,qBAAqB3J,SAASiJ,EAASR,QAAS,CAChD,MAAMiB,EAAgBpB,EAAiBW,EAASR,OAAQlM,EAAM2K,KAAM3K,EAAM4K,kBACpEyC,GAAe,EAAA9C,EAAA+C,iBAAgBZ,EAASR,OAAQ,IAAKiB,GAC3D,GAAIE,EAAc,CACd,MAAME,GAAM,EAAAhD,EAAAiD,qBAAoBH,IAAiB,EACjDL,EAAK5N,EAAA2B,QAAE+I,MAAMF,KAAK6D,IAAIT,EAAIO,GAAO,EAAG,E,EAG5Cd,EAAQG,IAAgBI,C,KACrB,CACH,MAAMG,EAAgBpB,EAAiBW,EAASR,OAAQlM,EAAM2K,KAAM3K,EAAM4K,kBACpEyC,GAAe,EAAA9C,EAAA+C,iBAAgBZ,EAASR,OAAQQ,EAASG,OAAQM,GACvE,IAAIH,EAAK,EACT,GAAIK,EAAc,CAEd,GADAL,GAAK,EAAAzC,EAAAiD,qBAAoBH,IAAiB,EACtChB,EAAc5I,SAAS,OAA4B,MAAnBiJ,EAASR,OAAgB,CACzD,MAAMiB,EAAgBpB,EAAiB,KAAM/L,EAAM2K,KAAM3K,EAAM4K,kBAC3DuC,GAAiB,IACjBH,GAAM,I,CAGd,GAAIzC,EAAA6C,qBAAqB3J,SAASiJ,EAASR,QAAS,CAChD,MAAMwB,EAAMZ,GAAiBG,KAAKC,QAAU,EAC5CF,EAAK5N,EAAA2B,QAAE+I,MAAMF,KAAK6D,IAAIT,EAAIU,GAAO,EAAG,E,MACjC,GAAInD,EAAAoD,8BAA8BlK,SAASiJ,EAASR,QAAS,CAChE,MAAMwB,EAAMZ,GAAiBG,KAAKC,QAAU,EACxCQ,IACAV,EAAKpD,KAAKgE,IAAIZ,EAAIU,G,EAI1BV,EAAKV,EAAQM,KACbN,EAAQM,GAAeI,E,GAM3C,IAAIa,EAAYjE,KAAK6D,OAAOnB,KAAYG,GACvB,GAAboB,IACAA,EAAY3C,GAEhBE,EAAe9H,MAAQuK,CAC3B,CAEA,SAASC,EAAenD,EAAaC,GACjC,MAAMC,EAAiBF,EAAKsB,QAAQxJ,KAAIyJ,GAAUH,EAAiBG,EAAOnM,KAAM4K,EAAMC,KAChFmD,GAAW,EAAAtD,EAAAuD,gBAAerD,EAAMS,EAAe9H,MAAOqH,EAAK+B,SAAU7B,GAC3E,IAAK,IAAI8B,EAAI,EAAGA,EAAI7B,EAAgBtF,OAAQmH,IACxC7B,EAAgB6B,GAAGsB,QAAUF,EAASpB,EAE9C,EArGA,EAAAjN,EAAA8E,QAAM,IAAMpF,EAAA2B,QAAES,UAAUxB,KAAQ,CAACyE,EAAQC,KACrCkH,EAAqBnH,EAAOkG,MACvBvL,EAAA2B,QAAEmN,QAAQzJ,EAAOkG,KAAKsB,QAASvH,EAAOiG,KAAKsB,UAAa7M,EAAA2B,QAAEmN,QAAQzJ,EAAOmG,iBAAkBlG,EAAOkG,mBAInGuD,EAAe1J,EAAOkG,KAAMlG,EAAOmG,kBACnCkB,EAAWxI,UAJXuI,EAAWpH,EAAOkG,KAAMlG,EAAOmG,kBAC/BkB,EAAWxI,Q,GAKhB,CAAE8K,MAAM,IA8FX,MAAMvC,EAAaA,CAAClB,EAAaC,KAC7B,MAAMyD,EAA+B,GAC/BxD,EAAiBF,EAAKsB,QAAQxJ,KAAIyJ,GAAUH,EAAiBG,EAAOnM,KAAM4K,EAAMC,KAChFmD,GAAW,EAAAtD,EAAAuD,gBAAerD,EAAMS,EAAe9H,MAAOqH,EAAK+B,SAAU7B,GAC3E,IAAK,IAAI8B,EAAI,EAAGA,EAAIhC,EAAKsB,QAAQzG,OAAQmH,IAAK,CAC1C,MAAMT,EAASvB,EAAKsB,QAAQU,GACtBG,GAAkB,EAAAtC,EAAAuC,oBAAmBb,EAAOnM,MAC5CoN,EAAgBtC,EAAe8B,GAC/B2B,EAAe1D,EAAmBA,EAAiBsB,EAAO7L,SAAMkE,EAChEiC,EAAS8H,GAAcnC,eAAe3F,OACtC+H,EAAeD,GAAcnC,eAAeqC,SAAW,EAC7D,IAAIC,EACAH,GAAmE,GAAnDA,EAAanC,eAAeuC,aAAalJ,SACzDiJ,EAAeH,EAAanC,eAAeuC,aAAa,IAAMJ,EAAanC,eAAeuC,aAAa,GAAKJ,EAAanC,eAAeuC,aAAa,QAAKnK,GAE9J,IAAIoK,EAA2B,GAC3B7B,IACA6B,EAAiBnD,EAAmBsB,EAAgB5F,KAExDmH,EAAS5I,KAAK,CACVE,UAAWuG,EAAOnM,KAClB6O,WAAY9B,GAAiBG,KAAK4B,SAAW,EAC7C1B,cAAeA,EACf2B,cAAetI,EACfuI,cAAevI,EACf+H,aAAcA,EACdE,aAAcA,EACdR,QAASF,EAASpB,GAClBgC,eAAgBA,G,CAGxB7D,EAAgBkE,OAAO,EAAGlE,EAAgBtF,UAAW6I,GAErDF,EAAexD,EAAMC,EAAiB,EAG1C,SAASqE,EAAqBC,EAAkCC,EAAyBxJ,EAAmByJ,GACxG,MAAMC,EAAgBjQ,EAAA2B,QAAES,UAAU4N,EAAS,IAC3C,IAAK,IAAIzC,EAAI,EAAGA,EAAI0C,EAAc7J,OAAQmH,IACtC0C,EAAc1C,GAAK/C,KAAKE,MAAyB,IAAnBuF,EAAc1C,IAAY,IAE5DuC,EAAUzJ,KAAK,CACXE,UAAWA,EACX2J,aAAcF,EAAS,GACvBG,YAAaH,EAAS,GACtBjJ,QAASiJ,EAAS,GAClBC,cAAeA,EACfG,cAAepQ,EAAA2B,QAAES,UAAU6N,GAC3BI,KAAM,IAENL,EAAS,GAAG5J,QACZ4J,EAAS,GAAGvI,SAAQ6I,IAChB,IAAInM,EAAO,GACP6L,EAAS,KAAO3E,EAAAkF,wBAChBpM,EAAO,QACA6L,EAAS,KAAO3E,EAAAmF,0BACvBrM,EAAO,OACA6L,EAAS,KAAO3E,EAAAoF,iCACvBtM,EAAO,OACH6L,EAAS,KACT7L,GAAQ,KAAO6L,EAAS,GAAK,MAGjC7L,EAAO6L,EAAS,GAEpBD,EAAY1J,KAAK,CAACE,EAAWpC,EAAMmM,GAAS,GAGxD,CACA,SAASI,EAAmBZ,EAAkCC,EAAyBxJ,EAAmBoK,GACtG,MAAMV,EAAgBjQ,EAAA2B,QAAES,UAAUuO,EAAO,IACzC,IAAK,IAAIpD,EAAI,EAAGA,EAAI0C,EAAc7J,OAAQmH,IACtC0C,EAAc1C,GAAK/C,KAAKE,MAAyB,IAAnBuF,EAAc1C,IAAY,IAE5DuC,EAAUzJ,KAAK,CACXE,UAAWA,EACX2J,aAAcS,EAAO,GACrBR,YAAaQ,EAAO,GACpB5J,QAAS,GACTkJ,cAAeA,EACfG,cAAepQ,EAAA2B,QAAES,UAAU6N,GAC3BI,KAAM,KAENM,EAAO,GAAGvK,QACVuK,EAAO,GAAGlJ,SAAQ6I,IACd,IAAInM,EAAO,GACPwM,EAAO,KAAOtF,EAAAuF,sBACdzM,EAAO,QACAwM,EAAO,KAAOtF,EAAAwF,sBACrB1M,EAAO,OACAwM,EAAO,KAAOtF,EAAAyF,wBACrB3M,EAAO,OACAwM,EAAO,KAAOtF,EAAA0F,+BACrB5M,EAAO,OACHwM,EAAO,KACPxM,GAAQ,KAAOwM,EAAO,GAAK,MAG/BxM,EAAOwM,EAAO,GAElBZ,EAAY1J,KAAK,CAACE,EAAWpC,EAAMmM,GAAS,GAGxD,CAEA,MAAMvB,EAAiBA,CAACxD,EAAaC,KACjCkD,EAAenD,EAAMC,GACrB,MAAMwF,EAA8C,GAC9CC,EAA8C,GAC9CC,EAA2C,GAC3CC,EAA8C,GAC9CC,EAAkD,GAClDrB,EAA0B,GAC1BpB,EAAWjD,EAAgBrI,KAAIC,GAAKA,EAAEuL,UAC5C,IAAK,IAAItB,EAAI,EAAGA,EAAI7B,EAAgBtF,OAAQmH,IAAK,CAC7C,MAAMhH,EAAYmF,EAAgB6B,GAAGhH,UACrC,IAAKA,EAAW,SAChB,MAAMwH,EAAgBrC,EAAgB6B,GAAGQ,cACnC3G,EAASsE,EAAgB6B,GAAGoC,cAC5BR,EAAezD,EAAgB6B,GAAG4B,aAClCE,EAAe3D,EAAgB6B,GAAG8B,aAExC,EACI,EAAA/D,EAAA+F,wBAAuB9K,EAAWwH,EAAexC,EAAMS,EAAe9H,MAAOqH,EAAK+B,SAAUqB,IAC5F,EAAArD,EAAAgG,6BAA4B/K,EAAWwH,EAAexC,EAAMS,EAAe9H,MAAOqH,EAAK+B,SAAUqB,IACnGlH,SAAQtB,IACFA,GACAA,EAAOsB,SAAQG,IACXiI,EAAqBmB,EAAsBjB,EAAaxJ,EAAWqB,EAAM,G,IAKrF,MAAM2J,GAAoB,EAAAjG,EAAAkG,sBAAqBjL,EAAWwH,EAAexC,EAAMS,EAAe9H,MAAOqH,EAAK+B,SAAU9B,GAKpH,GAJA+F,EAAkB9J,SAAQG,IACtB8I,EAAmBQ,EAAmBnB,EAAaxJ,EAAWqB,EAAM,IAGpER,EAAQ,CAER,MAAMqK,GAAmB,EAAAnG,EAAAoG,qBAAoBnL,EAAWa,EAAQ+H,EAAc5D,EAAMS,EAAe9H,MAAOqH,EAAK+B,SAAUqB,GACrH8C,GACA5B,EAAqBoB,EAAsBlB,EAAaxJ,EAAWkL,GAGvE,MAAME,GAAiB,EAAArG,EAAAsG,mBAAkBrL,EAAWa,EAAQ+H,EAAc5D,EAAMS,EAAe9H,MAAOqH,EAAK+B,UACvGqE,GACAjB,EAAmBQ,EAAmBnB,EAAaxJ,EAAWoL,E,CAGtE,GAAItC,EAAc,CACd,MAAMwC,GAAmB,EAAAvG,EAAAwG,qBAAoBvL,EAAW8I,EAAc9D,EAAMS,EAAe9H,MAAOqH,EAAK+B,UACnGuE,GACAnB,EAAmBQ,EAAmBnB,EAAaxJ,EAAWsL,E,CAItE,MAAME,GAAiB,EAAAzG,EAAA0G,mBAAkBzL,EAAWgF,EAAMS,EAAe9H,MAAOqH,EAAK+B,UACjFyE,GACArB,EAAmBQ,EAAmBnB,EAAaxJ,EAAWwL,E,CAItE,MAAME,GAAsB,EAAA3G,EAAA4G,wBAAuB3G,EAAMS,EAAe9H,MAAOqH,EAAK+B,SAAUqB,GAC1FsD,GACApC,EAAqBsB,EAAsBpB,EAAa,GAAIkC,GAGhE/F,EAAgB1E,QAAOlE,GAAKA,EAAE,IAAMA,EAAE,KAAImE,SAAQG,IAC9C,MAAMuK,GAAkB,EAAXvK,EAAM,GAASA,EAAM,IAAMoE,EAAe9H,MAAQ+H,EAAa/H,MACtE+L,EAAgBjQ,EAAA2B,QAAEwL,KAAKlK,MAAMmI,EAAAgC,mBAAoB,IACvD,EAAA9B,EAAA8G,4BAA2BnC,EAAekC,EAAK5G,EAAMoD,GACrDkB,EAAqBuB,EAA0BrB,EAAa,GAAI,CAAC1E,EAAAgH,wBAAyB,GAAIzK,EAAM,GAAIqI,EAAe,IAAI,IAE/HtE,EAAiBiE,OAAO,EAAGjE,EAAiBvF,UAAW4K,KAAyBC,KAAyBE,GACzGvF,EAAegE,OAAO,EAAGhE,EAAexF,UAAW8K,GACnDrF,EAAsB+D,OAAO,EAAG/D,EAAsBzF,UAAWgL,GACjEjI,EAASyG,OAAO,EAAGzG,EAAS/C,UAAW2J,EAAY,EAIjDuC,GAAc,EAAAhS,EAAAsC,WAAS,KACzB,MAAMuD,EAAoC,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACjE,GAAIvF,EAAM2K,KAAK+B,UAAUlH,OACrB,IAAK,IAAImH,EAAI,EAAGA,EAAI3M,EAAM2K,KAAKsB,QAAQzG,OAAQmH,IAAK,CAChD,MAAMT,EAASlM,EAAM2K,KAAKsB,QAAQU,GAC9BT,EAAOnM,OACPwF,EAAOoH,IAAK,EAAAlC,EAAAkH,QAAOzF,EAAOnM,KAAMC,EAAM2K,KAAK+B,U,CAIvD,OAAOnH,CAAM,IAIXqM,GAAoB,EAAAlS,EAAAsC,WAAS,KAC/B,MAAMuD,EAAmBnG,EAAA2B,QAAEwL,KAAKlK,MAAMmI,EAAAgC,mBAAoB,GAC1D,IAAK,IAAIG,EAAI,EAAGA,EAAI3M,EAAM2K,KAAKsB,QAAQzG,OAAQmH,IAAK,CAChD,MAAMT,EAASlM,EAAM2K,KAAKsB,QAAQU,GAClC,IAAKT,EAAOnM,KAAM,SAClB,MAAM8R,GAAkB,EAAArH,EAAAsH,oBAAmB5F,EAAOnM,MAC5CgS,EAAYF,GAAiB9L,GAC9BgM,GACL,CAAChH,EAAkBE,GAAuBpE,SAAQmL,IAC9CA,EAAMpL,QAAOlE,IAAK,EAAA+H,EAAAwH,wBAAuBvP,EAAE4M,gBAAezI,SAAQG,IAC9D,IAAI+I,EAAS,EACb,IAAK,IAAImC,EAAI,EAAGA,EAAIlL,EAAMwI,cAAchK,OAAQ0M,IAExCnC,GADAmC,GAAKvF,EACK3F,EAAMwI,cAAc0C,GAEK,GAAzBlL,EAAMwI,cAAc0C,GAGlClL,EAAMb,SAAW4L,EACjBhC,GAAU,EACc,MAAjB/I,EAAMb,UACb4J,GAAU,GAEdxK,EAAOoH,GAAK/C,KAAKE,MAA6B,IAAtBvE,EAAOoH,GAAKoD,IAAgB,EAAE,GACxD,G,CAGV,OAAOxK,CAAM,IAIX4M,GAAoB,EAAAzS,EAAAsC,WAAS,KAC/B,MAAMuD,EAASnG,EAAA2B,QAAEwL,KAAKlK,MAAMmI,EAAAgC,mBAAoB,KAChD,IAAK,IAAIG,EAAI,EAAGA,EAAI3M,EAAM2K,KAAKsB,QAAQzG,OAAQmH,IAAK,CAChD,IAAK3M,EAAM2K,KAAKsB,QAAQU,GAAG5M,KAAM,SACjC,IAAI6O,EAAa9D,EAAgB6B,IAAIiC,WACrC,IAAKA,EAAY,SACjB5D,EAAepE,QAAOlE,IAAK,EAAA+H,EAAA2H,sBAAqB1P,EAAE4M,gBAAezI,SAAQG,IACrE4H,GAAc5H,EAAMwI,cAAc7C,EAAE,IAExC,MAAM0F,EAAaX,EAAYpO,MAAMqJ,GAAK,EAAI+E,EAAYpO,MAAMqJ,GAAK,EAC/D2F,EAAiBV,EAAkBtO,MAAMqJ,GAAK0F,EACpD,GAAIzD,EAAa,GAAK0D,EAAiB,EAAG,CACtC,MAAMC,EAAK3I,KAAK4I,KAAkB,IAAb5D,EAAmB0D,GACxC/M,EAAOoH,GAAK/C,KAAK6D,IAAI,IAAK8E,E,EAGlC,OAAOhN,CAAM,IAEXkN,GAAiC,EAAA/S,EAAAsC,WAAS,IAC5C7B,OAAO8F,KAAKxG,EAAAiT,kBAAkB9L,QAAO1B,GAAO/E,OAAO8F,MAAK,EAAAsE,EAAAoI,0BAAyBzN,IAAM0B,QAAOiG,IAAsC,GAA5BA,EAAOzF,QAAQ,WAAgB5B,OAAS,IAAGoN,SAEjJC,EAAmBlN,IAAsB,EAAA6E,EAAAsH,oBAAmBnM,IAAYmN,UAAYrT,EAAAsT,cACpFC,EAAeA,CAACrN,EAAmBa,KACrC,MAAMyM,GAAiB,EAAAzI,EAAAsH,oBAAmBnM,GAC1C,OAAOa,GAASyM,GAAiB,EAAAzI,EAAA0I,iBAAgBD,EAAe/L,GAAIV,IAASsM,UAAYrT,EAAAsT,cAAgCtT,EAAAsT,aAAa,EAEpII,EAAsBA,CAACnB,EAAyBxL,KAClD,IAAIjB,EAAS9F,EAAAsT,cACb,GAAIf,EAAMrM,WAAaqM,EAAMrD,eAAenJ,QAAUwM,EAAMrD,eAAelL,SAAS+C,GAAS,CACzF,MAAMqL,GAAkB,EAAArH,EAAAsH,oBAAmBE,EAAMrM,WAC7CkM,IACAtM,GAAS,EAAAiF,EAAA0I,iBAAgBrB,EAAgB3K,GAAIV,IAASsM,UAAYrT,EAAAsT,c,CAG1E,OAAOxN,CAAM,EAEX6N,EAAcC,IAChB,IAAI9N,EAAS9F,EAAAsT,cAQb,OAPIM,EAAI/D,eAEA/J,EADA,CAACkF,EAAA6I,6BAA6B7P,SAAS4P,EAAI/D,cACjC7P,EAAAqG,gBAAwBuN,EAAIlN,UAAY1G,EAAAsT,eAEzC,EAAAvI,EAAAsH,oBAAmBuB,EAAI1N,YAAYmN,UAAYrT,EAAAsT,eAGzDxN,CAAM,EAEXgO,EAAmBF,GACpBA,EAAI/D,cAAgB+D,EAAI/D,cAAgB7E,EAAA6I,4BAA+B,aAAe,uBACrFE,EAAcH,IAChB,IAAI9N,EAAS9F,EAAAsT,cACb,GAAIM,EAAI/D,aACJ,GAAI,CAAC7E,EAAA6I,6BAA6B7P,SAAS4P,EAAI/D,cAC3C/J,EAAU9F,EAAAqG,gBAAwBuN,EAAIlN,UAAY1G,EAAAsT,mBAC/C,GAAI,CAACtI,EAAAuF,sBAAuBvF,EAAAkF,yBAAyBlM,SAAS4P,EAAI/D,cAAe,CACpF,MAAMxC,GAAkB,EAAAtC,EAAAuC,oBAAmBsG,EAAI1N,WAC/CJ,EAASuH,GAAiB2G,MAAMX,UAAYrT,EAAAsT,a,MACzC,GAAI,CAACtI,EAAAwF,uBAAuBxM,SAAS4P,EAAI/D,cAAe,CAC3D,MAAMxC,GAAkB,EAAAtC,EAAAuC,oBAAmBsG,EAAI1N,WAC/CJ,EAASuH,GAAiBG,KAAK6F,UAAYrT,EAAAsT,a,MACxC,GAAI,CAACtI,EAAAyF,wBAAyBzF,EAAAmF,2BAA2BnM,SAAS4P,EAAI/D,eACzE,GAAI+D,EAAI9D,YAAa,CACjB,MAAMzC,GAAkB,EAAAtC,EAAAuC,oBAAmBsG,EAAI1N,WACzCqG,EAAUc,GAAiB4G,KAAK9M,QAAO+M,GAAOA,EAAIC,IAAMP,EAAI9D,cAClEhK,EAASyG,GAASxG,OAASwG,EAAQ,GAAG8G,UAAYrT,EAAAsT,cAAgBtT,EAAAsT,a,OAEnE,GAAI,CAACtI,EAAA0F,8BAA+B1F,EAAAoF,iCAAiCpM,SAAS4P,EAAI/D,eACrF,GAAI+D,EAAI9D,YAAa,CACjB,MAAMzC,GAAkB,EAAAtC,EAAAuC,oBAAmBsG,EAAI1N,WACzCkO,EAAmB/G,GAAiBV,KAAKiH,EAAI9D,aACnDhK,EAASsO,GAAkBf,UAAYrT,EAAAsT,a,OAExC,GAAI,CAACtI,EAAAqJ,2BAA4BrJ,EAAAsJ,wBAAwBtQ,SAAS4P,EAAI/D,eAAiB+D,EAAI9D,YAAa,CAC3G,MAAM0D,GAAiB,EAAAzI,EAAAsH,oBAAmBuB,EAAI1N,WAC9C,GAAIsN,EAAgB,CAChB,MAAMe,EAAaf,EAAe/L,GAC5B+M,GAAe,EAAAzJ,EAAA0I,iBAAgBc,EAAYX,EAAI9D,aACjD0E,IACA1O,EAAS0O,EAAanB,S,OAG3B,GAAI,CAACrI,EAAAyJ,0BAA0BzQ,SAAS4P,EAAI/D,eAAiB+D,EAAI9D,YAAa,CACjF,MAAM4E,EAAmB1U,EAAA0E,oBAAqBkP,EAAI9D,aAC9C4E,IACA5O,EAAS4O,EAAiBC,MAAMzR,QAAQ,OAAQ,uB,MAEjD,GAAI,CAAC8H,EAAA4J,wBAAwB5Q,SAAS4P,EAAI/D,cAAe,CAC5D,MAAMuC,GAAkB,EAAArH,EAAAsH,oBAAmBuB,EAAI1N,WAC3CkM,IACAtM,EAAS9F,EAAA6G,eAAeuL,EAAgB3K,I,CAIpD,OAAO3B,CAAM,EAEX+O,EAAgBzP,IAClB,MAAMX,EAASW,EAAQ7E,EAAM2K,KAAKsB,QAAQzG,QAAS,EAAAgF,EAAAsH,oBAAmB9R,EAAM2K,KAAKsB,QAAQpH,GAAO9E,WAAQwE,EACxG,MAAO,KAAOL,EAAUzE,EAAA8U,uBAA+BrQ,EAAO6B,IAAM,QAAQ,EAE1EyO,EAAiBnB,GACnB,KAAOA,EAAIlN,QAAW1G,EAAA8U,uBAA+BlB,EAAIlN,SAAW,SAClEsO,EAAqBA,CAACzC,EAAyBxL,IACjDwL,EAAMjD,eAAiBvI,EAAS,YAAc,GAC5C+I,EAAe8D,IACjB,IAAI9N,EAAS,GAkBb,OAjBI8N,EAAI/D,eACA,CAAC7E,EAAAuF,sBAAuBvF,EAAAkF,yBAAyBlM,SAAS4P,EAAI/D,cAC9D/J,EAAS,QACF,CAACkF,EAAAwF,uBAAuBxM,SAAS4P,EAAI/D,cAC5C/J,EAAS,OACF,CAACkF,EAAAyF,wBAAyBzF,EAAAmF,2BAA2BnM,SAAS4P,EAAI/D,cACzE/J,EAAS,OACF,CAACkF,EAAA0F,8BAA+B1F,EAAAoF,iCAAiCpM,SAAS4P,EAAI/D,cACrF/J,EAAS,SAAW8N,EAAI9D,YAAc,IAC/B,CAAC9E,EAAAsJ,uBAAwBtJ,EAAAqJ,4BAA4BrQ,SAAS4P,EAAI/D,eAElE,CAAC7E,EAAA6I,6BAA6B7P,SAAS4P,EAAI/D,cADlD/J,EAAS8N,EAAI9D,YAGN,CAAC9E,EAAA4J,wBAAwB5Q,SAAS4P,EAAI/D,gBAC7C/J,EAAS,SAGVA,CAAM,EAEXmP,EAAc7H,IAChB,IAAItH,EAAS,GAYb,OAXIsH,EAAO7C,WAAW,KAClBzE,EAAS,OACS,MAAXsH,EACPtH,EAAS,KACS,MAAXsH,EACPtH,EAAS,OACFsH,EAAO7C,WAAW,KACzBzE,EAAS,QACS,MAAXsH,IACPtH,EAAS,QAENA,CAAM,EAGXoP,EAAgBA,KAClBxG,EAAenO,EAAM2K,KAAM3K,EAAM4K,iBAAiB,EAGhDgK,EAAuBA,CAAC5C,EAAyBxL,KAC/CwL,EAAMrD,eAAenJ,QAAUwM,EAAMrD,eAAelL,SAAS+C,KACzDwL,EAAMjD,eAAiBvI,EACvBwL,EAAMjD,cAAgBiD,EAAMlD,cAE5BkD,EAAMjD,cAAgBvI,EAE1BmO,I,EAIFE,EAAaA,KACf5J,EAAsBpE,SAAQiO,IAC1BA,EAAStF,cAAcR,OAAO,EAAG8F,EAAStF,cAAchK,UAAWsP,EAASzF,cAAc,IAE9FtE,EAAiBlE,SAAQiO,IACrBA,EAAStF,cAAcR,OAAO,EAAG8F,EAAStF,cAAchK,UAAWsP,EAASzF,cAAc,IAE9FrE,EAAenE,SAAQiO,IACnBA,EAAStF,cAAcR,OAAO,EAAG8F,EAAStF,cAAchK,UAAWsP,EAASzF,cAAc,GAC5F,EAGN,MAAO,CACHlO,cAEAiK,iBACAC,eACAC,kBACAC,wBACAT,kBACAC,mBACAC,iBACAC,wBACAyG,cACAnJ,WACAkK,iCACAsC,sBAAAxK,EAAAwK,sBACAC,sBAAAzK,EAAAyK,sBACAC,6BAAA1K,EAAA0K,6BACAP,aACA7B,kBACAG,eACAG,sBACAC,aACAG,kBACAC,aACAc,eACAE,gBACAC,qBACA7C,oBACAO,oBACA5C,cACA9D,cAEAkJ,gBACAC,uBACAC,aAER,G,oKCz1BJ,MAAAnV,EAAAJ,EAAA,MACAE,EAAAF,EAAA,MACAK,EAAAN,EAAAC,EAAA,MACAG,EAAAH,EAAA,MACAkL,EAAAlL,EAAA,MAEAO,EAAAA,YAAe,EAAAH,EAAAI,iBAAgB,CAC7BC,KAAM,aACNC,MAAO,CACLkM,OAAQ,CAAEhM,KAAMC,OAA6BC,UAAU,GACvD8U,YAAa,CAAEhV,KAAMM,QACrB2U,cAAe,CAAEjV,KAAMQ,SACvB0U,SAAU,CAAElV,KAAMC,QAClBkV,SAAU,CAAEnV,KAAMQ,SAClB4U,KAAM,CAAEpV,KAAMmC,OACd4J,QAAS,CAAE/L,KAAMmC,OACjBkT,mBAAoB,CAAErV,KAAMmC,QAE9BpB,KAAAA,CAAMjB,GACJ,MAAM,YAAEmB,EAAW,iBAAEC,IAAqB,EAAAzB,EAAAoB,WAEpC+K,GAAa,EAAApM,EAAAkC,KAAI,IACvB,EAAAlC,EAAA8E,OAAMxE,GAAO,KACX8L,EAAWxI,OAAO,IAGpB,MAAMuO,GAAkB,EAAAnS,EAAAsC,WAAS,IAAMhC,EAAMkM,OAAOnM,KAAQN,EAAAiT,iBAAiB1S,EAAMkM,OAAOnM,YAA8CwE,OAAYA,IAC9IsO,GAAkB,EAAAnT,EAAAsC,WAAS,IAAM6P,EAAgBvO,OAAOwP,UAAYrT,EAAAsT,gBACpEyC,GAAoB,EAAA9V,EAAAsC,WAAS,IAAM6P,EAAgBvO,OAAOc,MAAS,IAAO3E,EAAAuF,4BAAoCxE,OAAOqR,EAAgBvO,MAAMc,QAAW,KACtJqR,GAAe,EAAA/V,EAAAsC,WAAS,IAAM6P,EAAgBvO,OAAOyC,GAAMtG,EAAAqG,gBAAwB+L,EAAgBvO,MAAMyC,IAAMtG,EAAAsT,gBAC/G5F,GAAgB,EAAAzN,EAAAsC,WAAS,IAAO0T,EAAUpS,MAAQoS,EAAUpS,MAAM8I,KAAO,KACzEsJ,GAAY,EAAAhW,EAAAsC,WAAS,IAAOhC,EAAMkM,OAAOnM,MAAQC,EAAMkM,OAAOyJ,WAAa,EAAAnL,EAAAoL,yBAAwB5V,EAAMkM,OAAOnM,KAAMC,EAAMkM,OAAOyJ,gBAAapR,IAChJ0P,GAAe,EAAAvU,EAAAsC,WAAS,KAC5B,IAAIuD,EACJ,GAAImQ,EAAUpS,MAAO,CACnB,MAAMkD,EAASkP,EAAUpS,MAAM4D,GAC3BV,GAAUqL,EAAgBvO,QAC5BiC,EAAU9F,EAAAoW,cAAsBhE,EAAgBvO,MAAM4D,IAAIV,G,CAG9D,OAAOjB,CAAM,IAETuQ,GAAe,EAAApW,EAAAsC,WAAS,IAAMiS,EAAa3Q,OAAOwP,UAAYrT,EAAAsT,gBAC9DgD,GAAa,EAAArW,EAAAsC,WAAS,IAAMiS,EAAa3Q,OAAO4B,KAAO,KACvD8Q,GAAY,EAAAtW,EAAAsC,WAAS,KACzB8J,EAAWxI,MACX,IAAIiC,EAAS,IACb,GAAImQ,EAAUpS,MAAO,CACnB,IAAIF,EAAOpD,EAAMkV,YACblV,EAAMoV,UAAYhS,IACP,aAATA,GACFmC,EAASnE,EAAiB,MAAOpB,EAAMoV,SAAS,QAChD7P,GAAU,IACVA,GAAUnE,EAAiB,SAAUpB,EAAMoV,SAAS,YAEpD7P,EAASnE,EAAiBgC,EAAMpD,EAAMoV,SAAShS,I,CAIrD,OAAOmC,CAAM,IAET9D,GAAqB,EAAA/B,EAAAsC,WAAS,KAClC,MAAMuD,EAA8B,GACpC,GAAImQ,EAAUpS,MACZ,IAAK,IAAIqJ,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMzH,EAAM,YAAcyH,EAAI,GAC9B,IAAIrJ,EAAQoS,EAAUpS,MAAM4B,IAAQ,OACpCK,EAAOE,KAAMhG,EAAA0E,oBAA4Bb,G,CAG7C,OAAOiC,CAAM,IAGT0Q,EAAiBC,IACrB,MAAMnW,EAAOmW,EAAYlW,EAAMkM,OAAOiK,aAAa3Q,OAASxF,EAAMkM,OAAOiK,aAAaD,QAAa3R,EACnG,OAAOxE,EAAQN,EAAAiT,iBAAiB3S,GAA2C+S,SAAWrT,EAAAsT,aAAa,EAE/FqD,EAAqBvR,GAAkBpD,EAAmB6B,MAAMuB,IAAQuP,MAAQ3S,EAAmB6B,MAAMuB,GAAOuP,MAAMzR,QAAQ,SAAU,uBAAyBlD,EAAAsT,cACjKsD,EAAmBxR,GAAkBpD,EAAmB6B,MAAMuB,IAAQK,KAAQ,GAC9EoR,EAAiBzR,GACrB1E,OAAO8F,KAAKxG,EAAA8W,qBAAqB9T,KAAIyC,GAAOzF,EAAA8W,oBAAqBrR,KAAgCzB,SAASzD,EAAMkM,OAAOoJ,KAAKzQ,GAAO2R,eAAiB,IAAMxW,EAAMkM,OAAOoJ,KAAKzQ,GAAO2R,cAAgB,GAE/LC,EAAsBA,KACtBzW,EAAMqV,UACRqB,G,EAIEA,EAASA,KACb,MAAMxK,EAASlM,EAAMkM,OACrB,GAAIA,GAAQnM,MACN4W,QAAQ,SAAWzK,EAAOnM,KAAO,kBAAmB,CACtD,MAAM6W,EAAc5W,EAAMiM,SAASrF,QAAOlE,GAAKA,GAAKwJ,EAAOnM,QAC3D,EAAAP,EAAAqX,wBAAuB3K,EAAOnM,KAAMmM,EAAOyJ,eAAWpR,EAAWqS,GACjEE,OAAOC,KAAK,KAAM,S,GAMxB,MAAO,CACL5V,cAEA0R,kBACA2C,oBACAC,eACAtI,gBACA8I,gBACAH,eACAC,aACAK,oBACAC,kBACAC,gBACAN,YAEAS,sBAEJ,G,oKChEF,MAAArX,EAAAC,EAAAC,EAAA,OACAI,EAAAJ,EAAA,MACAE,EAAAF,EAAA,MACA0X,EAAA3X,EAAAC,EAAA,OACAkL,EAAAlL,EAAA,MACA2X,EAAA5X,EAAAC,EAAA,OAEAO,EAAAA,YAAe,EAAAH,EAAAI,iBAAgB,CAC7BC,KAAM,kBACNc,WAAY,CACVqW,gBAAAF,EAAAjW,QACAoW,WAAAF,EAAAlW,SAEFf,MAAO,CACL4E,QAAS,CAAE1E,KAAMQ,QAASN,UAAU,GACpCuK,KAAM,CAAEzK,KAAMC,OAA2BC,UAAU,GACnDgX,SAAU,CAAElX,KAAMmC,QAEpBrB,MAAO,CAAC,eAAgB,YACxBC,KAAAA,CAAMjB,EAAOkB,GACX,MAAMmW,GAAsB,EAAA3X,EAAAkC,MAAI,GAC1B0V,GAAW,EAAA5X,EAAA6B,UAAS,CACxBlB,IAAK,EACLN,KAAM,GACNkM,QAAS,GACTsL,YAAa,GACb7K,SAAU,GACV8K,oBAAqB,GACrBlC,KAAM,KAEFmC,GAAmB,EAAA/X,EAAAkC,MAAK,GACxB8V,EAAkB,CAAC,WAAY,UAAW,UAAW,QAAS,SAAU,UAAW,SAAU,WAAY,UAAW,OAAQ,OAAQ,WAAY,YAAa,WAAY,YAAa,eACtLC,GAA0B,EAAAjY,EAAAkC,KAAI,IAC9BgW,GAAmB,EAAAlY,EAAAkC,MAAK,GACxBiW,GAAc,EAAAnY,EAAAkC,KAAI,IAClBkW,GAAe,EAAApY,EAAA6B,UAAS,IAE9B,SAASwW,IACPT,EAASjX,GAAKL,EAAM2K,KAAKtK,GACzBiX,EAASvX,KAAOC,EAAM2K,KAAK5K,KAC3B,MAAMwD,EAAkB,GACxB,IAAK,IAAIoJ,EAAI,EAAGA,EAAI3M,EAAM2K,KAAKsB,QAAQzG,OAAQmH,IAC7CpJ,EAAKkC,KAAK,CACRpF,GAAIsM,EACJ5M,KAAMC,EAAM2K,KAAKsB,QAAQU,GAAG5M,KAC5B4V,UAAW3V,EAAM2K,KAAKsB,QAAQU,GAAGgJ,UACjCD,UAAW1V,EAAM2K,KAAKsB,QAAQU,GAAG+I,UACjCJ,KAAMlW,EAAA2B,QAAES,UAAUxB,EAAM2K,KAAKsB,QAAQU,GAAG2I,KAAK1O,QAAOlE,GAAKgV,EAAgBjU,SAASf,MAClFyT,aAAcnW,EAAM2K,KAAKsB,QAAQU,GAAGwJ,aAAe,IAAInW,EAAM2K,KAAKsB,QAAQU,GAAGwJ,cAAgB,KAGjGmB,EAASrL,QAAQ+C,OAAO,EAAGsI,EAASrL,QAAQzG,UAAWjC,GACvD+T,EAASC,YAAcvX,EAAM2K,KAAK4M,YAClCD,EAAS5K,SAAWtN,EAAA2B,QAAES,UAAUxB,EAAM2K,KAAK+B,UAC3C4K,EAAShC,KAAOlW,EAAA2B,QAAEiX,MAAMhY,EAAM2K,KAAK2K,KACrC,CACAyC,IACAE,KAEA,EAAAvY,EAAA8E,OAAMxE,GAAQyE,IACRA,EAAOkG,KAAKsB,UACd8L,IACIN,EAAiBnU,OAAS,GAAKmU,EAAiBnU,MAAQgU,EAASrL,QAAQzG,SAC3EmS,EAAwBrU,MAAQgU,EAASrL,QAAQwL,EAAiBnU,OAAOqS,YAGzElR,EAAO2S,UACTU,EAAa9I,OAAO,EAAG8I,EAAatS,UAAWf,EAAO2S,UAExDa,IACAZ,EAAoB/T,OAAQ,CAAK,IAGnC,MAAMsC,GAAa,EAAAlG,EAAAsC,WAAS,IAAMsV,EAASrL,QAAQxJ,KAAKC,GAAMA,EAAE3C,SAE1DoW,GAAe,EAAAzW,EAAAsC,WAAS,KAC5B,IAAIuD,EAAS,GACb,GAAIkS,EAAiBnU,OAAS,GAAKmU,EAAiBnU,MAAQgU,EAASrL,QAAQzG,OAAQ,CACnF,MAAM0G,EAASoL,EAASrL,QAAQwL,EAAiBnU,OACjDiC,EAAS,IAAI2G,EAAOiK,cACpB,IAAK,IAAIxJ,EAAIpH,EAAOC,OAAQmH,EAAI,EAAGA,IACjCpH,EAAOE,KAAK,G,CAGhB,OAAOF,CAAM,IAGT2S,EAAoBC,IACxB,IAAK,IAAIxL,EAAI,EAAGA,EAAIwL,EAAc3S,OAAQmH,IAMxC,GALI2K,EAASrL,QAAQU,GAAG5M,MAAQoY,EAAcxL,KAC5C2K,EAASrL,QAAQU,GAAG2I,KAAO,GAC3BgC,EAASrL,QAAQU,GAAGwJ,aAAe,IAErCmB,EAASrL,QAAQU,GAAG5M,KAAOoY,EAAcxL,GACrC2K,EAASrL,QAAQU,GAAG5M,KAAM,CAC5B,MAAMqY,GAAiB,EAAA5N,EAAA6N,qBAAoBf,EAASrL,QAAQU,GAAG5M,MAAM0C,KAAIC,IAAK,EAAA8H,EAAA8N,4BAA2B5V,KACrG0V,EAAe5S,QACZ8R,EAASrL,QAAQU,GAAGgJ,WAAcyC,EAAe3U,SAAS6T,EAASrL,QAAQU,GAAGgJ,aACjF2B,EAASrL,QAAQU,GAAGgJ,WAAY,EAAAnW,EAAA+Y,sBAAqBjB,EAASrL,QAAQU,GAAG5M,OAEvE4M,GAAK8K,EAAiBnU,QACxBqU,EAAwBrU,MAAQgU,EAASrL,QAAQU,GAAGgJ,YAGtD2B,EAASrL,QAAQU,GAAGgJ,eAAYpR,C,GAMlCiU,EAA6BA,KAC7Bf,EAAiBnU,OAAS,GAAKmU,EAAiBnU,MAAQgU,EAASrL,QAAQzG,QAAU8R,EAASrL,QAAQwL,EAAiBnU,OAAOvD,OAC9HsX,EAAoB/T,OAAS+T,EAAoB/T,M,EAI/CmV,EAAiBpY,IAErB,GADAoX,EAAiBnU,MAAQjD,EACrBoX,EAAiBnU,OAAS,GAAKmU,EAAiBnU,MAAQgU,EAASrL,QAAQzG,OAAQ,CACnF,MAAM0G,EAASoL,EAASrL,QAAQwL,EAAiBnU,OACjDqU,EAAwBrU,MAAQ4I,EAAOyJ,UACvCiC,EAAiBtU,OAAS,C,CAE5B+T,EAAoB/T,OAAQ,CAAK,EAE7BoV,EAAuBrY,GAC3BA,GAAMoX,EAAiBnU,MAAQ,YAAc,GACzCqV,EAAqBA,IACrBlB,EAAiBnU,OAAS,GAAKmU,EAAiBnU,MAAQgU,EAASrL,QAAQzG,OACpE8R,EAASrL,QAAQwL,EAAiBnU,OAAOvD,KAE3C,GAGH6Y,EAAcC,IAClB,GAAIpB,EAAiBnU,MAAQ,GAAKmU,EAAiBnU,OAASgU,EAASrL,QAAQzG,OAC3E,OACF,MAAM0G,EAASoL,EAASrL,QAAQwL,EAAiBnU,OACjD,GAAI4I,GAAUA,EAAOnM,KAAM,CACzB,MAAMuV,EAAOpJ,EAAOoJ,KAChBA,IACEA,EAAK7R,SAASoV,GAChBvD,EAAKtG,OAAO,EAAGsG,EAAK9P,UAAW8P,EAAK1O,QAAQlE,GAAMA,GAAKmW,KAEvDvD,EAAK7P,KAAKoT,G,GAKZC,EAAoBD,IACxB,IAAItT,GAAS,EACb,GAAIkS,EAAiBnU,OAAS,GAAKmU,EAAiBnU,MAAQgU,EAASrL,QAAQzG,OAAQ,CACnF,MAAM0G,EAASoL,EAASrL,QAAQwL,EAAiBnU,OAC7C4I,GAAUA,EAAOnM,OACnBwF,EAAS2G,EAAOoJ,KAAK7R,SAASoV,G,CAGlC,OAAOtT,EAAS,YAAc,EAAE,EAG5BwT,GAAa,EAAArZ,EAAAsC,WAAS,KAC1B,IAAIuD,EAAmB,GACvB,GAAIkS,EAAiBnU,OAAS,GAAKmU,EAAiBnU,MAAQgU,EAASrL,QAAQzG,OAAQ,CACnF,MAAM0G,EAASoL,EAASrL,QAAQwL,EAAiBnU,OAC3CqC,EAAYuG,EAAOnM,KACzB,GAAI4F,EAAW,CACbJ,GAAS,EAAAiF,EAAA6N,qBAAoB1S,GAAWlD,KAAKC,IAC3C,EAAA8H,EAAA8N,4BAA2B5V,KAE7B,MAAMsW,GAAmB,EAAAxZ,EAAA+Y,sBAAqB5S,GAC9C,GAAIJ,EAAO9B,SAASuV,GAAmB,CACrC,MAAMC,EAAS1T,EAAOqB,QAAQlE,GAAMA,GAAKsW,IAAkBpG,OACvDqG,EAAOzT,SACTD,EAAS,CAACyT,KAAqBC,G,GAKvC,OAAO1T,CAAM,IAGT2T,EAAoBA,KACxB,GAAIzB,EAAiBnU,MAAQ,GAAKmU,EAAiBnU,OAASgU,EAASrL,QAAQzG,OAAQ,OACrF,MAAM0G,EAASoL,EAASrL,QAAQwL,EAAiBnU,OACjD4I,EAAOyJ,UAAYgC,EAAwBrU,KAAK,EAG5C6V,EAAsBhB,IAC1B,MAAMjM,EAASoL,EAASrL,QAAQwL,EAAiBnU,OACjD4I,EAAOiK,aAAe,IAAIgC,EAAc,EAG1C,SAASF,IACPJ,EAAYvU,MAAQgU,EAAShC,KAAK8D,KAAK,IACzC,CAEA,MAAMC,EAAsBA,KAC1B,IAAI9T,EAAmB,GACnBsS,EAAYvU,QACdiC,EAASsS,EAAYvU,MAAM6F,MAAM,OAAOvC,QAAOiS,GAAOA,KAExDvB,EAAShC,KAAO/P,CAAM,EAGlB+T,EAAmBT,GAAgBvB,EAAShC,KAAK7R,SAASoV,GAE1DU,EAAkBV,IAClBS,EAAgBT,GAClBvB,EAAShC,KAAKtG,OAAO,EAAGsI,EAAShC,KAAK9P,UAAW8R,EAAShC,KAAK1O,QAAOlE,GAAKA,GAAKmW,KAEhFvB,EAAShC,KAAK7P,KAAKoT,GAErBZ,GAAkB,EAGduB,EAAgBA,KACpBtY,EAAQyC,KAAK,eAAe,EAGxB8V,EAAYA,KAChBvY,EAAQyC,KAAK,WAAY2T,EAAS,EAGpC,MAAO,CACLD,sBACAzR,aACAuQ,eACAuB,kBAEAc,6BACAf,mBACAkB,qBAEAC,aACAE,mBAEAxB,WACAQ,eACAD,cACAwB,sBACAC,kBACAC,iBACAd,gBACAC,sBACAf,0BACAoB,aACAG,oBACAC,qBAEAjB,mBACAsB,gBACAC,YAEJ,G,mKCjSF,MAAAra,EAAAC,EAAAC,EAAA,OACAI,EAAAJ,EAAA,MACAoa,EAAApa,EAAA,KACAE,EAAAF,EAAA,MACAG,EAAAH,EAAA,MACAK,EAAAN,EAAAC,EAAA,MACAkL,EAAAlL,EAAA,MACA2X,EAAA5X,EAAAC,EAAA,OAEAO,EAAAA,YAAe,EAAAH,EAAAI,iBAAgB,CAC7BC,KAAM,WACNC,MAAO,CACL2K,KAAM,CAAEzK,KAAMC,OAA2BC,UAAU,GACnDO,SAAU,CAAET,KAAMQ,QAASiZ,SAAS,GACpCC,SAAU,CAAE1Z,KAAMQ,SAClByU,cAAe,CAAEjV,KAAMQ,SACvBwU,YAAa,CAAEhV,KAAMM,QACrBqZ,WAAY,CAAE3Z,KAAMQ,SACpBoZ,YAAa,CAAE5Z,KAAMQ,SACrBmK,eAAgB,CAAE3K,KAAMC,SAE1Ba,MAAO,CAAC,aAAc,yBAA0B,wBAChDH,WAAY,CACVsW,WAAAF,EAAAlW,SAEFE,KAAAA,CAAMjB,EAAOkB,GACX,MAAM,YAAEC,IAAgB,EAAAxB,EAAAoB,WAElBgZ,GAAc,EAAAra,EAAA6B,UAAS,CAAC,GACxByY,GAAgB,EAAAta,EAAA6B,UAAS,CAAC,GAC1B0Y,GAAM,EAAAva,EAAA6B,UAAS,CAAC,GAChB2Y,EAAS,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MACnD,SAASC,IACPD,EAAOrT,SAAQ3B,IACb+U,EAAI/U,GAAO,CAAC,GAEhB,CACAiV,IAEA,MAAMrO,GAAa,EAAApM,EAAAkC,KAAI,IACvB,EAAAlC,EAAA8E,OAAMxE,GAAOsI,UACX8R,EAAU3V,EAAOkG,MACjBmB,EAAWxI,OAAO,KAGpB,EAAA5D,EAAAgM,YAAU,KACR0O,EAAUpa,EAAM2K,KAAK,IAGvB,MAAM4K,GAAqB,EAAA7V,EAAAsC,WAAS,KAAM,EAAAwI,EAAA6P,uBAAsBra,EAAM2K,QAChE2P,GAA0B,EAAA5a,EAAAsC,WAAS,KACvC,MAAMuD,EAAmB,GAiBzB,OAhBAgQ,EAAmBjS,MAAMuD,SAASG,IAChC,GAAa,UAATA,EAAmB,CACrB,MAAMiF,EAAUjM,EAAM2K,KAAKsB,QAAQrF,QAAQlE,GAAMA,EAAE3C,OAC7B,GAAlBkM,EAAQzG,QACVyG,EAAQpF,SAASqF,IACf,MAAMhI,EAASzE,EAAAiT,iBAAiBxG,EAAOnM,MACjCwa,EAAO9a,EAAAqG,gBAAwB5B,EAAO6B,IAC5CR,EAAOE,KAAK8U,EAAI,G,KAGf,CACL,MAAMA,EAAO9a,EAAAqG,gBAAwBkB,EAAMrE,QAAQ,OAAQ,KAC3D4C,EAAOE,KAAK8U,GACZhV,EAAOE,KAAK8U,E,KAGThV,CAAM,IAETgS,GAAc,EAAA7X,EAAAsC,WAAS,IAAMhC,EAAM2K,KAAK4M,aAAe,KACvDtS,GAAgB,EAAAvF,EAAAsC,WAAS,IAAOhC,EAAMW,SAAW,YAAc,KAErE2H,eAAe8R,EAAUzP,GACvB,MAAM6P,EAAO,GACb,IAAK,MAAMtO,KAAUvB,EAAKsB,QACxBuO,EAAK/U,KAAK,CACRP,IAAKgH,EAAO7L,GACZiD,YAAa,EAAAkH,EAAAiQ,uBAAsBvO,EAAQvB,KAG/CxK,OAAO8F,KAAK8T,GAAalT,SAAQ3B,WACxB6U,EAAY7U,EAAI,IAEzB/E,OAAO8F,KAAK+T,GAAenT,SAAQ3B,WAC1B8U,EAAc9U,EAAI,UAErBwV,QAAQC,IAAIH,GAAM/R,MAAKmS,IAC3BA,EAAQ/T,SAAQG,IACd+S,EAAY/S,EAAM9B,KAAO8B,EAAM1D,OAAOuX,YAAYzF,SAClD4E,EAAchT,EAAM9B,KAAO8B,EAAM1D,KAAK,GACtC,IAEJwX,IACAC,IACA7Z,EAAQyC,KAAK,uBAAwBgH,EAAKtK,GAAI2Z,EAChD,CAEA,SAASc,IACP,MAAME,EAA6C,CAAC,EACpD7a,OAAO8F,KAAK8T,GAAalT,SAAQ3B,IAC/B8V,EAAgB9V,GAAO,CAAC,CAAC,IAE3B/E,OAAO8F,KAAK8T,GAAalT,SAAQ3B,IAC/B,MAAMoJ,EAAe0L,EAAc9U,GAC7B2M,EAAkBvD,GAAcnC,gBAAgB0F,gBAChDoC,EAAe3F,GAAcnC,gBAAgB8H,aACnD,GAAIpC,GAAmBA,EAAgBoJ,MACrC,IAAK,MAAMC,KAAgBrJ,EAAgBoJ,MAAO,CAChD,MAAME,GAAY,EAAA3b,EAAA4b,eAAcF,EAAc,KAAM,KAAM,KAAM,MAChE,GAAIC,EAAUE,KAAOF,EAAUG,KAAOH,EAAUI,GAAI,SACpD,MAAMjY,GAAQ,EAAAoW,EAAA8B,aAAYL,EAAUG,GAAIhN,EAAauM,WAAWzF,SAAU9G,EAAamN,aAAcN,EAAUO,GAAIP,EAAUQ,IACvHC,EAAST,EAAUI,GAAG5Y,QAAQ,UAAW,IAC/CxC,OAAO8F,KAAK+T,GAAenT,SAAQgV,IAC7BA,GAAQ3W,IACN0W,KAAUZ,EACZA,EAAgBa,GAAMD,IAAWtY,EAEjC0X,EAAgBa,GAAMD,GAAUtY,E,IAM1C,GAAI2Q,GAAgBA,EAAagH,MAC/B,IAAK,MAAMC,KAAgBjH,EAAagH,MAAO,CAC7C,MAAME,GAAY,EAAA3b,EAAA4b,eAAcF,EAAc,KAAM,KAAM,KAAM,MAChE,GAAIC,EAAUE,KAAOF,EAAUG,KAAOH,EAAUI,GAAI,SACpD,MAAMjY,GAAQ,EAAAoW,EAAA8B,aAAYL,EAAUG,GAAIhN,EAAauM,WAAWzF,SAAU9G,EAAamN,aAAcN,EAAUO,GAAIP,EAAUQ,IACvHC,EAAST,EAAUI,GAAG5Y,QAAQ,UAAW,IAC/CxC,OAAO8F,KAAK+T,GAAenT,SAAQgV,IAC7BA,GAAQ3W,IACN0W,KAAUZ,EACZA,EAAgBa,GAAMD,IAAWtY,EAEjC0X,EAAgBa,GAAMD,GAAUtY,E,QAO5C,IAAK,MAAM4B,KAAO/E,OAAO8F,KAAK8T,GAC5B,GAAI7U,KAAO8V,EACT,IAAK,MAAM5X,KAAQjD,OAAO8F,KAAK+U,EAAgB9V,IACxC6U,EAAY7U,KACb9B,KAAQ2W,EAAY7U,GACtB6U,EAAY7U,GAAK9B,IAAS4X,EAAgB9V,GAAK9B,GAE/C2W,EAAY7U,GAAK9B,GAAQ4X,EAAgB9V,GAAK9B,GAKxD,CAGA,SAAS2X,IACPZ,IACA,MAAM2B,EAAwB,GACxBC,EAA0B,GAoHhC,GAnHA5b,OAAO8F,KAAK+T,GAAenT,SAAQ3B,IACjC,MAAMoJ,EAAe0L,EAAc9U,GAC7B2M,EAAkBvD,GAAcnC,gBAAgB0F,gBAChDpQ,EAAqB6M,GAAcnC,gBAAgB1K,mBACzD,GAAIoQ,EAAiB,CAInB,GAHIA,GACFiK,EAAYrW,KAAKoM,EAAgB9L,IAE/B8L,EAAgB4B,OAAOuI,GACzB,IAAK,MAAMd,KAAgBrJ,EAAgB4B,OAAOuI,GAChD,GAAId,EAAaK,IAAML,EAAaK,GAAGvR,WAAW,MAAQkR,EAAaK,GAAGlS,SAAS,OAAS6R,EAAaI,GAAI,CAC3G,MAAMnV,EAAU+U,EAAaK,GAAG5Y,QAAQ,KAAM,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,MAAO,IACtF,IAAIW,EAAQ,EACZ,GAAIlE,EAAA2B,QAAEkb,SAASf,EAAaI,IAC1BhY,EAAQ4X,EAAaI,QAChB,GAAIlc,EAAA2B,QAAEmb,cAAchB,EAAaI,IAAK,CAC3C,MAAMa,EAAQ7N,EAAanC,gBAAgBiQ,SACvCD,GAASA,KAASjB,EAAaI,KACjChY,EAAQ4X,EAAaI,GAAGa,G,CAGZ,MAAZhW,EACF+T,EAAOtT,QAAOlE,GAAW,OAANA,IAAYmE,SAAQ3B,IACrC+U,EAAI/U,IAAQ5B,CAAK,IAGnB2W,EAAI9T,IAAY7C,C,CAKxB,GAAIuO,EAAgB5E,MAAM+O,GACxB,IAAK,MAAMd,KAAgBrJ,EAAgB5E,MAAM+O,GAC/C,GAAId,EAAaK,IAAML,EAAaK,GAAGvR,WAAW,MAAQkR,EAAaK,GAAGlS,SAAS,OAAS6R,EAAaI,GAAI,CAC3G,MAAMnV,EAAU+U,EAAaK,GAAG5Y,QAAQ,KAAM,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,MAAO,IACtF,IAAIW,EAAQ,EACZ,GAAIlE,EAAA2B,QAAEkb,SAASf,EAAaI,IAC1BhY,EAAQ4X,EAAaI,QAChB,GAAIlc,EAAA2B,QAAEmb,cAAchB,EAAaI,IAAK,CAC3C,MAAMa,EAAQ7N,EAAanC,gBAAgBkQ,QACvCF,GAASA,KAASjB,EAAaI,KACjChY,EAAQ4X,EAAaI,GAAGa,G,CAGZ,MAAZhW,EACF+T,EAAOtT,QAAOlE,GAAW,OAANA,IAAYmE,SAAQ3B,IACrC+U,EAAI/U,IAAQ5B,CAAK,IAGnB2W,EAAI9T,IAAY7C,C,CAKxB,GAAIuO,EAAgB6B,MAA+B,WAAvB7B,EAAgB+B,GAC1C,IAAK,MAAM0I,KAAgBzK,EAAgB6B,KACzC,GAAI4I,EAAaN,GACf,IAAK,MAAMd,KAAgBoB,EAAaN,GACtC,GAAId,EAAaK,IAAML,EAAaK,GAAGvR,WAAW,MAAQkR,EAAaK,GAAGlS,SAAS,OAAS6R,EAAaI,GAAI,CAC3G,MAAMnV,EAAU+U,EAAaK,GAAG5Y,QAAQ,KAAM,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,MAAO,IACtF,IAAIW,EAAQ,EACRlE,EAAA2B,QAAEkb,SAASf,EAAaI,MAC1BhY,EAAQ4X,EAAaI,IAEP,MAAZnV,EACF+T,EAAOtT,QAAOlE,GAAW,OAANA,IAAYmE,SAAQ3B,IACrC+U,EAAI/U,IAAQ5B,CAAK,IAGnB2W,EAAI9T,IAAY7C,C,CAO5B,MAAM6J,EAAgBmB,EAAanC,gBAAgBC,OAASpM,EAAM6K,eAAiB7K,EAAM6K,eAAegH,EAAgB+B,KAAO,EAAI,GACnI,GAAI/B,EAAgBzF,KAClB,IAAK,IAAIO,EAAI,EAAGA,GAAKQ,EAAeR,IAAK,CACvC,MAAMkH,EAAmBhC,EAAgBzF,KAAK5L,OAAOmM,IACrD,GAAIkH,EAAiBmI,GACnB,IAAK,MAAMd,KAAgBrH,EAAiBmI,GAC1C,GAAId,EAAaK,IAAML,EAAaK,GAAGvR,WAAW,MAAQkR,EAAaK,GAAGlS,SAAS,OAAS6R,EAAaI,GAAI,CAC3G,MAAMnV,EAAU+U,EAAaK,GAAG5Y,QAAQ,KAAM,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,MAAO,IAClFvD,EAAA2B,QAAEkb,SAASf,EAAaI,MACV,MAAZnV,EACF+T,EAAOtT,QAAOlE,GAAW,OAANA,IAAYmE,SAAQ3B,IACrC+U,EAAI/U,IAAQgW,EAAaI,EAAE,IAG7BrB,EAAI9T,IAAY+U,EAAaI,G,GASzC7Z,GAAmD,GAA7BA,EAAmB+D,QACvC/D,EAAmB,GAAGyD,KAAOzD,EAAmB,GAAGyD,MAChD6W,EAActY,SAAShC,EAAmB,GAAGyD,OAChD6W,EAActW,KAAKhE,EAAmB,GAAGyD,KACrCzD,EAAmB,GAAG,WAAWua,IACnCva,EAAmB,GAAG,WAAWua,GAAGnV,SAAQqU,IAC1C,GAAIA,EAAaK,GAAGvR,WAAW,MAAQkR,EAAaK,GAAGlS,SAAS,OAAS6R,EAAaI,GAAI,CACxF,MAAMnV,EAAU+U,EAAaK,GAAG5Y,QAAQ,KAAM,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,MAAO,IACtFsX,EAAI9T,IAAY7F,OAAO4a,EAAaI,G,UAQ9Cnb,OAAO8F,KAAK+T,GAAepT,QAAO1B,GAAiE,WAA1D8U,EAAc9U,GAAKiH,gBAAgB0F,gBAAgB+B,KAAiBpO,OAAQ,CACvH,MAAM+W,EAAUT,EAAYlV,QAAOlE,GAAW,MAANA,IAAW8C,OAC7CgX,EAAUV,EAAYlV,QAAOlE,GAAW,MAANA,IAAW8C,OAC7CiX,EAAWF,EAAUC,GAAY,GAAK,IAAM,GAAKD,EAAUC,GACjEvC,EAAI,MAAQwC,EACZxC,EAAI,MAAQwC,C,CAEdC,QAAQC,IAAIxc,OAAO8F,KAAK+T,IACpB8B,EAAYlV,QAAOlE,GAAW,MAANA,IAAW8C,QAAU,IAC/CyU,EAAI,OAAS,IAEX6B,EAAYrY,SAAS,MAAQqY,EAAYrY,SAAS,OACpDwW,EAAI,QAAU,IAEhBC,EAAOrT,SAAQ3B,IACD,OAARA,GAAiB4W,EAAYrY,SAASyB,KACxC+U,EAAI/U,GAAO,E,GAGjB,CAEA,MAAM0X,EAAc1X,GACD,IAAb+U,EAAI/U,GACCA,KAAOzF,EAAA8U,uBAA0B9U,EAAA8U,uBAA+BrP,GAAO,WAEvE,GAIL2X,EAAcA,KAClB3b,EAAQyC,KAAK,aAAc3D,EAAM2K,KAAKtK,GAAG,EAGrCyc,EAAiBA,KACrB5b,EAAQyC,KAAK,yBAAyB,EAGxC,MAAO,CACLxC,cAEA8D,gBACA8U,cACAxE,qBACA+E,0BACA/C,cACA0C,MACAC,SACA0C,aAEAC,cACAC,iBAEJ,G,oKChPF,MAAA1d,EAAAC,EAAAC,EAAA,OACAyd,EAAA1d,EAAAC,EAAA,OACAI,EAAAJ,EAAA,MACAG,EAAAH,EAAA,MACAiL,EAAAjL,EAAA,MACAK,EAAAN,EAAAC,EAAA,MACAkL,EAAAlL,EAAA,MACA0d,EAAA3d,EAAAC,EAAA,OAEAO,EAAAA,YAAe,EAAAH,EAAAI,iBAAgB,CAC7BC,KAAM,eACNc,WAAY,CACVoc,UAAAF,EAAAhc,QACAmc,aAAAF,EAAAjc,SAEFf,MAAO,CACL2K,KAAM,CAAEzK,KAAMC,OAA2BC,UAAU,GACnDwK,iBAAkB,CAAE1K,KAAMC,QAC1B0K,eAAgB,CAAE3K,KAAMC,SAE1BwD,KAAM,CAAC,kBAAmB,sBAC1B1C,KAAAA,CAAMjB,EAAOkB,GACX,MAAM,YAAEC,IAAgB,EAAAxB,EAAAoB,WAClBoc,GAAa,EAAAzd,EAAAkC,MAAI,GACjBwb,GAAsB,EAAA1d,EAAA6B,UAAS,CAAC,GAChC8b,GAAwB,EAAA3d,EAAA6B,UAAS,CAAC,GAClC+b,GAAe,EAAA5d,EAAA6B,UAAS,IACxBgc,GAAW,EAAA7d,EAAAkC,KAAI,GACf4V,GAAsB,EAAA9X,EAAAkC,KAAI,IAC1B4b,GAAmB,EAAA9d,EAAAkC,MAAK,GAExBkK,GAAa,EAAApM,EAAAkC,KAAI,IACvB,EAAAlC,EAAA8E,OAAMxE,GAAOsI,gBACLmV,EAAezd,EAAM2K,KAAK,IAGlC,MAAM8S,EAAiBnV,gBACf,EAAAkC,EAAAmB,2BACN,IAAK,MAAMO,KAAUvB,EAAKsB,QACxB,GAAIC,EAAOnM,KAAM,CACf,MAAM8R,GAAkB,EAAArH,EAAAsH,oBAAmB5F,EAAOnM,MAClD,GAAI8R,EAAiB,CACnB,MAAM6L,GAAWlT,EAAAmT,2BAA2Bla,SAASoO,GAAiB3K,KAAOsD,EAAAoT,8BAA8Bna,SAASyI,EAAOnM,SAAWyK,EAAAqT,uBAAuBpa,SAASyI,EAAOnM,MACvKiM,EAAoB,GAC1B,IAAK,IAAIW,EAAI,EAAGA,GAAI,EAAAnC,EAAAsT,oBAAmB5R,EAAOnM,MAAO4M,IAAK,CACxD,MAAMpJ,EAAO,KAAOoJ,EAAI,EAAInM,OAAOmM,EAAI,GAAK,IAC5CX,EAAQvG,KAAKlC,GACTma,GACF1R,EAAQvG,KAAKlC,GAAiB,MAATA,EAAe,KAAO,K,CAG1Cma,GACH1R,EAAQvG,KAAK,KAEfuG,EAAQvG,KAAK,KACb2X,EAAoBlR,EAAOnM,MAAQiM,C,CAErCqR,EAAsBnR,EAAOnM,OAAQ,EAAAwK,EAAAoI,0BAAyBzG,EAAOnM,K,CAGzE,MAAMge,EAA4J,GAA7IpT,EAAK+B,SAAS9F,QAAO8F,IAAa/B,EAAKsB,QAAQrF,QAAOsF,GAAUA,EAAOnM,OAAM0C,KAAIyJ,GAAUA,EAAOnM,OAAM0D,SAASiJ,EAASR,UAAS1G,OACxJ,GAAIuY,EACF,GAAIpT,EAAK+B,SAASlH,OAAQ,CACxB,MAAMwG,EAAU5M,EAAA2B,QAAES,UAAUmJ,EAAK+B,UACjCV,EAAQnF,SAAQ6F,IACd,GAAwB,OAApBA,EAASG,OACXH,EAASG,OAAS,WACb,GAAIH,EAASG,OAAO7C,WAAW,KAAM,CAC1C,MAAMgU,EAAUX,EAAsB3Q,EAASR,QAC3C8R,GAAWA,EAAQxY,OAAS,IAAMwY,EAAQva,SAASiJ,EAASG,UAC9DH,EAASG,OAASmR,EAAQ,G,KAIhCV,EAAatO,OAAO,EAAGsO,EAAa9X,UAAWwG,GAC/CuR,EAASja,MAAQsG,KAAK6D,OAAO6P,EAAa7a,KAAIC,GAAKA,EAAErC,OAAQid,EAAa9X,M,MAE1E8X,EAAatO,OAAO,EAAGsO,EAAa9X,QACpC+X,EAASja,MAAQ,OAGnBga,EAAatO,OAAO,EAAGsO,EAAa9X,QACpC+X,EAASja,MAAQ,EACjB2a,IAEFzG,EAAoBlU,MAAQqH,EAAK6M,oBACjC1L,EAAWxI,OAAO,GAGpB,EAAA5D,EAAAgM,YAAU,KACR+R,EAAezd,EAAM2K,MACrB3K,EAAM2K,KAAKsB,QAAQpF,SAAQqF,IACzBgS,EAAoBhS,EAAOnM,KAAK,GAChC,IAGJ,MAAMoe,GAAiB,EAAAze,EAAAsC,WAAS,KAC9B,MAAMoc,EAAYd,EAAa1W,QAAO8F,GAAYA,EAASrM,IAAMmd,EAAiBla,QAClF,OAAO8a,EAAU5Y,OAAS,EAAI4Y,EAAU,QAAK7Z,CAAS,IAGlD8Z,EAAmBtZ,IACvB,IAAIQ,EACJ,MAAMrB,GAAS,EAAAsG,EAAAuC,oBAAmBhI,EAAKmH,QAUvC,OATIhI,IACEkZ,EAAoBrY,EAAKmH,QAAQzI,SAASsB,EAAK8H,QACjDtH,EAASrB,EAAOoa,KACPjB,EAAsBtY,EAAKmH,QAAQzI,SAASsB,EAAK8H,QAC1DtH,EAASrB,EAAOuP,MACQ,KAAf1O,EAAK8H,SACdtH,EAASrB,EAAO+I,OAGb1H,CAAM,EAGTgZ,EAAoBxZ,IACxB,IAAIQ,EACJ,IAAK,MAAMmH,KAAY4Q,EAAc,CACnC,GAAIvY,EAAK1E,IAAMqM,EAASrM,GACtB,MAEFkF,EAASmH,C,CAEX,OAAOnH,CAAM,EAGT2Y,EAAuBvY,IAAsB,EAAA6E,EAAAuC,oBAAmBpH,IAAY2Y,KAAKxL,UAAYrT,EAAAsT,cAC7FyL,EAAyB7Y,IAAsB,EAAA6E,EAAAuC,oBAAmBpH,IAAY8N,MAAMX,UAAYrT,EAAAsT,cAChG0L,EAAyB9Y,IAAsB,EAAA6E,EAAAuC,oBAAmBpH,IAAYsH,KAAK6F,UAAYrT,EAAAsT,cAC/F2L,EAAc/Y,IAClB,MAAMzB,GAAS,EAAAsG,EAAAsH,oBAAmBnM,GAClC,OAAOzB,EAAS,IAAOzE,EAAA8W,oBAA4BrS,EAAO6B,IAAM,EAAE,EAE9DuO,EAAgB3O,IACpB,MAAMzB,GAAS,EAAAsG,EAAAsH,oBAAmBnM,GAClC,OAAOzB,EAAS,IAAOzE,EAAA8U,uBAA+BrQ,EAAO6B,IAAM,EAAE,EAGjE4Y,EAAiB5Z,GACrBA,EAAK8H,OAAO7C,WAAW,KAAOjF,EAAK8H,OAAOlK,QAAQ,OAAQ,IAAMoC,EAAK8H,OAEjE+R,EAAuB7Z,GAC3ByY,EAAiBla,OAASyB,EAAK1E,GAAK,YAAc,GAE9C4d,EAAiBA,KACrB/c,EAAQyC,KAAK,kBAAmB2Z,EAAc9F,EAAoBlU,MAAM,EAGpEub,EAAuBA,KAC3BZ,GAAgB,EAGZa,EAAoBA,CAAC5S,EAAiB6S,KAC1C,IAAK3B,EAAoBlR,EAAOnM,QAAUsd,EAAsBnR,EAAOnM,MACrE,OAEF,IAAI8M,EAASkS,EACb,GAAI3B,EAAoBlR,EAAOnM,MAAM0D,SAASoJ,GAAS,CACrD,MAAMb,EAAUsR,EAAa1W,QAAOlE,GAAKA,EAAEwJ,QAAUA,EAAOnM,MAAQqd,EAAoBlR,EAAOnM,MAAM0D,SAASf,EAAEmK,UAC5Gb,EAAQxG,OAAS,IACnBqH,EAASb,EAAQA,EAAQxG,OAAS,GAAGqH,O,MAElC,GAAIA,EAAO7C,WAAW,KAAM,CACjC,MAAMgC,EAAUsR,EAAa1W,QAAOlE,GAAKA,EAAEwJ,QAAUA,EAAOnM,MAAQsd,EAAsBnR,EAAOnM,MAAM0D,SAASf,EAAEmK,UAClH,GAAIb,EAAQxG,OAAS,EACnBqH,EAASb,EAAQA,EAAQxG,OAAS,GAAGqH,WAChC,CACL,MAAMmR,EAAUX,EAAsBnR,EAAOnM,MACzCie,GAAWA,EAAQxY,OAAS,IAC9BqH,EAASmR,EAAQ,G,EAIvBV,EAAa7X,KAAK,CAChBpF,KAAMkd,EAASja,MACf4I,OAAQA,EAAOnM,KACf8M,OAAQA,IAEVoR,GAAgB,EAGZe,EAAyBja,IACzBoY,EAAW7Z,MACb2b,EAAkBla,GACTyY,EAAiBla,OAASyB,EAAK1E,GACxCmd,EAAiBla,OAAS,EACjB8Z,EAAoBrY,EAAKmH,QAAQzI,SAASsB,EAAK8H,SAE/C9H,EAAK8H,OAAO7C,WAAW,MAAQqT,EAAsBtY,EAAKmH,QAAQ1G,OAAS,EADpFgY,EAAiBla,MAAQyB,EAAK1E,GAI9Bmd,EAAiBla,OAAS,C,EAIxB4b,EAAyBna,IAC7B,GAAIA,EACF,IAAK,MAAMqZ,IAAa,CAAChB,EAAoBrY,EAAKmH,QAASmR,EAAsBtY,EAAKmH,SACpF,GAAIkS,GAAW5Y,OAAQ,CACrB,MAAMX,EAAQuZ,EAAUhX,QAAQrC,EAAK8H,QACrC,IAAc,GAAVhI,EAAa,CACfE,EAAK8H,OAAUhI,EAAQ,EAAKuZ,EAAU5Y,OAAS4Y,EAAUvZ,EAAQ,GAAKuZ,EAAU,GAChF,K,EAKRH,GAAgB,EAGZgB,EAAqBla,IACzBuY,EAAatO,OAAO,EAAGsO,EAAa9X,UAAW8X,EAAa1W,QAAOlE,GAAKA,GAAKqC,KAC7EkZ,GAAgB,EAGlB,MAAO,CACL9c,cACA4R,cAAAtT,EAAAsT,cACAoK,aAEArR,aACAoS,sBACAM,wBACAC,wBACAC,aACApK,eAEAxC,mBAAAtH,EAAAsH,mBAEAwL,eACA9F,sBACA+G,mBACAxR,mBAAAvC,EAAAuC,mBACAsR,kBACAM,gBACAR,iBACAS,sBAEAC,uBACAC,oBACAE,wBACAC,oBACAC,wBACAjB,iBAEAR,iBAEJ,G,kCChYF,MAAA/d,EAAAJ,EAAA,MAEM6f,EAAa,CTDZC,MAAM,YSEPC,EAAa,CTHnBna,IAAA,EAEwCka,MAAM,YSKxCE,EAAa,CTFLF,MAAM,cAAcG,MAAA,eSM5BC,EAAa,CTLFJ,MAAM,WSMjBK,EAAa,CTZnBva,IAAA,EAQuCka,MAAM,6BSQvCM,EAAa,CThBnBxa,IAAA,EAS6Bka,MAAM,6BSW7BO,EAAa,CTRFP,MAAM,gBSSjBQ,ETrBN,cSsBMC,EAAa,CTPAT,MAAM,WSQnBU,EAAc,CTvBpB5a,IAAA,EAiBiBka,MAAM,iBSUjBW,ET3BN,US4BMC,ET5BN,SS6BMC,EAAc,CT7BpB/a,IAAA,EA0BwBka,MAAM,WAAWG,MAAA,kBSQnCW,EAAc,CTlCpBhb,IAAA,GSmCMib,EAAc,CTnCpBjb,IAAA,GSoCMkb,EAAc,CTMNb,MAAA,eSLRc,EAAc,CTMDjB,MAAM,oBSLnBkB,EAAc,CTSIlB,MAAM,SSRxBmB,ETvCN,wBSwCMC,ETxCN,qBSyCMC,EAAc,CTcIrB,MAAM,SSbxBsB,ET1CN,+BS2CMC,EAAc,CT3CpBzb,IAAA,GS4CM0b,EAAc,CT8BNxB,MAAM,cAAcG,MAAA,eS1B5BsB,EAAc,CThDpB3b,IAAA,EA2E8Bka,MAAM,SSvB9B0B,EAAc,CTwBH1B,MAAM,WSvBjB2B,EAAc,CTrDpB7b,IAAA,EA8EwBhF,KAAK,USrBvB8gB,EAAc,CTzDpB9b,IAAA,EA+EwCka,MAAM,4BAA4BG,MAAA,kBSjBpE0B,EAAc,CT9DpB/b,IAAA,EAiF+Bka,MAAM,6BSf/B8B,EAAc,CTmBH9B,MAAM,gBSlBjB+B,ETnEN,cSoEMC,EAAc,CTmBDhC,MAAM,WSlBnBiC,EAAc,CToBHjC,MAAM,WAAWG,MAAA,kBShB5B+B,EAAc,CT0BN/B,MAAA,eSzBRgC,EAAc,CT0BDnC,MAAM,oBSxBzB,SAAgBoC,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,MAAMC,GAA+B,EAAAriB,EAAAsiB,kBAAkB,qBAEvD,OAAQ,EAAAtiB,EAAAuiB,cT9ER,EAAAviB,EAAAwiB,oBAqHM,MArHN/C,EAqHM,CApHoB,YAAXsC,EAAAlhB,US+ER,EAAAb,EAAAuiB,cT/EL,EAAAviB,EAAAwiB,oBAoEQ,QApER7C,EAoEQ,EAnEN,EAAA3f,EAAAyiB,oBAkEQ,eAjEN,EAAAziB,EAAAyiB,oBAgEK,YA/DH,EAAAziB,EAAAyiB,oBAoCK,KApCL7C,EAoCK,EAnCH,EAAA5f,EAAAyiB,oBAKM,MALN3C,EAKM,EAJJ,EAAA9f,EAAAyiB,oBAGS,UAHDjiB,KAAK,SAAUkiB,QAAKV,EAAA,KAAAA,EAAA,GAAAW,GAAEZ,EAAA9f,WAAa8f,EAAA9f,YSkFpC,CTjFO8f,EAAA9f,YSmFH,EAAAjC,EAAAuiB,cTnFT,EAAAviB,EAAAwiB,oBAA0E,OAA1EzC,EAAyD,iBSoFhD,EAAA/f,EAAAuiB,cTnFT,EAAAviB,EAAAwiB,oBAA4D,OAA5DxC,EAA+C,gBAGnD,EAAAhgB,EAAAyiB,oBAIM,MAJNxC,EAIM,EAHJ,EAAAjgB,EAAAyiB,oBACiC,OAD5B/C,MAAM,gBAAiB7E,IAAKkH,EAAA1f,eAAiBugB,IAAKb,EAAAtgB,YAAYsgB,EAAAngB,eAAevB,MAC/EqiB,QAAKV,EAAA,KAAAA,EAAA,GAAAW,GAAEZ,EAAA3d,wBSuFH,KAAM,ETrG3B8b,IAec,EAAAlgB,EAAAyiB,oBAAiE,MAAjEtC,GAAiE,EAAAngB,EAAA6iB,iBAAzCd,EAAAtgB,YAAYsgB,EAAAngB,eAAevB,OAAI,KAExB0hB,EAAA9f,YSwFxB,EAAAjC,EAAAuiB,cTxFT,EAAAviB,EAAAwiB,oBAQM,MARNpC,EAQM,ESiFI,EAAApgB,EAAA8iB,iBTxFR,EAAA9iB,EAAAyiB,oBAIS,UAtBvB,sBAAAT,EAAA,KAAAA,EAAA,GAAAW,GAkB+BZ,EAAAngB,eAAemhB,SAAQJ,GAAG3e,SAAMge,EAAA,KAAAA,EAAA,GS4F/D,IAAIgB,IT5F6DjB,EAAA/d,UAAA+d,EAAA/d,YAAAgf,KS6FxC,GACA,EAAAhjB,EAAAuiB,YAAW,IT7FpB,EAAAviB,EAAAwiB,oBAESxiB,EAAAijB,SAAA,MArBzB,EAAAjjB,EAAAkjB,YAmByCnB,EAAAze,iBAAV6f,KS8FG,EAAAnjB,EAAAuiB,cT9FlB,EAAAviB,EAAAwiB,oBAES,UAFkChd,IAAK2d,EAASvf,MAAOuf,ISiGnD,EAAAnjB,EAAA6iB,iBThGRd,EAAAtgB,YAAY0hB,IAAM,EApBvC9C,MSqH4B,OACH,KAAM,CACP,CAACrgB,EAAAojB,aTrGMrB,EAAAngB,eAAemhB,aSuGxB,EAAA/iB,EAAA8iB,iBTlGR,EAAA9iB,EAAAyiB,oBAC6B,SADtBjiB,KAAK,SAvB1B,sBAAAwhB,EAAA,KAAAA,EAAA,GAAAW,GAuB4CZ,EAAAngB,eAAeyhB,cAAaV,GAAGW,KAAMvB,EAAAte,SAASse,EAAAngB,eAAemhB,UACzF7U,IAAI,IAAKlK,SAAMge,EAAA,KAAAA,EAAA,GSwG/B,IAAIgB,ITxG6BjB,EAAA/d,UAAA+d,EAAA/d,YAAAgf,KSyGR,KAAM,GTjI/B1C,GAAA,CSkIwB,CAACtgB,EAAAujB,WT3GmBxB,EAAAngB,eAAeyhB,sBS8GtC,EAAArjB,EAAAuiB,cT3GT,EAAAviB,EAAAwiB,oBAKM,MALNjC,GAKM,EAAAvgB,EAAA6iB,iBAJDd,EAAAtgB,YAAYsgB,EAAAngB,eAAemhB,UAAU9f,QAAQ,KAAM,IAAM,IAAuB8e,EAAArgB,iBAAiBqgB,EAAAngB,eAAemhB,SAA6BhB,EAAAngB,eAAeyhB,gBAAa,IAKnKtB,EAAA9f,YSyGF,EAAAjC,EAAAuiB,cTzGT,EAAAviB,EAAAwiB,oBAKM,MArClBhC,EAAA,ES0IsB,EAAAxgB,EAAA8iB,iBTzGR,EAAA9iB,EAAAyiB,oBAGS,UAHD/C,MAAM,OAjC5B,sBAAAsC,EAAA,KAAAA,EAAA,GAAAW,GAiC4CZ,EAAAngB,eAAeuC,OAAMwe,GAAG3e,SAAMge,EAAA,KAAAA,EAAA,GS8G1E,IAAIgB,IT9GwEjB,EAAA7d,cAAA6d,EAAA7d,gBAAA8e,KS+GnDhB,EAAO,MAAQA,EAAO,IAAM,ET9GrC,EAAAhiB,EAAAyiB,oBAA+B,UAAvB7e,MAAM,KAAI,QAAI,IACtB,EAAA5D,EAAAyiB,oBAA+B,UAAvB7e,MAAM,KAAI,QAAI,KSgHZ,KAAM,CACR,CAAC5D,EAAAojB,aTnHmBrB,EAAAngB,eAAeuC,eSsHtC,EAAAnE,EAAAuiB,cTjHT,EAAAviB,EAAAwiB,oBAEM,MAxClB/B,EAAA,GSwJuB,EAAAzgB,EAAAuiB,YAAW,ITjHpB,EAAAviB,EAAAwiB,oBAAuGxiB,EAAAijB,SAAA,MAvCrH,EAAAjjB,EAAAkjB,YAAA,IAuCoDvgB,MAAMof,EAAAngB,eAAeuC,SAAlCqf,KSkHP,EAAAxjB,EAAAuiB,cTlHlB,EAAAviB,EAAAwiB,oBAAuG,OAAlG9C,MAAM,OAAyD7E,IAAI,kBAAmBrV,IAAKge,OSuHpF,YTpHhB,EAAAxjB,EAAAyiB,oBAyBK,KAzBL/B,EAyBK,EAxBH,EAAA1gB,EAAAyiB,oBAuBQ,QAvBR9B,EAuBQ,EAtBN,EAAA3gB,EAAAyiB,oBAqBQ,gBSmGD,EAAAziB,EAAAuiB,YAAW,ITvHhB,EAAAviB,EAAAwiB,oBAmBKxiB,EAAAijB,SAAA,MAhErB,EAAAjjB,EAAAkjB,YA6C+CnB,EAAAngB,eAAekC,UA7C9D,CA6C4B2f,EAASte,MSwHP,EAAAnF,EAAAuiB,cTxHd,EAAAviB,EAAAwiB,oBAmBK,MAnBoDhd,IAAKL,GAAK,CACjD4c,EAAA9f,YSyHL,EAAAjC,EAAAuiB,cTzHX,EAAAviB,EAAAwiB,oBAaWxiB,EAAAijB,SAAA,CA3D7Bzd,IAAA,KA+CoB,EAAAxF,EAAAyiB,oBAOK,KAPL7B,EAOK,ESmHO,EAAA5gB,EAAA8iB,iBTzHV,EAAA9iB,EAAAyiB,oBAKS,UArD/B,sBAAAE,GAgDuCc,EAAQpjB,KAAIsiB,EAAG3e,SAAMge,EAAA,KAAAA,EAAA,GS6H5D,IAAIgB,IT7H0DjB,EAAA/d,UAAA+d,EAAA/d,YAAAgf,KS8H3B,GACA,EAAAhjB,EAAAuiB,YAAW,IT9HtB,EAAAviB,EAAAwiB,oBAGSxiB,EAAAijB,SAAA,MApDjC,EAAAjjB,EAAAkjB,YAiDiDnB,EAAAxe,gBAAV4f,KS+HK,EAAAnjB,EAAAuiB,cT/HpB,EAAAviB,EAAAwiB,oBAGS,UAHiChd,IAAK2d,EAASvf,MAAOuf,EAC5DO,SAAU3B,EAAApe,sBAAsBwf,EAAQM,EAAQpjB,QSkIpC,EAAAL,EAAA6iB,iBTjIVd,EAAAtgB,YAAY0hB,IAAM,EAnD/CrC,MSqLsC,OACH,GTtLnCD,GAAA,CSuLkC,CAAC7gB,EAAAojB,aTvIIK,EAAQpjB,WAO3B,EAAAL,EAAAyiB,oBAGK,KAHL1B,EAGK,ESiIO,EAAA/gB,EAAA8iB,iBTnIV,EAAA9iB,EAAAyiB,oBACqB,SADdjiB,KAAK,SAxDlC,sBAAAmiB,GAwDoDc,EAAQ7f,MAAK+e,EAAGW,KAAMvB,EAAAte,SAASggB,EAAQpjB,MAAO6N,IAAI,IAC7ElK,SAAMge,EAAA,KAAAA,EAAA,GSyI/B,IAAIgB,ITzI6BjB,EAAA/d,UAAA+d,EAAA/d,YAAAgf,KS0IE,KAAM,GTnMzChC,GAAA,CSoMkC,CAAChhB,EAAAujB,WT5IiBE,EAAQ7f,YS+I7B,OACF,EAAA5D,EAAAuiB,cT5IX,EAAAviB,EAAAwiB,oBAGK,KA/DvBvB,GAAA,EAAAjhB,EAAA6iB,iBA6DuBd,EAAAtgB,YAAYgiB,EAAQpjB,MAAM4C,QAAQ,KAAM,IAAM,IAAM8e,EAAArgB,iBAAiB+hB,EAAQpjB,KAAMojB,EAAQ7f,QAAK,SS6I/F,qBAOf,EAAA5D,EAAAuiB,cT1IL,EAAAviB,EAAAwiB,oBA0CQ,SAjHZhd,IAAA,EAuEkBka,MAAM,WAAYgD,QAAKV,EAAA,MAAAA,EAAA,IAAAW,GAAEZ,EAAA1d,kBS8IhC,ET7IL,EAAArE,EAAAyiB,oBAwCQ,eAvCN,EAAAziB,EAAAyiB,oBAsCK,YArCH,EAAAziB,EAAAyiB,oBAwBK,KAxBLvB,EAwBK,CAvBQa,EAAA7gB,QS+IF,EAAAlB,EAAAuiB,cT/IT,EAAAviB,EAAAwiB,oBAAwE,MAAxErB,GAAwE,EAAAnhB,EAAA6iB,iBAApC3Y,KAAKE,MAAc,GAAR2X,EAAA7gB,OAAc,IAAT,KA3EhE,EAAAlB,EAAA2jB,oBAAA,QA4EY,EAAA3jB,EAAAyiB,oBAQM,MARNrB,EAQM,CAPuB,cAAXW,EAAAlhB,USiJP,EAAAb,EAAAuiB,cThJP,EAAAviB,EAAAwiB,oBAIS,SAJTnB,EAIS,CAHKU,EAAA9gB,WSiJD,EAAAjB,EAAAuiB,cTjJX,EAAAviB,EAAAwiB,oBACO,OADPlB,EAA8E,yBSkJnE,EAAAthB,EAAAuiB,cThJX,EAAAviB,EAAAwiB,oBAA+E,OAA/EjB,EAA+C,kCAjFjE,EAAAvhB,EAAA2jB,oBAAA,UAqFY,EAAA3jB,EAAAyiB,oBAGM,MAHNjB,EAGM,EAFJ,EAAAxhB,EAAAyiB,oBAAyF,OAApF/C,MAAM,gBAAiB7E,IAAKkH,EAAA1f,eAAiBugB,IAAKb,EAAAtgB,YAAYsgB,EAAAngB,eAAevB,OSoJ3E,KAAM,ET1O3BohB,IAuFc,EAAAzhB,EAAAyiB,oBAAiE,MAAjEf,GAAiE,EAAA1hB,EAAA6iB,iBAAzCd,EAAAtgB,YAAYsgB,EAAAngB,eAAevB,OAAI,MAEzD,EAAAL,EAAAyiB,oBAKM,MALNd,GAKM,EAAA3hB,EAAA6iB,iBAJDd,EAAAtgB,YAAYsgB,EAAAngB,eAAemhB,UAAU9f,QAAQ,KAAM,IAAM,IAAuB8e,EAAArgB,iBAAiBqgB,EAAAngB,eAAemhB,SAA6BhB,EAAAngB,eAAeyhB,gBAAa,IAK9K,EAAArjB,EAAAyiB,oBAEM,cSgJC,EAAAziB,EAAAuiB,YAAW,ITjJhB,EAAAviB,EAAAwiB,oBAAuGxiB,EAAAijB,SAAA,MAhGrH,EAAAjjB,EAAAkjB,YAAA,IAgGoDvgB,MAAMof,EAAAngB,eAAeuC,SAAlCqf,KSkJX,EAAAxjB,EAAAuiB,cTlJd,EAAAviB,EAAAwiB,oBAAuG,OAAlG9C,MAAM,OAAyD7E,IAAI,kBAAmBrV,IAAKge,OSuJxF,WTpJZ,EAAAxjB,EAAAyiB,oBAWK,KAXLb,EAWK,EAVH,EAAA5hB,EAAAyiB,oBASQ,QATRZ,EASQ,EARN,EAAA7hB,EAAAyiB,oBAOQ,gBSiJD,EAAAziB,EAAAuiB,YAAW,ITvJhB,EAAAviB,EAAAwiB,oBAKKxiB,EAAAijB,SAAA,MA3GrB,EAAAjjB,EAAAkjB,YAsG+CnB,EAAAngB,eAAekC,UAtG9D,CAsG4B2f,EAASte,MSwJP,EAAAnF,EAAAuiB,cTxJd,EAAAviB,EAAAwiB,oBAKK,MALoDhd,IAAKL,GAAK,EACjE,EAAAnF,EAAAyiB,oBAGK,aAAAziB,EAAA6iB,iBAFAd,EAAAtgB,YAAYgiB,EAAQpjB,MAAM4C,QAAQ,KAAM,IAAM,IAAM8e,EAAArgB,iBAAiB+hB,EAAQpjB,KAAMojB,EAAQ7f,QAAK,QSyJ/F,oBAOpB,EAAA5D,EAAA8iB,iBTtJA,EAAA9iB,EAAAyiB,oBAGM,aAFJ,EAAAziB,EAAA4jB,aACkHvB,EAAA,CAD9Fnd,SAAS,EAAOC,MAAO,EAAI,eAAc4c,EAAAxhB,SAASiC,QACnE,uBAAsBuf,EAAAhgB,mBAAqBU,OAAQsf,EAAAxhB,SAASkC,OAAS,uBAAqBsf,EAAAzd,mBS4J1F,KAAM,EAAG,CAAC,eAAgB,uBAAwB,SAAU,0BAC9D,KAAM,CACP,CAACtE,EAAA6jB,MThKU9B,EAAA3f,eSmKjB,CAzMAjC,EAAAA,EAAA2hB,C,kCC5EA,MAAA9hB,EAAAJ,EAAA,MAEM6f,EAAa,CTFnBja,IAAA,GSGMma,EAAa,CTELD,MAAM,SSDdE,EAAa,CTILF,MAAM,eSHdI,EAAa,CTQXJ,MAAM,eSPRK,ETNN,wBSOMC,EAAa,CTUNN,MAAM,WSRnB,SAAgBoC,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OTTWL,EAAA7c,USUN,EAAAlF,EAAAuiB,cTVL,EAAAviB,EAAAwiB,oBAmBM,MApBR/C,EAAA,EAEI,EAAAzf,EAAAyiB,oBASQ,gBSED,EAAAziB,EAAAuiB,YAAW,ITVhB,EAAAviB,EAAAwiB,oBAOWxiB,EAAAijB,SAAA,MAVjB,EAAAjjB,EAAAkjB,YAG+BnB,EAAAnc,oBAARP,KSWH,EAAArF,EAAAuiB,cTdpB,EAAAviB,EAAAwiB,oBAAAxiB,EAAAijB,SAAA,CAAAzd,IAGyDH,GAAI,EACrD,EAAArF,EAAAyiB,oBAEK,YADH,EAAAziB,EAAAyiB,oBAAkD,KAAlD9C,GAAkD,EAAA3f,EAAA6iB,iBAA7Bd,EAAAtgB,YAAY4D,EAAKG,MAAG,MAE3C,EAAAxF,EAAAyiB,oBAEK,YADH,EAAAziB,EAAAyiB,oBAA6C,KAA7C7C,GAA6C,EAAA5f,EAAA6iB,iBAAlBxd,EAAKzB,OAAK,MSahC,OACD,STTV,EAAA5D,EAAAyiB,oBAMK,KANL3C,EAMK,GSME,EAAA9f,EAAAuiB,YAAW,ITXhB,EAAAviB,EAAAwiB,oBAIKxiB,EAAAijB,SAAA,MAlBX,EAAAjjB,EAAAkjB,YAc8CnB,EAAArc,cAARL,KSYlB,EAAArF,EAAAuiB,cTZd,EAAAviB,EAAAwiB,oBAIK,MAJD9C,MAAM,eAA6Cla,IAAKH,EAAKG,KSexD,ETdP,EAAAxF,EAAAyiB,oBACoE,OAD9D/C,OAfd,EAAA1f,EAAA8jB,gBAAA,eAesC/B,EAAA3c,aAAaC,GAAQ0c,EAAAxc,cAAcF,IAAQwV,IAAKkH,EAAAxf,mBAAmB8C,EAAKG,IAAKuc,EAAAtf,QACxGmgB,IAAKvd,EAAKG,IAAMkd,QAAKC,GAAEZ,EAAAgC,MAAM,sBAAuB1e,EAAKG,MSmBnD,KAAM,GTnCvBua,IAiBQ,EAAA/f,EAAAyiB,oBAAsD,MAAtDzC,GAAsD,EAAAhgB,EAAA6iB,iBAA9Bd,EAAAtgB,YAAY4D,EAAKG,MAAG,QSqBtC,YTtCd,EAAAxF,EAAA2jB,oBAAA,MS0CA,CAjCAxjB,EAAAA,EAAA2hB,C,iCCTA,MAAA9hB,EAAAJ,EAAA,MAEM6f,EAAa,CTFnBja,IAAA,GSGMma,EAAa,CTDXD,MAAM,eSERE,ETJN,mCSKME,ETLN,cSMMC,EAAa,CTSXL,MAAM,eSRRM,ETPN,mCSQMC,ETRN,cSSMC,EAAa,CTmBXR,MAAM,eSlBRS,ETVN,wBSWMC,EAAc,CTyBPV,MAAM,WSxBbW,ETZN,cScA,SAAgByB,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OTdWL,EAAA7c,USeN,EAAAlF,EAAAuiB,cTfL,EAAAviB,EAAAwiB,oBA0CM,MA3CR/C,EAAA,EAEI,EAAAzf,EAAAyiB,oBAYK,KAZL9C,EAYK,GSIE,EAAA3f,EAAAuiB,YAAW,ITfhB,EAAAviB,EAAAwiB,oBAUKxiB,EAAAijB,SAAA,MAbX,EAAAjjB,EAAAkjB,YAGyBnB,EAAAzb,aAARjB,KSgBG,EAAArF,EAAAuiB,cThBd,EAAAviB,EAAAwiB,oBAUK,MAV4Bhd,IAAKH,GAAI,EACxC,EAAArF,EAAAyiB,oBAQQ,eSSA,EAAAziB,EAAA8iB,iBThBN,EAAA9iB,EAAAyiB,oBAKE,SAJA/C,MAAM,SACNlf,KAAK,WAPjB,sBAAAmiB,GAQqBZ,EAAArb,iBAAiBrB,GAAIsd,EAC7B3e,SAAM2e,GAAEZ,EAAA/a,kBAAkB3B,EAAM0c,EAAArb,mBSiB1B,KAAM,GT1BzBkZ,GAAA,CS2BkB,CAAC5f,EAAAgkB,eTnBEjC,EAAArb,iBAAiBrB,OAG5B,EAAArF,EAAAyiB,oBAA0D,OAArD/C,MAAM,SAAU7E,IAAKkH,EAAAvb,WAAWnB,GAAQud,IAAKvd,GSsBzC,KAAM,ETjCzBya,USoCc,STrBV,EAAA9f,EAAAyiB,oBAYK,KAZL1C,EAYK,GSYE,EAAA/f,EAAAuiB,YAAW,ITvBhB,EAAAviB,EAAAwiB,oBAUKxiB,EAAAijB,SAAA,MA1BX,EAAAjjB,EAAAkjB,YAgByBnB,EAAApb,YAARtB,KSwBG,EAAArF,EAAAuiB,cTxBd,EAAAviB,EAAAwiB,oBAUK,MAV2Bhd,IAAKH,GAAI,EACvC,EAAArF,EAAAyiB,oBAQQ,eSiBA,EAAAziB,EAAA8iB,iBTxBN,EAAA9iB,EAAAyiB,oBAKE,SAJA/C,MAAM,SACNlf,KAAK,WApBjB,sBAAAmiB,GAqBqBZ,EAAAhb,gBAAgB1B,GAAIsd,EAC5B3e,SAAM2e,GAAEZ,EAAA/a,kBAAkB3B,EAAM0c,EAAAhb,kBSyB1B,KAAM,GT/CzBiZ,GAAA,CSgDkB,CAAChgB,EAAAgkB,eT3BEjC,EAAAhb,gBAAgB1B,OAG3B,EAAArF,EAAAyiB,oBAAyD,OAApD/C,MAAM,SAAU7E,IAAKkH,EAAAlb,UAAUxB,GAAQud,IAAKvd,GS8BxC,KAAM,ETtDzB4a,USyDc,ST7BV,EAAAjgB,EAAAyiB,oBAcK,KAdLvC,EAcK,GSkBE,EAAAlgB,EAAAuiB,YAAW,IT/BhB,EAAAviB,EAAAwiB,oBAYKxiB,EAAAijB,SAAA,MAzCX,EAAAjjB,EAAAkjB,YA6B8CnB,EAAArc,cAARL,KSgClB,EAAArF,EAAAuiB,cThCd,EAAAviB,EAAAwiB,oBAYK,MAZD9C,MAAM,eAA6Cla,IAAKH,EAAKG,KSmCxD,ETlCP,EAAAxF,EAAAyiB,oBAKE,OAJC/C,OA/BX,EAAA1f,EAAA8jB,gBAAA,YA+BgC/B,EAAA3c,aAAaC,GAAQ0c,EAAAxc,cAAcF,IACxDwV,IAAKxV,EAAK+N,SACVwP,IAAKvd,EAAKG,IACVkd,QAAKC,GAAEZ,EAAApa,iBAAiBtC,EAAKG,MSoCvB,KAAM,GTtEvB2a,IAoCQ,EAAAngB,EAAAyiB,oBAAsD,MAAtDrC,GAAsD,EAAApgB,EAAA6iB,iBAA9Bd,EAAAtgB,YAAY4D,EAAKG,MAAG,IAC5C,EAAAxF,EAAAyiB,oBAA4D,OAAvD/C,MAAM,SAAU7E,IAAKkH,EAAA5b,UAAUd,GAAQud,IAAKvd,EAAKgB,ISuC7C,KAAM,ET5EvBga,IS6Ec,EAAArgB,EAAA8iB,iBTvCN,EAAA9iB,EAAAyiB,oBAEM,OAFD/C,MAAM,qBAAkB,EAAA1f,EAAA6iB,iBACxBd,EAAAta,gBAAgBpC,EAAKG,MAAG,MSuCrB,CAACxF,EAAA6jB,MTxC6B9B,EAAAta,gBAAgBpC,EAAKG,aS2CrD,YTjFd,EAAAxF,EAAA2jB,oBAAA,MSqFA,CAvEAxjB,EAAAA,EAAA2hB,C,kCCdA,MAAA9hB,EAAAJ,EAAA,MAEM6f,EAAa,CRDVC,MAAM,iBQETC,EAAa,CRIJD,MAAM,iBQHfE,EAAa,CRQUF,MAAM,gBQP7BI,ERLN,cQMMC,EAAa,CRSeL,MAAM,WQRlCM,EAAa,CRaKiE,QAAQ,KQZ1BhE,ERRN,wBQSMC,EAAa,CRiBK+D,QAAQ,KQhB1B9D,ERVN,wBQWMC,ERXN,UQYMC,EAAc,CRyBI4D,QAAQ,KQxB1B3D,ERbN,cQcMC,ERdN,wBQeMC,ERfN,UQgBMC,EAAc,CRiCAf,MAAM,cQhCpBgB,EAAc,CRiCIuD,QAAQ,KQhC1BtD,EAAc,CRsCIsD,QAAQ,KQrC1BrD,ERnBN,wBQoBMC,EAAc,CRyCAnB,MAAM,aQxCpBoB,EAAc,CRyCImD,QAAQ,KQxC1BlD,EAAc,CRyCIkD,QAAQ,KQxC1BjD,ERvBN,wBQwBMC,EAAc,CRoDIvB,MAAM,gBQnDxBwB,ERzBN,cQ0BMC,ER1BN,cQ2BMC,EAAc,CRsDU1B,MAAM,WQrD9B2B,ER5BN,wBQ6BMC,EAAc,CR8DI2C,QAAQ,KQ7D1B1C,EAAc,CR9BpB/b,IAAA,EAgGoBka,MAAM,aQ9DpB8B,EAAc,CR+DIyC,QAAQ,KQ9D1BxC,EAAc,CR+DIwC,QAAQ,KQ9D1BvC,EAAc,CRiEIuC,QAAQ,IAAIvE,MAAM,gBQ7DpCiC,ERxCN,cQyCMC,ERzCN,cQ0CMC,EAAc,CRgEUnC,MAAM,WQ/D9BwE,ER3CN,wBQ4CMC,EAAc,CRuEIF,QAAQ,KQtE1BG,ER7CN,wBQ8CMC,EAAc,CR4EIJ,QAAQ,KQ3E1BK,ER/CN,wBQgDMC,EAAc,CRiFc7E,MAAM,WQhFlC8E,EAAc,CR2FD9E,MAAM,qBQ1FnB+E,ERlDN,wBQmDMC,ERnDN,wBQoDMC,EAAc,CR+GPjF,MAAM,gBQ9GbkF,EAAc,CRiHElF,MAAM,aQhHtBmF,EAAc,CRtDpBrf,IAAA,GQuDMsf,EAAc,CRqHPpF,MAAM,gBQpHbqF,EAAc,CRwHOrF,MAAM,gBAAgBsF,IAAI,qBQpH/CC,EAAc,CRwHsBpF,MAAA,uBQvHpCqF,GAAc,CRwHKrF,MAAA,yBQvHnBsF,GAAc,CRgIKtF,MAAA,yBQ9HzB,SAAgBiC,GAAOC,EAAUC,EAAYC,EAAYC,GAAYC,GAAWC,IAC9E,OAAQ,EAAApiB,EAAAuiB,cRhEN,EAAAviB,EAAAwiB,oBAoRM,MApRN/C,EAoRM,EAnRF,EAAAzf,EAAAyiB,oBAIM,aAHF,EAAAziB,EAAAyiB,oBAEQ,eALpB,EAAAziB,EAAAolB,kBAAA,EAAAplB,EAAA6iB,iBAGsBd,EAAAtgB,YAAY,kBAAmB,IACrC,IQiER,EAAAzB,EAAA8iB,iBRjEQ,EAAA9iB,EAAAyiB,oBAAyF,SAAlFjiB,KAAK,SAJ5B,sBAAAwhB,EAAA,KAAAA,EAAA,GAAAW,GAI8CZ,EAAArW,eAAciX,GAAEzU,IAAI,KAAKH,IAAI,MAAO/J,SAAMge,EAAA,KAAAA,EAAA,GQwExF,IAAIgB,IRxEsFjB,EAAA9M,eAAA8M,EAAA9M,iBAAA+N,KQyE/E,KAAM,KAAM,CACb,CAAChjB,EAAAujB,WR1EmCxB,EAAArW,uBAGtC,EAAA1L,EAAAyiB,oBA+HQ,QA/HR9C,EA+HQ,EA9HJ,EAAA3f,EAAAyiB,oBA6HQ,eA5HJ,EAAAziB,EAAAyiB,oBASK,WQmEXT,EAAO,KAAOA,EAAO,IR3EX,EAAAhiB,EAAAyiB,oBAAqB,MAAjBwB,QAAQ,KAAG,YQ4ExB,EAAAjkB,EAAAuiB,YAAW,IR3EF,EAAAviB,EAAAwiB,oBAMKxiB,EAAAijB,SAAA,MAjBzB,EAAAjjB,EAAAkjB,YAWmDnB,EAAA3W,iBAXnD,CAWgC3E,EAAStB,MQ4ErB,EAAAnF,EAAAuiB,cR5EA,EAAAviB,EAAAwiB,oBAMK,MAN4Chd,IAAKL,EAAQua,OAXlF,EAAA1f,EAAA8jB,gBAWyF/B,EAAAnN,aAAazP,KQ+EvF,ER9ES,EAAAnF,EAAAyiB,oBAIM,MAJN7C,EAIM,EAHF,EAAA5f,EAAAyiB,oBACsB,OADhB5H,IAAKkH,EAAA5O,gBAAgB1M,EAAQR,WAAa2c,IAAKb,EAAAtgB,YAAYgF,EAAQR,WACrEyZ,MAAM,aQkFnB,KAAM,ERhGzBI,IAe4B,EAAA9f,EAAAyiB,oBAAiE,OAAjE1C,GAAiE,EAAA/f,EAAA6iB,iBAAxCd,EAAAtgB,YAAYgF,EAAQR,YAAS,MQoFnE,MACD,SRjFE,EAAAjG,EAAAyiB,oBAKK,YAJD,EAAAziB,EAAAyiB,oBAA8C,KAA9CzC,GAA8C,EAAAhgB,EAAA6iB,iBAA3Bd,EAAAtgB,YAAY,SAAD,KQoFvC,EAAAzB,EAAAuiB,YAAW,IRnFF,EAAAviB,EAAAwiB,oBAEKxiB,EAAAijB,SAAA,MAvBzB,EAAAjjB,EAAAkjB,YAqBmDnB,EAAA3W,iBArBnD,CAqBgC3E,EAAStB,MQoFrB,EAAAnF,EAAAuiB,cRpFA,EAAAviB,EAAAwiB,oBAEK,MAF4Chd,IAAKL,EAAQua,OArBlF,EAAA1f,EAAA8jB,gBAqByF/B,EAAAnN,aAAazP,KQuFvF,EACD,EAAAnF,EAAA8iB,iBRvFU,EAAA9iB,EAAAyiB,oBAAkD,SAA3CjiB,KAAK,SAtBpC,sBAAAmiB,GAsBsDlc,EAAQyI,WAAUyT,GQ0FvD,KAAM,ERhHvB1C,GAAA,CQiHgB,CAACjgB,EAAAujB,WR3FqC9c,EAAQyI,eQ6F/C,MACD,SR3FE,EAAAlP,EAAAyiB,oBAUK,YATD,EAAAziB,EAAAyiB,oBAA8C,KAA9CvC,GAA8C,EAAAlgB,EAAA6iB,iBAA3Bd,EAAAtgB,YAAY,SAAD,KQ8FvC,EAAAzB,EAAAuiB,YAAW,IR7FF,EAAAviB,EAAAwiB,oBAOKxiB,EAAAijB,SAAA,MAlCzB,EAAAjjB,EAAAkjB,YA2BmDnB,EAAA3W,iBA3BnD,CA2BgC3E,EAAStB,MQ8FrB,EAAAnF,EAAAuiB,cR9FA,EAAAviB,EAAAwiB,oBAOK,MAP4Chd,IAAKL,EAAQua,OA3BlF,EAAA1f,EAAA8jB,gBA2ByF/B,EAAAnN,aAAazP,KQiGvF,EACD,EAAAnF,EAAA8iB,iBRjGU,EAAA9iB,EAAAyiB,oBAKS,UAjCjC,sBAAAE,GA4ByClc,EAAQgH,cAAakV,EAAG3e,SAAMge,EAAA,KAAAA,EAAA,GQqGvE,IAAIgB,IRrGqEjB,EAAA9M,eAAA8M,EAAA9M,iBAAA+N,KQsGxD,GACA,EAAAhjB,EAAAuiB,cRtGW,EAAAviB,EAAAwiB,oBAGSxiB,EAAAijB,SAAA,MAhCrC,EAAAjjB,EAAAkjB,YA6B4D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAApCzV,IAAf,EAAAzN,EAAAyiB,oBAGS,UAH+Cjd,IAAKiI,EACxD7J,MAAO6J,IQyGnB,EAAAzN,EAAA6iB,iBAAiB,IRxGGpV,GAAa,EA/BtD2S,KQwIoB,MACH,GRzIjBD,GAAA,CQ0IgB,CAACngB,EAAAojB,aR9GwB3c,EAAQgH,kBQgHlC,MACD,SRzGE,EAAAzN,EAAAyiB,oBAYK,YAXD,EAAAziB,EAAAyiB,oBAA4C,KAA5CpC,GAA4C,EAAArgB,EAAA6iB,iBAAzBd,EAAAtgB,YAAY,OAAD,KQ4GvC,EAAAzB,EAAAuiB,YAAW,IR3GF,EAAAviB,EAAAwiB,oBASKxiB,EAAAijB,SAAA,MA/CzB,EAAAjjB,EAAAkjB,YAsCmDnB,EAAA3W,iBAtCnD,CAsCgC3E,EAAStB,MQ4GrB,EAAAnF,EAAAuiB,cR5GA,EAAAviB,EAAAwiB,oBASK,MAT4Chd,IAAKL,EACjDua,OAvCzB,EAAA1f,EAAA8jB,gBAAA,SAuC2C/B,EAAAnN,aAAazP,KQ8GzC,ER7GS,EAAAnF,EAAAyiB,oBACwE,OADlE5H,IAAKkH,EAAAzO,aAAa7M,EAAQR,UAAWQ,EAAQ4I,eAC9CuT,IAAKb,EAAAtgB,YAAYgF,EAAQ4I,eAAgBqQ,MAAM,qBQiH3D,KAAM,ER1JvBY,IQ2Jc,EAAAtgB,EAAA8iB,iBRjHU,EAAA9iB,EAAAyiB,oBAIS,UA9CjC,sBAAAE,GA0CyClc,EAAQoI,aAAY8T,EAAG3e,SAAMge,EAAA,KAAAA,EAAA,GQqHtE,IAAIgB,IRrHoEjB,EAAA9M,eAAA8M,EAAA9M,iBAAA+N,KQsHvD,GACA,EAAAhjB,EAAAuiB,cRtHW,EAAAviB,EAAAwiB,oBAESxiB,EAAAijB,SAAA,MA7CrC,EAAAjjB,EAAAkjB,YA2CqD,CAAC,EAAG,EAAG,EAAG,EAAG,IAAvBmC,IAAf,EAAArlB,EAAAyiB,oBAES,UAFkCjd,IAAK6f,EAASzhB,MAAOyhB,IQ0HvE,EAAArlB,EAAA6iB,iBAAiB,IRzHGwC,GAAM,EA5C/C7E,KQsKoB,MACH,GRvKjBD,GAAA,CQwKgB,CAACvgB,EAAAojB,aR9HwB3c,EAAQoI,iBQgIlC,MACD,SR1HE,EAAA7O,EAAAyiB,oBAKK,KALLhC,EAKK,EAJD,EAAAzgB,EAAAyiB,oBAAkD,KAAlD/B,GAAkD,EAAA1gB,EAAA6iB,iBAA/Bd,EAAAtgB,YAAY,aAAD,KQ6HvC,EAAAzB,EAAAuiB,YAAW,IR5HF,EAAAviB,EAAAwiB,oBAEKxiB,EAAAijB,SAAA,MArDzB,EAAAjjB,EAAAkjB,YAmDiDnB,EAAAtP,mBAnDjD,CAmDgC7O,EAAOuB,MQ6HnB,EAAAnF,EAAAuiB,cR7HA,EAAAviB,EAAAwiB,oBAEK,MAF4Chd,IAAKL,EAAQua,OAnDlF,EAAA1f,EAAA8jB,gBAmDyF/B,EAAAnN,aAAazP,MQgIvF,EAAAnF,EAAA6iB,iBR/HYjf,EAAQ,KAAH,MQgIlB,SR7HE,EAAA5D,EAAAyiB,oBAKK,YAJD,EAAAziB,EAAAyiB,oBAAiD,KAAjD9B,GAAiD,EAAA3gB,EAAA6iB,iBAA9Bd,EAAAtgB,YAAY,YAAD,KQgIvC,EAAAzB,EAAAuiB,YAAW,IR/HF,EAAAviB,EAAAwiB,oBAEKxiB,EAAAijB,SAAA,MA3DzB,EAAAjjB,EAAAkjB,YAyDmDnB,EAAA3W,iBAzDnD,CAyDgC3E,EAAStB,MQgIrB,EAAAnF,EAAAuiB,cRhIA,EAAAviB,EAAAwiB,oBAEK,MAF4Chd,IAAKL,EAAQua,OAzDlF,EAAA1f,EAAA8jB,gBAyDyF/B,EAAAnN,aAAazP,KQmIvF,EACD,EAAAnF,EAAA8iB,iBRnIU,EAAA9iB,EAAAyiB,oBAAyF,SAAlFjiB,KAAK,SA1DpC,sBAAAmiB,GA0DsDlc,EAAQ8H,QAAOoU,EAAEzU,IAAI,IAAIH,IAAI,MAAO/J,SAAMge,EAAA,KAAAA,EAAA,GQ0IhG,IAAIgB,IR1I8FjB,EAAA9M,eAAA8M,EAAA9M,iBAAA+N,KQ2IjF,KAAM,GRrMvBpC,GAAA,CQsMgB,CAAC5gB,EAAAujB,WR5IqC9c,EAAQ8H,YQ8I/C,MACD,SR5IE,EAAAvO,EAAAyiB,oBAGK,KAHL5B,EAGK,EAFD,EAAA7gB,EAAAyiB,oBAA8C,KAA9C3B,GAA8C,EAAA9gB,EAAA6iB,iBAA3Bd,EAAAtgB,YAAY,SAAD,IAC9B,EAAAzB,EAAAyiB,oBAA6C,KAA7C1B,GAA6C,EAAA/gB,EAAA6iB,iBAA1Bd,EAAAtgB,YAAY,QAAD,OQgJzC,EAAAzB,EAAAuiB,YAAW,IR9IJ,EAAAviB,EAAAwiB,oBASKxiB,EAAAijB,SAAA,MA1ErB,EAAAjjB,EAAAkjB,YAiE8CnB,EAAAxW,uBAjE9C,CAiE4BoI,EAAK2R,MQ+If,EAAAtlB,EAAAuiB,cR/IF,EAAAviB,EAAAwiB,oBASK,MATiDhd,IAAK8f,EAAW5F,OAjEtF,EAAA1f,EAAA8jB,gBAiE6F/B,EAAAjN,cAAcnB,KQkJ9F,ERjJO,EAAA3T,EAAAyiB,oBAEK,aAAAziB,EAAA6iB,iBADEd,EAAAtgB,YAAY,MAAD,IAElB,EAAAzB,EAAAyiB,oBAAiF,aAAAziB,EAAA6iB,iBAA1E3Y,KAAKE,MAAqD,GAA/CuJ,EAAI7D,cAAcyV,QAAO,CAACtb,EAAGub,IAAMvb,EAAIub,GAAG,IAAW,IAAb,KQiJjE,EAAAxlB,EAAAuiB,YAAW,IRhJJ,EAAAviB,EAAAwiB,oBAGKxiB,EAAAijB,SAAA,MAzEzB,EAAAjjB,EAAAkjB,YAsE8CvgB,MAAMC,KAAK,CAADkD,OAAW6N,EAAI7D,cAAchK,SAAM,CAAK2f,EAAGxY,IAAMA,KAA1EyY,KQiJT,EAAA1lB,EAAAuiB,cRjJF,EAAAviB,EAAAwiB,oBAGK,MAFAhd,IAAKkgB,GAAW,EQiJzB,EAAA1lB,EAAA8iB,iBRhJQ,EAAA9iB,EAAAyiB,oBAAsE,SAA/DjiB,KAAK,SAxEpC,sBAAAmiB,GAwEsDhP,EAAI7D,cAAc4V,GAAW/C,EAAGzU,IAAI,KQoJvE,KAAM,ER5NzB8S,GAAA,CQ6NkB,CAAChhB,EAAAujB,WRrJmC5P,EAAI7D,cAAc4V,WQwJxD,OACH,MACD,QACH,EAAA1lB,EAAAuiB,YAAW,IRxJJ,EAAAviB,EAAAwiB,oBAcKxiB,EAAAijB,SAAA,MAzFrB,EAAAjjB,EAAAkjB,YA2E8CnB,EAAA1W,kBA3E9C,CA2E4BsI,EAAK2R,MQyJf,EAAAtlB,EAAAuiB,cRzJF,EAAAviB,EAAAwiB,oBAcK,MAd4Chd,IAAK8f,EAAW5F,OA3EjF,EAAA1f,EAAA8jB,gBA2EwF/B,EAAAjN,cAAcnB,KQ4JzF,ER3JO,EAAA3T,EAAAyiB,oBAOK,KAPLxB,EAOK,EAND,EAAAjhB,EAAAyiB,oBAGO,cAFH,EAAAziB,EAAAyiB,oBAA4F,OAAtF5H,IAAKkH,EAAArO,WAAWC,GAAOiP,IAAKb,EAAAtgB,YAAYkS,EAAI1N,WAAayZ,OA9E3F,EAAA1f,EAAA8jB,gBA8EkG/B,EAAAlO,gBAAgBF,KQgK/F,KAAM,GR9OzBuN,IA+E4B,EAAAlhB,EAAAyiB,oBAAmF,OAA7E5H,IAAKkH,EAAAjO,WAAWH,GAAOiP,IAAKb,EAAAtgB,YAAYkS,EAAI9D,aAAc6P,MAAM,cQoK/E,KAAM,ERnPzByB,MAiFwB,EAAAnhB,EAAAyiB,oBACa,OADbrB,GACa,EAAAphB,EAAA6iB,iBADYd,EAAAtgB,YAAYkS,EAAI1N,WAAa,IAAM8b,EAAAtgB,YAAYsgB,EAAAlS,YAAY8D,KAAG,MAG3F,EAAA3T,EAAAyiB,oBAAmF,aAAAziB,EAAA6iB,iBAA5E3Y,KAAKE,MAAqD,IAA/CuJ,EAAI7D,cAAcyV,QAAO,CAACtb,EAAGub,IAAMvb,EAAIub,GAAG,IAAY,KAAd,KQoKjE,EAAAxlB,EAAAuiB,YAAW,IRnKJ,EAAAviB,EAAAwiB,oBAGKxiB,EAAAijB,SAAA,MAxFzB,EAAAjjB,EAAAkjB,YAqF8CvgB,MAAMC,KAAK,CAADkD,OAAW6N,EAAI7D,cAAchK,SAAM,CAAK2f,EAAGxY,IAAMA,KAA1EyY,KQoKT,EAAA1lB,EAAAuiB,cRpKF,EAAAviB,EAAAwiB,oBAGK,MAFAhd,IAAKkgB,GAAW,EQoKzB,EAAA1lB,EAAA8iB,iBRnKQ,EAAA9iB,EAAAyiB,oBAAsE,SAA/DjiB,KAAK,SAvFpC,sBAAAmiB,GAuFsDhP,EAAI7D,cAAc4V,GAAW/C,EAAGzU,IAAI,KQuKvE,KAAM,ER9PzBmT,GAAA,CQ+PkB,CAACrhB,EAAAujB,WRxKmC5P,EAAI7D,cAAc4V,WQ2KxD,OACH,MACD,OR1KI,EAAA1lB,EAAAyiB,oBAKK,YAJD,EAAAziB,EAAAyiB,oBAAgD,KAAhDnB,GAAgD,EAAAthB,EAAA6iB,iBAA7Bd,EAAAtgB,YAAY,WAAD,KQ4KvC,EAAAzB,EAAAuiB,YAAW,IR3KF,EAAAviB,EAAAwiB,oBAEKxiB,EAAAijB,SAAA,MA9FzB,EAAAjjB,EAAAkjB,YA4FiDnB,EAAA7P,mBA5FjD,CA4FgCtO,EAAOuB,MQ4KnB,EAAAnF,EAAAuiB,cR5KA,EAAAviB,EAAAwiB,oBAEK,MAF4Chd,IAAKL,EAAOua,MAAM,WQ+KxE,EAAA1f,EAAA6iB,iBR9KYjf,GAAK,MQ+KlB,QR5K8Bme,EAAAzW,eAAexF,SQ+K9C,EAAA9F,EAAAuiB,cR/KG,EAAAviB,EAAAwiB,oBAGK,KAHLjB,EAGK,EAFD,EAAAvhB,EAAAyiB,oBAAiD,KAAjDjB,GAAiD,EAAAxhB,EAAA6iB,iBAA9Bd,EAAAtgB,YAAY,YAAD,IAC9B,EAAAzB,EAAAyiB,oBAA6C,KAA7ChB,GAA6C,EAAAzhB,EAAA6iB,iBAA1Bd,EAAAtgB,YAAY,QAAD,OAlGlD,EAAAzB,EAAA2jB,oBAAA,SQoRS,EAAA3jB,EAAAuiB,YAAW,IRhLJ,EAAAviB,EAAAwiB,oBAaKxiB,EAAAijB,SAAA,MAjHrB,EAAAjjB,EAAAkjB,YAoG8CnB,EAAAzW,gBApG9C,CAoG4BqI,EAAK2R,MQiLf,EAAAtlB,EAAAuiB,cRjLF,EAAAviB,EAAAwiB,oBAaK,MAb0Chd,IAAK8f,EAAW5F,OApG/E,EAAA1f,EAAA8jB,gBAoGsF/B,EAAAjN,cAAcnB,KQoLvF,ERnLO,EAAA3T,EAAAyiB,oBAOK,KAPLf,EAOK,EAND,EAAA1hB,EAAAyiB,oBAGO,cAFH,EAAAziB,EAAAyiB,oBAA4F,OAAtF5H,IAAKkH,EAAArO,WAAWC,GAAOiP,IAAKb,EAAAtgB,YAAYkS,EAAI1N,WAAayZ,OAvG3F,EAAA1f,EAAA8jB,gBAuGkG/B,EAAAlO,gBAAgBF,KQwL/F,KAAM,GR/RzBgO,IAwG4B,EAAA3hB,EAAAyiB,oBAAmF,OAA7E5H,IAAKkH,EAAAjO,WAAWH,GAAOiP,IAAKb,EAAAtgB,YAAYkS,EAAI9D,aAAc6P,MAAM,cQ4L/E,KAAM,ERpSzBkC,MA0GwB,EAAA5hB,EAAAyiB,oBACa,OADbZ,GACa,EAAA7hB,EAAA6iB,iBADYd,EAAAtgB,YAAYkS,EAAI1N,WAAa,IAAM8b,EAAAtgB,YAAYsgB,EAAAlS,YAAY8D,KAAG,OQ8LlG,EAAA3T,EAAAuiB,YAAW,IR3LJ,EAAAviB,EAAAwiB,oBAGKxiB,EAAAijB,SAAA,MAhHzB,EAAAjjB,EAAAkjB,YA6G8CvgB,MAAMC,KAAK,CAADkD,OAAW6N,EAAI7D,cAAchK,SAAM,CAAK2f,EAAGxY,IAAMA,KAA1EyY,KQ4LT,EAAA1lB,EAAAuiB,cR5LF,EAAAviB,EAAAwiB,oBAGK,MAFAhd,IAAKkgB,GAAW,EQ4LzB,EAAA1lB,EAAA8iB,iBR3LQ,EAAA9iB,EAAAyiB,oBAAsE,SAA/DjiB,KAAK,SA/GpC,sBAAAmiB,GA+GsDhP,EAAI7D,cAAc4V,GAAW/C,EAAGzU,IAAI,KQ+LvE,KAAM,ER9SzBgW,GAAA,CQ+SkB,CAAClkB,EAAAujB,WRhMmC5P,EAAI7D,cAAc4V,WQmMxD,OACH,MACD,ORlMI,EAAA1lB,EAAAyiB,oBAMK,YALD,EAAAziB,EAAAyiB,oBAAkD,KAAlD0B,GAAkD,EAAAnkB,EAAA6iB,iBAA/Bd,EAAAtgB,YAAY,aAAD,KQoMvC,EAAAzB,EAAAuiB,YAAW,IRnMF,EAAAviB,EAAAwiB,oBAGKxiB,EAAAijB,SAAA,MAvHzB,EAAAjjB,EAAAkjB,YAoHwCvgB,MAAMC,KAAK,CAADkD,OAAWic,EAAA3W,gBAAgBtF,SAAM,CAAK2f,EAAGxY,IAAMA,KAAlE9H,KQoMX,EAAAnF,EAAAuiB,cRpMA,EAAAviB,EAAAwiB,oBAGK,MAH6Ehd,IAAKL,EAClFua,OArHzB,EAAA1f,EAAA8jB,gBAqHgC/B,EAAAnN,aAAazP,KQsM9B,EACD,EAAAnF,EAAA8iB,iBRtMU,EAAA9iB,EAAAyiB,oBAA0D,SAAnDjiB,KAAK,SAtHpC,sBAAAmiB,GAsHsDZ,EAAA/P,YAAY7M,GAAKwd,EAAGzU,IAAI,KQ0M7D,KAAM,ERhUvBkW,GAAA,CQiUgB,CAACpkB,EAAAujB,WR3MqCxB,EAAA/P,YAAY7M,OQ6MnD,MACD,SR3ME,EAAAnF,EAAAyiB,oBAWK,YAVD,EAAAziB,EAAAyiB,oBAA8C,KAA9C4B,GAA8C,EAAArkB,EAAA6iB,iBAA3Bd,EAAAtgB,YAAY,SAAD,KQ8MvC,EAAAzB,EAAAuiB,YAAW,IR7MF,EAAAviB,EAAAwiB,oBAQKxiB,EAAAijB,SAAA,MAnIzB,EAAAjjB,EAAAkjB,YA2HmDnB,EAAA3W,iBA3HnD,CA2HgC3E,EAAStB,MQ8MrB,EAAAnF,EAAAuiB,cR9MA,EAAAviB,EAAAwiB,oBAQK,MAR4Chd,IAAKL,EAAQua,OA3HlF,EAAA1f,EAAA8jB,gBA2HyF/B,EAAAnN,aAAazP,KQiNvF,GACA,EAAAnF,EAAAuiB,YAAW,IRjNF,EAAAviB,EAAAwiB,oBAMOxiB,EAAAijB,SAAA,MAlI/B,EAAAjjB,EAAAkjB,YA4H8Dzc,EAAQwI,gBA5HtE,CA4HsCnI,EAAQ6e,MQkNtB,EAAA3lB,EAAAuiB,cRlNA,EAAAviB,EAAAwiB,oBAMO,QANwDhd,IAAKmgB,EAChEjG,MAAM,gBQoNf,ERnNS,EAAA1f,EAAAyiB,oBAEmD,OAF7C5H,IAAKkH,EAAAtO,oBAAoBhN,EAASK,GAAU8b,IAAKb,EAAAtgB,YAAYqF,GAC9D4Y,OA/HjC,EAAA1f,EAAA8jB,gBAAA,oBA+H8D/B,EAAAhN,mBAAmBtO,EAASK,IACzD4b,QAAKC,GAAEZ,EAAA7M,qBAAqBzO,EAASK,IQuNjD,KAAM,GRvV3Bwd,IAiI4B,EAAAtkB,EAAAyiB,oBAAsD,OAAtD8B,GAAsD,EAAAvkB,EAAA6iB,iBAA7Bd,EAAAtgB,YAAYqF,IAAM,QQyNrD,OACH,MACD,YAIVkb,EAAO,MAAQA,EAAO,KRzNlB,EAAAhiB,EAAAyiB,oBAAM,qBACN,EAAAziB,EAAAyiB,oBA0BM,aAzBF,EAAAziB,EAAAyiB,oBAEQ,eA3IpB,EAAAziB,EAAAolB,kBAAA,EAAAplB,EAAA6iB,iBAyIsBd,EAAAtgB,YAAY,aAAc,IAChC,IQ0NR,EAAAzB,EAAA8iB,iBR1NQ,EAAA9iB,EAAAyiB,oBAA4E,SAArEjiB,KAAK,SA1I5B,sBAAAwhB,EAAA,KAAAA,EAAA,GAAAW,GA0I8CZ,EAAApW,aAAYgX,GAAEzU,IAAI,IAAKlK,SAAMge,EAAA,KAAAA,EAAA,GQgO3E,IAAIgB,IRhOyEjB,EAAA9M,eAAA8M,EAAA9M,iBAAA+N,KQiOlE,KAAM,KAAM,CACb,CAAChjB,EAAAujB,WRlOmCxB,EAAApW,mBAElC,EAAA3L,EAAAyiB,oBAqBQ,QArBR+B,EAqBQ,EApBJ,EAAAxkB,EAAAyiB,oBAIU,WAJAC,QAAKV,EAAA,KAAAA,EAAA,GAAAW,GAAEZ,EAAAlW,uBAAyBkW,EAAAlW,yBQqO/C,EAAA7L,EAAA6iB,iBRpOYd,EAAAlW,sBAAwB,IAAM,KAAM,KACvC,EAAA7L,EAAA6iB,iBAAGd,EAAAtgB,YAAY,MAAO,KACtB,EAAAzB,EAAA6iB,iBAAGd,EAAAlW,sBAAwB,IAAM,KAAT,IAE5B,EAAA7L,EAAAyiB,oBAMQ,eALJ,EAAAziB,EAAAyiB,oBAIK,WQ8NbT,EAAO,MAAQA,EAAO,KRjOV,EAAAhiB,EAAAyiB,oBAAS,qBACT,EAAAziB,EAAAyiB,oBAAoC,aAAAziB,EAAA6iB,iBAA7Bd,EAAAtgB,YAAY,UAAD,IAClB,EAAAzB,EAAAyiB,oBAAmC,aAAAziB,EAAA6iB,iBAA5Bd,EAAAtgB,YAAY,SAAD,QAG1B,EAAAzB,EAAAyiB,oBAOQ,gBQ2Nb,EAAAziB,EAAAuiB,YAAW,IRjOF,EAAAviB,EAAAwiB,oBAKKxiB,EAAAijB,SAAA,MA/JzB,EAAAjjB,EAAAkjB,YA0JmDnB,EAAAnW,iBA1JnD,CA0JgCnF,EAAStB,KQkOtB,EAAAnF,EAAA8iB,kBAAiB,EAAA9iB,EAAAuiB,cRlOhB,EAAAviB,EAAAwiB,oBAKK,MAL4Chd,IAAKL,GAAK,EAEvD,EAAAnF,EAAAyiB,oBAAsC,aAAAziB,EAAA6iB,iBAA/Bd,EAAAtgB,YAAYgF,EAAQ,KAAD,IAC1B,EAAAzG,EAAAyiB,oBAA2D,YQkOnE,EAAAziB,EAAA8iB,iBRlOY,EAAA9iB,EAAAyiB,oBAAkD,SAA3CjiB,KAAK,SA7JxC,sBAAAmiB,GA6J0Dlc,EAAQ,GAADkc,EAAKzU,IAAI,KQsOvD,KAAM,ERnYzBuW,GAAA,CQoYkB,CAACzkB,EAAAujB,WRvOuC9c,EAAQ,SAC1C,EAAAzG,EAAAyiB,oBAA2D,YQ0OnE,EAAAziB,EAAA8iB,iBR1OY,EAAA9iB,EAAAyiB,oBAAkD,SAA3CjiB,KAAK,SA9JxC,sBAAAmiB,GA8J0Dlc,EAAQ,GAADkc,EAAKzU,IAAI,KQ8OvD,KAAM,ER5YzBwW,GAAA,CQ6YkB,CAAC1kB,EAAAujB,WR/OuC9c,EAAQ,WQkPjD,CACH,CAACzG,EAAA6jB,MRtPiB9B,EAAAlW,uBAAyBpF,EAAQ,IAAMA,EAAQ,QQwPjE,aRhPN,EAAAzG,EAAAyiB,oBAQM,MARNkC,EAQM,CQ6OR3C,EAAO,MAAQA,EAAO,KRpPhB,EAAAhiB,EAAAyiB,oBAAM,sBQqPX,EAAAziB,EAAAuiB,YAAW,IRpPN,EAAAviB,EAAAwiB,oBAKIxiB,EAAAijB,SAAA,MA1KhB,EAAAjjB,EAAAkjB,YAqK0CnB,EAAAlZ,UArK1C,CAqKuBmH,EAAS7K,MQqPhB,EAAAnF,EAAAuiB,cRrPJ,EAAAviB,EAAAwiB,oBAKI,KALqChd,IAAKL,GAAK,EAC/C,EAAAnF,EAAAyiB,oBAA+C,OAA/CmC,GAA+C,EAAA5kB,EAAA6iB,iBAApB7S,EAAQ,IAAD,GQsPxCgS,EAAO,MAAQA,EAAO,KR5ZhC,EAAAhiB,EAAAolB,iBAsK+D,SAC/C,EAAAplB,EAAAyiB,oBAA6B,eAAAziB,EAAA6iB,iBAApB7S,EAAQ,IAAD,GACNA,EAAQ,IAAMA,EAAQ,KQuPjC,EAAAhQ,EAAAuiB,cRvPC,EAAAviB,EAAAwiB,oBAAsC,KAxKtDqC,KAAA,EAAA7kB,EAAA2jB,oBAAA,UAAA3jB,EAAAolB,iBAwKsD,OAC/B,EAAAplB,EAAA6iB,iBAAG7S,EAAQ,IAAD,QQ0PvB,SRvPF,EAAAhQ,EAAAyiB,oBAwGM,MAxGNqC,EAwGM,EAvGF,EAAA9kB,EAAAyiB,oBAsGW,kBArGP,EAAAziB,EAAAyiB,oBAKS,gBQqPf,EAAAziB,EAAA8iB,iBRzPU,EAAA9iB,EAAAyiB,oBAAmF,SAA5E/C,MAAM,SAASlf,KAAK,WA/K/C,sBAAAwhB,EAAA,KAAAA,EAAA,GAAAW,GA+KmEZ,EAAAhW,YAAW4W,GAAEhiB,GAAG,qBQ8PtE,KAAM,KAAM,CACb,CAACX,EAAAgkB,eR/PsDjC,EAAAhW,gBAC/C,EAAA/L,EAAAyiB,oBAEQ,QAFRsC,GAEQ,EAAA/kB,EAAA6iB,iBADDd,EAAAtgB,YAAY,qBAAD,MQiQ9B,EAAAzB,EAAA8iB,iBR9PQ,EAAA9iB,EAAAyiB,oBA8FM,MA9FNwC,EA8FM,EA7FF,EAAAjlB,EAAAyiB,oBAA8D,MAA9DyC,IAA8D,EAAAllB,EAAA6iB,iBAA1Bd,EAAAtgB,YAAY,OAAD,GQ+PzDugB,EAAO,MAAQA,EAAO,KR9PZ,EAAAhiB,EAAAyiB,oBAOK,YAND,EAAAziB,EAAAyiB,oBAA0C,UAAtC,sCACJ,EAAAziB,EAAAyiB,oBAA+D,UAA3D,2DACJ,EAAAziB,EAAAyiB,oBAAe,UAAX,WACJ,EAAAziB,EAAAyiB,oBAEK,YA5L7B,EAAAziB,EAAAolB,iBA0L4B,0JAC4C,EAAAplB,EAAAyiB,oBAAI,UQiQ9D,KR9PM,EAAAziB,EAAAyiB,oBAAuE,MAAvE0C,IAAuE,EAAAnlB,EAAA6iB,iBAAnCd,EAAAtgB,YAAY,gBAAD,IAC/C,EAAAzB,EAAAyiB,oBAkFK,WQ8KbT,EAAO,MAAQA,EAAO,KR/blC,EAAAhiB,EAAA4lB,mBAAA,m6CAmOwB,EAAA5lB,EAAAyiB,oBAOK,WQuNfT,EAAO,MAAQA,EAAO,KRjcpC,EAAAhiB,EAAAolB,iBAmO4B,iEAEA,EAAAplB,EAAAyiB,oBAIK,aQ0NhB,EAAAziB,EAAAuiB,YAAW,IR7NI,EAAAviB,EAAAwiB,oBAEKxiB,EAAAijB,SAAA,MAxOrC,EAAAjjB,EAAAkjB,YAsOiEnB,EAAAhP,gCAtOjE,CAsO4C9M,EAAWd,MQ8N7B,EAAAnF,EAAAuiB,cR9NM,EAAAviB,EAAAwiB,oBAEK,MAF6Dhd,IAAKL,IAAK,EAAAnF,EAAA6iB,iBACrEd,EAAAtgB,YAAYwE,IAAS,MQ8NxC,WR1NI,EAAAjG,EAAAyiB,oBAYK,WQkNfT,EAAO,MAAQA,EAAO,KRzcpC,EAAAhiB,EAAAolB,iBA2O4B,mDACA,EAAAplB,EAAAyiB,oBAUK,aQqNhB,EAAAziB,EAAAuiB,YAAW,IR9NI,EAAAviB,EAAAwiB,oBAQKxiB,EAAAijB,SAAA,MArPrC,EAAAjjB,EAAAkjB,YA6O6EnB,EAAA1M,sBAAsBwQ,WA7OnG,EA6O6C5f,EAAW6f,GAAW3gB,MQ+NzC,EAAAnF,EAAAuiB,cR/NM,EAAAviB,EAAAwiB,oBAQK,MAPAhd,IAAKL,IAAK,EAAAnF,EAAA6iB,iBACRd,EAAAtgB,YAAYwE,GAAa,MAAQ8b,EAAA/M,WAAW,KAAO,IAA+CrS,MAAMC,KAAKkjB,EAASD,WAAyD9iB,KAAIa,GAASA,EAAK,GAAsDb,KAAIoK,GAAU4U,EAAA/M,WAAW7H,KAASuM,KAAKqI,EAAAtgB,YAAW,QQiO9R,IRjOgWmC,EAAK,GAAMme,EAAAtgB,YAAW,OAAOiY,KAAKqI,EAAAtgB,YAAW,eQkO3a,WRzNI,EAAAzB,EAAAyiB,oBASK,WQoNfT,EAAO,MAAQA,EAAO,KRrdpC,EAAAhiB,EAAAolB,iBAwP4B,kDACA,EAAAplB,EAAAyiB,oBAOK,aQuNhB,EAAAziB,EAAAuiB,YAAW,IR7NI,EAAAviB,EAAAwiB,oBAKKxiB,EAAAijB,SAAA,MA/PrC,EAAAjjB,EAAAkjB,YA0P6EnB,EAAAzM,sBAAsBuQ,WA1PnG,EA0P6C5f,EAAW8f,GAAW5gB,MQ8NzC,EAAAnF,EAAAuiB,cR9NM,EAAAviB,EAAAwiB,oBAKK,MAJAhd,IAAKL,IAAK,EAAAnF,EAAA6iB,iBACRd,EAAAtgB,YAAYwE,GAAa,MAAQ8b,EAAA/M,WAAW,KAAO,IAA+C+Q,EAAShjB,KAAIoK,GAAU4U,EAAA/M,WAAW7H,KAASuM,KAAKqI,EAAAtgB,YAAW,eQ8NhL,WRxNI,EAAAzB,EAAAyiB,oBAMK,WQsNfT,EAAO,MAAQA,EAAO,KR9dpC,EAAAhiB,EAAAolB,iBAkQ4B,wCACA,EAAAplB,EAAAyiB,oBAIK,aQyNhB,EAAAziB,EAAAuiB,YAAW,IR5NI,EAAAviB,EAAAwiB,oBAEKxiB,EAAAijB,SAAA,MAtQrC,EAAAjjB,EAAAkjB,YAoQiEnB,EAAAxM,8BApQjE,CAoQ4CtP,EAAWd,MQ6N7B,EAAAnF,EAAAuiB,cR7NM,EAAAviB,EAAAwiB,oBAEK,MAF2Dhd,IAAKL,IAAK,EAAAnF,EAAA6iB,iBACnEd,EAAAtgB,YAAYwE,IAAS,MQ6NxC,UAGR+b,EAAO,MAAQA,EAAO,KR5NV,EAAAhiB,EAAAyiB,oBAOK,YAhR7B,EAAAziB,EAAAolB,iBAyQ4B,kCACA,EAAAplB,EAAAyiB,oBAKK,YAJD,EAAAziB,EAAAyiB,oBAA0B,UAAtB,sBACJ,EAAAziB,EAAAyiB,oBAAwB,UAApB,oBACJ,EAAAziB,EAAAyiB,oBAAwB,UAApB,oBACJ,EAAAziB,EAAAyiB,oBAAwB,UAApB,uBQ+NpB,OAEL,KAAM,CACP,CAACziB,EAAA6jB,MR5TkB9B,EAAAhW,oBQiU7B,CArbA5L,EAAAA,EAAA2hB,E,kCChEA,MAAA9hB,EAAAJ,EAAA,MAEM6f,EAAa,CRDZC,MAAM,UQEPC,EAAa,CRARD,MAAM,gBQCXE,ERJN,cQKME,EAAa,CRALJ,MAAM,WQCdK,ERNN,QQOMC,ERPN,cQQMC,ERRN,cQSMC,EAAa,CRTnB1a,IAAA,EAoBSka,MAAM,cQPTS,EAAa,CRbnB3a,IAAA,GQcM4a,ERdN,QQeMC,ERfN,QQgBMC,ERhBN,QQkBA,SAAgBwB,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQ,EAAApiB,EAAAuiB,cRlBR,EAAAviB,EAAAwiB,oBA2BM,MA3BN/C,EA2BM,EA1BJ,EAAAzf,EAAAyiB,oBAiBM,OAjBD/C,MAAM,aAAcsG,WAAQhE,EAAA,KAAAA,EAAA,GQsBrC,IAAIgB,IRtBmCjB,EAAAhL,qBAAAgL,EAAAhL,uBAAAiM,KQuBhC,ERtBD,EAAAhjB,EAAAyiB,oBAGM,MAHN9C,EAGM,EAFJ,EAAA3f,EAAAyiB,oBAAuG,OAAjG/C,OAJd,EAAA1f,EAAA8jB,gBAAA,YAImC/B,EAAAjM,mBAAoB+E,IAAKkH,EAAA5O,gBAAkByP,IAAKb,EAAAtgB,YAAYsgB,EAAAvV,OAAOnM,OQ2B3F,KAAM,GR/BjBuf,IAKQ,EAAA5f,EAAAyiB,oBAA2D,OAA3D3C,GAA2D,EAAA9f,EAAA6iB,iBAAlCd,EAAAtgB,YAAYsgB,EAAAvV,OAAOnM,OAAI,MAElD,EAAAL,EAAAyiB,oBAAuD,OAAlD/C,MAAM,SAAU7E,IAAKkH,EAAAhM,aAAc6M,IAAI,UQ+BzC,KAAM,ERtCf7C,IQuCM,EAAA/f,EAAA8iB,iBR/BA,EAAA9iB,EAAAyiB,oBAEM,OAFD/C,MAAM,kBAAe,EAAA1f,EAAA6iB,iBACrBd,EAAAtU,eAAa,MQ+BhB,CAACzN,EAAA6jB,MRhCgC9B,EAAAtU,iBAGgBsU,EAAAvV,OAAOoJ,KAAK,KQgC1D,EAAA5V,EAAAuiB,cRhCL,EAAAviB,EAAAwiB,oBAA6F,OAXnGhd,IAAA,EAWYka,OAXZ,EAAA1f,EAAA8jB,gBAAA,YAWiC/B,EAAAnL,cAAc,MQmClC,EAAA5W,EAAA6iB,iBRnC+Dd,EAAAvV,OAAOoJ,KAAK,IAAD,KAXvF,EAAA5V,EAAA2jB,oBAAA,OAYyD5B,EAAAvV,OAAOoJ,KAAK,KQqC1D,EAAA5V,EAAAuiB,cRrCL,EAAAviB,EAAAwiB,oBAA6F,OAZnGhd,IAAA,EAYYka,OAZZ,EAAA1f,EAAA8jB,gBAAA,YAYiC/B,EAAAnL,cAAc,MQwClC,EAAA5W,EAAA6iB,iBRxC+Dd,EAAAvV,OAAOoJ,KAAK,IAAD,KAZvF,EAAA5V,EAAA2jB,oBAAA,OAayD5B,EAAAvV,OAAOoJ,KAAK,KQ0C1D,EAAA5V,EAAAuiB,cR1CL,EAAAviB,EAAAwiB,oBAA6F,OAbnGhd,IAAA,EAaYka,OAbZ,EAAA1f,EAAA8jB,gBAAA,YAaiC/B,EAAAnL,cAAc,MQ6ClC,EAAA5W,EAAA6iB,iBR7C+Dd,EAAAvV,OAAOoJ,KAAK,IAAD,KAbvF,EAAA5V,EAAA2jB,oBAAA,OAcyD5B,EAAAvV,OAAOoJ,KAAK,KQ+C1D,EAAA5V,EAAAuiB,cR/CL,EAAAviB,EAAAwiB,oBAA6F,OAdnGhd,IAAA,EAcYka,OAdZ,EAAA1f,EAAA8jB,gBAAA,YAciC/B,EAAAnL,cAAc,MQkDlC,EAAA5W,EAAA6iB,iBRlD+Dd,EAAAvV,OAAOoJ,KAAK,IAAD,KAdvF,EAAA5V,EAAA2jB,oBAAA,OAemD5B,EAAAvV,OAAOiK,aAAa,KQoD5D,EAAAzW,EAAAuiB,cRpDL,EAAAviB,EAAAwiB,oBACgC,OAhBtChd,IAAA,EAeWka,MAAM,4BAA2D7E,IAAKkH,EAAAxL,cAAc,GACtFqM,IAAKb,EAAAvV,OAAOiK,aAAa,IQwDrB,KAAM,ERxEnBuJ,KAAA,EAAAhgB,EAAA2jB,oBAAA,OAiBmD5B,EAAAvV,OAAOiK,aAAa,KQ0D5D,EAAAzW,EAAAuiB,cR1DL,EAAAviB,EAAAwiB,oBACgC,OAlBtChd,IAAA,EAiBWka,MAAM,4BAA2D7E,IAAKkH,EAAAxL,cAAc,GACtFqM,IAAKb,EAAAvV,OAAOiK,aAAa,IQ8DrB,KAAM,ERhFnBwJ,KAAA,EAAAjgB,EAAA2jB,oBAAA,QQkFO,IR9D2B5B,EAAAvM,cQgEzB,EAAAxV,EAAAuiB,cRhEL,EAAAviB,EAAAwiB,oBAEM,MAFNtC,GAEM,EAAAlgB,EAAA6iB,iBADDd,EAAAzL,WAAS,KArBlB,EAAAtW,EAAA2jB,oBAAA,OAuBe5B,EAAAtM,gBQgEN,EAAAzV,EAAAuiB,cRhEL,EAAAviB,EAAAwiB,oBAIM,MA3BVrC,EAAA,EAwBM,EAAAngB,EAAAyiB,oBAAuD,OAAlD/C,MAAM,SAAU7E,IAAKkH,EAAA3L,aAAcwM,IAAI,UQoErC,KAAM,ER5FnBxC,IAyBM,EAAApgB,EAAAyiB,oBAA2E,OAAtE/C,MAAM,eAAgB7E,IAAKkH,EAAArL,kBAAkB,GAAIkM,IAAI,gBQwEnD,KAAM,ERjGnBvC,IA0BM,EAAArgB,EAAAyiB,oBAA2E,OAAtE/C,MAAM,eAAgB7E,IAAKkH,EAAArL,kBAAkB,GAAIkM,IAAI,gBQ4EnD,KAAM,ERtGnBtC,OAAA,EAAAtgB,EAAA2jB,oBAAA,QQ0GA,CAxFAxjB,EAAAA,EAAA2hB,C,kCClBA,MAAA9hB,EAAAJ,EAAA,MAEM6f,EAAa,CRuBPwE,QAAQ,IAAIvE,MAAM,yBQnBxBC,EAAa,CRNnBna,IAAA,GQOMoa,EAAa,CRPnBpa,IAAA,GQQMsa,EAAa,CR0BTJ,MAAM,eQzBVK,EAAa,CR0BPkE,QAAQ,KQzBdjE,ERVN,YQWMC,EAAa,CR+BTP,MAAM,WQ9BVQ,EAAa,CR+BP+D,QAAQ,KQ9Bd9D,EAAa,CRmCJT,MAAM,oBQlCfU,ERdN,UQeMC,EAAc,CR+CVX,MAAM,aQ9CVY,EAAc,CR+CR2D,QAAQ,KQ9Cd1D,ERjBN,YQkBMC,EAAc,CR4Dbd,MAAM,WQ1Db,SAAgBoC,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,MAAM6D,GAA6B,EAAAjmB,EAAAsiB,kBAAkB,mBAC/C4D,GAAwB,EAAAlmB,EAAAsiB,kBAAkB,cAEhD,OAAQ,EAAAtiB,EAAAuiB,cRxBV,EAAAviB,EAAAwiB,oBAAAxiB,EAAAijB,SAAA,MACmBlB,EAAApK,sBQ+BV,EAAA3X,EAAAuiB,cR3BL,EAAAviB,EAAAmmB,aAAsGF,EAAA,CAL1GzgB,IAAA,EAKsBN,SAAS,EAAOgB,WAAY6b,EAAAtL,aAAe,sBAAmBsL,EAAAtI,oBQgCzE,KAAM,EAAG,CAAC,aAAc,2BAX1B,EAAAzZ,EAAAuiB,cRxBL,EAAAviB,EAAAmmB,aAAkGF,EAAA,CAFtGzgB,IAAA,EAEsBN,SAAS,EAAOgB,WAAY6b,EAAA7b,WAAa,sBAAmB6b,EAAAvJ,kBQ6BvE,KAAM,EAAG,CAAC,aAAc,yBAO/BwJ,EAAO,MAAQA,EAAO,KR/BxB,EAAAhiB,EAAAyiB,oBAAM,qBACN,EAAAziB,EAAAyiB,oBAoEQ,eAnEN,EAAAziB,EAAAyiB,oBAkEQ,eAjEN,EAAAziB,EAAAyiB,oBAKK,WQ2BDT,EAAO,KAAOA,EAAO,IR/BvB,EAAAhiB,EAAAyiB,oBAAkB,UAAd,aAAS,KACb,EAAAziB,EAAAyiB,oBAEK,YQ8BD,EAAAziB,EAAA8iB,iBR/BF,EAAA9iB,EAAAyiB,oBAAwG,SAblH,sBAAAT,EAAA,KAAAA,EAAA,GAAAW,GAa0BZ,EAAAnK,SAASvX,KAAIsiB,GAAEniB,KAAK,OAAO4lB,UAAU,IAAIC,UAAU,KAAKC,YAAY,mBQqC/E,KAAM,KAAM,CACb,CAACtmB,EAAAujB,WRtCWxB,EAAAnK,SAASvX,aAG7B,EAAAL,EAAAyiB,oBAOK,WQiCDT,EAAO,MAAQA,EAAO,KRvCxB,EAAAhiB,EAAAyiB,oBAA8B,UAA1B,yBAAqB,KACzB,EAAAziB,EAAAyiB,oBAIK,YAHH,EAAAziB,EAAAyiB,oBAES,UAFD/C,MAAM,wBAAyBgD,QAAKV,EAAA,KAAAA,EAAA,GQ2CtD,IAAIgB,IR3CoDjB,EAAAjJ,4BAAAiJ,EAAAjJ,8BAAAkK,MQ4CzC,EAAAhjB,EAAA6iB,iBR3CAd,EAAApK,oBAAsB,eAAiB,WAApB,QAI5B,EAAA3X,EAAAyiB,oBASK,YARH,EAAAziB,EAAAyiB,oBAOK,KAPLhD,EAOK,CANUsC,EAAApK,sBQ4CN,EAAA3X,EAAAuiB,cRzCP,EAAAviB,EAAAwiB,oBAEO,OA/BjB5C,GAAA,EAAA5f,EAAA6iB,iBA8Bed,EAAA9I,qBAAuB,qBAAL,MQuChB,EAAAjZ,EAAAuiB,cR3CP,EAAAviB,EAAAwiB,oBAEO,OA5BjB7C,EA0B4C,2BAQtC,EAAA3f,EAAAyiB,oBAOK,KAPL3C,EAOK,EANH,EAAA9f,EAAAyiB,oBAKK,KALL1C,EAKK,GQmCA,EAAA/f,EAAAuiB,YAAW,IRvCd,EAAAviB,EAAAwiB,oBAGWxiB,EAAAijB,SAAA,MAvCrB,EAAAjjB,EAAAkjB,YAoCqEnB,EAAA/J,iBAAPmB,KQwCxC,EAAAnZ,EAAAuiB,cRxCZ,EAAAviB,EAAAwiB,oBAGW,QAHJ9C,OApCjB,EAAA1f,EAAA8jB,gBAAA,MAoCgC/B,EAAA3I,iBAAiBD,IAAsC3T,IAAK2T,EAC/EuJ,QAAKC,GAAEZ,EAAA7I,WAAWC,KQ2Cd,EAAAnZ,EAAA6iB,iBR1CH1J,GAAG,GAtCjB6G,MQiFgB,WRvCV,EAAAhgB,EAAAyiB,oBAYK,KAZLxC,EAYK,EAXH,EAAAjgB,EAAAyiB,oBAUK,KAVLvC,EAUK,GQiCA,EAAAlgB,EAAAuiB,YAAW,IR1Cd,EAAAviB,EAAAwiB,oBAEMxiB,EAAAijB,SAAA,MA9ChB,EAAAjjB,EAAAkjB,YA4CmFnB,EAAAnK,SAASrL,SAAnBC,KQ2CnD,EAAAxM,EAAAuiB,cR3CZ,EAAAviB,EAAAwiB,oBAEM,OAFA9C,OA5ChB,EAAA1f,EAAA8jB,gBAAA,SA4CkC/B,EAAA/I,oBAAoBxM,EAAO7L,KAAyC6E,IAAKgH,EAAO7L,IQ8CjG,ER7CL,EAAAX,EAAA4jB,aAAiEsC,EAAA,CAApD1Z,OAAQA,EAASkW,QAAKC,GAAEZ,EAAAhJ,cAAcvM,EAAO7L,KQiDnD,KAAM,EAAG,CAAC,SAAU,aACtB,MACD,ORhDN,EAAAX,EAAAyiB,oBAIM,MAJNtC,EAIM,EQ8CF,EAAAngB,EAAA8iB,iBRjDF,EAAA9iB,EAAAyiB,oBAES,UAnDrB,sBAAAT,EAAA,KAAAA,EAAA,GAAAW,GAiDwDZ,EAAA9J,wBAAuB0K,GAAG3e,SAAMge,EAAA,KAAAA,EAAA,GQqDxF,IAAIgB,IRrDsFjB,EAAAvI,mBAAAuI,EAAAvI,qBAAAwJ,KQsDzE,GACA,EAAAhjB,EAAAuiB,YAAW,IRtDd,EAAAviB,EAAAwiB,oBAAoFxiB,EAAAijB,SAAA,MAlDlG,EAAAjjB,EAAAkjB,YAkDsCnB,EAAA1I,YAATzV,KQuDH,EAAA5D,EAAAuiB,cRvDZ,EAAAviB,EAAAwiB,oBAAoF,UAA/Chd,IAAK5B,EAAQA,MAAOA,IQ0DlD,EAAA5D,EAAA6iB,iBR1D4Djf,GAAK,EAlDtFwc,MQ6GoB,OACH,KAAM,CACP,CAACpgB,EAAA6jB,MR9DW9B,EAAA1I,WAAWvT,QQ+DvB,CAAC9F,EAAAojB,aR/DuCrB,EAAA9J,kCAMlD,EAAAjY,EAAAyiB,oBAMK,WQyDDT,EAAO,MAAQA,EAAO,KR9DxB,EAAAhiB,EAAAyiB,oBAAmB,UAAf,cAAU,KACd,EAAAziB,EAAAyiB,oBAGK,YQ4DD,EAAAziB,EAAA8iB,iBR9DF,EAAA9iB,EAAAyiB,oBAC6B,SADtB/C,MAAM,cA1DvB,sBAAAsC,EAAA,KAAAA,EAAA,GAAAW,GA0D8CZ,EAAAnK,SAASC,YAAW8K,GAAEniB,KAAK,OAAO6lB,UAAU,KAC9EC,YAAY,cQmET,KAAM,KAAM,CACb,CAACtmB,EAAAujB,WRrE+BxB,EAAAnK,SAASC,oBAIjD,EAAA7X,EAAAyiB,oBAKK,KALLpC,EAKK,EAJH,EAAArgB,EAAAyiB,oBAGK,KAHLnC,EAGK,GQmEA,EAAAtgB,EAAAuiB,YAAW,IRrEd,EAAAviB,EAAAwiB,oBAC+CxiB,EAAAijB,SAAA,MAjEzD,EAAAjjB,EAAAkjB,YAgEqFnB,EAAA3J,cAAPe,KQsExD,EAAAnZ,EAAAuiB,cRtEZ,EAAAviB,EAAAwiB,oBAC+C,QADxC9C,OAhEjB,EAAA1f,EAAA8jB,gBAgEwB/B,EAAAnI,gBAAgBT,GAAO,eAAiB,OAAoC3T,IAAK2T,EAC5FuJ,QAAKC,GAAEZ,EAAAlI,eAAeV,KQyElB,EAAAnZ,EAAA6iB,iBRzE2B1J,GAAG,GAjE/CoH,MQ2IgB,WRvEV,EAAAvgB,EAAAyiB,oBAMK,WQqEDT,EAAO,MAAQA,EAAO,KR1ExB,EAAAhiB,EAAAyiB,oBAAa,UAAT,QAAI,KACR,EAAAziB,EAAAyiB,oBAGK,YQwED,EAAAziB,EAAA8iB,iBR1EF,EAAA9iB,EAAAyiB,oBACkC,SAD3B/C,MAAM,YAvEvB,sBAAAsC,EAAA,KAAAA,EAAA,GAAAW,GAuE4CZ,EAAA5J,YAAWwK,GAAEniB,KAAK,OAAO6lB,UAAU,KAAKC,YAAY,aACnFtiB,SAAMge,EAAA,KAAAA,EAAA,GQiFnB,IAAIgB,IRjFiBjB,EAAApI,qBAAAoI,EAAApI,uBAAAqJ,KQkFN,KAAM,KAAM,CACb,CAAChjB,EAAAujB,WRpF6BxB,EAAA5J,wBAO1C,EAAAnY,EAAAyiB,oBAGM,MAHNjC,EAGM,EAFJ,EAAAxgB,EAAAyiB,oBAA4D,UAApDjiB,KAAK,SAAUkiB,QAAKV,EAAA,KAAAA,EAAA,GQuFhC,IAAIgB,IRvF8BjB,EAAAjI,eAAAiI,EAAAjI,iBAAAkJ,KAAe,WAC7C,EAAAhjB,EAAAyiB,oBAAoD,UAA5CjiB,KAAK,SAAUkiB,QAAKV,EAAA,KAAAA,EAAA,GQ4FhC,IAAIgB,IR5F8BjB,EAAAhI,WAAAgI,EAAAhI,aAAAiJ,KAAW,SQ+FxC,GACL,CA5JA7iB,EAAAA,EAAA2hB,C,gCCpBA,MAAA9hB,EAAAJ,EAAA,MAEM6f,EAAa,CRAVC,MAAM,SQCTC,EAAa,CRAND,MAAM,QQCbE,EAAa,CRKRF,MAAM,uBQJXI,ERLN,QQMMC,EAAa,CRUVL,MAAM,WQTTM,EAAa,CRPnBxa,IAAA,EA6BWka,MAAM,OQlBXO,EAAa,CRXnBza,IAAA,EAoCSka,MAAM,aQrBTQ,EAAa,CRwBVL,MAAA,uBQvBHM,EAAa,CRyBRT,MAAM,eQvBjB,SAAgBoC,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,MAAM8D,GAAwB,EAAAlmB,EAAAsiB,kBAAkB,cAEhD,OAAQ,EAAAtiB,EAAAuiB,cRpBR,EAAAviB,EAAAwiB,oBA4CM,OA5CA9C,OADR,EAAA1f,EAAA8jB,gBAAA,OACwB/B,EAAAxc,gBQsBnB,ERrBD,EAAAvF,EAAAyiB,oBAaM,MAbNhD,EAaM,EAZJ,EAAAzf,EAAAyiB,oBAKQ,QALR9C,EAKQ,CQkBNqC,EAAO,KAAOA,EAAO,IRtBrB,EAAAhiB,EAAAyiB,oBAA6B,QAAvB/C,MAAM,UAAS,KAAC,KACtB,EAAA1f,EAAAyiB,oBAA4B,eAAAziB,EAAA6iB,iBAAnBd,EAAA9W,KAAK5K,MAAI,GACN0hB,EAAA7H,UAAY6H,EAAA9gB,WQuBnB,EAAAjB,EAAAuiB,cRvBL,EAAAviB,EAAAwiB,oBACO,QAPfhd,IAAA,EAM0Cka,MAAM,mCAAoCgD,QAAKV,EAAA,KAAAA,EAAA,GQ4BzF,IAAIgB,IR5BuFjB,EAAA5E,aAAA4E,EAAA5E,eAAA6F,KAAa,mBANxG,EAAAhjB,EAAA2jB,oBAAA,UASM,EAAA3jB,EAAAyiB,oBAKM,MALN7C,EAKM,GQyBH,EAAA5f,EAAAuiB,cR7BD,EAAAviB,EAAAwiB,oBAGWxiB,EAAAijB,SAAA,MAbnB,EAAAjjB,EAAAkjB,YAUkC,CAAC,EAAG,EAAG,EAAG,IAAnB/d,KQ8BP,EAAAnF,EAAAuiB,cRxClB,EAAAviB,EAAAwiB,oBAAAxiB,EAAAijB,SAAA,CAAAzd,IAUsDL,GAAK,CACtC4c,EAAAnH,wBAAwBzV,KQ+B5B,EAAAnF,EAAAuiB,cR/BP,EAAAviB,EAAAwiB,oBACoB,OAZ9Bhd,IAAA,EAWqDka,MAAM,sBAAuB7E,IAAKkH,EAAAnH,wBAAwBzV,GACnGyd,IAAI,aQmCG,KAAM,ER/CzB9C,KAAA,EAAA9f,EAAA2jB,oBAAA,QQiDa,OACD,URlCR,EAAA3jB,EAAAyiB,oBAYM,MAZN1C,EAYM,EAXJ,EAAA/f,EAAAyiB,oBAUQ,eATN,EAAAziB,EAAAyiB,oBAQQ,eAPN,EAAAziB,EAAAyiB,oBAMK,aQgCF,EAAAziB,EAAAuiB,YAAW,IRrCZ,EAAAviB,EAAAwiB,oBAIKxiB,EAAAijB,SAAA,MAxBjB,EAAAjjB,EAAAkjB,YAoBiCnB,EAAA9W,KAAKsB,SAAfC,KQsCD,EAAAxM,EAAAuiB,cRtCV,EAAAviB,EAAAwiB,oBAIK,MAJ+Bhd,IAAKgH,EAAO7L,IQwC3C,ERvCH,EAAAX,EAAA4jB,aAE6CsC,EAAA,CAFhC1Z,OAAQA,EAASkJ,SAAUqM,EAAA1H,YAAY7N,EAAO7L,IAAM6U,YAAauM,EAAAvM,YAC3EC,cAAesM,EAAAtM,cAAgBE,UAAU,EAAOpJ,QAASwV,EAAA9W,KAAKsB,QAAQxJ,KAAIC,GAAKA,EAAE3C,OACjFwV,mBAAoBkM,EAAAlM,oBQ8ClB,KAAM,EAAG,CAAC,SAAU,WAAY,cAAe,gBAAiB,UAAW,4BAE9E,cR1CakM,EAAA5H,aQgDpB,EAAAna,EAAAuiB,cRhDL,EAAAviB,EAAAwiB,oBAMQ,QANRxC,EAMQ,EALN,EAAAhgB,EAAAyiB,oBAIQ,eAHN,EAAAziB,EAAAyiB,oBAEK,aQ+CE,EAAAziB,EAAAuiB,YAAW,IRhDhB,EAAAviB,EAAAwiB,oBAAiFxiB,EAAAijB,SAAA,MAhC3F,EAAAjjB,EAAAkjB,YAgC4BnB,EAAAvH,QAAPhV,KQiDG,EAAAxF,EAAAuiB,cRjDd,EAAAviB,EAAAwiB,oBAAiF,MAAtDhd,IAAKA,EAAMka,OAhChD,EAAA1f,EAAA8jB,gBAgCuD/B,EAAA7E,WAAW1X,MQoD/C,EAAAxF,EAAA6iB,iBRpDwDd,EAAAxH,IAAI/U,IAAG,MQqDhE,cRrFlB,EAAAxF,EAAA2jB,oBAAA,OAoCiC5B,EAAA3H,cQuDxB,EAAApa,EAAAuiB,cRvDL,EAAAviB,EAAAwiB,oBAEM,MAFNvC,EAEM,GQsDC,EAAAjgB,EAAAuiB,YAAW,IRvDhB,EAAAviB,EAAAwiB,oBAAsExiB,EAAAijB,SAAA,MArC5E,EAAAjjB,EAAAkjB,YAqCsCnB,EAAA9W,KAAK2K,MAAZuD,KQwDX,EAAAnZ,EAAAuiB,cRxDd,EAAAviB,EAAAwiB,oBAAsE,QAAhE9C,MAAM,MAAgCla,IAAK2T,IQ2DxC,EAAAnZ,EAAA6iB,iBR3DgD1J,GAAG,MQ4DpD,URjGd,EAAAnZ,EAAA2jB,oBAAA,QAuCI,EAAA3jB,EAAAyiB,oBAKM,MALNvC,EAKM,EAJJ,EAAAlgB,EAAAyiB,oBAAkG,QAA5F/C,MAAM,2CAA4CgD,QAAKV,EAAA,KAAAA,EAAA,GQiEnE,IAAIgB,IRjEiEjB,EAAA3E,gBAAA2E,EAAA3E,kBAAA4F,KAAgB,iBAC/E,EAAAhjB,EAAAyiB,oBAEM,MAFNtC,GAEM,EAAAngB,EAAA6iB,iBADDd,EAAAlK,aAAW,MQmEjB,EACL,CA5FA1X,EAAAA,EAAA2hB,C,kCClBA,MAAA9hB,EAAAJ,EAAA,MAEM6f,EAAa,CRFnBja,IAAA,EACOka,MAAM,gBQKPC,EAAa,CRJVD,MAAM,SQKTE,EAAa,CRJHF,MAAM,aQKhBI,EAAa,CRRnBta,IAAA,GQSMua,EAAa,CRHFL,MAAM,uBQIjBM,ERVN,wBQWMC,EAAa,CRFCP,MAAM,WQGpBQ,EAAa,CRCFR,MAAM,uBQAjBS,ERbN,wBQcMC,EAAc,CREAV,MAAM,WQDpBW,EAAc,CRKHX,MAAM,uBQJjBY,ERhBN,wBQiBMC,EAAc,CRMAb,MAAM,WQLpBc,EAAc,CRWLd,MAAM,kBQVfe,EAAc,CRnBpBjb,IAAA,GQoBMkb,ERpBN,cQqBMC,EAAc,CRrBpBnb,IAAA,EAiDqBka,MAAM,oBQxBrBkB,EAAc,CRgCJlB,MAAM,iBQ/BhBmB,EAAc,CRmCHnB,MAAM,iBQlCjBoB,ER3BN,cQ4BMC,EAAc,CRsCCrB,MAAM,uBQrCrBsB,ER7BN,wBQ8BMC,ER9BN,YQ+BMC,EAAc,CRyCCxB,MAAM,oBQxCrByB,EAAc,CRhCpB3b,IAAA,EAiISka,MAAM,SQ5Ff,SAAgBoC,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,MAAMmE,GAAuB,EAAAvmB,EAAAsiB,kBAAkB,aACzCkE,GAA0B,EAAAxmB,EAAAsiB,kBAAkB,gBAElD,ORxCgCP,EAAA3V,aQyC3B,EAAApM,EAAAuiB,cRzCL,EAAAviB,EAAAwiB,oBAoIM,MApIN/C,EAoIM,EAnIJ,EAAAzf,EAAAyiB,oBA8HM,MA9HN9C,EA8HM,EA7HJ,EAAA3f,EAAAyiB,oBAqDW,WArDX7C,EAqDW,GQXJ,EAAA5f,EAAAuiB,YAAW,IRzChB,EAAAviB,EAAAwiB,oBAwBWxiB,EAAAijB,SAAA,MA5BnB,EAAAjjB,EAAAkjB,YAImCnB,EAAA9W,KAAKsB,SAAfC,KQ0CH,EAAAxM,EAAAuiB,cR9CtB,EAAAviB,EAAAwiB,oBAAAxiB,EAAAijB,SAAA,CAAAzd,IAIwDgH,EAAO7L,IQ4C9C,CR3CK6L,EAAOnM,OQ6CR,EAAAL,EAAAuiB,cR7CX,EAAAviB,EAAAwiB,oBAsBO,OA3BjB1C,EAAA,EAMY,EAAA9f,EAAAyiB,oBAMM,MANN1C,EAMM,EALJ,EAAA/f,EAAAyiB,oBACwG,OADlG/C,OAPpB,EAAA1f,EAAA8jB,gBAAA,cAO2C/B,EAAAnN,aAAapI,EAAOnM,OAAQwa,IAAKkH,EAAAvD,oBAAoBhS,EAAOnM,MACtFuiB,IAAKb,EAAAtgB,YAAY+K,EAAOnM,MAAQ,IAAM0hB,EAAAtgB,YAAY,QAAUihB,QAAKC,GAAEZ,EAAA3C,kBAAkB5S,EAAQ,MQiDnF,KAAM,GRzDjCwT,IASc,EAAAhgB,EAAAyiB,oBAEO,OAFPxC,GAEO,EAAAjgB,EAAA6iB,iBADFd,EAAAtgB,YAAY+K,EAAOnM,MAAQ,IAAM0hB,EAAAtgB,YAAY,SAAD,MAGnD,EAAAzB,EAAAyiB,oBAMM,MANNvC,EAMM,EALJ,EAAAlgB,EAAAyiB,oBACyG,OADnG/C,OAdpB,EAAA1f,EAAA8jB,gBAAA,cAc2C/B,EAAAnN,aAAapI,EAAOnM,OAAQwa,IAAKkH,EAAAjD,sBAAsBtS,EAAOnM,MACxFuiB,IAAKb,EAAAtgB,YAAY+K,EAAOnM,MAAQ,IAAM0hB,EAAAtgB,YAAY,SAAWihB,QAAKC,GAAEZ,EAAA3C,kBAAkB5S,EAAQ,MQmDpF,KAAM,GRlEjC2T,IAgBc,EAAAngB,EAAAyiB,oBAEO,OAFPrC,GAEO,EAAApgB,EAAA6iB,iBADFd,EAAAtgB,YAAY+K,EAAOnM,MAAQ,IAAM0hB,EAAAtgB,YAAY,UAAD,MAGnD,EAAAzB,EAAAyiB,oBAMM,MANNpC,EAMM,EALJ,EAAArgB,EAAAyiB,oBACwG,OADlG/C,OArBpB,EAAA1f,EAAA8jB,gBAAA,cAqB2C/B,EAAAnN,aAAapI,EAAOnM,OAAQwa,IAAKkH,EAAAhD,sBAAsBvS,EAAOnM,MACxFuiB,IAAKb,EAAAtgB,YAAY+K,EAAOnM,MAAQ,IAAM0hB,EAAAtgB,YAAY,QAAUihB,QAAKC,GAAEZ,EAAA3C,kBAAkB5S,EAAQ,MQqDnF,KAAM,GR3EjC8T,IAuBc,EAAAtgB,EAAAyiB,oBAEO,OAFPlC,GAEO,EAAAvgB,EAAA6iB,iBADFd,EAAAtgB,YAAY+K,EAAOnM,MAAQ,IAAM0hB,EAAAtgB,YAAY,SAAD,SAxB/D,EAAAzB,EAAA2jB,oBAAA,QQgFiB,OACD,ORpDR,EAAA3jB,EAAAyiB,oBA0BQ,QA1BRjC,EA0BQ,EAzBN,EAAAxgB,EAAAyiB,oBAwBQ,eAvBN,EAAAziB,EAAAyiB,oBAsBK,YArBH,EAAAziB,EAAAyiB,oBAGK,YAFH,EAAAziB,EAAAyiB,oBACoD,QAD9C/C,MAAM,2CACTgD,QAAKV,EAAA,KAAAA,EAAA,GAAAW,GAAEZ,EAAAgC,MAAM,wBAAuB,aAEzC,EAAA/jB,EAAAyiB,oBAKK,YAJH,EAAAziB,EAAAyiB,oBAGQ,SAHA/C,OArCxB,EAAA1f,EAAA8jB,gBAqC+B/B,EAAAtE,WAAa,UAAY,KQyDjC,EACD,EAAAzd,EAAA8iB,iBRzDJ,EAAA9iB,EAAAyiB,oBAA4C,SAArCjiB,KAAK,WAtC9B,sBAAAwhB,EAAA,KAAAA,EAAA,GAAAW,GAsCkDZ,EAAAtE,WAAUkF,IQ4DnC,KAAM,KAAM,CACb,CAAC3iB,EAAAgkB,eR7DyBjC,EAAAtE,cQ+D5BuE,EAAO,KAAOA,EAAO,IR9DzB,EAAAhiB,EAAAyiB,oBAAqD,QAA/C/C,MAAM,6BAA4B,UAAM,KQ+DzC,MR5DT,EAAA1f,EAAAyiB,oBAUK,WATQV,EAAAtD,iBQ+DF,EAAAze,EAAAuiB,cR/DT,EAAAviB,EAAAwiB,oBAKM,MAhDtB/B,EAAA,EA4CkB,EAAAzgB,EAAAyiB,oBAGmD,OAH7C/C,OA5CxB,EAAA1f,EAAA8jB,gBAAA,qBA4CsD/B,EAAAnN,aAAamN,EAAAtD,eAAejS,SAC7DqO,IAAKkH,EAAApD,gBAAgBoD,EAAAtD,gBAAgBrL,SACrCwP,IAAKb,EAAAtgB,YAAYsgB,EAAApD,gBAAgBoD,EAAAtD,gBAAgBvK,IACjDwO,QAAKV,EAAA,KAAAA,EAAA,GAAAW,GAAEZ,EAAAvC,sBAAsBuC,EAAAtD,kBQiErB,KAAM,GRhHnCiC,OAAA,EAAA1gB,EAAA2jB,oBAAA,OAiDoD5B,EAAAtD,iBQmE3B,EAAAze,EAAAuiB,cRnET,EAAAviB,EAAAwiB,oBAEM,MAFN7B,GAEM,EAAA3gB,EAAA6iB,iBADDd,EAAA9C,cAAc8C,EAAAtD,iBAAc,KAlDjD,EAAAze,EAAA2jB,oBAAA,kBAyDM,EAAA3jB,EAAAyiB,oBAyBW,WAzBX7B,EAyBW,EAxBT,EAAA5gB,EAAA4jB,aAoBY2C,EAAA,CApBAzL,KAAMiH,EAAAnE,aAAc,WAAS,KAAM1K,MAAM,EAAMuT,OAAO,UAAWC,MAAO,IAAMC,UAAW,IAClG3iB,SAAQ+d,EAAA5C,sBQyEJ,CRxEM9Z,MAAI,EAAArF,EAAA4mB,UACb,EADiBngB,aAAO,EACxB,EAAAzG,EAAAyiB,oBAeM,MAfN5B,EAeM,CAdOkB,EAAAlD,iBAAiBpY,IAAU+F,QAAU/F,EAAQ+F,SQ0E/C,EAAAxM,EAAAuiB,cR1ET,EAAAviB,EAAAwiB,oBAEuC,OAhErDhd,IAAA,EA8D8Eka,MAAM,iBACnE7E,IAAKkH,EAAA3P,mBAAmB3L,EAAQ+F,SAAS4G,UAAY2O,EAAA1O,cACrDuP,IAAKb,EAAAtgB,YAAYgF,EAAQ+F,SQ6EjB,KAAM,ER7I/BsU,KAAA,EAAA9gB,EAAA2jB,oBAAA,OAiEyB5B,EAAApD,gBAAgBlY,KQ+ElB,EAAAzG,EAAAuiB,cR/ET,EAAAviB,EAAAwiB,oBAUM,OA3EpBhd,IAAA,EAiEoDka,OAjEpD,EAAA1f,EAAA8jB,gBAAA,eAiE4E/B,EAAA/C,WAAWvY,EAAQ+F,UQkFtE,ERjFT,EAAAxM,EAAAyiB,oBAKM,MALN1B,EAKM,EAJJ,EAAA/gB,EAAAyiB,oBAE4C,OAFtC/C,OAnExB,EAAA1f,EAAA8jB,gBAAA,cAmE+C/B,EAAAnN,aAAanO,EAAQ+F,QAAUuV,EAAA7C,oBAAoBzY,IAC7EoU,IAAKkH,EAAApD,gBAAgBlY,GAAS2M,SAAWwP,IAAKb,EAAAtgB,YAAYsgB,EAAApD,gBAAgBlY,GAASyN,IACnFwO,QAAKC,GAAEZ,EAAAzC,sBAAsB7Y,IQqFrB,KAAM,GR1JnCua,GAsE6Be,EAAAtE,aQsFE,EAAAzd,EAAAuiB,cRtFb,EAAAviB,EAAAwiB,oBAAqF,OAtEvGhd,IAAA,EAsEyCka,MAAM,cAAegD,QAAKC,GAAEZ,EAAAxC,kBAAkB9Y,IQ0FtD,KAAM,ERhKvCwa,KAAA,EAAAjhB,EAAA2jB,oBAAA,UAwEgB,EAAA3jB,EAAAyiB,oBAEM,MAFNvB,GAEM,EAAAlhB,EAAA6iB,iBADDd,EAAA9C,cAAcxY,IAAO,IQ2FjB,KRpKzB,EAAAzG,EAAA2jB,oBAAA,YAAA8B,EAAA,GQyKe,EAAG,CAAC,OAAQ,aACfzD,EAAO,KAAOA,EAAO,IR3FzB,EAAAhiB,EAAAyiB,oBAAM,qBQ4FF,EAAAziB,EAAA8iB,iBR3FJ,EAAA9iB,EAAAyiB,oBACsC,YAD5B/C,MAAM,uBAhFxB,sBAAAsC,EAAA,KAAAA,EAAA,GAAAW,GAgFwDZ,EAAAjK,oBAAmB6K,GAAEkE,KAAK,KAAKR,UAAU,MACtFriB,SAAMge,EAAA,KAAAA,EAAA,GQiGjB,IAAIgB,IRjGejB,EAAAxD,gBAAAwD,EAAAxD,kBAAAyE,KQkGJ,KAAM,KAAM,CACb,CAAChjB,EAAAujB,WRpGyCxB,EAAAjK,yBQuG9CkK,EAAO,KAAOA,EAAO,IRvL/B,EAAAhiB,EAAA4lB,mBAAA,snCQ0La,EAAA5lB,EAAAuiB,cRzDT,EAAAviB,EAAAwiB,oBAGM,MAHNrB,EAGM,EAFJ,EAAAnhB,EAAA4jB,aACqC4C,EAAA,CADtBvb,KAAM8W,EAAA9W,KAAO2S,aAAcmE,EAAAnE,aAAe1S,iBAAkB6W,EAAA7W,iBACxEC,eAAgB4W,EAAA5W,gBQ6DR,KAAM,EAAG,CAAC,OAAQ,eAAgB,mBAAoB,0BRhMvE,EAAAnL,EAAA2jB,oBAAA,MQqMA,CAhKAxjB,EAAAA,EAAA2hB,C,23CCrCA,MAAApiB,SAAAC,gBAAAC,oBAAA,OACAC,SAAAD,oBAAA,MACAE,QAAAF,oBAAA,MA+CAG,SAAAH,oBAAA,MAoCA,SAASknB,6BACL3mB,QAAA4mB,iBAAiB5f,SAAS6f,IACtB,MAAMC,EAAWD,EAAY/jB,QAAQ,QAAS,IAC9CxC,OAAO8F,KAAKxG,SAAAmnB,2BAA2B/f,SAASV,IAC5C,MAAM0gB,EAAkBpnB,SAAAmnB,0BAAkCzgB,GACpD6F,EAAU7L,OAAO8F,KAAK4gB,GACxB7a,EAAQvI,SAASkjB,IACb,OAAQE,EAAeF,IACvB9mB,QAAAinB,yBAAyBC,IAAIL,EAAaG,EAAeF,GAAU5gB,G,GAG7E,GAEV,CAIA,SAAgBihB,YAAYC,EAAmB9K,GAC3C,OAAOA,EAAQ3c,QAAA0nB,cAAcD,GAAW,IAAM9K,EAAQ,IAAM,EAChE,CAGA,SAAgBgL,oBAAoBC,EAAcH,EAAmB9K,GACjE,IAAKiL,EAAS,OAAO,EACrB,MAAMC,EAAaL,YAAYC,EAAW9K,GAC1C,GAAIkL,KAAcD,EACd,OAAOA,EAAQC,GAEnB,MAAMC,EAAW9nB,QAAA0nB,cAAcD,GAAW,GACpCM,EAAY/nB,QAAA0nB,cAAcD,GAAWznB,QAAA0nB,cAAcD,GAAWzhB,OAAS,GACvEgiB,EAAWJ,EAAQE,EAAW,KAC9BG,EAAYL,EAAQG,GAC1B,OAAOC,GAAYC,EAAYD,IAAarL,EAAQmL,IAAaC,EAAYD,EACjF,CAGA,SAAgBI,wBAAwBN,EAAcH,GAClD,MAAMK,EAAW9nB,QAAA0nB,cAAcD,GAAW,GAC1C,OAAOG,EAAQE,EAAW,IAC9B,CAEA,SAAgBK,gBAAgBxL,EAAwByL,GACpD,GAAIzL,KAASyL,EAAU,OAAOA,EAASzL,GACvCA,EAAQ7b,OAAO6b,GACf,MAAM0L,EAAW1nB,OAAO8F,KAAK2hB,GAAUnlB,KAAIC,GAAKpC,OAAOoC,KACvD,IAAI4kB,EACAC,EACJ,IAAK,IAAI5a,EAAI,EAAGA,EAAIkb,EAASriB,OAAS,EAAGmH,IACjCkb,EAASlb,IAAMwP,GAAS0L,EAASlb,EAAI,IAAMwP,IAC3CmL,EAAWO,EAASlb,GACpB4a,EAAYM,EAASlb,EAAI,IAGjC,OAAK2a,GAAaC,EACXK,EAASN,IAAaM,EAASL,GAAaK,EAASN,KAAcnL,EAAQmL,IAAaC,EAAYD,GADvE,CAExC,CAGA,SAAgBQ,2BAA2BC,EAAwBC,GAC9D7nB,OAAO8F,KAAK8hB,GAA0DlhB,SAClE3B,IACG6iB,EAAkB7iB,GAAO,CAAC,IAGlC,IAAK,MAAM+iB,KAAkBD,EAAW,CACpC,IAAKC,EAAgB,SACrB,MAAM7kB,EAAc6kB,EAAe9e,MAAM,KACzC4e,EAAkB3kB,EAAK,KAAO3D,SAAAyoB,qBAAqB9kB,EAAK,IAA2BA,EAAK,G,CAEhG,CAGA,SAAgB+kB,mCACZC,EACAJ,EACAK,EACAC,EACAC,EACAC,GAECroB,OAAO8F,KAAKmiB,GAAwDvhB,SAAS3B,IAC1EkjB,EAAiBljB,GAAO,CAAC,IAE7B,IAAIujB,EAAa,EACjB,IAAK,IAAI9b,EAAI,EAAGA,EAAI0b,EAAiB7iB,OAAQmH,IACpC0b,EAAiB1b,UACapI,IAA/B+jB,EAAwB3b,IAAoB2b,EAAwB3b,GAAK,GACxE6b,EAAsB7b,KAC3Byb,EAAiBC,EAAiB1b,KAA4B4b,EAAuB5b,GAAG2b,EAAwB3b,IAAM6b,EAAsB7b,GAC5I8b,GAAcD,EAAsB7b,KAKxC,MAAM+b,EAAuBlpB,QAAA0D,aAAa0D,QAAOlE,IAAM2lB,EAAiB5kB,SAASf,KACjF,IAAIimB,EAAkB/e,KAAKgE,IAAI,GAAI,GAAKhE,KAAKgf,MAAMhf,KAAK6D,IAAI,GAAIgb,EAAa,IAAM,KACnFE,GAAmB/e,KAAKgE,IAAI,GAAI6a,GAChC,IAAK,IAAI9b,EAAIgc,EAAiBhc,EAAI,EAAGA,IAAK,CACtC,MAAMkc,EAAUH,EAAqB/b,EAAI+b,EAAqBljB,QAC9D4iB,EAAiBS,IAAYppB,SAAAqpB,oBAAoBD,GAAS,E,CAE9D,MAAME,EAAaf,EAAUphB,QAAOlE,GAAKA,GAAKA,EAAEsH,WAAW,OAAMxE,OAC3DwjB,EAAa,EAAK,IAAOD,EAC9B5oB,OAAO8F,KAAKmiB,GAAwDvhB,SAChE3B,IACGkjB,EAAiBljB,IAAQ8jB,EACzBZ,EAAiBljB,GAAO0E,KAAKE,MAA8B,GAAxBse,EAAiBljB,IAAa,EAAE,GAG/E,CAEA,SAAgB+jB,uBAAuBC,GACnC,MAAMC,EAAgBD,EAAoBE,SACpCrB,EAAoBmB,EAAoBG,cACxCjB,EAAmBc,EAAoBI,aAC7C,IAAK,MAAMlmB,KAAQjD,OAAO8F,KAAKkjB,GAC1BA,EAAsB/lB,GAAQ,EAEnC,IAAK,MAAMA,KAAQjD,OAAO8F,KAAK8hB,GACvB3kB,KAAQ+lB,EAAgBA,EAAsB/lB,IAAU2kB,EAA0B3kB,GAChF+lB,EAAsB/lB,GAAS2kB,EAA0B3kB,GAEnE,IAAK,MAAMA,KAAQjD,OAAO8F,KAAKmiB,GACvBhlB,KAAQ+lB,EAAgBA,EAAsB/lB,IAAUglB,EAAyBhlB,GAC/E+lB,EAAsB/lB,GAASglB,EAAyBhlB,EAEtE,CAEA,SAASmmB,mBACLC,EACApU,EACAqG,GAEA,MAAMgO,EAAa,IAAIC,IACjB5gB,EAAK,eACX,IAAIE,EACJ,MAAsC,QAA9BA,EAAQF,EAAGG,KAAKugB,IAAoB,CACxC,MAAMtkB,EAAM8D,EAAM,GAClB,IAAKygB,EAAWE,IAAIzkB,GAAM,CACtB,IAAI5B,EACJ,GAAI4B,EAAIzB,SAAS,KAAM,CACnB,MAAMmmB,EAAM1kB,EAAIiE,MAAM,KACtB,GAAmB,IAAfygB,EAAIpkB,OAAc,CAClB,MAAMqkB,EAAQD,EAAI,GACZE,EAAQF,EAAI,GAClB,GAAIC,KAASpO,EAAc,CACvB,MAAMsO,EAAYtO,EAAaoO,GAAgCjjB,QAAOlE,GAAKA,EAAE,IAAMonB,IAC/EC,EAASvkB,SACTlC,EAAQ9C,OAAOupB,EAAS,GAAG,I,OAIzBxlB,IAAVjB,IACAoZ,QAAQsN,KAAKR,EAAS/N,EAAcvW,GACpC5B,EAAQ,I,MAGZA,EAAQ9C,QAAO,EAAAhB,QAAAyqB,cAAa/kB,EAAKkQ,SAEvB7Q,IAAVjB,GACAmmB,EAAW1C,IAAI7hB,EAAK5B,E,EAIhC,IAAIiC,EAASikB,EAIb,OAHAC,EAAW5iB,SAAQ,CAACvD,EAAO4B,KACvBK,EAASA,EAAO2kB,WAAW,KAAOhlB,EAAM,IAAK5B,EAAM,IAEhDiC,CACX,CAEA,SAAgBiW,YACZgO,QACApU,SACAqG,aACA0O,QAAkC,KAClCC,QAAkC,MAElC,IAAI7kB,OAAS,EACT8kB,OACJ,GAAKb,QAEE,GAAIpqB,SAAA2B,QAAEkb,SAASuN,SAClBjkB,OAASikB,YACN,CACHa,OAASd,mBAAmBC,QAASpU,SAAUqG,cAC/C,IACIlW,OAAS+kB,KAAKD,O,CAChB,MAAOE,OACL7N,QAAQ6N,MAAMA,OACd7N,QAAQ6N,MAAMf,QAASpU,SAAUqG,aAAc4O,O,OAGvD,GAAgB,OAAZF,QAAkB,CAClB,MAAM1c,EAAM+N,YAAY2O,QAAS/U,SAAUqG,cAC3ClW,OAASqE,KAAKgE,IAAIrI,OAAQkI,E,CAE9B,GAAgB,OAAZ2c,QAAkB,CAClB,MAAMxc,EAAM4N,YAAY4O,QAAShV,SAAUqG,cAC3ClW,OAASqE,KAAK6D,IAAIlI,OAAQqI,E,CAG9B,OADA8O,QAAQ8N,MAAMhB,QAASW,QAASC,QAASC,OAAQ9kB,QAC1CA,MACX,CAtNa1F,QAAAA,iBAAmB,CAC5B,UACA,SACA,UACA,SACA,SACA,SACA,UACA,WAESA,QAAAA,yBAA2B,IAAI6pB,IAe5ClD,6BAGA3mB,QAAAA,YAAAmnB,YAKAnnB,QAAAA,oBAAAsnB,oBAcAtnB,QAAAA,wBAAA6nB,wBAKA7nB,QAAAA,gBAAA8nB,gBAiBA9nB,QAAAA,2BAAAioB,2BAcAjoB,QAAAA,mCAAAsoB,mCAuCAtoB,QAAAA,uBAAAopB,uBA4DAppB,QAAAA,YAAA2b,YAmCO,MAAMiP,eAAiB,SAC1B5P,EACA1O,EACA+c,EACAwB,EACAC,GAEA,GAAKxe,GAAmB+c,GAAwBwB,GAAmBC,EACnE,IACI,MAAM9Y,EAAkB1F,EAAe0F,gBACjCoV,EAAY9a,EAAeye,MAC3BzO,EAAQhQ,EAAe0e,IACvB1d,EAAgBhB,EAAeC,KAC/B6H,EAAe9H,EAAe8H,aAC9B6W,EAAkB3e,EAAe4e,QACjCC,EAAc7e,EAAe8e,MAE7BC,EAAe9rB,SAAA2B,QAAES,UAAUhC,QAAA2rB,eAWjC,GATAD,EAAa,SAAWjE,EACxBiE,EAAa,OAAS/O,EACtB+O,EAAa,QAAU/d,EACtB+d,EAAqB,MAAQrZ,EAAgB9L,GAG1C,YAAa8L,EAAgB,UAC7BqZ,EAAa,WAAa5qB,OAAOuR,EAAgB,QAAQ,aAEzD,SAAUoC,EACV,IAAK,MAAMlU,KAAQI,OAAO8F,KAAKgO,EAAa,SACpClU,KAAQ2qB,EAAeU,gBACvBF,EAAanrB,GAAQO,OAAOoqB,EAAeU,gBAAgBrrB,IAE3DmrB,EAAanrB,GAAQkU,EAAa,QAAQlU,GAItD,GAAI,SAAU8R,EACV,IAAK,MAAM9R,KAAQI,OAAO8F,KAAK4L,EAAgB,SACvC9R,KAAQ2qB,EAAeU,gBACvBF,EAAanrB,GAAQO,OAAOoqB,EAAeU,gBAAgBrrB,IAE3DmrB,EAAanrB,GAAQ8R,EAAgB,QAAQ9R,GAMzD,IAAK,MAAMqD,KAAQjD,OAAO8F,KAAK4U,EAAWwQ,aAAazkB,QAAOlE,GAAU,OAALA,IAAa,CAC5E,MAAMkZ,EAAS,IAAMxY,EACrB8nB,EAAatP,GAAUf,EAAWwQ,YAAYjoB,E,CAIlDjD,OAAO8F,KAAK4U,EAAWyQ,iBAAiB1kB,QAAOlE,IAAMlD,QAAA+rB,iBAAiB9nB,SAASf,KAAImE,SAAQzD,IACnFA,KAAQ8nB,IAAcA,EAAa9nB,IAASyX,EAAWyQ,gBAAgBloB,GAAK,IAEpFjD,OAAO8F,KAAK4U,EAAW2Q,mBAAmB5kB,QAAOlE,IAAMlD,QAAA+rB,iBAAiB9nB,SAASf,KAAImE,SAAQzD,IACrFA,KAAQ8nB,IAAcA,EAAa9nB,IAASyX,EAAW2Q,kBAAkBpoB,GAAK,IAItF,IAAK,MAAMA,KAAQjD,OAAO8F,KAAK4L,EAAgB,UAC3C,GAAIrS,QAAAisB,aAAahoB,SAASL,GACtB8nB,EAAa9nB,IAAS+jB,oBAAoBtV,EAAgB,SAASzO,GAAO6jB,EAAW9K,OAClF,CACH,MAAMP,EAAS,CAAC,KAAM,MAAO,OAAOnY,SAASL,GAAQA,EAAO,IAAMA,EAC9DwY,KAAUsP,IACVA,EAAatP,IAAW8L,wBAAwB7V,EAAgB,SAASzO,GAAO6jB,G,CAM5F,GAAIhT,EAAa,SACb,IAAK,MAAM7Q,KAAQjD,OAAO8F,KAAKgO,EAAa,UACxCiX,EAAa9nB,IAAS+jB,oBAAoBlT,EAAa,SAAS7Q,GAAO0nB,EAAiBE,GAKhG,MAAM7B,EAAgBD,EAAoBE,SAC1C,IAAK,MAAMhmB,KAAQjD,OAAO8F,KAAKkjB,GAAgB,CAC3C,MAAMvN,EAAS,CAAC,KAAM,MAAO,OAAOnY,SAASL,GAAQA,EAAO,IAAMA,EAClE8nB,EAAatP,IAAYuN,EAAsB/lB,E,CAGnD,IAAIsoB,EAAmC,MAAtB7Z,EAAgB3K,GAAa2K,EAAgB9L,GAAK,KAC/D4lB,EAAiC,MAAtB9Z,EAAgB3K,GAAa2K,EAAgB9L,GAAK,KAC7D6lB,EAAmC,MAAtB/Z,EAAgB3K,GAAa2K,EAAgB9L,GAAK,KAE/D4kB,GAEA,CAACA,EAAYpV,mBAAoBoV,EAAYkB,WAAYlB,EAAYmB,YAAYjlB,SAAQklB,IACjFA,GAAaA,EAAUC,sBACvB7rB,OAAO8F,KAAK8lB,EAAUC,sBAAsBnlB,SAAQzD,IAChD,MAAM6oB,EAAYF,EAAUC,qBAAqB5oB,GACjD,GAAIA,EAAKiG,SAAS,SACd,GAAI,CAAC,MAAO,MAAO,QAAQ5F,SAASoO,EAAgB3K,IAAK,CACrD,MAAMglB,EAAS9oB,EAAKT,QAAQ,QAAS,IACrC+oB,EAAaQ,EACbP,EAAWO,EACXN,EAAaM,C,OAEd,GAAkB,OAAdD,IACH7oB,KAAQ8nB,EACRA,EAAa9nB,IAAS6oB,EAEtBf,EAAa9nB,GAAQ6oB,EAErB7oB,EAAKiG,SAAS,OAASjG,EAAKiG,SAAS,OAASjG,EAAKiG,SAAS,OAAO,CACnE,MAAMuS,EAASxY,EAAKT,QAAQ,UAAW,IACnCiZ,KAAUsP,EACVA,EAAatP,IAAWqQ,EAExBf,EAAatP,GAAUqQ,C,QASnD,MAAME,EAAyBC,2BAA2B1B,GAG1D,IAAK,MAAM2B,IAAkB,CAAClgB,EAAemgB,wBAAyBngB,EAAeogB,qBAAsBpgB,EAAeqgB,4BACtH,GAAIH,GAAkB7sB,QAAAitB,sBAAsBJ,EACxC,IAAK,MAAMK,KAAeL,EAAe7sB,QAAAitB,oBAAqB,CAC1D,GAAIC,EAAY,MAAO,CACnB,MAAMC,EAASC,sBAAsBF,EAAY,MAAOP,EAAwBhf,GAChF,GAAe,IAAXwf,EAAc,Q,CAEI,SAAtBD,EAAY,OAAoBA,EAAY,OAA+B,OAAtBA,EAAY,QACjExB,EAAawB,EAAY,OAASlR,YAAYkR,EAAY,MAAOxB,EAAc1rB,QAAAqtB,wB,CAO/FC,kBAAkB5B,EAAcP,GAEhCnrB,QAAA+rB,iBAAiB1kB,SAAQzD,IACjBA,KAAQyX,EAAWyQ,iBACfloB,KAAQ8nB,IACRA,EAAa9nB,IAASyX,EAAWyQ,gBAAgBloB,G,IAM7D,MAAM4oB,EAAuBe,yBAAyB5gB,EAAgBggB,EAAwBjB,GAG9F,IAAK,MAAMmB,IAAkB,CAAClgB,EAAemgB,wBAAyBngB,EAAeogB,qBAAsBpgB,EAAeqgB,4BACtH,GAAIH,GAAkB7sB,QAAAitB,sBAAsBJ,EACxC,IAAK,MAAMK,KAAeL,EAAe7sB,QAAAitB,oBAAqB,CAC1D,GAAIC,EAAY,MAAO,CACnB,MAAMC,EAASC,sBAAsBF,EAAY,MAAOP,EAAwBhf,EAAe+d,EAAcR,EAAeU,iBAC5H,GAAe,IAAXuB,EAAc,Q,CAEtB,GAAID,EAAY,OAASA,EAAY,MAAMrjB,SAAS,QAAS,CACzD,MAAM2jB,EAAON,EAAY,MAAM/pB,QAAQ,OAAQ,IAC1C+pB,EAAY,MAIe,YAArBA,EAAY,MACnBhB,EAAasB,EACe,UAArBN,EAAY,MACnBf,EAAWqB,EACiB,YAArBN,EAAY,QACnBd,EAAaoB,IARbtB,EAAasB,EACbrB,EAAWqB,EACXpB,EAAaoB,E,EAYjCtC,EAAeuC,KAAO,CAACvB,EAAYC,EAAUC,IAE7C,EAAArsB,SAAAoF,iBAAgBkW,EAAWzF,SAAU8V,IACrC,EAAA3rB,SAAAoF,iBAAgB+lB,EAAesB,qBAAsBA,E,CACvD,MAAOzB,GACL7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAM1P,EAAY1O,EAAgB+c,EAAqBwB,EAAgBC,E,CAGvF,EAEA,SAASoC,yBACL5gB,EACAggB,EACAjB,GAEA,MAAM/d,EAAgBhB,EAAeC,KAC/B8gB,EAA2B,CAAC,EAC5BC,EAAqC,IAAIzD,IAE/C,IAAK,MAAM2C,IAAkB,CAAClgB,EAAemgB,wBAAyBngB,EAAeogB,qBAAsBpgB,EAAeqgB,4BACtH,GAAIH,GAAkB7sB,QAAA4tB,sBAAsBf,EACxC,IAAK,MAAMK,KAAeL,EAAe7sB,QAAA4tB,oBAAqB,CAC1D,IAAIC,GAAe,EACfC,EAAOZ,EAAY,MACvB,GAAa,OAATY,EACA,SAEJ,GAAIZ,EAAY,MAAO,CACnB,MAAMC,EAASC,sBAAsBF,EAAYrR,GAAI8Q,EAAwBhf,EAAe+d,GAC5F,GAAIoC,EAAK7pB,SAAS,YACd6pB,EAAOA,EAAKpD,WAAW,WAAY1pB,OAAOmsB,QACvC,IAAe,IAAXA,EACP,SAEAW,EAAO,IAAMA,EAAO,KAAOX,C,CAE/BU,GAAe,C,CAEnB,IAAIE,EAAOb,EAAY,MACnBa,IACIb,EAAY,QACZa,GAAQ,IAAMb,EAAY,QAEF,IAAxBY,EAAKlmB,QAAQ,QAAuC,IAAvBkmB,EAAKlmB,QAAQ,KAC1ComB,6BAA6BN,EAA0BhC,EAAcqC,EAAMD,EAAMZ,EAAYhR,GAAIgR,EAAY/Q,GAAI0R,IAE5GF,EAAexD,IAAI4D,IACpBJ,EAAepG,IAAIwG,EAAM,IAE7BJ,EAAeM,IAAIF,IAAO9nB,KAAK,CAAC8nB,EAAMD,EAAMZ,EAAYhR,GAAIgR,EAAY/Q,GAAI0R,K,CAOhGnC,EAAa,SAAWA,EAAa,QAAUA,EAAa,OAC5DA,EAAa,SAAYA,EAAa,QAAUA,EAAa,OAAU,IACvEA,EAAa,QAAUA,EAAa,SAAWA,EAAa,QAC5DA,EAAa,QAAWA,EAAa,SAAWA,EAAa,QAAW,IACxEA,EAAa,QAAUA,EAAa,SAAWA,EAAa,QAC5DA,EAAa,QAAWA,EAAa,SAAWA,EAAa,QAAW,IAExE,MAAMwC,EAAetuB,SAAA2B,QAAES,UAAU0pB,GAE3ByC,EAAY,CAAC,OAAQ,MAAO,MAAO,QACnCC,EAAa,CAAC,QAAS,OAAQ,OAAQ,OACvCC,EAAa,CAAC,QAAS,OAAQ,OAAQ,OACvCC,EAAe,IAAItuB,QAAAuuB,kBAAmB,eAAgBvuB,QAAAwuB,gBAAiB,WAAYxuB,QAAAyuB,eAAgBzuB,QAAA0uB,iBAAkB1uB,QAAA2uB,YAAa,UACxIL,EAAaroB,QAAQpD,MAAMC,KAAK6qB,EAAelnB,QAAQW,QAAOlE,IAAwB,GAAnBA,EAAE0E,QAAQ,QAE7E,MAAMgnB,EAAiB,IAAI,IAAI7rB,IAAIF,MAAMC,KAAK6qB,EAAelnB,QAAQxD,KAAIC,GAAKA,EAAEC,QAAQ,UAAW,QAAOiE,QAAOlE,IAAM,IAAIirB,KAAcC,KAAeC,KAAeC,GAAcrqB,SAASf,KAC9L0rB,EAAexb,KAAKyb,iBAGpB,IAAK,MAAMjrB,KAAQuqB,EAAW,CAC1B,MAAMW,EAAsB,CAAC,EAC7B,CAAC,KAAM,KAAM,MAAMznB,SAAQ0C,IACvB,MAAMglB,EAAWnrB,EAAOmG,EAEpB+kB,EAAYC,GADZA,KAAYrD,EACYA,EAAaqD,GAEb,C,IAGhCC,4BAA4BtB,EAA0BhC,EAAciC,EAAgB/pB,GACpF,CAAC,KAAM,KAAM,MAAMyD,SAAQ0C,IACvB,MAAMklB,EAAWrrB,EAAOmG,EACpB2hB,EAAauD,KACTrrB,KAAQ8nB,EACRA,EAAa9nB,IAAS8nB,EAAauD,GAAYH,EAAYG,GAE3DvD,EAAa9nB,GAAQ8nB,EAAauD,GAAYH,EAAYG,G,IAKtEvD,EAAa,QAAUwC,EAAa,SACpCxC,EAAa,SAAWA,EAAa,OAASwC,EAAa,QAE3DxC,EAAa,QAAUwC,EAAa,SACpCxC,EAAa,SAAWA,EAAa,SAAWA,EAAa,OAASwC,EAAa,QAAU,KAGjG,IAAK,MAAMtqB,KAAQgrB,EAAgB,CAC/B,MAAME,EAAsB,CAAC,EAC7B,CAAC,KAAM,KAAM,MAAMznB,SAAQ0C,IACvB,MAAMglB,EAAWnrB,EAAOmG,EAEpB+kB,EAAYC,GADZA,KAAYrD,EACYA,EAAaqD,GAEb,C,IAGhCC,4BAA4BtB,EAA0BhC,EAAciC,EAAgB/pB,GACpF,CAAC,KAAM,KAAM,MAAMyD,SAAQ0C,IACvB,MAAMklB,EAAWrrB,EAAOmG,EACpB2hB,EAAauD,KACTrrB,KAAQ8nB,EACRA,EAAa9nB,IAAS8nB,EAAauD,GAAYH,EAAYG,GAE3DvD,EAAa9nB,GAAQ8nB,EAAauD,GAAYH,EAAYG,G,IAO1E,IAAK,MAAMrrB,KAAQwqB,EAAY,CAC3B,MAAMU,EAAsB,CAAC,EAC7B,CAAC,KAAM,KAAM,MAAMznB,SAAQ0C,IACvB,MAAMglB,EAAWnrB,EAAOmG,EAEpB+kB,EAAYC,GADZA,KAAYrD,EACYA,EAAaqD,GAEb,C,IAGhCC,4BAA4BtB,EAA0BhC,EAAciC,EAAgB/pB,GACpF,CAAC,KAAM,KAAM,MAAMyD,SAAQ0C,IACvB,MAAMklB,EAAWrrB,EAAOmG,EACpB2hB,EAAauD,KACTrrB,KAAQ8nB,EACRA,EAAa9nB,IAAS8nB,EAAauD,GAAYH,EAAYG,GAE3DvD,EAAa9nB,GAAQ8nB,EAAauD,GAAYH,EAAYG,G,IAKtEvD,EAAa,SAAWwC,EAAa,UACrCxC,EAAa,QAAUA,EAAa,QAAUwC,EAAa,SAE3DxC,EAAa,SAAWwC,EAAa,UACrCxC,EAAa,QAAUA,EAAa,UAAYA,EAAa,QAAUwC,EAAa,SAAW,KAInG,IAAK,MAAMtqB,KAAQyqB,EAAY,CAC3B,MAAMS,EAAsB,CAAC,EAC7B,CAAC,KAAM,KAAM,MAAMznB,SAAQ0C,IACvB,MAAMglB,EAAWnrB,EAAOmG,EAEpB+kB,EAAYC,GADZA,KAAYrD,EACYA,EAAaqD,GAEb,C,IAGhCC,4BAA4BtB,EAA0BhC,EAAciC,EAAgB/pB,GACpF,CAAC,KAAM,KAAM,MAAMyD,SAAQ0C,IACvB,MAAMklB,EAAWrrB,EAAOmG,EACpB2hB,EAAauD,KACTrrB,KAAQ8nB,EACRA,EAAa9nB,IAAS8nB,EAAauD,GAAYH,EAAYG,GAE3DvD,EAAa9nB,GAAQ8nB,EAAauD,GAAYH,EAAYG,G,IAKtEvD,EAAa,SAAWwC,EAAa,UACrCxC,EAAa,QAAUA,EAAa,QAAUwC,EAAa,SAE3DxC,EAAa,SAAWwC,EAAa,UACrCxC,EAAa,QAAUA,EAAa,UAAYA,EAAa,QAAUwC,EAAa,SAAW,KAInG,IAAK,MAAMtqB,KAAQ0qB,EAAc,CAC7B,MAAMQ,EAAsB,CAAC,EAC7B,CAAC,KAAM,KAAM,MAAMznB,SAAQ0C,IACvB,MAAMglB,EAAWnrB,EAAOmG,EAEpB+kB,EAAYC,GADZA,KAAYrD,EACYA,EAAaqD,GAEb,C,IAGhCC,4BAA4BtB,EAA0BhC,EAAciC,EAAgB/pB,GACpF,CAAC,KAAM,KAAM,MAAMyD,SAAQ0C,IACvB,MAAMklB,EAAWrrB,EAAOmG,EACpB2hB,EAAauD,KACTrrB,KAAQ8nB,EACRA,EAAa9nB,IAAS8nB,EAAauD,GAAYH,EAAYG,GAE3DvD,EAAa9nB,GAAQ8nB,EAAauD,GAAYH,EAAYG,G,IAM1E,OAAOvB,CACX,CAEA,SAASsB,4BACLtB,EACAhC,EACAiC,EACAuB,GAEA,IAAK,MAAMC,IAAc,CAACxB,EAAeM,IAAIiB,MAAgB,CAAC,KAAM,KAAM,MAAMjsB,KAAIC,GAAKyqB,EAAeM,IAAIiB,EAAahsB,MAChHisB,GACLA,EAAW9nB,SAAQ2iB,IACf,MAAMoF,EAAYC,YAAY3D,EAAc1B,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,IACxF,IAAK,MAAMpmB,KAAQjD,OAAO8F,KAAK2oB,GAC3B,GAAIpvB,QAAA+rB,iBAAiB9nB,SAASL,EAAO,OAAQ,CACzC,MAAM4S,GAAY,EAAAxW,QAAAyqB,cAAa7mB,EAAO,KAAM8nB,GACtC4D,EAAW5D,EAAa9nB,EAAO,YACnBmB,IAAdyR,QAAwCzR,IAAbuqB,GACvB9Y,EAAY8Y,IACZ5D,EAAa9nB,EAAO,OAAS4S,E,CAK7C,GAAIwT,EAAQ,GACR,IAAK,MAAMpmB,KAAQjD,OAAO8F,KAAK2oB,GACvBxrB,KAAQ8pB,EACRA,EAAyB9pB,IAASwrB,EAAUxrB,GAE5C8pB,EAAyB9pB,GAAQwrB,EAAUxrB,E,GAMnE,CAEA,SAASoqB,6BACLN,EACAhC,EACA6D,EACAvF,EACAwF,EACAC,EACA5B,GAAe,GAEf,MAAMuB,EAAYC,YAAY3D,EAAc6D,EAAMvF,EAASwF,EAAYC,GACvE,IAAK,MAAM7rB,KAAQjD,OAAO8F,KAAK2oB,GAC3B,GAAIpvB,QAAA+rB,iBAAiB9nB,SAASL,EAAO,OAAQ,CACzC,MAAM4S,GAAY,EAAAxW,QAAAyqB,cAAa7mB,EAAO,KAAM8nB,GACtC4D,EAAW5D,EAAa9nB,EAAO,YACnBmB,IAAdyR,QAAwCzR,IAAbuqB,GACvB9Y,EAAY8Y,IACZ5D,EAAa9nB,EAAO,OAAS4S,E,CAK7C,GAAIqX,EACA,IAAK,MAAMjqB,KAAQjD,OAAO8F,KAAK2oB,GACvBxrB,KAAQ8pB,EACRA,EAAyB9pB,IAASwrB,EAAUxrB,GAE5C8pB,EAAyB9pB,GAAQwrB,EAAUxrB,EAI3D,CAEA,SAASirB,gBAAgBa,EAAWC,GAChC,MAAMvF,EAAM,CAAC,OAAQ,MAAO,SAAU,UAAW,UAAW,WAAY,UAClEwF,EAAY,CAAC,UACnB,IAAIC,EAASzF,EAAIxiB,QAAQ8nB,GACrBE,EAAUhoB,QAAQ8nB,IAAM,IACxBG,EAASzF,EAAIpkB,OAAS,GAE1B,IAAI8pB,EAAS1F,EAAIxiB,QAAQ+nB,GAIzB,OAHIC,EAAUhoB,QAAQ+nB,IAAM,IACxBG,EAAS1F,EAAIpkB,OAAS,KAEP,GAAX6pB,EAAeA,EAASzF,EAAIpkB,UAAsB,GAAX8pB,EAAeA,EAAS1F,EAAIpkB,OAC/E,CAEA,SAAgB+pB,4BACZnE,EACAV,GAEA,MAAMnlB,EAAiB,CAAC,EAClB4mB,EAAyBC,2BAA2B1B,GAC1D,IAAK,MAAMxlB,KAAO/E,OAAO8F,KAAKxG,SAAA+vB,4BAA6B,CACvD,IAAKpE,EAAgBlmB,GAAM,SAC3B,MAAMhB,EAAUzE,SAAA+vB,2BAAmCtqB,GACnD,GAAIhB,EAAO8X,GACP,IAAK,MAAMb,KAAajX,EAAO8X,GAAI,CAC/B,GAAIb,EAAUE,GAAI,CACd,MAAMoU,EAAW7C,sBAAsBzR,EAAUE,GAAI8Q,EAAwB,GAC7E,GAAiB,IAAbsD,EAAgB,Q,CAEpBtU,EAAUI,IAAMJ,EAAUG,KACtBH,EAAUI,MAAMhW,EAChBA,EAAO4V,EAAUI,KAAOJ,EAAUG,GAElC/V,EAAO4V,EAAUI,IAAMJ,EAAUG,G,CAKtC,SAAPpW,GAAkBkmB,EAAgBsE,eAClCnqB,EAAO,SAAWjF,OAAO8qB,EAAgBsE,c,CAGjD,OAAOnqB,CACX,CA2GA,SAAgBoqB,sBACZlU,EACAtP,EACAue,EACA7P,GAEA,IACI,IAAK1O,EAAgB,OACrB,IAAKue,EAAgB,OACrB,IAAK7P,EAAY,OACjB,MAAMhJ,EAAkB1F,EAAe0F,gBACjC1E,EAAgBhB,EAAe,QAC/ByjB,EAAS/d,EAAgB,MAGzBge,EAAiBzwB,SAAA2B,QAAES,UAAUhC,QAAAswB,cAC7BC,EAAoB,GACpBC,EAAgB,IAAIztB,IAE1B,GADAytB,EAAcC,IAAIL,GACdlF,EAAewF,WAAWtpB,QAAOlE,GAAe,QAAVA,EAAE3C,OAAgByF,OAAQ,CAChE,MAAM2qB,EAAczF,EAAewF,WAAWtpB,QAAOlE,GAAe,QAAVA,EAAE3C,OAAgB,GACtEqwB,EAAgB1F,EAAeU,gBAAgB,QACrD,GAAIgF,EAAe,CACf,MAAMC,EAAaF,EAAYG,QAAQF,GAAeztB,QAAQ,MAAO,IACrEqtB,EAAcC,IAAII,E,EAG1B,GAAI3F,EAAewF,WAAWtpB,QAAOlE,GAAe,MAAVA,EAAE3C,OAAcyF,OAAQ,CAC9D,MAAM2qB,EAAczF,EAAewF,WAAWtpB,QAAOlE,GAAe,MAAVA,EAAE3C,OAAc,GACpEqwB,EAAgB1F,EAAeU,gBAAgB,MACrD,GAAIgF,EAAe,CACf,MAAMC,EAAaF,EAAYG,QAAQF,GAAeztB,QAAQ,MAAO,IACrEqtB,EAAcC,IAAII,E,EAG1B,IAAK,MAAMA,KAAc3F,EAAeuC,KAChCoD,GAA4B,MAAdA,GACdL,EAAcC,IAAII,GAG1B,GAAgC,QAA5BlkB,EAAexG,UACf,IAAK,MAAM0qB,IAAc,CAAC,IAAK,IAAK,IAAK,KAAM,CAC3C,MAAMnrB,EAAM,QAAUmrB,EAAa,WACnC,GAAI3F,EAAewF,WAAWtpB,QAAOlE,GAAKA,EAAE3C,MAAQmF,IAAKM,OAAQ,CAC7D,MAAM4qB,EAAgB1F,EAAeU,gBAAgBlmB,GACjDkrB,GACAJ,EAAcC,IAAII,E,EAKlC,IAAK,MAAMA,KAAcL,EACrBD,EAAkBtqB,KAAK,CAAC4qB,EAAa5wB,SAAAmnB,0BAAkCyJ,KAE3E,IAAIE,GAAS,EACb,GAA0B,KAAtB1e,EAAgB9L,IAAmC,OAAtB8L,EAAgB3K,GAC7CqpB,GAAS,MACN,CACH,MAAMC,EAAgB/wB,SAAAmnB,0BAAkC6J,IAAIC,KAAKC,OAC7DH,GAAgBA,EAAa/sB,SAASoO,EAAgB+B,MACtD2c,GAAS,E,CAGjB,GAAIA,EAAQ,CACR,MAAMF,EAAa,KACnBN,EAAkBtqB,KAAK,CAAC4qB,EAAa5wB,SAAAmnB,0BAAkCyJ,I,CAE3ER,EAAe,MAAQD,EACvBG,EAAkBlpB,SAAQG,IACtB,MAAMb,EAAUa,EAAM,GAChB6f,EAAiB7f,EAAM,GAC7B7G,OAAO8F,KAAK4gB,GAAgBhgB,SAAQ8f,IAChC,MAAMiK,EAAc/J,EAAeF,GACnC,IAAIkK,EAAc,EAClB,GAAgB,MAAZlK,EACAkK,EAAcC,mBAAmB3qB,EAAS0U,EAAWzF,eAClD,GAAgB,MAAZuR,EAAkB,CACzB,IAAI0J,EAAa,IACjB,IAAK,MAAMrpB,KAAS0jB,EAAewF,WAC/B,GAAkB,MAAdlpB,EAAMjH,KAAc,CACpB,MAAMgxB,EAAc/pB,EAAMspB,QAAQhwB,OAAOoqB,EAAeU,gBAAgB,QACpE2F,IAAaV,EAAaU,EAAYpuB,QAAQ,MAAO,KACzD,K,CAGRktB,EAAe,QAAUQ,EACzBQ,EAAcG,sBAAsBrK,EAAUxgB,EAAS0U,EAAWzF,SAAUib,E,MAE5E,OAAQO,EAAY,OAChB,IAAK,KACDC,EAAcI,mBAAmBtK,EAAUxgB,EAAS0U,EAAWzF,UAC/D,MACJ,IAAK,KACDyb,EAAcG,sBAAsBrK,EAAUxgB,EAAS0U,EAAWzF,UAClE,MACJ,IAAK,KACDyb,EAAcK,qBAAqBvK,EAAUxgB,EAAS0U,EAAWzF,UACjE,MAGZ,CAAC,KAAM,OAAQ,OAAOvO,SAAQsqB,IAC1B,IAAIjsB,EAAMyhB,EAAWwK,EACN,OAAXA,IACAjsB,GAAO,IAAMiB,GAEbjB,KAAO2qB,IACNA,EAAuB3qB,GAAO2rB,E,GAErC,GACJ,IAEN1wB,OAAO8F,KAAK4pB,GAAgBjpB,QAAOlE,GAAKA,EAAE2G,SAAS,UAA+B,GAApB3G,EAAE0E,QAAQ,QAAaP,SAAQuqB,IAOzF,GANA,CAAC,MAAO,UAAUvqB,SAAQzD,IACtB,MAAM8B,EAAMksB,EAAMhuB,EACd8B,KAAO2V,EAAWzF,WACjBya,EAAuB3qB,GAAO2V,EAAWzF,SAASlQ,G,IAGvDksB,EAAIpnB,WAAW,KAAM,CACrB,MAAMqnB,EAAcD,EAAM,MAC1B,IAAIE,EAAW1nB,KAAKgE,IAAI,IAAKiN,EAAWzF,SAAS,QAC7Cic,KAAexB,GAAmBA,EAAuBwB,KACzDC,GAAazB,EAAuBwB,GAAe,KAEtDxB,EAAuBwB,GAAeC,EACvC,MAAMC,EAAaH,EAAM,SACzB,IAAII,EAAU3W,EAAWzF,SAAS,UAC9Bmc,KAAc1B,GAAmBA,EAAuB0B,KACxDC,GAAY3B,EAAuB0B,GAAc,KAEpD1B,EAAuB0B,GAAcC,C,MAG9C,EAAAjyB,SAAAoF,iBAAgB8W,EAAagW,KAAM5B,GAGnC,MAAM1D,EAAyBC,2BAA2B1B,GAEpD4B,EAA0BngB,EAAemgB,wBACzCC,EAAuBpgB,EAAeogB,qBACtCC,EAA6BrgB,EAAeqgB,2BAMlD,GAJInqB,MAAMqvB,QAAQjW,EAAa,cAC3BA,EAAa,YAAYzM,OAAO,EAAGyM,EAAa,YAAYjW,QAG5D8mB,EAAyB,CACzB,IAAK,MAAMqF,IAAY,CAAC,OAAQ,KAAM,QAAS,CAE3C,GADAlW,EAAakW,GAAY,KACnBA,KAAYrF,GAA0B,SAC5C,MAAMnmB,EAAUukB,EAAeuC,KAAK,CAAC,OAAQ,KAAM,QAAQ7lB,QAAQuqB,IACnE,IAAIC,EAAmBtF,EAAgCqF,GACvD,GAAK,KAAOA,KAAarF,EAAyB,CAC9C,MAAMuF,EAAWvF,EAAgC,KAAOqF,GACiF,IAArI/E,sBAAsBiF,EAAQ,MAAO1F,EAAwBhf,EAAe0N,EAAWzF,SAAUsV,EAAeU,mBAChHwG,EAAkBC,EAAQ,M,CAGlC,IAAK,MAAMvV,KAAgBsV,EAAiB,CACxC,GAAItV,EAAa,OAAmJ,IAA1IsQ,sBAAsBtQ,EAAa,MAAO6P,EAAwBhf,EAAe0N,EAAWzF,SAAUsV,EAAeU,iBAC3I,SAEJ,MAAM0G,EAAYC,0BAA0BzV,EAAcnQ,EAAgBue,EAAgB7P,EAAWzF,SAAUqG,EAActV,GAC5HsV,EAAakW,GAAkBlsB,KAAKqsB,E,CAEzC,GAAgB,QAAZH,EAAoB,CACpB,IAAIK,EAAI,EACR,MAAMC,EAAM,CAAC,SAAU,KAAM,EAAG,EAAG,EAAG,KAAM,EAAG,EAAG,GAClD,IAAK,MAAMjrB,KAASyU,EAAakW,IACxB3qB,EAAM,GAAGqC,SAAS,WAAY,CAAC,UAAU5F,SAASuD,EAAM,KAASA,EAAM,GAAGgD,WAAW,UACtFioB,EAAI,GAAKjrB,EAAM,GACfirB,EAAI,IAAMjrB,EAAM,GACA,MAAZA,EAAM,GAAYirB,EAAI,GAAK,KACZ,MAAVA,EAAI,KAAYA,EAAI,IAAMjrB,EAAM,IACzCirB,EAAI,IAAMjrB,EAAM,GACF,MAAVirB,EAAI,KACAjrB,EAAM,GAAIirB,EAAI,IAAMjrB,EAAM,GACzBirB,EAAI,MAEbA,EAAI,GAAKjrB,EAAM,GACfirB,EAAI,GAAKjrB,EAAM,GACfgrB,KAGJA,EAAI,GACJvW,EAAakW,GAAU3iB,OAAOgjB,EAAG,EAAGC,E,EAIhD,IAAK,MAAMN,IAAY,CAAC,QAAS,OAAQ,OAAQ,CAE7C,GADAlW,EAAakW,GAAY,KACnBA,KAAYrF,GAA0B,SAC5C,MAAMsF,EAAmBtF,EAAgCqF,GACzD,IAAK,MAAMrV,KAAgBsV,EAAiB,CACxC,GAAItV,EAAa,OAAmJ,IAA1IsQ,sBAAsBtQ,EAAa,MAAO6P,EAAwBhf,EAAe0N,EAAWzF,SAAUsV,EAAeU,iBAC3I,SAEJ,MAAM0G,EAAYC,0BAA0BzV,EAAcnQ,EAAgBue,EAAgB7P,EAAWzF,SAAUqG,GAC9GA,EAAakW,GAAmClsB,KAAKqsB,E,GAMlE,IAAK,MAAMzF,IAAkB,CAACE,EAAsBC,GAA6B,CAC7E,MAAMmF,EAAW,MACjB,IAAKtF,KAAoBsF,KAAYtF,GAAiB,SACtD,MAAMuF,EAAmBvF,EAAuBsF,GAChD,IAAK,MAAMrV,KAAgBsV,EAAiB,CACxC,GAAItV,EAAa,OAAmJ,IAA1IsQ,sBAAsBtQ,EAAa,MAAO6P,EAAwBhf,EAAe0N,EAAWzF,SAAUsV,EAAeU,iBAC3I,SAEJ,MAAM0G,EAAYC,0BAA0BzV,EAAcnQ,EAAgBue,EAAgB7P,EAAWzF,SAAUqG,GAC9GA,EAAakW,GAAmClsB,KAAKqsB,E,EAK9D,MAAMI,EAAiB,GACvB,IAAK,MAAM9uB,KAAQ5D,QAAAwuB,gBAAiB,CAChC,MAAM7nB,EAAU/C,EAAKT,QAAQ,QAAS,IAAIA,QAAQ,MAAO,IACnDwvB,EAAcC,qBAAqBvX,EAAWzF,SAAU,IAAOjP,GACrE+rB,EAAezsB,KAAK,CAAEP,IAAKiB,EAAS7C,MAAO6uB,G,CAE/C1W,EAAa,SAAWyW,EAGxB,MAAMG,EAAc,GACpB,IAAK,MAAMF,KAAeD,EACtBG,EAAY5sB,KAAK,CAAEP,IAAKitB,EAAYjtB,IAAK5B,MAAqC,IAA9BuX,EAAWzF,SAAS,QAAkB+c,EAAY7uB,QAEtGmY,EAAa,SAAW4W,EAExB3V,QAAQ8N,MAAM,eAAgB/O,E,CAChC,MAAO8O,GACL7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAM9O,EAActP,EAAgBue,EAAgB7P,E,CAGpE,CAEA,SAAgByX,mCACZ7W,EACAtP,EACAwe,GAEA,MAAM4H,EAAS,IAAI7I,IAenB,GAbIjO,GAAcgW,MACdtxB,OAAO8F,KAAKwV,EAAagW,MAAM5qB,SAAQ3B,IACnC,IAAI5B,EAASmY,EAAagW,KAAavsB,GACvC,GAAIA,EAAImE,SAAS,QAAUjK,SAAA2B,QAAE2wB,QAAQpuB,GAAQ,CACzC4B,EAAMA,EAAIvC,QAAQ,OAAQ,IAC1B,MAAM6vB,EAAiC,GACjCjvB,EAAOkY,EAAagW,KAC1Be,EAAS/sB,KAAKgtB,uBAAuBtmB,EAAexG,UAAW,KAAMpC,EAAK2B,GAAM3B,EAAK2B,EAAM,OAAQ3B,EAAK2B,EAAM,YAC9G5B,EAAQkvB,EACRD,EAAOxL,IAAI7hB,EAAK5B,E,KAIxBqnB,GAAa+H,YACb,IAAK,MAAMxmB,KAAUye,EAAY+H,YAAa,CAC1C,GAAIxmB,GAAUC,EAAexG,UACzB,SAEJ,MAAMgtB,EAAYhI,EAAYiI,WAAW1mB,GACrCymB,GAAWlX,cAAcgW,MACzBc,EAAO1rB,SAAQ,CAACvD,EAAO4B,KACnB,MAAM3B,EAAOovB,EAAUlX,aAAagW,KACpCnuB,EAAMmC,KAAKgtB,uBAAuBvmB,EAAQ,KAAM3I,EAAK2B,GAAM3B,EAAK2B,EAAM,OAAQ3B,EAAK2B,EAAM,WAAW,G,CAMpHqtB,EAAO1rB,SAAQ,CAACvD,EAAO4B,KAClBuW,EAAagW,KAAavsB,EAAM,OAAO8J,OAAO,EAAG1L,EAAMkC,UAAWlC,EAAM,GAEjF,CAEA,SAASmvB,uBAAuB1yB,EAAcoG,EAAwB0sB,EAAiBvB,EAAkBE,EAAiBtxB,EAAsB,MAC5I,MAAM4yB,EAAOD,GAAW,EAAIrB,EAAU,KACtCF,EAAW1nB,KAAKgE,IAAI,IAAK0jB,GACzB,MAAMyB,EAAgBF,EAAUvB,EAAW,KAAO,EAAIE,EAAU,MAAQ,EAAIF,EAAW,KAAOuB,EACxFttB,EAA6B,CAACxF,EAAMoG,EAAS4sB,EAAeD,EAAMD,EAAS3yB,EAAM,KAAM,KAAM,MACnG,OAAOqF,CACX,CAEA,SAAgB6mB,2BAA2B1B,GACvC,IACI,MAAMnlB,EAAS,GACf,IAAKmlB,EAAgB,OAAOnlB,EAC5B,MAAMytB,EAAetI,EAAesI,aAChCA,GACAA,EAAansB,SAASG,IACd0jB,EAAeU,gBAAgBpkB,EAAMjH,OACrCwF,EAAOE,KAAKuB,EAAMjH,K,IAI9B,MAAMmwB,EAAaxF,EAAewF,WAC9BA,GACAA,EAAWrpB,SAASG,IAChB,MAAM1D,EAAQonB,EAAeU,gBAAgBpkB,EAAMjH,MAC/CX,SAAA2B,QAAEkb,SAAS3Y,KACPA,EAAQ,GAAgB,IAAVA,GAAe0D,EAAM5G,WACnCmF,EAAOE,KAAKuB,EAAMjH,KAAO,IAAMiH,EAAMspB,QAAQhtB,G,IAK7D,MAAM2vB,EAAavI,EAAeuI,WASlC,OARIA,GACAA,EAAWpsB,SAASG,IAChB,MAAM1D,EAAQonB,EAAeU,gBAAgBpkB,EAAMjH,MAC/CX,SAAA2B,QAAEkb,SAAS3Y,IACXiC,EAAOE,KAAKuB,EAAMjH,KAAO,IAAMuD,E,IAIpCiC,C,CACT,MAAOglB,GAGL,MAFA7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAMG,GACRH,C,CAEd,CAEA,SAAgBqC,sBACZsG,EACA/G,EACAhf,EACAiI,EAAmB,CAAC,EACpBgW,EAAoC,CAAC,GAErC,MAAM+H,EAAYD,EAAa/pB,MAAM,KAAK,GAE1C,IAAgC,IAA5BgqB,EAAU/rB,QAAQ,KAAa,CAC/B,MAAMgsB,EAAeD,EAAUhqB,MAAM,KACrC,IAAK,IAAIwD,EAAI,EAAGA,EAAIymB,EAAa5tB,OAAQmH,IAAK,CAC1C,MAAM0mB,EAAYC,yBAAyBF,EAAazmB,GAAIwf,EAAwBhf,EAAeiI,EAAUgW,GAC7G,GAAkB,IAAdiI,EACA,OAAO,C,CAGf,OAAO,C,CAGX,MAAMD,EAAeD,EAAUhqB,MAAM,KACrC,IAAI5D,EAAS,EACb,IAAK,IAAIoH,EAAI,EAAGA,EAAIymB,EAAa5tB,OAAQmH,IAAK,CAC1C,MAAM0mB,EAAYC,yBAAyBF,EAAazmB,GAAIwf,EAAwBhf,EAAeiI,EAAUgW,GAC7G,GAAkB,IAAdiI,EACA,OAAO,EAEO,IAAdA,IACA9tB,EAAS8tB,E,CAGjB,OAAO9tB,CACX,CAEA,SAAS+tB,yBACLJ,EACA/G,EACAhf,EACAiI,EACAgW,GAEA,MAAMmI,GAAS,EAAA/zB,QAAAg0B,oBAAmBN,GAC5BO,EAAqBF,EAASL,EAAa/pB,MAAMoqB,GAAU,CAACL,GAC5DQ,EAAeD,EAAmB,GACxC,IAAIE,EAA0E,IAA9BF,EAAmBjuB,OAAeiuB,EAAmB,QAAKlvB,EAC1G,QAAeA,IAAXgvB,EACA,OAAOpH,EAAuBvlB,QAAOlE,GAAKA,EAAEyG,MAAM,KAAK,IAAMuqB,IAAcluB,OAAS,EAAI,EAAI,EAEhG,IAAKmuB,EAED,OADAjX,QAAQ6N,MAAM2I,EAAc/G,EAAwBhf,EAAeiI,GAC5D,EAEX,GAAqB,SAAjBse,GACA,IAAI,EAAAn0B,SAAAq0B,WAAUD,GAAe,CAEzB,GADAA,EAAerzB,OAAOqzB,GACP,OAAXJ,GAA8B,MAAXA,EACnB,OAAOpmB,GAAiBwmB,EAAe,EAAI,EACxC,GAAe,OAAXJ,EACP,OAAOpmB,GAAiBwmB,EAAe,EAAI,EACxC,GAAe,MAAXJ,EACP,OAAOpmB,EAAgBwmB,EAAe,EAAI,EACvC,GAAe,MAAXJ,EACP,OAAOpmB,EAAgBwmB,EAAe,EAAI,EACvC,GAAe,MAAXJ,EACP,OAAOpmB,GAAiBwmB,EAAe,EAAI,C,OAGhD,GAAe,MAAXJ,EAAgB,CACvB,MAAMzqB,EAAK,IAAIC,OAAO,gCACtB,IAAK,IAAI4D,EAAI,EAAGA,EAAIwf,EAAuB3mB,OAAQmH,IAC/C,GAAIwf,EAAuBxf,GAAG3C,WAAW0pB,EAAe,KAAM,CAC1D,MAAMxqB,EAAUijB,EAAuBxf,GAAGxD,MAAM,KAC1CH,EAAQF,EAAGG,KAAKC,EAAQ,IAC9B,GAAIF,EAAO,CACP,IAAI6qB,EAAUF,EACV3qB,EAAM,KAAI6qB,EAAUA,EAAQC,UAAU9qB,EAAM,GAAGxD,SAC/CwD,EAAM,KAAI6qB,EAAUA,EAAQC,UAAU,EAAGD,EAAQruB,OAASwD,EAAM,GAAGxD,SACvEquB,EAAUA,EAAQlxB,QAAQ,OAAQ,IAClC,MAAMoxB,EAAaF,EAAQ1qB,MAAM,QAC3B6qB,EAAU1zB,OAAOyzB,EAAW,IAC5BE,EAAQ3zB,OAAOyzB,EAAWA,EAAWvuB,OAAS,IAC9C0uB,EAAY5zB,OAAO0I,EAAM,IAC/B,GAAIgrB,GAAWE,GAAaA,GAAaD,EACrC,OAAOC,C,QAKpB,GAAe,MAAXX,EAAgB,CACvB,GAAIpH,EAAuB1oB,SAASiwB,EAAe,IAAMC,GACrD,OAAO,EAEX,GAAIn0B,QAAA20B,0BAA0BC,KAAKT,GAAe,CAC9C,MAAMzqB,EAAUijB,EAAuBvlB,QAAOlE,GAAKA,EAAEyG,MAAM,KAAK,IAAMuqB,IACtE,GAAIxqB,EAAQ1D,OAAS,EACjB,OAAOlF,OAAO4I,EAAQ,GAAGC,MAAM,KAAK,G,CAG5C,IAAI,EAAA5J,SAAAq0B,WAAUD,GACV,OAAOD,KAAgBte,GAAYA,EAASse,IAAiBpzB,OAAOqzB,GAAgB,EAAI,C,MAEzF,GAAe,OAAXJ,EAAiB,CACxB,IAAI,EAAAh0B,SAAAq0B,WAAUD,GACV,OAAOD,KAAgBte,GAAYA,EAASse,IAAiBpzB,OAAOqzB,GAAgB,EAAI,EAE5F,GAAIA,EAAa3pB,WAAW,YACxB2pB,EAAeA,EAAahxB,QAAQ,UAAW,KAC3C,EAAApD,SAAAq0B,WAAUD,IAAiBD,KAAgBtI,GAAiB,CAC5D,MAAM8I,EAAY9I,EAAgBsI,GAClC,GAAIt0B,SAAA2B,QAAEkb,SAASiY,IAAcA,GAAa5zB,OAAOqzB,GAC7C,OAAO,C,OAIhB,GAAe,OAAXJ,EAAiB,CACxB,IAAI,EAAAh0B,SAAAq0B,WAAUD,GACV,OAAOD,KAAgBte,GAAYA,EAASse,IAAiBpzB,OAAOqzB,GAAgB,EAAI,EAE5F,GAAIA,EAAa3pB,WAAW,YACxB2pB,EAAeA,EAAahxB,QAAQ,UAAW,KAC3C,EAAApD,SAAAq0B,WAAUD,IAAiBD,KAAgBtI,GAAiB,CAC5D,MAAM8I,EAAY9I,EAAgBsI,GAClC,GAAIt0B,SAAA2B,QAAEkb,SAASiY,IAAcA,GAAa5zB,OAAOqzB,GAC7C,OAAO,C,OAIhB,GAAe,MAAXJ,EAAgB,CACvB,IAAI,EAAAh0B,SAAAq0B,WAAUD,GACV,OAAOD,KAAgBte,GAAYA,EAASse,GAAgBpzB,OAAOqzB,GAAgB,EAAI,EAE3F,GAAIA,EAAa3pB,WAAW,YACxB2pB,EAAeA,EAAahxB,QAAQ,UAAW,KAC3C,EAAApD,SAAAq0B,WAAUD,IAAiBD,KAAgBtI,GAAiB,CAC5D,MAAM8I,EAAY9I,EAAgBsI,GAClC,GAAIt0B,SAAA2B,QAAEkb,SAASiY,IAAcA,EAAY5zB,OAAOqzB,GAC5C,OAAO,C,OAIhB,GAAe,MAAXJ,EAAgB,CACvB,IAAI,EAAAh0B,SAAAq0B,WAAUD,GACV,OAAOD,KAAgBte,GAAYA,EAASse,GAAgBpzB,OAAOqzB,GAAgB,EAAI,EAE3F,GAAIA,EAAa3pB,WAAW,YACxB2pB,EAAeA,EAAahxB,QAAQ,UAAW,KAC3C,EAAApD,SAAAq0B,WAAUD,IAAiBD,KAAgBtI,GAAiB,CAC5D,MAAM8I,EAAY9I,EAAgBsI,GAClC,GAAIt0B,SAAA2B,QAAEkb,SAASiY,IAAcA,EAAY5zB,OAAOqzB,GAC5C,OAAO,C,EAKvB,OAAO,CACX,CAGA,SAAS1C,mBACLtK,EACAxgB,EACAiP,GAEA,IACI,IAAKjP,GAAsB,MAAXA,EAAiB,OAAO,EACxC,MAAMkuB,EAAmBjf,EAAS,QAC5Bkf,EAAUlf,EAASuR,EAAW,WAAa,EACjD,IAAIphB,EAAU9F,SAAAmnB,0BAAkCzgB,GAASwgB,GAAU,MAEnE,OADAphB,GAAU,EAAK,GAAK8uB,GAAoB,GAAKA,EAAmB,OAAUC,EAAU,IAC7E/uB,C,CACT,MAAOglB,GAGL,MAFA7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAM5D,EAAUxgB,EAASiP,GAC3BmV,C,CAEd,CAKA,SAASyG,sBACLrK,EACAxgB,EACAiP,EACAmf,GAEA,IACI,IAAKpuB,GAAsB,MAAXA,EAAiB,OAAO,EACxC,MAAMgW,EAAQ/G,EAAS,OACjBif,EAAmBjf,EAAS,QAC5Bof,EAAYpf,EAASuR,EAAW,cAAgB,EAChD2N,EAAUlf,EAASuR,EAAW,WAAa,EAC3C8N,EAAQrf,EAASuR,EAAW,YAAc,EAC1C0J,EAAakE,GAAmB90B,SAAAmnB,0BAAkCzgB,GAASwgB,GAAU,MACrFqC,EAAcvpB,SAAAmnB,0BAAkCzgB,GAASwgB,GAAU,MACnE+N,EAAU/M,gBAAgBxL,EAAO1c,SAAAk1B,uCACvC,IAAIpvB,EAASmvB,EAAU1L,GAAc,EAAIwL,EAAY,KAQrD,OAPI7N,EAAS3c,WAAW,KACpBzE,GAAU,EAAK,EAAI8uB,GAAoBA,EAAmB,KAASC,EAAU,IAE7E/uB,GAAU,EAAK,GAAK8uB,GAAoBA,EAAmB,KAASC,EAAU,IAElF/uB,GAAUkvB,EACVlvB,GAAUqvB,kBAAkBvE,EAAYjb,GACjC7P,C,CACT,MAAOglB,GAGL,MAFA7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAM5D,EAAUxgB,EAASiP,EAAUmf,GACrChK,C,CAEd,CAGA,SAASuG,mBAAmB3qB,EAAiBiP,GACzC,IACI,IAAKjP,GAAsB,MAAXA,EAAiB,OAAO,EACxC,MAAMgW,EAAQ/G,EAAS,OACjBif,EAAmBjf,EAAS,QAC5Bkf,EAAUlf,EAAS,aAAe,EAClC4T,EAAcvpB,SAAAmnB,0BAAkCzgB,GAAS,MAAM,MAC/DuuB,EAAU/M,gBAAgBxL,EAAO1c,SAAAk1B,uCACvC,IAAIpvB,EAASmvB,EAAU1L,EAEvB,OADAzjB,GAAU,EAAK,GAAK8uB,GAAoB,GAAKA,EAAmB,OAAUC,EAAU,IAC7E/uB,C,CACT,MAAOglB,GAGL,MAFA7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAMpkB,EAASiP,GACjBmV,C,CAEd,CAGA,SAAS2G,qBAAqBvK,EAAexgB,EAAiBiP,GAC1D,IACI,IAAKjP,GAAsB,MAAXA,EAAiB,OAAO,EACxC,MAAMgW,EAAQ/G,EAAS,OACjBif,EAAmBjf,EAAS,QAC5Bkf,EAAUlf,EAASuR,EAAW,WAAa,EAC3C0J,EAAc5wB,SAAAmnB,0BAAkCzgB,GAASwgB,GAAU,MACnEqC,EAAcvpB,SAAAmnB,0BAAkCzgB,GAASwgB,GAAU,MACnE+N,EAAU/M,gBAAgBxL,EAAO1c,SAAAk1B,uCACvC,IAAIpvB,EAASmvB,EAAU1L,EAGvB,OAFAzjB,GAAU,EAAK,EAAI8uB,GAAoBA,EAAmB,MAASC,EAAU,IAC7E/uB,GAAUqvB,kBAAkBvE,EAAYjb,GACjC7P,C,CACT,MAAOglB,GAGL,MAFA7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAM5D,EAAUxgB,EAASiP,GAC3BmV,C,CAEd,CAGA,SAAgBsK,kBAAkBzf,EAAkB0f,EAAgB,GAChE,IACI,MAAM3Y,EAAQ/G,EAAS,QAAU,EAC3B2f,EAAa3f,EAAS,SAAW,EACjC4f,EAAgBF,EAAgB,IAChCG,EAAUrrB,KAAK6D,KAAK,IAAK2H,EAAS,SAAW,GAAK,IAClD7P,GAAU4W,EAAQ,OAAS,EAAI6Y,IAAkB,EAAIC,IAAYF,EAAa,KAAO5Y,EAAQ,KACnG,OAAO5W,C,CACT,MAAOglB,GAGL,MAFA7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAMnV,EAAU0f,GAClBvK,C,CAEd,CAGA,SAASxP,aAAad,GAClB,GAAIA,GAAOib,IAAU,OAAO,EAC5B,IAAI3vB,EAAS0U,EASb,OAPI1U,EADAA,EAAS,EACA,IAAMA,EAAS,EACjBA,EAAS,GACP,IAAMA,EAEN,KAAS,EAAIA,EAAS,KAEnCA,GAAU,IACHA,CACX,CAGA,SAAgBqvB,kBAAkBzuB,EAAiBiP,GAC/C,IACI,MAAM+f,EAAW,IAAMhvB,GAAsB,MAAXA,EAAkB,KAAO,IAAM,KAC3DZ,EAASwV,aAAa3F,EAAS+f,IAAa,GAClD,OAAO5vB,C,CACT,MAAOglB,GAGL,MAFA7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAMpkB,EAASiP,GACjBmV,C,CAEd,CAGA,SAASwH,0BACL5W,EACAhP,EACAue,EACAtV,EACAqG,EACA2Z,EAA6B,MAE7B,IACI,MAAMC,EAAU,GAChB,IAAIC,GAAW,EACXC,GAAa,EACbC,GAAa,EACbxI,EAA0B,MAAnB7R,EAAU,MAAgBA,EAAU,MAAuB,MAAfia,EAAsBA,EAAc,KACvFK,EAAS,EACTC,EAAS,EACb,MAAMC,EAA8B,MAArBxa,EAAU,QAAkB7a,OAAO6a,EAAU,SAAW,EACjEya,EAAY,CAAC,EAEbzoB,EAAgBiI,EAAS,QACzBygB,EAA2BC,sBAAsB3pB,EAAgB3M,QAAAitB,oBAEvE,IAAIN,EAAyBC,2BAA2B1B,GACxD,MAAMqL,EAAyB32B,SAAA2B,QAAES,UAAUkpB,EAAeU,iBAE1D,GAAIjQ,EAAU,QACV,IAAK,MAAM6a,KAAgB7a,EAAU,QAAS,CAC1C,IAAI5X,EAAOyyB,EACP52B,SAAA2B,QAAEmb,cAAc8Z,KAChBzyB,EAAOyyB,EAAapiB,IAEpBrQ,KAAQwyB,KACJ,EAAAx2B,SAAAq0B,WAAUmC,EAAuBxyB,IACjCwyB,EAAuBxyB,GAAQ,EACxBnE,SAAA2B,QAAEk1B,UAAUF,EAAuBxyB,MAC1CwyB,EAAuBxyB,IAAQ,G,CAK/C,GAAI4X,EAAU,QACV,IAAK,MAAM+a,KAAgB/a,EAAU,QACjC,GAAI/b,SAAA2B,QAAEo1B,SAASD,GACPA,KAAgBH,GACZ32B,SAAA2B,QAAEk1B,UAAUF,EAAuBG,MACnCH,EAAuBG,IAAgB,QAG5C,GAAI92B,SAAA2B,QAAEmb,cAAcga,GAAe,CACtC,GAAIA,EAAatiB,MAAMmiB,EAAwB,CAC3C,IAAIK,EAAWL,EAAuBG,EAAatiB,IACnD,GAAI,OAAQsiB,EAAc,CACtB,GAAI92B,SAAA2B,QAAEo1B,SAASD,EAAa5a,IAAK,CAC7B,MAAM/X,EAAO/C,OAAO01B,EAAa5a,IAAI3Y,QAAQ,MAAO,IACnDyzB,GAAuB91B,OAAOiD,E,MAE/B6yB,IADO,EAAA72B,SAAAq0B,WAAUsC,EAAa5a,IACnB4a,EAAa5a,IAIX,OAAb8a,IAAqB,EAAA72B,SAAAq0B,WAAUwC,KAC1BA,EAAsB,EACvBA,EAAW,EAEX1L,EAAewF,WAAWtpB,QAAOlE,GAAKA,EAAE3C,MAAQm2B,EAAatiB,KAAI/M,SAAQG,IACpD,OAAbovB,GAAsBA,GAAuBpvB,EAAMspB,QAAQ9qB,SAC3D4wB,EAAWpvB,EAAMspB,QAAQ9qB,OAAS,E,UAMlD4wB,GAAW,EAEfL,EAAuBG,EAAatiB,IAAMwiB,C,CAE9C,GAAIF,EAAaxwB,GACb,GAAIrD,MAAMqvB,QAAQwE,EAAaxwB,IAC3BwwB,EAAaxwB,GAAGmB,SAASwvB,IAChB5a,EAAa,YAAYhY,SAAS4yB,IACnC5a,EAAa,YAAYhW,KAAK4wB,E,QAGnC,CACH,MAAMA,EAAOH,EAAaxwB,GACrB+V,EAAa,YAAYhY,SAAS4yB,IACnC5a,EAAa,YAAYhW,KAAK4wB,E,EAOtD,GAAIlb,EAAU,SAAWA,EAAU,QAAS,CACxC,MAAMmb,EAAyCl3B,SAAA2B,QAAES,UAAUkpB,GAC3D4L,EAAsBlL,gBAAkB2K,EACxC,MAAMQ,EAA8BnK,2BAA2BkK,GAE/D,CAACnqB,EAAemgB,wBAAyBngB,EAAeogB,qBAAsBpgB,EAAeqgB,4BAA4B3lB,SAAQqU,IACxHA,GACLA,EAAasb,WAAW5vB,QAAOlE,GAAKA,EAAE2Y,KAAIxU,SAAQ4vB,IAC9C,GAA2B,OAAvBA,EAAgBnb,GAChB,OAEJ,MAAM4X,EAAeuD,EAAgBpb,GAC/Bqb,EAAgB9J,sBAAsBsG,EAAc/G,EAAwBhf,EAAeiI,EAAUsV,EAAeU,iBACpHuL,EAAe/J,sBAAsBsG,EAAcqD,EAA6BppB,EAAeiI,EAAUsV,EAAeU,iBAC9H,GAAIsL,GAAiBC,EACjB,OAEJ,IAAIC,EAAc,EACdC,EAAa,EACbC,EAAWL,EAAgBnb,GAE3Bwb,EADAA,EAASrzB,SAAS,YACPqzB,EAAS5M,WAAW,WAAY1pB,OAAOk2B,IACzB,IAAlBA,EACI,IAAMI,EAAW,KAAOJ,EAExB,IAEfE,EAAcpb,YAAYsb,EAAU1hB,EAAUqG,EAAcgb,EAAgB/a,GAAI+a,EAAgB9a,IAChG,IAAIob,EAAUN,EAAgBnb,GAE1Byb,EADAA,EAAQtzB,SAAS,YACPszB,EAAQ7M,WAAW,WAAY1pB,OAAOm2B,IACxB,IAAjBA,EACG,IAAMI,EAAU,KAAOJ,EAEvB,IAEdE,EAAarb,YAAYub,EAAS3hB,EAAUqG,EAAcgb,EAAgB/a,GAAI+a,EAAgB9a,IAC9F,MAAMqb,EAAOH,EAAaD,EAC1B,GAAII,EAAM,CACN,IAAIC,EAAQR,EAAgBlb,GACxBkb,EAAgBS,KAChBD,GAAS,IAAMR,EAAgBS,IAE/BD,KAASrB,EACTA,EAAUqB,IAAUD,EAEpBpB,EAAUqB,GAASD,C,IAG7B,IAGN7K,EAAyBoK,C,CAG7B,MAAMY,EAA6B,GAC/BtB,GAEAA,EAAyBhvB,SAAQ+gB,IAC7B,IAAI+E,EAAS,KACb,IAAI/E,EAASvM,KACTsR,EAASC,sBAAsBhF,EAASvM,GAAI8Q,EAAwBhf,EAAeiI,EAAUsV,EAAeU,iBAC7F,IAAXuB,GAFR,CAMA,GAAI/E,EAASsP,GACT,GAAItP,EAASsP,GAAG7tB,SAAS,WACrB,IAAKue,EAASsP,GAAGltB,WAAWgjB,GACxB,YAED,GAAmB,UAAfpF,EAASsP,IAChB,GAAY,MAARlK,EACA,WAED,CAEH,MAAMoK,EAAWjc,EAAUI,GACrB8b,EAAczP,EAASsP,GAAG/tB,MAAM,KACtC,GAAIkuB,EAAY,IAAMD,EAClB,OAEJ,GAAIC,EAAY7xB,OAAS,GAAK6xB,EAAYA,EAAY7xB,OAAS,IAAM2V,EAAUvH,GAC3E,M,CAIZ,GAAIgU,EAAS,MAAMve,SAAS,QACpB,CAAC,WAAY,SAAU,YAAY5F,SAAS0X,EAAUI,MACjDJ,EAAU,YACX6R,EAAOpF,EAAS,MAAMjlB,QAAQ,OAAQ,WAG3C,GAAmB,QAAfilB,EAASrM,GAAc,CAC9B,MAAM+b,EAAU9b,YAAYoM,EAAStM,GAAIlG,EAAUqG,EAAcmM,EAASlM,GAAIkM,EAASjM,IACvF8Z,GAAU6B,C,MACP,GAAmB,QAAf1P,EAASrM,SAGhB,GAAc,MAAVoR,GAA4B,GAAVA,EAAa,CAC/B,MAAM4K,EAAgBC,KAAKC,MAAMD,KAAKE,UAAU9P,IAC5CxoB,SAAA2B,QAAEo1B,SAASoB,EAAcjc,IACzBic,EAAcjc,IAAM,IAAMqR,EACnBvtB,SAAA2B,QAAE2wB,QAAQ6F,EAAcjc,MAC/Bic,EAAcjc,GAAKic,EAAcjc,GAAGqc,OAAO,CAAC,IAAKhL,KAErDwK,EAA2B1xB,KAAK8xB,E,MAEhCJ,EAA2B1xB,KAAKmiB,E,KAOhD,MAAMgQ,EAAuB,CAAC,EAC9B,CAACxiB,EAAUwgB,GAAW/uB,SAAQgxB,IAC1B13B,OAAO8F,KAAK4xB,GAAUhxB,SAAQzD,IAC1B,MAAM8F,EAAU9F,EAAK+F,MAAM,KAC3B,GAAsB,GAAlBD,EAAQ1D,OAAa,OACzB,IAAIsyB,GAAU,EAkBd,GAjBI5uB,EAAQ,IAAMiS,EAAUI,IACF,GAAlBrS,EAAQ1D,QAED0D,EAAQ,IAAMiS,EAAUvH,IACT,GAAlB1K,EAAQ1D,UAFZsyB,GAAU,GAMP5uB,EAAQ,IAAO8jB,EAAO,SACP,GAAlB9jB,EAAQ1D,SACRsyB,GAAU,GAEO,UAAd5uB,EAAQ,IAA0B,MAAR8jB,GACX,GAAlB9jB,EAAQ1D,SACRsyB,GAAU,GAGdA,EAAS,CACT,MAAMlc,EAAS1S,EAAQ,GACnB0S,KAAUgc,EACI,QAAVhc,GAAoBgc,EAAahc,GAAU,EAC3Cgc,EAAahc,IAAWic,EAASz0B,GAAQ,IAEzCw0B,EAAahc,IAAWic,EAASz0B,GAGrCw0B,EAAahc,GAAUic,EAASz0B,E,IAG1C,IAENjD,OAAO8F,KAAK2xB,GAAc/wB,SAAQzD,IAC1BA,KAAQwyB,EACJxyB,EAAK4G,WAAW,SAAW4rB,EAAUxyB,GAAQ,EAC7CwyB,EAAUxyB,IAASw0B,EAAax0B,GAAQ,IAExCwyB,EAAUxyB,IAASw0B,EAAax0B,GAGpCwyB,EAAUxyB,GAAQw0B,EAAax0B,E,IAKvC,MAAMopB,EAA6BrgB,EAAeqgB,2BAClD,GAAIA,GACoB,YAAhBrR,EAAUI,IAAoBJ,EAAU4c,KAAO,GACV,SAAlC5rB,EAAeuC,aAAa,IAAmD,SAAlCvC,EAAeuC,aAAa,GAAe,CAC3F,IAAIopB,GAAU,EACd,IAAK,MAAMlQ,KAAY4E,EAA2BhtB,QAAA4tB,oBAAoBxmB,QAAOlE,GAAKA,EAAE2Y,IAAM3Y,EAAE6Y,IAAM7Y,EAAE4Y,KAAK,CACrG,MAAMiS,EAAO3F,EAASrM,GAChByc,EAAOpQ,EAASvM,GAChBsa,EAASxa,EAAU4c,KACzB,GAAqH,IAAjHnL,sBAAsBoL,EAAM7L,EAAwBhf,EAAeiI,EAAUsV,EAAeU,iBAAwB,CACpH,MAAMkC,EAAO1F,EAAStM,GAChBgc,EAAU9b,YAAY8R,EAAMlY,EAAUqG,EAAcmM,EAASlM,GAAIkM,EAASjM,IAC1E4R,KAAQqI,IACVA,EAAUrI,GAAQ,GAEtBqI,EAAUrI,IAAS+J,GAAW3B,EAAS/rB,KAAK6D,IAAI,EAAG7D,KAAKgf,MAAM+M,EAAS,KAAOA,EAC9EmC,GAAU,C,EAGlB,GAAIA,EAAS,CACT,MAAMvgB,EAAc,uEACfkE,EAAa,YAAYhY,SAAS8T,IACnCkE,EAAa,YAAYhW,KAAK8R,E,EAuB9C,OAhBApX,OAAO8F,KAAK2vB,GAAW/uB,SAAQzD,IACvBA,KAAQgS,EACJhS,EAAK4G,WAAW,SAAWoL,EAAShS,GAAQ,EAC5CgS,EAAShS,IAASwyB,EAAUxyB,GAE5BgS,EAAShS,IAASwyB,EAAUxyB,GAGhCgS,EAAShS,GAAQwyB,EAAUxyB,E,IAI/BgS,EAAS,UACTsgB,EAAStgB,EAAS,SAGd+F,EAAUI,IACd,IAAK,OACD8Z,EAAQ5vB,KAAK,WACb4vB,EAAQ5vB,KAAK,WACb6vB,GAAW,EACXC,GAAa,EACbC,GAAa,EACbxI,EAAO,KACP,MACJ,IAAK,OACDqI,EAAQ5vB,KAAK,UACb6vB,GAAW,EACXC,GAAa,EACbC,GAAa,EACb,MACJ,IAAK,UACDF,GAAW,EACXC,GAAa,EACbC,GAAa,EACbxI,EAAO,KACP,MACJ,IAAK,WACDuI,GAAa,EACbC,GAAa,EACb,MACJ,IAAK,WACDF,GAAW,EACXC,GAAa,EACbC,GAAa,EACbxI,EAAO,KACP,MACJ,IAAK,WACI,CAAC,IAAK,IAAK,IAAK,KAAKvpB,SAASupB,KAC/BA,EAAO,KAEX,MACJ,IAAK,OACDsI,GAAW,EACXC,GAAa,EACbC,GAAa,EACbxI,EAAO,KACP,MACJ,QACQ7R,EAAUI,GAAGvR,WAAW,OAASmR,EAAUI,GAAGvR,WAAW,QACzDsrB,GAAW,EACXC,GAAa,EACbC,GAAa,EACbxI,EAAO,OAEPqI,EAAQ5vB,KAAK,WACW,QAApB0V,EAAU8c,SACN9c,EAAU8c,OACV5C,EAAQ5vB,KAAK0V,EAAU8c,QAChBx4B,SAAAy4B,sBAAsBz0B,SAAS0X,EAAUI,KAChD8Z,EAAQ5vB,KAAK0V,EAAUI,GAAK,OAGhCyR,GACAqI,EAAQ5vB,KAAa,MAARunB,EAAe,WAAaA,EAAO,aAGxD,MAER,IAAImL,EA8BJ,GA5BIA,EADAhd,EAAUI,GAAGvR,WAAW,MAAQmR,EAAUI,GAAGlS,SAAS,UACzC+uB,kCAAkChjB,EAAUqG,EAAcN,EAAUG,GAAIH,EAAUI,GAAIyR,GAEtFqL,6BAA6BjjB,EAAUqG,EAAcN,EAAUG,GAAI+Z,EAASC,EAAUC,EAAYC,EAAYxI,EAAMyI,EAAQC,EAAQva,EAAUO,GAAIP,EAAUQ,IAG7Kwb,EAA2BtwB,SAAQ+gB,IAC/B,MAAM0Q,EAAeD,6BAA6BjjB,EAAUqG,EAAcmM,EAAStM,GAAI+Z,EAASC,EAAUC,EAAYC,EAAYxI,EAAMyI,EAAQ,KAAM7N,EAASlM,GAAIkM,EAASjM,IAC5K,GAAIiM,EAASrM,GAAGlS,SAAS,WAAY,CACjC,GAAoB,WAAhB8R,EAAUvH,GAAiB,OAC3BnU,SAAAy4B,sBAAsBz0B,SAAS0X,EAAUI,KAErCoa,EAAS,IACT2C,EAAa,IAAM3C,EACI,MAAnB2C,EAAa,KACbA,EAAa,IAAM3C,GAEvB2C,EAAa,IAAM3C,E,CAI/BwC,EAAW,IAAMG,EAAa,GACT,MAAjBH,EAAW,IAAcG,EAAa,KACtCH,EAAW,IAAMG,EAAa,IAElCH,EAAW,IAAMG,EAAa,EAAE,IAIhC,IAAI74B,SAAAy4B,sBAAuB,WAAWz0B,SAAS0X,EAAUI,IAAK,CAC9D,IAAI6b,EAAWjc,EAAUI,GACzB,GAAIJ,EAAU8c,OAAQ,CAClB,MAAMM,EAAOpd,EAAU8c,OAAOt1B,QAAQ,MAAO,IACzClD,SAAAy4B,sBAAsBz0B,SAAS80B,KAC/BnB,EAAWmB,E,CAInB,MAAMC,EAAe,GACrBA,EAAa/yB,KAAK2xB,EAAW,OACzBpK,GACAwL,EAAa/yB,KAAa,MAARunB,EAAe,YAAcA,EAAO,aAE1DwL,EAAa3xB,SAAQ4xB,IACjB,IAAKrjB,EAASqjB,GAAY,OAC1B,IAAKlD,IAAeC,EAAY,OAEhC,GAAIra,EAAUvH,GAAG5J,WAAW,aAAc,OAE1C,MAAMsuB,EAAeD,6BAA6BjjB,EAAUqG,EAAcrG,EAASqjB,GAAYpD,EAASC,EAAUC,EAAYC,EAAYxI,EAAMyI,EAAQ,MAEpJE,EAAS,IACT2C,EAAa,IAAM3C,EACI,MAAnB2C,EAAa,KACbA,EAAa,IAAM3C,GAEvB2C,EAAa,IAAM3C,GAEvBwC,EAAW,IAAMG,EAAa,GACT,MAAjBH,EAAW,IAAcG,EAAa,KACtCH,EAAW,IAAMG,EAAa,IAElCH,EAAW,IAAMG,EAAa,EAAE,G,CAKxCn4B,OAAO8F,KAAK2vB,GAAW/uB,SAAQsuB,IAC3B/f,EAAS+f,IAAaS,EAAUT,EAAS,IAGzB,QAAhBha,EAAUI,IACW,KAAjB4c,EAAW,KACXA,EAAW,GAAqB,IAAhBA,EAAW,GAC3BA,EAAW,GAAqB,IAAhBA,EAAW,IAInC,MAAMrG,EAAY,CAAC3W,EAAUvH,GAAIukB,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIhd,EAAUI,GAAIJ,EAAU4c,KAAMI,EAAW,GAAIA,EAAW,IAErJ,OADAzb,QAAQ8N,MAAMsH,GACPA,C,CACT,MAAOvH,GAGL,MAFA7N,QAAQ6N,MAAMA,GACd7N,QAAQ6N,MAAMpP,EAAWhP,EAAgBue,EAAgBtV,EAAUggB,GAC7D7K,C,CAEd,CAKA,SAAgBmO,eAAelP,GAC3B,OAAOpqB,SAAA2B,QAAEo1B,SAAS3M,IAAYA,EAAQ/lB,SAAS,IACnD,CAEA,SAAS40B,6BACLjjB,EACAqG,EACA+N,EACAmP,EACArD,EACAC,EACAC,EACAzvB,EACA6yB,EACAC,EACA1O,EAAkC,KAClCC,EAAkC,MAElC,MAAM0O,EAAYtd,YAAYgO,EAASpU,EAAUqG,EAAc0O,EAASC,GACxE,IAAI2O,EAASD,EAETD,EACAE,GAAUF,EAAO,IAEjBA,EAAO,EAIPH,eAAelP,KACfmP,EAAU,KACVpD,GAAa,EACbC,GAAa,GAGjB,IAAIwD,EAAa,EACbL,IACAK,EAAa,IACbL,EAAQ9xB,SAAQoyB,IACR7jB,EAAS6jB,KACTD,GAAc5jB,EAAS6jB,G,IAG/BD,GAA0B,IAC1BD,GAAUC,GAGd,IAAIE,EAAS,EACT3D,IACA2D,EAASrE,kBAAkBzf,EAAUwjB,GACrCG,GAAUG,GAGd,IAAIC,EAAS,EACT3D,GAAczvB,IACdozB,EAASvE,kBAAkB7uB,EAAIqP,GAC/B2jB,GAAUI,GAGd,IAAIC,EAAQhkB,EAAS,OACX,MAANrP,EACI,cAAeqP,IACfgkB,GAAShkB,EAAS,cAEdrP,EAAK,cAAgBqP,IAC7BgkB,GAAShkB,EAASrP,EAAK,cAE3BqzB,EAAQxvB,KAAKgE,IAAI,IAAKhE,KAAK6D,IAAI,EAAG2rB,IAAU,IAE5C,IAAIC,EAAWjkB,EAAS,UACd,MAANrP,EACI,iBAAkBqP,IAClBikB,GAAYjkB,EAAS,iBAEjBrP,EAAK,iBAAmBqP,IAChCikB,GAAYjkB,EAASrP,EAAK,iBAE9BszB,GAAY,IAAMA,GAAY,IAE9B,IAAIC,EAAa,KACbC,EAAcR,EAOlB,OANIzD,GAAY8D,EAAQ,IACpBE,EAAaP,EAASM,EACtBE,EAAeD,EAAaF,EAAUL,GAAU,EAAIK,IAGxD1c,QAAQ8N,MAAM,uDAAwDqO,EAAMF,EAASK,EAAYI,EAAOC,EAAUH,EAAQC,GACnH,CAAC,MAAOpzB,EAAIwzB,EAAaD,EAAYP,EAAQ,KAAM,KAAMC,EAAYE,EAChF,CAEA,SAASd,kCACLhjB,EACAqG,EACA+N,EACAuF,EACAsB,GAEA,MAAMyI,EAAYtd,YAAYgO,EAASpU,EAAUqG,EAAc,KAAM,MAC/D+d,EAAWzK,EAAKpsB,QAAQ,SAAU,IAClC6xB,EAAYpf,EAASokB,EAAW,gBAAkB,EAClDC,EAAKrkB,EAAS,SAAW,EACzBskB,EAAW,EAAID,GAAOA,EAAK,KAC3BE,EAAavkB,EAASokB,EAAW,WAAa,EAEpD,IAAIT,EAAS,EAAID,GAAa,EAAItE,EAAY,MAAQ,EAAIkF,EAAUC,EAAa,KAEjF,MAAMR,EAASvE,kBAAkBvE,EAAYjb,GAC7C2jB,GAAUI,EAEV,IAAIC,EAAQhkB,EAAS,OACrBgkB,GAAShkB,EAASib,EAAa,cAAgB,EAC/C+I,EAAQxvB,KAAKgE,IAAI,IAAKhE,KAAK6D,IAAI,EAAG2rB,IAAU,IAE5C,IAAIC,EAAWjkB,EAAS,UACxBikB,GAAYjkB,EAASib,EAAa,iBAAmB,EACrDgJ,GAAY,IAAMA,GAAY,IAE9B,IAAIC,EAAa,KACbC,EAAcR,EAMlB,OALIK,EAAQ,IACRE,EAAaP,EAASM,EACtBE,EAAeD,EAAaF,EAAUL,GAAU,EAAIK,IAGjD,CAAC,MAAO/I,EAAYkJ,EAAaD,EAAYP,EAAQ,KAAM,KAAM,KAAM,KAClF,CAEA,SAASjD,sBAAsB3pB,EAAiCytB,GAC5D,IAAIr0B,EAAS,GACb,OAAK4G,GAEDA,EAAemgB,yBAA2BsN,KAAcztB,EAAemgB,0BACvE/mB,EAASA,EAAOoyB,OAAQxrB,EAAemgB,wBAAgCsN,KAEvEztB,EAAeogB,sBAAwBqN,KAAcztB,EAAeogB,uBACpEhnB,EAASA,EAAOoyB,OAAQxrB,EAAeogB,qBAA6BqN,KAEpEztB,EAAeqgB,4BAA8BoN,KAAcztB,EAAeqgB,6BAC1EjnB,EAASA,EAAOoyB,OAAQxrB,EAAeqgB,2BAAmCoN,KAEvEr0B,GAXqBA,CAYhC,CAKA,SAASspB,YACLzZ,EACA+f,EACAxG,EACAxE,EAAkC,KAClCC,EAAkC,MAElC,MAAM9mB,EAAQkY,YAAYmT,EAAYvZ,EAAU5V,QAAAqtB,uBAAwB1C,EAASC,IAC5E,EAAA7qB,SAAAq0B,WAAUtwB,IACXoZ,QAAQ6N,MAAMnV,EAAU+f,EAAUxG,EAAYrrB,GAElD,MAAMu2B,EAAU,GACA,MAAZ1E,EACA0E,EAAQp0B,KAAK,QACN0vB,EAASnrB,WAAW,OAC3B6vB,EAAQp0B,KAAK0vB,EAASxyB,QAAQ,KAAMnC,OAAO4U,EAAS,SAC7C+f,EAASnrB,WAAW,OAC3BvK,SAAAq6B,aAAajzB,SAAQG,IACjB6yB,EAAQp0B,KAAK0vB,EAASxyB,QAAQ,KAAMqE,GAAO,IAExCmuB,EAASnrB,WAAW,QAC3B6vB,EAAQp0B,KAAK0vB,EAASxyB,QAAQ,MAAO,IAAMnC,OAAO4U,EAAS,SACpD+f,EAASnrB,WAAW,QAC3BvK,SAAAq6B,aAAajzB,SAAQG,IACjB6yB,EAAQp0B,KAAK0vB,EAASxyB,QAAQ,MAAO,IAAMqE,GAAO,IAGtD6yB,EAAQp0B,KAAK0vB,GAEjB,MAAMvG,EAAY,CAAC,EACnBiL,EAAQhzB,SAAQ9G,IACZ6uB,EAAU7uB,GAAQuD,CAAK,IAE3B,IAAK,MAAMvD,KAAQI,OAAO8F,KAAK2oB,GACvB7uB,KAAQqV,EACJrV,EAAKiK,WAAW,SAAW4kB,EAAU7uB,GAAQ,EAC7CqV,EAASrV,IAAS6uB,EAAU7uB,GAAQ,IAEpCqV,EAASrV,IAAS6uB,EAAU7uB,GAGhCqV,EAASrV,GAAQ6uB,EAAU7uB,GAInC,OADA2c,QAAQ8N,MAAMqE,YAAY9uB,KAAM,KAAMo1B,EAAUxG,EAAY,KAAMC,GAC3DA,CACX,CAGA,SAASwD,qBAAqBhd,EAAkB2kB,EAAgB5zB,GAC5D,MAAM6zB,EAAM5kB,EAAS,OACf2f,EAAa3f,EAAS,QACtB6kB,EAAe7kB,EAAS,UACxB6E,EAAMc,aAAa3F,EAAoB,MAAXjP,EAAkB,OAASA,EAAU,SACvE,IAAIZ,EAASw0B,GAAU,EAAIC,GAAOA,EAAM,EAAIjF,EAAa,OAAS,IAAMkF,GAAgB,IAAMhgB,EAE9F,OADA1U,EAASqE,KAAK6D,IAAI,EAAGlI,GACdA,CACX,CAgBA,SAAgB20B,uBACZ/tB,EACA+c,EACAiR,GAEA,IAAI50B,EAAS,EACb,IAAK,MAAM60B,KAAeD,EAAc,CACpC,MAAM/2B,EAAOg3B,EAAY,GACnBC,EAAgBD,EAAY,GAC5BpkB,EAAakT,EAAoBI,aAAqBlmB,GACxD4S,IACAzQ,GAAUyQ,EAAYqkB,E,CAG9B,OAAO90B,CACX,CAEA,SAAgBunB,kBACZ1X,EACAuV,GAEAnrB,QAAA+rB,iBAAiB1kB,SAAQzD,IACrB,MAAMk3B,EAAUl3B,EAAKT,QAAQ,OAAQ,MACrC,IAAI43B,GAAe,EAAA/6B,QAAAyqB,cAAaqQ,EAASllB,GACrCmlB,IACAnlB,EAAShS,GAAQm3B,GAErB,IAAK,MAAMruB,KAAUye,EAAY+H,YAAa,CAC1C,MAAM8H,EAAsB7P,EAAYiI,WAAW1mB,GAC9CsuB,GAAqB3f,YAAYzF,WACtCmlB,GAAe,EAAA/6B,QAAAyqB,cAAaqQ,EAASE,EAAoB3f,WAAWzF,eAC/C7Q,IAAjBg2B,GACInlB,EAAShS,GAAQm3B,IACjBnlB,EAAShS,GAAQm3B,G,IAKrC,CAEOjyB,eAAemyB,yBAClB9P,EACAgI,EACA+H,EACA/0B,GAEA,MAAMwG,GAAiB,EAAA3M,QAAAm7B,4BACjBzR,GAAsB,EAAA1pB,QAAAo7B,iCACtBlQ,GAAiB,EAAAlrB,QAAAq7B,4BACjBhgB,GAAa,EAAArb,QAAAs7B,wBACbrf,GAAe,EAAAjc,QAAAu7B,+BACfC,EAAqC,GACrCC,EAAqC,GACrCC,EAAe,IAAIxR,IACnByR,EAAe,IAAIzR,IAKzB,GAHAvd,EAAexG,UAAYgtB,EAC3BxmB,EAAe0F,sBAAwB,EAAApS,SAAA27B,0BAAyBjvB,EAAexG,WAE3E+0B,EAAO,CACP,MAAMhlB,EAAY8hB,KAAKC,MAAMiD,GAgB7B,SAdM,EAAAl7B,QAAA67B,oBAAmBlvB,EAAgB+c,EAAqBwB,EAAgBC,EAAajV,IAC3F,EAAAlW,QAAA87B,oCAAmCnvB,IACnC,EAAA3M,QAAA+7B,iCAAgCpvB,IAChC,EAAA3M,QAAAg8B,uCAAsCrvB,IACtC,EAAA3M,QAAAi8B,sBAAqB/Q,EAAgBve,EAAgBwe,GACrD7C,2BAA2BoB,EAAoBG,cAAeH,EAAoBwS,UAClFzS,uBAAuBC,GACnByB,EAAYpV,qBACZoV,EAAYpV,mBAAmByW,qBAAuBuD,4BAA4B5E,EAAYpV,mBAAmB6V,gBAAiBV,KAEtI,EAAA7qB,QAAA4qB,gBAAe5P,EAAY1O,EAAgB+c,EAAqBwB,EAAgBC,IAChF,EAAAnrB,QAAAm8B,6BAA4BjR,EAAgBve,EAAgB0O,EAAWzF,WACvE,EAAAvV,QAAA4qB,gBAAe5P,EAAY1O,EAAgB+c,EAAqBwB,EAAgBC,GAE5EhlB,GAA0C,SAA7BwG,EAAexG,UAAsB,CAElD,MAAMi2B,QAA0B,EAAAn8B,SAAA27B,0BAAyBz1B,GACrD,YAAai2B,EAAkB,UAC/B/gB,EAAWzF,SAAS,WAAa9U,OAAOs7B,EAAkB,QAAQ,Y,CAI1EjM,sBAAsBlU,EAActP,EAAgBue,EAAgB7P,E,CAIxE,MAAMghB,EAAqB,GAC3Bp8B,SAAAq8B,wBAAwBl1B,QAAOI,GAASA,EAAM9B,IAAI8E,WAAW2oB,EAAY,OAAM9rB,SAAQG,IACnF,GAAI5H,SAAA2B,QAAE2wB,QAAQ1qB,EAAMgV,IAChB,IAAK,MAAMb,KAAanU,EAAMgV,GACzBb,EAAkBE,GAAK0gB,uBAAuBpJ,EAAW3rB,EAAM4M,GAAKuH,EAAkBE,IAG/FwgB,EAAY7sB,OAAO6sB,EAAYr2B,OAAQ,MAAM,EAAAhG,QAAAw8B,wBAAuBh1B,EAAO,KAAM,KAAM,KAAMg0B,EAAgBC,EAAgB,YAAY,IAE7IY,EAAYj1B,QAAQlE,GAAMA,EAAE2Y,KAAIxU,SAASsU,KACrC,EAAA3b,QAAAy8B,kCAAiC9gB,EAAUE,GAAc6f,EAAcC,EAAa,IAExFH,EAAep0B,QAAQlE,GAAMA,EAAE2Y,KAAIxU,SAASsU,KACxC,EAAA3b,QAAAy8B,kCAAiC9gB,EAAUE,GAAc6f,EAAcC,EAAa,IAExFF,EAAer0B,QAAQlE,GAAMA,EAAE2Y,KAAIxU,SAASsU,KACxC,EAAA3b,QAAAy8B,kCAAiC9gB,EAAUE,GAAc6f,EAAcC,EAAa,IAExFD,EAAar0B,SAAQ,CAACvD,EAAO4B,KACrB5B,GAASlE,SAAA2B,QAAE2wB,QAAQpuB,KACdA,EAAM,GAAG0G,WAAW,cACrBkxB,EAAanU,IAAI7hB,EAAK,CAAC,MAAO5B,I,IAK1C,IAAI44B,EAA0B,GAC1B/vB,EAAe0F,iBAAiBoJ,QAChCihB,EAAmB/vB,EAAe0F,gBAAgBoJ,OAGtD,IAAIkhB,EAAuB,GACvBhwB,EAAe8H,cAAcgH,QAC7BkhB,EAAgBhwB,EAAe8H,aAAagH,OAGhD,MAAM2U,EAASzjB,EAAe0F,gBAAgB9L,GACxCq2B,EAAuBj8B,OAAO8F,KAAMxG,SAAAmnB,0BAAkCgJ,IACxE,CAAC,IAAK,KAAKnsB,SAASmsB,KAAYwM,EAAqB34B,SAAS,OAC9D24B,EAAqB32B,KAAK,MAE9B,MAAM42B,EAA4B,GAC9BlwB,EAAeuC,aAAa,IAAMvC,EAAeuC,aAAa,IAAMvC,EAAeuC,aAAa,IAAMvC,EAAeuC,aAAa,IAC9HvC,EAAe1K,mBAAmB,GAAG,WACjCrC,SAAA2B,QAAE2wB,QAAQvlB,EAAe1K,mBAAmB,GAAG,UAAU,QACzD0K,EAAe1K,mBAAmB,GAAG,UAAU,MAAMoF,SAAQsU,IACzD,GAAIA,EAAUmhB,IAAK,CACf,GAAIl9B,SAAA2B,QAAEo1B,SAAShb,EAAUE,MACrBF,EAAUE,GAAKF,EAAUE,GAAG1Y,QAAQ,KAAM,QACtCwY,EAAUE,GAAGrR,WAAW,iBACyE,IAA7FoyB,EAAqBx1B,QAAOlE,GAAKyY,EAAU,MAAMnR,WAAW,gBAAkBtH,KAAI8C,QAClF,OAIZ62B,EAAmB52B,KAAK0V,E,KAM5C,IAAK,MAAMmV,IAAW,CAAC4L,EAAkBC,EAAeE,GACpD,GAAI/L,EAAQ9qB,OAAQ,CAChB,MAAM+2B,GAAqB,EAAA/8B,QAAAg9B,4BAA2BlM,GACtDiM,EAAmB11B,SAAS4vB,IACxB,MAAMgG,EAAYV,uBAAuBpJ,EAAW8D,EAAgB7iB,GAAI6iB,EAAgBpb,IACxFob,EAAgBpb,GAAKohB,EACrB,MAAM7C,GAAa,EAAAp6B,QAAAk9B,eAAcjG,EAAgBlb,IAC9B,WAAfqe,GACyF,IAAzFoB,EAAep0B,QAAQlE,GAAMA,EAAE2Y,IAAMohB,GAAa/5B,EAAE6Y,IAAMkb,EAAgBlb,KAAI/V,QAE9Ew1B,EAAehsB,OAAOgsB,EAAex1B,OAAQ,EAAGixB,GAEjC,WAAfmD,GACyF,IAAzFqB,EAAer0B,QAAQlE,GAAMA,EAAE2Y,IAAMohB,GAAa/5B,EAAE6Y,IAAMkb,EAAgBlb,KAAI/V,QAE9Ey1B,EAAejsB,OAAOisB,EAAez1B,OAAQ,EAAGixB,IAEpD,EAAAj3B,QAAAy8B,kCAAiCQ,EAAWvB,EAAcC,EAAa,G,CAiBnF,OAZAxQ,EAAYiI,WAAWD,GAAa,CAChCxmB,eAAgBA,EAChB+c,oBAAqBA,EACrBwB,eAAgBA,EAChB7P,WAAYA,EACZY,aAAcA,EACduf,eAAgBA,EAChBC,eAAgBA,EAChBC,aAAcA,EACdC,aAAcA,GAGX,CAACtgB,EAAWzF,SAAUqG,EACjC,CAEA,SAASsgB,uBAAuBpJ,EAAmB5yB,EAAqB08B,GACpE,IAAIl3B,EAASotB,EAAY,IAOzB,OANI8J,EACAl3B,GAAUk3B,EAAU95B,QAAQ,WAAY,KAAOgwB,EAAY,KACpD5yB,IACPwF,GAAUxF,GAEdwF,EAASA,EAAO5C,QAAQgwB,EAAY,IAAMA,EAAY,IAAKA,EAAY,KAChEptB,CACX,CAEA,SAAgBo3B,8BACZC,EACAC,EACA1Q,EACA2Q,EACArhB,EACAtO,EAAgB,GAEhB,QAAyB5I,IAArBs4B,EAGJ,IAAK,MAAM1hB,KAAa0hB,EAAkB,CACtC,IAAIvP,EAAOnS,EAAUG,GACrB,GAAa,OAATgS,EACA,SAEJ,GAAInS,EAAUE,GAAI,CACd,MAAMsR,EAASC,sBAAsBzR,EAAUE,GAAI8Q,EAAwBhf,EAAe2vB,GAC1F,GAAe,IAAXnQ,EAAc,SAEdW,EADAA,EAAK7pB,SAAS,YACP6pB,EAAKpD,WAAW,WAAY1pB,OAAOmsB,IAEnC,IAAMW,EAAO,KAAOX,C,CAGnC,MAAM2K,EAAU9b,YAAY8R,EAAMwP,EAAUrhB,EAAcN,EAAUO,GAAIP,EAAUQ,IAC5EohB,EAAQ,GACd,GAAI5hB,EAAUI,GACV,GAAIJ,EAAUI,GAAGvR,WAAW,MAAQmR,EAAUI,GAAGvR,WAAW,MACxD,IAAK,MAAMgzB,KAAQv9B,SAAAq6B,aACfiD,EAAMt3B,KAAK0V,EAAUI,GAAG5Y,QAAQ,IAAKq6B,SAGzCD,EAAMt3B,KAAK0V,EAAUI,IAG7B,IAAK,MAAMwT,KAAQgO,EAAO,CACtB,IAAIE,EAAWlO,EACX5T,EAAU+b,KACV+F,GAAY,IAAM9hB,EAAU+b,IAE5B+F,KAAYL,EACZA,EAAMK,IAAa3F,EAEnBsF,EAAMK,GAAY3F,C,EAIlC,CA9mEaz3B,QAAAA,eAAc4qB,eA2d3B5qB,QAAAA,4BAAA0vB,4BAwIA1vB,QAAAA,sBAAA8vB,sBAiPA9vB,QAAAA,mCAAAyyB,mCAgDAzyB,QAAAA,2BAAAusB,2BAwCAvsB,QAAAA,sBAAA+sB,sBA6PA/sB,QAAAA,kBAAAg1B,kBA+BAh1B,QAAAA,kBAAA+0B,kBAudA/0B,QAAAA,eAAA64B,eA0NA74B,QAAAA,uBAAAq6B,uBAiBAr6B,QAAAA,kBAAAitB,kBAuBAjtB,QAAAA,yBAAA46B,yBA6JA56B,QAAAA,8BAAA88B,8BAkDA,MAAMO,2BAA6B,CAAC,UAAW,aAAc,UAAW,SAExE,SAAgBC,8BAA8BxS,EAA2ByS,EAAkBz3B,GACvF,MAAMJ,EAAS,CAAC,EACV4mB,EAAmC,GA6BzC,OA5BAC,2BAA2BzB,EAAYkB,YAAYhlB,SAAQvD,IACvD,MAAM8D,EAAU9D,EAAM8D,QAAQ,KACxBurB,EAAYrvB,EAAMwwB,UAAU,EAAG1sB,GACrC,GAAIurB,GAAahtB,EAAW,CACxB,MAAMpC,EAAOD,EAAMwwB,UAAU1sB,IACzB81B,2BAA2Bz5B,SAASF,EAAKuwB,UAAU,KAAuE,IAAhE3H,EAAuBvlB,QAAOlE,GAAKA,EAAE2G,SAAS9F,KAAOiC,SAC/G2mB,EAAuB1mB,KAAKnC,E,KAIxCnD,OAAO8F,KAAK0kB,EAAYiI,YAAYhsB,QAAO+rB,GAAaA,GAAahtB,IAAWkB,SAAQ8rB,IACpF,MAAM0K,EAAY1S,EAAYiI,WAAWD,GACzC,IAAIvd,EAAWioB,EAAYA,EAAUxiB,WAAWzF,SAAW5V,QAAA2rB,cACvDhrB,OAAO8F,KAAKm3B,GAAU53B,SACtB4P,EAAWhW,SAAA2B,QAAES,UAAU4T,GACvBjV,OAAO8F,KAAKm3B,GAAUv2B,SAAQzD,IAC1BgS,EAAShS,GAAQg6B,EAASh6B,EAAK,KAGvC,MAAMqY,EAAe4hB,EAAYA,EAAU5hB,aAAejc,QAAAqtB,uBAC1D,CACIlC,EAAYiI,WAAWD,IAAYqI,eACnCrQ,EAAYiI,WAAWD,IAAYsI,gBACrCp0B,SAAQy2B,IACNX,8BAA8Bp3B,EAAQ+3B,EAAenR,EAAwB/W,EAAUqG,EAAa,GACtG,KAEN,EAAAlc,SAAAoF,iBAAgBgmB,EAAYkB,WAAWG,qBAAsBzmB,GACtDA,CACX,CAEA,SAAgBg4B,8BAA8B5S,GAC1C,MAAMplB,EAAS,CAAC,EACV4mB,EAAmC,GACnCqR,EAAwBpR,2BAA2BzB,EAAYkB,YACrEO,2BAA2BzB,EAAYmB,YAAYjlB,SAAQvD,IACmB,IAAtEk6B,EAAsB52B,QAAOlE,GAAKA,EAAE2G,SAAS,IAAM/F,KAAQkC,QAC3D2mB,EAAuB1mB,KAAKnC,E,IAGpC,MAAM8R,EAAW5V,QAAA2rB,cACX1P,EAAejc,QAAAqtB,uBAQrB,MAPA,CACIlC,EAAYmB,WAAWkP,eACvBrQ,EAAYmB,WAAWmP,gBACzBp0B,SAAQy2B,IACNX,8BAA8Bp3B,EAAQ+3B,EAAenR,EAAwB/W,EAAUqG,EAAa,KAExG,EAAAlc,SAAAoF,iBAAgBgmB,EAAYmB,WAAWE,qBAAsBzmB,GACtDA,CACX,CAEA,SAAgBk4B,uBAAuBz2B,GACnC,IAAIsqB,EAAW,EACXE,EAAU,EAOd,OANIxqB,EAAM,IAAMA,EAAM,IAAMA,EAAM,KAC9BsqB,EAAWtqB,EAAM,GAAKA,EAAM,GAC5BsqB,GAAYtqB,EAAM,GAAKA,EAAM,GAC7BsqB,EAAW1nB,KAAKE,MAAiB,IAAXwnB,GAAmB,GACzCE,EAAU5nB,KAAKE,MAAkC,KAA3B9C,EAAM,GAAKA,EAAM,GAAK,IAAa,IAEtD,CAACsqB,EAAUE,EACtB,CAEA,SAAgBkM,mBACZC,EACAliB,GAEA,MAAMlW,EAAS,GACTosB,EAAWgM,EAAoBhM,SACrC,GAAI9xB,QAAA4mB,iBAAiBhjB,SAASkuB,GAC1BpsB,EAAOE,KAAK,CACRksB,EACA9xB,QAAAinB,0BAA0B2G,IAAIkE,IAAa,KAC1ClW,EAAagW,KAAaE,GAC3B,KACClW,EAAagW,KAAaE,GAC3B,KACA,EACA,KACA,YAGJ,IAAK,IAAI3qB,KAASyU,EAAakW,GAC3B,GAAK3qB,EAAM,KACPA,EAAM,GAAGgD,WAAW,SACpBhD,EAAM,GAAGqC,SAAS,WAClBrC,EAAM,IAAIqC,SAAS,QAAS,CAC5B,GAAIrC,EAAM,GAAGgD,WAAW,SAAU,CAC9BhD,EAAQ5H,SAAA2B,QAAES,UAAUwF,GACpB,MAAOsqB,GAAYmM,uBAAuBz2B,GAC1CA,EAAM,GAAKA,EAAM,GAAKsqB,EAAW,G,CAErC/rB,EAAOE,KAAKuB,E,CAIxB,OAAOzB,CACX,CAEA,SAAgBq4B,6BACZD,EACA94B,EACA4W,GAEA,IAAIlW,EAAS,EACb,MAAMiV,EAAOkjB,mBAAmBC,EAAqBliB,GACrD,GAAIjB,GAAQA,EAAKhV,OAASX,GAAS84B,EAAoBE,UAAUr4B,OAASX,EAAO,CAC7E,MAAMi5B,EAAiBtjB,EAAK3V,GACtB+rB,EAAmB+M,EAAoBE,UAAUh5B,GACjDk5B,EAAQJ,EAAoBK,OAAOn5B,GACnCo5B,EAAWC,uBAAuBJ,EAAgB,EAAGriB,EAAagW,KAAM,IAC9E,IAAK,IAAIO,EAAI,EAAGA,EAAI+L,EAAO/L,IAAK,CAC5B,IAAImM,EAAUF,EACd,CAAC,KAAM,MAAMp3B,SAAS8f,IACdA,KAAYiK,GAAeoB,EAAIpB,EAAYjK,KAC3CwX,EAAUD,uBAAuBJ,EAAgB,EAAGriB,EAAagW,KAAM9K,G,IAG/EphB,GAAU44B,C,CAEd,CAAC,MAAO,OAAOt3B,SAAS8f,IAChBA,KAAYiK,IACZrrB,GAAU24B,uBAAuBJ,EAAgB,EAAGriB,EAAagW,KAAM9K,EAAUiK,EAAYjK,IAAasX,E,IAItH,OAAO14B,CACX,CAEA,SAAgB64B,6BACZC,EACA5iB,GAEA,IAAIlW,EAAS,EAOb,OANA84B,EAAkBx3B,SAAS82B,IACvB,MAAMnjB,EAAOkjB,mBAAmBC,EAAqBliB,GACrD,IAAK,IAAI9O,EAAI,EAAGA,EAAI6N,EAAKhV,OAAQmH,IAC7BpH,GAAUq4B,6BAA6BD,EAAqBhxB,EAAG8O,E,IAGhElW,CACX,CAGA,SAAgB24B,uBACZJ,EACAQ,EACAC,EACA5X,EACA6X,EAAgB,GAEhB,IAAIj5B,EAASjF,OAAOw9B,EAAeQ,IACnC,MAAMjO,EAAayN,EAAe,GAClC,GAAInX,GAAY0J,EACZ,GAAI,CAAC,KAAM,MAAM5sB,SAASkjB,GAAW,CACjC,MAAM8X,EAAc9X,EAAW,MAAQ0J,EACnCoO,KAAeF,IACfh5B,GAAWg5B,EAA0BE,G,MAEtC,GAAI,CAAC,MAAO,OAAOh7B,SAASkjB,GAAW,CAC1C,MAAM8X,EAAc9X,EAAW,OAC/B,GAAI8X,KAAeF,EAAmB,CAClC,IAAI7X,EAAe6X,EAA0BE,GACzCX,EAAe,KACfpX,GAAenhB,EAASu4B,EAAe,IAEvCA,EAAe,KACfpX,GAAeoX,EAAe,IAE9BA,EAAe,KACfpX,GAAeoX,EAAe,IAElCpX,GAAe8X,EACfj5B,GAAUmhB,C,EAItB,OAAOnhB,CACX,CAEA,SAAgBm5B,6BAA6B/X,EAAkB0J,GAC3D,IAAIsO,EAcJ,MAbiB,OAAbhY,GAAoC,MAAf0J,EACrBsO,EAAkB,IACE,OAAbhY,GAAoC,MAAf0J,EAC5BsO,EAAkB,IACE,OAAbhY,GAAoC,MAAf0J,EAC5BsO,EAAkB,IACE,OAAbhY,GAAoC,MAAf0J,EAC5BsO,EAAkB,IACE,QAAbhY,GAAqC,MAAf0J,EAC7BsO,EAAkB,IACE,QAAbhY,GAAqC,MAAf0J,IAC7BsO,EAAkB,KAEfA,CACX,CAxMA9+B,QAAAA,8BAAAs9B,8BAkCAt9B,QAAAA,8BAAA09B,8BAqBA19B,QAAAA,uBAAA49B,uBAYA59B,QAAAA,mBAAA69B,mBAoCA79B,QAAAA,6BAAA+9B,6BA8BA/9B,QAAAA,6BAAAu+B,6BAeAv+B,QAAAA,uBAAAq+B,uBAoCAr+B,QAAAA,6BAAA6+B,4B,mPC7kFA,MAAAt/B,EAAAC,EAAAC,EAAA,OAMA,SAAgB62B,EAAS7yB,GACrB,MAAwB,kBAAVA,GAAsBA,aAAiB9C,MACzD,CAEA,SAAgBozB,EAAUtwB,GACtB,OAAOs7B,SAASt7B,IAAmB,MAATA,CAC9B,CAEA,SAAgB2yB,EAAU3yB,GACtB,OAAiB,IAAVA,IAA4B,IAAVA,CAC7B,CAEA,SAAgB4Y,EAAc5Y,GAC1B,MAAMu7B,EAAS1+B,OAAO2+B,UAAUC,SAASC,KAAK17B,GAC9C,MAAkB,oBAAXu7B,CACX,CAQA,SAAgBl6B,EAAgBs6B,EAAU1kB,GACtC,GAAInb,EAAA2B,QAAEmb,cAAc3B,IAAQnb,EAAA2B,QAAEmb,cAAc+iB,GAAM,CAC9C,MAAMC,EAAU/+B,OAAO8F,KAAKsU,GAC5B,IAAK,MAAMrV,KAAOg6B,EACdD,EAAI/5B,GAAOqV,EAAIrV,GAEnB,IAAK,MAAMA,KAAO/E,OAAO8F,KAAKg5B,GACrBC,EAAQz7B,SAASyB,WAAa+5B,EAAI/5B,E,CAG/C,OAAO+5B,CACX,CAlCAp/B,EAAAA,SAAAs2B,EAIAt2B,EAAAA,UAAA+zB,EAIA/zB,EAAAA,UAAAo2B,EAIAp2B,EAAAA,cAAAqc,EAWArc,EAAAA,gBAAA8E,EAcO,MAAMw6B,EAAYC,GAAiBA,EAAMj2B,MAAM,KAAMk2B,MAAOl2B,MAAM,KAAMm2B,QAAlEz/B,EAAAA,SAAQs/B,C,wEC3CrB,MAAA33B,EAAAlI,EAAA,MAEMigC,GAAO,EAAA/3B,EAAAg4B,YAAW,CACtBC,QAAQ,EACRz3B,OAAQ,QACR03B,eAAgB,QAChBC,UAAU,IAEZ9/B,EAAAA,WAAe0/B,C,0sECRf,MAAA9/B,EAAAH,EAAA,MACAF,EAAAC,EAAAC,EAAA,OACAC,EAAAD,EAAA,MAwJA,SAASsgC,IACL,MAAMxqB,EAAmB,CAAC,EAW1B,OAVAvV,EAAAggC,eAAeh5B,SAASvD,IACpBA,EAAMuD,SAAQzD,IACVgS,EAAShS,GAAQ,CAAC,GACpB,IAENgS,EAAS,OAAS,EAClBA,EAAS,UAAY,GACrBA,EAAS,YAAc,IACvBA,EAAS,QAAU,EACnBA,EAAS,QAAU,EACZA,CACX,CAGA,SAAS0qB,IACL,MAAM1qB,EAAmB,CAAC,EAO1B,MANA,CAACvV,EAAAmuB,iBAAiBnnB,SAASvD,IACvBA,EAAMuD,SAAQzD,IACVgS,EAAShS,GAAQ,CAAC,GACpB,IAENgS,EAAS,OAAS,EACXA,CACX,CA/KavV,EAAAA,gBAAe,CACxB,OACA,QACA,SAESA,EAAAA,gBAAe,CACxB,OACA,MACA,MACA,QAESA,EAAAA,gBAAe,CACxB,MACA,SACA,UACA,UACA,WACA,WACA,UAESA,EAAAA,qBAAoB,CAC7B,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YAESA,EAAAA,mBAAkB,CAC3B,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QAESA,EAAAA,eAAc,CACvB,aACA,WACA,aACA,cACA,aACA,WAESA,EAAAA,iBAAgB,CACzB,cACA,YACA,cACA,eACA,cACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,YACA,YACA,cACA,eACA,eACA,gBAESA,EAAAA,eAAc,CACvB,WACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,iBACA,YACA,kBAESA,EAAAA,iBAAgB,CACzB,SACA,MACA,OACA,OACA,MACA,OACA,QAESA,EAAAA,gBAAe,CACxB,SACA,QACA,QACA,SACA,QACA,WACA,YACA,YACA,cAESA,EAAAA,oBAAmB,CAC5B,WAESA,EAAAA,oBAAmB,CAC5B,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SAESA,EAAAA,mBAAkB,CAC3B,QAGSA,EAAAA,kBAAiB,IAAI6pB,IAAI,CAClC,CAAC,UAAW7pB,EAAA4rB,cACZ,CAAC,UAAW5rB,EAAAkgC,cACZ,CAAC,UAAWlgC,EAAAmgC,cACZ,CAAC,eAAgBngC,E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","sources":["webpack://gencalc/./src/components/ArtifactItem.vue","webpack://gencalc/./src/components/ArtifactSetSelect.vue","webpack://gencalc/./src/components/CharacterSelect.vue","webpack://gencalc/./src/components/CompositionFunction.vue","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue","webpack://gencalc/./src/components/ArtifactItem.vue?7abc","webpack://gencalc/./src/components/ArtifactSetSelect.vue?96cd","webpack://gencalc/./src/components/CharacterSelect.vue?9536","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?6db7","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?fd95","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue?d05e","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?b3df","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?a906","webpack://gencalc/./src/calculate.ts","webpack://gencalc/./src/common.ts","webpack://gencalc/./src/i18n.ts","webpack://gencalc/./src/input.ts","webpack://gencalc/./src/master.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorCommon.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFunc.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFuncCharacter.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFuncWeapon.ts","webpack://gencalc/./src/pages/TeamManager/team.ts","webpack://gencalc/./src/particlemaster.ts","webpack://gencalc/./src/components/ArtifactItem.vue?ce03","webpack://gencalc/./src/components/ArtifactSetSelect.vue?aaa4","webpack://gencalc/./src/components/CharacterSelect.vue?237b","webpack://gencalc/./src/components/CompositionFunction.vue?ba0e","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?9b31","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?c0a3","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue?5a65","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?15e4","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?8dd9"],"sourcesContent":["<template>\r\n  <div class=\"artifact\">\r\n    <table v-if=\"control == 'editable'\" class=\"artifact\">\r\n      <tbody>\r\n        <tr>\r\n          <td class=\"left-column\" style=\"width: 45%;\">\r\n            <div class=\"control\">\r\n              <button type=\"button\" @click=\"isEditing = !isEditing\">\r\n                <span v-if=\"isEditing\" class=\"material-symbols-outlined\"> edit_off </span>\r\n                <span v-else class=\"material-symbols-outlined\"> edit </span>\r\n              </button>\r\n            </div>\r\n            <div class=\"with-tooltip\">\r\n              <img class=\"artifact-icon\" :src=\"artifactImgSrc\" :alt=\"displayName(copiedArtifact.name)\"\r\n                @click=\"artifactIconOnClick()\">\r\n              <div class=\"tooltip\">{{ displayName(copiedArtifact.name) }}</div>\r\n            </div>\r\n            <div class=\"edit-mainstat\" v-if=\"isEditing\">\r\n              <select v-model=\"copiedArtifact.mainStat\" @change=\"onChange\">\r\n                <option v-for=\"option in mainStatOptions\" :key=\"option\" :value=\"option\">\r\n                  {{ displayName(option) }}\r\n                </option>\r\n              </select>\r\n              <input type=\"number\" v-model=\"copiedArtifact.mainStatValue\" :step=\"statStep(copiedArtifact.mainStat)\"\r\n                min=\"0\" @change=\"onChange\">\r\n            </div>\r\n            <div v-else class=\"mainstat\" style=\"margin: 1px 0\">\r\n              {{ displayName(copiedArtifact.mainStat).replace(/%$/, '') + '+' +\r\n                displayStatValue(copiedArtifact.mainStat,\r\n                  copiedArtifact.mainStatValue)\r\n              }}\r\n            </div>\r\n            <div v-if=\"isEditing\">\r\n              <select class=\"star\" v-model=\"copiedArtifact.rarity\" @change=\"starOnChange\">\r\n                <option value=\"5\"> 5 </option>\r\n                <option value=\"4\"> 4 </option>\r\n              </select>\r\n            </div>\r\n            <div v-else>\r\n              <img class=\"star\" v-for=\"dummy in new Array(copiedArtifact.rarity)\" src=\"images/star.png\" :key=\"dummy\">\r\n            </div>\r\n          </td>\r\n          <td style=\"width: 55%\">\r\n            <table class=\"artifact-substat\">\r\n              <tbody>\r\n                <tr v-for=\"(subStat, index) in copiedArtifact.subStats\" :key=\"index\">\r\n                  <template v-if=\"isEditing\">\r\n                    <td class=\"right\">\r\n                      <select v-model=\"subStat.name\" @change=\"onChange\">\r\n                        <option v-for=\"option in subStatOptions\" :key=\"option\" :value=\"option\"\r\n                          :disabled=\"subStatOptionDisabled(option, subStat.name)\">\r\n                          {{ displayName(option) }}\r\n                        </option>\r\n                      </select>\r\n                    </td>\r\n                    <td class=\"right\">\r\n                      <input type=\"number\" v-model=\"subStat.value\" :step=\"statStep(subStat.name)\" min=\"0\"\r\n                        @change=\"onChange\">\r\n                    </td>\r\n                  </template>\r\n                  <td v-else>\r\n                    {{ displayName(subStat.name).replace(/%$/, '') + '+' + displayStatValue(subStat.name, subStat.value)\r\n                    }}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <table v-else class=\"artifact\" @click=\"selectOnClick()\">\r\n      <tbody>\r\n        <tr>\r\n          <td class=\"left-column\" style=\"width: 45%;\">\r\n            <div v-if=\"score\" class=\"score\"> {{ Math.round(score * 10) / 10 }}</div>\r\n            <div class=\"control\">\r\n              <template v-if=\"control == 'selectable'\">\r\n                <button type=\"button\">\r\n                  <span v-if=\"selected\" class=\"material-symbols-outlined\" style=\"color: yellow\"> select_check_box\r\n                  </span>\r\n                  <span v-else class=\"material-symbols-outlined\"> check_box_outline_blank </span>\r\n                </button>\r\n              </template>\r\n            </div>\r\n            <div class=\"with-tooltip\">\r\n              <img class=\"artifact-icon\" :src=\"artifactImgSrc\" :alt=\"displayName(copiedArtifact.name)\">\r\n              <div class=\"tooltip\">{{ displayName(copiedArtifact.name) }}</div>\r\n            </div>\r\n            <div class=\"mainstat\" style=\"margin: 1px 0\">\r\n              {{ displayName(copiedArtifact.mainStat).replace(/%$/, '') + '+' +\r\n                displayStatValue(copiedArtifact.mainStat,\r\n                  copiedArtifact.mainStatValue)\r\n              }}\r\n            </div>\r\n            <div>\r\n              <img class=\"star\" v-for=\"dummy in new Array(copiedArtifact.rarity)\" src=\"images/star.png\" :key=\"dummy\">\r\n            </div>\r\n          </td>\r\n          <td style=\"width: 55%\">\r\n            <table class=\"artifact-substat\">\r\n              <tbody>\r\n                <tr v-for=\"(subStat, index) in copiedArtifact.subStats\" :key=\"index\">\r\n                  <td>\r\n                    {{ displayName(subStat.name).replace(/%$/, '') + '+' + displayStatValue(subStat.name, subStat.value)\r\n                    }}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div v-show=\"isListShow\">\r\n      <ArtifactSetSelect :visible=\"true\" :index=\"1\" :artifact-set=\"artifact.setname\"\r\n        :artifact-set-masters=\"artifactSetMasters\" :cat_id=\"artifact.cat_id\" @update:artifact-set=\"updateArtifactSet\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport _ from 'lodash';\r\nimport { overwriteObject } from \"@/common\";\r\nimport { ARTIFACT_SET_MASTER_DUMMY, TArtifact, ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY } from \"@/input\";\r\nimport { ARTIFACT_SET_MASTER, TArtifactSetEntry, TArtifactSetKey, getArtifactIconUrl } from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\nimport ArtifactSetSelect from \"./ArtifactSetSelect.vue\";\r\n\r\nexport default defineComponent({\r\n  name: 'ArtifactItem',\r\n  props: {\r\n    artifact: { type: Object as PropType<TArtifact>, required: true },\r\n    id: { type: Number },\r\n    control: String,\r\n    initial: Boolean,\r\n    selected: Boolean,\r\n    score: Number,\r\n  },\r\n  components: {\r\n    ArtifactSetSelect,\r\n  },\r\n  emits: ['update:artifact', 'select:artifact'],\r\n  setup(props, context) {\r\n    const { displayName, displayStatValue, percent } = CompositionFunction();\r\n\r\n    const copiedArtifact = reactive(_.cloneDeep(props.artifact));\r\n    const artifactSetMasters = reactive([ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[]);\r\n    const isEditing = ref(false);\r\n    const isSelected = ref(false);\r\n    const isListShow = ref(false);\r\n\r\n    const artifactImgSrc = computed(() => {\r\n      return getArtifactIconUrl(copiedArtifact.setname, copiedArtifact.cat_id);\r\n    });\r\n\r\n    const MAINSTAT_CAT_ARR = {\r\n      '1': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '2': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '3': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '4': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '5': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n    };\r\n\r\n    const mainStatOptions = computed(() => {\r\n      return (MAINSTAT_CAT_ARR as any)[copiedArtifact.cat_id];\r\n    });\r\n\r\n    const subStatOptions = computed(() => {\r\n      return ARRAY;\r\n    });\r\n\r\n    const statStep = (stat: string) => {\r\n      return percent(stat) ? 0.1 : 1;\r\n    };\r\n\r\n    const subStatOptionDisabled = ((value: string, selected: string) => {\r\n      if (value == selected) return false;\r\n      const work = copiedArtifact.subStats.map(s => s.name);\r\n      return work.includes(value);\r\n    });\r\n\r\n    const onChange = () => {\r\n      context.emit('update:artifact', props.id, copiedArtifact);\r\n    };\r\n\r\n    const starOnChange = () => {\r\n      copiedArtifact.rarity = Number(copiedArtifact.rarity);\r\n    }\r\n\r\n    const artifactIconOnClick = () => {\r\n      if (isEditing.value) {\r\n        isListShow.value = !isListShow.value;\r\n      } else {\r\n        isListShow.value = false;\r\n      }\r\n    };\r\n\r\n    const selectOnClick = () => {\r\n      if (props.control === 'selectable') {\r\n        context.emit('select:artifact', props.id);\r\n      }\r\n    };\r\n\r\n    const updateArtifactSet = (artifactSet: TArtifactSetKey) => {\r\n      copiedArtifact.setname = artifactSet;\r\n      const master = ARTIFACT_SET_MASTER[artifactSet];\r\n      copiedArtifact.rarity = master.;\r\n      if ('artifact_list' in master) {\r\n        copiedArtifact.name = master.artifact_list[copiedArtifact.cat_id - 1];\r\n      }\r\n      isListShow.value = false;\r\n      onChange();\r\n    };\r\n\r\n    function onLoad() {\r\n      if (props.initial !== undefined) {\r\n        if (props.control === 'editable') {\r\n          isEditing.value = props.initial;\r\n        } else if (props.control === 'selectable') {\r\n          isSelected.value = props.initial;\r\n        }\r\n      }\r\n    }\r\n    onLoad();\r\n\r\n    watch(props, (newVal, oldVal) => {\r\n      overwriteObject(copiedArtifact, newVal.artifact);\r\n      if (newVal.initial != oldVal.initial) {\r\n        onLoad();\r\n      }\r\n    });\r\n\r\n    return {\r\n      displayName, displayStatValue,\r\n\r\n      copiedArtifact,\r\n      artifactSetMasters,\r\n      isEditing,\r\n      isSelected,\r\n      isListShow,\r\n\r\n      artifactImgSrc,\r\n      mainStatOptions,\r\n      subStatOptions,\r\n      subStatOptionDisabled,\r\n      statStep,\r\n\r\n      onChange,\r\n      starOnChange,\r\n      artifactIconOnClick,\r\n      updateArtifactSet,\r\n      selectOnClick,\r\n    }\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\ndiv.artifact {\r\n  display: inline-block;\r\n  width: calc(25% - 10px);\r\n  min-width: 44rem;\r\n  margin: 2px;\r\n  font-size: 1.8rem;\r\n  background-color: rgb(26, 79, 109);\r\n  border-radius: 10px 10px 0 0;\r\n}\r\n\r\ntable.artifact {\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  width: 100%;\r\n  table-layout: fixed;\r\n  border-spacing: 0;\r\n}\r\n\r\ntable.artifact td.left-column {\r\n  position: relative;\r\n}\r\n\r\ntable.artifact td.left-column div.control {\r\n  position: absolute;\r\n  left: -5px;\r\n  bottom: -5px;\r\n}\r\n\r\ntable.artifact td.left-column div.control button {\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n\r\ntable.artifact td.left-column div.control span {\r\n  font-size: 2.4rem;\r\n  color: blanchedalmond;\r\n}\r\n\r\ndiv.mainstat {\r\n  margin: 1px 0;\r\n}\r\n\r\ntable.artifact-substat {\r\n  width: 100%;\r\n  border-spacing: 0;\r\n}\r\n\r\ntable.artifact tr td {\r\n  vertical-align: top;\r\n  border-bottom: 2px solid whitesmoke;\r\n  padding: 2px 1px;\r\n  white-space: nowrap;\r\n}\r\n\r\ntable.artifact-substat tr td {\r\n  vertical-align: middle;\r\n  border-bottom: 1px solid gray;\r\n  padding: 0px 1px;\r\n  line-height: 2.8rem;\r\n  text-align: left;\r\n}\r\n\r\ntable.artifact-substat tr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\ntable.artifact-substat td.right {\r\n  text-align: right;\r\n}\r\n\r\nselect {\r\n  width: 100%;\r\n  margin: auto 1px;\r\n  padding: 0 1px;\r\n  border: none;\r\n  border-radius: 2px;\r\n}\r\n\r\ninput[type=\"number\"] {\r\n  width: 9rem;\r\n  margin: auto;\r\n  padding: 0 1px;\r\n  border: none;\r\n}\r\n\r\ndiv.edit-mainstat {\r\n  margin: 1px 0;\r\n}\r\n\r\ndiv.edit-mainstat select {\r\n  width: calc(100% - 9rem - 2px);\r\n}\r\n\r\ntable.edit-mainstat input[type=\"number\"] {\r\n  width: calc(100% - 2px);\r\n}\r\n\r\nimg.artifact-icon {\r\n  width: calc(6rem - 2px);\r\n  height: calc(6rem - 2px);\r\n  border: 1px solid gray;\r\n  border-radius: 50%;\r\n}\r\n\r\nimg.star {\r\n  width: 1.6rem;\r\n  height: 1.6rem;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nselect.star {\r\n  width: 8rem;\r\n}\r\n\r\ndiv.score {\r\n  position: absolute;\r\n  left: 5px;\r\n  top: 3px;\r\n}\r\n</style>","<template>\r\n  <div v-if=\"visible\">\r\n    <table>\r\n      <template v-for=\"item in artifactSetEffects\" :key=\"item\">\r\n        <tr>\r\n          <th class=\"title\">{{ displayName(item.key) }}</th>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"description\">{{ item.value }}</td>\r\n        </tr>\r\n      </template>\r\n    </table>\r\n\r\n    <ul class=\"select-list\">\r\n      <li class=\"with-tooltip\" v-for=\"item in filteredList\" :key=\"item.key\">\r\n        <img :class=\"'artifact-set' + bgImageClass(item) + selectedClass(item)\" :src=\"getArtifactIconUrl(item.key, cat_id)\"\r\n          :alt=\"item.key\" @click=\"$emit('update:artifact-set', item.key)\" />\r\n        <div class=\"tooltip\">{{ displayName(item.key) }}</div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  ARTIFACT_SET_MASTER_LIST,\r\n  getArtifactIconUrl,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n  TArtifactSetEntry,\r\n} from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive } from \"vue\";\r\nimport CompositionFunction from './CompositionFunction.vue';\r\n\r\nexport default defineComponent({\r\n  name: \"ArtifactSetSelect\",\r\n  props: {\r\n    visible: { type: Boolean, required: true },\r\n    index: { type: Number, required: true },\r\n    artifactSet: { type: String, required: true },\r\n    artifactSetMasters: { type: Array as PropType<TArtifactSetEntry[]>, required: true },\r\n    cat_id: { type: Number },\r\n  },\r\n  emits: [\"update:artifact-set\"],\r\n  setup(props) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const bgImageClass = (item: TArtifactSetEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TArtifactSetEntry) => {\r\n      return item.key == props.artifactSet ? \" selected\" : \"\";\r\n    };\r\n    const artifactSetMastersRea = reactive(props.artifactSetMasters);\r\n\r\n    const filteredList = computed(() => {\r\n      return ARTIFACT_SET_MASTER_LIST as TArtifactSetEntry[];\r\n    });\r\n\r\n    const artifactSetEffects = computed(() => {\r\n      const result = [] as any;\r\n      if (artifactSetMastersRea.length > 0) {\r\n        if (\"2\" in artifactSetMastersRea[0]) {\r\n          result.push({\r\n            key: artifactSetMastersRea[0].key + \" \" + \"2\",\r\n            value: artifactSetMastersRea[0][\"2\"]?.,\r\n          });\r\n        }\r\n        if (artifactSetMastersRea.length > 1) {\r\n          if (artifactSetMastersRea[0].key == artifactSetMastersRea[1].key) {\r\n            if (\"4\" in artifactSetMastersRea[0]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[0].key + \" \" + \"4\",\r\n                value: artifactSetMastersRea[0][\"4\"]?.,\r\n              });\r\n            }\r\n          } else {\r\n            if (\"2\" in artifactSetMastersRea[1]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[1].key + \" \" + \"2\",\r\n                value: artifactSetMastersRea[1][\"2\"]?.,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    return {\r\n      displayName,\r\n      getArtifactIconUrl,\r\n\r\n      bgImageClass,\r\n      selectedClass,\r\n      filteredList,\r\n      artifactSetEffects,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nimg.artifact-set {\r\n  width: 60px;\r\n  height: 60px;\r\n  background-size: contain;\r\n}\r\n\r\n.selected {\r\n  background-color: gold;\r\n}\r\n\r\n:checked+img {\r\n  background-color: gold;\r\n}\r\n\r\ntable {\r\n  width: calc(100% - 1rem);\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  border: 2px solid gray;\r\n  border-spacing: 0;\r\n}\r\n\r\nth,\r\ntd {\r\n  padding: 2px 8px;\r\n  border: 1px solid gray;\r\n  border-spacing: 0;\r\n}\r\n\r\nth.title {\r\n  color: burlywood;\r\n}\r\n\r\n.description {\r\n  text-align: left;\r\n}\r\n</style>\r\n","<template>\r\n  <div v-if=\"visible\">\r\n    <ul class=\"select-list\">\r\n      <li v-for=\"item in elementList\" :key=\"item\">\r\n        <label>\r\n          <input\r\n            class=\"hidden\"\r\n            type=\"checkbox\"\r\n            v-model=\"elementCheckList[item]\"\r\n            @change=\"checkListOnChange(item, elementCheckList)\"\r\n          />\r\n          <img class=\"filter\" :src=\"elementSrc(item)\" :alt=\"item\" />\r\n        </label>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"select-list\">\r\n      <li v-for=\"item in weaponList\" :key=\"item\">\r\n        <label>\r\n          <input\r\n            class=\"hidden\"\r\n            type=\"checkbox\"\r\n            v-model=\"weaponCheckList[item]\"\r\n            @change=\"checkListOnChange(item, weaponCheckList)\"\r\n          />\r\n          <img class=\"filter\" :src=\"weaponSrc(item)\" :alt=\"item\" />\r\n        </label>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"select-list\">\r\n      <li class=\"with-tooltip\" v-for=\"item in filteredList\" :key=\"item.key\">\r\n        <img\r\n          :class=\"'character' + bgImageClass(item) + selectedClass(item)\"\r\n          :src=\"item.icon_url\"\r\n          :alt=\"item.key\"\r\n          @click=\"characterOnClick(item.key)\"\r\n        />\r\n        <div class=\"tooltip\">{{ displayName(item.key) }}</div>\r\n        <img class=\"vision\" :src=\"visionSrc(item)\" :alt=\"item.\" />\r\n        <div class=\"selection-number\" v-show=\"selectionNumber(item.key)\">\r\n          {{ selectionNumber(item.key) }}\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  TCharacterEntry,\r\n  ELEMENT_IMG_SRC,\r\n  TVisionKey,\r\n  WEAPON_IMG_SRC,\r\n  TWeaponTypeKey,\r\n  CHARACTER_MASTER_LIST,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n} from \"@/master\";\r\nimport { defineComponent, reactive, computed, PropType } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\n\r\ninterface ICheckList {\r\n  [key: string]: boolean;\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"CharacterSelect\",\r\n  props: {\r\n    character: { type: String },\r\n    characters: { type: Array as PropType<string[]> },\r\n    visible: { type: Boolean, required: true },\r\n  },\r\n  emits: [\"update:character\", \"update:characters\"],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const visionSrc = (item: TCharacterEntry) => ELEMENT_IMG_SRC[item.];\r\n    const bgImageClass = (item: TCharacterEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TCharacterEntry) => {\r\n      if (props.character && props.character == item.key) {\r\n        return \" selected\";\r\n      }\r\n      if (props.characters && props.characters.includes(item.key)) {\r\n        return \" selected\";\r\n      }\r\n      return \"\";\r\n    };\r\n\r\n    const elementList = Object.keys(ELEMENT_IMG_SRC) as TVisionKey[];\r\n    const elementSrc = (element: TVisionKey) => ELEMENT_IMG_SRC[element] as string;\r\n    const elementCheckList = reactive({}) as ICheckList;\r\n    for (let key of elementList) {\r\n      elementCheckList[key] = false;\r\n    }\r\n\r\n    const weaponList = Object.keys(WEAPON_IMG_SRC) as TWeaponTypeKey[];\r\n    const weaponSrc = (weapon: TWeaponTypeKey) => WEAPON_IMG_SRC[weapon] as string;\r\n    const weaponCheckList = reactive({}) as ICheckList;\r\n    for (let key of weaponList) {\r\n      weaponCheckList[key] = false;\r\n    }\r\n\r\n    const checkListOnChange = function (item: string, checkList: ICheckList) {\r\n      if (!checkList[item]) return;\r\n      Object.keys(checkList)\r\n        .filter((s) => s != item)\r\n        .forEach((key) => {\r\n          checkList[key] = false;\r\n        });\r\n    };\r\n\r\n    const filteredList = computed(() => {\r\n      const result = [];\r\n      const elementChecked =\r\n        Object.keys(elementCheckList).filter((s) => elementCheckList[s]).length > 0;\r\n      const weaponChecked =\r\n        Object.keys(weaponCheckList).filter((s) => weaponCheckList[s]).length > 0;\r\n      for (let entry of CHARACTER_MASTER_LIST as TCharacterEntry[]) {\r\n        if (elementChecked && !elementCheckList[entry.]) continue;\r\n        if (weaponChecked && !weaponCheckList[entry.]) continue;\r\n        result.push(entry);\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const selectionNumber = (character: string) => {\r\n      let result = \"\";\r\n      if (props.characters) {\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          result = String(index + 1);\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const characterOnClick = (character: string) => {\r\n      if (props.character) {\r\n        context.emit(\"update:character\", character);\r\n      }\r\n      if (props.characters) {\r\n        const characters: string[] = props.characters.map((s) => s);\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          characters[index] = \"\";\r\n        } else {\r\n          const blankIndex = props.characters.indexOf(\"\");\r\n          if (blankIndex != -1) {\r\n            characters[blankIndex] = character;\r\n          }\r\n        }\r\n        context.emit(\"update:characters\", characters);\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      visionSrc,\r\n      bgImageClass,\r\n      selectedClass,\r\n      elementList,\r\n      elementSrc,\r\n      elementCheckList,\r\n      weaponList,\r\n      weaponSrc,\r\n      weaponCheckList,\r\n      checkListOnChange,\r\n      filteredList,\r\n\r\n      selectionNumber,\r\n      characterOnClick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nimg.character {\r\n  width: 80px;\r\n  height: 80px;\r\n  background-size: contain;\r\n}\r\n\r\n.character.selected {\r\n  background-color: gold;\r\n}\r\n\r\nimg.vision {\r\n  width: 25px;\r\n  height: 25px;\r\n  position: absolute;\r\n  left: 3px;\r\n  top: 3px;\r\n}\r\n\r\ndiv.selection-number {\r\n  position: absolute;\r\n  right: 3px;\r\n  top: 3px;\r\n  width: 25px;\r\n  height: 25px;\r\n  border-radius: 50%;\r\n  border: 2px solid whitesmoke;\r\n  font-size: 25px;\r\n  background-color: black;\r\n  opacity: 75%;\r\n}\r\n\r\nimg.filter {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n}\r\n\r\n:checked + img {\r\n  background-color: rgb(156, 140, 49);\r\n}\r\n</style>\r\n","<script lang=\"ts\">\r\nimport i18n from \"@/i18n\";\r\nimport { STAT_PERCENT_LIST } from \"@/input\";\r\nimport { nextTick } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\n\r\nexport default function CompositionFunction() {\r\n    const { t, te } = useI18n({\r\n        useScope: \"global\",\r\n    });\r\n\r\n    const localeList = [\r\n        { name: \"\", value: \"ja-jp\" },\r\n        { name: \"English\", value: \"en-us\" },\r\n        { name: \"\", value: \"zh-cn\" },\r\n        { name: \"\", value: \"zh-tw\" },\r\n        { name: \"\", value: \"ko-kr\" },\r\n        { name: \"Deutsch\", value: \"de-de\" },\r\n        { name: \"Espaol\", value: \"es-es\" },\r\n        { name: \"Franais\", value: \"fr-fr\" },\r\n        { name: \"Indonesia\", value: \"id-id\" },\r\n        { name: \"Portugus\", value: \"pt-pt\" },\r\n        { name: \"P\", value: \"ru-ru\" },\r\n        { name: '', value: 'th-th' },\r\n        { name: \"Ting Vit\", value: \"vi-vn\" },\r\n    ];\r\n\r\n    const setI18nLanguage = function (locale: string) {\r\n        i18n.global.locale.value = locale;\r\n        loadLocaleMessages(locale);\r\n        document.querySelector('html')?.setAttribute('lang', locale)\r\n    }\r\n\r\n    const loadLocaleMessages = async function (locale: string) {\r\n        if (locale != 'ja-jp') {\r\n            const messages = await fetch(`./locales/${locale}.json`).then(resp => resp.json());\r\n            i18n.global.setLocaleMessage(locale, messages);\r\n        }\r\n        return nextTick();\r\n    }\r\n\r\n    const displayName = function (key: any): string {\r\n        if (!key) return key;\r\n        key = String(key).replace(/^_/, '');\r\n        if (i18n.global.locale.value === 'ja-jp') { // translate\r\n            let result = String(key);\r\n            if (['', '', '', ''].includes(result)) {\r\n                return result;\r\n            }\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace('', '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/^/, '');\r\n            return result;\r\n        }\r\n        if (te(key)) return t(key);\r\n        const re = new RegExp('(.*?)([\\\\s_\\\\(\\\\)/]+)(.*)');\r\n        let result = '';\r\n        let work = key;\r\n        while (work) {\r\n            const reRet = re.exec(work);\r\n            if (!reRet) {\r\n                result += t(work);\r\n                break;\r\n            }\r\n            if (reRet[1]) result += t(reRet[1]);\r\n            result += reRet[2];\r\n            work = reRet[3];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const percent = function (stat: string) {\r\n        const tempArr = stat.split('.');\r\n        let work = tempArr[0].replace(/V[1-3]$/, '');\r\n        let hasPercent = work.endsWith(\"%\") || STAT_PERCENT_LIST.includes(work);\r\n        if (!hasPercent) {\r\n            ['', '', '', ''].forEach(postfix => {\r\n                if (work.endsWith(postfix)) hasPercent = true;\r\n            })\r\n        }\r\n        return hasPercent ? '%' : '';\r\n    }\r\n\r\n    const displayStatName = function (stat: string) {\r\n        let result = stat.replace(/V[1-3]$/, '');\r\n        const tempArr = result.split('.');\r\n        if (tempArr.length == 1) {\r\n            result = displayName(result);\r\n            result = result.replace('', '')\r\n        } else if (i18n.global.locale.value === 'ja-jp') {\r\n            result = displayName(tempArr[tempArr.length - 1]) + '' + displayName(tempArr[0]);\r\n        } else {\r\n            result = displayName(tempArr[tempArr.length - 1]) + ' ' + displayName(tempArr[0]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const displayStatValue = function (stat: string, value: number, opt_s?: number): string {\r\n        const myPercent = percent(stat);\r\n        let p = myPercent ? 10 : 1;\r\n        if (opt_s) p = Math.pow(10, opt_s);\r\n        return String(Math.round(value * p) / p) + myPercent;\r\n    }\r\n\r\n    const displayStatAbbrev = function (stat: string) {\r\n        let result = stat;\r\n        const tempArr = stat.split('.');\r\n        if (tempArr.length == 1) {\r\n            stat = stat.replace(/V\\d$/, '');\r\n            stat = stat.replace(/TOP$/, '');\r\n            if (stat.startsWith('')) stat = stat.replace(/^/, '');\r\n            if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            result = displayName(stat);\r\n        } else {\r\n            result = displayStatName(stat);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /** $event.target.valuetypescript */\r\n    const targetValue = function (event: Event) {\r\n        if (event.target instanceof HTMLInputElement) return event.target.value;\r\n        if (event.target instanceof HTMLSelectElement) return event.target.value;\r\n        return undefined;\r\n    }\r\n\r\n    const displayOptionName = function (name: string) {\r\n        return displayName(name.replace(/^required_/, \"\"));\r\n    }\r\n\r\n    return {\r\n        localeList,\r\n        setI18nLanguage,\r\n        loadLocaleMessages,\r\n        displayName,\r\n        displayStatName,\r\n        displayStatValue,\r\n        displayStatAbbrev,\r\n        targetValue,\r\n        displayOptionName,\r\n        percent,\r\n    }\r\n}\r\n</script>\r\n","<template>\r\n    <div class=\"er-calculator\">\r\n        <div>\r\n            <label>{{ displayName('()') }}\r\n                <input type=\"number\" v-model=\"rotationLength\" min=\"10\" max=\"180\" @change=\"inputOnChange\">\r\n            </label>\r\n        </div>\r\n        <table class=\"er-calculator\">\r\n            <tbody>\r\n                <tr>\r\n                    <th colspan=\"2\"></th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <div class=\"with-tooltip\">\r\n                            <img :src=\"characterImgSrc(element.character)\" :alt=\"displayName(element.character)\"\r\n                                class=\"character\">\r\n                            <span class=\"tooltip\">{{ displayName(element.character) }}</span>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <input type=\"number\" v-model=\"element.energyCost\">\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <select v-model=\"element.constellation\" @change=\"inputOnChange\">\r\n                            <option v-for=\"constellation in [0, 1, 2, 3, 4, 5, 6]\" :key=\"constellation\"\r\n                                :value=\"constellation\">\r\n                                {{ 'C' + constellation }}\r\n                            </option>\r\n                        </select>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\"\r\n                        :class=\"'weapon' + bgColorClass(index)\">\r\n                        <img :src=\"weaponImgSrc(element.character, element.currentWeapon)\"\r\n                            :alt=\"displayName(element.currentWeapon)\" class=\"input-item-weapon\">\r\n                        <select v-model=\"element.weaponRefine\" @change=\"inputOnChange\">\r\n                            <option v-for=\"refine in [1, 2, 3, 4, 5]\" :key=\"refine\" :value=\"refine\">\r\n                                {{ 'R' + refine }}\r\n                            </option>\r\n                        </select>\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"result-row\">\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(value, index) in energyRechargeGls\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        {{ value + '%' }}\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('(%)') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <input type=\"number\" v-model=\"element.onField\" min=\"0\" max=\"100\" @change=\"inputOnChange\">\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"label-row\">\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <th colspan=\"4\">{{ displayName('') }}</th>\r\n                </tr>\r\n                <tr v-for=\"(row, rowIndex) in inputRowParticleEnemy\" :key=\"rowIndex\" :class=\"bgColorClass2(row)\">\r\n                    <th>\r\n                        {{ displayName('') }}\r\n                    </th>\r\n                    <td>{{ Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 10) / 10 }}</td>\r\n                    <td v-for=\"columnIndex in Array.from({ length: row.currentValues.length }, (_, i) => i)\"\r\n                        :key=\"columnIndex\">\r\n                        <input type=\"number\" v-model=\"row.currentValues[columnIndex]\" min=\"0\">\r\n                    </td>\r\n                </tr>\r\n                <tr v-for=\"(row, rowIndex) in inputRowParticle\" :key=\"rowIndex\" :class=\"bgColorClass2(row)\">\r\n                    <th class=\"with-tooltip\">\r\n                        <span>\r\n                            <img :src=\"rowImgSrc1(row)\" :alt=\"displayName(row.character)\" :class=\"rowImgSrc1Class(row)\">\r\n                            <img :src=\"rowImgSrc2(row)\" :alt=\"displayName(row.triggerName)\" class=\"input-item\">\r\n                        </span>\r\n                        <span class=\"tooltip\">{{ displayName(row.character) + ' ' + displayName(triggerName(row))\r\n                            }}</span>\r\n                    </th>\r\n                    <td>{{ Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 100) / 100 }}</td>\r\n                    <td v-for=\"columnIndex in Array.from({ length: row.currentValues.length }, (_, i) => i)\"\r\n                        :key=\"columnIndex\">\r\n                        <input type=\"number\" v-model=\"row.currentValues[columnIndex]\" min=\"0\">\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(value, index) in particleRecharges\" :key=\"index\" class=\"result\">\r\n                        {{ value }}\r\n                    </td>\r\n                </tr>\r\n                <tr class=\"label-row\" v-if=\"inputRowEnergy.length\">\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <th colspan=\"4\">{{ displayName('') }}</th>\r\n                </tr>\r\n                <tr v-for=\"(row, rowIndex) in inputRowEnergy\" :key=\"rowIndex\" :class=\"bgColorClass2(row)\">\r\n                    <th colspan=\"2\" class=\"with-tooltip\">\r\n                        <span>\r\n                            <img :src=\"rowImgSrc1(row)\" :alt=\"displayName(row.character)\" :class=\"rowImgSrc1Class(row)\">\r\n                            <img :src=\"rowImgSrc2(row)\" :alt=\"displayName(row.triggerName)\" class=\"input-item\">\r\n                        </span>\r\n                        <span class=\"tooltip\">{{ displayName(row.character) + ' ' + displayName(triggerName(row))\r\n                            }}</span>\r\n                    </th>\r\n                    <td v-for=\"columnIndex in Array.from({ length: row.currentValues.length }, (_, i) => i)\"\r\n                        :key=\"columnIndex\">\r\n                        <input type=\"number\" v-model=\"row.currentValues[columnIndex]\" min=\"0\">\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('()') }}</th>\r\n                    <td v-for=\"index in Array.from({ length: calculatorInput.length }, (_, i) => i)\" :key=\"index\"\r\n                        :class=\"bgColorClass(index)\">\r\n                        <input type=\"number\" v-model=\"burstCounts[index]\" min=\"0\">\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <th colspan=\"2\">{{ displayName('') }}</th>\r\n                    <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                        <span v-for=\"(weapon, weaponIndex) in element.replaceWeapons\" :key=\"weaponIndex\"\r\n                            class=\"with-tooltip\">\r\n                            <img :src=\"replaceWeaponImgSrc(element, weapon)\" :alt=\"displayName(weapon)\"\r\n                                :class=\"'input-item-weapon' + replaceWeaponClass(element, weapon)\"\r\n                                @click=\"replaceWeaponOnClick(element, weapon)\">\r\n                            <span class=\"tooltip\">{{ displayName(weapon) }}</span>\r\n                        </span>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <br />\r\n        <div>\r\n            <label>{{ displayName('()') }}\r\n                <input type=\"number\" v-model=\"combatLength\" min=\"1\" @change=\"inputOnChange\">\r\n            </label>\r\n            <table class=\"supply-from-enemy\">\r\n                <caption @click=\"isOpenSupplyFromEnemy = !isOpenSupplyFromEnemy\">\r\n                    {{ isOpenSupplyFromEnemy ? '-' : '+' }}\r\n                    {{ displayName('') }}\r\n                    {{ isOpenSupplyFromEnemy ? '-' : '+' }}\r\n                </caption>\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>{{ displayName('') }} </th>\r\n                        <th>{{ displayName('') }} </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(element, index) in supplyFromEnemy\" :key=\"index\"\r\n                        v-show=\"isOpenSupplyFromEnemy || element[1] || element[2]\">\r\n                        <th>{{ displayName(element[0]) }}</th>\r\n                        <td><input type=\"number\" v-model=\"element[1]\" min=\"0\"></td>\r\n                        <td><input type=\"number\" v-model=\"element[2]\" min=\"0\"></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class=\"message-area\">\r\n            <hr />\r\n            <p v-for=\"(message, index) in messages\" :key=\"index\">\r\n                <span class=\"character\">{{ message[0] }}</span> &nbsp;\r\n                <span>{{ message[1] }}</span>\r\n                <br v-if=\"message[0] || message[1]\" />\r\n                &nbsp; {{ message[2] }}\r\n            </p>\r\n        </div>\r\n        <div class=\"message-area\">\r\n            <fieldset>\r\n                <legend>\r\n                    <input class=\"hidden\" type=\"checkbox\" v-model=\"isShowUsage\" id=\"show-usage-toggle\">\r\n                    <label class=\"toggle-switch\" for=\"show-usage-toggle\">\r\n                        {{ displayName('') }}\r\n                    </label>\r\n                </legend>\r\n                <div v-show=\"isShowUsage\" style=\"text-align: left;\">\r\n                    <div style=\"text-align: center;\">{{ displayName('') }}</div>\r\n                    <ol>\r\n                        <li> </li>\r\n                        <li>HP</li>\r\n                        <li>1</li>\r\n                        <li>\r\n                            8<br>\r\n                        </li>\r\n                    </ol>\r\n                    <div style=\"text-align: center;\">{{ displayName('') }}</div>\r\n                    <ol>\r\n                        <li><br>\r\n                            \r\n                            \r\n                            20\r\n                        </li>\r\n                        <li><br>\r\n                            \r\n                            \r\n                        </li>\r\n                        <li><br>\r\n                            \r\n                        </li>\r\n                        <li> <br>\r\n                            \r\n                        </li>\r\n                        <li> <br>\r\n                            \r\n                            \r\n                        </li>\r\n                        <li> <br>\r\n                            ()\r\n                        </li>\r\n                        <li><br>\r\n                            5\r\n                            0\r\n                        </li>\r\n                        <li><br>\r\n                            (%)\r\n                            \r\n                            1\r\n                        </li>\r\n                        <li><br>\r\n                            \r\n                            \r\n                        </li>\r\n                        <li>\r\n                            \r\n                            <ul>\r\n                                <li v-for=\"(character, index) in CHARACTER_E_DECREMENT_IN_BURST\" :key=\"index\">\r\n                                    {{ displayName(character) }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>1\r\n                            <ul>\r\n                                <li v-for=\"([character, untilMap], index) in CHARACTER_E_UNTIL_MAP.entries()\"\r\n                                    :key=\"index\">\r\n                                    {{ displayName(character) + ' : ' + actionName('E') + '' +\r\n                                        Array.from(untilMap.entries())\r\n                                            .map(value => value[0]\r\n                                                .map(action => actionName(action)).join(displayName(''))\r\n                                                + '' + value[1] + displayName('')).join(displayName(''))\r\n                                    }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>\r\n                            <ul>\r\n                                <li v-for=\"([character, delayArr], index) in CHARACTER_E_DELAY_MAP.entries()\"\r\n                                    :key=\"index\">\r\n                                    {{ displayName(character) + ' : ' + actionName('E') + '' +\r\n                                        delayArr.map(action => actionName(action)).join(displayName(''))\r\n                                    }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>0\r\n                            <ul>\r\n                                <li v-for=\"(character, index) in CHARACTER_Q_NOT_RECHARGEABLE\" :key=\"index\">\r\n                                    {{ displayName(character) }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>\r\n                            <ul>\r\n                                <li> : 9</li>\r\n                                <li> : 4()</li>\r\n                                <li> : 6</li>\r\n                                <li> : 3</li>\r\n                            </ul>\r\n                        </li>\r\n                    </ol>\r\n                </div>\r\n            </fieldset>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from \"lodash\";\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { ARTIFACT_SET_MASTER, CHARACTER_MASTER, ELEMENT_BG_COLOR_CLASS, ELEMENT_IMG_SRC, IMG_SRC_DUMMY, TArtifactSetKey, WEAPON_IMG_SRC } from \"@/master\";\r\nimport { CHARACTER_E_CT_RESET_BY_Q_ARR, CHARACTER_E_DELAY_MAP, CHARACTER_E_UNTIL_MAP, CHARACTER_Q_NOT_RECHARGEABLE, CHARACTER_Q_TO_E_ARR, getCooltimeFromInfo, getElementalSkillActions, getParticleInfo } from \"@/particlemaster\";\r\nimport { getCharacterDetail, getCharacterMaster, getWeaponMaster, NUMBER_OF_MEMBERS, setupCharacterDetailMap, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport { getOnFieldRate, TERParticle, RECHARGE_PARTICLE_SKILL, RECHARGE_PARTICLE_PASSIVE, RECHARGE_PARTICLE_CONSTELLATION, TEREnergy, RECHARGE_ENERGY_SKILL, RECHARGE_ENERGY_BURST, RECHARGE_ENERGY_PASSIVE, RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_ENEMY, countQ, isRechargeKindParticle, isRechargeKindEnergy, RECHARGE_PARTICLE_RESONANCE, RECHARGE_PARTICLE_FAVONIUS, RECHARGE_ENERGY_WEAPON, RECHARGE_ENERGY_ARTIFACT, RECHARGE_ENERGY_ATTACK } from \"./ERCalculatorCommon\";\r\nimport { getEnergyByArtifact, getEnergyByAttack, getEnergyByCharacter, getEnergyByWeapon, getParticleByCharacter, getParticleByCharacterExtra, getParticleByResonance, getParticleByWeapon, splitNumToArrByOnFieldRate } from \"./ERCalculatorFunc\";\r\n\r\ntype TCalculatorInput = {\r\n    character: string,                  // \r\n    energyCost: number,                 //   40-90\r\n    constellation: number,              //  0-6\r\n    initialWeapon: string | undefined,  // \r\n    currentWeapon: string | undefined,  // \r\n    weaponRefine: number,               //  1-5\r\n    artifactSet4: string | undefined,   // 4\r\n    onField: number,                    // \r\n    replaceWeapons: string[],           //     \r\n}\r\n\r\ntype TCalculatorInputRow = {\r\n    character: string,          // \r\n    rechargeKind: string,       // \r\n    triggerName: string,        // ,,,\r\n    element: string,            // \r\n    initialValues: number[],    // \r\n    currentValues: number[],    // \r\n    unit: number,               // \r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"ERCalculator\",\r\n    props: {\r\n        team: { type: Object as PropType<TTeam>, required: true },\r\n        teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n        constellations: { type: Object as PropType<TConstellation> },\r\n    },\r\n    setup(props) {\r\n        const { displayName } = CompositionFunction();\r\n        const calculatorInput = reactive([] as TCalculatorInput[]);\r\n        const inputRowParticle = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowEnergy = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowParticleEnemy = reactive([] as TCalculatorInputRow[]);\r\n        const messages = reactive([] as string[][]);\r\n        const DEFAULT_ROTATION_LENGTH = 20;\r\n        const DEFAULT_COMBAT_LENGTH = 90;\r\n        const rotationLength = ref(DEFAULT_ROTATION_LENGTH); // \r\n        const combatLength = ref(DEFAULT_COMBAT_LENGTH);   // \r\n        const supplyFromEnemy = reactive([\r\n            ['', 3, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n        ] as [string, number, number][]);\r\n        const isOpenSupplyFromEnemy = ref(false);\r\n        const REPLACE_WEAPON_MAP = {\r\n            '': ['', ''],\r\n            '': ['', ''],\r\n            '': ['', '', ''],\r\n            '': [''],\r\n            '': ['', ''],\r\n        };\r\n        const isShowUsage = ref(false);\r\n\r\n        onMounted(() => {\r\n            setupCharacterDetailMap().then(() => {\r\n                updateRotationLength(props.team);\r\n                setupInput(props.team, props.teamMemberResult);\r\n            });\r\n        })\r\n\r\n        const watchCount = ref(0);\r\n        watch(() => _.cloneDeep(props), (newVal, oldVal) => {\r\n            updateRotationLength(newVal.team);\r\n            if (!_.isEqual(newVal.team.members, oldVal.team.members) || !_.isEqual(newVal.teamMemberResult, oldVal.teamMemberResult)) {\r\n                setupInput(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            } else {\r\n                setupInputRows(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            }\r\n        }, { deep: true })\r\n\r\n        function getConstellation(character: string, team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            if (teamMemberResult) {\r\n                const workArr = team.members.filter(member => member.name == character);\r\n                if (workArr.length) {\r\n                    return teamMemberResult[workArr[0].id]?.characterInput. ?? (props.constellations ? props.constellations[character] ?? 0 : 0);\r\n                }\r\n            }\r\n            return props.constellations ? props.constellations[character] ?? 0 : 0;\r\n        }\r\n\r\n        function updateRotationLength(team: TTeam) {\r\n            const memberNameArr = team.members.map(member => member.name);\r\n            const eLength = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            const qLength = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            if (team.rotation.length) {\r\n                for (let i = 0; i < team.rotation.length; i++) {\r\n                    const rotation = team.rotation[i];\r\n                    const memberIndex = memberNameArr.indexOf(rotation.member);\r\n                    if (memberIndex == -1) continue;\r\n                    if (rotation.action === 'Q' || rotation.action.startsWith('E')) {\r\n                        const characterDetail = getCharacterDetail(rotation.member);\r\n                        if (rotation.action === 'Q') {\r\n                            let ct = characterDetail?.. ?? 0;\r\n                            if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 2) {\r\n                                    ct *= 0.85;\r\n                                }\r\n                            } else if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 6) {\r\n                                    ct -= 5;\r\n                                }\r\n                            } else if (memberNameArr.includes('') && characterDetail?. == '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 2) {\r\n                                    ct -= 6;\r\n                                }\r\n                            }\r\n                            if (CHARACTER_Q_TO_E_ARR.includes(rotation.member)) {\r\n                                const constellation = getConstellation(rotation.member, props.team, props.teamMemberResult);\r\n                                const particleInfo = getParticleInfo(rotation.member, 'E', constellation);\r\n                                if (particleInfo) {\r\n                                    const ect = getCooltimeFromInfo(particleInfo) ?? 0;\r\n                                    ct = _.round(Math.max(ct, ect) / 2, 1);\r\n                                }\r\n                            }\r\n                            qLength[memberIndex] += ct;\r\n                        } else {\r\n                            const constellation = getConstellation(rotation.member, props.team, props.teamMemberResult);\r\n                            const particleInfo = getParticleInfo(rotation.member, rotation.action, constellation);\r\n                            let ct = 0;\r\n                            if (particleInfo) {\r\n                                ct = getCooltimeFromInfo(particleInfo) ?? 0;\r\n                                if (memberNameArr.includes('') && rotation.member != '') {\r\n                                    const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                    if (constellation >= 2) {\r\n                                        ct *= 0.85;\r\n                                    }\r\n                                }\r\n                                if (CHARACTER_Q_TO_E_ARR.includes(rotation.member)) {\r\n                                    const qct = characterDetail?.. ?? 0;\r\n                                    ct = _.round(Math.max(ct, qct) / 2, 1);\r\n                                } else if (CHARACTER_E_CT_RESET_BY_Q_ARR.includes(rotation.member)) {\r\n                                    const qct = characterDetail?.. ?? 0;\r\n                                    if (qct) {\r\n                                        ct = Math.min(ct, qct);\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (ct > eLength[memberIndex]) {\r\n                                eLength[memberIndex] = ct;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let newLength = Math.max(...eLength, ...qLength);\r\n            if (newLength == 0) {\r\n                newLength = DEFAULT_ROTATION_LENGTH;\r\n            }\r\n            rotationLength.value = newLength;\r\n        }\r\n\r\n        function updateOnFields(team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                calculatorInput[i].onField = onFields[i];\r\n            }\r\n        }\r\n\r\n        const setupInput = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            const newInput: TCalculatorInput[] = [];\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < team.members.length; i++) {\r\n                const member = team.members[i];\r\n                const characterDetail = getCharacterDetail(member.name);\r\n                const constellation = constellations[i];\r\n                const memberResult = teamMemberResult ? teamMemberResult[member.id] : undefined;\r\n                const weapon = memberResult?.characterInput.weapon;\r\n                const weaponRefine = memberResult?.characterInput. ?? 1;\r\n                let artifactSet4 = undefined;\r\n                if (memberResult && memberResult.characterInput.artifactSets.length == 2) {\r\n                    artifactSet4 = memberResult.characterInput.artifactSets[0] == memberResult.characterInput.artifactSets[1] ? memberResult.characterInput.artifactSets[0] : undefined;\r\n                }\r\n                let replaceWeapons: string[] = [];\r\n                if (characterDetail) {\r\n                    replaceWeapons = REPLACE_WEAPON_MAP[characterDetail.];\r\n                }\r\n                newInput.push({\r\n                    character: member.name,\r\n                    energyCost: characterDetail?.. ?? 0,\r\n                    constellation: constellation,\r\n                    initialWeapon: weapon,\r\n                    currentWeapon: weapon,\r\n                    weaponRefine: weaponRefine,\r\n                    artifactSet4: artifactSet4,\r\n                    onField: onFields[i],\r\n                    replaceWeapons: replaceWeapons,\r\n                });\r\n            }\r\n            calculatorInput.splice(0, calculatorInput.length, ...newInput);\r\n\r\n            setupInputRows(team, teamMemberResult);\r\n        }\r\n\r\n        function pushInputRowParticle(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, particle: TERParticle) {\r\n            const initialValues = _.cloneDeep(particle[3]);\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(initialValues[i] * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: particle[0],\r\n                triggerName: particle[1],\r\n                element: particle[2],\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 1,\r\n            })\r\n            if (particle[4].length) {\r\n                particle[4].forEach(message => {\r\n                    let work = '';\r\n                    if (particle[0] === RECHARGE_PARTICLE_SKILL) {\r\n                        work = '';\r\n                    } else if (particle[0] === RECHARGE_PARTICLE_PASSIVE) {\r\n                        work = '';\r\n                    } else if (particle[0] === RECHARGE_PARTICLE_CONSTELLATION) {\r\n                        work = '';\r\n                        if (particle[1]) {\r\n                            work += ' ' + particle[1] + '';\r\n                        }\r\n                    } else {\r\n                        work = particle[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n        function pushInputRowEnergy(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, energy: TEREnergy) {\r\n            const initialValues = _.cloneDeep(energy[2]);\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(initialValues[i] * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: energy[0],\r\n                triggerName: energy[1],\r\n                element: '',\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 0.1,\r\n            })\r\n            if (energy[3].length) {\r\n                energy[3].forEach(message => {\r\n                    let work = '';\r\n                    if (energy[0] === RECHARGE_ENERGY_SKILL) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_BURST) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_PASSIVE) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_CONSTELLATION) {\r\n                        work = '';\r\n                        if (energy[1]) {\r\n                            work += ' ' + energy[1] + '';\r\n                        }\r\n                    } else {\r\n                        work = energy[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n\r\n        const setupInputRows = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            updateOnFields(team, teamMemberResult);\r\n            const newInputRowPacticle1: TCalculatorInputRow[] = [];\r\n            const newInputRowPacticle2: TCalculatorInputRow[] = [];\r\n            const newInputRowEnergy: TCalculatorInputRow[] = [];\r\n            const newInputRowResonance: TCalculatorInputRow[] = [];\r\n            const newinputRowParticleEnemy: TCalculatorInputRow[] = [];\r\n            const newMessages: string[][] = [];\r\n            const onFields = calculatorInput.map(s => s.onField);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                const character = calculatorInput[i].character;\r\n                if (!character) continue;\r\n                const constellation = calculatorInput[i].constellation;\r\n                const weapon = calculatorInput[i].currentWeapon;\r\n                const weaponRefine = calculatorInput[i].weaponRefine;\r\n                const artifactSet4 = calculatorInput[i].artifactSet4;\r\n                // \r\n                [\r\n                    getParticleByCharacter(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                    getParticleByCharacterExtra(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                ].forEach(result => {\r\n                    if (result) {\r\n                        result.forEach(entry => {\r\n                            pushInputRowParticle(newInputRowPacticle1, newMessages, character, entry);\r\n                        })\r\n                    }\r\n                })\r\n                // \r\n                const energyByCharacter = getEnergyByCharacter(character, constellation, team, rotationLength.value, team.rotation, teamMemberResult);\r\n                energyByCharacter.forEach(entry => {\r\n                    pushInputRowEnergy(newInputRowEnergy, newMessages, character, entry);\r\n                })\r\n                // \r\n                if (weapon) {\r\n                    // \r\n                    const particleByWeapon = getParticleByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation, onFields);\r\n                    if (particleByWeapon) {\r\n                        pushInputRowParticle(newInputRowPacticle2, newMessages, character, particleByWeapon);\r\n                    }\r\n                    // \r\n                    const energyByWeapon = getEnergyByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation);\r\n                    if (energyByWeapon) {\r\n                        pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByWeapon);\r\n                    }\r\n                }\r\n                if (artifactSet4) {\r\n                    const energyByArtifact = getEnergyByArtifact(character, artifactSet4, team, rotationLength.value, team.rotation);\r\n                    if (energyByArtifact) {\r\n                        pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByArtifact);\r\n                    }\r\n                }\r\n                // \r\n                const energyByAttack = getEnergyByAttack(character, team, rotationLength.value, team.rotation);\r\n                if (energyByAttack) {\r\n                    pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByAttack);\r\n                }\r\n            }\r\n            // \r\n            const particleByResonance = getParticleByResonance(team, rotationLength.value, team.rotation, onFields);\r\n            if (particleByResonance) {\r\n                pushInputRowParticle(newInputRowResonance, newMessages, '', particleByResonance);\r\n            }\r\n            // \r\n            supplyFromEnemy.filter(s => s[1] || s[2]).forEach(entry => {\r\n                const num = (entry[1] * 3 + entry[2]) * rotationLength.value / combatLength.value; // 3\r\n                const initialValues = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                splitNumToArrByOnFieldRate(initialValues, num, team, onFields);\r\n                pushInputRowParticle(newinputRowParticleEnemy, newMessages, '', [RECHARGE_PARTICLE_ENEMY, '', entry[0], initialValues, []]);\r\n            })\r\n            inputRowParticle.splice(0, inputRowParticle.length, ...newInputRowPacticle1, ...newInputRowPacticle2, ...newInputRowResonance);\r\n            inputRowEnergy.splice(0, inputRowEnergy.length, ...newInputRowEnergy);\r\n            inputRowParticleEnemy.splice(0, inputRowParticleEnemy.length, ...newinputRowParticleEnemy);\r\n            messages.splice(0, messages.length, ...newMessages);\r\n        }\r\n\r\n        /** () */\r\n        const burstCounts = computed(() => {\r\n            const result: { [key: number]: number } = { 0: 1, 1: 1, 2: 1, 3: 1 };\r\n            if (props.team.rotation?.length) {\r\n                for (let i = 0; i < props.team.members.length; i++) {\r\n                    const member = props.team.members[i];\r\n                    if (member.name) {\r\n                        result[i] = countQ(member.name, props.team.rotation);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /** () */\r\n        const particleRecharges = computed(() => {\r\n            const result: number[] = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                const member = props.team.members[i];\r\n                if (!member.name) continue;\r\n                const characterMaster = getCharacterMaster(member.name);\r\n                const myElement = characterMaster?.;\r\n                if (!myElement) continue;\r\n                [inputRowParticle, inputRowParticleEnemy].forEach(input => {\r\n                    input.filter(s => isRechargeKindParticle(s.rechargeKind)).forEach(entry => {\r\n                        let energy = 0;\r\n                        for (let j = 0; j < entry.currentValues.length; j++) {\r\n                            if (j == i) {\r\n                                energy += entry.currentValues[j];\r\n                            } else {\r\n                                energy += entry.currentValues[j] * 0.6;\r\n                            }\r\n                        }\r\n                        if (entry.element == myElement) {\r\n                            energy *= 3;\r\n                        } else if (entry.element == '') {\r\n                            energy *= 2;\r\n                        }\r\n                        result[i] = Math.round((result[i] + energy) * 10) / 10;\r\n                    })\r\n                })\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /**  */\r\n        const energyRechargeGls = computed(() => {\r\n            const result = _.fill(Array(NUMBER_OF_MEMBERS), 100);\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                if (!props.team.members[i].name) continue;\r\n                let energyCost = calculatorInput[i]?.energyCost;\r\n                if (!energyCost) continue;\r\n                inputRowEnergy.filter(s => isRechargeKindEnergy(s.rechargeKind)).forEach(entry => {\r\n                    energyCost -= entry.currentValues[i];\r\n                })\r\n                const burstCount = burstCounts.value[i] > 0 ? burstCounts.value[i] : 1;\r\n                const particleEnergy = particleRecharges.value[i] / burstCount;\r\n                if (energyCost > 0 && particleEnergy > 0) {\r\n                    const er = Math.ceil(energyCost * 100 / particleEnergy);\r\n                    result[i] = Math.max(100, er);\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n        const CHARACTER_E_DECREMENT_IN_BURST = computed(() =>\r\n            Object.keys(CHARACTER_MASTER).filter(key => Object.keys(getElementalSkillActions(key)).filter(action => action.indexOf('burst') != -1).length > 0).sort());\r\n\r\n        const characterImgSrc = (character: string) => getCharacterMaster(character)?.icon_url ?? IMG_SRC_DUMMY;\r\n        const weaponImgSrc = (character: string, weapon?: string) => {\r\n            const characterMater = getCharacterMaster(character);\r\n            return weapon ? characterMater ? getWeaponMaster(characterMater., weapon)?.icon_url ?? IMG_SRC_DUMMY : IMG_SRC_DUMMY : IMG_SRC_DUMMY;\r\n        }\r\n        const replaceWeaponImgSrc = (input: TCalculatorInput, weapon: string) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (input.character && input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                const characterMaster = getCharacterMaster(input.character);\r\n                if (characterMaster) {\r\n                    result = getWeaponMaster(characterMaster., weapon)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else {\r\n                    result = getCharacterMaster(row.character)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1Class = (row: TCalculatorInputRow) =>\r\n            (row.rechargeKind && row.rechargeKind == RECHARGE_PARTICLE_RESONANCE) ? 'input-item' : 'input-item-character';\r\n        const rowImgSrc2 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_PASSIVE, RECHARGE_PARTICLE_PASSIVE].includes(row.rechargeKind)) { // \r\n                    if (row.triggerName) {\r\n                        const characterDetail = getCharacterDetail(row.character);\r\n                        const workArr = characterDetail?..filter(obj => obj. == row.triggerName);\r\n                        result = workArr?.length ? workArr[0].icon_url ?? IMG_SRC_DUMMY : IMG_SRC_DUMMY;\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) { // \r\n                    if (row.triggerName) {\r\n                        const characterDetail = getCharacterDetail(row.character);\r\n                        const constellationObj = characterDetail?.[row.triggerName];\r\n                        result = constellationObj?.icon_url ?? IMG_SRC_DUMMY;\r\n                    }\r\n                } else if ([RECHARGE_PARTICLE_FAVONIUS, RECHARGE_ENERGY_WEAPON].includes(row.rechargeKind) && row.triggerName) { // \r\n                    const characterMater = getCharacterMaster(row.character);\r\n                    if (characterMater) {\r\n                        const weaponType = characterMater.;\r\n                        const weaponMaster = getWeaponMaster(weaponType, row.triggerName);\r\n                        if (weaponMaster) {\r\n                            result = weaponMaster.icon_url;\r\n                        }\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_ARTIFACT].includes(row.rechargeKind) && row.triggerName) { // \r\n                    const artifactSetMater = ARTIFACT_SET_MASTER[(row.triggerName as TArtifactSetKey)];\r\n                    if (artifactSetMater) {\r\n                        result = artifactSetMater.image.replace('.png', '/flower_of_life.png');\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_ATTACK].includes(row.rechargeKind)) { // \r\n                    const characterMaster = getCharacterMaster(row.character);\r\n                    if (characterMaster) {\r\n                        result = WEAPON_IMG_SRC[characterMaster.];\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const bgColorClass = (index: number) => {\r\n            const master = index < props.team.members.length ? getCharacterMaster(props.team.members[index].name) : undefined;\r\n            return ' ' + (master ? (ELEMENT_BG_COLOR_CLASS as any)[master.] : 'white');\r\n        }\r\n        const bgColorClass2 = (row: TCalculatorInputRow) =>\r\n            ' ' + (row.element ? (ELEMENT_BG_COLOR_CLASS as any)[row.element] : 'white');\r\n        const replaceWeaponClass = (input: TCalculatorInput, weapon: string) =>\r\n            input.currentWeapon == weapon ? ' disabled' : '';\r\n        const triggerName = (row: TCalculatorInputRow) => {\r\n            let result = '';\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_PASSIVE, RECHARGE_PARTICLE_PASSIVE].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) {\r\n                    result = ' ' + row.triggerName + '';\r\n                } else if ([RECHARGE_ENERGY_WEAPON, RECHARGE_PARTICLE_FAVONIUS].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_ENERGY_ATTACK].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const actionName = (action: string) => {\r\n            let result = '';\r\n            if (action.startsWith('N')) {\r\n                result = '';\r\n            } else if (action === 'C') {\r\n                result = '';\r\n            } else if (action === 'P') {\r\n                result = '';\r\n            } else if (action.startsWith('E')) {\r\n                result = '';\r\n            } else if (action === 'Q') {\r\n                result = '';\r\n            }\r\n            return result;\r\n        }\r\n\r\n        const inputOnChange = () => {\r\n            setupInputRows(props.team, props.teamMemberResult);\r\n        }\r\n\r\n        const replaceWeaponOnClick = (input: TCalculatorInput, weapon: string) => {\r\n            if (input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                if (input.currentWeapon == weapon) {\r\n                    input.currentWeapon = input.initialWeapon;\r\n                } else {\r\n                    input.currentWeapon = weapon;\r\n                }\r\n                inputOnChange();\r\n            }\r\n        }\r\n\r\n        const resetInput = () => {\r\n            inputRowParticleEnemy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowParticle.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowEnergy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n        }\r\n\r\n        return {\r\n            displayName,\r\n\r\n            rotationLength,\r\n            combatLength,\r\n            supplyFromEnemy,\r\n            isOpenSupplyFromEnemy,\r\n            calculatorInput,\r\n            inputRowParticle,\r\n            inputRowEnergy,\r\n            inputRowParticleEnemy,\r\n            burstCounts,\r\n            messages,\r\n            CHARACTER_E_DECREMENT_IN_BURST,\r\n            CHARACTER_E_UNTIL_MAP,\r\n            CHARACTER_E_DELAY_MAP,\r\n            CHARACTER_Q_NOT_RECHARGEABLE,\r\n            actionName,\r\n            characterImgSrc,\r\n            weaponImgSrc,\r\n            replaceWeaponImgSrc,\r\n            rowImgSrc1,\r\n            rowImgSrc1Class,\r\n            rowImgSrc2,\r\n            bgColorClass,\r\n            bgColorClass2,\r\n            replaceWeaponClass,\r\n            particleRecharges,\r\n            energyRechargeGls,\r\n            triggerName,\r\n            isShowUsage,\r\n\r\n            inputOnChange,\r\n            replaceWeaponOnClick,\r\n            resetInput,\r\n        }\r\n    }\r\n});\r\n</script>\r\n<style scoped>\r\ntable {\r\n    margin: 5px auto;\r\n    background-color: white;\r\n    color: black;\r\n    border: double 4px white;\r\n    border-spacing: 0;\r\n    vertical-align: middle;\r\n}\r\n\r\ncaption {\r\n    vertical-align: middle;\r\n    background-color: white;\r\n    padding: 4px;\r\n}\r\n\r\ntr,\r\nth,\r\ntd {\r\n    border: solid 1px gray;\r\n}\r\n\r\nth,\r\ntd {\r\n    min-width: 35px;\r\n    height: 22px;\r\n}\r\n\r\nth {\r\n    font-size: 1.6rem;\r\n    font-weight: bold;\r\n    padding-left: 1px;\r\n    padding-right: 1px;\r\n    white-space: nowrap;\r\n}\r\n\r\ninput[type=\"number\"] {\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    padding: 0 0 0 4px;\r\n    max-width: 15rem;\r\n}\r\n\r\ntd select,\r\ntd input[type=\"number\"] {\r\n    width: calc(100% - 4px);\r\n    text-align: center;\r\n    padding-block: 0;\r\n    padding-inline: 0;\r\n    border: none;\r\n    background-color: transparent;\r\n}\r\n\r\nimg.character {\r\n    width: 60px;\r\n    height: 45px;\r\n    object-position: top;\r\n    object-fit: cover;\r\n}\r\n\r\nimg.input-item-character {\r\n    width: 30px;\r\n    height: 22px;\r\n    object-position: top;\r\n    object-fit: cover;\r\n}\r\n\r\nimg.input-item {\r\n    width: 20px;\r\n    height: 20px;\r\n    background-color: rgba(55, 55, 55, 0.2);\r\n    border-radius: 50%;\r\n}\r\n\r\nimg.input-item-weapon {\r\n    width: 20px;\r\n    height: 20px;\r\n}\r\n\r\nimg.disabled {\r\n    opacity: 0.3;\r\n    background-color: black;\r\n    border-radius: 5px;\r\n}\r\n\r\n.white {\r\n    background-color: whitesmoke;\r\n}\r\n\r\ntr.label-row {\r\n    background-color: silver;\r\n}\r\n\r\ntr.result-row th,\r\ntr.result-row td {\r\n    border-top: 2px solid yellow;\r\n    border-bottom: 2px solid yellow;\r\n    font-weight: bold;\r\n}\r\n\r\ntd.weapon {\r\n    position: relative;\r\n}\r\n\r\ntd.weapon img.input-item-weapon {\r\n    border: none;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n\r\ncaption {\r\n    padding-top: 2px;\r\n    padding-bottom: 0;\r\n}\r\n\r\nol {\r\n    padding-left: 4rem;\r\n}\r\n\r\nol li {\r\n    margin-bottom: 1rem;\r\n}\r\n\r\nul {\r\n    padding-left: 3rem;\r\n}\r\n\r\nul li {\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\ndiv.message-area {\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    padding-left: 1rem;\r\n    padding-right: 1rem;\r\n    max-width: 120rem;\r\n    text-align: left;\r\n}\r\n\r\nspan.character {\r\n    font-weight: bold;\r\n    color: yellow;\r\n}\r\n\r\n.message-area fieldset {\r\n    text-align: center;\r\n}\r\n\r\n.message-area fieldset legend label {\r\n    width: 50rem;\r\n}\r\n</style>","<template>\r\n  <div class=\"member\">\r\n    <div class=\"member-img\" @dblclick=\"characterOnDblclick\">\r\n      <div class=\"with-tooltip\">\r\n        <img :class=\"'character' + characterImgClass\" :src=\"characterImgSrc\" :alt=\"displayName(member.name)\" />\r\n        <span class=\"tooltip\">{{ displayName(member.name) }}</span>\r\n      </div>\r\n      <img class=\"vision\" :src=\"visionImgSrc\" alt=\"vision\" />\r\n      <div class=\"constellation\" v-show=\"constellation\">\r\n        {{ constellation }}\r\n      </div>\r\n      <div :class=\"'tag tag-3' + tagColorClass(3)\" v-if=\"member.tags[3]\">{{ member.tags[3] }}</div>\r\n      <div :class=\"'tag tag-2' + tagColorClass(2)\" v-if=\"member.tags[2]\">{{ member.tags[2] }}</div>\r\n      <div :class=\"'tag tag-1' + tagColorClass(1)\" v-if=\"member.tags[1]\">{{ member.tags[1] }}</div>\r\n      <div :class=\"'tag tag-0' + tagColorClass(0)\" v-if=\"member.tags[0]\">{{ member.tags[0] }}</div>\r\n      <img class=\"replacement replacement-0\" v-if=\"member.replacements[0]\" :src=\"replaceImgSrc(0)\"\r\n        :alt=\"member.replacements[0]\">\r\n      <img class=\"replacement replacement-1\" v-if=\"member.replacements[1]\" :src=\"replaceImgSrc(1)\"\r\n        :alt=\"member.replacements[1]\">\r\n    </div>\r\n    <div class=\"stat-value\" v-if=\"displayStat\">\r\n      {{ statValue }}\r\n    </div>\r\n    <div v-if=\"showEquipment\">\r\n      <img class=\"weapon\" :src=\"imgWeaponSrc\" alt=\"weapon\" />\r\n      <img class=\"artifact-set\" :src=\"imgArtifactSetSrc(0)\" alt=\"artifact-set\" />\r\n      <img class=\"artifact-set\" :src=\"imgArtifactSetSrc(1)\" alt=\"artifact-set\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\r\nimport { pushBuildinfoToSession, TStats } from \"@/input\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { ARTIFACT_SET_MASTER, CHARACTER_MASTER, ELEMENT_COLOR_CLASS, ELEMENT_IMG_SRC, IMG_SRC_DUMMY, STAR_BACKGROUND_IMAGE_CLASS, TArtifactSetEntry, TCharacterEntry, TCharacterKey, TElementColorClassKey, TWeaponEntry, WEAPON_MASTER } from \"@/master\";\r\nimport { getBuilddataFromStorage, TMember } from \"./team\";\r\n\r\nexport default defineComponent({\r\n  name: 'MemberItem',\r\n  props: {\r\n    member: { type: Object as PropType<TMember>, required: true },\r\n    displayStat: { type: String },\r\n    showEquipment: { type: Boolean },\r\n    statsObj: { type: Object as PropType<TStats> },\r\n    viewable: { type: Boolean },\r\n    tags: { type: Array as PropType<any[]> },\r\n    members: { type: Array as PropType<string[]> },\r\n    elementalResonance: { type: Array as PropType<string[]> },\r\n  },\r\n  setup(props) {\r\n    const { displayName, displayStatValue } = CompositionFunction();\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, () => {\r\n      watchCount.value++;\r\n    });\r\n\r\n    const characterMaster = computed(() => props.member.name ? (CHARACTER_MASTER[props.member.name as TCharacterKey] as TCharacterEntry) ?? undefined : undefined);\r\n    const characterImgSrc = computed(() => characterMaster.value?.icon_url ?? IMG_SRC_DUMMY);\r\n    const characterImgClass = computed(() => characterMaster.value?. ? (' ' + (STAR_BACKGROUND_IMAGE_CLASS as any)[String(characterMaster.value.)]) : '');\r\n    const visionImgSrc = computed(() => characterMaster.value?. ? (ELEMENT_IMG_SRC as any)[characterMaster.value.] : IMG_SRC_DUMMY);\r\n    const constellation = computed(() => (builddata.value ? builddata.value. : ''));\r\n    const builddata = computed(() => (props.member.name && props.member.buildname) ? getBuilddataFromStorage(props.member.name, props.member.buildname) : undefined);\r\n    const weaponMaster = computed((): TWeaponEntry => {\r\n      let result = undefined;\r\n      if (builddata.value) {\r\n        const weapon = builddata.value.;\r\n        if (weapon && characterMaster.value) {\r\n          result = (WEAPON_MASTER as any)[characterMaster.value.][weapon];\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const imgWeaponSrc = computed(() => weaponMaster.value?.icon_url ?? IMG_SRC_DUMMY);\r\n    const weaponName = computed(() => weaponMaster.value?.key ?? '');\r\n    const statValue = computed(() => {\r\n      watchCount.value;\r\n      let result = '-';\r\n      if (builddata.value) {\r\n        let stat = props.displayStat;\r\n        if (props.statsObj && stat) {\r\n          if (stat === '/') {\r\n            result = displayStatValue('', props.statsObj['']);\r\n            result += '/';\r\n            result += displayStatValue('', props.statsObj['']);\r\n          } else {\r\n            result = displayStatValue(stat, props.statsObj[stat]);\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const artifactSetMasters = computed((): TArtifactSetEntry[] => {\r\n      const result: TArtifactSetEntry[] = [];\r\n      if (builddata.value) {\r\n        for (let i = 0; i < 2; i++) {\r\n          const key = '' + (i + 1);\r\n          let value = builddata.value[key] ?? 'NONE';\r\n          result.push((ARTIFACT_SET_MASTER as any)[value]);\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const replaceImgSrc = (replIndex: number) => {\r\n      const name = replIndex < props.member.replacements.length ? props.member.replacements[replIndex] : undefined;\r\n      return name ? (CHARACTER_MASTER[name as TCharacterKey] as TCharacterEntry).icon_url : IMG_SRC_DUMMY;\r\n    };\r\n    const imgArtifactSetSrc = (index: number) => artifactSetMasters.value[index]?.image ? artifactSetMasters.value[index].image.replace(/\\.png$/, '/flower_of_life.png') : IMG_SRC_DUMMY;\r\n    const artifactSetName = (index: number) => artifactSetMasters.value[index]?.key ??  '';\r\n    const tagColorClass = (index: number) =>\r\n      Object.keys(ELEMENT_COLOR_CLASS).map(key => ELEMENT_COLOR_CLASS[(key as TElementColorClassKey)]).includes(props.member.tags[index].toLowerCase()) ? ' ' + props.member.tags[index].toLowerCase() : '';\r\n\r\n    const characterOnDblclick = () => {\r\n      if (props.viewable) {\r\n        locate();\r\n      }\r\n    };\r\n\r\n    const locate = () => {\r\n      const member = props.member;\r\n      if (member?.name) {\r\n        if (confirm('' + member.name + '')) {\r\n          const teammembers = props.members?.filter(s => s != member.name);\r\n          pushBuildinfoToSession(member.name, member.buildname, undefined, teammembers);\r\n          window.open('./', '_blank');\r\n          // window.location.href = './';\r\n        }\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      characterImgSrc,\r\n      characterImgClass,\r\n      visionImgSrc,\r\n      constellation,\r\n      replaceImgSrc,\r\n      imgWeaponSrc,\r\n      weaponName,\r\n      imgArtifactSetSrc,\r\n      artifactSetName,\r\n      tagColorClass,\r\n      statValue,\r\n\r\n      characterOnDblclick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style>\r\ndiv.member-img {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\nimg.character {\r\n  width: calc(100%);\r\n  background-size: contain;\r\n}\r\n\r\nimg.vision {\r\n  width: calc(100% / 3);\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n}\r\n\r\ndiv.constellation {\r\n  position: absolute;\r\n  font-size: 20px;\r\n  padding: 2px 5px;\r\n  right: 2px;\r\n  top: 2px;\r\n  background-color: black;\r\n  border-radius: 50%;\r\n  opacity: 75%;\r\n}\r\n\r\ndiv.tag {\r\n  position: absolute;\r\n  left: 50%;\r\n  bottom: 1px;\r\n  transform: translateX(-50%);\r\n  width: 70px;\r\n  height: 12px;\r\n  font-size: 10px;\r\n  background: linear-gradient(to top, #3d3d3b, #141414);\r\n  border: 1px solid whitesmoke;\r\n  border-radius: 3px;\r\n  vertical-align: middle;\r\n  padding-top: 1px;\r\n}\r\n\r\ndiv.tag-0 {\r\n  bottom: 1px;\r\n}\r\n\r\ndiv.tag-1 {\r\n  bottom: 17px;\r\n}\r\n\r\ndiv.tag-2 {\r\n  bottom: 33px;\r\n}\r\n\r\ndiv.tag-3 {\r\n  bottom: 49px;\r\n}\r\n\r\nimg.replacement {\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: -2px;\r\n  transform: translateX(-50%);\r\n  width: 52px;\r\n  height: 36px;\r\n  border-radius: 75%;\r\n  object-position: 0 0;\r\n  object-fit: cover;\r\n  z-index: 10;\r\n}\r\n\r\nimg.replacement-0 {\r\n  left: 25%;\r\n}\r\n\r\nimg.replacement-1 {\r\n  left: 75%;\r\n}\r\n\r\nimg.weapon,\r\nimg.artifact-set {\r\n  position: relative;\r\n  width: calc(100% / 3 - 4px);\r\n  height: calc(100% / 3 - 4px);\r\n  border: 2px solid slategray;\r\n  border-radius: 50%;\r\n  background-color: black;\r\n  z-index: 100;\r\n}\r\n\r\ndiv.stat-value {\r\n  font-size: 12px;\r\n  padding-top: 2px;\r\n  padding-bottom: 2px;\r\n}\r\n</style>\r\n","<template>\r\n  <template v-if=\"!characterSelectMode\">\r\n    <CharacterSelect :visible=\"true\" :characters=\"characters\" @update:characters=\"updateCharacters\" />\r\n  </template>\r\n  <template v-else>\r\n    <CharacterSelect :visible=\"true\" :characters=\"replacements\" @update:characters=\"updateReplacements\" />\r\n  </template>\r\n  <hr />\r\n  <table>\r\n    <tbody>\r\n      <tr>\r\n        <th>Team Name</th>\r\n        <td>\r\n          <input v-model=\"workTeam.name\" type=\"text\" minlength=\"1\" maxlength=\"16\" placeholder=\"INPUT TEAM NAME\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <th>Character Select Mode</th>\r\n        <td>\r\n          <button class=\"character-select-mode\" @click=\"characterSelectModeOnClick\">\r\n            {{ characterSelectMode ? 'REPLACEMENTS' : 'MEMBERS' }}\r\n          </button>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td colspan=\"2\" class=\"character-select-mode\">\r\n          <span v-if=\"!characterSelectMode\">\r\n            \r\n          </span>\r\n          <span v-else>\r\n            {{ selectedMemberName() + '' }}\r\n          </span>\r\n        </td>\r\n      </tr>\r\n      <tr class=\"member-tags\">\r\n        <td colspan=\"2\">\r\n          <span :class=\"'tag' + tagSelectedClass(tag)\" v-for=\"tag in MEMBER_TAG_LIST\" :key=\"tag\"\r\n            @click=\"tagOnClick(tag)\">{{\r\n              tag\r\n            }}</span>\r\n        </td>\r\n      </tr>\r\n      <tr class=\"members\">\r\n        <td colspan=\"2\">\r\n          <div :class=\"'member' + memberSelectedClass(member.id)\" v-for=\"member in workTeam.members\" :key=\"member.id\">\r\n            <MemberItem :member=\"member\" @click=\"memberOnClick(member.id)\" />\r\n          </div>\r\n\r\n          <div class=\"buildname-select\">\r\n            <select v-show=\"buildnames.length\" v-model=\"selectedMemberBuildname\" @change=\"buildnameOnChange\">\r\n              <option v-for=\"value in buildnames\" :key=\"value\" :value=\"value\">{{ value }}</option>\r\n            </select>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <th>Short Note</th>\r\n        <td>\r\n          <input class=\"description\" v-model=\"workTeam.description\" type=\"text\" maxlength=\"40\"\r\n            placeholder=\"INPUT NOTE\" />\r\n        </td>\r\n      </tr>\r\n      <tr class=\"team-tags\">\r\n        <td colspan=\"2\">\r\n          <span :class=\"teamTagSelected(tag) ? 'tag selected' : 'tag'\" v-for=\"tag in workTeamTags\" :key=\"tag\"\r\n            @click=\"teamTagOnClick(tag)\">{{ tag }}</span>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <th>Tags</th>\r\n        <td>\r\n          <input class=\"team-tags\" v-model=\"txtTeamTags\" type=\"text\" maxlength=\"40\" placeholder=\"INPUT TAGS\"\r\n            @change=\"txtTeamTagsOnChange\" />\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n  <div class=\"buttons\">\r\n    <button type=\"button\" @click=\"cancelOnClick\">cancel</button>\r\n    <button type=\"button\" @click=\"okOnClick\">ok</button>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from 'lodash';\r\nimport { computed, defineComponent, PropType, reactive, ref, watch } from 'vue';\r\nimport { makeDefaultBuildname } from '@/input';\r\nimport CharacterSelect from '@/components/CharacterSelect.vue';\r\nimport { getBuildnameFromStorageKey, getBuildStorageKeys, TMember, TTeam } from './team';\r\nimport MemberItem from './MemberItem.vue';\r\n\r\nexport default defineComponent({\r\n  name: 'TeamEditorModal',\r\n  components: {\r\n    CharacterSelect,\r\n    MemberItem,\r\n  },\r\n  props: {\r\n    visible: { type: Boolean, required: true },\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    teamTags: { type: Array as PropType<string[]> },\r\n  },\r\n  emits: ['click:cancel', 'click:ok'],\r\n  setup(props, context) {\r\n    const characterSelectMode = ref(false); // =\r\n    const workTeam = reactive({\r\n      id: -1,\r\n      name: '',\r\n      members: [],\r\n      description: '',\r\n      rotation: [],\r\n      rotationDescription: '',\r\n      tags: [],\r\n    } as TTeam);\r\n    const selectedMemberId = ref(-1);\r\n    const MEMBER_TAG_LIST = ['Main-DPS', 'Sub-DPS', 'Support', 'Carry', 'Driver', 'Enabler', 'Healer', 'Shielder', 'Battery', 'Free', 'Flex', 'On Field', 'Off Field', 'Attacker', 'Supporter', 'Life Keeper'];\r\n    const selectedMemberBuildname = ref('' as string | undefined);\r\n    const replacementIndex = ref(-1);\r\n    const txtTeamTags = ref('');\r\n    const workTeamTags = reactive([] as string[]);\r\n\r\n    function duplicateTeam() {\r\n      workTeam.id = props.team.id;\r\n      workTeam.name = props.team.name;\r\n      const work: TMember[] = [];\r\n      for (let i = 0; i < props.team.members.length; i++) {\r\n        work.push({\r\n          id: i,\r\n          name: props.team.members[i].name,\r\n          buildname: props.team.members[i].buildname,\r\n          builddata: props.team.members[i].builddata,\r\n          tags: _.cloneDeep(props.team.members[i].tags.filter(s => MEMBER_TAG_LIST.includes(s))),\r\n          replacements: props.team.members[i].replacements ? [...props.team.members[i].replacements] : [],\r\n        });\r\n      }\r\n      workTeam.members.splice(0, workTeam.members.length, ...work);\r\n      workTeam.description = props.team.description;\r\n      workTeam.rotation = _.cloneDeep(props.team.rotation);\r\n      workTeam.tags = _.clone(props.team.tags);\r\n    }\r\n    duplicateTeam();\r\n    setupTxtTeamTags();\r\n\r\n    watch(props, (newVal) => {\r\n      if (newVal.team.members) {\r\n        duplicateTeam();\r\n        if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n          selectedMemberBuildname.value = workTeam.members[selectedMemberId.value].buildname;\r\n        }\r\n      }\r\n      if (newVal.teamTags) {\r\n        workTeamTags.splice(0, workTeamTags.length, ...newVal.teamTags);\r\n      }\r\n      setupTxtTeamTags();\r\n      characterSelectMode.value = false;\r\n    });\r\n\r\n    const characters = computed(() => workTeam.members.map((s) => s.name));\r\n\r\n    const replacements = computed(() => {\r\n      let result = [] as string[];\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        result = [...member.replacements];\r\n        for (let i = result.length; i < 2; i++) {\r\n          result.push('');\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const updateCharacters = (newCharacters: string[]) => {\r\n      for (let i = 0; i < newCharacters.length; i++) {\r\n        if (workTeam.members[i].name != newCharacters[i]) {\r\n          workTeam.members[i].tags = [];\r\n          workTeam.members[i].replacements = [];\r\n        }\r\n        workTeam.members[i].name = newCharacters[i];\r\n        if (workTeam.members[i].name) {\r\n          const workBuildnames = getBuildStorageKeys(workTeam.members[i].name).map(s => getBuildnameFromStorageKey(s));\r\n          if (workBuildnames.length) {\r\n            if (!workTeam.members[i].buildname || !workBuildnames.includes(workTeam.members[i].buildname as string)) {\r\n              workTeam.members[i].buildname = makeDefaultBuildname(workTeam.members[i].name);\r\n            }\r\n            if (i == selectedMemberId.value) {\r\n              selectedMemberBuildname.value = workTeam.members[i].buildname;\r\n            }\r\n          } else {\r\n            workTeam.members[i].buildname = undefined;\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    const characterSelectModeOnClick = () => {\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length && workTeam.members[selectedMemberId.value].name) {\r\n        characterSelectMode.value = !characterSelectMode.value;\r\n      }\r\n    };\r\n\r\n    const memberOnClick = (id: number) => {\r\n      selectedMemberId.value = id;\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        selectedMemberBuildname.value = member.buildname;\r\n        replacementIndex.value = -1;\r\n      }\r\n      characterSelectMode.value = false;  // \r\n    };\r\n    const memberSelectedClass = (id: number) =>\r\n      id == selectedMemberId.value ? ' selected' : '';\r\n    const selectedMemberName = () => {\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        return workTeam.members[selectedMemberId.value].name;\r\n      }\r\n      return '';\r\n    };\r\n\r\n    const tagOnClick = (tag: string) => {\r\n      if (selectedMemberId.value < 0 || selectedMemberId.value >= workTeam.members.length)\r\n        return;\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      if (member && member.name) {\r\n        const tags = member.tags;\r\n        if (tags) {\r\n          if (tags.includes(tag)) {\r\n            tags.splice(0, tags.length, ...tags.filter((s) => s != tag));\r\n          } else {\r\n            tags.push(tag);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    const tagSelectedClass = (tag: string) => {\r\n      let result = false;\r\n      if (selectedMemberId.value >= 0 || selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        if (member && member.name) {\r\n          result = member.tags.includes(tag);\r\n        }\r\n      }\r\n      return result ? ' selected' : '';\r\n    };\r\n\r\n    const buildnames = computed(() => {\r\n      let result: string[] = [];\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        const character = member.name;\r\n        if (character) {\r\n          result = getBuildStorageKeys(character).map((s) =>\r\n            getBuildnameFromStorageKey(s)\r\n          );\r\n          const defaultBuildname = makeDefaultBuildname(character);\r\n          if (result.includes(defaultBuildname)) {\r\n            const others = result.filter((s) => s != defaultBuildname).sort();\r\n            if (others.length) {\r\n              result = [defaultBuildname, ...others];\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const buildnameOnChange = () => {\r\n      if (selectedMemberId.value < 0 || selectedMemberId.value >= workTeam.members.length) return;\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      member.buildname = selectedMemberBuildname.value;\r\n    };\r\n\r\n    const updateReplacements = (newCharacters: string[]) => {\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      member.replacements = [...newCharacters];\r\n    };\r\n\r\n    function setupTxtTeamTags() {\r\n      txtTeamTags.value = workTeam.tags.join(' ');\r\n    }\r\n\r\n    const txtTeamTagsOnChange = () => {\r\n      let result: string[] = [];\r\n      if (txtTeamTags.value) {\r\n        result = txtTeamTags.value.split(/\\s+/).filter(tag => tag);\r\n      }\r\n      workTeam.tags = result;\r\n    }\r\n\r\n    const teamTagSelected = (tag: string) => workTeam.tags.includes(tag);\r\n\r\n    const teamTagOnClick = (tag: string) => {\r\n      if (teamTagSelected(tag)) {\r\n        workTeam.tags.splice(0, workTeam.tags.length, ...workTeam.tags.filter(s => s != tag));\r\n      } else {\r\n        workTeam.tags.push(tag);\r\n      }\r\n      setupTxtTeamTags();\r\n    }\r\n\r\n    const cancelOnClick = () => {\r\n      context.emit('click:cancel');\r\n    };\r\n\r\n    const okOnClick = () => {\r\n      context.emit('click:ok', workTeam);\r\n    };\r\n\r\n    return {\r\n      characterSelectMode,\r\n      characters,\r\n      replacements,\r\n      MEMBER_TAG_LIST,\r\n\r\n      characterSelectModeOnClick,\r\n      selectedMemberId,\r\n      selectedMemberName,\r\n\r\n      tagOnClick,\r\n      tagSelectedClass,\r\n\r\n      workTeam,\r\n      workTeamTags,\r\n      txtTeamTags,\r\n      txtTeamTagsOnChange,\r\n      teamTagSelected,\r\n      teamTagOnClick,\r\n      memberOnClick,\r\n      memberSelectedClass,\r\n      selectedMemberBuildname,\r\n      buildnames,\r\n      buildnameOnChange,\r\n      updateReplacements,\r\n\r\n      updateCharacters,\r\n      cancelOnClick,\r\n      okOnClick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style scoped>\r\n.modal {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  left: 0;\r\n  /* background-color: rgba(0, 0, 0, .5); */\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: transparent;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: calc(100vh);\r\n  vertical-align: top;\r\n}\r\n\r\n.modal-content {\r\n  height: 100vh;\r\n  padding: 20px 10px;\r\n  width: calc(100% - 26px);\r\n  background-color: rgb(63, 10, 10);\r\n  border: 3px double gold;\r\n  border-radius: 20px;\r\n  z-index: 1000;\r\n  overflow-y: auto;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  table-layout: fixed;\r\n}\r\n\r\ntable th {\r\n  font-size: 3rem;\r\n  font-weight: bold;\r\n  color: rgb(225, 144, 56);\r\n  text-align: right;\r\n  width: 40%;\r\n}\r\n\r\ntable td {\r\n  text-align: left;\r\n}\r\n\r\ntable td[colspan=\"2\"] {\r\n  text-align: center;\r\n}\r\n\r\ntable tr.member-tags td,\r\ntable tr.team-tags td {\r\n  padding: 10px;\r\n}\r\n\r\nbutton {\r\n  font-size: 3rem;\r\n  width: 20rem;\r\n  margin: 5px;\r\n}\r\n\r\ninput {\r\n  padding-left: 1rem;\r\n}\r\n\r\ntd input[type=\"text\"] {\r\n  font-size: 3rem;\r\n  width: 63rem;\r\n}\r\n\r\n.tags {\r\n  margin: 5px 3px;\r\n}\r\n\r\nspan.tag {\r\n  display: inline-block;\r\n  height: 12px;\r\n  font-size: 10px;\r\n  background: linear-gradient(to top, #3d3d3b, #141414);\r\n  border: 1px solid whitesmoke;\r\n  border-radius: 3px;\r\n  margin: 3px 3px;\r\n  vertical-align: middle;\r\n  padding-top: 1px;\r\n}\r\n\r\nspan.tag.selected {\r\n  border-color: gold;\r\n}\r\n\r\n.member-tags span.tag {\r\n  width: 70px;\r\n}\r\n\r\n.team-tags span.tag {\r\n  width: auto;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\ndiv.member {\r\n  display: inline-block;\r\n  width: 80px;\r\n}\r\n\r\ndiv.member.selected {\r\n  background-color: gold;\r\n}\r\n\r\ndiv.buildname-select {\r\n  height: 40px;\r\n  padding-top: 10px;\r\n}\r\n\r\ndiv.buildname-select select {\r\n  width: 220px;\r\n}\r\n\r\nbutton.character-select-mode {\r\n  min-width: 30rem;\r\n}\r\n\r\ntd.character-select-mode {\r\n  font-size: 2.5rem;\r\n  font-weight: bold;\r\n  color: rgb(225, 144, 56);\r\n}\r\n\r\ndiv.buttons {\r\n  margin: 20px;\r\n}\r\n</style>\r\n","<template>\r\n  <div :class=\"'team' + selectedClass\">\r\n    <div class=\"title\">\r\n      <label class=\"name\">\r\n        <span class=\"handle\"></span>\r\n        <span>{{ team.name }}</span>\r\n        <span v-if=\"editable && selected\" class=\"button material-symbols-outlined\" @click=\"editOnClick\"> edit_square\r\n        </span>\r\n      </label>\r\n      <div class=\"elemental-resonance\">\r\n        <template v-for=\"index in [0, 1, 2, 3]\" :key=\"index\">\r\n          <img v-if=\"resonanceElementImgSrcs[index]\" class=\"elemental-resonance\" :src=\"resonanceElementImgSrcs[index]\"\r\n            alt=\"resonance\" />\r\n        </template>\r\n      </div>\r\n    </div>\r\n    <div class=\"members\">\r\n      <table>\r\n        <tbody>\r\n          <tr>\r\n            <td v-for=\"member in team.members\" :key=\"member.id\">\r\n              <MemberItem :member=\"member\" :statsObj=\"memberStats[member.id]\" :displayStat=\"displayStat\"\r\n                :showEquipment=\"showEquipment\" :viewable=\"true\" :members=\"team.members.map(s => s.name)\"\r\n                :elementalResonance=\"elementalResonance\" />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <table class=\"res\" v-if=\"displayRes\">\r\n      <tbody>\r\n        <tr>\r\n          <td v-for=\"key in resKey\" :key=\"key\" :class=\"resBgClass(key)\">{{ res[key] }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div class=\"team-tags\" v-if=\"displayTags\">\r\n      <span class=\"tag\" v-for=\"tag in team.tags\" :key=\"tag\">{{ tag }}</span>\r\n    </div>\r\n    <div style=\"text-align: left;\">\r\n      <span class=\"material-symbols-outlined control-button\" @click=\"jumpToRotation\">stat_minus_2</span>\r\n      <div class=\"description\">\r\n        {{ description }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from 'lodash';\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { evalFormula } from \"@/calculate\";\r\nimport { makeDetailObj, TStats } from \"@/input\";\r\nimport { CHARACTER_MASTER, ELEMENT_IMG_SRC, TAnyObject, TCharacterKey, ELEMENT_BG_COLOR_CLASS } from \"@/master\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { calculateMemberResult, getElementalResonance, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport MemberItem from \"./MemberItem.vue\";\r\n\r\nexport default defineComponent({\r\n  name: 'TeamItem',\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    selected: { type: Boolean, requied: true },\r\n    editable: { type: Boolean },\r\n    showEquipment: { type: Boolean },\r\n    displayStat: { type: String },\r\n    displayRes: { type: Boolean },\r\n    displayTags: { type: Boolean },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n  },\r\n  emits: ['click:edit', 'click:jump-to-rotation', 'update:member-result'],\r\n  components: {\r\n    MemberItem,\r\n  },\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const memberStats = reactive({} as TAnyObject);\r\n    const memberResults = reactive({} as TTeamMemberResult);\r\n    const res = reactive({} as TAnyObject);\r\n    const resKey = ['', '', '', '', '', '', '', ''];\r\n    function initializeRes() {\r\n      resKey.forEach(key => {\r\n        res[key] = 0;\r\n      });\r\n    }\r\n    initializeRes();\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, async (newVal) => {\r\n      watchFunc(newVal.team);\r\n      watchCount.value++;\r\n    });\r\n\r\n    onMounted(() => {\r\n      watchFunc(props.team);\r\n    })\r\n\r\n    const elementalResonance = computed(() => getElementalResonance(props.team));\r\n    const resonanceElementImgSrcs = computed(() => {\r\n      const result: string[] = [];\r\n      elementalResonance.value.forEach((entry) => {\r\n        if (entry == \"\") {\r\n          const members = props.team.members.filter((s) => s.name);\r\n          if (members.length == 4) {\r\n            members.forEach((member) => {\r\n              const master = CHARACTER_MASTER[member.name as TCharacterKey];\r\n              const src = (ELEMENT_IMG_SRC as any)[master.];\r\n              result.push(src);\r\n            });\r\n          }\r\n        } else {\r\n          const src = (ELEMENT_IMG_SRC as any)[entry.replace(\"\", \"\")];\r\n          result.push(src);\r\n          result.push(src);\r\n        }\r\n      });\r\n      return result;\r\n    })\r\n    const description = computed(() => props.team.description ?? '')\r\n    const selectedClass = computed(() => (props.selected ? ' selected' : ''));\r\n\r\n    async function watchFunc(team: TTeam) {\r\n      const list = [];\r\n      for (const member of team.members) {\r\n        list.push({\r\n          key: member.id,\r\n          value: await calculateMemberResult(member, team),\r\n        });\r\n      }\r\n      Object.keys(memberStats).forEach(key => {\r\n        delete memberStats[key];\r\n      })\r\n      Object.keys(memberResults).forEach(key => {\r\n        delete memberResults[key];\r\n      })\r\n      await Promise.all(list).then(results => {\r\n        results.forEach(entry => {\r\n          memberStats[entry.key] = entry.value?.statsInput?.statsObj;\r\n          memberResults[entry.key] = entry.value;\r\n        });\r\n      });\r\n      calculateStat();\r\n      calculateRes();\r\n      context.emit('update:member-result', team.id, memberResults);\r\n    }\r\n\r\n    function calculateStat() {\r\n      const teamAdjustments: { [key: string]: TStats } = {};\r\n      Object.keys(memberStats).forEach(key => {\r\n        teamAdjustments[key] = {};\r\n      })\r\n      Object.keys(memberStats).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const weaponMaster = memberResult?.characterInput?.weaponMaster;\r\n        if (characterMaster && characterMaster.) {\r\n          for (const damageDetail of characterMaster.) {\r\n            const detailObj = makeDetailObj(damageDetail, null, null, null, null);\r\n            if (detailObj. || !detailObj. || !detailObj.) continue;\r\n            const value = evalFormula(detailObj., memberResult.statsInput.statsObj, memberResult.damageResult, detailObj., detailObj.);\r\n            const toStat = detailObj..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n        if (weaponMaster && weaponMaster.) {\r\n          for (const damageDetail of weaponMaster.) {\r\n            const detailObj = makeDetailObj(damageDetail, null, null, null, null);\r\n            if (detailObj. || !detailObj. || !detailObj.) continue;\r\n            const value = evalFormula(detailObj., memberResult.statsInput.statsObj, memberResult.damageResult, detailObj., detailObj.);\r\n            const toStat = detailObj..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n      for (const key of Object.keys(memberStats)) {\r\n        if (key in teamAdjustments) {\r\n          for (const stat of Object.keys(teamAdjustments[key])) {\r\n            if (!memberStats[key]) continue;\r\n            if (stat in memberStats[key]) {\r\n              memberStats[key][stat] += teamAdjustments[key][stat];\r\n            } else {\r\n              memberStats[key][stat] = teamAdjustments[key][stat];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // \r\n    function calculateRes() {\r\n      initializeRes();\r\n      const dmgElements: string[] = [];\r\n      const artifactSet4s: string[] = [];\r\n      Object.keys(memberResults).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const artifactSetMasters = memberResult?.characterInput?.artifactSetMasters;\r\n        if (characterMaster) {\r\n          if (characterMaster) {\r\n            dmgElements.push(characterMaster.);\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster. && characterMaster. !== '') {\r\n            for (const talentDetail of characterMaster.) {\r\n              if (talentDetail.) {\r\n                for (const damageDetail of talentDetail.) {\r\n                  if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    let value = 0;\r\n                    if (_.isNumber(damageDetail.)) {\r\n                      value = damageDetail.;\r\n                    }\r\n                    if (element === '') {\r\n                      resKey.filter(s => s !== '').forEach(key => {\r\n                        res[key] -= value;\r\n                      })\r\n                    } else {\r\n                      res[element] -= value;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n          const constellation = memberResult.characterInput?. ?? (props.constellations ? props.constellations[characterMaster.] ?? 0 : 0);\r\n          if (characterMaster.) {\r\n            for (let i = 1; i <= constellation; i++) {\r\n              const constellationObj = characterMaster.[String(i)];\r\n              if (constellationObj.) {\r\n                for (const damageDetail of constellationObj.) {\r\n                  if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    if (_.isNumber(damageDetail.)) {\r\n                      if (element === '') {\r\n                        resKey.filter(s => s !== '').forEach(key => {\r\n                          res[key] -= damageDetail.;\r\n                        })\r\n                      } else {\r\n                        res[element] -= damageDetail.;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (artifactSetMasters && artifactSetMasters.length == 2) {\r\n          if (artifactSetMasters[0].key == artifactSetMasters[1].key) {\r\n            if (!artifactSet4s.includes(artifactSetMasters[0].key)) {\r\n              artifactSet4s.push(artifactSetMasters[0].key);\r\n              if (artifactSetMasters[0]['4']?.) {\r\n                artifactSetMasters[0]['4']?..forEach(damageDetail => {\r\n                  if (damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    res[element] -= Number(damageDetail.);\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n      if (Object.keys(memberResults).filter(key => memberResults[key].characterInput?.characterMaster. === '').length) {\r\n        const countHy = dmgElements.filter(s => s === '').length;\r\n        const countCr = dmgElements.filter(s => s === '').length;\r\n        const workRes = (countHy + countCr) >= 4 ? -55 : -5 * (countHy + countCr);\r\n        res[''] -= workRes;\r\n        res[''] -= workRes;\r\n      }\r\n      console.log(Object.keys(memberResults));\r\n      if (dmgElements.filter(s => s === '').length >= 2) { // \r\n        res[''] -= -20;\r\n      }\r\n      if (dmgElements.includes('') && dmgElements.includes('')) { // \r\n        res[''] -= -40;\r\n      }\r\n      resKey.forEach(key => {\r\n        if (key !== '' && !dmgElements.includes(key)) {\r\n          res[key] = 0;\r\n        }\r\n      })\r\n    }\r\n\r\n    const resBgClass = (key: string) => {\r\n      if (res[key] !== 0) {\r\n        return key in ELEMENT_BG_COLOR_CLASS ? (ELEMENT_BG_COLOR_CLASS as any)[key] : 'physical';\r\n      } else {\r\n        return '';\r\n      }\r\n    }\r\n\r\n    const editOnClick = () => {\r\n      context.emit('click:edit', props.team.id);\r\n    }\r\n\r\n    const jumpToRotation = () => {\r\n      context.emit('click:jump-to-rotation');\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n\r\n      selectedClass,\r\n      memberStats,\r\n      elementalResonance,\r\n      resonanceElementImgSrcs,\r\n      description,\r\n      res,\r\n      resKey,\r\n      resBgClass,\r\n\r\n      editOnClick,\r\n      jumpToRotation,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style>\r\ndiv.team {\r\n  display: inline-block;\r\n  max-width: 322px;\r\n  padding: 4px 4px 0 4px;\r\n  border: 4px double silver;\r\n  border-radius: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\ndiv.title {\r\n  position: relative;\r\n  text-align: left;\r\n  height: 4.5rem;\r\n}\r\n\r\n.handle {\r\n  color: darkorange;\r\n}\r\n\r\ndiv.team.selected {\r\n  border-color: gold;\r\n}\r\n\r\nlabel.name {\r\n  font-size: 2.6rem;\r\n}\r\n\r\nlabel.name span {\r\n  margin-left: 0.5rem;\r\n}\r\n\r\nlabel.name span.button {\r\n  display: inline-block;\r\n  position: absolute;\r\n  left: 217px;\r\n  top: 0;\r\n  font-size: 3rem;\r\n}\r\n\r\nlabel.name span.button {\r\n  display: inline-block;\r\n  position: absolute;\r\n  right: 0px;\r\n  top: 1px;\r\n}\r\n\r\nlabel.name input {\r\n  width: 180px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n}\r\n\r\ndiv.elemental-resonance {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n}\r\n\r\nimg.elemental-resonance {\r\n  width: 20px;\r\n}\r\n\r\n.members table {\r\n  width: 100%;\r\n  table-layout: fixed;\r\n  border-spacing: 0;\r\n  text-align: center;\r\n}\r\n\r\ndiv.description {\r\n  display: inline-block;\r\n  margin-top: 3px;\r\n  font-size: 2rem;\r\n  height: 2.4rem;\r\n  text-align: center;\r\n  vertical-align: top;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n}\r\n\r\nspan.control-button {\r\n  display: inline-block;\r\n  margin-left: 4px;\r\n  margin-right: 4px;\r\n  vertical-align: baseline;\r\n  color: orange;\r\n  font-size: 3rem;\r\n  padding-bottom: 0;\r\n}\r\n\r\ntable.res {\r\n  width: 100%;\r\n  table-layout: fixed;\r\n  color: black;\r\n  font-size: 2rem;\r\n}\r\n\r\n.physical {\r\n  background-color: silver;\r\n}\r\n\r\ndiv.team-tags {\r\n  height: 12px;\r\n}\r\n\r\nspan.tag {\r\n  display: inline-block;\r\n  width: auto;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  height: 12px;\r\n  font-size: 10px;\r\n  background: linear-gradient(to top, #3d3d3b, #141414);\r\n  border: 1px solid whitesmoke;\r\n  border-radius: 3px;\r\n  margin: 0px 1px;\r\n  vertical-align: middle;\r\n  padding-top: 1px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"rotation-box\" v-if=\"watchCount\">\r\n    <div class=\"pane1\">\r\n      <fieldset class=\"icon-list\">\r\n        <template v-for=\"member in team.members \" :key=\"member.id\">\r\n          <span v-if=\"member.name\">\r\n            <div class=\"action with-tooltip\">\r\n              <img :class=\"'action-icon' + bgColorClass(member.name)\" :src=\"normalAttackIconSrc(member.name)\"\r\n                :alt=\"displayName(member.name) + ' ' + displayName('')\" @click=\"listActionOnClick(member, 'N')\" />\r\n              <span class=\"tooltip\">\r\n                {{ displayName(member.name) + ' ' + displayName('') }}\r\n              </span>\r\n            </div>\r\n            <div class=\"action with-tooltip\">\r\n              <img :class=\"'action-icon' + bgColorClass(member.name)\" :src=\"elementalSkillIconSrc(member.name)\"\r\n                :alt=\"displayName(member.name) + ' ' + displayName('')\" @click=\"listActionOnClick(member, 'E')\" />\r\n              <span class=\"tooltip\">\r\n                {{ displayName(member.name) + ' ' + displayName(\"\") }}\r\n              </span>\r\n            </div>\r\n            <div class=\"action with-tooltip\">\r\n              <img :class=\"'action-icon' + bgColorClass(member.name)\" :src=\"elementalBurstIconSrc(member.name)\"\r\n                :alt=\"displayName(member.name) + ' ' + displayName('')\" @click=\"listActionOnClick(member, 'Q')\" />\r\n              <span class=\"tooltip\">\r\n                {{ displayName(member.name) + ' ' + displayName('') }}\r\n              </span>\r\n            </div>\r\n          </span>\r\n        </template>\r\n        <table class=\"control-button\">\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                <span class=\"material-symbols-outlined control-button\"\r\n                  @click=\"$emit('click:jump-to-team')\">stat_2</span>\r\n              </td>\r\n              <td>\r\n                <label :class=\"removeMode ? 'checked' : ''\">\r\n                  <input type=\"checkbox\" v-model=\"removeMode\">\r\n                  <span class=\"material-symbols-outlined\">delete</span>\r\n                </label>\r\n              </td>\r\n              <td>\r\n                <div v-if=\"selectedAction\">\r\n                  <img :class=\"'action-icon handle' + bgColorClass(selectedAction.member)\"\r\n                    :src=\"getActionDetail(selectedAction).icon_url\"\r\n                    :alt=\"displayName(getActionDetail(selectedAction).)\"\r\n                    @click=\"selectedActionOnClick(selectedAction)\" />\r\n                </div>\r\n                <div class=\"action-attribute\" v-if=\"selectedAction\">\r\n                  {{ actionDisplay(selectedAction) }}\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </fieldset>\r\n      <fieldset class=\"rotation-list\">\r\n        <draggable :list=\"rotationList\" item-key=\"id\" :sort=\"true\" handle=\".handle\" :delay=\"100\" :animation=\"200\"\r\n          @change=\"rotationListOnChange\">\r\n          <template #item=\"{ element }\">\r\n            <div class=\"rotation-item\">\r\n              <img v-if=\"previousRotation(element)?.member != element.member\" class=\"character-icon\"\r\n                :src=\"getCharacterMaster(element.member)?.icon_url ?? IMG_SRC_DUMMY\"\r\n                :alt=\"displayName(element.member)\" />\r\n              <div v-if=\"getActionDetail(element)\" :class=\"'action-item ' + colorClass(element.member)\">\r\n                <div class=\"with-tooltip handle\">\r\n                  <img :class=\"'action-icon' + bgColorClass(element.member) + selectedActionClass(element)\"\r\n                    :src=\"getActionDetail(element).icon_url\" :alt=\"displayName(getActionDetail(element).)\"\r\n                    @click=\"rotationActionOnClick(element)\" />\r\n                  <div v-if=\"removeMode\" class=\"remove-mark\" @click=\"removeItemOnClick(element)\"></div>\r\n                </div>\r\n                <div class=\"action-attribute\">\r\n                  {{ actionDisplay(element) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </draggable>\r\n        <br />\r\n        <textarea class=\"rotation-description\" v-model=\"rotationDescription\" rows=\"10\" maxlength=\"400\"\r\n          @change=\"updateRotation\"></textarea>\r\n      </fieldset>\r\n      <br /> <br />\r\n      <br /> <br />\r\n      <table class=\"guide\">\r\n        <tbody>\r\n          <tr>\r\n            <th>N</th>\r\n            <td>1</td>\r\n            <th>N2</th>\r\n            <td>2</td>\r\n            <th>NX</th>\r\n            <td>X</td>\r\n          </tr>\r\n          <tr>\r\n            <th>N1C</th>\r\n            <td>1+</td>\r\n            <th>N2C</th>\r\n            <td>2+</td>\r\n            <th>NXC</th>\r\n            <td>X+</td>\r\n          </tr>\r\n          <tr>\r\n            <th>C</th>\r\n            <td></td>\r\n            <td colspan=\"4\"></td>\r\n          </tr>\r\n          <tr>\r\n            <th>P</th>\r\n            <td></td>\r\n            <td colspan=\"4\"></td>\r\n          </tr>\r\n          <tr>\r\n            <th>E</th>\r\n            <td></td>\r\n            <th>E.Press</th>\r\n            <td>()</td>\r\n            <th>E.Hold</th>\r\n            <td>()</td>\r\n          </tr>\r\n          <tr>\r\n            <th>Q</th>\r\n            <td></td>\r\n            <td colspan=\"4\"></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <div class=\"pane2\" v-if=\"true\">\r\n      <ERCalculator :team=\"team\" :rotationList=\"rotationList\" :teamMemberResult=\"teamMemberResult\"\r\n        :constellations=\"constellations\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from \"lodash\";\r\nimport draggable from \"vuedraggable\";\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { ELEMENT_BG_COLOR_CLASS, ELEMENT_COLOR_CLASS, IMG_SRC_DUMMY } from \"@/master\";\r\nimport { getElementalSkillActions } from \"@/particlemaster\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { CHARGED_ONLY_CHARACTER, CHARGED_WITH_NORMAL_CHARACTER, CHARGED_WITH_NORMAL_WEAPON, getCharacterDetail, getCharacterMaster, getNormalAttackDan, setupCharacterDetailMap, TActionItem, TConstellation, TMember, TTeam, TTeamMemberResult } from \"./team\";\r\nimport ERCalculator from './ERCalculator.vue';\r\n\r\nexport default defineComponent({\r\n  name: \"TeamRotation\",\r\n  components: {\r\n    draggable,\r\n    ERCalculator,\r\n  },\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n  },\r\n  emit: ['update:rotation', 'click:jump-to-team'],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n    const removeMode = ref(false);\r\n    const normalAttackActions = reactive({} as { [key: string]: string[] }); // //\r\n    const elementalSkillActions = reactive({} as { [key: string]: string[] }); // \r\n    const rotationList = reactive([] as TActionItem[]);\r\n    const actionId = ref(0);\r\n    const rotationDescription = ref('');\r\n    const selectedActionId = ref(-1);\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, async () => {\r\n      await initializeTeam(props.team);\r\n    });\r\n\r\n    const initializeTeam = async (team: TTeam) => {\r\n      await setupCharacterDetailMap();\r\n      for (const member of team.members) {\r\n        if (member.name) {\r\n          const characterMaster = getCharacterMaster(member.name);\r\n          if (characterMaster) {\r\n            const isCWith = (CHARGED_WITH_NORMAL_WEAPON.includes(characterMaster?.) || CHARGED_WITH_NORMAL_CHARACTER.includes(member.name)) && !CHARGED_ONLY_CHARACTER.includes(member.name);\r\n            const workArr: string[] = [];\r\n            for (let i = 0; i < getNormalAttackDan(member.name); i++) {\r\n              const work = 'N' + (i > 0 ? String(i + 1) : '');\r\n              workArr.push(work);\r\n              if (isCWith) {\r\n                workArr.push(work + (work === 'N' ? '1C' : 'C'));\r\n              }\r\n            }\r\n            if (!isCWith) {\r\n              workArr.push('C');\r\n            }\r\n            workArr.push('P');\r\n            normalAttackActions[member.name] = workArr;\r\n          }\r\n          elementalSkillActions[member.name] = getElementalSkillActions(member.name);\r\n        }\r\n      }\r\n      const isSameMember = team.rotation.filter(rotation => !team.members.filter(member => member.name).map(member => member.name).includes(rotation.member)).length == 0;\r\n      if (isSameMember) {\r\n        if (team.rotation.length) {\r\n          const workArr = _.cloneDeep(team.rotation);\r\n          workArr.forEach(rotation => {\r\n            if (rotation.action === 'NC') {\r\n              rotation.action = 'N1C';\r\n            } else if (rotation.action.startsWith('E')) {\r\n              const actions = elementalSkillActions[rotation.member];\r\n              if (actions && actions.length > 0 && !actions.includes(rotation.action)) {\r\n                rotation.action = actions[0];\r\n              }\r\n            }\r\n          })\r\n          rotationList.splice(0, rotationList.length, ...workArr);\r\n          actionId.value = Math.max(...rotationList.map(s => s.id)) ?? rotationList.length;\r\n        } else {\r\n          rotationList.splice(0, rotationList.length);\r\n          actionId.value = 0;\r\n        }\r\n      } else {\r\n        rotationList.splice(0, rotationList.length);\r\n        actionId.value = 0;\r\n        updateRotation();\r\n      }\r\n      rotationDescription.value = team.rotationDescription;\r\n      watchCount.value++;\r\n    } \r\n\r\n    onMounted(() => {\r\n      initializeTeam(props.team);\r\n      props.team.members.forEach(member => {\r\n        normalAttackIconSrc(member.name);\r\n      })\r\n    })\r\n\r\n    const selectedAction = computed((): TActionItem | undefined => {\r\n      const actionArr = rotationList.filter(rotation => rotation.id == selectedActionId.value);\r\n      return actionArr.length > 0 ? actionArr[0] : undefined;\r\n    })\r\n\r\n    const getActionDetail = (item: TActionItem) => {\r\n      let result;\r\n      const master = getCharacterDetail(item.member);\r\n      if (master) {\r\n        if (normalAttackActions[item.member].includes(item.action)) { // , , \r\n          result = master.;\r\n        } else if (elementalSkillActions[item.member].includes(item.action)) { // \r\n          result = master.;\r\n        } else if (item.action == 'Q') { // \r\n          result = master.;\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const previousRotation = (item: TActionItem) => {\r\n      let result;\r\n      for (const rotation of rotationList) {\r\n        if (item.id == rotation.id) {\r\n          break;\r\n        }\r\n        result = rotation;\r\n      }\r\n      return result;\r\n    }\r\n\r\n    const normalAttackIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const elementalSkillIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const elementalBurstIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const colorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n    const bgColorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_BG_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n\r\n    const actionDisplay = (item: TActionItem) =>\r\n      item.action.startsWith('E') ? item.action.replace(/^E\\./, '') : item.action;\r\n\r\n    const selectedActionClass = (item: TActionItem) =>\r\n      selectedActionId.value == item.id ? ' selected' : '';\r\n\r\n    const updateRotation = () => {\r\n      context.emit('update:rotation', rotationList, rotationDescription.value);\r\n    }\r\n\r\n    const rotationListOnChange = () => {\r\n      updateRotation();\r\n    }\r\n\r\n    const listActionOnClick = (member: TMember, actionKey: string) => {\r\n      if (!normalAttackActions[member.name] || !elementalSkillActions[member.name]) {\r\n        return;\r\n      }\r\n      let action = actionKey;\r\n      if (normalAttackActions[member.name].includes(action)) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && normalAttackActions[member.name].includes(s.action));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        }\r\n      } else if (action.startsWith('E')) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && elementalSkillActions[member.name].includes(s.action));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        } else {\r\n          const actions = elementalSkillActions[member.name];\r\n          if (actions && actions.length > 0) {\r\n            action = actions[0];\r\n          }\r\n        }\r\n      }\r\n      rotationList.push({\r\n        id: ++actionId.value,\r\n        member: member.name,\r\n        action: action,\r\n      });\r\n      updateRotation();\r\n    }\r\n\r\n    const rotationActionOnClick = (item: TActionItem) => {\r\n      if (removeMode.value) {\r\n        removeItemOnClick(item);\r\n      } else if (selectedActionId.value == item.id) {\r\n        selectedActionId.value = -1;\r\n      } else if (normalAttackActions[item.member].includes(item.action)) {\r\n        selectedActionId.value = item.id;\r\n      } else if (item.action.startsWith('E') && elementalSkillActions[item.member].length > 1) {\r\n        selectedActionId.value = item.id;\r\n      } else {\r\n        selectedActionId.value = -1;\r\n      }\r\n    }\r\n\r\n    const selectedActionOnClick = (item: TActionItem | undefined) => {\r\n      if (item) {\r\n        for (const actionArr of [normalAttackActions[item.member], elementalSkillActions[item.member]]) {\r\n          if (actionArr?.length) {\r\n            const index = actionArr.indexOf(item.action);\r\n            if (index != -1) {\r\n              item.action = (index + 1) < actionArr.length ? actionArr[index + 1] : actionArr[0];\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      updateRotation();\r\n    }\r\n\r\n    const removeItemOnClick = (item: TActionItem) => {\r\n      rotationList.splice(0, rotationList.length, ...rotationList.filter(s => s != item));\r\n      updateRotation();\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n      IMG_SRC_DUMMY,\r\n      removeMode,\r\n\r\n      watchCount,\r\n      normalAttackIconSrc,\r\n      elementalSkillIconSrc,\r\n      elementalBurstIconSrc,\r\n      colorClass,\r\n      bgColorClass,\r\n\r\n      getCharacterMaster,\r\n\r\n      rotationList,\r\n      rotationDescription,\r\n      previousRotation,\r\n      getCharacterDetail,\r\n      getActionDetail,\r\n      actionDisplay,\r\n      selectedAction,\r\n      selectedActionClass,\r\n\r\n      rotationListOnChange,\r\n      listActionOnClick,\r\n      rotationActionOnClick,\r\n      removeItemOnClick,\r\n      selectedActionOnClick,\r\n      updateRotation,\r\n\r\n      initializeTeam,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style scoped>\r\n@media all and (min-width: 720px) {\r\n  .rotation-box {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr;\r\n    grid-template-rows: auto;\r\n    grid-template-areas: \"pane1 pane2\";\r\n  }\r\n}\r\n\r\n@media all and (max-width: 719px) {\r\n  .rotation-box {\r\n    display: grid;\r\n    grid-template-columns: 100%;\r\n    grid-template-rows: auto auto;\r\n    grid-template-areas:\r\n      \"pane1\"\r\n      \"pane2\";\r\n  }\r\n}\r\n\r\n.pane1 {\r\n  grid-area: pane1;\r\n}\r\n\r\n.pane2 {\r\n  grid-area: pane2;\r\n}\r\n\r\nfieldset.icon-list {\r\n  padding-bottom: 0px;\r\n}\r\n\r\ndiv.action {\r\n  display: inline-block;\r\n}\r\n\r\nimg.action-icon {\r\n  width: 45px;\r\n  height: 45px;\r\n  border-radius: 50%;\r\n}\r\n\r\nimg.character-icon {\r\n  vertical-align: top;\r\n  width: 65px;\r\n  height: 50px;\r\n  object-position: top;\r\n  object-fit: cover;\r\n}\r\n\r\nfieldset.rotation-list {\r\n  text-align: left;\r\n  background-color: whitesmoke;\r\n}\r\n\r\ntable.control-button {\r\n  table-layout: fixed;\r\n  width: 100%;\r\n  margin-top: 0;\r\n  margin-bottom: 0;\r\n  border: none;\r\n}\r\n\r\ntable.control-button td {\r\n  height: 62px;\r\n  vertical-align: bottom;\r\n}\r\n\r\ntable.control-button td:first-child,\r\ntable.control-button td:last-child {\r\n  width: 45px;\r\n}\r\n\r\ntable.control-button button {\r\n  font-size: 12px;\r\n  background-color: transparent;\r\n  border-color: silver;\r\n  border-style: none;\r\n}\r\n\r\nspan.control-button {\r\n  color: orange;\r\n  font-size: 3rem;\r\n}\r\n\r\ntable.control-button input[type=\"checkbox\"] {\r\n  display: none;\r\n}\r\n\r\n.control-button label.checked {\r\n  color: orange;\r\n}\r\n\r\ndiv.rotation-item {\r\n  display: inline-block;\r\n  position: relative;\r\n  vertical-align: top;\r\n  font-size: 14px;\r\n  padding-left: 4px;\r\n  padding-bottom: 4px;\r\n}\r\n\r\ndiv.action-item {\r\n  display: inline-block;\r\n  text-align: center;\r\n}\r\n\r\ndiv.action-attribute {\r\n  text-align: center;\r\n  text-shadow: 0px 1px 0px #003366;\r\n  font-size: 14px;\r\n}\r\n\r\n.selected {\r\n  opacity: 0.5;\r\n  border-radius: 5px;\r\n}\r\n\r\n.tooltip {\r\n  top: -3rem;\r\n}\r\n\r\ndiv.remove-mark {\r\n  display: block;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: calc(50% - 15px);\r\n}\r\n\r\n.remove-mark::before,\r\n.remove-mark::after {\r\n  content: '';\r\n  width: 30px;\r\n  height: 3px;\r\n  background: black;\r\n  position: absolute;\r\n  transform: translateY(-50%) rotate(45deg);\r\n}\r\n\r\n.remove-mark::after {\r\n  transform: translateY(-50%) rotate(135deg);\r\n}\r\n\r\ntextarea.rotation-description {\r\n  display: block;\r\n  width: calc(100% - 20px);\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  padding: 3px 5px;\r\n}\r\n\r\ntable.guide {\r\n  width: calc(100% - 15px);\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  text-align: left;\r\n  table-layout: fixed;\r\n  border-spacing: 0;\r\n  border-radius: 10px;\r\n  border: 1px solid silver;\r\n  padding: 4px 4px 2px 4px;\r\n}\r\n\r\n.guide th {\r\n  width: 9rem;\r\n}\r\n\r\n.guide th,\r\n.guide td {\r\n  border-bottom: 1px solid silver;\r\n  border-right: 1px solid silver;\r\n  vertical-align: top;\r\n  padding-left: 3px;\r\n}\r\n\r\n.guide tr:last-child th,\r\n.guide tr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\n.guide td:last-child {\r\n  border-right: none;\r\n}\r\n</style>\r\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow } from \"vue\"\n\nconst _hoisted_1 = { class: \"artifact\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"artifact\"\n}\nconst _hoisted_3 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_4 = { class: \"control\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_7 = { class: \"with-tooltip\" }\nconst _hoisted_8 = [\"src\", \"alt\"]\nconst _hoisted_9 = { class: \"tooltip\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"edit-mainstat\"\n}\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = [\"step\"]\nconst _hoisted_13 = {\n  key: 1,\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_14 = { key: 2 }\nconst _hoisted_15 = { key: 3 }\nconst _hoisted_16 = { style: {\"width\":\"55%\"} }\nconst _hoisted_17 = { class: \"artifact-substat\" }\nconst _hoisted_18 = { class: \"right\" }\nconst _hoisted_19 = [\"onUpdate:modelValue\"]\nconst _hoisted_20 = [\"value\", \"disabled\"]\nconst _hoisted_21 = { class: \"right\" }\nconst _hoisted_22 = [\"onUpdate:modelValue\", \"step\"]\nconst _hoisted_23 = { key: 1 }\nconst _hoisted_24 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_25 = {\n  key: 0,\n  class: \"score\"\n}\nconst _hoisted_26 = { class: \"control\" }\nconst _hoisted_27 = {\n  key: 0,\n  type: \"button\"\n}\nconst _hoisted_28 = {\n  key: 0,\n  class: \"material-symbols-outlined\",\n  style: {\"color\":\"yellow\"}\n}\nconst _hoisted_29 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_30 = { class: \"with-tooltip\" }\nconst _hoisted_31 = [\"src\", \"alt\"]\nconst _hoisted_32 = { class: \"tooltip\" }\nconst _hoisted_33 = {\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_34 = { style: {\"width\":\"55%\"} }\nconst _hoisted_35 = { class: \"artifact-substat\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ArtifactSetSelect = _resolveComponent(\"ArtifactSetSelect\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_ctx.control == 'editable')\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_2, [\n          _createElementVNode(\"tbody\", null, [\n            _createElementVNode(\"tr\", null, [\n              _createElementVNode(\"td\", _hoisted_3, [\n                _createElementVNode(\"div\", _hoisted_4, [\n                  _createElementVNode(\"button\", {\n                    type: \"button\",\n                    onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.isEditing = !_ctx.isEditing))\n                  }, [\n                    (_ctx.isEditing)\n                      ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \" edit_off \"))\n                      : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \" edit \"))\n                  ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_7, [\n                  _createElementVNode(\"img\", {\n                    class: \"artifact-icon\",\n                    src: _ctx.artifactImgSrc,\n                    alt: _ctx.displayName(_ctx.copiedArtifact.name),\n                    onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.artifactIconOnClick()))\n                  }, null, 8, _hoisted_8),\n                  _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n                ]),\n                (_ctx.isEditing)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                      _withDirectives(_createElementVNode(\"select\", {\n                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.copiedArtifact.mainStat) = $event)),\n                        onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                      }, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.mainStatOptions, (option) => {\n                          return (_openBlock(), _createElementBlock(\"option\", {\n                            key: option,\n                            value: option\n                          }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_11))\n                        }), 128))\n                      ], 544), [\n                        [_vModelSelect, _ctx.copiedArtifact.mainStat]\n                      ]),\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"number\",\n                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.copiedArtifact.mainStatValue) = $event)),\n                        step: _ctx.statStep(_ctx.copiedArtifact.mainStat),\n                        min: \"0\",\n                        onChange: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                      }, null, 40, _hoisted_12), [\n                        [_vModelText, _ctx.copiedArtifact.mainStatValue]\n                      ])\n                    ]))\n                  : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' +\r\n                _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                  _ctx.copiedArtifact.mainStatValue)), 1)),\n                (_ctx.isEditing)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                      _withDirectives(_createElementVNode(\"select\", {\n                        class: \"star\",\n                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.copiedArtifact.rarity) = $event)),\n                        onChange: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.starOnChange && _ctx.starOnChange(...args)))\n                      }, _cache[11] || (_cache[11] = [\n                        _createElementVNode(\"option\", { value: \"5\" }, \" 5 \", -1),\n                        _createElementVNode(\"option\", { value: \"4\" }, \" 4 \", -1)\n                      ]), 544), [\n                        [_vModelSelect, _ctx.copiedArtifact.rarity]\n                      ])\n                    ]))\n                  : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                        return (_openBlock(), _createElementBlock(\"img\", {\n                          class: \"star\",\n                          src: \"images/star.png\",\n                          key: dummy\n                        }))\n                      }), 128))\n                    ]))\n              ]),\n              _createElementVNode(\"td\", _hoisted_16, [\n                _createElementVNode(\"table\", _hoisted_17, [\n                  _createElementVNode(\"tbody\", null, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                      return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                        (_ctx.isEditing)\n                          ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                              _createElementVNode(\"td\", _hoisted_18, [\n                                _withDirectives(_createElementVNode(\"select\", {\n                                  \"onUpdate:modelValue\": ($event: any) => ((subStat.name) = $event),\n                                  onChange: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                                }, [\n                                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.subStatOptions, (option) => {\n                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                      key: option,\n                                      value: option,\n                                      disabled: _ctx.subStatOptionDisabled(option, subStat.name)\n                                    }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_20))\n                                  }), 128))\n                                ], 40, _hoisted_19), [\n                                  [_vModelSelect, subStat.name]\n                                ])\n                              ]),\n                              _createElementVNode(\"td\", _hoisted_21, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                  type: \"number\",\n                                  \"onUpdate:modelValue\": ($event: any) => ((subStat.value) = $event),\n                                  step: _ctx.statStep(subStat.name),\n                                  min: \"0\",\n                                  onChange: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                                }, null, 40, _hoisted_22), [\n                                  [_vModelText, subStat.value]\n                                ])\n                              ])\n                            ], 64))\n                          : (_openBlock(), _createElementBlock(\"td\", _hoisted_23, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1))\n                      ]))\n                    }), 128))\n                  ])\n                ])\n              ])\n            ])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"table\", {\n          key: 1,\n          class: \"artifact\",\n          onClick: _cache[10] || (_cache[10] = ($event: any) => (_ctx.selectOnClick()))\n        }, [\n          _createElementVNode(\"tbody\", null, [\n            _createElementVNode(\"tr\", null, [\n              _createElementVNode(\"td\", _hoisted_24, [\n                (_ctx.score)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, _toDisplayString(Math.round(_ctx.score * 10) / 10), 1))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"div\", _hoisted_26, [\n                  (_ctx.control == 'selectable')\n                    ? (_openBlock(), _createElementBlock(\"button\", _hoisted_27, [\n                        (_ctx.selected)\n                          ? (_openBlock(), _createElementBlock(\"span\", _hoisted_28, \" select_check_box \"))\n                          : (_openBlock(), _createElementBlock(\"span\", _hoisted_29, \" check_box_outline_blank \"))\n                      ]))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                _createElementVNode(\"div\", _hoisted_30, [\n                  _createElementVNode(\"img\", {\n                    class: \"artifact-icon\",\n                    src: _ctx.artifactImgSrc,\n                    alt: _ctx.displayName(_ctx.copiedArtifact.name)\n                  }, null, 8, _hoisted_31),\n                  _createElementVNode(\"div\", _hoisted_32, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n                ]),\n                _createElementVNode(\"div\", _hoisted_33, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' +\r\n                _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                  _ctx.copiedArtifact.mainStatValue)), 1),\n                _createElementVNode(\"div\", null, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                    return (_openBlock(), _createElementBlock(\"img\", {\n                      class: \"star\",\n                      src: \"images/star.png\",\n                      key: dummy\n                    }))\n                  }), 128))\n                ])\n              ]),\n              _createElementVNode(\"td\", _hoisted_34, [\n                _createElementVNode(\"table\", _hoisted_35, [\n                  _createElementVNode(\"tbody\", null, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                      return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                        _createElementVNode(\"td\", null, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1)\n                      ]))\n                    }), 128))\n                  ])\n                ])\n              ])\n            ])\n          ])\n        ])),\n    _withDirectives(_createElementVNode(\"div\", null, [\n      _createVNode(_component_ArtifactSetSelect, {\n        visible: true,\n        index: 1,\n        \"artifact-set\": _ctx.artifact.setname,\n        \"artifact-set-masters\": _ctx.artifactSetMasters,\n        cat_id: _ctx.artifact.cat_id,\n        \"onUpdate:artifactSet\": _ctx.updateArtifactSet\n      }, null, 8, [\"artifact-set\", \"artifact-set-masters\", \"cat_id\", \"onUpdate:artifactSet\"])\n    ], 512), [\n      [_vShow, _ctx.isListShow]\n    ])\n  ]))\n}","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"title\" }\nconst _hoisted_3 = { class: \"description\" }\nconst _hoisted_4 = { class: \"select-list\" }\nconst _hoisted_5 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_6 = { class: \"tooltip\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"table\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.artifactSetEffects, (item) => {\n            return (_openBlock(), _createElementBlock(_Fragment, { key: item }, [\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"th\", _hoisted_2, _toDisplayString(_ctx.displayName(item.key)), 1)\n              ]),\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_3, _toDisplayString(item.value), 1)\n              ])\n            ], 64))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('artifact-set' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: _ctx.getArtifactIconUrl(item.key, _ctx.cat_id),\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.$emit('update:artifact-set', item.key))\n              }, null, 10, _hoisted_5),\n              _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.displayName(item.key)), 1)\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, vShow as _vShow, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"select-list\" }\nconst _hoisted_3 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_4 = [\"src\", \"alt\"]\nconst _hoisted_5 = { class: \"select-list\" }\nconst _hoisted_6 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = { class: \"select-list\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"ul\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.elementList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.elementCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.elementCheckList))\n                }, null, 40, _hoisted_3), [\n                  [_vModelCheckbox, _ctx.elementCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.elementSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_4)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.weaponList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.weaponCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.weaponCheckList))\n                }, null, 40, _hoisted_6), [\n                  [_vModelCheckbox, _ctx.weaponCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.weaponSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_7)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('character' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: item.icon_url,\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.characterOnClick(item.key))\n              }, null, 10, _hoisted_9),\n              _createElementVNode(\"div\", _hoisted_10, _toDisplayString(_ctx.displayName(item.key)), 1),\n              _createElementVNode(\"img\", {\n                class: \"vision\",\n                src: _ctx.visionSrc(item),\n                alt: item.\n              }, null, 8, _hoisted_11),\n              _withDirectives(_createElementVNode(\"div\", { class: \"selection-number\" }, _toDisplayString(_ctx.selectionNumber(item.key)), 513), [\n                [_vShow, _ctx.selectionNumber(item.key)]\n              ])\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","import { toDisplayString as _toDisplayString, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode, vShow as _vShow, vModelCheckbox as _vModelCheckbox, createStaticVNode as _createStaticVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"er-calculator\" }\nconst _hoisted_2 = { class: \"er-calculator\" }\nconst _hoisted_3 = { class: \"with-tooltip\" }\nconst _hoisted_4 = [\"src\", \"alt\"]\nconst _hoisted_5 = { class: \"tooltip\" }\nconst _hoisted_6 = { colspan: \"2\" }\nconst _hoisted_7 = [\"onUpdate:modelValue\"]\nconst _hoisted_8 = { colspan: \"2\" }\nconst _hoisted_9 = [\"onUpdate:modelValue\"]\nconst _hoisted_10 = [\"value\"]\nconst _hoisted_11 = { colspan: \"2\" }\nconst _hoisted_12 = [\"src\", \"alt\"]\nconst _hoisted_13 = [\"onUpdate:modelValue\"]\nconst _hoisted_14 = [\"value\"]\nconst _hoisted_15 = { class: \"result-row\" }\nconst _hoisted_16 = { colspan: \"2\" }\nconst _hoisted_17 = { colspan: \"2\" }\nconst _hoisted_18 = [\"onUpdate:modelValue\"]\nconst _hoisted_19 = { class: \"label-row\" }\nconst _hoisted_20 = { colspan: \"2\" }\nconst _hoisted_21 = { colspan: \"4\" }\nconst _hoisted_22 = [\"onUpdate:modelValue\"]\nconst _hoisted_23 = { class: \"with-tooltip\" }\nconst _hoisted_24 = [\"src\", \"alt\"]\nconst _hoisted_25 = [\"src\", \"alt\"]\nconst _hoisted_26 = { class: \"tooltip\" }\nconst _hoisted_27 = [\"onUpdate:modelValue\"]\nconst _hoisted_28 = { colspan: \"2\" }\nconst _hoisted_29 = {\n  key: 0,\n  class: \"label-row\"\n}\nconst _hoisted_30 = { colspan: \"2\" }\nconst _hoisted_31 = { colspan: \"4\" }\nconst _hoisted_32 = {\n  colspan: \"2\",\n  class: \"with-tooltip\"\n}\nconst _hoisted_33 = [\"src\", \"alt\"]\nconst _hoisted_34 = [\"src\", \"alt\"]\nconst _hoisted_35 = { class: \"tooltip\" }\nconst _hoisted_36 = [\"onUpdate:modelValue\"]\nconst _hoisted_37 = { colspan: \"2\" }\nconst _hoisted_38 = [\"onUpdate:modelValue\"]\nconst _hoisted_39 = { colspan: \"2\" }\nconst _hoisted_40 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_41 = { class: \"tooltip\" }\nconst _hoisted_42 = { class: \"supply-from-enemy\" }\nconst _hoisted_43 = [\"onUpdate:modelValue\"]\nconst _hoisted_44 = [\"onUpdate:modelValue\"]\nconst _hoisted_45 = { class: \"message-area\" }\nconst _hoisted_46 = { class: \"character\" }\nconst _hoisted_47 = { key: 0 }\nconst _hoisted_48 = { class: \"message-area\" }\nconst _hoisted_49 = {\n  class: \"toggle-switch\",\n  for: \"show-usage-toggle\"\n}\nconst _hoisted_50 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_51 = { style: {\"text-align\":\"center\"} }\nconst _hoisted_52 = { style: {\"text-align\":\"center\"} }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.rotationLength) = $event)),\n          min: \"10\",\n          max: \"180\",\n          onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.rotationLength]\n        ])\n      ])\n    ]),\n    _createElementVNode(\"table\", _hoisted_2, [\n      _createElementVNode(\"tbody\", null, [\n        _createElementVNode(\"tr\", null, [\n          _cache[9] || (_cache[9] = _createElementVNode(\"th\", { colspan: \"2\" }, null, -1)),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _createElementVNode(\"div\", _hoisted_3, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.characterImgSrc(element.character),\n                  alt: _ctx.displayName(element.character),\n                  class: \"character\"\n                }, null, 8, _hoisted_4),\n                _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.displayName(element.character)), 1)\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_6, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element.energyCost) = $event)\n              }, null, 8, _hoisted_7), [\n                [_vModelText, element.energyCost]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_8, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _withDirectives(_createElementVNode(\"select\", {\n                \"onUpdate:modelValue\": ($event: any) => ((element.constellation) = $event),\n                onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n              }, [\n                (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3, 4, 5, 6], (constellation) => {\n                  return _createElementVNode(\"option\", {\n                    key: constellation,\n                    value: constellation\n                  }, _toDisplayString('C' + constellation), 9, _hoisted_10)\n                }), 64))\n              ], 40, _hoisted_9), [\n                [_vModelSelect, element.constellation]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_11, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass('weapon' + _ctx.bgColorClass(index))\n            }, [\n              _createElementVNode(\"img\", {\n                src: _ctx.weaponImgSrc(element.character, element.currentWeapon),\n                alt: _ctx.displayName(element.currentWeapon),\n                class: \"input-item-weapon\"\n              }, null, 8, _hoisted_12),\n              _withDirectives(_createElementVNode(\"select\", {\n                \"onUpdate:modelValue\": ($event: any) => ((element.weaponRefine) = $event),\n                onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n              }, [\n                (_openBlock(), _createElementBlock(_Fragment, null, _renderList([1, 2, 3, 4, 5], (refine) => {\n                  return _createElementVNode(\"option\", {\n                    key: refine,\n                    value: refine\n                  }, _toDisplayString('R' + refine), 9, _hoisted_14)\n                }), 64))\n              ], 40, _hoisted_13), [\n                [_vModelSelect, element.weaponRefine]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", _hoisted_15, [\n          _createElementVNode(\"th\", _hoisted_16, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.energyRechargeGls, (value, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, _toDisplayString(value + '%'), 3))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_17, _toDisplayString(_ctx.displayName('(%)')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element.onField) = $event),\n                min: \"0\",\n                max: \"100\",\n                onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n              }, null, 40, _hoisted_18), [\n                [_vModelText, element.onField]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", _hoisted_19, [\n          _createElementVNode(\"th\", _hoisted_20, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"th\", _hoisted_21, _toDisplayString(_ctx.displayName('')), 1)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticleEnemy, (row, rowIndex) => {\n          return (_openBlock(), _createElementBlock(\"tr\", {\n            key: rowIndex,\n            class: _normalizeClass(_ctx.bgColorClass2(row))\n          }, [\n            _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n            _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 10) / 10), 1),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n              return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_22), [\n                  [_vModelText, row.currentValues[columnIndex]]\n                ])\n              ]))\n            }), 128))\n          ], 2))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticle, (row, rowIndex) => {\n          return (_openBlock(), _createElementBlock(\"tr\", {\n            key: rowIndex,\n            class: _normalizeClass(_ctx.bgColorClass2(row))\n          }, [\n            _createElementVNode(\"th\", _hoisted_23, [\n              _createElementVNode(\"span\", null, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.rowImgSrc1(row),\n                  alt: _ctx.displayName(row.character),\n                  class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n                }, null, 10, _hoisted_24),\n                _createElementVNode(\"img\", {\n                  src: _ctx.rowImgSrc2(row),\n                  alt: _ctx.displayName(row.triggerName),\n                  class: \"input-item\"\n                }, null, 8, _hoisted_25)\n              ]),\n              _createElementVNode(\"span\", _hoisted_26, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n            ]),\n            _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 100) / 100), 1),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n              return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_27), [\n                  [_vModelText, row.currentValues[columnIndex]]\n                ])\n              ]))\n            }), 128))\n          ], 2))\n        }), 128)),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_28, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.particleRecharges, (value, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: \"result\"\n            }, _toDisplayString(value), 1))\n          }), 128))\n        ]),\n        (_ctx.inputRowEnergy.length)\n          ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_29, [\n              _createElementVNode(\"th\", _hoisted_30, _toDisplayString(_ctx.displayName('')), 1),\n              _createElementVNode(\"th\", _hoisted_31, _toDisplayString(_ctx.displayName('')), 1)\n            ]))\n          : _createCommentVNode(\"\", true),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowEnergy, (row, rowIndex) => {\n          return (_openBlock(), _createElementBlock(\"tr\", {\n            key: rowIndex,\n            class: _normalizeClass(_ctx.bgColorClass2(row))\n          }, [\n            _createElementVNode(\"th\", _hoisted_32, [\n              _createElementVNode(\"span\", null, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.rowImgSrc1(row),\n                  alt: _ctx.displayName(row.character),\n                  class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n                }, null, 10, _hoisted_33),\n                _createElementVNode(\"img\", {\n                  src: _ctx.rowImgSrc2(row),\n                  alt: _ctx.displayName(row.triggerName),\n                  class: \"input-item\"\n                }, null, 8, _hoisted_34)\n              ]),\n              _createElementVNode(\"span\", _hoisted_35, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n            ]),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n              return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_36), [\n                  [_vModelText, row.currentValues[columnIndex]]\n                ])\n              ]))\n            }), 128))\n          ], 2))\n        }), 128)),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_37, _toDisplayString(_ctx.displayName('()')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: _ctx.calculatorInput.length }, (_, i) => i), (index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.burstCounts[index]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_38), [\n                [_vModelText, _ctx.burstCounts[index]]\n              ])\n            ], 2))\n          }), 128))\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"th\", _hoisted_39, _toDisplayString(_ctx.displayName('')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: index,\n              class: _normalizeClass(_ctx.bgColorClass(index))\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(element.replaceWeapons, (weapon, weaponIndex) => {\n                return (_openBlock(), _createElementBlock(\"span\", {\n                  key: weaponIndex,\n                  class: \"with-tooltip\"\n                }, [\n                  _createElementVNode(\"img\", {\n                    src: _ctx.replaceWeaponImgSrc(element, weapon),\n                    alt: _ctx.displayName(weapon),\n                    class: _normalizeClass('input-item-weapon' + _ctx.replaceWeaponClass(element, weapon)),\n                    onClick: ($event: any) => (_ctx.replaceWeaponOnClick(element, weapon))\n                  }, null, 10, _hoisted_40),\n                  _createElementVNode(\"span\", _hoisted_41, _toDisplayString(_ctx.displayName(weapon)), 1)\n                ]))\n              }), 128))\n            ], 2))\n          }), 128))\n        ])\n      ])\n    ]),\n    _cache[20] || (_cache[20] = _createElementVNode(\"br\", null, null, -1)),\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.combatLength) = $event)),\n          min: \"1\",\n          onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.combatLength]\n        ])\n      ]),\n      _createElementVNode(\"table\", _hoisted_42, [\n        _createElementVNode(\"caption\", {\n          onClick: _cache[7] || (_cache[7] = ($event: any) => (_ctx.isOpenSupplyFromEnemy = !_ctx.isOpenSupplyFromEnemy))\n        }, _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+') + \" \" + _toDisplayString(_ctx.displayName('')) + \" \" + _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+'), 1),\n        _createElementVNode(\"thead\", null, [\n          _createElementVNode(\"tr\", null, [\n            _cache[10] || (_cache[10] = _createElementVNode(\"th\", null, null, -1)),\n            _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n            _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1)\n          ])\n        ]),\n        _createElementVNode(\"tbody\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.supplyFromEnemy, (element, index) => {\n            return _withDirectives((_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n              _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName(element[0])), 1),\n              _createElementVNode(\"td\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((element[1]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_43), [\n                  [_vModelText, element[1]]\n                ])\n              ]),\n              _createElementVNode(\"td\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"number\",\n                  \"onUpdate:modelValue\": ($event: any) => ((element[2]) = $event),\n                  min: \"0\"\n                }, null, 8, _hoisted_44), [\n                  [_vModelText, element[2]]\n                ])\n              ])\n            ])), [\n              [_vShow, _ctx.isOpenSupplyFromEnemy || element[1] || element[2]]\n            ])\n          }), 128))\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_45, [\n      _cache[12] || (_cache[12] = _createElementVNode(\"hr\", null, null, -1)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.messages, (message, index) => {\n        return (_openBlock(), _createElementBlock(\"p\", { key: index }, [\n          _createElementVNode(\"span\", _hoisted_46, _toDisplayString(message[0]), 1),\n          _cache[11] || (_cache[11] = _createTextVNode(\"  \")),\n          _createElementVNode(\"span\", null, _toDisplayString(message[1]), 1),\n          (message[0] || message[1])\n            ? (_openBlock(), _createElementBlock(\"br\", _hoisted_47))\n            : _createCommentVNode(\"\", true),\n          _createTextVNode(\"  \" + _toDisplayString(message[2]), 1)\n        ]))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_48, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            class: \"hidden\",\n            type: \"checkbox\",\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_ctx.isShowUsage) = $event)),\n            id: \"show-usage-toggle\"\n          }, null, 512), [\n            [_vModelCheckbox, _ctx.isShowUsage]\n          ]),\n          _createElementVNode(\"label\", _hoisted_49, _toDisplayString(_ctx.displayName('')), 1)\n        ]),\n        _withDirectives(_createElementVNode(\"div\", _hoisted_50, [\n          _createElementVNode(\"div\", _hoisted_51, _toDisplayString(_ctx.displayName('')), 1),\n          _cache[19] || (_cache[19] = _createElementVNode(\"ol\", null, [\n            _createElementVNode(\"li\", null, \" \"),\n            _createElementVNode(\"li\", null, \"HP\"),\n            _createElementVNode(\"li\", null, \"1\"),\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\" 8\"),\n              _createElementVNode(\"br\")\n            ])\n          ], -1)),\n          _createElementVNode(\"div\", _hoisted_52, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"ol\", null, [\n            _cache[17] || (_cache[17] = _createStaticVNode(\"<li data-v-7de6944e><br data-v-7de6944e>   20 </li><li data-v-7de6944e><br data-v-7de6944e>   </li><li data-v-7de6944e><br data-v-7de6944e>  </li><li data-v-7de6944e> <br data-v-7de6944e>  </li><li data-v-7de6944e> <br data-v-7de6944e>   </li><li data-v-7de6944e> <br data-v-7de6944e> () </li><li data-v-7de6944e><br data-v-7de6944e> 5 0 </li><li data-v-7de6944e><br data-v-7de6944e> (%)  1 </li><li data-v-7de6944e><br data-v-7de6944e>   </li>\", 9)),\n            _createElementVNode(\"li\", null, [\n              _cache[13] || (_cache[13] = _createTextVNode(\"  \")),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_DECREMENT_IN_BURST, (character, index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character)), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _cache[14] || (_cache[14] = _createTextVNode(\"1 \")),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_UNTIL_MAP.entries(), ([character, untilMap], index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character) + ' : ' + _ctx.actionName('E') + '' +\r\n                                        Array.from(untilMap.entries())\r\n                                            .map(value => value[0]\r\n                                                .map(action => _ctx.actionName(action)).join(_ctx.displayName(''))\r\n                                                + '' + value[1] + _ctx.displayName('')).join(_ctx.displayName(''))), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _cache[15] || (_cache[15] = _createTextVNode(\" \")),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_DELAY_MAP.entries(), ([character, delayArr], index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character) + ' : ' + _ctx.actionName('E') + '' +\r\n                                        delayArr.map(action => _ctx.actionName(action)).join(_ctx.displayName(''))), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _cache[16] || (_cache[16] = _createTextVNode(\"0 \")),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_Q_NOT_RECHARGEABLE, (character, index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character)), 1))\n                }), 128))\n              ])\n            ]),\n            _cache[18] || (_cache[18] = _createElementVNode(\"li\", null, [\n              _createTextVNode(\" \"),\n              _createElementVNode(\"ul\", null, [\n                _createElementVNode(\"li\", null, \" : 9\"),\n                _createElementVNode(\"li\", null, \" : 4()\"),\n                _createElementVNode(\"li\", null, \" : 6\"),\n                _createElementVNode(\"li\", null, \" : 3\")\n              ])\n            ], -1))\n          ])\n        ], 512), [\n          [_vShow, _ctx.isShowUsage]\n        ])\n      ])\n    ])\n  ]))\n}","import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"member\" }\nconst _hoisted_2 = { class: \"with-tooltip\" }\nconst _hoisted_3 = [\"src\", \"alt\"]\nconst _hoisted_4 = { class: \"tooltip\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = [\"src\", \"alt\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = {\n  key: 0,\n  class: \"stat-value\"\n}\nconst _hoisted_9 = { key: 1 }\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"src\"]\nconst _hoisted_12 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"member-img\",\n      onDblclick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.characterOnDblclick && _ctx.characterOnDblclick(...args)))\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"img\", {\n          class: _normalizeClass('character' + _ctx.characterImgClass),\n          src: _ctx.characterImgSrc,\n          alt: _ctx.displayName(_ctx.member.name)\n        }, null, 10, _hoisted_3),\n        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.displayName(_ctx.member.name)), 1)\n      ]),\n      _createElementVNode(\"img\", {\n        class: \"vision\",\n        src: _ctx.visionImgSrc,\n        alt: \"vision\"\n      }, null, 8, _hoisted_5),\n      _withDirectives(_createElementVNode(\"div\", { class: \"constellation\" }, _toDisplayString(_ctx.constellation), 513), [\n        [_vShow, _ctx.constellation]\n      ]),\n      (_ctx.member.tags[3])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: _normalizeClass('tag tag-3' + _ctx.tagColorClass(3))\n          }, _toDisplayString(_ctx.member.tags[3]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[2])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 1,\n            class: _normalizeClass('tag tag-2' + _ctx.tagColorClass(2))\n          }, _toDisplayString(_ctx.member.tags[2]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[1])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 2,\n            class: _normalizeClass('tag tag-1' + _ctx.tagColorClass(1))\n          }, _toDisplayString(_ctx.member.tags[1]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[0])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 3,\n            class: _normalizeClass('tag tag-0' + _ctx.tagColorClass(0))\n          }, _toDisplayString(_ctx.member.tags[0]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[0])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 4,\n            class: \"replacement replacement-0\",\n            src: _ctx.replaceImgSrc(0),\n            alt: _ctx.member.replacements[0]\n          }, null, 8, _hoisted_6))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[1])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 5,\n            class: \"replacement replacement-1\",\n            src: _ctx.replaceImgSrc(1),\n            alt: _ctx.member.replacements[1]\n          }, null, 8, _hoisted_7))\n        : _createCommentVNode(\"\", true)\n    ], 32),\n    (_ctx.displayStat)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString(_ctx.statValue), 1))\n      : _createCommentVNode(\"\", true),\n    (_ctx.showEquipment)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n          _createElementVNode(\"img\", {\n            class: \"weapon\",\n            src: _ctx.imgWeaponSrc,\n            alt: \"weapon\"\n          }, null, 8, _hoisted_10),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(0),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_11),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(1),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_12)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, createVNode as _createVNode, vShow as _vShow, vModelSelect as _vModelSelect } from \"vue\"\n\nconst _hoisted_1 = {\n  colspan: \"2\",\n  class: \"character-select-mode\"\n}\nconst _hoisted_2 = { key: 0 }\nconst _hoisted_3 = { key: 1 }\nconst _hoisted_4 = { class: \"member-tags\" }\nconst _hoisted_5 = { colspan: \"2\" }\nconst _hoisted_6 = [\"onClick\"]\nconst _hoisted_7 = { class: \"members\" }\nconst _hoisted_8 = { colspan: \"2\" }\nconst _hoisted_9 = { class: \"buildname-select\" }\nconst _hoisted_10 = [\"value\"]\nconst _hoisted_11 = { class: \"team-tags\" }\nconst _hoisted_12 = { colspan: \"2\" }\nconst _hoisted_13 = [\"onClick\"]\nconst _hoisted_14 = { class: \"buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_CharacterSelect = _resolveComponent(\"CharacterSelect\")!\n  const _component_MemberItem = _resolveComponent(\"MemberItem\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (!_ctx.characterSelectMode)\n      ? (_openBlock(), _createBlock(_component_CharacterSelect, {\n          key: 0,\n          visible: true,\n          characters: _ctx.characters,\n          \"onUpdate:characters\": _ctx.updateCharacters\n        }, null, 8, [\"characters\", \"onUpdate:characters\"]))\n      : (_openBlock(), _createBlock(_component_CharacterSelect, {\n          key: 1,\n          visible: true,\n          characters: _ctx.replacements,\n          \"onUpdate:characters\": _ctx.updateReplacements\n        }, null, 8, [\"characters\", \"onUpdate:characters\"])),\n    _cache[13] || (_cache[13] = _createElementVNode(\"hr\", null, null, -1)),\n    _createElementVNode(\"table\", null, [\n      _createElementVNode(\"tbody\", null, [\n        _createElementVNode(\"tr\", null, [\n          _cache[9] || (_cache[9] = _createElementVNode(\"th\", null, \"Team Name\", -1)),\n          _createElementVNode(\"td\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.workTeam.name) = $event)),\n              type: \"text\",\n              minlength: \"1\",\n              maxlength: \"16\",\n              placeholder: \"INPUT TEAM NAME\"\n            }, null, 512), [\n              [_vModelText, _ctx.workTeam.name]\n            ])\n          ])\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _cache[10] || (_cache[10] = _createElementVNode(\"th\", null, \"Character Select Mode\", -1)),\n          _createElementVNode(\"td\", null, [\n            _createElementVNode(\"button\", {\n              class: \"character-select-mode\",\n              onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.characterSelectModeOnClick && _ctx.characterSelectModeOnClick(...args)))\n            }, _toDisplayString(_ctx.characterSelectMode ? 'REPLACEMENTS' : 'MEMBERS'), 1)\n          ])\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"td\", _hoisted_1, [\n            (!_ctx.characterSelectMode)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, \"  \"))\n              : (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(_ctx.selectedMemberName() + ''), 1))\n          ])\n        ]),\n        _createElementVNode(\"tr\", _hoisted_4, [\n          _createElementVNode(\"td\", _hoisted_5, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.MEMBER_TAG_LIST, (tag) => {\n              return (_openBlock(), _createElementBlock(\"span\", {\n                class: _normalizeClass('tag' + _ctx.tagSelectedClass(tag)),\n                key: tag,\n                onClick: ($event: any) => (_ctx.tagOnClick(tag))\n              }, _toDisplayString(tag), 11, _hoisted_6))\n            }), 128))\n          ])\n        ]),\n        _createElementVNode(\"tr\", _hoisted_7, [\n          _createElementVNode(\"td\", _hoisted_8, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.workTeam.members, (member) => {\n              return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass('member' + _ctx.memberSelectedClass(member.id)),\n                key: member.id\n              }, [\n                _createVNode(_component_MemberItem, {\n                  member: member,\n                  onClick: ($event: any) => (_ctx.memberOnClick(member.id))\n                }, null, 8, [\"member\", \"onClick\"])\n              ], 2))\n            }), 128)),\n            _createElementVNode(\"div\", _hoisted_9, [\n              _withDirectives(_createElementVNode(\"select\", {\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.selectedMemberBuildname) = $event)),\n                onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.buildnameOnChange && _ctx.buildnameOnChange(...args)))\n              }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.buildnames, (value) => {\n                  return (_openBlock(), _createElementBlock(\"option\", {\n                    key: value,\n                    value: value\n                  }, _toDisplayString(value), 9, _hoisted_10))\n                }), 128))\n              ], 544), [\n                [_vShow, _ctx.buildnames.length],\n                [_vModelSelect, _ctx.selectedMemberBuildname]\n              ])\n            ])\n          ])\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _cache[11] || (_cache[11] = _createElementVNode(\"th\", null, \"Short Note\", -1)),\n          _createElementVNode(\"td\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"description\",\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.workTeam.description) = $event)),\n              type: \"text\",\n              maxlength: \"40\",\n              placeholder: \"INPUT NOTE\"\n            }, null, 512), [\n              [_vModelText, _ctx.workTeam.description]\n            ])\n          ])\n        ]),\n        _createElementVNode(\"tr\", _hoisted_11, [\n          _createElementVNode(\"td\", _hoisted_12, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.workTeamTags, (tag) => {\n              return (_openBlock(), _createElementBlock(\"span\", {\n                class: _normalizeClass(_ctx.teamTagSelected(tag) ? 'tag selected' : 'tag'),\n                key: tag,\n                onClick: ($event: any) => (_ctx.teamTagOnClick(tag))\n              }, _toDisplayString(tag), 11, _hoisted_13))\n            }), 128))\n          ])\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _cache[12] || (_cache[12] = _createElementVNode(\"th\", null, \"Tags\", -1)),\n          _createElementVNode(\"td\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"team-tags\",\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.txtTeamTags) = $event)),\n              type: \"text\",\n              maxlength: \"40\",\n              placeholder: \"INPUT TAGS\",\n              onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.txtTeamTagsOnChange && _ctx.txtTeamTagsOnChange(...args)))\n            }, null, 544), [\n              [_vModelText, _ctx.txtTeamTags]\n            ])\n          ])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_14, [\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.cancelOnClick && _ctx.cancelOnClick(...args)))\n      }, \"cancel\"),\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.okOnClick && _ctx.okOnClick(...args)))\n      }, \"ok\")\n    ])\n  ], 64))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"title\" }\nconst _hoisted_2 = { class: \"name\" }\nconst _hoisted_3 = { class: \"elemental-resonance\" }\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = { class: \"members\" }\nconst _hoisted_6 = {\n  key: 0,\n  class: \"res\"\n}\nconst _hoisted_7 = {\n  key: 1,\n  class: \"team-tags\"\n}\nconst _hoisted_8 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_9 = { class: \"description\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MemberItem = _resolveComponent(\"MemberItem\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass('team' + _ctx.selectedClass)\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"label\", _hoisted_2, [\n        _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"handle\" }, \"\", -1)),\n        _createElementVNode(\"span\", null, _toDisplayString(_ctx.team.name), 1),\n        (_ctx.editable && _ctx.selected)\n          ? (_openBlock(), _createElementBlock(\"span\", {\n              key: 0,\n              class: \"button material-symbols-outlined\",\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.editOnClick && _ctx.editOnClick(...args)))\n            }, \" edit_square \"))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3], (index) => {\n          return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n            (_ctx.resonanceElementImgSrcs[index])\n              ? (_openBlock(), _createElementBlock(\"img\", {\n                  key: 0,\n                  class: \"elemental-resonance\",\n                  src: _ctx.resonanceElementImgSrcs[index],\n                  alt: \"resonance\"\n                }, null, 8, _hoisted_4))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        }), 64))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createElementVNode(\"table\", null, [\n        _createElementVNode(\"tbody\", null, [\n          _createElementVNode(\"tr\", null, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n              return (_openBlock(), _createElementBlock(\"td\", {\n                key: member.id\n              }, [\n                _createVNode(_component_MemberItem, {\n                  member: member,\n                  statsObj: _ctx.memberStats[member.id],\n                  displayStat: _ctx.displayStat,\n                  showEquipment: _ctx.showEquipment,\n                  viewable: true,\n                  members: _ctx.team.members.map(s => s.name),\n                  elementalResonance: _ctx.elementalResonance\n                }, null, 8, [\"member\", \"statsObj\", \"displayStat\", \"showEquipment\", \"members\", \"elementalResonance\"])\n              ]))\n            }), 128))\n          ])\n        ])\n      ])\n    ]),\n    (_ctx.displayRes)\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_6, [\n          _createElementVNode(\"tbody\", null, [\n            _createElementVNode(\"tr\", null, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.resKey, (key) => {\n                return (_openBlock(), _createElementBlock(\"td\", {\n                  key: key,\n                  class: _normalizeClass(_ctx.resBgClass(key))\n                }, _toDisplayString(_ctx.res[key]), 3))\n              }), 128))\n            ])\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.displayTags)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.tags, (tag) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: \"tag\",\n              key: tag\n            }, _toDisplayString(tag), 1))\n          }), 128))\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_8, [\n      _createElementVNode(\"span\", {\n        class: \"material-symbols-outlined control-button\",\n        onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.jumpToRotation && _ctx.jumpToRotation(...args)))\n      }, \"stat_minus_2\"),\n      _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.description), 1)\n    ])\n  ], 2))\n}","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, vModelText as _vModelText, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"rotation-box\"\n}\nconst _hoisted_2 = { class: \"pane1\" }\nconst _hoisted_3 = { class: \"icon-list\" }\nconst _hoisted_4 = { key: 0 }\nconst _hoisted_5 = { class: \"action with-tooltip\" }\nconst _hoisted_6 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_7 = { class: \"tooltip\" }\nconst _hoisted_8 = { class: \"action with-tooltip\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = { class: \"action with-tooltip\" }\nconst _hoisted_12 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_13 = { class: \"tooltip\" }\nconst _hoisted_14 = { class: \"control-button\" }\nconst _hoisted_15 = { key: 0 }\nconst _hoisted_16 = [\"src\", \"alt\"]\nconst _hoisted_17 = {\n  key: 1,\n  class: \"action-attribute\"\n}\nconst _hoisted_18 = { class: \"rotation-list\" }\nconst _hoisted_19 = { class: \"rotation-item\" }\nconst _hoisted_20 = [\"src\", \"alt\"]\nconst _hoisted_21 = { class: \"with-tooltip handle\" }\nconst _hoisted_22 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_23 = [\"onClick\"]\nconst _hoisted_24 = { class: \"action-attribute\" }\nconst _hoisted_25 = {\n  key: 0,\n  class: \"pane2\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_draggable = _resolveComponent(\"draggable\")!\n  const _component_ERCalculator = _resolveComponent(\"ERCalculator\")!\n\n  return (_ctx.watchCount)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"fieldset\", _hoisted_3, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n              return (_openBlock(), _createElementBlock(_Fragment, {\n                key: member.id\n              }, [\n                (member.name)\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, [\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.normalAttackIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'N'))\n                        }, null, 10, _hoisted_6),\n                        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName('')), 1)\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_8, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.elementalSkillIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'E'))\n                        }, null, 10, _hoisted_9),\n                        _createElementVNode(\"span\", _hoisted_10, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName(\"\")), 1)\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_11, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.elementalBurstIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'Q'))\n                        }, null, 10, _hoisted_12),\n                        _createElementVNode(\"span\", _hoisted_13, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName('')), 1)\n                      ])\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ], 64))\n            }), 128)),\n            _createElementVNode(\"table\", _hoisted_14, [\n              _createElementVNode(\"tbody\", null, [\n                _createElementVNode(\"tr\", null, [\n                  _createElementVNode(\"td\", null, [\n                    _createElementVNode(\"span\", {\n                      class: \"material-symbols-outlined control-button\",\n                      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('click:jump-to-team')))\n                    }, \"stat_2\")\n                  ]),\n                  _createElementVNode(\"td\", null, [\n                    _createElementVNode(\"label\", {\n                      class: _normalizeClass(_ctx.removeMode ? 'checked' : '')\n                    }, [\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"checkbox\",\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.removeMode) = $event))\n                      }, null, 512), [\n                        [_vModelCheckbox, _ctx.removeMode]\n                      ]),\n                      _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"material-symbols-outlined\" }, \"delete\", -1))\n                    ], 2)\n                  ]),\n                  _createElementVNode(\"td\", null, [\n                    (_ctx.selectedAction)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                          _createElementVNode(\"img\", {\n                            class: _normalizeClass('action-icon handle' + _ctx.bgColorClass(_ctx.selectedAction.member)),\n                            src: _ctx.getActionDetail(_ctx.selectedAction).icon_url,\n                            alt: _ctx.displayName(_ctx.getActionDetail(_ctx.selectedAction).),\n                            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.selectedActionOnClick(_ctx.selectedAction)))\n                          }, null, 10, _hoisted_16)\n                        ]))\n                      : _createCommentVNode(\"\", true),\n                    (_ctx.selectedAction)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, _toDisplayString(_ctx.actionDisplay(_ctx.selectedAction)), 1))\n                      : _createCommentVNode(\"\", true)\n                  ])\n                ])\n              ])\n            ])\n          ]),\n          _createElementVNode(\"fieldset\", _hoisted_18, [\n            _createVNode(_component_draggable, {\n              list: _ctx.rotationList,\n              \"item-key\": \"id\",\n              sort: true,\n              handle: \".handle\",\n              delay: 100,\n              animation: 200,\n              onChange: _ctx.rotationListOnChange\n            }, {\n              item: _withCtx(({ element }) => [\n                _createElementVNode(\"div\", _hoisted_19, [\n                  (_ctx.previousRotation(element)?.member != element.member)\n                    ? (_openBlock(), _createElementBlock(\"img\", {\n                        key: 0,\n                        class: \"character-icon\",\n                        src: _ctx.getCharacterMaster(element.member)?.icon_url ?? _ctx.IMG_SRC_DUMMY,\n                        alt: _ctx.displayName(element.member)\n                      }, null, 8, _hoisted_20))\n                    : _createCommentVNode(\"\", true),\n                  (_ctx.getActionDetail(element))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass('action-item ' + _ctx.colorClass(element.member))\n                      }, [\n                        _createElementVNode(\"div\", _hoisted_21, [\n                          _createElementVNode(\"img\", {\n                            class: _normalizeClass('action-icon' + _ctx.bgColorClass(element.member) + _ctx.selectedActionClass(element)),\n                            src: _ctx.getActionDetail(element).icon_url,\n                            alt: _ctx.displayName(_ctx.getActionDetail(element).),\n                            onClick: ($event: any) => (_ctx.rotationActionOnClick(element))\n                          }, null, 10, _hoisted_22),\n                          (_ctx.removeMode)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"remove-mark\",\n                                onClick: ($event: any) => (_ctx.removeItemOnClick(element))\n                              }, null, 8, _hoisted_23))\n                            : _createCommentVNode(\"\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_24, _toDisplayString(_ctx.actionDisplay(element)), 1)\n                      ], 2))\n                    : _createCommentVNode(\"\", true)\n                ])\n              ]),\n              _: 1\n            }, 8, [\"list\", \"onChange\"]),\n            _cache[6] || (_cache[6] = _createElementVNode(\"br\", null, null, -1)),\n            _withDirectives(_createElementVNode(\"textarea\", {\n              class: \"rotation-description\",\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.rotationDescription) = $event)),\n              rows: \"10\",\n              maxlength: \"400\",\n              onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateRotation && _ctx.updateRotation(...args)))\n            }, null, 544), [\n              [_vModelText, _ctx.rotationDescription]\n            ])\n          ]),\n          _cache[7] || (_cache[7] = _createStaticVNode(\"<br data-v-b2eaab7c> <br data-v-b2eaab7c><br data-v-b2eaab7c> <br data-v-b2eaab7c><table class=\\\"guide\\\" data-v-b2eaab7c><tbody data-v-b2eaab7c><tr data-v-b2eaab7c><th data-v-b2eaab7c>N</th><td data-v-b2eaab7c>1</td><th data-v-b2eaab7c>N2</th><td data-v-b2eaab7c>2</td><th data-v-b2eaab7c>NX</th><td data-v-b2eaab7c>X</td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>N1C</th><td data-v-b2eaab7c>1+</td><th data-v-b2eaab7c>N2C</th><td data-v-b2eaab7c>2+</td><th data-v-b2eaab7c>NXC</th><td data-v-b2eaab7c>X+</td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>C</th><td data-v-b2eaab7c></td><td colspan=\\\"4\\\" data-v-b2eaab7c></td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>P</th><td data-v-b2eaab7c></td><td colspan=\\\"4\\\" data-v-b2eaab7c></td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>E</th><td data-v-b2eaab7c></td><th data-v-b2eaab7c>E.Press</th><td data-v-b2eaab7c>()</td><th data-v-b2eaab7c>E.Hold</th><td data-v-b2eaab7c>()</td></tr><tr data-v-b2eaab7c><th data-v-b2eaab7c>Q</th><td data-v-b2eaab7c></td><td colspan=\\\"4\\\" data-v-b2eaab7c></td></tr></tbody></table>\", 7))\n        ]),\n        true\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n              _createVNode(_component_ERCalculator, {\n                team: _ctx.team,\n                rotationList: _ctx.rotationList,\n                teamMemberResult: _ctx.teamMemberResult,\n                constellations: _ctx.constellations\n              }, null, 8, [\"team\", \"rotationList\", \"teamMemberResult\", \"constellations\"])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]))\n    : _createCommentVNode(\"\", true)\n}","import _ from 'lodash';\r\nimport { isNumeric, overwriteObject } from '@/common';\r\nimport {\r\n    CHANGE_KIND_STATUS,\r\n    CHANGE_KIND_TALENT,\r\n    DAMAGE_RESULT_TEMPLATE,\r\n    getChangeKind,\r\n    getConditionOpkind,\r\n    getDefaultArtifactDetailInput,\r\n    getDefaultCharacterInput,\r\n    getDefaultConditionInput,\r\n    getDefaultDamageResultInput,\r\n    getDefaultStatsInput,\r\n    getStatValue,\r\n    loadRecommendation,\r\n    makeConditionExclusionMapFromStr,\r\n    makeDamageDetailObjArr,\r\n    makeDamageDetailObjArrObjArtifactSets,\r\n    makeDamageDetailObjArrObjCharacter,\r\n    makeDamageDetailObjArrObjWeapon,\r\n    makeTeamOptionDetailObjArr,\r\n    NUMBER_CONDITION_VALUE_RE,\r\n    setupConditionValues,\r\n    TArtifactDetailInput,\r\n    TArtifactStats,\r\n    TArtifactStatsKey,\r\n    TCharacterInput,\r\n    TConditionInput,\r\n    TConditionValues,\r\n    TDamageDetailObj,\r\n    TDamageResult,\r\n    TDamageResultElementalReaction,\r\n    TDamageResultEntry,\r\n    TOptionInput,\r\n    TStats,\r\n    TStatsInput,\r\n    updateNumberConditionValues,\r\n    TEMPLATE,\r\n    ARRAY,\r\n    ARRAY,\r\n    _ARRAY,\r\n    _ARRAY,\r\n    TEMPLATE,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n} from '@/input';\r\nimport {\r\n    ALL_ELEMENTS,\r\n    ARTIFACT_MAIN_MASTER,\r\n    ARTIFACT_SUB_MASTER,\r\n    DAMAGE_CATEGORY_ARRAY,\r\n    ELEMENTAL_REACTION_BASE_DAMAGE_MASTER,\r\n    ELEMENTAL_REACTION_MASTER,\r\n    ELEMENTAL_RESONANCE_MASTER,\r\n    getCharacterMasterDetail,\r\n    TArtifactMainRarity,\r\n    TArtifactMainStat,\r\n    TCharacterKey,\r\n    TEAM_OPTION_MASTER_LIST,\r\n} from '@/master';\r\n\r\nexport type TRotationDamageEntry = {\r\n    name: string;\r\n    category: string;\r\n    reactions: object[];\r\n    counts: number[];\r\n};\r\nexport type TRotationDamageInfo = {\r\n    totalDamage: number,\r\n    rotationDamages: TRotationDamageEntry[],\r\n};\r\nexport const REACTION_DMG_ARR = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const REACTION_DMG_ELEMENT_MAP = new Map<string, string>();\r\nfunction setupReactionDmgElementMap() {\r\n    REACTION_DMG_ARR.forEach((reactionDmg) => {\r\n        const reaction = reactionDmg.replace(/$/, '');\r\n        Object.keys(ELEMENTAL_REACTION_MASTER).forEach((element) => {\r\n            const reactionMaster = (ELEMENTAL_REACTION_MASTER as any)[element];\r\n            const workArr = Object.keys(reactionMaster);\r\n            if (workArr.includes(reaction)) {\r\n                if ('' in reactionMaster[reaction]) {\r\n                    REACTION_DMG_ELEMENT_MAP.set(reactionDmg, reactionMaster[reaction].);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\nsetupReactionDmgElementMap();\r\n\r\n/** [, ] => \\+?  */\r\nexport function getLevelStr(ascension: number, level: number): string {\r\n    return level + ARRAY[ascension][0] == level ? '+' : '';\r\n}\r\n\r\n/** / */\r\nexport function getStatValueByLevel(statObj: any, ascension: number, level: number): number {\r\n    if (!statObj) return 0;\r\n    const myLevelStr = getLevelStr(ascension, level);\r\n    if (myLevelStr in statObj) {\r\n        return statObj[myLevelStr];\r\n    }\r\n    const lowLevel = ARRAY[ascension][0];\r\n    const highLevel = ARRAY[ascension][ARRAY[ascension].length - 1];\r\n    const lowValue = statObj[lowLevel + '+'];\r\n    const highValue = statObj[highLevel];\r\n    return lowValue + (highValue - lowValue) * (level - lowLevel) / (highLevel - lowLevel);\r\n}\r\n\r\n/** / */\r\nexport function getPropertyValueByLevel(statObj: any, ascension: number): number {\r\n    const lowLevel = ARRAY[ascension][0];\r\n    return statObj[lowLevel + '+'];\r\n}\r\n\r\nexport function getValueByLevel(level: number | string, valueObj: any): number {\r\n    if (level in valueObj) return valueObj[level];\r\n    level = Number(level);\r\n    const levelArr = Object.keys(valueObj).map(s => Number(s));\r\n    let lowLevel;\r\n    let highLevel;\r\n    for (let i = 0; i < levelArr.length - 1; i++) {\r\n        if (levelArr[i] <= level && levelArr[i + 1] >= level) {\r\n            lowLevel = levelArr[i];\r\n            highLevel = levelArr[i + 1];\r\n        }\r\n    }\r\n    if (!lowLevel || !highLevel) return 0;\r\n    return valueObj[lowLevel] + (valueObj[highLevel] - valueObj[lowLevel]) * (level - lowLevel) / (highLevel - lowLevel);\r\n}\r\n\r\n/**  */\r\nexport function calculateArtifactStatsMain(artifactStatsMain: any, mainstats: string[]) {\r\n    (Object.keys(artifactStatsMain) as (keyof typeof artifactStatsMain)[]).forEach(\r\n        (key) => {\r\n            artifactStatsMain[key] = 0;\r\n        }\r\n    );\r\n    for (const statWithRarity of mainstats) {\r\n        if (!statWithRarity) continue;\r\n        const stat: any[] = statWithRarity.split('_');\r\n        artifactStatsMain[stat[1]] += ARTIFACT_MAIN_MASTER[stat[0] as TArtifactMainRarity][stat[1] as TArtifactMainStat];\r\n    }\r\n}\r\n\r\n/**  */\r\nexport function calculateArtifactSubStatByPriority(\r\n    artifactStatsSub: TArtifactStats,\r\n    mainstats: string[],\r\n    prioritySubstats: string[],\r\n    priotritySubstatIndices: number[],\r\n    priotritySubstatValues: number[][],\r\n    prioritySubstatCounts: number[],\r\n) {\r\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach((key) => {\r\n        artifactStatsSub[key] = 0;\r\n    });\r\n    let totalCount = 0;\r\n    for (let i = 0; i < prioritySubstats.length; i++) {\r\n        if (!prioritySubstats[i]) continue;\r\n        if (priotritySubstatIndices[i] === undefined || priotritySubstatIndices[i] < 0) continue;\r\n        if (!prioritySubstatCounts[i]) continue;\r\n        artifactStatsSub[prioritySubstats[i] as TArtifactStatsKey] += priotritySubstatValues[i][priotritySubstatIndices[i]] * prioritySubstatCounts[i];\r\n        totalCount += prioritySubstatCounts[i];\r\n    }\r\n    // : 3 or 4\r\n    // : 5 (+4 +8 +12 +16 +20)\r\n    // +: min=40 max=45\r\n    const noPrioritySubstatArr = ARRAY.filter(s => !prioritySubstats.includes(s));\r\n    let noPriorityCount = Math.min(45, 40 + Math.floor(Math.max(0, (totalCount - 12) / 5)));\r\n    noPriorityCount -= Math.min(45, totalCount);\r\n    for (let i = noPriorityCount; i > 0; i--) {\r\n        const substat = noPrioritySubstatArr[i % noPrioritySubstatArr.length] as keyof typeof ARTIFACT_SUB_MASTER;\r\n        artifactStatsSub[substat] += ARTIFACT_SUB_MASTER[substat][3];\r\n    }\r\n    const star4Count = mainstats.filter(s => s && s.startsWith('4')).length;\r\n    const multiplier = 1 - (0.07 * star4Count); // 47%\r\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach(\r\n        (key) => {\r\n            artifactStatsSub[key] *= multiplier;\r\n            artifactStatsSub[key] = Math.round(artifactStatsSub[key] * 10) / 10;\r\n        }\r\n    );\r\n}\r\n\r\nexport function calculateArtifactStats(artifactDetailInput: TArtifactDetailInput) {\r\n    const artifactStats = artifactDetailInput.;\r\n    const artifactStatsMain = artifactDetailInput.;\r\n    const artifactStatsSub = artifactDetailInput.;\r\n    for (const stat of Object.keys(artifactStats)) {\r\n        (artifactStats as any)[stat] = 0;\r\n    }\r\n    for (const stat of Object.keys(artifactStatsMain)) {\r\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsMain as any)[stat];\r\n        else (artifactStats as any)[stat] = (artifactStatsMain as any)[stat];\r\n    }\r\n    for (const stat of Object.keys(artifactStatsSub)) {\r\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsSub as any)[stat];\r\n        else (artifactStats as any)[stat] = (artifactStatsSub as any)[stat];\r\n    }\r\n}\r\n\r\nfunction makeEvalableScript(\r\n    formula: string,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n) {\r\n    const replaceMap = new Map<string, string>();\r\n    const re = /\\$\\{(.+?)\\}/g;\r\n    let reRet;\r\n    while ((reRet = re.exec(formula)) !== null) {\r\n        const key = reRet[1];\r\n        if (!replaceMap.has(key)) {\r\n            let value;\r\n            if (key.includes('#')) {   // # \r\n                const arr = key.split('#');\r\n                if (arr.length === 2) {\r\n                    const major = arr[0];\r\n                    const minor = arr[1];\r\n                    if (major in damageResult) {\r\n                        const entryArr = (damageResult[major] as TDamageResultEntry[]).filter(s => s[0] == minor);\r\n                        if (entryArr.length) {\r\n                            value = String(entryArr[0][4]);  // \r\n                        }\r\n                    }\r\n                }\r\n                if (value === undefined) {\r\n                    console.warn(formula, damageResult, key);\r\n                    value = '0';\r\n                }\r\n            } else {    // \r\n                value = String(getStatValue(key, statsObj));\r\n            }\r\n            if (value !== undefined) {\r\n                replaceMap.set(key, value);\r\n            }\r\n        }\r\n    }\r\n    let result = formula;\r\n    replaceMap.forEach((value, key) => {\r\n        result = result.replaceAll('${' + key + '}', value);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function evalFormula(\r\n    formula: number | string | null | undefined,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null\r\n) {\r\n    let result = 0;\r\n    let script;\r\n    if (!formula) {\r\n        // nop\r\n    } else if (_.isNumber(formula)) {\r\n        result = formula;\r\n    } else {\r\n        script = makeEvalableScript(formula, statsObj, damageResult);\r\n        try {\r\n            result = eval(script);\r\n        } catch (error) {\r\n            console.error(error);\r\n            console.error(formula, statsObj, damageResult, script);\r\n        }\r\n    }\r\n    if (opt_max !== null) {\r\n        const max = evalFormula(opt_max, statsObj, damageResult);\r\n        result = Math.min(result, max);\r\n    }\r\n    if (opt_min !== null) {\r\n        const min = evalFormula(opt_min, statsObj, damageResult);\r\n        result = Math.max(result, min);\r\n    }\r\n    console.debug(formula, opt_max, opt_min, script, result);\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport const calculateStats = function (\r\n    statsInput: TStatsInput,\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput\r\n) {\r\n    if (!characterInput || !artifactDetailInput || !conditionInput || !optionInput) return;\r\n    try {\r\n        const characterMaster = characterInput.characterMaster;\r\n        const ascension = characterInput.;\r\n        const level = characterInput.;\r\n        const constellation = characterInput.;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n        const weaponAscension = characterInput.;\r\n        const weaponLevel = characterInput.;\r\n\r\n        const workStatsObj = _.cloneDeep(TEMPLATE);\r\n\r\n        workStatsObj[''] = ascension;\r\n        workStatsObj[''] = level;\r\n        workStatsObj[''] = constellation;\r\n        (workStatsObj as any)[''] = characterMaster.;\r\n\r\n        // \r\n        if ('' in characterMaster['']) {\r\n            workStatsObj[''] = Number(characterMaster['']['']);\r\n        }\r\n        if ('' in weaponMaster) {   // for \r\n            for (const name of Object.keys(weaponMaster[''])) {\r\n                if (name in conditionInput.conditionValues) {\r\n                    workStatsObj[name] = Number(conditionInput.conditionValues[name]);\r\n                } else {\r\n                    workStatsObj[name] = weaponMaster[''][name];\r\n                }\r\n            }\r\n        }\r\n        if ('' in characterMaster) {\r\n            for (const name of Object.keys(characterMaster[''])) {\r\n                if (name in conditionInput.conditionValues) {\r\n                    workStatsObj[name] = Number(conditionInput.conditionValues[name]);\r\n                } else {\r\n                    workStatsObj[name] = characterMaster[''][name];\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const stat of Object.keys(statsInput.enemyMaster).filter(s => s != 'key')) {\r\n            const toStat = '' + stat;\r\n            workStatsObj[toStat] = statsInput.enemyMaster[stat];\r\n        }\r\n\r\n        // \r\n        Object.keys(statsInput.statAdjustments).filter(s => !ARRAY.includes(s)).forEach(stat => {\r\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustments[stat];\r\n        });\r\n        Object.keys(statsInput.statAdjustmentsEx).filter(s => !ARRAY.includes(s)).forEach(stat => {\r\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustmentsEx[stat];\r\n        });\r\n\r\n        // \r\n        for (const stat of Object.keys(characterMaster[''])) {\r\n            if (ARRAY.includes(stat)) {\r\n                workStatsObj[stat] += getStatValueByLevel(characterMaster[''][stat], ascension, level);\r\n            } else {\r\n                const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\r\n                if (toStat in workStatsObj) {\r\n                    workStatsObj[toStat] += getPropertyValueByLevel(characterMaster[''][stat], ascension);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        if (weaponMaster['']) {\r\n            for (const stat of Object.keys(weaponMaster[''])) {\r\n                workStatsObj[stat] += getStatValueByLevel(weaponMaster[''][stat], weaponAscension, weaponLevel);\r\n            }\r\n        }\r\n\r\n        // \r\n        const artifactStats = artifactDetailInput.;\r\n        for (const stat of Object.keys(artifactStats)) {\r\n            const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\r\n            workStatsObj[toStat] += (artifactStats as any)[stat];\r\n        }\r\n\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n\r\n        if (optionInput) {\r\n            // \r\n            [optionInput.elementalResonance, optionInput.teamOption, optionInput.miscOption].forEach(optionObj => {\r\n                if (optionObj && optionObj.conditionAdjustments) {\r\n                    Object.keys(optionObj.conditionAdjustments).forEach(stat => {\r\n                        const workValue = optionObj.conditionAdjustments[stat];\r\n                        if (stat.endsWith('')) {\r\n                            if (['', '', ''].includes(characterMaster.)) {\r\n                                const my = stat.replace(/$/, '');\r\n                                _Var = my;\r\n                                _Var = my;\r\n                                _Var = my;\r\n                            }\r\n                        } else if (workValue !== null) {\r\n                            if (stat in workStatsObj) {\r\n                                workStatsObj[stat] += workValue;\r\n                            } else {\r\n                                workStatsObj[stat] = workValue;\r\n                            }\r\n                            if (stat.endsWith('V1') || stat.endsWith('V2') || stat.endsWith('V3')) {\r\n                                const toStat = stat.replace(/V[1-3]$/, '');\r\n                                if (toStat in workStatsObj) {\r\n                                    workStatsObj[toStat] += workValue;\r\n                                } else {\r\n                                    workStatsObj[toStat] = workValue;\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n\r\n        //  for \r\n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n            if (myDamageDetail && CHANGE_KIND_TALENT in myDamageDetail) {\r\n                for (const myDetailObj of myDamageDetail[CHANGE_KIND_TALENT]) {\r\n                    if (myDetailObj['']) {\r\n                        const number = checkConditionMatches(myDetailObj[''], validConditionValueArr, constellation);   // \r\n                        if (number === 0) continue;\r\n                    }\r\n                    if (myDetailObj[''] === '' && myDetailObj[''] && myDetailObj[''] !== null) {\r\n                        workStatsObj[myDetailObj['']] = evalFormula(myDetailObj[''], workStatsObj, DAMAGE_RESULT_TEMPLATE);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        calculateStatsTop(workStatsObj, optionInput);\r\n        // \r\n        ARRAY.forEach(stat => {\r\n            if (stat in statsInput.statAdjustments) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += statsInput.statAdjustments[stat];\r\n                }\r\n            }\r\n        });\r\n\r\n        // \r\n        const conditionAdjustments = updateStatsWithCondition(characterInput, validConditionValueArr, workStatsObj);\r\n\r\n        //  \r\n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n            if (myDamageDetail && CHANGE_KIND_TALENT in myDamageDetail) {\r\n                for (const myDetailObj of myDamageDetail[CHANGE_KIND_TALENT]) {\r\n                    if (myDetailObj['']) {\r\n                        const number = checkConditionMatches(myDetailObj[''], validConditionValueArr, constellation, workStatsObj, conditionInput.conditionValues);\r\n                        if (number === 0) continue;\r\n                    }\r\n                    if (myDetailObj[''] && myDetailObj[''].endsWith('')) {\r\n                        const my = myDetailObj[''].replace('', '');\r\n                        if (!myDetailObj['']) {\r\n                            _Var = my;\r\n                            _Var = my;\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        conditionInput. = [_Var, _Var, _Var];\r\n\r\n        overwriteObject(statsInput.statsObj, workStatsObj);\r\n        overwriteObject(conditionInput.conditionAdjustments, conditionAdjustments);\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nfunction updateStatsWithCondition(\r\n    characterInput: TCharacterInput,\r\n    validConditionValueArr: string[],\r\n    workStatsObj: TStats\r\n) {\r\n    const constellation = characterInput.;\r\n    const workConditionAdjustments = {} as { [key: string]: number };\r\n    const statFormulaMap: Map<string, any[]> = new Map();\r\n\r\n    for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n        if (myDamageDetail && CHANGE_KIND_STATUS in myDamageDetail) {\r\n            for (const myDetailObj of myDamageDetail[CHANGE_KIND_STATUS]) {\r\n                let hasCondition = false;\r\n                let my = myDetailObj[''];\r\n                if (my === null) {\r\n                    continue;\r\n                }\r\n                if (myDetailObj['']) {\r\n                    const number = checkConditionMatches(myDetailObj., validConditionValueArr, constellation, workStatsObj);\r\n                    if (my.includes('${INDEX}')) {\r\n                        my = my.replaceAll('${INDEX}', String(number));\r\n                    } else if (number === 0) {\r\n                        continue;\r\n                    } else {\r\n                        my = '(' + my + ')*' + number;\r\n                    }\r\n                    hasCondition = true;\r\n                }\r\n                let my = myDetailObj[''];\r\n                if (my) {\r\n                    if (myDetailObj['']) {\r\n                        my += '.' + myDetailObj[''];\r\n                    }\r\n                    if (my.indexOf('${') === -1 && my.indexOf('}') === -1) { // \r\n                        updateStatsWithConditionSub2(workConditionAdjustments, workStatsObj, my, my, myDetailObj., myDetailObj., hasCondition);\r\n                    } else {    // \r\n                        if (!statFormulaMap.has(my)) {\r\n                            statFormulaMap.set(my, []);\r\n                        }\r\n                        statFormulaMap.get(my)?.push([my, my, myDetailObj., myDetailObj., hasCondition]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    workStatsObj['HP'] += workStatsObj['HP'] + workStatsObj['HP+'];\r\n    workStatsObj['HP'] += (workStatsObj['HP'] * workStatsObj['HP%']) / 100;\r\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\r\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\r\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\r\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\r\n\r\n    const saveStatsObj = _.cloneDeep(workStatsObj);\r\n\r\n    const hpStatArr = ['HP', 'HP%', 'HP+', 'HP'];\r\n    const defStatArr = ['', '%', '+', ''];\r\n    const atkStatArr = ['', '%', '+', ''];\r\n    const otherStatArr = [..._ARRAY, '', ..._ARRAY, '', ...ARRAY, ...ARRAY, ...ARRAY, ''];\r\n    otherStatArr.push(...Array.from(statFormulaMap.keys()).filter(s => s.indexOf('.') != -1));\r\n\r\n    const formulaStatArr = [...new Set(Array.from(statFormulaMap.keys()).map(s => s.replace(/V[1-3]$/, '')))].filter(s => ![...hpStatArr, ...defStatArr, ...atkStatArr, ...otherStatArr].includes(s));\r\n    formulaStatArr.sort(compareFunction);\r\n\r\n    // HP\r\n    for (const stat of hpStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    if (workStatsObj['HP+'] != saveStatsObj['HP+']) {\r\n        workStatsObj['HP'] += workStatsObj['HP+'] - saveStatsObj['HP+'];\r\n    }\r\n    if (workStatsObj['HP%'] != saveStatsObj['HP%']) {\r\n        workStatsObj['HP'] += workStatsObj['HP'] * (workStatsObj['HP%'] - saveStatsObj['HP%']) / 100;\r\n    }\r\n\r\n    for (const stat of formulaStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // \r\n    for (const stat of defStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    if (workStatsObj['+'] != saveStatsObj['+']) {\r\n        workStatsObj[''] += workStatsObj['+'] - saveStatsObj['+'];\r\n    }\r\n    if (workStatsObj['%'] != saveStatsObj['%']) {\r\n        workStatsObj[''] += workStatsObj[''] * (workStatsObj['%'] - saveStatsObj['%']) / 100;\r\n    }\r\n\r\n    // \r\n    for (const stat of atkStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    if (workStatsObj['+'] != saveStatsObj['+']) {\r\n        workStatsObj[''] += workStatsObj['+'] - saveStatsObj['+'];\r\n    }\r\n    if (workStatsObj['%'] != saveStatsObj['%']) {\r\n        workStatsObj[''] += workStatsObj[''] * (workStatsObj['%'] - saveStatsObj['%']) / 100;\r\n    }\r\n\r\n    // \r\n    for (const stat of otherStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return workConditionAdjustments;\r\n}\r\n\r\nfunction updateStatsWithConditionSub(\r\n    workConditionAdjustments: TStats,\r\n    workStatsObj: TStats,\r\n    statFormulaMap: Map<string, any[]>,\r\n    formulaKey: string,\r\n) {\r\n    for (const formulaArr of [statFormulaMap.get(formulaKey), ...['V1', 'V2', 'V3'].map(s => statFormulaMap.get(formulaKey + s))]) {\r\n        if (!formulaArr) continue;\r\n        formulaArr.forEach(formula => {\r\n            const diffStats = updateStats(workStatsObj, formula[0], formula[1], formula[2], formula[3]);\r\n            for (const stat of Object.keys(diffStats)) {\r\n                if (ARRAY.includes(stat + 'TOP')) {\r\n                    const statValue = getStatValue(stat + 'X7', workStatsObj);\r\n                    const topValue = workStatsObj[stat + 'TOP'];\r\n                    if (statValue !== undefined && topValue !== undefined) {\r\n                        if (statValue > topValue) {\r\n                            workStatsObj[stat + 'TOP'] = statValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (formula[4]) {\r\n                for (const stat of Object.keys(diffStats)) {\r\n                    if (stat in workConditionAdjustments) {\r\n                        workConditionAdjustments[stat] += diffStats[stat];\r\n                    } else {\r\n                        workConditionAdjustments[stat] = diffStats[stat];\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nfunction updateStatsWithConditionSub2(\r\n    workConditionAdjustments: TStats,\r\n    workStatsObj: TStats,\r\n    kind: string,\r\n    formula: string,\r\n    maxFormula: string | null,\r\n    minFormula: string | null,\r\n    hasCondition = false,\r\n) {\r\n    const diffStats = updateStats(workStatsObj, kind, formula, maxFormula, minFormula);\r\n    for (const stat of Object.keys(diffStats)) {\r\n        if (ARRAY.includes(stat + 'TOP')) {\r\n            const statValue = getStatValue(stat + 'X7', workStatsObj);\r\n            const topValue = workStatsObj[stat + 'TOP'];\r\n            if (statValue !== undefined && topValue !== undefined) {\r\n                if (statValue > topValue) {\r\n                    workStatsObj[stat + 'TOP'] = statValue;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (hasCondition) {\r\n        for (const stat of Object.keys(diffStats)) {\r\n            if (stat in workConditionAdjustments) {\r\n                workConditionAdjustments[stat] += diffStats[stat];\r\n            } else {\r\n                workConditionAdjustments[stat] = diffStats[stat];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction compareFunction(a: string, b: string) {\r\n    const arr = ['', '', '', '', '', '', ''];\r\n    const lowestArr = [''];\r\n    let aIndex = arr.indexOf(a);\r\n    if (lowestArr.indexOf(a) >= 0) {\r\n        aIndex = arr.length + 1;\r\n    }\r\n    let bIndex = arr.indexOf(b);\r\n    if (lowestArr.indexOf(b) >= 0) {\r\n        bIndex = arr.length + 1;\r\n    }\r\n    return (aIndex != -1 ? aIndex : arr.length) - (bIndex != -1 ? bIndex : arr.length);\r\n}\r\n\r\nexport function calculateElementalResonance(\r\n    conditionValues: TConditionValues,\r\n    conditionInput: TConditionInput,\r\n): TStats {\r\n    const result: TStats = {};\r\n    const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n    for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\r\n        if (!conditionValues[key]) continue;\r\n        const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\r\n        if (master.) {\r\n            for (const detailObj of master.) {\r\n                if (detailObj.) {\r\n                    const matchRet = checkConditionMatches(detailObj., validConditionValueArr, 0);\r\n                    if (matchRet === 0) continue;\r\n                }\r\n                if (detailObj. && detailObj.) {\r\n                    if (detailObj. in result) {\r\n                        result[detailObj.] += detailObj.;\r\n                    } else {\r\n                        result[detailObj.] = detailObj.;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (key == '' && conditionValues.dendroOption) {\r\n            result[''] += Number(conditionValues.dendroOption);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n// /**  */\r\n// function calculateFormulaArray(\r\n//     formulaArr: any,\r\n//     statsObj: TStats,\r\n//     damageResult: TDamageResult,\r\n//     opt_max: number | string | Array<number | string> | null = null,\r\n//     opt_min: number | string | Array<number | string> | null = null\r\n// ): number {\r\n//     try {\r\n//         let result = 0;\r\n//         if (Array.isArray(formulaArr)) {\r\n//             let operator: string | null = null;\r\n//             for (const entry of formulaArr) {\r\n//                 let subResult = 0;\r\n//                 if (['+', '-', '*', '/'].includes(entry)) {\r\n//                     operator = entry;\r\n//                     continue;\r\n//                 } else if (isNumeric(entry)) {\r\n//                     subResult = Number(entry);\r\n//                 } else if (Array.isArray(entry)) {\r\n//                     subResult = calculateFormulaArray(entry, statsObj, damageResult);\r\n//                 } else if (entry.indexOf('#') != -1) {\r\n//                     const nameArr = entry.split('#');\r\n//                     if (damageResult && nameArr[0] in damageResult) {\r\n//                         const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\r\n//                         let damage = null;\r\n//                         for (const damageArr of damageArrArr) {\r\n//                             if (nameArr[1] == damageArr[0]) {\r\n//                                 damage = damageArr[4];  // \r\n//                                 break;\r\n//                             }\r\n//                         }\r\n//                         if (damage != null) {\r\n//                             subResult = damage;\r\n//                         } else {\r\n//                             console.error(formulaArr, statsObj, damageResult, opt_max, opt_min, entry);\r\n//                         }\r\n//                     }\r\n//                 } else {\r\n//                     const temp = getStatValue(entry, statsObj);\r\n//                     if (temp === undefined) {\r\n//                         console.error(formulaArr, statsObj, null, opt_max, opt_min, entry);\r\n//                     } else {\r\n//                         subResult = temp;\r\n//                     }\r\n//                 }\r\n//                 if (operator == null) {\r\n//                     result += subResult;\r\n//                 } else {\r\n//                     switch (operator) {\r\n//                         case '+':\r\n//                             result += subResult;\r\n//                             break;\r\n//                         case '-':\r\n//                             result -= subResult;\r\n//                             break;\r\n//                         case '*':\r\n//                             result *= subResult;\r\n//                             result = Math.floor(result * 100) / 100;\r\n//                             break;\r\n//                         case '/':\r\n//                             result /= subResult;\r\n//                             break;\r\n//                     }\r\n//                 }\r\n//             }\r\n//         } else if (isNumeric(formulaArr)) {\r\n//             result = Number(formulaArr);\r\n//         } else if (formulaArr.indexOf('#') != -1) {\r\n//             const nameArr = formulaArr.split('#');\r\n//             if (damageResult && nameArr[0] in damageResult) {\r\n//                 const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\r\n//                 for (const damageArr of damageArrArr) {\r\n//                     if (nameArr[1] == damageArr[0]) {\r\n//                         result = damageArr[4];  // \r\n//                         break;\r\n//                     }\r\n//                 }\r\n//             }\r\n//         } else {\r\n//             const temp = getStatValue(formulaArr, statsObj);\r\n//             if (temp !== undefined) {\r\n//                 result = temp;\r\n//             } else {\r\n//                 console.error(formulaArr, statsObj, null, opt_max, opt_min);\r\n//                 result = 0; // \r\n//             }\r\n//         }\r\n//         if (opt_max != null) {\r\n//             const maxValue = calculateFormulaArray(opt_max, statsObj, damageResult);\r\n//             result = Math.min(result, maxValue);\r\n//         }\r\n//         if (opt_min != null) {\r\n//             const minValue = calculateFormulaArray(opt_min, statsObj, damageResult);\r\n//             result = Math.max(result, minValue);\r\n//         }\r\n//         return result;\r\n//     } catch (error) {\r\n//         console.error(error);\r\n//         console.error(formulaArr, statsObj, damageResult, opt_max, opt_min);\r\n//         throw error;\r\n//     }\r\n// }\r\n\r\n/**  */\r\nexport function calculateDamageResult(\r\n    damageResult: TDamageResult,\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    statsInput: TStatsInput,\r\n) {\r\n    try {\r\n        if (!characterInput) return;\r\n        if (!conditionInput) return;\r\n        if (!statsInput) return;\r\n        const characterMaster = characterInput.characterMaster;\r\n        const constellation = characterInput[''];\r\n        const vision = characterMaster[''];\r\n\r\n        // \r\n        const reactionResult = _.cloneDeep(TEMPLATE);\r\n        const reactionMasterArr = [];\r\n        const dmgElementSet = new Set<string>();\r\n        dmgElementSet.add(vision); // \r\n        if (conditionInput.selectList.filter(s => s.name == '').length) {\r\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\r\n            const selectedIndex = conditionInput.conditionValues[''] as number;\r\n            if (selectedIndex) {\r\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\r\n                dmgElementSet.add(dmgElement); // \r\n            }\r\n        }\r\n        if (conditionInput.selectList.filter(s => s.name == '').length) {\r\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\r\n            const selectedIndex = conditionInput.conditionValues[''] as number;\r\n            if (selectedIndex) {\r\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\r\n                dmgElementSet.add(dmgElement); // \r\n            }\r\n        }\r\n        for (const dmgElement of conditionInput.) {\r\n            if (dmgElement && dmgElement != '') {\r\n                dmgElementSet.add(dmgElement); // //\r\n            }\r\n        }\r\n        if (characterInput.character == '') {\r\n            for (const dmgElement of ['', '', '', '']) {\r\n                const key = '[]' + dmgElement + '';\r\n                if (conditionInput.selectList.filter(s => s.name == key).length) {\r\n                    const selectedIndex = conditionInput.conditionValues[key] as number;\r\n                    if (selectedIndex) {\r\n                        dmgElementSet.add(dmgElement);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (const dmgElement of dmgElementSet) {\r\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\r\n        }\r\n        let has = false;\r\n        if (characterMaster. == '' || characterMaster. == '') {\r\n            has = true;\r\n        } else {\r\n            const characterArr = (ELEMENTAL_REACTION_MASTER as any).?.?.;\r\n            if (characterArr && characterArr.includes(characterMaster.)) {\r\n                has = true;\r\n            }\r\n        }\r\n        if (has) {\r\n            const dmgElement = '';\r\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\r\n        }\r\n        reactionResult[''] = vision;\r\n        reactionMasterArr.forEach(entry => {\r\n            const element = entry[0];\r\n            const reactionMaster = entry[1];\r\n            Object.keys(reactionMaster).forEach(reaction => {\r\n                const reactionObj = reactionMaster[reaction];\r\n                let resultValue = 0;\r\n                if (reaction == '') {\r\n                    resultValue = calculate(element, statsInput.statsObj);\r\n                } else if (reaction == '') {\r\n                    let dmgElement = '';\r\n                    for (const entry of conditionInput.selectList) {\r\n                        if (entry.name == '') {\r\n                            const optionValue = entry.options[Number(conditionInput.conditionValues[''])];\r\n                            if (optionValue) dmgElement = optionValue.replace(/$/, '');\r\n                            break;\r\n                        }\r\n                    }\r\n                    reactionResult[''] = dmgElement;\r\n                    resultValue = calculate(reaction, element, statsInput.statsObj, dmgElement);\r\n                } else {\r\n                    switch (reactionObj['']) {\r\n                        case '':    //  \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                        case '':    //    \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                        case '':    //  \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                    }\r\n                }\r\n                ['', '', ''].forEach(suffix => {\r\n                    let key = reaction + suffix;\r\n                    if (suffix === '') {\r\n                        key += '_' + element;\r\n                    }\r\n                    if (key in reactionResult) {\r\n                        (reactionResult as any)[key] = resultValue;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        Object.keys(reactionResult).filter(s => s.endsWith('') && s.indexOf('') == -1).forEach(dmg => {\r\n            ['', ''].forEach(stat => {\r\n                const key = dmg + stat;\r\n                if (key in statsInput.statsObj) {\r\n                    (reactionResult as any)[key] = statsInput.statsObj[key];\r\n                }\r\n            });\r\n            if (dmg.startsWith('')) { // for \r\n                const critRateKey = dmg + '';\r\n                let critRate = Math.min(100, statsInput.statsObj['']);\r\n                if (critRateKey in reactionResult && (reactionResult as any)[critRateKey]) {\r\n                    critRate *= (reactionResult as any)[critRateKey] / 100;\r\n                }\r\n                (reactionResult as any)[critRateKey] = critRate;\r\n                const critDmgKey = dmg + '';\r\n                let critDmg = statsInput.statsObj[''];\r\n                if (critDmgKey in reactionResult && (reactionResult as any)[critDmgKey]) {\r\n                    critDmg *= (reactionResult as any)[critDmgKey] / 100;\r\n                }\r\n                (reactionResult as any)[critDmgKey] = critDmg;\r\n            }\r\n        });\r\n        overwriteObject(damageResult., reactionResult);\r\n\r\n        // \r\n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n\r\n        const damageDetailMyCharacter = characterInput.damageDetailMyCharacter;\r\n        const damageDetailMyWeapon = characterInput.damageDetailMyWeapon;\r\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\r\n\r\n        if (Array.isArray(damageResult[''])) {\r\n            damageResult[''].splice(0, damageResult[''].length);\r\n        }\r\n\r\n        if (damageDetailMyCharacter) {\r\n            for (const category of ['', '', '']) {\r\n                damageResult[category] = [];\r\n                if (!(category in damageDetailMyCharacter)) continue;\r\n                const element = conditionInput.[['', '', ''].indexOf(category)];\r\n                let talentDetailArr = (damageDetailMyCharacter as any)[category];\r\n                if (('' + category) in damageDetailMyCharacter) {\r\n                    const workObj = (damageDetailMyCharacter as any)['' + category];\r\n                    if (checkConditionMatches(workObj[''], validConditionValueArr, constellation, statsInput.statsObj, conditionInput.conditionValues) !== 0) {\r\n                        talentDetailArr = workObj[''];\r\n                    }\r\n                }\r\n                for (const talentDetail of talentDetailArr) {\r\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation, statsInput.statsObj, conditionInput.conditionValues) === 0) {\r\n                        continue;\r\n                    }\r\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult, element);\r\n                    (damageResult[category] as any).push(resultArr);\r\n                }\r\n                if (category == '') {\r\n                    let n = 0;\r\n                    const sum = ['', null, 0, 0, 0, null, 0, 0, 1] as TDamageResultEntry;\r\n                    for (const entry of damageResult[category]) {\r\n                        if ((entry[0].endsWith('') || [''].includes(entry[0])) && !entry[0].startsWith('_')) {  // \r\n                            sum[1] = entry[1];\r\n                            sum[2] += entry[2];\r\n                            if (entry[3] == null) sum[3] = null;\r\n                            else if (sum[3] != null) sum[3] += entry[3];\r\n                            sum[4] += entry[4];\r\n                            if (sum[6] != null) {   // HIT\r\n                                if (entry[6]) sum[6] += entry[6];\r\n                                else sum[6]++;\r\n                            }\r\n                            sum[7] = entry[7];  // \r\n                            sum[8] = entry[8];  // \r\n                            n++;\r\n                        }\r\n                    }\r\n                    if (n > 0) {\r\n                        damageResult[category].splice(n, 0, sum);\r\n                    }\r\n                }\r\n            }\r\n            for (const category of ['', '', '']) {\r\n                damageResult[category] = [];\r\n                if (!(category in damageDetailMyCharacter)) continue;\r\n                const talentDetailArr = (damageDetailMyCharacter as any)[category];\r\n                for (const talentDetail of talentDetailArr) {\r\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation, statsInput.statsObj, conditionInput.conditionValues) === 0) {\r\n                        continue;\r\n                    }\r\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\r\n                    (damageResult[category] as TDamageResultEntry[]).push(resultArr);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const myDamageDetail of [damageDetailMyWeapon, damageDetailMyArtifactSets]) {\r\n            const category = '';\r\n            if (!myDamageDetail || !(category in myDamageDetail)) continue;\r\n            const talentDetailArr = (myDamageDetail as any)[category];\r\n            for (const talentDetail of talentDetailArr) {\r\n                if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation, statsInput.statsObj, conditionInput.conditionValues) === 0) {\r\n                    continue;\r\n                }\r\n                const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\r\n                (damageResult[category] as TDamageResultEntry[]).push(resultArr);\r\n            }\r\n        }\r\n\r\n        // \r\n        const damageTakenArr = [] as any;\r\n        for (const stat of _ARRAY) {\r\n            const element = stat.replace(/$/, '').replace(/$/, '');\r\n            const damageTaken = calculateDamageTaken(statsInput.statsObj, 10000, element);\r\n            damageTakenArr.push({ key: element, value: damageTaken });\r\n        }\r\n        damageResult[''] = damageTakenArr;\r\n\r\n        // \r\n        const resScoreArr = [] as any;\r\n        for (const damageTaken of damageTakenArr) {\r\n            resScoreArr.push({ key: damageTaken.key, value: statsInput.statsObj['HP'] * 10000 / damageTaken.value });\r\n        }\r\n        damageResult[''] = resScoreArr;\r\n\r\n        console.debug('damageResult', damageResult);\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(damageResult, characterInput, conditionInput, statsInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function calculateDamageResultLunarReaction(\r\n    damageResult: TDamageResult,\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const allMap = new Map<string, TDamageResultEntry[]>();\r\n\r\n    if (damageResult?.) {\r\n        Object.keys(damageResult.).forEach(key => {\r\n            let value = (damageResult. as any)[key];\r\n            if (key.endsWith('ALL') && _.isArray(value)) {\r\n                key = key.replace(/ALL$/, '');\r\n                const template: TDamageResultEntry[] = [];\r\n                const work = damageResult. as any;\r\n                template.push(makeTDamageResultEntry(characterInput.character, null, work[key], work[key + ''], work[key + '']));\r\n                value = template;\r\n                allMap.set(key, value);\r\n            }\r\n        })\r\n    }\r\n    if (optionInput?.teamMembers) {\r\n        for (const member of optionInput.teamMembers) {\r\n            if (member == characterInput.character) {\r\n                continue;\r\n            }\r\n            const supporter = optionInput.supporters[member];\r\n            if (supporter?.damageResult?.) {\r\n                allMap.forEach((value, key) => {\r\n                    const work = supporter.damageResult. as any;\r\n                    value.push(makeTDamageResultEntry(member, null, work[key], work[key + ''], work[key + '']));\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    allMap.forEach((value, key) => {\r\n        (damageResult. as any)[key + 'ALL'].splice(0, value.length, ...value);\r\n    })\r\n}\r\n\r\nfunction makeTDamageResultEntry(name: string, element: string | null, nonCrit: number, critRate: number, critDmg: number, type: string | null = null): TDamageResultEntry {\r\n    const crit = nonCrit * (1 + critDmg / 100);\r\n    critRate = Math.min(100, critRate);\r\n    const expectedValue = nonCrit * critRate / 100 * (1 + critDmg / 100) + (1 - critRate / 100) * nonCrit;\r\n    const result: TDamageResultEntry = [name, element, expectedValue, crit, nonCrit, type, null, null, null];  // 0:, 1:, 2:, 3:, 4:, 5:, 6:HIT, 7:, 8:\r\n    return result;\r\n}\r\n\r\nexport function makeValidConditionValueArr(conditionInput: TConditionInput) {\r\n    try {\r\n        const result = [] as string[];\r\n        if (!conditionInput) return result;\r\n        const checkboxList = conditionInput.checkboxList;\r\n        if (checkboxList) {\r\n            checkboxList.forEach((entry: any) => {\r\n                if (conditionInput.conditionValues[entry.name]) {\r\n                    result.push(entry.name);\r\n                }\r\n            });\r\n        }\r\n        const selectList = conditionInput.selectList;\r\n        if (selectList) {\r\n            selectList.forEach((entry: any) => {\r\n                const value = conditionInput.conditionValues[entry.name];\r\n                if (_.isNumber(value)) {\r\n                    if (value > 0 || (value === 0 && entry.required)) {\r\n                        result.push(entry.name + '@' + entry.options[value]);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const numberList = conditionInput.numberList;\r\n        if (numberList) {\r\n            numberList.forEach((entry: any) => {\r\n                const value = conditionInput.conditionValues[entry.name];\r\n                if (_.isNumber(value)) {\r\n                    result.push(entry.name + '=' + value);\r\n                }\r\n            });\r\n        }\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(conditionInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function checkConditionMatches(\r\n    conditionStr: string,\r\n    validConditionValueArr: string[],\r\n    constellation: number,\r\n    statsObj: TStats = {},\r\n    conditionValues: TConditionValues = {},\r\n): number {\r\n    const myCondStr = conditionStr.split('^')[0];\r\n\r\n    if (myCondStr.indexOf('|') !== -1) {  // |OR\r\n        const myCondStrArr = myCondStr.split('|');\r\n        for (let i = 0; i < myCondStrArr.length; i++) {\r\n            const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation, statsObj, conditionValues);\r\n            if (resultSub === 1) {\r\n                return 1;   // \r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    const myCondStrArr = myCondStr.split('&');    // &AND\r\n    let result = 1;\r\n    for (let i = 0; i < myCondStrArr.length; i++) {\r\n        const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation, statsObj, conditionValues);\r\n        if (resultSub === 0) {\r\n            return 0;   // \r\n        }\r\n        if (resultSub !== 1) {\r\n            result = resultSub;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction checkConditionMatchesSub(\r\n    conditionStr: string,\r\n    validConditionValueArr: string[],\r\n    constellation: number,\r\n    statsObj: TStats,\r\n    conditionValues: TConditionValues,\r\n): number {\r\n    const opkind = getConditionOpkind(conditionStr);\r\n    const conditionKeyValArr = opkind ? conditionStr.split(opkind) : [conditionStr];\r\n    const conditionKey = conditionKeyValArr[0];\r\n    let conditionVal: number | string | undefined = conditionKeyValArr.length === 2 ? conditionKeyValArr[1] : undefined;\r\n    if (opkind === undefined) {\r\n        return validConditionValueArr.filter(s => s.split('@')[0] == conditionKey).length > 0 ? 1 : 0;\r\n    }\r\n    if (!conditionVal) {\r\n        console.error(conditionStr, validConditionValueArr, constellation, statsObj);\r\n        return 0;\r\n    }\r\n    if (conditionKey === '') {\r\n        if (isNumeric(conditionVal)) {\r\n            conditionVal = Number(conditionVal);\r\n            if (opkind === '>=' || opkind === '@') {\r\n                return constellation >= conditionVal ? 1 : 0;\r\n            } else if (opkind === '<=') {\r\n                return constellation <= conditionVal ? 1 : 0;\r\n            } else if (opkind === '>') {\r\n                return constellation > conditionVal ? 1 : 0;\r\n            } else if (opkind === '<') {\r\n                return constellation < conditionVal ? 1 : 0;\r\n            } else if (opkind === '=') {\r\n                return constellation == conditionVal ? 1 : 0;\r\n            }\r\n        }\r\n    } else if (opkind === '@') {\r\n        const re = new RegExp('([^0-9]*?)([\\\\-0-9\\\\.]+)(.*)');    // ={prefix}{}{postfix}\r\n        for (let i = 0; i < validConditionValueArr.length; i++) {\r\n            if (validConditionValueArr[i].startsWith(conditionKey + '@')) {\r\n                const tempArr = validConditionValueArr[i].split('@');\r\n                const reRet = re.exec(tempArr[1]);\r\n                if (reRet) {\r\n                    let tempVal = conditionVal;\r\n                    if (reRet[1]) tempVal = tempVal.substring(reRet[1].length);\r\n                    if (reRet[3]) tempVal = tempVal.substring(0, tempVal.length - reRet[3].length);\r\n                    tempVal = tempVal.replace(/\\/.+/, '');\r\n                    const tempValArr = tempVal.split(/[,-]/);\r\n                    const fromVal = Number(tempValArr[0]);\r\n                    const toVal = Number(tempValArr[tempValArr.length - 1]);\r\n                    const actualVal = Number(reRet[2]);\r\n                    if (fromVal <= actualVal && actualVal <= toVal) {\r\n                        return actualVal;   //  \r\n                    }\r\n                }\r\n            }\r\n        }\r\n    } else if (opkind === '=') {\r\n        if (validConditionValueArr.includes(conditionKey + '@' + conditionVal)) {\r\n            return 1;   // \r\n        }\r\n        if (NUMBER_CONDITION_VALUE_RE.test(conditionVal)) { // \r\n            const tempArr = validConditionValueArr.filter(s => s.split('=')[0] == conditionKey);\r\n            if (tempArr.length > 0) {\r\n                return Number(tempArr[0].split('=')[1]);   //  \r\n            }\r\n        }\r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] == Number(conditionVal) ? 1 : 0;\r\n        }\r\n    } else if (opkind === '>=') {    // \r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] >= Number(conditionVal) ? 1 : 0;\r\n        }\r\n        if (conditionVal.startsWith('index_')) {    // selectListindex\r\n            conditionVal = conditionVal.replace(/^index_/, '');\r\n            if (isNumeric(conditionVal) && conditionKey in conditionValues) {\r\n                const actualVal = conditionValues[conditionKey];\r\n                if (_.isNumber(actualVal) && actualVal >= Number(conditionVal)) {\r\n                    return 1;   // \r\n                }\r\n            }\r\n        }\r\n    } else if (opkind === '<=') {    // \r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] <= Number(conditionVal) ? 1 : 0;\r\n        }\r\n        if (conditionVal.startsWith('index_')) {    // selectListindex\r\n            conditionVal = conditionVal.replace(/^index_/, '');\r\n            if (isNumeric(conditionVal) && conditionKey in conditionValues) {\r\n                const actualVal = conditionValues[conditionKey];\r\n                if (_.isNumber(actualVal) && actualVal <= Number(conditionVal)) {\r\n                    return 1;   // \r\n                }\r\n            }\r\n        }\r\n    } else if (opkind === '>') {     // \r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] > Number(conditionVal) ? 1 : 0;\r\n        }\r\n        if (conditionVal.startsWith('index_')) {    // selectListindex\r\n            conditionVal = conditionVal.replace(/^index_/, '');\r\n            if (isNumeric(conditionVal) && conditionKey in conditionValues) {\r\n                const actualVal = conditionValues[conditionKey];\r\n                if (_.isNumber(actualVal) && actualVal > Number(conditionVal)) {\r\n                    return 1;   // \r\n                }\r\n            }\r\n        }\r\n    } else if (opkind === '<') {     // \r\n        if (isNumeric(conditionVal)) {\r\n            return conditionKey in statsObj && statsObj[conditionKey] < Number(conditionVal) ? 1 : 0;\r\n        }\r\n        if (conditionVal.startsWith('index_')) {    // selectListindex\r\n            conditionVal = conditionVal.replace(/^index_/, '');\r\n            if (isNumeric(conditionVal) && conditionKey in conditionValues) {\r\n                const actualVal = conditionValues[conditionKey];\r\n                if (_.isNumber(actualVal) && actualVal < Number(conditionVal)) {\r\n                    return 1;   // \r\n                }\r\n            }\r\n        }\r\n    }\r\n    return 0;   // \r\n}\r\n\r\n/**  */\r\nfunction calculate(\r\n    reaction: any,\r\n    element: string,\r\n    statsObj: any,\r\n) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        let result = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        result *= 1 + (25 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction calculate(\r\n    reaction: any,\r\n    element: string,\r\n    statsObj: TStats,\r\n    opt_dmgElement?: string,\r\n) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const baseDmgUp = statsObj[reaction + ''] ?? 0;\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        const dmgUp = statsObj[reaction + ''] ?? 0;\r\n        const dmgElement = opt_dmgElement ?? (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        const multiplier = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        const baseDmg = getValueByLevel(level, ELEMENTAL_REACTION_BASE_DAMAGE_MASTER);\r\n        let result = baseDmg * multiplier * (1 + baseDmgUp / 100);\r\n        if (reaction.startsWith('')) {\r\n            result *= 1 + (6 * elementalMastery / (elementalMastery + 2000)) + dmgBuff / 100;\r\n        } else {\r\n            result *= 1 + (16 * elementalMastery / (elementalMastery + 2000)) + dmgBuff / 100;\r\n        }\r\n        result += dmgUp;\r\n        result *= calculateEnemyRes(dmgElement, statsObj);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj, opt_dmgElement);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculate(element: string, statsObj: TStats) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[''] ?? 0;\r\n        const multiplier = (ELEMENTAL_REACTION_MASTER as any)[element][''][''];\r\n        const baseDmg = getValueByLevel(level, ELEMENTAL_REACTION_BASE_DAMAGE_MASTER);\r\n        let result = baseDmg * multiplier;\r\n        result *= 1 + (40 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculate(reaction: any, element: string, statsObj: TStats) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        const dmgElement = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        const multiplier = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        const baseDmg = getValueByLevel(level, ELEMENTAL_REACTION_BASE_DAMAGE_MASTER);\r\n        let result = baseDmg * multiplier;\r\n        result *= 1 + (5 * elementalMastery / (elementalMastery + 1200)) + dmgBuff / 100;\r\n        result *= calculateEnemyRes(dmgElement, statsObj);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nexport function calculateEnemyDef(statsObj: TStats, opt_ignoreDef = 0) { // , \r\n    try {\r\n        const level = statsObj[''] ?? 0;\r\n        const enemyLevel = statsObj[''] ?? 0;\r\n        const calcIgnoreDef = opt_ignoreDef / 100;\r\n        const calcDef = Math.max(-100, statsObj[''] ?? 0) / 100;    //  -100%\r\n        const result = (level + 100) / ((1 - calcIgnoreDef) * (1 + calcDef) * (enemyLevel + 100) + level + 100);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(statsObj, opt_ignoreDef);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/** () */\r\nfunction calculateRes(res: number) {\r\n    if (res == Infinity) return 0;  // \r\n    let result = res;\r\n    if (result < 0) {\r\n        result = 100 - result / 2;\r\n    } else if (result < 75) {\r\n        result = 100 - result;\r\n    } else {\r\n        result = 10000 / (4 * result + 100)\r\n    }\r\n    result /= 100;\r\n    return result;\r\n}\r\n\r\n/** () */\r\nexport function calculateEnemyRes(element: string, statsObj: TStats) {\r\n    try {\r\n        const statName = '' + element + (element != '' ? '' : '') + '';\r\n        const result = calculateRes(statsObj[statName] ?? 0);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculateDamageFromDetail(\r\n    detailObj: any,\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    opt_element: string | null = null\r\n): TDamageResultEntry {\r\n    try {\r\n        const myArr = [] as Array<string>;\r\n        let isCalc = true;\r\n        let isCalc = true;\r\n        let isCalc = true;\r\n        let my = detailObj[''] != null ? detailObj[''] : opt_element != null ? opt_element : null;\r\n        let my = 0; // for \r\n        let my = 0; // for \r\n        const myHIT = detailObj['HIT'] != null ? Number(detailObj['HIT']) : 1;\r\n        const my = {} as { [key: string]: number };\r\n\r\n        const constellation = statsObj[''];\r\n        const talentChangeDetailObjArr = getChangeDetailObjArr(characterInput, CHANGE_KIND_TALENT);\r\n\r\n        let validConditionValueArr = makeValidConditionValueArr(conditionInput);  // \r\n        const myConditionValuesAfter = _.cloneDeep(conditionInput.conditionValues);\r\n\r\n        if (detailObj['']) {\r\n            for (const delCondition of detailObj['']) {\r\n                let work = delCondition;\r\n                if (_.isPlainObject(delCondition)) {\r\n                    work = delCondition.;\r\n                }\r\n                if (work in myConditionValuesAfter) {\r\n                    if (isNumeric(myConditionValuesAfter[work])) {\r\n                        myConditionValuesAfter[work] = 0;\r\n                    } else if (_.isBoolean(myConditionValuesAfter[work])) {\r\n                        myConditionValuesAfter[work] = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (detailObj['']) {\r\n            for (const addCondition of detailObj['']) {\r\n                if (_.isString(addCondition)) {\r\n                    if (addCondition in myConditionValuesAfter) {\r\n                        if (_.isBoolean(myConditionValuesAfter[addCondition])) {\r\n                            myConditionValuesAfter[addCondition] = true;\r\n                        }\r\n                    }\r\n                } else if (_.isPlainObject(addCondition)) {\r\n                    if (addCondition. in myConditionValuesAfter) {\r\n                        let newValue = myConditionValuesAfter[addCondition.];\r\n                        if ('' in addCondition) {\r\n                            if (_.isString(addCondition.)) {\r\n                                const work = String(addCondition.).replace(/^\\+/, '');\r\n                                (newValue as number) += Number(work);\r\n                            } else if (isNumeric(addCondition.)) {\r\n                                newValue = addCondition.;\r\n                            } else {\r\n                                newValue = addCondition.;\r\n                            }\r\n                            if (newValue !== null && isNumeric(newValue)) {\r\n                                if ((newValue as number) < 0) {\r\n                                    newValue = 0;\r\n                                } else {\r\n                                    conditionInput.selectList.filter(s => s.name == addCondition.).forEach(entry => {\r\n                                        if (newValue !== null && (newValue as number) >= entry.options.length) {\r\n                                            newValue = entry.options.length - 1;\r\n                                        }\r\n                                    })\r\n                                }\r\n                            }\r\n                        } else {\r\n                            newValue = true;\r\n                        }\r\n                        myConditionValuesAfter[addCondition.] = newValue;\r\n                    }\r\n                    if (addCondition.) {\r\n                        if (Array.isArray(addCondition.)) {\r\n                            addCondition..forEach((desc: string) => {\r\n                                if (!damageResult[''].includes(desc)) {\r\n                                    damageResult[''].push(desc);\r\n                                }\r\n                            })\r\n                        } else {\r\n                            const desc = addCondition.;\r\n                            if (!damageResult[''].includes(desc)) {\r\n                                damageResult[''].push(desc);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (detailObj[''] || detailObj['']) {\r\n            const myConditionInputAfter: TConditionInput = _.cloneDeep(conditionInput);\r\n            myConditionInputAfter.conditionValues = myConditionValuesAfter;\r\n            const validConditionValueArrAfter = makeValidConditionValueArr(myConditionInputAfter);\r\n\r\n            [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets].forEach(damageDetail => {\r\n                if (!damageDetail) return;\r\n                damageDetail..filter(s => s.).forEach(damageDetailObj => {\r\n                    if (damageDetailObj. === null) {\r\n                        return;\r\n                    }\r\n                    const conditionStr = damageDetailObj. as string;\r\n                    const matchesBefore = checkConditionMatches(conditionStr, validConditionValueArr, constellation, statsObj, conditionInput.conditionValues);\r\n                    const matchesAfter = checkConditionMatches(conditionStr, validConditionValueArrAfter, constellation, statsObj, conditionInput.conditionValues);\r\n                    if (matchesBefore == matchesAfter) {\r\n                        return;\r\n                    }\r\n                    let valueBefore = 0;\r\n                    let valueAfter = 0;\r\n                    let before = damageDetailObj.;\r\n                    if (before.includes('${INDEX}')) {\r\n                        before = before.replaceAll('${INDEX}', String(matchesBefore));\r\n                    } else if (matchesBefore !== 0) {\r\n                        before = '(' + before + ')*' + matchesBefore;\r\n                    } else {\r\n                        before = '0';\r\n                    }\r\n                    valueBefore = evalFormula(before, statsObj, damageResult, damageDetailObj., damageDetailObj.);\r\n                    let after = damageDetailObj.;\r\n                    if (after.includes('${INDEX}')) {\r\n                        after = after.replaceAll('${INDEX}', String(matchesAfter));\r\n                    } else if (matchesAfter !== 0) {\r\n                        after = '(' + after + ')*' + matchesAfter;\r\n                    } else {\r\n                        after = '0';\r\n                    }\r\n                    valueAfter = evalFormula(after, statsObj, damageResult, damageDetailObj., damageDetailObj.);\r\n                    const diff = valueAfter - valueBefore;\r\n                    if (diff) {\r\n                        let new = damageDetailObj. as string;\r\n                        if (damageDetailObj.) {\r\n                            new += '.' + damageDetailObj.;\r\n                        }\r\n                        if (new in my) {\r\n                            my[new] += diff;\r\n                        } else {\r\n                            my[new] = diff;\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n\r\n            validConditionValueArr = validConditionValueArrAfter;\r\n        }\r\n\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n        if (talentChangeDetailObjArr) {\r\n            // \r\n            talentChangeDetailObjArr.forEach(valueObj => {\r\n                let number = null;\r\n                if (valueObj.) {\r\n                    number = checkConditionMatches(valueObj., validConditionValueArr, constellation, statsObj, conditionInput.conditionValues);\r\n                    if (number === 0) {\r\n                        return;\r\n                    }\r\n                }\r\n                if (valueObj.) {\r\n                    if (valueObj..endsWith('')) {    // for \r\n                        if (!valueObj..startsWith(my)) {\r\n                            return;\r\n                        }\r\n                    } else if (valueObj. == '') {\r\n                        if (my != '') {\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        //  or .\r\n                        const my = detailObj.;\r\n                        const myArr = valueObj..split('.');\r\n                        if (myArr[0] != my) {\r\n                            return;\r\n                        }\r\n                        if (myArr.length > 1 && myArr[myArr.length - 1] != detailObj.) {\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                if (valueObj[''].endsWith('')) {   // \r\n                    if (['', '', ''].includes(detailObj.)) {\r\n                        if (!detailObj['']) {\r\n                            my = valueObj[''].replace('', '');\r\n                        }\r\n                    }\r\n                } else if (valueObj. == '') {   //  for \r\n                    const myValue = evalFormula(valueObj., statsObj, damageResult, valueObj., valueObj.);\r\n                    my += myValue;\r\n                } else if (valueObj. == '') {\r\n                    // nop\r\n                } else {\r\n                    if (number != null && number != 1) {    // @\r\n                        const myNewValueObj = JSON.parse(JSON.stringify(valueObj)); // _.cloneDeep\r\n                        if (_.isString(myNewValueObj.)) {\r\n                            myNewValueObj. += '*' + number;\r\n                        } else if (_.isArray(myNewValueObj.)) {\r\n                            myNewValueObj. = myNewValueObj..concat(['*', number]);\r\n                        }\r\n                        myTalentChangeDetailObjArr.push(myNewValueObj);\r\n                    } else {\r\n                        myTalentChangeDetailObjArr.push(valueObj);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // \r\n        const tempStatsObj: TStats = {};\r\n        [statsObj, my].forEach(entryObj => {\r\n            Object.keys(entryObj).forEach(stat => {\r\n                const tempArr = stat.split('.');\r\n                if (tempArr.length == 1) return;\r\n                let isValid = false;\r\n                if (tempArr[1] == detailObj.) {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    } else if (tempArr[2] == detailObj.) {\r\n                        if (tempArr.length == 3) {\r\n                            isValid = true;\r\n                        }\r\n                    }\r\n                } else if (tempArr[1] == (my + '')) {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    }\r\n                } else if (tempArr[1] == '' && my == '') {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                if (isValid) {\r\n                    const toStat = tempArr[0];\r\n                    if (toStat in tempStatsObj) {\r\n                        if (toStat == '' && tempStatsObj[toStat] > 0) {\r\n                            tempStatsObj[toStat] *= entryObj[stat] / 100;   // for \r\n                        } else {\r\n                            tempStatsObj[toStat] += entryObj[stat];\r\n                        }\r\n                    } else {\r\n                        tempStatsObj[toStat] = entryObj[stat];\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        Object.keys(tempStatsObj).forEach(stat => {\r\n            if (stat in my) {\r\n                if (stat.startsWith('') && my[stat] > 0) {\r\n                    my[stat] *= tempStatsObj[stat] / 100;   // for \r\n                } else {\r\n                    my[stat] += tempStatsObj[stat];\r\n                }\r\n            } else {\r\n                my[stat] = tempStatsObj[stat];\r\n            }\r\n        });\r\n\r\n        // for  0.05\r\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\r\n        if (damageDetailMyArtifactSets) {\r\n            if (detailObj. == '' && detailObj.HIT > 1\r\n                && characterInput.artifactSets[0] == '' && characterInput.artifactSets[1] == '') {\r\n                let isValid = false;\r\n                for (const valueObj of damageDetailMyArtifactSets[CHANGE_KIND_STATUS].filter(s => s. && s. && s.)) {\r\n                    const my = valueObj. as string; // \r\n                    const my = valueObj. as string;\r\n                    const myHIT = detailObj.HIT;\r\n                    if (checkConditionMatches(my, validConditionValueArr, constellation, statsObj, conditionInput.conditionValues) !== 0) {\r\n                        const my = valueObj.;\r\n                        const myValue = evalFormula(my, statsObj, damageResult, valueObj., valueObj.);\r\n                        if (!(my in my)) {\r\n                            my[my] = 0;\r\n                        }\r\n                        my[my] -= myValue * (myHIT - Math.max(1, Math.floor(myHIT / 2))) / myHIT;\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                if (isValid) {\r\n                    const description = '4HIT3HIT14HIT2';\r\n                    if (!damageResult[''].includes(description)) {\r\n                        damageResult[''].push(description);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        Object.keys(my).forEach(stat => {\r\n            if (stat in statsObj) {\r\n                if (stat.startsWith('') && statsObj[stat] > 0) {\r\n                    statsObj[stat] *= my[stat];\r\n                } else {\r\n                    statsObj[stat] += my[stat];\r\n                }\r\n            } else {\r\n                statsObj[stat] = my[stat];\r\n            }\r\n        });\r\n\r\n        if (statsObj['']) {\r\n            my = statsObj[''];\r\n        }\r\n\r\n        switch (detailObj.) {\r\n            case 'HP':\r\n                myArr.push('');\r\n                myArr.push('');\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':\r\n                myArr.push('');\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                break;\r\n            case 'HP':    // for  \r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':\r\n                isCalc = false;\r\n                isCalc = false;\r\n                break;\r\n            case 'HP':\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':    // for \r\n                if (!['', '', '', ''].includes(my)) {\r\n                    my = '';\r\n                }\r\n                break;\r\n            case 'HP':  // for  \r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            default:\r\n                if (detailObj..startsWith('') || detailObj..startsWith('')) {\r\n                    isCalc = false;\r\n                    isCalc = false;\r\n                    isCalc = false;\r\n                    my = null;\r\n                } else {\r\n                    myArr.push('');\r\n                    if (detailObj. != 'NONE') {  // for \r\n                        if (detailObj.) {\r\n                            myArr.push(detailObj.);\r\n                        } else if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\r\n                            myArr.push(detailObj. + '');\r\n                        }\r\n                    }\r\n                    if (my) {\r\n                        myArr.push(my == '' ? '' : my + '');\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        let myResult: TDamageResultEntry;\r\n        if (detailObj..startsWith('') && detailObj..endsWith('')) {   // for \r\n            myResult = calculateDamageFromDetailSubLunar(statsObj, damageResult, detailObj., detailObj., my);\r\n        } else {\r\n            myResult = calculateDamageFromDetailSub(statsObj, damageResult, detailObj., myArr, isCalc, isCalc, isCalc, my, my, my, detailObj., detailObj.);\r\n        }\r\n\r\n        myTalentChangeDetailObjArr.forEach(valueObj => {\r\n            const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, valueObj., myArr, isCalc, isCalc, isCalc, my, my, null, valueObj., valueObj.);\r\n            if (valueObj..endsWith('')) {  // \r\n                if (detailObj. == '') return;  // for \r\n                if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\r\n                    // HITHIT\r\n                    if (myHIT > 1) {\r\n                        myResultWork[2] *= myHIT;\r\n                        if (myResultWork[3] != null) {\r\n                            myResultWork[3] *= myHIT;\r\n                        }\r\n                        myResultWork[4] *= myHIT;\r\n                    }\r\n                }\r\n            }\r\n            myResult[2] += myResultWork[2];\r\n            if (myResult[3] != null && myResultWork[3]) {\r\n                myResult[3] += myResultWork[3];\r\n            }\r\n            myResult[4] += myResultWork[4];\r\n        });\r\n\r\n        // \r\n        if ([...DAMAGE_CATEGORY_ARRAY, ''].includes(detailObj.)) {\r\n            let my = detailObj.;\r\n            if (detailObj.) {    // for \r\n                const temp = detailObj..replace(/$/, '');\r\n                if (DAMAGE_CATEGORY_ARRAY.includes(temp)) {\r\n                    my = temp;\r\n                }\r\n            }\r\n\r\n            const dmgUpStatArr = [];\r\n            dmgUpStatArr.push(my + '');\r\n            if (my) {\r\n                dmgUpStatArr.push(my == '' ? '' : my + '');\r\n            }\r\n            dmgUpStatArr.forEach(dmgUpStat => {\r\n                if (!statsObj[dmgUpStat]) return;\r\n                if (!isCalc || !isCalc) return;\r\n\r\n                if (detailObj..startsWith('_')) return;    // for \r\n\r\n                const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, statsObj[dmgUpStat], myArr, isCalc, isCalc, isCalc, my, my, null);\r\n                // HITHIT\r\n                if (myHIT > 1) {\r\n                    myResultWork[2] *= myHIT;\r\n                    if (myResultWork[3] != null) {\r\n                        myResultWork[3] *= myHIT;\r\n                    }\r\n                    myResultWork[4] *= myHIT;\r\n                }\r\n                myResult[2] += myResultWork[2];\r\n                if (myResult[3] != null && myResultWork[3]) {\r\n                    myResult[3] += myResultWork[3];\r\n                }\r\n                myResult[4] += myResultWork[4];\r\n            });\r\n        }\r\n\r\n        // \r\n        Object.keys(my).forEach(statName => {\r\n            statsObj[statName] -= my[statName];\r\n        });\r\n\r\n        if (detailObj. == '') {\r\n            if (myResult[1] == '') {  //  for  \r\n                myResult[2] = myResult[2] * 1.5;\r\n                myResult[4] = myResult[4] * 1.5;\r\n            }\r\n        }\r\n\r\n        const resultArr = [detailObj., myResult[1], myResult[2], myResult[3], myResult[4], detailObj., detailObj.HIT, myResult[7], myResult[8]] as TDamageResultEntry;\r\n        console.debug(resultArr);\r\n        return resultArr;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(detailObj, characterInput, conditionInput, statsObj, opt_element);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport function isUseReference(formula: number | string) {\r\n    return _.isString(formula) && formula.includes('#');\r\n}\r\n\r\nfunction calculateDamageFromDetailSub(\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    formula: number | string,\r\n    buffArr: Array<string> | null,\r\n    isCalc: boolean,\r\n    isCalc: boolean,\r\n    isCalc: boolean,\r\n    : string,\r\n    : number,\r\n    : number | null,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null\r\n): TDamageResultEntry {\r\n    const my = evalFormula(formula, statsObj, damageResult, opt_max, opt_min);\r\n    let my = my;\r\n\r\n    if () { //  for \r\n        my *=  / 100;\r\n    } else {\r\n         = 1;\r\n    }\r\n\r\n    // \r\n    if (isUseReference(formula)) {\r\n        buffArr = null;\r\n        isCalc = false;\r\n        isCalc = false;\r\n    }\r\n\r\n    let my = 1;\r\n    if (buffArr) {\r\n        my = 100;   // percent\r\n        buffArr.forEach(buff => {\r\n            if (statsObj[buff]) {\r\n                my += statsObj[buff];\r\n            }\r\n        });\r\n        my = my / 100;\r\n        my *= my;\r\n    }\r\n\r\n    let my = 1;\r\n    if (isCalc) {\r\n        my = calculateEnemyDef(statsObj, );\r\n        my *= my;\r\n    }\r\n\r\n    let my = 1;\r\n    if (isCalc && ) {\r\n        my = calculateEnemyRes(, statsObj);\r\n        my *= my;\r\n    }\r\n\r\n    let my = statsObj[''];\r\n    if ( == '') {\r\n        if ('' in statsObj) {\r\n            my += statsObj[''];\r\n        }\r\n    } else if (( + '') in statsObj) {\r\n        my += statsObj[ + ''];\r\n    }\r\n    my = Math.min(100, Math.max(0, my)) / 100;    // 01\r\n\r\n    let my = statsObj[''];\r\n    if ( == '') {\r\n        if ('' in statsObj) {\r\n            my += statsObj[''];\r\n        }\r\n    } else if (( + '') in statsObj) {\r\n        my += statsObj[ + ''];\r\n    }\r\n    my = (100 + my) / 100;\r\n\r\n    let myResult = null;\r\n    let myResult = my;\r\n    if (isCalc && my > 0) {\r\n        myResult = my * my;\r\n        myResult = (myResult * my) + (my * (1 - my));\r\n    }\r\n\r\n    console.debug('[%f] [%o=%f] [%f,%f] [%f] [%f]', , buffArr, my, my, my, my, my);\r\n    return ['', , myResult, myResult, my, null, null, my, my];\r\n}\r\n\r\nfunction calculateDamageFromDetailSubLunar(\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    formula: number | string,\r\n    kind: string,\r\n    dmgElement: string,\r\n): TDamageResultEntry {\r\n    const my = evalFormula(formula, statsObj, damageResult, null, null);\r\n    const workKind = kind.replace('', '');\r\n    const baseDmgUp = statsObj[workKind + ''] ?? 0;\r\n    const em = statsObj[''] ?? 0;\r\n    const emBonus = (6 * em) / (em + 2000);\r\n    const otherBonus = statsObj[workKind + ''] ?? 0;\r\n\r\n    let my = 3 * my * (1 + baseDmgUp / 100) * (1 + emBonus + otherBonus / 100);\r\n\r\n    const my = calculateEnemyRes(dmgElement, statsObj);\r\n    my *= my;\r\n\r\n    let my = statsObj[''];\r\n    my += statsObj[dmgElement + ''] || 0;\r\n    my = Math.min(100, Math.max(0, my)) / 100;    // 01\r\n\r\n    let my = statsObj[''];\r\n    my += statsObj[dmgElement + ''] || 0;\r\n    my = (100 + my) / 100;\r\n\r\n    let myResult = null;\r\n    let myResult = my;\r\n    if (my > 0) {\r\n        myResult = my * my;\r\n        myResult = (myResult * my) + (my * (1 - my));\r\n    }\r\n\r\n    return ['', dmgElement, myResult, myResult, my, null, null, null, null];\r\n}\r\n\r\nfunction getChangeDetailObjArr(characterInput: TCharacterInput, changeKind: string) {\r\n    let result = [] as any[];\r\n    if (!characterInput) return result;\r\n\r\n    if (characterInput.damageDetailMyCharacter && changeKind in characterInput.damageDetailMyCharacter) {\r\n        result = result.concat((characterInput.damageDetailMyCharacter as any)[changeKind]);\r\n    }\r\n    if (characterInput.damageDetailMyWeapon && changeKind in characterInput.damageDetailMyWeapon) {\r\n        result = result.concat((characterInput.damageDetailMyWeapon as any)[changeKind]);\r\n    }\r\n    if (characterInput.damageDetailMyArtifactSets && changeKind in characterInput.damageDetailMyArtifactSets) {\r\n        result = result.concat((characterInput.damageDetailMyArtifactSets as any)[changeKind]);\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction updateStats(\r\n    statsObj: TStats,\r\n    statName: string,\r\n    formulaArr: number | string,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null,\r\n) {\r\n    const value = evalFormula(formulaArr, statsObj, DAMAGE_RESULT_TEMPLATE, opt_max, opt_min);    // DAMAGE_RESULT_TEMPLATE\r\n    if (!isNumeric(value)) {\r\n        console.error(statsObj, statName, formulaArr, value);\r\n    }\r\n    const nameArr = [];\r\n    if (statName == 'HP') {\r\n        nameArr.push('HP');\r\n    } else if (statName.startsWith('')) {\r\n        nameArr.push(statName.replace(/^/, String(statsObj[''])));\r\n    } else if (statName.startsWith('')) {\r\n        ALL_ELEMENTS.forEach(entry => {\r\n            nameArr.push(statName.replace(/^/, entry));\r\n        });\r\n    } else if (statName.startsWith('')) {\r\n        nameArr.push(statName.replace(/^/, '' + String(statsObj[''])));\r\n    } else if (statName.startsWith('')) {\r\n        ALL_ELEMENTS.forEach(entry => {\r\n            nameArr.push(statName.replace(/^/, '' + entry));\r\n        });\r\n    } else {\r\n        nameArr.push(statName);\r\n    }\r\n    const diffStats = {} as { [key: string]: number };\r\n    nameArr.forEach(name => {\r\n        diffStats[name] = value;\r\n    });\r\n    for (const name of Object.keys(diffStats)) {\r\n        if (name in statsObj) {\r\n            if (name.startsWith('') && diffStats[name] > 0) {\r\n                statsObj[name] *= diffStats[name] / 100;    // for \r\n            } else {\r\n                statsObj[name] += diffStats[name];\r\n            }\r\n        } else {\r\n            statsObj[name] = diffStats[name];\r\n        }\r\n    }\r\n    console.debug(updateStats.name, null, statName, formulaArr, '=>', diffStats);\r\n    return diffStats;\r\n}\r\n\r\n/**  */\r\nfunction calculateDamageTaken(statsObj: TStats, damage: number, element: string) {\r\n    const def = statsObj[''];\r\n    const enemyLevel = statsObj[''];\r\n    const dmgReduction = statsObj[''];\r\n    const res = calculateRes(statsObj[element == '' ? '' : element + '']);\r\n    let result = damage * (1 - def / (def + 5 * enemyLevel + 501)) * (100 - dmgReduction) / 100 * res;\r\n    result = Math.max(0, result);\r\n    return result;\r\n}\r\n\r\n// function flattenArray(value: any) {\r\n//     const result: any[] = [];\r\n//     if (Array.isArray(value)) {\r\n//         value.forEach(e => {\r\n//             if (Array.isArray(e)) {\r\n//                 result.push(...flattenArray(e));\r\n//             } else {\r\n//                 result.push(e);\r\n//             }\r\n//         });\r\n//     }\r\n//     return result;\r\n// }\r\n\r\nexport function calculateArtifactScore(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    scoringStats: [string, number][]\r\n) {\r\n    let result = 0;\r\n    for (const scoringStat of scoringStats) {\r\n        const stat = scoringStat[0];\r\n        const magnification = scoringStat[1];\r\n        const statValue = (artifactDetailInput. as any)[stat];\r\n        if (statValue) {\r\n            result += statValue * magnification;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateStatsTop(\r\n    statsObj: TStats,\r\n    optionInput: TOptionInput,\r\n) {\r\n    ARRAY.forEach(stat => {\r\n        const srcStat = stat.replace(/TOP$/, 'X7');\r\n        let srcStatValue = getStatValue(srcStat, statsObj);\r\n        if (srcStatValue) {\r\n            statsObj[stat] = srcStatValue;\r\n        }\r\n        for (const member of optionInput.teamMembers) {\r\n            const calculatedSupporter = optionInput.supporters[member];\r\n            if (!calculatedSupporter?.statsInput?.statsObj) continue;\r\n            srcStatValue = getStatValue(srcStat, calculatedSupporter.statsInput.statsObj);\r\n            if (srcStatValue !== undefined) {\r\n                if (statsObj[stat] < srcStatValue) {\r\n                    statsObj[stat] = srcStatValue;\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport async function setupTeamOptionSupporter(\r\n    optionInput: TOptionInput,\r\n    supporter: TCharacterKey,\r\n    build?: string,\r\n    character?: TCharacterKey,\r\n): Promise<[TStats, TDamageResult]> {\r\n    const characterInput = getDefaultCharacterInput();\r\n    const artifactDetailInput = getDefaultArtifactDetailInput();\r\n    const conditionInput = getDefaultConditionInput();\r\n    const statsInput = getDefaultStatsInput();\r\n    const damageResult = getDefaultDamageResultInput();\r\n    const optionDetails1: TDamageDetailObj[] = [];\r\n    const optionDetails2: TDamageDetailObj[] = [];\r\n    const conditionMap = new Map<string, string[] | object | null>();\r\n    const exclusionMap = new Map<string, string[]>();\r\n\r\n    characterInput.character = supporter;\r\n    characterInput.characterMaster = await getCharacterMasterDetail(characterInput.character);\r\n\r\n    if (build) {\r\n        const builddata = JSON.parse(build);\r\n\r\n        await loadRecommendation(characterInput, artifactDetailInput, conditionInput, optionInput, builddata);\r\n        makeDamageDetailObjArrObjCharacter(characterInput);\r\n        makeDamageDetailObjArrObjWeapon(characterInput);\r\n        makeDamageDetailObjArrObjArtifactSets(characterInput);\r\n        setupConditionValues(conditionInput, characterInput, optionInput);\r\n        calculateArtifactStatsMain(artifactDetailInput., artifactDetailInput.);\r\n        calculateArtifactStats(artifactDetailInput);\r\n        if (optionInput.elementalResonance) {\r\n            optionInput.elementalResonance.conditionAdjustments = calculateElementalResonance(optionInput.elementalResonance.conditionValues, conditionInput);\r\n        }\r\n        calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n        updateNumberConditionValues(conditionInput, characterInput, statsInput.statsObj);\r\n        calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n\r\n        if (character && characterInput.character === '') {\r\n            // for \r\n            const myCharacterMaster = await getCharacterMasterDetail(character);\r\n            if ('' in myCharacterMaster['']) {\r\n                statsInput.statsObj[''] = Number(myCharacterMaster['']['']);\r\n            }\r\n        }\r\n\r\n        calculateDamageResult(damageResult, characterInput, conditionInput, statsInput);\r\n    }\r\n\r\n    // TEAM_OPTION_MASTER\r\n    const teamOptions: any[] = [];\r\n    TEAM_OPTION_MASTER_LIST.filter(entry => entry.key.startsWith(supporter + '_')).forEach(entry => {\r\n        if (_.isArray(entry.)) {\r\n            for (const detailObj of entry.) {\r\n                (detailObj as any). = makeSupporterCondition(supporter, entry., (detailObj as any).);\r\n            }\r\n        }\r\n        teamOptions.splice(teamOptions.length, 0, ...makeDamageDetailObjArr(entry, null, null, null, optionDetails1, optionDetails2, ''));\r\n    })\r\n    teamOptions.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    })\r\n    optionDetails1.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    })\r\n    optionDetails2.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    })\r\n    conditionMap.forEach((value, key) => {\r\n        if (value && _.isArray(value)) {\r\n            if (!value[0].startsWith('required_')) {\r\n                conditionMap.set(key, ['', ...value]);\r\n            }\r\n        }\r\n    })\r\n    // CHARACTER_MASTER\r\n    let characterOptions: any[] = [];\r\n    if (characterInput.characterMaster?.) {\r\n        characterOptions = characterInput.characterMaster.;\r\n    }\r\n    // WEAPON_MASTER\r\n    let weaponOptions: any[] = [];\r\n    if (characterInput.weaponMaster?.) {\r\n        weaponOptions = characterInput.weaponMaster.;\r\n    }\r\n    // ARTIFACT_SET_MASTER\r\n    const vision = characterInput.characterMaster.;\r\n    const elementalReactionArr = Object.keys((ELEMENTAL_REACTION_MASTER as any)[vision]);\r\n    if (['', ''].includes(vision) && !elementalReactionArr.includes('')) {\r\n        elementalReactionArr.push('');\r\n    }\r\n    const artifactSetOptions: any[] = [];\r\n    if (characterInput.artifactSets[0] && characterInput.artifactSets[1] && characterInput.artifactSets[0] == characterInput.artifactSets[1]) {\r\n        if (characterInput.artifactSetMasters[0]['4']) {\r\n            if (_.isArray(characterInput.artifactSetMasters[0]['4'][''])) {\r\n                characterInput.artifactSetMasters[0]['4'][''].forEach(detailObj => {\r\n                    if (detailObj.) {\r\n                        if (_.isString(detailObj.)) {\r\n                            detailObj. = detailObj..replace('', '');\r\n                            if (detailObj..startsWith('')) { // for \r\n                                if (elementalReactionArr.filter(s => detailObj[''].startsWith('=' + s)).length === 0) {\r\n                                    return;\r\n                                }\r\n                            }\r\n                        }\r\n                        artifactSetOptions.push(detailObj);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n    for (const options of [characterOptions, weaponOptions, artifactSetOptions]) {\r\n        if (options.length) {\r\n            const damageDetailObjArr = makeTeamOptionDetailObjArr(options);\r\n            damageDetailObjArr.forEach((damageDetailObj) => {\r\n                const condition = makeSupporterCondition(supporter, damageDetailObj., damageDetailObj.);\r\n                damageDetailObj. = condition;\r\n                const changeKind = getChangeKind(damageDetailObj. as string);\r\n                if (changeKind === 'STATUS' &&\r\n                    optionDetails1.filter((s) => s. == condition && s. == damageDetailObj.).length === 0\r\n                ) {\r\n                    optionDetails1.splice(optionDetails1.length, 0, damageDetailObj);\r\n                }\r\n                if (changeKind === 'TALENT' &&\r\n                    optionDetails2.filter((s) => s. == condition && s. == damageDetailObj.).length === 0\r\n                ) {\r\n                    optionDetails2.splice(optionDetails2.length, 0, damageDetailObj);\r\n                }\r\n                makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n            })\r\n        }\r\n    }\r\n\r\n    optionInput.supporters[supporter] = {\r\n        characterInput: characterInput,\r\n        artifactDetailInput: artifactDetailInput,\r\n        conditionInput: conditionInput,\r\n        statsInput: statsInput,\r\n        damageResult: damageResult,\r\n        optionDetails1: optionDetails1,\r\n        optionDetails2: optionDetails2,\r\n        conditionMap: conditionMap,\r\n        exclusionMap: exclusionMap,\r\n    };\r\n\r\n    return [statsInput.statsObj, damageResult];\r\n}\r\n\r\nfunction makeSupporterCondition(supporter: string, name: string | null, condition: string | null | undefined) {\r\n    let result = supporter + '*';\r\n    if (condition) {\r\n        result += condition.replace(/([&|^])/g, '$1' + supporter + '*');\r\n    } else if (name) {\r\n        result += name;\r\n    }\r\n    result = result.replace(supporter + '*' + supporter + '*', supporter + '*');\r\n    return result;\r\n}\r\n\r\nexport function calculateConditionAdjustments(\r\n    stats: TStats,\r\n    damageDetailObjs: TDamageDetailObj[] | undefined,\r\n    validConditionValueArr: string[],\r\n    refStats: TStats,\r\n    damageResult: TDamageResult,\r\n    constellation = 6,\r\n) {\r\n    if (damageDetailObjs === undefined) {\r\n        return;\r\n    }\r\n    for (const detailObj of damageDetailObjs) {\r\n        let my = detailObj.;\r\n        if (my === null) {\r\n            continue;\r\n        }\r\n        if (detailObj.) {\r\n            const number = checkConditionMatches(detailObj., validConditionValueArr, constellation, refStats);\r\n            if (number === 0) continue;\r\n            if (my.includes('${INDEX}')) {\r\n                my = my.replaceAll('${INDEX}', String(number));\r\n            } else {\r\n                my = '(' + my + ')*' + number;\r\n            }\r\n        }\r\n        const myValue = evalFormula(my, refStats, damageResult, detailObj., detailObj.);\r\n        const kinds = [] as string[];\r\n        if (detailObj.) {\r\n            if (detailObj..startsWith('') || detailObj..startsWith('')) {\r\n                for (const elem of ALL_ELEMENTS) {\r\n                    kinds.push(detailObj..replace('', elem));\r\n                }\r\n            } else {\r\n                kinds.push(detailObj.);\r\n            }\r\n        }\r\n        for (const kind of kinds) {\r\n            let tempKind = kind;\r\n            if (detailObj.) {\r\n                tempKind += '.' + detailObj.;\r\n            }\r\n            if (tempKind in stats) {\r\n                stats[tempKind] += myValue;\r\n            } else {\r\n                stats[tempKind] = myValue;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst TEAM_OPTION_NOT_UNIQUE_ARR = ['', '', '', ''];\r\n\r\nexport function calculateTeamStatsAdjustments(optionInput: TOptionInput, topStats: TStats, character: string) {\r\n    const result = {} as TStats;\r\n    const validConditionValueArr: string[] = [];\r\n    makeValidConditionValueArr(optionInput.teamOption).forEach(value => {\r\n        const indexOf = value.indexOf('*');\r\n        const supporter = value.substring(0, indexOf);\r\n        if (supporter != character) {\r\n            const work = value.substring(indexOf);\r\n            if (TEAM_OPTION_NOT_UNIQUE_ARR.includes(work.substring(1)) || validConditionValueArr.filter(s => s.endsWith(work)).length === 0) {\r\n                validConditionValueArr.push(value);\r\n            }\r\n        }\r\n    })\r\n    Object.keys(optionInput.supporters).filter(supporter => supporter != character).forEach(supporter => {\r\n        const workInput = optionInput.supporters[supporter];\r\n        let statsObj = workInput ? workInput.statsInput.statsObj : TEMPLATE;\r\n        if (Object.keys(topStats).length) {\r\n            statsObj = _.cloneDeep(statsObj);\r\n            Object.keys(topStats).forEach(stat => { // \r\n                statsObj[stat] = topStats[stat];\r\n            })\r\n        }\r\n        const damageResult = workInput ? workInput.damageResult : DAMAGE_RESULT_TEMPLATE;\r\n        [\r\n            optionInput.supporters[supporter]?.optionDetails1,\r\n            optionInput.supporters[supporter]?.optionDetails2,\r\n        ].forEach(optionDetails => {\r\n            calculateConditionAdjustments(result, optionDetails, validConditionValueArr, statsObj, damageResult);\r\n        })\r\n    })\r\n    overwriteObject(optionInput.teamOption.conditionAdjustments, result);\r\n    return result;\r\n}\r\n\r\nexport function calculateMiscStatsAdjustments(optionInput: TOptionInput) {\r\n    const result = {} as TStats;\r\n    const validConditionValueArr: string[] = [];\r\n    const teamConditionValueArr = makeValidConditionValueArr(optionInput.teamOption);\r\n    makeValidConditionValueArr(optionInput.miscOption).forEach(value => {\r\n        if (teamConditionValueArr.filter(s => s.endsWith('*' + value)).length === 0) {\r\n            validConditionValueArr.push(value);\r\n        }\r\n    });\r\n    const statsObj = TEMPLATE;\r\n    const damageResult = DAMAGE_RESULT_TEMPLATE;\r\n    [\r\n        optionInput.miscOption.optionDetails1,\r\n        optionInput.miscOption.optionDetails2,\r\n    ].forEach(optionDetails => {\r\n        calculateConditionAdjustments(result, optionDetails, validConditionValueArr, statsObj, damageResult);\r\n    })\r\n    overwriteObject(optionInput.miscOption.conditionAdjustments, result);\r\n    return result;\r\n}\r\n\r\nexport function getCritFromResultEntry(entry: TDamageResultEntry) {\r\n    let critRate = 0;\r\n    let critDmg = 0;\r\n    if (entry[2] && entry[3] && entry[4]) {\r\n        critRate = entry[2] - entry[4]; //  - \r\n        critRate /= entry[3] - entry[4]; //  - \r\n        critRate = Math.round(critRate * 1000) / 10;\r\n        critDmg = Math.round((entry[3] / entry[4] - 1) * 1000) / 10;\r\n    }\r\n    return [critRate, critDmg];\r\n}\r\n\r\nexport function getDamageResultArr(\r\n    rotationDamageEntry: TRotationDamageEntry,\r\n    damageResult: TDamageResult,\r\n): TDamageResultEntry[] {\r\n    const result = [] as TDamageResultEntry[];\r\n    const category = rotationDamageEntry.category;\r\n    if (REACTION_DMG_ARR.includes(category)) {\r\n        result.push([\r\n            category,\r\n            REACTION_DMG_ELEMENT_MAP?.get(category) ?? null,\r\n            (damageResult. as any)[category],\r\n            null,\r\n            (damageResult. as any)[category],\r\n            null,\r\n            1,\r\n            null,\r\n            null,\r\n        ]);\r\n    } else {\r\n        for (let entry of damageResult[category] as TDamageResultEntry[]) {\r\n            if (!entry[0]) continue;\r\n            if (entry[0].startsWith('')) continue;\r\n            if (entry[0].endsWith('')) continue;\r\n            if (entry[5]?.endsWith('')) {\r\n                if (entry[0].startsWith('')) {  // \r\n                    entry = _.cloneDeep(entry);\r\n                    const [critRate] = getCritFromResultEntry(entry);\r\n                    entry[2] = entry[2] * critRate / 100;\r\n                }\r\n                result.push(entry);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateRotationDamageEntry(\r\n    rotationDamageEntry: TRotationDamageEntry,\r\n    index: number,\r\n    damageResult: TDamageResult,\r\n) {\r\n    let result = 0;\r\n    const list = getDamageResultArr(rotationDamageEntry, damageResult);\r\n    if (list && list.length > index && rotationDamageEntry.reactions.length > index) {\r\n        const dmgResultEntry = list[index];\r\n        const reactionObj: any = rotationDamageEntry.reactions[index];\r\n        const count = rotationDamageEntry.counts[index];\r\n        const plainDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., ''); // \r\n        for (let n = 0; n < count; n++) {\r\n            let workDmg = plainDmg;\r\n            ['', ''].forEach((reaction) => {\r\n                if (reaction in reactionObj && n < reactionObj[reaction]) {\r\n                    workDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction);\r\n                }\r\n            });\r\n            result += workDmg;\r\n        }\r\n        ['', ''].forEach((reaction) => {\r\n            if (reaction in reactionObj) {\r\n                result += calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction, reactionObj[reaction]) - plainDmg;\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateRotationTotalDamage(\r\n    rotationDamageArr: TRotationDamageEntry[],\r\n    damageResult: TDamageResult,\r\n) {\r\n    let result = 0;\r\n    rotationDamageArr.forEach((rotationDamageEntry) => {\r\n        const list = getDamageResultArr(rotationDamageEntry, damageResult);\r\n        for (let i = 0; i < list.length; i++) {\r\n            result += calculateRotationDamageEntry(rotationDamageEntry, i, damageResult);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function calculateReactedDamage(\r\n    dmgResultEntry: TDamageResultEntry,\r\n    dmgIndex: number,\r\n    elementalReaction: TDamageResultElementalReaction,\r\n    reaction: string,\r\n    reactionTimes = 1\r\n) {\r\n    let result = Number(dmgResultEntry[dmgIndex]); // 2:/3:/4:\r\n    const dmgElement = dmgResultEntry[1];\r\n    if (reaction && dmgElement) {\r\n        if (['', ''].includes(reaction)) {\r\n            const reactionKey = reaction + '_' + dmgElement;\r\n            if (reactionKey in elementalReaction) {\r\n                result *= (elementalReaction as any)[reactionKey];\r\n            }\r\n        } else if (['', ''].includes(reaction)) {\r\n            const reactionKey = reaction + '';\r\n            if (reactionKey in elementalReaction) {\r\n                let reactionDmg = (elementalReaction as any)[reactionKey];\r\n                if (dmgResultEntry[2]) {\r\n                    reactionDmg *= result / dmgResultEntry[4]; //  \r\n                }\r\n                if (dmgResultEntry[7]) {\r\n                    reactionDmg *= dmgResultEntry[7]; // \r\n                }\r\n                if (dmgResultEntry[8]) {\r\n                    reactionDmg *= dmgResultEntry[8]; // \r\n                }\r\n                reactionDmg *= reactionTimes; // \r\n                result += reactionDmg;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getAmplifyingReactionElement(reaction: string, dmgElement: string) {\r\n    let reactionElement;\r\n    if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    }\r\n    return reactionElement;\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport type TKeyValue = {\r\n    key: string, value: any,\r\n};\r\n\r\nexport function isString(value: any): boolean {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\n\r\nexport function isNumeric(value: any): boolean {\r\n    return isFinite(value) && value != null;\r\n}\r\n\r\nexport function isBoolean(value: any): boolean {\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isPlainObject(value: any): boolean {\r\n    const myType = Object.prototype.toString.call(value);\r\n    return myType === '[object Object]';\r\n}\r\n\r\n// /** deep copyundefined */\r\n// export function deepcopy(value: any): any {\r\n//     const result = JSON.parse(JSON.stringify(value));\r\n//     return result;\r\n// }\r\n\r\nexport function overwriteObject(dst: any, src: any) {\r\n    if (_.isPlainObject(src) && _.isPlainObject(dst)) {\r\n        const srcKeys = Object.keys(src);\r\n        for (const key of srcKeys) {\r\n            dst[key] = src[key];\r\n        }\r\n        for (const key of Object.keys(dst)) {\r\n            if (!srcKeys.includes(key)) delete dst[key];\r\n        }\r\n    }\r\n    return dst;\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport const basename = (path: string) => path!.split('/')!.pop()!.split('.')!.shift()!;\r\n","import { createI18n } from 'vue-i18n'\r\n\r\nconst i18n = createI18n({\r\n  legacy: false,\r\n  locale: 'ja-jp',\r\n  fallbackLocale: 'en-us',\r\n  isGlobal: true,\r\n})\r\nexport default i18n;\r\n","import { ALL_ELEMENTS, ARTIFACT_SET_MASTER, ARTIFACT_STAT_JA_EN_ABBREV_MAP, ARTIFACT_SUB_MASTER, CHARACTER_MASTER, ELEMENTAL_REACTION_MASTER, ELEMENTAL_RESONANCE_MASTER, ELEMENTAL_RESONANCE_MASTER_LIST, ENEMY_MASTER_LIST, GENSEN_MASTER_LIST, getCharacterMasterDetail, getWeaponMasterDetail, IMG_SRC_DUMMY, NUMBER_OF_PRIORITY_SUBSTATS, OPTION1_MASTER_LIST, OPTION2_MASTER_LIST, RECOMMEND_ABBREV_MAP, TAnyObject, TArtifactSet, TArtifactSetEntry, TArtifactSetKey, TArtifactSubKey, TCharacterDetail, TCharacterKey, TEnemyEntry, TWeaponDetail, TWeaponKey, TWeaponTypeKey, WEAPON_MASTER, PROPERTY_MAP } from '@/master';\r\nimport _ from 'lodash';\r\nimport { basename, isNumeric, overwriteObject } from './common';\r\n\r\nexport const ARRAY = [\r\n    'HP',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    'HP',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',       // for \r\n    '',     // for \r\n    '',     // for \r\n    '',     // for \r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',           // for \r\n    '', // for \r\n    '',           // for \r\n    '', // for \r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    'HP%',\r\n    '%',\r\n    '%',\r\n    'HP+',\r\n    '+',\r\n    '+',\r\n];\r\nexport const ARRAY = [\r\n    'HPV1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n];\r\nexport const ARRAY = [\r\n    'TOP',\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    ''\r\n];\r\n\r\nexport const ARRAY_MAP = new Map([\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', _ARRAY],\r\n    ['', _ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', _ARRAY],\r\n    ['', _ARRAY],\r\n]);\r\n\r\nexport const STAT_PERCENT_LIST = [\r\n    ...ARRAY, ..._ARRAY, ..._ARRAY, ...ARRAY, ...ARRAY, ..._ARRAY,\r\n    '', '', '',\r\n];\r\n\r\nexport type TStats = {\r\n    [key: string]: number,\r\n};\r\n\r\nfunction makeStatusTemplate() {\r\n    const statsObj: TStats = {};\r\n    ARRAY_MAP.forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj[''] = 5;\r\n    statsObj[''] = 50;\r\n    statsObj[''] = 100;\r\n    statsObj[''] = 0;\r\n    statsObj[''] = 0;\r\n    return statsObj;\r\n}\r\nexport const TEMPLATE = makeStatusTemplate();\r\n\r\nfunction makeEnemyStatusTemplate() {\r\n    const statsObj: TStats = {};\r\n    [_ARRAY].forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj[''] = 0;\r\n    return statsObj;\r\n}\r\nexport const TEMPLATE = makeEnemyStatusTemplate();\r\n\r\nexport const _ARRAY = [\r\n    '5_HP', '4_HP'\r\n];\r\nexport const _ARRAY = [\r\n    '5_', '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '5_',\r\n    '4_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_',\r\n    '4_'\r\n];\r\n\r\nexport const ARRAY = [\r\n    'HP%',\r\n    'HP',\r\n    '%',\r\n    '',\r\n    '%',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '%',\r\n    'HP%',\r\n    '%',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    'HP',\r\n    '',\r\n    '',\r\n];\r\n\r\nexport const TEMPLATE = {\r\n    'HP': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    'HP%': 0,\r\n    '%': 0,\r\n    '%': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n};\r\nexport type TArtifactStats = typeof TEMPLATE;\r\nexport type TArtifactStatsKey = keyof typeof TEMPLATE;\r\n\r\nexport type TDamageResultEntry = [string, string | null, number, number | null, number, string | null, number | null, number | null, number | null];    // 0:, 1:, 2:, 3:, 4:, 5:, 6:HIT, 7:, 8:\r\n\r\nexport const TEMPLATE = {\r\n    : '',\r\n    _: 0,                 // 1.5\r\n    _: 0,                 // 2\r\n    _: 0,                 // 1.5\r\n    _: 0,                 // 2\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : '',\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,              // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n    ALL: [] as TDamageResultEntry[],  // for \r\n};\r\nObject.keys(TEMPLATE).forEach(key => {\r\n    if (key.endsWith('ALL')) {\r\n        const template: TDamageResultEntry[] = [];\r\n        for (let i = 0; i < 4; i++) {\r\n            template.push(['', null, 0, 0, 0, null, null, null, null]);  // 0:, 1:, 2:, 3:, 4:, 5:, 6:HIT, 7:, 8:\r\n        }\r\n        (TEMPLATE as any)[key] = template;\r\n    }\r\n})\r\n\r\nexport type TDamageResultElementalReactionKey = keyof typeof TEMPLATE;\r\nexport type TDamageResultElementalReaction = typeof TEMPLATE;\r\n\r\nexport type TDamageResult = {\r\n    : TDamageResultElementalReaction,\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : string[],\r\n    : any[],\r\n    : any[],\r\n    [key: string]: TDamageResultElementalReaction | TDamageResultEntry[] | string[],\r\n};\r\n\r\nexport const DAMAGE_RESULT_TEMPLATE = {\r\n    : _.cloneDeep(TEMPLATE) as TDamageResultElementalReaction,\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as string[],\r\n    : [] as any[],\r\n    : [] as any[],\r\n};\r\n\r\nexport const ARRAY = [\r\n    Array.from({ length: 20 }, (_, i) => i + 1),\r\n    Array.from({ length: 21 }, (_, i) => i + 20),\r\n    Array.from({ length: 11 }, (_, i) => i + 40),\r\n    Array.from({ length: 11 }, (_, i) => i + 50),\r\n    Array.from({ length: 11 }, (_, i) => i + 60),\r\n    Array.from({ length: 11 }, (_, i) => i + 70),\r\n    Array.from({ length: 11 }, (_, i) => i + 80),\r\n];\r\n\r\nexport type TDamageDetailObj = {\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    HIT: number | null,\r\n    : string | null,\r\n    : boolean | null,\r\n    : (string | object)[] | null,\r\n    : (string | object)[] | null,\r\n};\r\n\r\nexport type TDamageDetail = {\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    : TDamageDetailObj[],\r\n    : TDamageDetailObj[],\r\n    : Map<string, string[] | object | null>,\r\n    : Map<string, string[]>,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_DUMMY = {\r\n    key: 'NONE' as TArtifactSetKey,\r\n    : 5,\r\n    image: IMG_SRC_DUMMY,\r\n} as TArtifactSet;\r\n\r\nexport const CHARACTER_INPUT_TEMPLATE = {\r\n    character: '' as TCharacterKey,\r\n    characterMaster: {} as TCharacterDetail,\r\n    : 6,\r\n    : 90,\r\n    : 0,\r\n    : 8,\r\n    : 8,\r\n    : 8,\r\n    weapon: '' as TWeaponKey,\r\n    weaponMaster: {} as TWeaponDetail,\r\n    : 6,\r\n    : 90,\r\n    : 1,\r\n    artifactSets: ['NONE' as TArtifactSetKey, 'NONE' as TArtifactSetKey],\r\n    artifactSetMasters: [ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[],\r\n    damageDetailMyCharacter: null as TDamageDetail | null,\r\n    damageDetailMyWeapon: null as TDamageDetail | null,\r\n    damageDetailMyArtifactSets: null as TDamageDetail | null,\r\n    damageDetailElementalResonance: null as TDamageDetail | null,\r\n    buildname: '',\r\n    recommendationSelectedIndex: 0,\r\n    removeDisabled: true,   // \r\n};\r\nexport type TCharacterInput = typeof CHARACTER_INPUT_TEMPLATE;\r\n\r\nexport const ARTIFACT_TEMPLATE = {\r\n    name: '',\r\n    rarity: 1,\r\n    setname: 'NONE',\r\n    cat_id: 1,\r\n    mainStat: '',\r\n    mainStatValue: 0,\r\n    subStats: [\r\n        { name: 'HP', value: 0 },\r\n        { name: '', value: 0 },\r\n        { name: '', value: 0 },\r\n        { name: '', value: 0 },\r\n    ]\r\n};\r\nexport type TArtifact = typeof ARTIFACT_TEMPLATE;\r\n\r\nexport const ARTIFACT_DETAIL_INPUT_TEMPLATE = {\r\n    : ['', '', '', '', ''],\r\n    : _.fill(Array(NUMBER_OF_PRIORITY_SUBSTATS), ''),\r\n    : Array.from(GENSEN_MASTER_LIST[2].values),     // 1\r\n    : Array.from(GENSEN_MASTER_LIST[2].counts),   // 1\r\n    : _.cloneDeep(TEMPLATE) as TArtifactStats,\r\n    : _.cloneDeep(TEMPLATE) as TArtifactStats,\r\n    : _.cloneDeep(TEMPLATE) as TArtifactStats,\r\n    Disabled: false,\r\n    artifact_list: [] as TArtifact[],\r\n};\r\nexport type TArtifactDetailInput = typeof ARTIFACT_DETAIL_INPUT_TEMPLATE;\r\n\r\nexport type TCheckboxEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n};\r\nexport type TSelectEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n    options: string[];\r\n    required: boolean;\r\n};\r\nexport type TNumberEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n    min: number | string;\r\n    max?: number | string | undefined;\r\n    step: number;\r\n    initial: number;\r\n};\r\nexport type TConditionValues = {\r\n    [key: string]: boolean | number | null,\r\n};\r\nexport type TConditionAdjustments = {\r\n    [key: string]: number | null,\r\n};\r\nexport const CONDITION_INPUT_TEMPLATE = {\r\n    optionDetails1: [] as TDamageDetailObj[],\r\n    optionDetails2: [] as TDamageDetailObj[],\r\n    conditionMap: new Map<string, string[] | object | null>(),\r\n    exclusionMap: new Map<string, string[]>(),\r\n    checkboxList: [] as TCheckboxEntry[],\r\n    selectList: [] as TSelectEntry[],\r\n    numberList: [] as TNumberEntry[],\r\n    conditionValues: {} as TConditionValues,\r\n    conditionAdjustments: {} as TConditionAdjustments,\r\n    : [null, null, null] as (string | null)[],\r\n};\r\nexport type TConditionInput = typeof CONDITION_INPUT_TEMPLATE;\r\n\r\nexport const STATS_INPUT_TEMPLATE = {\r\n    statsObj: _.cloneDeep(TEMPLATE) as TStats,\r\n    statAdjustments: _.cloneDeep(TEMPLATE) as TStats,\r\n    statAdjustmentsEx: {} as TStats,\r\n    enemyMaster: ENEMY_MASTER_LIST[0] as TEnemyEntry,\r\n};\r\nfor (const stat of Object.keys(STATS_INPUT_TEMPLATE.statAdjustments)) {\r\n    STATS_INPUT_TEMPLATE.statAdjustments[stat] = 0;\r\n}\r\nexport type TStatsInput = typeof STATS_INPUT_TEMPLATE;\r\n\r\nexport function getDefaultCharacterInput(): TCharacterInput {\r\n    return _.cloneDeep(CHARACTER_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultArtifactDetailInput(): TArtifactDetailInput {\r\n    return _.cloneDeep(ARTIFACT_DETAIL_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultConditionInput(): TConditionInput {\r\n    return _.cloneDeep(CONDITION_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultOptionInput(): TOptionInput {\r\n    return _.cloneDeep(OPTION_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultStatsInput(): TStatsInput {\r\n    return _.cloneDeep(STATS_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultDamageResultInput(): TDamageResult {\r\n    return _.cloneDeep(DAMAGE_RESULT_TEMPLATE);\r\n}\r\n\r\nexport type TElementalResonance = {\r\n    conditionValues: TConditionValues,\r\n    conditionAdjustments: TConditionAdjustments,\r\n};\r\n\r\nexport const SUPPORTER_INPUT_TEMPLATE = {\r\n    characterInput: getDefaultCharacterInput(),\r\n    artifactDetailInput: getDefaultArtifactDetailInput(),\r\n    conditionInput: getDefaultConditionInput(),\r\n    statsInput: getDefaultStatsInput(),\r\n    damageResult: getDefaultDamageResultInput(),\r\n    optionDetails1: [] as TDamageDetailObj[],\r\n    optionDetails2: [] as TDamageDetailObj[],\r\n    conditionMap: new Map<string, string[] | object | null>(),\r\n    exclusionMap: new Map<string, string[]>(),\r\n};\r\nexport type TSupporterInput = typeof SUPPORTER_INPUT_TEMPLATE;\r\nexport type TSupporters = { [key: string]: TSupporterInput | undefined };\r\n\r\nexport const OPTION_INPUT_TEMPLATE = {\r\n    elementalResonance: {\r\n        conditionValues: {},\r\n        conditionAdjustments: {},\r\n    } as TElementalResonance,\r\n    supporterBuildname: {} as { [key: string]: string | undefined },\r\n    supporters: {} as TSupporters,\r\n    teamMembers: [] as string[],\r\n    teamOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n    miscOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n};\r\nexport type TOptionInput = typeof OPTION_INPUT_TEMPLATE;\r\n\r\nexport type TRecommendation = {\r\n    name: string,\r\n    build: any,\r\n    overwrite: boolean\r\n}\r\n\r\nexport const CHANGE_KIND_STATUS = '';\r\nexport const CHANGE_KIND_TALENT = '';\r\n\r\n/** 1+,20,20+,...,90 */\r\nfunction parseLevelStr(levelStr: number | string): [number, number] {\r\n    let result: [number, number] = [0, 1];\r\n    try {\r\n        let level: number;\r\n        if (_.isString(levelStr)) {\r\n            level = Number(String(levelStr).replace('+', ''));\r\n        } else {\r\n            level = Number(levelStr);\r\n        }\r\n        let ascension = 0;\r\n        for (let i = (ARRAY.length - 1); i >= 0; i--) {\r\n            ascension = i;\r\n            if (ARRAY[i][0] > level) continue;\r\n            if (ARRAY[i][0] == level && !String(levelStr).endsWith('+')) {\r\n                ascension--;\r\n            }\r\n            break;\r\n        }\r\n        result = [Math.max(0, ascension), level];\r\n    } catch (error) {\r\n        console.error(levelStr);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDefaultBuildname(character: any) {\r\n    return '' + character;\r\n}\r\n\r\nexport function makeBuildStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    let result = '_' + character;\r\n    if (buildname && buildname != makeDefaultBuildname(character)) {\r\n        result += '_' + buildname;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeOptionStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return '' + makeBuildStorageKey(character, buildname);\r\n}\r\n\r\nexport function makeArtifactScoringStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'ArtifactScoring');\r\n}\r\n\r\nexport function makeSupporterBuildnameStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'SupporterBuildname');\r\n}\r\n\r\n/** . [, , ][] */\r\nexport function makeRecommendationList(\r\n    characterMaster: TAnyObject,\r\n    opt_buildData?: TAnyObject,\r\n): TRecommendation[] {\r\n    const result: TRecommendation[] = [];\r\n\r\n    const character = characterMaster[''];\r\n    let isSavable: boolean | null = null;\r\n\r\n    if (opt_buildData) {\r\n        result.push({ name: 'IMPORTED DATA', build: opt_buildData, overwrite: false });\r\n        isSavable = true;\r\n        console.log('IMPORTED DATA', opt_buildData);\r\n    }\r\n\r\n    const storageKeyArr: string[] = [];\r\n    Object.keys(localStorage).forEach(key => {\r\n        if (key.startsWith(makeBuildStorageKey(character))) {\r\n            storageKeyArr.push(key);\r\n            if (isSavable === null) {\r\n                isSavable = false;\r\n            }\r\n        }\r\n    });\r\n    storageKeyArr.sort();\r\n    const re = new RegExp('^_' + character + '_');\r\n    storageKeyArr.forEach(key => {\r\n        let buildname;\r\n        if (key == makeBuildStorageKey(character)) {\r\n            buildname = makeDefaultBuildname(character);\r\n        } else {\r\n            buildname = key.replace(re, '');\r\n        }\r\n        const buildObj = JSON.parse(localStorage[key]);\r\n        const key2 = '' + key;\r\n        if (key2 in localStorage) {\r\n            const optionsObj = JSON.parse(localStorage[key2]);\r\n            buildObj.options = optionsObj;\r\n        }\r\n        const key3 = key.replace(/^/, 'ArtifactScoring');\r\n        if (key3 in localStorage) {\r\n            const artifactScoringObj = JSON.parse(localStorage[key3]);\r\n            buildObj.artifactScoring = artifactScoringObj;\r\n        }\r\n        const key4 = key.replace(/^/, 'SupporterBuildname');\r\n        if (key4 in localStorage) {\r\n            const supporterBuildnameObj = JSON.parse(localStorage[key4]);\r\n            buildObj.supporterBuildname = supporterBuildnameObj;\r\n        }\r\n        result.push({ name: buildname, build: buildObj, overwrite: true });\r\n    });\r\n\r\n    characterMaster[''].forEach((obj: { [key: string]: any }) => {\r\n        const myRecommendation = obj;\r\n        for (let i = 1; i <= NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n            const subkey = '' + i;\r\n            if (!(subkey in obj)) {\r\n                obj[subkey] = null;\r\n            }\r\n        }\r\n        const artifactRarerityArrArr = [[5, 5, 5, 5, 5], [4, 4, 5, 5, 5], [4, 4, 4, 5, 4]];\r\n        let artifactRarerity4Num = 0;\r\n        const artifactSet1 = myRecommendation['1'] as TArtifactSetKey;\r\n        const artifactSet2 = myRecommendation['2'] as TArtifactSetKey;\r\n        if (ARTIFACT_SET_MASTER[artifactSet1][''] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        if (ARTIFACT_SET_MASTER[artifactSet2][''] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        for (let i = 0; i < 2; i++) {\r\n            const name = '' + (i + 1);\r\n            if (!(name in myRecommendation)) {\r\n                if (i == 0) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_HP';\r\n                } else if (i == 1) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_';\r\n                }\r\n            }\r\n        }\r\n\r\n        let buildname = myRecommendation[''];\r\n        buildname += ' ';\r\n        if (myRecommendation['1'] == myRecommendation['2']) {\r\n            buildname += myRecommendation['1'];\r\n        } else {\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['1']);\r\n            buildname += '/';\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['2']);\r\n        }\r\n        buildname += ' [';\r\n        for (let i = 3; i <= 5; i++) {\r\n            const statusName = myRecommendation['' + i].split('_')[1];\r\n            if (RECOMMEND_ABBREV_MAP.has(statusName)) {\r\n                buildname += RECOMMEND_ABBREV_MAP.get(statusName);\r\n            } else {\r\n                buildname += statusName.substring(0, 1);\r\n            }\r\n        }\r\n        buildname += ']';\r\n        result.push({ name: buildname, build: myRecommendation, overwrite: false });\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\n/**  */\r\nfunction makeArtifactSetAbbrev(name: string): string {\r\n    const abbrRe = /[\\p{sc=Hiragana}\\p{sc=Katakana}]+/ug;\r\n    let abbr = name.replace(abbrRe, '');\r\n    if (abbr.length > 2) {\r\n        abbr = name.split(abbrRe).sort((a, b) => {\r\n            return b.length - a.length;\r\n        })[0];\r\n    }\r\n    if (abbr.length > 3) {\r\n        abbr = abbr.substring(0, 2);\r\n    }\r\n    return abbr;\r\n}\r\n\r\nexport function makePrioritySubstatValueList(\r\n    prioritySubstats: string[],\r\n    index: number,\r\n    opt_substat?: string\r\n) {\r\n    const result: number[] = [];\r\n    if (prioritySubstats[index]) {\r\n        if (!opt_substat) opt_substat = prioritySubstats[index];\r\n        if (opt_substat && opt_substat in ARTIFACT_SUB_MASTER) {\r\n            const valueArr = ARTIFACT_SUB_MASTER[opt_substat as TArtifactSubKey];\r\n            for (let i = 0; i < valueArr.length; i++) {\r\n                result.push(valueArr[i]);\r\n                if (i < valueArr.length - 1) {\r\n                    const diff = valueArr[i + 1] - valueArr[i];\r\n                    result.push(valueArr[i] + diff / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeEasyInputSubstatValueList(\r\n    substat: TArtifactSubKey\r\n) {\r\n    const result: number[] = [];\r\n    if (substat && substat in ARTIFACT_SUB_MASTER) {\r\n        const valueArr = ARTIFACT_SUB_MASTER[substat];\r\n        for (let i = 0; i < valueArr.length; i++) {\r\n            result.push(valueArr[i]);\r\n            if (i < valueArr.length - 1) {\r\n                const diff = valueArr[i + 1] - valueArr[i];\r\n                result.push(valueArr[i] + diff / 2);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport async function loadRecommendation(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n    build: { [key: string]: any },\r\n    buildname?: string,\r\n) {\r\n    try {\r\n        const character = characterInput.character;\r\n        const characterMaster = await getCharacterMasterDetail(character);\r\n        characterInput.characterMaster = characterMaster;\r\n        const artifactStatsSub = _.cloneDeep(TEMPLATE);\r\n        if (buildname) {\r\n            characterInput.buildname = buildname;\r\n        }\r\n\r\n        if ('' in build) {\r\n            [characterInput., characterInput.] = parseLevelStr(build['']);\r\n        }\r\n        ['', '', '', ''].forEach(key => {\r\n            if (key in build) {\r\n                (characterInput as any)[key] = Number(build[key]);\r\n            }\r\n        });\r\n\r\n        const weaponType = characterMaster[''];\r\n        if ('' in build) {\r\n            if (Object.keys(WEAPON_MASTER[weaponType]).includes(build[''])) {\r\n                let weaponKey = build[''];\r\n                if (weaponKey in WEAPON_MASTER[weaponType]) {\r\n                    characterInput.weapon = weaponKey as TWeaponKey;\r\n                } else if (weaponKey.includes('') && weaponKey.replace('', '') in WEAPON_MASTER[weaponType]) {\r\n                    weaponKey = weaponKey.replace('', '');\r\n                    characterInput.weapon = weaponKey as TWeaponKey;\r\n                } else if (weaponKey.includes('') && weaponKey.replace('', '') in WEAPON_MASTER[weaponType]) {\r\n                    weaponKey = weaponKey.replace('', '');\r\n                    characterInput.weapon = weaponKey as TWeaponKey;\r\n                } else {\r\n                    characterInput.weapon = Object.keys(WEAPON_MASTER[weaponType]).filter(s => s.startsWith(''))[0] as TWeaponKey;\r\n                }\r\n            } else {\r\n                characterInput.weapon = Object.keys(WEAPON_MASTER[weaponType]).filter(s => s.startsWith(''))[0] as TWeaponKey;\r\n            }\r\n            characterInput.weaponMaster = await getWeaponMasterDetail(characterInput.weapon, weaponType);\r\n        }\r\n        if ('' in build) {\r\n            [characterInput., characterInput.] = parseLevelStr(build['']);\r\n        }\r\n        if ('' in build) {\r\n            characterInput. = Number(build['']);\r\n        }\r\n\r\n        let prioritySubstatsDisabled = false;\r\n        for (const key of Object.keys(build).filter((s: string) => s.startsWith(''))) {\r\n            let toKey = key.replace(/^/, '');\r\n            if (toKey != 'HP') toKey = toKey.replace(/P$/, '%');\r\n            if (build[key] || build[key] == 0) {\r\n                prioritySubstatsDisabled = true;\r\n                (artifactStatsSub as any)[toKey] = Number(build[key]);\r\n            }\r\n        }\r\n        artifactDetailInput.Disabled = prioritySubstatsDisabled;\r\n\r\n        const newArtifactSets: TArtifactSetKey[] = [];\r\n        const newArtifactSetMasters: TArtifactSetEntry[] = [];\r\n        ['1', '2'].forEach((key) => {\r\n            const artifactSet: TArtifactSetKey = build[key] ?? 'NONE';\r\n            newArtifactSets.push(artifactSet);\r\n            newArtifactSetMasters.push(ARTIFACT_SET_MASTER[artifactSet] as TArtifactSetEntry);\r\n        });\r\n        characterInput.artifactSets.splice(0, characterInput.artifactSets.length, ...newArtifactSets);\r\n        characterInput.artifactSetMasters.splice(0, characterInput.artifactSetMasters.length, ...newArtifactSetMasters);\r\n\r\n        const newArtifactStatsMain: string[] = [];\r\n        ['1', '2'].forEach((key, index) => {\r\n            const value = build[key];\r\n            newArtifactStatsMain.push(value ?? ['5_HP', '5_'][index]);\r\n            if (key in build) {\r\n                artifactDetailInput[''][index] = build[key];\r\n            } else {\r\n                artifactDetailInput[''][index] = ['5_HP', '5_'][index];\r\n            }\r\n        });\r\n        ['3', '4', '5'].forEach((key) => {\r\n            const value = build[key];\r\n            newArtifactStatsMain.push(value ?? '');\r\n        });\r\n        artifactDetailInput[''].splice(0, artifactDetailInput[''].length, ...newArtifactStatsMain);\r\n\r\n        const newPriotitySubstat: string[] = [];\r\n        const newPriotitySubstatValue: number[] = [];\r\n        const newPriotitySubstatCount: number[] = [];\r\n        for (let i = 0; i < artifactDetailInput[''].length; i++) {\r\n            const subkey1 = '' + (i + 1);\r\n            const subkey2 = subkey1 + '';\r\n            const subkey3 = subkey1 + '';\r\n            const substat = build[subkey1];\r\n            const substatValue = build[subkey2];\r\n            const substatCount = build[subkey3];\r\n            newPriotitySubstat.push(substat ?? '');\r\n            newPriotitySubstatValue.push(substatValue !== undefined ? Number(substatValue) : GENSEN_MASTER_LIST[2].values[i]);\r\n            newPriotitySubstatCount.push(substatCount !== undefined ? Number(substatCount) : GENSEN_MASTER_LIST[2].counts[i]);\r\n        }\r\n        artifactDetailInput[''].splice(0, artifactDetailInput[''].length, ...newPriotitySubstat);\r\n        artifactDetailInput[''].splice(0, artifactDetailInput[''].length, ...newPriotitySubstatValue);\r\n        artifactDetailInput[''].splice(0, artifactDetailInput[''].length, ...newPriotitySubstatCount);\r\n\r\n        Object.keys(build).filter(s => !PROPERTY_MAP.has(s) && !['options', 'artifactScoring', 'supporterBuildname', 'artifact_list'].includes(s)).forEach(key => {\r\n            if (build[key] === null) {\r\n                conditionInput.conditionValues[key] = build[key];   // null\r\n            } else if (_.isString(build[key])) {\r\n                conditionInput.conditionValues[key] = Number(build[key]);\r\n            } else {\r\n                conditionInput.conditionValues[key] = build[key];\r\n            }\r\n        });\r\n\r\n        if ('options' in build) {\r\n            overwriteObject(optionInput.elementalResonance.conditionValues, {});\r\n            overwriteObject(optionInput.teamOption.conditionValues, {});\r\n            overwriteObject(optionInput.miscOption.conditionValues, {});\r\n            optionInput.teamMembers.splice(0, optionInput.teamMembers.length);\r\n            const keys = Object.keys(build.options);\r\n            if (keys.length) {\r\n                keys.forEach(key => {\r\n                    if (key === 'teamMembers' && _.isArray(build.options[key])) {\r\n                        optionInput.teamMembers.splice(0, optionInput.teamMembers.length, ...build.options[key]);\r\n                    } else if (key in ELEMENTAL_RESONANCE_MASTER || key === 'dendroOption') {\r\n                        // \r\n                        optionInput.elementalResonance.conditionValues[key] = build.options[key];\r\n                    } else {\r\n                        const astarIndex = key.indexOf('*');\r\n                        if (astarIndex != -1) {\r\n                            const workCharacter = key.substring(0, astarIndex);\r\n                            if (workCharacter in CHARACTER_MASTER) {\r\n                                // \r\n                                optionInput.teamOption.conditionValues[key] = build.options[key];\r\n                            } else {\r\n                                // \r\n                                optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                            }\r\n                        } else {\r\n                            // \r\n                            optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        if ('supporterBuildname' in build) {\r\n            const keys = Object.keys(build.supporterBuildname);\r\n            if (keys.length) {\r\n                overwriteObject(optionInput.supporterBuildname, {});\r\n                keys.forEach(key => {\r\n                    optionInput.supporterBuildname[key] = build.supporterBuildname[key];\r\n                });\r\n            }\r\n        }\r\n\r\n        if ('artifact_list' in build) {\r\n            const ARTIFACT_KEYS = Object.keys(ARTIFACT_TEMPLATE).sort();\r\n            const newList = build.artifact_list.filter((s: any) => _.isEqual(Object.keys(s).sort(), ARTIFACT_KEYS));\r\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length, ...newList);\r\n        } else {\r\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length);\r\n        }\r\n\r\n        overwriteObject(artifactDetailInput., artifactStatsSub);\r\n\r\n        console.debug('loadRecommendation', characterInput, artifactDetailInput, conditionInput, build);\r\n    }\r\n    catch (error) {\r\n        console.error(characterInput, artifactDetailInput, conditionInput, build);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeSavedata(characterInput: TCharacterInput, artifactDetailInput: TArtifactDetailInput, conditionInput: TConditionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // \r\n    resultObj[''] = characterInput.character;\r\n    // \r\n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.weapon;\r\n    // \r\n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // 1\r\n    resultObj['1'] = characterInput.artifactSets[0];\r\n    // 2\r\n    resultObj['2'] = characterInput.artifactSets[1];\r\n    // 1\r\n    resultObj['1'] = artifactDetailInput.[0];\r\n    // 2\r\n    resultObj['2'] = artifactDetailInput.[1];\r\n    // 3\r\n    resultObj['3'] = artifactDetailInput.[2];\r\n    // 4\r\n    resultObj['4'] = artifactDetailInput.[3];\r\n    // 5\r\n    resultObj['5'] = artifactDetailInput.[4];\r\n    // HP\r\n    resultObj['HP'] = artifactDetailInput.['HP'];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // HPP\r\n    resultObj['HPP'] = artifactDetailInput.['HP%'];\r\n    // P\r\n    resultObj['P'] = artifactDetailInput.['%'];\r\n    // P\r\n    resultObj['P'] = artifactDetailInput.['%'];\r\n    // *,  *, *\r\n    for (let i = 0; i < artifactDetailInput..length; i++) {\r\n        const substat = artifactDetailInput.[i];\r\n        if (substat) {\r\n            const key = '' + (i + 1);\r\n            resultObj[key] = substat;\r\n            resultObj[key + ''] = artifactDetailInput.[i];\r\n            resultObj[key + ''] = artifactDetailInput.[i];\r\n        }\r\n    }\r\n\r\n    for (const entry of conditionInput.checkboxList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n    for (const entry of conditionInput.selectList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n\r\n    resultObj['artifact_list'] = artifactDetailInput.artifact_list;\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeOptionsSavedata(character: string, optionInput: TOptionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // \r\n    {\r\n        const conditionValues = optionInput.elementalResonance.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n    // \r\n    {\r\n        const conditionValues = optionInput.teamOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (key.startsWith(character + '*')) return;\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        });\r\n        if (optionInput.teamMembers.length) {\r\n            resultObj['teamMembers'] = optionInput.teamMembers;\r\n        }\r\n    }\r\n    // \r\n    {\r\n        const conditionValues = optionInput.miscOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeSupporterBuildnameSavedata(buildnameSelection: TAnyObject, optionInput: TOptionInput) {\r\n    const result: TAnyObject = {};\r\n    const conditionKeys = Object.keys(optionInput.teamOption.conditionValues);\r\n    for (const supporter of Object.keys(buildnameSelection)) {\r\n        if (!buildnameSelection[supporter]) continue;\r\n        if (conditionKeys.filter(s => s.startsWith(supporter + '*')).length == 0) continue;\r\n        result[supporter] = buildnameSelection[supporter];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjCharacter(characterInput: TCharacterInput): TDamageDetail {\r\n    const result = {} as any;\r\n    try {\r\n        const characterMaster = characterInput.characterMaster as any;\r\n\r\n        let myTalentDetail;\r\n        const myTalentLevelArr = [characterInput[''], characterInput[''], characterInput['']];\r\n        let myDefaultKind: string | null;\r\n        let myDefaultElement: string | null;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n\r\n        //   \r\n        myDefaultElement = characterMaster[''] === '' ? characterMaster[''] : null;\r\n        ['', '', ''].forEach(category => {\r\n            myTalentDetail = characterMaster[category];\r\n            myDefaultKind = category + '';\r\n            result[category] = makeDamageDetailObjArr(myTalentDetail, myTalentLevelArr, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        });\r\n\r\n        ['', '', ''].forEach(category => {\r\n            const workCategory = '' + category;\r\n            let workTalentLevelArr = myTalentLevelArr;\r\n            if (workCategory in characterMaster) {\r\n                myTalentDetail = characterMaster[workCategory];\r\n                if ('' in myTalentDetail) {\r\n                    myDefaultKind = myTalentDetail[''];\r\n                    let myLevel;\r\n                    switch (myDefaultKind) {\r\n                        case '':\r\n                        case '':\r\n                        case '':\r\n                            myLevel = myTalentLevelArr[0];\r\n                            workTalentLevelArr = [myLevel, myLevel, myLevel];\r\n                            break;\r\n                        case '':\r\n                            myLevel = myTalentLevelArr[1];\r\n                            workTalentLevelArr = [myLevel, myLevel, myLevel];\r\n                            break;\r\n                        case '':\r\n                            myLevel = myTalentLevelArr[2];\r\n                            workTalentLevelArr = [myLevel, myLevel, myLevel];\r\n                            break;\r\n                    }\r\n                }\r\n                if ('' in myTalentDetail) {\r\n                    myDefaultElement = myTalentDetail[''];\r\n                }\r\n                const workObj = {\r\n                    : myTalentDetail[''],\r\n                    : makeDamageDetailObjArr(myTalentDetail, workTalentLevelArr, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory)\r\n                };\r\n                result[workCategory] = workObj;\r\n            }\r\n        });\r\n\r\n        // \r\n        myDefaultKind = '';\r\n        myDefaultElement = characterMaster[''];\r\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevelArr, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        // \r\n        myDefaultKind = '';\r\n        myDefaultElement = characterMaster[''];\r\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevelArr, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        result[''] = [] as TDamageDetailObj[];\r\n\r\n        // \r\n        if ('' in characterMaster) {\r\n            characterMaster[''].forEach((myTalentDetail: any) => {\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result[''].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // \r\n        characterMaster[''].forEach((myTalentDetail: any) => {\r\n            const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n            if (workArr.length > 0) result[''].push(...workArr);\r\n        });\r\n\r\n        // \r\n        if ('' in characterMaster) {\r\n            Object.keys(characterMaster['']).forEach(key => {\r\n                if (Number(key) > characterInput.) return;\r\n                myTalentDetail = characterMaster[''][key];\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result[''].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // \r\n        if (characterMaster[''] == '') {\r\n            if (myTalentChangeDetailObjArr.filter(s => s. && s..startsWith('@')).length == 0) {\r\n                ['', '', '', ''].forEach(cond => {\r\n                    myTalentChangeDetailObjArr.push({\r\n                        : null,\r\n                        : '',\r\n                        : null,\r\n                        : null,\r\n                        : '@' + cond,\r\n                        : null,\r\n                        : null,\r\n                        : null,\r\n                        HIT: null,\r\n                        : null,\r\n                        : null,\r\n                        : null,\r\n                        : null\r\n                    });\r\n                });\r\n            }\r\n            if ('' in characterMaster) {\r\n                if (Object.keys(characterMaster['']).filter(s => s == '').length == 0) {\r\n                    characterMaster[''][''] = 1;\r\n                }\r\n            } else {\r\n                characterMaster[''] = { : 1 };\r\n            }\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        // conditionMap.delete('');\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyCharacter = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjWeapon(characterInput: any) {\r\n    const result = {} as any;\r\n    try {\r\n        const name = characterInput.weapon;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n        if (!name || !weaponMaster) return result;\r\n\r\n        let myTalentDetail;\r\n        const myLevel = characterInput.;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        if ('' in weaponMaster) {\r\n            myTalentDetail = weaponMaster[''];\r\n            result[''] = makeDamageDetailObjArr(myTalentDetail, myLevel, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            let condition = detailObj[''];\r\n            if (_.isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            let condition = detailObj[''];\r\n            if (_.isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyWeapon = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjArtifactSets(characterInput: any) {\r\n    const result = [] as any;\r\n    try {\r\n        let myTalentDetail;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        const artifactSetMasters = characterInput.artifactSetMasters.filter((s: any) => s);\r\n\r\n        if (artifactSetMasters.length > 0) {\r\n            const damageDetailObjArr = [] as TDamageDetailObj[];\r\n            if ('2' in artifactSetMasters[0]) {\r\n                myTalentDetail = artifactSetMasters[0]['2'];\r\n                damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n            }\r\n            if (artifactSetMasters.length == 2) {\r\n                if (artifactSetMasters[0] == artifactSetMasters[1]) {\r\n                    myTalentDetail = artifactSetMasters[0]['4'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                } else {\r\n                    myTalentDetail = artifactSetMasters[1]['2'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                }\r\n            }\r\n            result[''] = damageDetailObjArr;\r\n        }\r\n\r\n        const vision = characterInput.characterMaster.;\r\n        const elementalReactionArr = Object.keys((ELEMENTAL_REACTION_MASTER as any)[vision]);\r\n        if (['', ''].includes(vision) && !elementalReactionArr.includes('')) {\r\n            elementalReactionArr.push('');\r\n        }\r\n\r\n        const workArr = [] as any[];\r\n        myStatusChangeDetailObjArr.forEach(detailObj => {\r\n            if (detailObj[''] && detailObj[''].startsWith('')) { // for \r\n                if (elementalReactionArr.filter(s => detailObj[''].startsWith('=' + s)).length === 0) {\r\n                    return;\r\n                }\r\n            }\r\n            workArr.push(detailObj);\r\n        });\r\n\r\n        result[CHANGE_KIND_STATUS] = workArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        workArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyArtifactSets = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjElementalResonance(characterInput: any) {\r\n    const result = [] as any;\r\n    try {\r\n        const myInputCategory = '';\r\n        const damageDetailObjArr = [] as TDamageDetailObj[];\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n        for (const myTalentDetail of ELEMENTAL_RESONANCE_MASTER_LIST) {\r\n            const workObj = _.cloneDeep(myTalentDetail);\r\n            if (workObj.) {\r\n                workObj..forEach((detailObj: TAnyObject) => {\r\n                    detailObj. = myTalentDetail.key;\r\n                });\r\n            }\r\n            damageDetailObjArr.push(...makeDamageDetailObjArr(workObj, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n        }\r\n        result[''] = damageDetailObjArr;\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailElementalResonance = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDetailObj(\r\n    detailObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    inputCategory: string | null,\r\n    opt_condition?: string,\r\n): TDamageDetailObj {\r\n    let my = detailObj. ?? defaultKind;\r\n    let my = detailObj. ?? null;\r\n    if (my && my.indexOf('.') !== -1) {\r\n        my = my.substring(my.indexOf('.') + 1);\r\n        my = my.substring(0, my.indexOf('.'));\r\n    }\r\n\r\n    let my = detailObj. ?? 0;\r\n    if (_.isPlainObject(my)) {  // |\r\n        if (level && level in my) {\r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = 0;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    let my = detailObj. ?? opt_condition ?? null;\r\n    if (_.isPlainObject(my) && level && level in my) {  // \r\n        my = my[level];\r\n    }\r\n\r\n    let my = detailObj. ?? null;\r\n    if (_.isPlainObject(my)) {\r\n        if (level && level in my) { // for \r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = null;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    let my = detailObj. ?? null; // for \r\n    if (_.isPlainObject(my)) {\r\n        if (level && level in my) {\r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = null;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    return {\r\n        : detailObj. ?? null,\r\n        : my,\r\n        : detailObj. ?? defaultElement ?? null,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        HIT: detailObj.HIT ?? null,\r\n        : detailObj. ?? null,\r\n        : detailObj. ?? inputCategory === '',\r\n        : detailObj. ?? null,\r\n        : detailObj. ?? null,\r\n    }\r\n}\r\n\r\nexport function getChangeKind(kind: string) {\r\n    if (kind in TEMPLATE\r\n        || new RegExp('[].+(|)').exec(kind)\r\n        || [''].includes(kind)  // for \r\n        || new RegExp('?[]').exec(kind)\r\n        || ['', ''].includes(kind)\r\n        || [''].includes(kind)\r\n        || ['', ''].includes(kind)\r\n        || ['', '', '', ''].includes(kind)\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n    ) {\r\n        return 'STATUS';\r\n    } else if (kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind == ''\r\n        || kind == ''\r\n    ) {   // ex.,\r\n        return 'TALENT';\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function makeDamageDetailObjArr(\r\n    talentDataObj: any,\r\n    level: number[] | number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    statusChangeDetailObjArr: any[],\r\n    talentChangeDetailObjArr: any[],\r\n    inputCategory: string,\r\n    opt_condition?: string,\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as any[];\r\n    if (!('' in talentDataObj)) return resultArr;\r\n\r\n    talentDataObj[''].forEach((detailObj: TAnyObject) => {\r\n        let myLevel = null;\r\n        if (level == null) {\r\n            myLevel = null;\r\n        } else if (_.isArray(level)) {\r\n            switch (defaultKind) {\r\n                case '':\r\n                case '':\r\n                case '':\r\n                    myLevel = level[0];\r\n                    break;\r\n                case '':\r\n                    myLevel = level[1];\r\n                    break;\r\n                case '':\r\n                    myLevel = level[2];\r\n                    break;\r\n            }\r\n            if (detailObj.) {\r\n                let isChanged = false;\r\n                switch (detailObj.) {\r\n                    case '':\r\n                    case '':\r\n                    case '':\r\n                        myLevel = level[0];\r\n                        isChanged = true;\r\n                        break;\r\n                    case '':\r\n                        myLevel = level[1];\r\n                        isChanged = true;\r\n                        break;\r\n                    case '':\r\n                        myLevel = level[2];\r\n                        isChanged = true;\r\n                        break;\r\n                }\r\n                if (isChanged) {\r\n                    console.info('makeDamageDetailObjArr', detailObj., myLevel, defaultKind, detailObj);\r\n                }\r\n            }\r\n        } else {\r\n            myLevel = level;\r\n        }\r\n        const resultObj = makeDetailObj(detailObj, myLevel, defaultKind, defaultElement, inputCategory, opt_condition);\r\n        const my = resultObj. as string;\r\n        if (statusChangeDetailObjArr != null && getChangeKind(my) === 'STATUS') {\r\n            resultObj[''] = detailObj. ?? null;\r\n            statusChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        if (talentChangeDetailObjArr != null && getChangeKind(my) === 'TALENT') {\r\n            resultObj[''] = detailObj. ?? null;\r\n            talentChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        resultArr.push(resultObj);\r\n    });\r\n\r\n    return resultArr;\r\n}\r\n\r\nexport function makeTeamOptionDetailObjArr(\r\n    detailObjArr: any[],\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as TDamageDetailObj[];\r\n    detailObjArr.forEach((detailObj: { [x: string]: any; }) => {\r\n        const resultObj = makeDetailObj(detailObj, null, null, null, null);\r\n        if (resultObj) {\r\n            resultArr.push(resultObj);\r\n        }\r\n    });\r\n    return resultArr;\r\n}\r\n\r\n// \r\n// @prefixpostfix\r\n// @prefix(From)-(To)postfix\r\n// @prefix1,2,3postfix\r\n// =prefixpostfix\r\n// @\r\n// =\r\n// ={min=|,max=|,step=}\r\n// OR   A|B\r\n// AND  A&B\r\n//  A^B\r\nexport function makeConditionExclusionMapFromStr(\r\n    conditionStr: string,\r\n    conditionMap: Map<string, string[] | object | null>,\r\n    exclusionMap: Map<string, string[]>\r\n) {\r\n    // \r\n    let exclusionStr: string | undefined = undefined;\r\n    const workArr = conditionStr.split('^');\r\n    if (workArr.length > 1) {\r\n        exclusionStr = workArr[1];\r\n    }\r\n    const workStr = workArr[0];\r\n    if (workStr.includes('|')) {\r\n        // OR for \r\n        const conditionStrArr = workStr.split('|');\r\n        conditionStrArr.forEach((elem) => {\r\n            makeConditionExclusionMapFromStrSub(elem, conditionMap, exclusionMap, exclusionStr);\r\n        })\r\n    } else {\r\n        // AND\r\n        const conditionStrArr = workStr.split('&');\r\n        conditionStrArr.forEach((elem) => {\r\n            makeConditionExclusionMapFromStrSub(elem, conditionMap, exclusionMap, exclusionStr);\r\n        })\r\n    }\r\n}\r\n\r\nexport function getConditionOpkind(conditionStr: string) {\r\n    let opkind = undefined;\r\n    if (conditionStr.includes('@')) {   // \r\n        opkind = '@';\r\n    } else if (conditionStr.includes('>=')) {   //  \r\n        opkind = '>=';\r\n    } else if (conditionStr.includes('<=')) {   //  \r\n        opkind = '<=';\r\n    } else if (conditionStr.includes('>')) {    //  \r\n        opkind = '>';\r\n    } else if (conditionStr.includes('<')) {    //  \r\n        opkind = '<';\r\n    } else if (conditionStr.includes('=')) {    // \r\n        opkind = '=';\r\n    }\r\n    return opkind;\r\n}\r\n\r\nexport const NUMBER_CONDITION_VALUE_RE = /^\\s*{.+}\\s*$/;\r\n\r\nfunction makeConditionExclusionMapFromStrSub(\r\n    conditionStr: string,\r\n    conditionMap: Map<string, string[] | object | null>,\r\n    exclusionMap: Map<string, string[]>,\r\n    exclusion?: string,\r\n) {\r\n    const opkind = getConditionOpkind(conditionStr);\r\n    const workArr = opkind ? conditionStr.split(opkind) : [conditionStr];\r\n    const name = workArr[0];\r\n    if (opkind === undefined) {\r\n        pushToMapValueArray(conditionMap, name, null);  // null\r\n    } else if (opkind === '@' || opkind === '=') {\r\n        if (workArr.length === 2) {\r\n            if (NUMBER_CONDITION_VALUE_RE.test(workArr[1])) {\r\n                try {\r\n                    const workObj = JSON.parse(workArr[1]);\r\n                    const min = workObj.min;\r\n                    const max = workObj.max;\r\n                    if (!_.isNumber(min) && !_.isString(min)) {\r\n                        console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                    } if (max !== undefined && !_.isNumber(max) && !_.isString(max)) {\r\n                        console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                    } else {\r\n                        const conditionObj = {\r\n                            min: min,\r\n                            max: max,\r\n                            step: isNumeric(workObj.step) ? Number(workObj.step) : 1,\r\n                            initial: isNumeric(workObj.initial) ? Number(workObj.initial) : min,\r\n                        };\r\n                        pushToMapValueArray(conditionMap, name, conditionObj);  // object\r\n                    }\r\n                } catch (error) {\r\n                    console.error(error);\r\n                    console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                }\r\n            } else if (workArr[1].includes(',')) {\r\n                const re = new RegExp('([^0-9]*?)([\\\\+\\\\-0-9\\\\.,]+)(.*)');  // :-10,+60%\r\n                const reRet = re.exec(workArr[1]);\r\n                if (reRet) {\r\n                    const prefix = reRet[1];\r\n                    const condValueArr = reRet[2].split(',');\r\n                    const postfix = reRet[3];\r\n                    condValueArr.forEach(value => {\r\n                        pushToMapValueArray(conditionMap, name, prefix + value + postfix);  // string[]\r\n                    })\r\n                }\r\n            } else if (workArr[1].includes('-')) {\r\n                const re = new RegExp('([^0-9\\\\.]*)(-?[0-9\\\\.]+)-(-?[0-9\\\\.]+)(.*)');   // +prefix\r\n                const re2 = new RegExp('/([0-9\\\\.]+)(.*)');\r\n                const reRet = re.exec(workArr[1]);\r\n                if (reRet) {\r\n                    const prefix = reRet[1];\r\n                    const rangeStart = Number(reRet[2]);\r\n                    const rangeEnd = Number(reRet[3]);\r\n                    let step = rangeStart;\r\n                    let postfix = reRet[4];\r\n                    if (postfix) {\r\n                        const re2Ret = re2.exec(postfix);\r\n                        if (re2Ret) {\r\n                            step = Number(re2Ret[1]);\r\n                            postfix = re2Ret[2];\r\n                        }\r\n                    }\r\n                    step = step ? step : 1;\r\n                    for (let i = rangeStart; i < rangeEnd; i = addDecimal(i, step, rangeEnd)) {\r\n                        pushToMapValueArray(conditionMap, name, prefix + String(i) + postfix);  // string[]\r\n                    }\r\n                    pushToMapValueArray(conditionMap, name, prefix + String(rangeEnd) + postfix);  // string[]\r\n                } else {\r\n                    pushToMapValueArray(conditionMap, name, workArr[1]);  // string[]\r\n                }\r\n            } else {\r\n                pushToMapValueArray(conditionMap, name, workArr[1]);  // string[]\r\n            }\r\n        } else {\r\n            console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n        }\r\n    }\r\n    if (exclusion) {\r\n        exclusion.split(',').forEach(e => {\r\n            pushToMapValueArray(exclusionMap, name, e);  // string[]\r\n        })\r\n    }\r\n}\r\n\r\nexport function setupConditionValues(\r\n    conditionInput: TConditionInput,\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    try {\r\n        const workConditionValues = _.cloneDeep(conditionInput.conditionValues);\r\n        const workCheckboxList: TCheckboxEntry[] = [];\r\n        const workSelectList: TSelectEntry[] = [];\r\n        const workNumberList: TNumberEntry[] = [];\r\n\r\n        // \r\n        for (const master of [characterInput.characterMaster, characterInput.weaponMaster, ...characterInput.artifactSetMasters]) {\r\n            if ('' in master) {\r\n                for (const key of Object.keys((master as any)[''])) {\r\n                    if (!(key in workConditionValues)) {\r\n                        workConditionValues[key] = (master as any)[''][key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const conditionMap = makeConditionMapFromCharacterInput(characterInput);\r\n        const exclusionMap = makeExclusionMapFromCharacterInput(characterInput);\r\n\r\n        if (optionInput.elementalResonance) {\r\n            for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\r\n                if (!optionInput.elementalResonance.conditionValues[key]) continue;\r\n                const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\r\n                if (!master.) continue;\r\n                for (const detailObj of master.) {\r\n                    if (!detailObj.) continue;\r\n                    makeConditionExclusionMapFromStr(detailObj., conditionMap, exclusionMap);\r\n                }\r\n            }\r\n        }\r\n\r\n        conditionMap.forEach((value, key) => {\r\n            if (value === null) {\r\n                if (workCheckboxList.filter(s => s.name == key).length === 0) {\r\n                    workCheckboxList.push({ name: key });\r\n                }\r\n            } else if (_.isArray(value)) {\r\n                if (workSelectList.filter(s => s.name == key).length === 0) {\r\n                    const required = value[0].startsWith('required_');\r\n                    workSelectList.push({\r\n                        name: key,\r\n                        options: value,\r\n                        required: required,\r\n                    });\r\n                }\r\n            } else if (_.isPlainObject(value)) {\r\n                if (workNumberList.filter(s => s.name == key).length === 0) {\r\n                    const numberObj = value as any;\r\n                    const entry = {\r\n                        name: key,\r\n                        min: numberObj.min,\r\n                        max: numberObj.max,\r\n                        step: numberObj.step,\r\n                        initial: numberObj.initial,\r\n                    };\r\n                    workNumberList.push(entry);\r\n                }\r\n            }\r\n            if (key in workConditionValues && workConditionValues[key] !== null) {\r\n                const conditionValue = workConditionValues[key]; // boolean:checkbox / number:select,input[number]\r\n                if ((_.isBoolean(conditionValue) && conditionValue) || (_.isNumber(conditionValue) && conditionValue > 0)) {\r\n                    const exclusions = exclusionMap.get(key);\r\n                    if (exclusions) {\r\n                        for (const exclusion of exclusions) {\r\n                            if (exclusion in workConditionValues) {\r\n                                const conditionValue = conditionMap.get(exclusion);\r\n                                if (conditionValue === null) {  // checkbox\r\n                                    workConditionValues[exclusion] = false;\r\n                                } else if (_.isArray(value)) {  // select\r\n                                    workConditionValues[exclusion] = 0;\r\n                                } else if (_.isPlainObject(value)) {    // number\r\n                                    const initialValue = (value as any).initial;\r\n                                    const minValue = (value as any).min;\r\n                                    if (isNumeric(initialValue)) {\r\n                                        workConditionValues[exclusion] = Number(initialValue);\r\n                                    } else if (isNumeric(minValue)) {\r\n                                        workConditionValues[exclusion] = Number(minValue);\r\n                                    } else {\r\n                                        workConditionValues[exclusion] = 0;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (value === null) {   // checkbox\r\n                    let checked = true;\r\n                    const arr = exclusionMap.get(key);\r\n                    if (arr && arr.filter(s => workConditionValues[s]).length > 0) {\r\n                        checked = false;\r\n                    }\r\n                    workConditionValues[key] = checked;\r\n                } else if (_.isArray(value)) {  // select\r\n                    let selectedIndex = value.length - 1;\r\n                    const arr = exclusionMap.get(key);\r\n                    if (arr && arr.filter(s => workConditionValues[s]).length > 0) {\r\n                        selectedIndex = 0;\r\n                    }\r\n                    workConditionValues[key] = selectedIndex;\r\n                } else if (_.isPlainObject(value)) {    // number\r\n                    const initialValue = (value as any).initial;\r\n                    const minValue = (value as any).min;\r\n                    if (isNumeric(initialValue)) {\r\n                        workConditionValues[key] = Number(initialValue);\r\n                    } else if (isNumeric(minValue)) {\r\n                        workConditionValues[key] = Number(minValue);\r\n                    } else {\r\n                        workConditionValues[key] = 0;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        if (!_.isEqual(conditionInput.conditionValues, workConditionValues)) {\r\n            overwriteObject(conditionInput.conditionValues, workConditionValues);\r\n        }\r\n        if (!_.isEqual(conditionInput.checkboxList, workCheckboxList)) {\r\n            conditionInput.checkboxList.splice(0, conditionInput.checkboxList.length, ...workCheckboxList);\r\n        }\r\n        if (!_.isEqual(conditionInput.selectList, workSelectList)) {\r\n            conditionInput.selectList.splice(0, conditionInput.selectList.length, ...workSelectList);\r\n        }\r\n        if (!_.isEqual(conditionInput.numberList, workNumberList)) {\r\n            conditionInput.numberList.splice(0, conditionInput.numberList.length, ...workNumberList);\r\n        }\r\n    } catch (error) {\r\n        console.error(conditionInput, characterInput, optionInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeConditionMapFromCharacterInput(characterInput: TCharacterInput) {\r\n    const result = new Map() as Map<string, any[] | null | object>;\r\n    [\r\n        characterInput.damageDetailMyCharacter,\r\n        characterInput.damageDetailMyWeapon,\r\n        characterInput.damageDetailMyArtifactSets,\r\n    ].forEach((damageDetail) => {\r\n        if (damageDetail && damageDetail.) {\r\n            damageDetail..forEach((value, key) => {\r\n                result.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport function makeExclusionMapFromCharacterInput(characterInput: TCharacterInput) {\r\n    const result = new Map() as Map<string, string[]>;\r\n    [\r\n        characterInput.damageDetailMyCharacter,\r\n        characterInput.damageDetailMyWeapon,\r\n        characterInput.damageDetailMyArtifactSets,\r\n    ].forEach((damageDetail) => {\r\n        if (damageDetail && damageDetail.) {\r\n            damageDetail..forEach((value, key) => {\r\n                result.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport function getStatValue(stat: string, statsObj: TStats) {\r\n    let result;\r\n    if (stat in statsObj) {\r\n        result = statsObj[stat];\r\n    } else {\r\n        const re = /(.+)X([0-7])$/;\r\n        const reRet = re.exec(stat);\r\n        if (reRet) {\r\n            if (reRet[1] in statsObj) {\r\n                result = statsObj[reRet[1]];\r\n                let n = Number(reRet[2]);\r\n                for (let i = 1; i <= 3; i++) {\r\n                    if ((n % 2) == 1) {\r\n                        const vStat: string = reRet[1] + 'V' + i;\r\n                        if (vStat in statsObj) {\r\n                            result -= statsObj[vStat];\r\n                        }\r\n                    }\r\n                    n = Math.trunc(n / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (result === undefined) {\r\n        console.warn(stat, statsObj); // \r\n        result = 0; // fixed\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function updateNumberConditionValues(\r\n    conditionInput: TConditionInput,\r\n    characterInput: TCharacterInput,\r\n    statsObj: TStats,\r\n) {\r\n    const conditionMap = makeConditionMapFromCharacterInput(characterInput);\r\n    conditionMap.forEach((value, key) => {\r\n        if (_.isPlainObject(value)) {\r\n            const numberEntryArr = conditionInput.numberList.filter(s => s.name == key);\r\n            if (numberEntryArr.length > 0) {\r\n                let minValue = (value as any).min;\r\n                let maxValue = (value as any).max;\r\n                if (_.isString(minValue) || _.isString(maxValue)) {\r\n                    if (_.isString(minValue)) {\r\n                        minValue = getStatValue(minValue, statsObj);\r\n                    }\r\n                    if (_.isString(maxValue)) {\r\n                        maxValue = getStatValue(maxValue, statsObj);\r\n                    }\r\n                    numberEntryArr[0].min = minValue;\r\n                    numberEntryArr[0].max = maxValue;\r\n                    if (key in conditionInput.conditionValues) {\r\n                        const value = conditionInput.conditionValues[key];\r\n                        if (_.isNumber(value)) {\r\n                            if (value < minValue) {\r\n                                conditionInput.conditionValues[key] = minValue;\r\n                            } else if (maxValue !== undefined && value > maxValue) {\r\n                                conditionInput.conditionValues[key] = maxValue;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction pushToMapValueArray(map: Map<any, any>, key: any, value: any) {\r\n    if (value === null) {    // checkbox\r\n        if (!map.has(key)) {\r\n            map.set(key, null);\r\n        }\r\n    } else if (_.isString(value)) { // select\r\n        if (map.has(key)) {\r\n            const oldValue = map.get(key);\r\n            if (oldValue === null) {\r\n                map.set(key, [value]);\r\n            } else if (_.isArray(oldValue)) {\r\n                if (!oldValue.includes(value)) {\r\n                    map.get(key).push(value);\r\n                }\r\n            } else {\r\n                console.error(map, key, value);\r\n            }\r\n        } else {\r\n            map.set(key, [value]);\r\n        }\r\n    } else if (_.isPlainObject(value)) {    // number\r\n        map.set(key, value);\r\n    }\r\n}\r\n\r\nfunction getDecimalLength(value: number): number {\r\n    const arr = ('' + value).split('.');\r\n    return arr.length > 1 ? arr[1].length : 0;\r\n}\r\n\r\nexport function multiplyDecimal(value1: number, value2: number): number {\r\n    const decimalLength = getDecimalLength(value1) + getDecimalLength(value2);\r\n    const intValue1 = Number(('' + value1).replace('.', ''));\r\n    const intValue2 = Number(('' + value2).replace('.', ''));\r\n    const result = (intValue1 * intValue2) / Math.pow(10, decimalLength);\r\n    return Number(result);\r\n}\r\n\r\nexport function addDecimal(value1: number, value2: number, opt_max?: number): number {\r\n    const k = Math.pow(10, Math.max(getDecimalLength(value1), getDecimalLength(value2)));\r\n    let result = (multiplyDecimal(value1, k) + multiplyDecimal(value2, k)) / k;\r\n    if (opt_max != undefined) {\r\n        result = Math.min(result, opt_max);\r\n    }\r\n    return result;\r\n}\r\n\r\n// function analyzeFormulaStr(\r\n//     formulaStr: number | string,\r\n//     opt_defaultItem: string | null = null\r\n// ) {\r\n//     const resultArr = [] as any[];\r\n//     const re = new RegExp('([\\\\+\\\\-\\\\*/]?)([^\\\\+\\\\-\\\\*/]+)(.*)');\r\n//     let workStr = String(formulaStr);\r\n//     // eslint-disable-next-line no-constant-condition\r\n//     while (true) {\r\n//         const reRet = re.exec(workStr);\r\n//         if (!reRet) {\r\n//             resultArr.push(workStr);\r\n//             break;\r\n//         }\r\n//         if (reRet[1]) { // + - * /\r\n//             resultArr.push(reRet[1]);\r\n//         }\r\n//         resultArr.push(analyzeFormulaStrSub(reRet[2], opt_defaultItem));\r\n//         if (!reRet[3]) {\r\n//             break;\r\n//         }\r\n//         workStr = reRet[3];\r\n//     }\r\n//     return resultArr;\r\n// }\r\n//\r\n// function analyzeFormulaStrSub(\r\n//     formulaStr: string,\r\n//     opt_defaultItem: string | null = null\r\n// ) {\r\n//     const resultArr = [] as any;\r\n//     if (isNumeric(formulaStr)) {\r\n//         resultArr.push(Number(formulaStr));\r\n//     } else {\r\n//         const strArr = (formulaStr as string).split('%');\r\n//         if (strArr.length == 1) {\r\n//             resultArr.push(strArr[0]);\r\n//         } else {\r\n//             resultArr.push(Number(strArr[0]) / 100);\r\n//             resultArr.push('*');\r\n//             if (strArr[1].length > 0) {\r\n//                 resultArr.push(strArr[1]);\r\n//             } else if (opt_defaultItem != null) {\r\n//                 resultArr.push(opt_defaultItem);\r\n//             }\r\n//         }\r\n//     }\r\n//     return resultArr;\r\n// }\r\n\r\nexport function makeFormulaTemplate(\r\n    formula: number | string | null | undefined,\r\n) {\r\n    let result: string | null = '';\r\n    if (formula === undefined || formula === null) {\r\n        result = null;\r\n    } else if (_.isNumber(formula) || isNumeric(formula)) {\r\n        result = String(formula);\r\n    } else {\r\n        const symbols = \"!\\\"&'()*+,-/:;<=>?@[\\\\]^`|~\";\r\n        const escapedSymbols = symbols.split('').map(s => '\\\\' + s).join('');\r\n        const re = new RegExp('([^' + escapedSymbols + ']+|[' + escapedSymbols + ']+)', 'g');\r\n        let reRet;\r\n        while ((reRet = re.exec(formula)) !== null) {\r\n            let item = reRet[1];\r\n            if (!symbols.includes(item.substring(0, 1))) {\r\n                item = _.trim(item);\r\n                if (isNumeric(item)) {\r\n                    result += item;\r\n                } else if (item.length) {\r\n                    if (item.includes('%')) {   // 123.4% or 12.34%HP %\r\n                        const arr = item.split('%').map(s => _.trim(s));\r\n                        result += arr[0] + '/100*';\r\n                        item = arr[1].length ? arr[1] : '';\r\n                    }\r\n                    result += '${' + item + '}';\r\n                }\r\n            } else {\r\n                result += item;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getMaxConstellation(characterMaster: TCharacterDetail) {\r\n    let max = 0;\r\n    if ('' in characterMaster) {\r\n        max = Object.keys(characterMaster.).length;\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function getMaxTalentLevel(characterMaster: TCharacterDetail, key: string) {\r\n    let max = 10;\r\n    if (key in characterMaster) {\r\n        const talentObj = (characterMaster as any)[key];\r\n        if ('' in talentObj) {\r\n            for (const detailObj of talentObj.) {\r\n                if ('' in detailObj && _.isPlainObject(detailObj.)) {\r\n                    const work = Object.keys(detailObj.).length;\r\n                    if (max < work) max = work;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function setupTeamOption(optionInput: TOptionInput) {\r\n    const optionDetails1: TDamageDetailObj[] = [];\r\n    const optionDetails2: TDamageDetailObj[] = [];\r\n    const conditionMap = new Map<string, string[] | object | null>();\r\n    const exclusionMap = new Map<string, string[]>();\r\n    const checkboxList: TCheckboxEntry[] = [];\r\n    const selectList: TSelectEntry[] = [];\r\n    const numberList: TNumberEntry[] = [];\r\n    Object.keys(optionInput.supporters).forEach(key => {\r\n        const workDetails1 = optionInput.supporters[key]?.optionDetails1;\r\n        const workDetails2 = optionInput.supporters[key]?.optionDetails2;\r\n        const workMap1 = optionInput.supporters[key]?.conditionMap;\r\n        const workMap2 = optionInput.supporters[key]?.exclusionMap;\r\n        if (workDetails1 !== undefined) {\r\n            optionDetails1.push(...workDetails1);\r\n        }\r\n        if (workDetails2 !== undefined) {\r\n            optionDetails2.push(...workDetails2);\r\n        }\r\n        if (workMap1 !== undefined) {\r\n            workMap1.forEach((value, key) => {\r\n                conditionMap.set(key, value);\r\n                if (value === null) { // checkbox\r\n                    if (checkboxList.filter((s) => s.name == key).length === 0) {\r\n                        checkboxList.push({\r\n                            name: key,\r\n                            displayName: key.replace(/^.+\\*/, ''),\r\n                        })\r\n                    }\r\n                } else if (_.isArray(value)) {  // select\r\n                    if (selectList.filter((s) => s.name == key).length === 0) {\r\n                        const required = value[0].startsWith('required_');\r\n                        selectList.push({\r\n                            name: key,\r\n                            displayName: key.replace(/^.+\\*/, ''),\r\n                            options: (required || !value[0]) ? value : ['', ...value],\r\n                            required: required,\r\n                        })\r\n                    }\r\n                } else if (_.isPlainObject(value)) {  // number\r\n                    if (numberList.filter((s) => s.name == key).length === 0) {\r\n                        numberList.push({\r\n                            name: key,\r\n                            displayName: key.replace(/^.+\\*/, ''),\r\n                            min: (value as any).min,\r\n                            max: (value as any).max,\r\n                            step: (value as any).step,\r\n                            initial: (value as any).initial,\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        if (workMap2 !== undefined) {\r\n            workMap2.forEach((value, key) => {\r\n                exclusionMap.set(key, value);\r\n            })\r\n        }\r\n    })\r\n    optionInput.teamOption.optionDetails1.splice(0, optionInput.teamOption.optionDetails1.length, ...optionDetails1);\r\n    optionInput.teamOption.optionDetails2.splice(0, optionInput.teamOption.optionDetails2.length, ...optionDetails2);\r\n    optionInput.teamOption.conditionMap = conditionMap;\r\n    optionInput.teamOption.exclusionMap = exclusionMap;\r\n    optionInput.teamOption.checkboxList.splice(0, optionInput.teamOption.checkboxList.length, ...checkboxList);\r\n    optionInput.teamOption.selectList.splice(0, optionInput.teamOption.selectList.length, ...selectList);\r\n    optionInput.teamOption.numberList.splice(0, optionInput.teamOption.numberList.length, ...numberList);\r\n}\r\n\r\nexport function setupMiscOption(optionInput: TOptionInput) {\r\n    const optionDetails1: TDamageDetailObj[] = [];\r\n    const optionDetails2: TDamageDetailObj[] = [];\r\n    const conditionMap = new Map<string, string[] | object | null>();\r\n    const exclusionMap = new Map<string, string[]>();\r\n    const checkboxList: TCheckboxEntry[] = [];\r\n    const selectList: TSelectEntry[] = [];\r\n    const numberList: TNumberEntry[] = [];\r\n    [OPTION1_MASTER_LIST, OPTION2_MASTER_LIST].forEach(masterList => {\r\n        for (const entry of masterList) {\r\n            if ('' in entry) {\r\n                for (const detailObj of entry.) {\r\n                    if (!('' in detailObj)) {\r\n                        (detailObj as any). = entry.key;\r\n                    }\r\n                }\r\n            }\r\n            makeDamageDetailObjArr(entry, null, null, null, optionDetails1, optionDetails2, '');\r\n        }\r\n    })\r\n    optionDetails1.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    });\r\n    optionDetails2.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    });\r\n    conditionMap.forEach((value, key) => {\r\n        if (value === null) { // checkbox\r\n            if (checkboxList.filter((s) => s.name == key).length === 0) {\r\n                checkboxList.push({\r\n                    name: key,\r\n                    displayName: key.replace(/^.+\\*/, ''),\r\n                })\r\n            }\r\n        } else if (_.isArray(value)) {  // select\r\n            if (selectList.filter((s) => s.name == key).length === 0) {\r\n                const required = value[0].startsWith('required_');\r\n                selectList.push({\r\n                    name: key,\r\n                    displayName: key.replace(/^.+\\*/, ''),\r\n                    options: (required || !value[0]) ? value : ['', ...value],\r\n                    required: required,\r\n                })\r\n            }\r\n        } else if (_.isPlainObject(value)) {  // number\r\n            if (numberList.filter((s) => s.name == key).length === 0) {\r\n                numberList.push({\r\n                    name: key,\r\n                    displayName: key.replace(/^.+\\*/, ''),\r\n                    min: (value as any).min,\r\n                    max: (value as any).max,\r\n                    step: (value as any).step,\r\n                    initial: (value as any).initial,\r\n                })\r\n            }\r\n        }\r\n    });\r\n    optionInput.miscOption.optionDetails1.splice(0, optionInput.miscOption.optionDetails1.length, ...optionDetails1);\r\n    optionInput.miscOption.optionDetails2.splice(0, optionInput.miscOption.optionDetails2.length, ...optionDetails2);\r\n    optionInput.miscOption.conditionMap = conditionMap;\r\n    optionInput.miscOption.exclusionMap = exclusionMap;\r\n    optionInput.miscOption.checkboxList.splice(0, optionInput.miscOption.checkboxList.length, ...checkboxList);\r\n    optionInput.miscOption.selectList.splice(0, optionInput.miscOption.selectList.length, ...selectList);\r\n    optionInput.miscOption.numberList.splice(0, optionInput.miscOption.numberList.length, ...numberList);\r\n}\r\n\r\nexport async function updateConditionsByTeam(\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const character = characterInput.character;\r\n    const teamMembers: string[] = [character];\r\n    if (optionInput?.teamMembers) {\r\n        teamMembers.push(...optionInput.teamMembers.filter(s => s && s != character));\r\n    }\r\n    const myVision = CHARACTER_MASTER[character as TCharacterKey].;\r\n\r\n    // []*, []*\r\n    const regionCountMap = new Map<string, number>();\r\n    // []\r\n    let totalEnergyCost = 0;\r\n    // Map<, >\r\n    const visionCountMap = new Map<string, number>();\r\n    for (const entry of teamMembers) {\r\n        const characterDetail = await getCharacterMasterDetail(entry as TCharacterKey);\r\n        if (characterDetail.region) {\r\n            const count = regionCountMap.get(characterDetail.region);\r\n            if (count) {\r\n                regionCountMap.set(characterDetail.region, count + 1);\r\n            } else {\r\n                regionCountMap.set(characterDetail.region, 1);\r\n            }\r\n        }\r\n        if ('' in characterDetail.) {\r\n            totalEnergyCost += Number(characterDetail..);\r\n        }\r\n        if (characterDetail.) {\r\n            const count = visionCountMap.get(characterDetail.);\r\n            if (count) {\r\n                visionCountMap.set(characterDetail., count + 1);\r\n            } else {\r\n                visionCountMap.set(characterDetail., 1);\r\n            }\r\n        }\r\n    }\r\n    regionCountMap.forEach((value, key) => {\r\n        conditionInput.conditionValues['[]' + key + ''] = value;\r\n        conditionInput.conditionValues['[]' + key + ''] = teamMembers.length - value;\r\n    })\r\n    if (totalEnergyCost) {\r\n        conditionInput.conditionValues['[]'] = totalEnergyCost;\r\n    }\r\n    ALL_ELEMENTS.forEach(key => {\r\n        conditionInput.conditionValues['[]' + key + ''] = 0;\r\n        conditionInput.conditionValues['[]' + key + ''] = 0;\r\n    })\r\n    visionCountMap.forEach((value, key) => {\r\n        conditionInput.conditionValues['[]' + key + ''] = value;\r\n        conditionInput.conditionValues['[]' + key + ''] = teamMembers.length - value;\r\n        if (key == myVision) {\r\n            conditionInput.conditionValues['[]'] = value - 1;\r\n            conditionInput.conditionValues['[]'] = teamMembers.length - value;\r\n        }\r\n    })\r\n    conditionInput.conditionValues['[]'] = visionCountMap.size - 1; // required1\r\n    const pyroCount = visionCountMap.get('') ?? 0;\r\n    const hydroCount = visionCountMap.get('') ?? 0;\r\n    const electroCount = visionCountMap.get('') ?? 0;\r\n    const cryoCount = visionCountMap.get('') ?? 0;\r\n    conditionInput.conditionValues['[]'] = pyroCount + hydroCount + electroCount + cryoCount;\r\n}\r\n\r\nexport async function updateOptionsElementalResonanceByTeam(\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const character = characterInput.character;\r\n    const teamMembers: string[] = [character];\r\n    if (optionInput?.teamMembers) {\r\n        teamMembers.push(...optionInput.teamMembers.filter(s => s && s != character));\r\n    }\r\n    if (teamMembers.length == 4) {\r\n        const visionCountMap = new Map<string, number>();\r\n        for (const entry of teamMembers) {\r\n            const characterDetail = await getCharacterMasterDetail(entry as TCharacterKey);\r\n            if (characterDetail.) {\r\n                const count = visionCountMap.get(characterDetail.);\r\n                if (count) {\r\n                    visionCountMap.set(characterDetail., count + 1);\r\n                } else {\r\n                    visionCountMap.set(characterDetail., 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        const newElementResonance: TConditionValues = {};\r\n        const resonanceElementArr: string[] = [];\r\n        const restMemberElementArr: string[] = [];\r\n        visionCountMap.forEach((value, key) => {\r\n            if (value >= 2) {\r\n                resonanceElementArr.push(key);\r\n            } else if (value == 1) {\r\n                restMemberElementArr.push(key);\r\n            }\r\n        })\r\n        if (optionInput.teamMembers.length == 3) {\r\n            if (resonanceElementArr.length > 1) {\r\n                newElementResonance[resonanceElementArr[0] + ''] = true;\r\n                newElementResonance[resonanceElementArr[1] + ''] = true;\r\n            } else if (resonanceElementArr.length > 0) {\r\n                newElementResonance[resonanceElementArr[0] + ''] = true;\r\n            } else {\r\n                newElementResonance[''] = true;\r\n            }\r\n        } else if (resonanceElementArr.length > 0) {\r\n            const tempArr: string[] = [resonanceElementArr[0] + ''];\r\n            const currentElementArr = Object.keys(optionInput.elementalResonance.conditionValues).filter(s => optionInput.elementalResonance.conditionValues[s] && s != '').map(s => s.replace(/$/, ''));\r\n            currentElementArr.forEach(element => {\r\n                if (restMemberElementArr.includes(element)) {\r\n                    tempArr.push(element + '');\r\n                }\r\n            });\r\n            if (tempArr.length < 2) {\r\n                ALL_ELEMENTS.forEach(element => {\r\n                    const resonance = element + '';\r\n                    if (optionInput.elementalResonance.conditionValues[resonance]) {\r\n                        if (!tempArr.includes(resonance)) {\r\n                            tempArr.push(resonance);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            tempArr.forEach(resonance => {\r\n                newElementResonance[resonance] = true;\r\n            })\r\n        }\r\n        if (!_.isEqual(newElementResonance, optionInput.elementalResonance.conditionValues)) {\r\n            overwriteObject(optionInput.elementalResonance.conditionValues, newElementResonance);\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function makeSharedata(savedata: TAnyObject) {\r\n    const sharedataArr = [] as any[];\r\n\r\n    let character: TCharacterKey;\r\n    let weaponType: TWeaponTypeKey;\r\n\r\n    PROPERTY_MAP.forEach((value, key) => {\r\n        let newValue = savedata[key];\r\n        let myBasename;\r\n        switch (key) {\r\n            case '':\r\n                character = newValue as TCharacterKey;\r\n                myBasename = basename(CHARACTER_MASTER[character]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '':\r\n                weaponType = CHARACTER_MASTER[character][''] as TWeaponTypeKey;\r\n                myBasename = basename((WEAPON_MASTER as any)[weaponType][newValue]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '1':\r\n            case '2':\r\n                if (newValue == 'NONE') {\r\n                    newValue = '';  // \r\n                } else {\r\n                    myBasename = basename(ARTIFACT_SET_MASTER[newValue as TArtifactSetKey]['image']);\r\n                    newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                }\r\n                break;\r\n            case '1':\r\n            case '2':\r\n            case '3':\r\n            case '4':\r\n            case '5':\r\n                if (newValue) {\r\n                    newValue = newValue.split('_')[0] + '_' + ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue.split('_')[1]);\r\n                }\r\n                break;\r\n        }\r\n        if (key.match(/^\\d$/)) {\r\n            if (newValue) {\r\n                newValue = ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue);\r\n            }\r\n        }\r\n        sharedataArr.push(newValue);\r\n    });\r\n    Object.keys(savedata).forEach(key => {\r\n        if (!PROPERTY_MAP.has(key)) {\r\n            sharedataArr.push(key + '=' + savedata[key]);\r\n        }\r\n    });\r\n\r\n    return sharedataArr.join(',');\r\n}\r\n\r\nfunction openTwitter(text: string, url: string, opt_hashtags?: string, opt_via?: string) {\r\n    const baseUrl = 'https://twitter.com/intent/tweet?';\r\n    const params = new URLSearchParams();\r\n    params.append('text', text);\r\n    params.append('url', url);\r\n    if (opt_hashtags) {\r\n        params.append('hashtags', opt_hashtags);\r\n    }\r\n    if (opt_via) {\r\n        params.append('via', opt_via);\r\n    }\r\n    const query = params.toString();\r\n    const shareUrl = `${baseUrl}${query}`;\r\n    console.log(params);\r\n    console.log(shareUrl);\r\n    window.open(shareUrl);\r\n}\r\n\r\nexport function shareByTwitter(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput\r\n) {\r\n    const savedata = makeSavedata(characterInput, artifactDetailInput, conditionInput);\r\n    const sharedata = makeSharedata(savedata);\r\n\r\n    const text = characterInput.buildname;\r\n    const encoded = encodeURI(sharedata);\r\n    const url = 'https://asagume.github.io/gencalc/' + '?allin=' + encoded;\r\n\r\n    openTwitter(text, url);\r\n}\r\n\r\nexport function pushBuildinfoToSession(character: TCharacterKey | string, buildname?: string, builddata?: any, teammembers?: string[]) {\r\n    sessionStorage.setItem('character', character);\r\n    if (buildname) {\r\n        sessionStorage.setItem('buildname', buildname);\r\n    }\r\n    if (builddata) {\r\n        sessionStorage.setItem('builddata', JSON.stringify(builddata));\r\n    }\r\n    if (teammembers) {\r\n        sessionStorage.setItem('teammembers', JSON.stringify(teammembers));\r\n    }\r\n}\r\n\r\nexport function popBuildinfoFromSession() {\r\n    const result: [string | undefined, string | undefined, TAnyObject | undefined, string[] | undefined] = [undefined, undefined, undefined, undefined];\r\n    const character = sessionStorage.getItem('character');\r\n    if (character) {\r\n        result[0] = character;\r\n        const buildname = sessionStorage.getItem('buildname');\r\n        if (buildname) {\r\n            result[1] = buildname;\r\n        }\r\n        const builddata = sessionStorage.getItem('builddata');\r\n        if (builddata) {\r\n            result[2] = JSON.parse(builddata);\r\n        }\r\n        const teammembers = sessionStorage.getItem('teammembers');\r\n        if (teammembers) {\r\n            result[3] = JSON.parse(teammembers);\r\n        }\r\n        console.log(character, buildname, builddata, teammembers);\r\n    }\r\n    sessionStorage.removeItem('character');\r\n    sessionStorage.removeItem('builddata');\r\n    sessionStorage.removeItem('buildname');\r\n    sessionStorage.removeItem('teammembers');\r\n    return result;\r\n}\r\n","export type TAnyObject = {\r\n    [key: string]: any\r\n}\r\n\r\nimport CHARACTER_MASTER from '../public/data/CharacterMaster.json'// assert {type: 'json'}\r\n\r\nimport SWORD_MASTER from '../public/data/SwordMaster.json'// assert {type: 'json'}\r\nimport CLAYMORE_MASTER from '../public/data/ClaymoreMaster.json'// assert {type: 'json'}\r\nimport POLEARM_MASTER from '../public/data/PolearmMaster.json'// assert {type: 'json'}\r\nimport BOW_MASTER from '../public/data/BowMaster.json'// assert {type: 'json'}\r\nimport CATALYST_MASTER from '../public/data/CatalystMaster.json'// assert {type: 'json'}\r\n\r\nimport ARTIFACT_SET_MASTER from '../public/data/ArtifactSetMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_MAIN_MASTER from '../public/data/ArtifactMainMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_SUB_MASTER from '../public/data/ArtifactSubMaster.json'// assert {type: 'json'}\r\n\r\nimport ENEMY_MASTER from '../public/data/EnemyMaster.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_RESONANCE_MASTER from '../public/data/ElementalResonanceMaster.json'// assert {type: 'json'}\r\nimport TEAM_OPTION_MASTER from '../public/data/TeamOptionMaster.json'// assert {type: 'json'}\r\nimport OPTION1_MASTER from '../public/data/OptionMaster1.json'// assert {type: 'json'}\r\nimport OPTION2_MASTER from '../public/data/OptionMaster2.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_REACTION_MASTER from '../public/data/ElementalReactionMaster.json'// assert {type: 'json'}\r\nimport ELEMENTAL_REACTION_BASE_DAMAGE_MASTER from '../public/data/ElementalReactionBaseDamageMaster.json'// assert {type: 'json'}\r\n\r\n// import HOYO_DICTIONARY2 from '../public/data/HoYoDictionary2.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY4 from '../public/data/HoYoDictionary4.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY5 from '../public/data/HoYoDictionary5.json'// assert {type: 'json'}\r\n// import LOCAL_DICTIONARY from '../public/data/LocalDictionary.json'// assert {type: 'json'}\r\n// import { isPlainObject, isString } from './common'\r\n\r\nexport {\r\n    CHARACTER_MASTER,\r\n    ARTIFACT_SET_MASTER,\r\n    ARTIFACT_MAIN_MASTER,\r\n    ARTIFACT_SUB_MASTER,\r\n    ENEMY_MASTER,\r\n    ELEMENTAL_RESONANCE_MASTER,\r\n    TEAM_OPTION_MASTER,\r\n    OPTION1_MASTER,\r\n    OPTION2_MASTER,\r\n    ELEMENTAL_REACTION_MASTER,\r\n    ELEMENTAL_REACTION_BASE_DAMAGE_MASTER,\r\n};\r\n\r\n// function removeStrFromUrl(obj: any, str: string) {\r\n//     if (isPlainObject(obj)) {\r\n//         for (const key of Object.keys(obj)) {\r\n//             if (isString(obj[key])) {\r\n//                 obj[key] = obj[key].replace(str, '');\r\n//             } else if (isPlainObject(obj[key])) {\r\n//                 removeStrFromUrl(obj[key], str);\r\n//             } else if (Array.isArray(obj[key])) {\r\n//                 for (const entry of obj[key]) {\r\n//                     removeStrFromUrl(entry, str);\r\n//                 }\r\n//             }\r\n//         }\r\n//     }\r\n// }\r\n\r\n// for (const master of [\r\n//     CHARACTER_MASTER,\r\n//     SWORD_MASTER,\r\n//     CLAYMORE_MASTER,\r\n//     POLEARM_MASTER,\r\n//     BOW_MASTER,\r\n//     CATALYST_MASTER,\r\n//     ARTIFACT_SET_MASTER\r\n// ]) {\r\n//     for (const key of Object.keys(master)) {\r\n//         removeStrFromUrl((master as any)[key], '');\r\n//     }\r\n// }\r\n\r\nexport const IMG_SRC_DUMMY = 'data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7';\r\n\r\nexport type TVisionKey = '' | '' | '' | '' | '' | '' | '';\r\nexport type TWeaponTypeKey = '' | '' | '' | '' | '';\r\n\r\nexport type TCharacterMaster = typeof CHARACTER_MASTER;\r\nexport type TCharacter = {\r\n    : 4 | 5,\r\n    : TVisionKey,\r\n    : TWeaponTypeKey,\r\n    ?: string,\r\n    import: string,\r\n}\r\nexport type TCharacterKey = keyof typeof CHARACTER_MASTER\r\nexport type TCharacterEntry = TCharacter & {\r\n    key: TCharacterKey,\r\n    icon_url: string,\r\n}\r\n\r\nexport type TCharacterDetail = {\r\n    : TCharacterKey,\r\n    : string,\r\n    icon_url: string,\r\n    : 4 | 5,\r\n    : TWeaponTypeKey,\r\n    : TVisionKey,\r\n    baseInfo: any,\r\n    region?: string,\r\n    : TCharacterStats,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any[],\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any[],\r\n    ?: any,\r\n    ?: any,\r\n    : any[],\r\n    'NEXT STEP'?: string,\r\n}\r\nexport type TCharacterStats = {\r\n    HP: {\r\n        [key: string]: number,\r\n    },\r\n    : {\r\n        [key: string]: number,\r\n    },\r\n    : {\r\n        [key: string]: number,\r\n    },\r\n    [key: string]: {\r\n        [key: string]: number,\r\n    }\r\n};\r\nexport type TLeveldValue = {\r\n    [key: number | string]: number,\r\n};\r\nexport type TTalentFormula = number | string | TLeveldValue;\r\nexport type TCharacterTalent = {\r\n    ?: string,\r\n    ?: {\r\n        ?: string,\r\n        ?: string,\r\n        ?: string | number | any[],\r\n        ?: string,\r\n        ?: string,\r\n    }[],\r\n    [key: string]: string | number | any[] | undefined,\r\n};\r\n\r\nexport type TWeaponRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TWeaponStats = {\r\n    : any,\r\n    [key: string]: any,\r\n}\r\nexport type TWeapon = {\r\n    : TWeaponRarity,\r\n    import: string,\r\n}\r\nexport type TSwordKey = keyof typeof SWORD_MASTER;\r\nexport type TClaymoreKey = keyof typeof CLAYMORE_MASTER;\r\nexport type TPolearmKey = keyof typeof POLEARM_MASTER;\r\nexport type TBowKey = keyof typeof BOW_MASTER;\r\nexport type TCatalystKey = keyof typeof CATALYST_MASTER;\r\nexport type TWeaponKey = TSwordKey | TClaymoreKey | TPolearmKey | TBowKey | TCatalystKey;\r\nexport type TWeaponEntry = TWeapon & {\r\n    key: TWeaponKey,\r\n    icon_url: string,\r\n};\r\nexport const WEAPON_DETAIL_TEMPLATE = {\r\n    : '',\r\n    : '',\r\n    icon_url: IMG_SRC_DUMMY,\r\n    : 4,\r\n    : '',\r\n    : {\r\n        : {}\r\n    },\r\n};\r\nexport type TWeaponDetail = {\r\n    : TWeaponKey,\r\n    : string,\r\n    icon_url: string,\r\n    : TWeaponRarity,\r\n    : TWeaponTypeKey,\r\n    : TWeaponStats,\r\n    ?: any,\r\n    ?: any[],\r\n    ?: any,\r\n    ?: any,\r\n    ?: number,\r\n};\r\n\r\nexport type TArtifactSetEffect = {\r\n    : string,\r\n    ?: any[],\r\n};\r\nexport type TArtifactSetRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TArtifactSet = {\r\n    : TArtifactSetRarity,\r\n    image: string,\r\n    '2'?: TArtifactSetEffect,\r\n    '4'?: TArtifactSetEffect,\r\n    ?: { [key: string]: boolean | number },\r\n    artifact_list?: string[],\r\n};\r\nexport type TArtifactSetKey = keyof typeof ARTIFACT_SET_MASTER;\r\nexport type TArtifactSetEntry = TArtifactSet & {\r\n    key: TArtifactSetKey,\r\n    icon_url: string,\r\n};\r\n\r\nexport type TArtifactMainStat = keyof typeof ARTIFACT_MAIN_MASTER[5]\r\nexport type TArtifactMainRarity = 4 | 5;\r\nexport type TArtifactMain = {\r\n    5: TArtifactMainStat,\r\n    4: TArtifactMainStat,\r\n};\r\n\r\nfunction getIconUrl(master: TAnyObject) {\r\n    let result = null;\r\n    if (master.icon_url) {\r\n        result = master.icon_url;\r\n    } else if (master.image) {\r\n        result = master.image;\r\n    } else if (master.import) {\r\n        result = master.import.replace('data/', 'images/');\r\n        if (result.indexOf('characters/') != -1) {\r\n            result = result.replace('characters/', 'characters/face/');\r\n        }\r\n        result = result.replace(/json$/, 'png');\r\n    }\r\n    return result;\r\n}\r\n\r\nexport const CHARACTER_MASTER_LIST: TCharacterEntry[] = [];\r\n(Object.keys(CHARACTER_MASTER) as TCharacterKey[]).forEach(key => {\r\n    const master: any = CHARACTER_MASTER[key];\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    CHARACTER_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const WEAPON_MASTER = {\r\n    : SWORD_MASTER,\r\n    : CLAYMORE_MASTER,\r\n    : POLEARM_MASTER,\r\n    : BOW_MASTER,\r\n    : CATALYST_MASTER,\r\n};\r\n(Object.keys(WEAPON_MASTER) as TWeaponTypeKey[]).forEach(key2 => {\r\n    const typedMaster = WEAPON_MASTER[key2] as any; // \r\n    Object.keys(typedMaster).forEach(key => {\r\n        const master = typedMaster[key];\r\n        master.key = key;\r\n        master.icon_url = getIconUrl(master);\r\n    });\r\n})\r\nconst SWORD_MASTER_LIST = (Object.keys(SWORD_MASTER) as TSwordKey[]).map(key => SWORD_MASTER[key]);\r\nconst CLAYMORE_MASTER_LIST = (Object.keys(CLAYMORE_MASTER) as TClaymoreKey[]).map(key => CLAYMORE_MASTER[key]);\r\nconst POLEARM_MASTER_LIST = (Object.keys(POLEARM_MASTER) as TPolearmKey[]).map(key => POLEARM_MASTER[key]);\r\nconst BOW_MASTER_LIST = (Object.keys(BOW_MASTER) as TBowKey[]).map(key => BOW_MASTER[key]);\r\nconst CATALYST_MASTER_LIST = (Object.keys(CATALYST_MASTER) as TCatalystKey[]).map(key => CATALYST_MASTER[key]);\r\nexport const WEAPON_MASTER_LIST = {\r\n    : SWORD_MASTER_LIST,\r\n    : CLAYMORE_MASTER_LIST,\r\n    : POLEARM_MASTER_LIST,\r\n    : BOW_MASTER_LIST,\r\n    : CATALYST_MASTER_LIST,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_LIST: TArtifactSetEntry[] = [];\r\n(Object.keys(ARTIFACT_SET_MASTER) as TArtifactSetKey[]).forEach(key => {\r\n    const master = ARTIFACT_SET_MASTER[key] as any;\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    ARTIFACT_SET_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const ARTIFACT_MAIN_MASTER_STATLIST: string[] = Object.keys(ARTIFACT_MAIN_MASTER[5]);\r\n\r\nexport const ARTIFACT_SUB_MASTER_STATLIST = Object.keys(ARTIFACT_SUB_MASTER);\r\nexport type TArtifactSubKey = keyof typeof ARTIFACT_SUB_MASTER;\r\n\r\nexport type TEnemy = {\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    [key: string]: number,\r\n};\r\nexport type TEnemyKey = keyof typeof ENEMY_MASTER;\r\nexport type TEnemyEntry = TEnemy & {\r\n    key: TEnemyKey,\r\n};\r\nfor (const key of Object.keys(ENEMY_MASTER)) {\r\n    for (const stat of Object.keys((ENEMY_MASTER as any)[key])) {\r\n        if ((ENEMY_MASTER as any)[key][stat] >= 1000) { // \r\n            (ENEMY_MASTER as any)[key][stat] = Infinity;\r\n        }\r\n    }\r\n}\r\nexport const ENEMY_MASTER_LIST = (Object.keys(ENEMY_MASTER) as TEnemyKey[])\r\n    .map(key => ({ key: key, ...ENEMY_MASTER[key] }));\r\n\r\nexport type TElementalResonanceKey = keyof typeof ELEMENTAL_RESONANCE_MASTER;\r\nexport const ELEMENTAL_RESONANCE_MASTER_LIST = (Object.keys(ELEMENTAL_RESONANCE_MASTER) as TElementalResonanceKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_RESONANCE_MASTER[key] }));\r\n\r\nexport type TTeamOptionKey = keyof typeof TEAM_OPTION_MASTER;\r\nexport const TEAM_OPTION_MASTER_LIST = (Object.keys(TEAM_OPTION_MASTER) as TTeamOptionKey[])\r\n    .map(key => ({ key: key, ...TEAM_OPTION_MASTER[key] }));\r\n\r\nexport type TOption1Key = keyof typeof OPTION1_MASTER;\r\nexport const OPTION1_MASTER_LIST = (Object.keys(OPTION1_MASTER) as TOption1Key[])\r\n    .map(key => ({ key: key, ...OPTION1_MASTER[key] }));\r\n\r\nexport type TOption2Key = keyof typeof OPTION2_MASTER;\r\nexport const OPTION2_MASTER_LIST = (Object.keys(OPTION2_MASTER) as TOption2Key[])\r\n    .map(key => ({ key: key, ...OPTION2_MASTER[key] }));\r\n\r\nexport type TElementalReactionKey = keyof typeof ELEMENTAL_REACTION_MASTER;\r\nexport const ELEMENTAL_REACTION_MASTER_LIST = (Object.keys(ELEMENTAL_REACTION_MASTER) as TElementalReactionKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_REACTION_MASTER[key] }));\r\n\r\n// export const DICTIONARY_MASTER = { ...HOYO_DICTIONARY2, ...HOYO_DICTIONARY4, ...HOYO_DICTIONARY5, ...LOCAL_DICTIONARY };\r\n\r\n////////////////\r\n////////////////\r\nconst CHARACTER_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param {string} character \r\n * @returns {Promise<any>}\r\n */\r\nexport async function getCharacterMasterDetail(character: TCharacterKey): Promise<TCharacterDetail> {\r\n    try {\r\n        if (!CHARACTER_MASTER_DETAIL_MAP.has(character)) {\r\n            const url = CHARACTER_MASTER[character]['import'].replace(/^\\//, '');\r\n            const characterMaster = await fetch(url).then(resp => resp.json());\r\n            // URLURL\r\n            const weaponType = CHARACTER_MASTER[character]. as TWeaponTypeKey;\r\n            characterMaster..icon_url = WEAPON_IMG_SRC[weaponType];\r\n            CHARACTER_MASTER_DETAIL_MAP.set(character, characterMaster);\r\n        }\r\n        return CHARACTER_MASTER_DETAIL_MAP.get(character);\r\n    } catch (error) {\r\n        console.error(character);\r\n        throw error;\r\n    }\r\n}\r\n\r\nconst WEAPON_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param weapon \r\n * @param opt_weaponType \r\n * @returns \r\n */\r\nexport async function getWeaponMasterDetail(weapon: TWeaponKey, opt_weaponType?: TWeaponTypeKey): Promise<TWeaponDetail> {\r\n    try {\r\n        if (!WEAPON_MASTER_DETAIL_MAP.has(weapon)) {\r\n            let weaponTypeArr;\r\n            if (opt_weaponType) weaponTypeArr = [opt_weaponType];\r\n            else weaponTypeArr = Object.keys(WEAPON_MASTER);\r\n            for (const weaponType of weaponTypeArr) {\r\n                if (weapon in WEAPON_MASTER[weaponType as TWeaponTypeKey]) {\r\n                    const typedMaster: any = WEAPON_MASTER[weaponType as TWeaponTypeKey];\r\n                    const url = typedMaster[weapon]['import'];\r\n                    const weaponMaster: any = await fetch(url).then(resp => resp.json());\r\n                    weaponMaster. = weaponType; // \r\n                    WEAPON_MASTER_DETAIL_MAP.set(weapon, weaponMaster);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return WEAPON_MASTER_DETAIL_MAP.get(weapon);\r\n    } catch (error) {\r\n        console.error(weapon, opt_weaponType);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const ALL_ELEMENTS = ['', '', '', '', '', '', ''];\r\n\r\nexport const ELEMENT_COLOR_CLASS = {\r\n    : 'pyro',\r\n    : 'hydro',\r\n    : 'anemo',\r\n    : 'electro',\r\n    : 'dendro',\r\n    : 'cryo',\r\n    : 'geo'\r\n};\r\nexport type TElementColorClassKey = keyof typeof ELEMENT_COLOR_CLASS;\r\n\r\nexport const ELEMENT_BG_COLOR_CLASS = {\r\n    : 'pyro-bg',\r\n    : 'hydro-bg',\r\n    : 'anemo-bg',\r\n    : 'electro-bg',\r\n    : 'dendro-bg',\r\n    : 'cryo-bg',\r\n    : 'geo-bg'\r\n};\r\n\r\nexport const ELEMENT_IMG_SRC = {\r\n    : 'images/element_pyro.png',\r\n    : 'images/element_hydro.png',\r\n    : 'images/element_anemo.png',\r\n    : 'images/element_electro.png',\r\n    : 'images/element_dendro.png',\r\n    : 'images/element_cryo.png',\r\n    : 'images/element_geo.png'\r\n};\r\nexport type TElementImgSrcKey = keyof typeof ELEMENT_IMG_SRC;\r\n\r\nexport const WEAPON_IMG_SRC = {\r\n    : 'images/characters/NormalAttack_sword.png',\r\n    : 'images/characters/NormalAttack_claymore.png',\r\n    : 'images/characters/NormalAttack_polearm.png',\r\n    : 'images/characters/NormalAttack_bow.png',\r\n    : 'images/characters/NormalAttack_catalyst.png',\r\n};\r\n\r\nexport const STAR_BACKGROUND_IMAGE_CLASS = {\r\n    1: 'star1-bg',\r\n    2: 'star2-bg',\r\n    3: 'star3-bg',\r\n    4: 'star4-bg',\r\n    5: 'star5-bg'\r\n}\r\n\r\nexport const PROPERTY_MAP = new Map([\r\n    ['', null],\r\n    ['', null],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', null],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['1', null],\r\n    ['2', null],\r\n    ['1', null],\r\n    ['2', null],\r\n    ['3', null],\r\n    ['4', null],\r\n    ['5', null],\r\n    ['HP', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['HPP', 0],\r\n    ['P', 0],\r\n    ['P', 0],\r\n    ['1', null],\r\n    ['1', -1],\r\n    ['1', -1],\r\n    ['2', null],\r\n    ['2', -1],\r\n    ['2', -1],\r\n    ['3', null],\r\n    ['3', -1],\r\n    ['3', -1],\r\n    ['4', null],\r\n    ['4', -1],\r\n    ['4', -1],\r\n]);\r\n\r\nexport const NUMBER_OF_PRIORITY_SUBSTATS = Array.from(PROPERTY_MAP.keys()).filter(s => s.match(/^\\d$/)).length;\r\n\r\nexport const DAMAGE_CATEGORY_ARRAY = ['', '', '', '', ''];\r\n\r\nexport const RECOMMEND_ABBREV_MAP = new Map([\r\n    ['HP%', 'HP'], ['', ''], ['', ''], ['', ''], ['', ''], ['', '']\r\n]);\r\n\r\nexport const RECOMMEND_ABBREV_EN_MAP = new Map([\r\n    ['HP%', 'HP'], ['%', 'AT'], ['%', 'DF'], ['', 'EM'],\r\n    ['', 'CR'], ['', 'CD'], ['', 'ER'], ['', 'HE'],\r\n    ['', 'Py'], ['', 'Hy'], ['', 'An'], ['', 'El'], ['', 'De'], ['', 'Cr'], ['', 'Ge'], ['', 'Ph'],\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_MAP = new Map([\r\n    ['HP', 'HP'],\r\n    ['', 'ATK'],\r\n    ['', 'DEF'],\r\n    ['', 'ElementalMastery'],\r\n    ['', 'CritRate'],\r\n    ['', 'CritDMG'],\r\n    ['', 'EnergyRecharge'],\r\n    ['', 'Pyro'],\r\n    ['', 'Hydro'],\r\n    ['', 'Anemo'],\r\n    ['', 'Electro'],\r\n    ['', 'Dendro'],\r\n    ['', 'Cryo'],\r\n    ['', 'Geo'],\r\n    ['', 'Physical'],\r\n    ['', 'Healing'],\r\n    ['HP%', 'HPp'],\r\n    ['%', 'ATKp'],\r\n    ['%', 'DEFp']\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP = new Map();\r\nARTIFACT_STAT_JA_EN_ABBREV_MAP.forEach((value, key) => {\r\n    ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP.set(value, key);\r\n});\r\n\r\nexport const GENSEN_MASTER_LIST = [\r\n    {\r\n        key: '',\r\n        values: [7, 7, 7, 7],\r\n        counts: [0, 0, 0, 0],\r\n    },\r\n    {\r\n        key: '',\r\n        values: [3, 3, 3, 3],\r\n        counts: [7, 4, 4, 4],\r\n    },\r\n    {\r\n        key: '1',\r\n        values: [3, 3, 3, 3],\r\n        counts: [8, 5, 5, 4],\r\n    },\r\n    {\r\n        key: '3',\r\n        values: [3, 3, 3, 3],\r\n        counts: [11, 8, 7, 4],\r\n    },\r\n    {\r\n        key: '',\r\n        values: [1, 1, 1, 1],\r\n        counts: [14, 11, 10, 4],\r\n    },\r\n];\r\nfor (const gensen of GENSEN_MASTER_LIST) {\r\n    for (let i = gensen.values.length; i < NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n        gensen.values.push(gensen.values[0]);\r\n    }\r\n    for (let i = gensen.counts.length; i < NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n        gensen.counts.push(0);\r\n    }\r\n}\r\nexport type TGensen = { key: string; values: number[]; counts: number[] };\r\n\r\nexport const ARTIFACT_CAT_NAMES = {\r\n    '1': 'flower_of_life',\r\n    '2': 'plume_of_death',\r\n    '3': 'sands_of_eon',\r\n    '4': 'goblet_of_eonothem',\r\n    '5': 'circlet_of_logos',\r\n};\r\n\r\nexport function getArtifactIconUrl(setname: string, opt_cat_id: any = '1') {\r\n    let result = IMG_SRC_DUMMY;\r\n    if (setname in ARTIFACT_SET_MASTER) {\r\n        result = (ARTIFACT_SET_MASTER as any)[setname].icon_url;\r\n        if (!result.startsWith('data:image/gif;')) {\r\n            result = result.replace(/.png$/, '');\r\n            result += '/' + (ARTIFACT_CAT_NAMES as any)[String(opt_cat_id)] + '.png';\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport type TArtifactScoreFormulaElement = [string, number];\r\nexport type TArtifactScoreFormula = TArtifactScoreFormulaElement[];\r\nexport const ARTIFACT_SCORE_FACTORS = [\r\n    'HP%', '%', '%', '', '', '', '',\r\n];\r\nexport const ARTIFACT_SCORE_FORMULA_TEMPLATE: TArtifactScoreFormula[] = [\r\n    [['', 2], ['', 1]],\r\n    [['%', 1], ['', 2], ['', 1]],\r\n    [['HP%', 1], ['', 2], ['', 1]],\r\n    [['%', 1], ['', 2], ['', 1]],\r\n    [['HP%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\r\n    [['%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\r\n    [['%', 0.5], ['', 0.125], ['', 2], ['', 1]],\r\n];\r\n","import { CHARACTER_E_UNTIL_MAP, getParticleInfo, getDurationFromInfo, getReceiveTypeFromInfo, SP_SELF } from \"@/particlemaster\";\r\nimport _ from \"lodash\";\r\nimport { TActionItem, TTeam, NUMBER_OF_MEMBERS, getCharacterMaster, TTeamMemberResult, TMember, getDefaultMemberResult, getCharacterDetail, getNormalAttackDan } from \"./team\";\r\n\r\nexport const RECHARGE_ENERGY_SKILL = \"01\";              // \r\nexport const RECHARGE_ENERGY_BURST = \"02\";              // \r\nexport const RECHARGE_ENERGY_PASSIVE = \"03\";            // \r\nexport const RECHARGE_ENERGY_CONSTELLATION = \"04\";      // \r\nexport const RECHARGE_ENERGY_ATTACK = \"05\";             // \r\nexport const RECHARGE_ENERGY_WEAPON = \"06\";             // \r\nexport const RECHARGE_ENERGY_ARTIFACT = \"07\";           // \r\nexport const RECHARGE_PARTICLE_SKILL = \"11\";            // \r\nexport const RECHARGE_PARTICLE_PASSIVE = \"13\";          // \r\nexport const RECHARGE_PARTICLE_CONSTELLATION = \"14\";    // \r\nexport const RECHARGE_PARTICLE_FAVONIUS = \"16\";         // \r\nexport const RECHARGE_PARTICLE_RESONANCE = \"18\";        // \r\nexport const RECHARGE_PARTICLE_ENEMY = \"19\";            // \r\n\r\nexport const ATTACK_ENERGY_COUNT_OBJ = {\r\n    '': 4.52,     // 10% + 5% * n\r\n    '': 4.66,     // 0% + 10% * n\r\n    '': 6.95,   // 0% + 4% * n\r\n    '': 6.29,         // 0% + 5% * n\r\n    '': 4.66,       // 0% + 10% * n\r\n}\r\n\r\nconst NORMAL_ATTACK_LENGTH_OBJ = {\r\n    '': 0.4,\r\n    '': 0.8,\r\n    '': 0.4,\r\n    '': 0.6,\r\n    '': 0.6,\r\n}\r\n\r\nconst ACTION_LENGTH_MAP = new Map<string, Map<string, number>>();\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['E.Press', 1.5], ['E.Hold', 2]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['C', 0.8]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['C', 3]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['E.Hold', 2]]));\r\n\r\n// rechargeKind, triggerName, energies[], messages[]\r\nexport type TEREnergy = [string, string, number[], string[]];\r\n// rechargeKind, triggerName, element, particles[], messages[]\r\nexport type TERParticle = [string, string, string, number[], string[]];\r\n\r\nexport function isRechargeKindEnergy(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('0') : false;\r\n}\r\n\r\nexport function isRechargeKindParticle(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('1') : false;\r\n}\r\n\r\n/**  */\r\nexport function countN(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (rotation.action === 'Q') {\r\n                        isQing = true;\r\n                    } else if (rotation.action.startsWith('N') && isBursting == isQing) {\r\n                        result += rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2));\r\n                    }\r\n                } else {\r\n                    isQing = false;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith('N')).map(rotation => rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2))).reduce((p, c) => p + c, 0);\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countC(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.action === 'Q') {\r\n                    isQing = true;\r\n                } else if (rotation.action.includes('C') && isBursting == isQing) {\r\n                    result++;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.includes('C')).length;\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\nexport function countP(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.action === 'Q') {\r\n                    isQing = true;\r\n                } else if (rotation.action.includes('P') && isBursting == isQing) {\r\n                    result++;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.includes('P')).length;\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countE(character?: string, rotationList?: TActionItem[], action = 'E', isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character) {\r\n            let isQing = false;\r\n            let untilMap: Map<string[], number> | undefined;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (untilMap && untilMap.size > 0) {\r\n                        for (const [key, value] of untilMap.entries()) {\r\n                            if (key.filter(untilAction => rotation.action.indexOf(untilAction) != -1).length) {\r\n                                let untilCount = value;\r\n                                if (untilCount) {\r\n                                    untilCount -= rotation.action.startsWith('N') ? rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2)) : 1;\r\n                                    if (untilCount > 0) {\r\n                                        untilMap.set(key, untilCount);\r\n                                    } else {\r\n                                        untilMap.clear();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else if (rotation.action === 'Q') {\r\n                        isQing = true;\r\n                    } else if (rotation.action.startsWith(action)) {\r\n                        const workMap = CHARACTER_E_UNTIL_MAP.get(character);\r\n                        if (workMap && workMap.size > 0) {\r\n                            untilMap = _.cloneDeep(workMap);\r\n                        }\r\n                        result += (isBursting === undefined || isBursting == isQing) ? 1 : 0;\r\n                    }\r\n                } else {\r\n                    isQing = false;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith(action)).length;\r\n        }\r\n    } else {\r\n        result = 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countQ(character?: string, rotationList?: TActionItem[]) {\r\n    return rotationList?.length ?\r\n        rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action === 'Q').length\r\n        : 1;\r\n}\r\n/** (%) */\r\nexport function getOnFieldRate(team: TTeam, rotationLength: number, rotationList: TActionItem[], constellations: number[]) {\r\n    const result = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const danArr = team.members.map(member => member.name ? getNormalAttackDan(member.name) : 0);\r\n    if (rotationList?.length) {\r\n        const lengthList = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        let length = 0;\r\n        let isNCPIgnoring = false;\r\n        let preRotation = undefined;\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (preRotation && rotation.member != preRotation.member) {\r\n                lengthList[memberNameArr.indexOf(preRotation.member)] += (length > 1 ? length : 1);\r\n                length = 0;\r\n                isNCPIgnoring = false;\r\n            }\r\n            preRotation = rotation;\r\n            const actionLength1 = ACTION_LENGTH_MAP.get(rotation.member);\r\n            if (actionLength1) {\r\n                const actionLength2 = actionLength1.get(rotation.action);\r\n                if (actionLength2 !== undefined) {\r\n                    length += actionLength2;\r\n                    continue;\r\n                }\r\n            }\r\n            const characterMaster = getCharacterMaster(rotation.member);\r\n            if (rotation.action === 'Q') {\r\n                length += 0.8;\r\n                if (characterMaster?. && characterMaster. === 5) {\r\n                    length += 0.4;\r\n                }\r\n            } else if (rotation.action === 'E.Hold') {\r\n                length += 1;\r\n            } else if (['E', 'E.Press'].includes(rotation.action)) {\r\n                length += 0.5;\r\n                const particleInfo = getParticleInfo(rotation.member, rotation.action, constellations[memberNameArr.indexOf(rotation.member)]);\r\n                const duration = getDurationFromInfo(particleInfo);\r\n                if (getReceiveTypeFromInfo(particleInfo) === SP_SELF && duration) {\r\n                    // \r\n                    length += duration;\r\n                    isNCPIgnoring = true;\r\n                }\r\n            } else if (!isNCPIgnoring) {\r\n                if (rotation.action.startsWith('N')) {\r\n                    const maxDan = danArr[memberNameArr.indexOf(preRotation.member)];\r\n                    const dan = rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2));\r\n                    if (characterMaster?.) {\r\n                        const unitLength = NORMAL_ATTACK_LENGTH_OBJ[characterMaster.];\r\n                        for (let j = 0; j < dan; j++) {\r\n                            if ((j / maxDan) < (2 / 3)) {\r\n                                length += unitLength * 0.8;\r\n                            } else {\r\n                                length += unitLength * 1.2;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        length += 0.6 * dan;\r\n                    }\r\n                    if (rotation.action.endsWith('C')) {\r\n                        length += 0.5;\r\n                    }\r\n                    length += 0.3;\r\n                } else if (rotation.action == 'C') {\r\n                    if (characterMaster?. === '') {   //  or \r\n                        length += 3;\r\n                    } else if (characterMaster?. === '') {    // \r\n                        length += 1.5;  //  1/2=1s/1.5s\r\n                    } else if (characterMaster?. === '') {\r\n                        length += 1;\r\n                    } else {    // for \r\n                        length += 1;\r\n                    }\r\n                } else if (rotation.action == 'P') {\r\n                    length += 1.5;\r\n                }\r\n            }\r\n        }\r\n        if (preRotation && length > 0) {\r\n            lengthList[memberNameArr.indexOf(preRotation.member)] += (length > 1 ? length : 1);\r\n        }\r\n        const multiple = Math.ceil(100 / rotationLength);\r\n        const lengthSum = _.sum(lengthList);\r\n        for (let i = 0; i < result.length; i++) {\r\n            if (lengthSum && i < lengthList.length) {\r\n                result[i] = Math.ceil(lengthList[i] / lengthSum * 100 / multiple) * multiple;\r\n            } else {\r\n                result[i] = 25;\r\n            }\r\n        }\r\n        const sumVal = _.sum(result);\r\n        if (sumVal > 100) {\r\n            const maxVal = _.max(result);\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (result[i] == maxVal) {\r\n                    result[i] -= sumVal - 100;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        const memberNum = memberNameArr.filter(name => name).length;\r\n        if (memberNum) {\r\n            const rate = 100 / memberNum;\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (memberNameArr[i]) {\r\n                    result[i] = rate;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getMemberResult(character: string, members: TMember[], teamMemberResult?: TTeamMemberResult) {\r\n    let result = getDefaultMemberResult();\r\n    if (teamMemberResult) {\r\n        const memberArr = members.filter(member => member.name == character);\r\n        if (memberArr.length) {\r\n            result = teamMemberResult[memberArr[0].id];\r\n        }\r\n    } else {\r\n        const characterDetail = getCharacterDetail(character);\r\n        if (characterDetail?.) {\r\n            Object.keys(characterDetail.).forEach(key => {\r\n                result.statsInput.statsObj[key] += characterDetail.[key]['90'];\r\n            })\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getCharacterInputValue(character: string, members: TMember[], item: string, teamMemberResult?: TTeamMemberResult) {\r\n    const result = getMemberResult(character, members, teamMemberResult)?.characterInput;\r\n    return result ? (result as any)[item] : undefined;\r\n}\r\n\r\nexport function getStatsInputValue(character: string, members: TMember[], item: string, teamMemberResult?: TTeamMemberResult) {\r\n    const result = getMemberResult(character, members, teamMemberResult)?.statsInput?.statsObj;\r\n    return result ? (result as any)[item] : undefined;\r\n}\r\n","import _ from \"lodash\";\r\nimport { NUMBER_OF_MEMBERS, TActionItem, TTeam, TTeamMemberResult, getCharacterDetail, getCharacterMaster } from \"./team\";\r\nimport { CHARACTER_E_DELAY_MAP, CHARACTER_E_FIRST_ARR, CHARACTER_E_UNTIL_MAP, CHARACTER_Q_NOT_RECHARGEABLE, CHARACTER_Q_TO_E_ARR, SP_LONG, SP_NEXT, SP_SELF, SP_SHRT, getDurationFromInfo, getElementalSkillActions, getParticleInfo, getParticleNumFromInfo, getReceiveTypeFromInfo } from \"@/particlemaster\";\r\nimport { TERParticle, RECHARGE_PARTICLE_SKILL, countE, countC, countQ, RECHARGE_PARTICLE_FAVONIUS, RECHARGE_PARTICLE_RESONANCE, TEREnergy, RECHARGE_ENERGY_ARTIFACT, RECHARGE_ENERGY_ATTACK, ATTACK_ENERGY_COUNT_OBJ } from \"./ERCalculatorCommon\";\r\nimport { CHARACTER_ENERGY_FUNC, CHARACTER_PARTICLE_EXTRA_FUNC } from \"./ERCalculatorFuncCharacter\";\r\nimport { WEAPON_ENERGY_FUNC } from \"./ERCalculatorFuncWeapon\";\r\n\r\nexport function getParticleByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle[] | undefined {\r\n    const kind = RECHARGE_PARTICLE_SKILL;\r\n    const resultMap = new Map<string, number[]>();\r\n    if (!character) return undefined;\r\n    if (!rotationList?.length) {\r\n        rotationList = [{\r\n            id: 0,\r\n            member: character,\r\n            action: getElementalSkillActions(character)[0],\r\n        }];\r\n    }\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (character === '' && constellation >= 6) {\r\n        const eCount = countE(character, rotationList);\r\n        const cCount = countC(character, rotationList);\r\n        const qCount = countQ(character, rotationList);\r\n        const action = 'E';\r\n        const particleInfo = getParticleInfo(character, action, 0);\r\n        const num = getParticleNumFromInfo(particleInfo) * Math.trunc(Math.min(rotationLength, Math.min(eCount, cCount) * 5.5 + qCount * 18) / 5.5);\r\n        const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(resultVal, num, team, onFields);\r\n        resultMap.set(action, resultVal);\r\n    } else if (character === '') {\r\n        let ousiaLength = 0;\r\n        let isOusia = true; // \r\n        rotationList.forEach(rotation => {\r\n            if (rotation.member == character && rotation.action.includes('C')) {    // \r\n                isOusia = !isOusia;\r\n            }\r\n            if (isOusia) {\r\n                ousiaLength++;\r\n            }\r\n        })\r\n        const action = 'E';\r\n        const particleInfo = getParticleInfo(character, action);\r\n        const num = getParticleNumFromInfo(particleInfo, rotationLength) * Math.trunc(ousiaLength / rotationList.length);\r\n        const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(resultVal, num, team, onFields);\r\n        resultMap.set(action, resultVal);\r\n    } else {\r\n        const timeArr = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        let curCharacter;\r\n        let isBursting = false;\r\n        let skillCount = 0;\r\n        let untilMap = new Map<string[], number>();\r\n        let delayActions: string[] | undefined;    // delayActions\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (rotation.member != curCharacter) {\r\n                isBursting = false;\r\n                skillCount = 0;\r\n            }\r\n            if (rotation.member == character) {\r\n                let action = rotation.action;\r\n                if (action === 'Q') {\r\n                    isBursting = true; // \r\n                    if (CHARACTER_Q_TO_E_ARR.includes(character)) {\r\n                        action = 'E';\r\n                    }\r\n                } else if (action.startsWith('E')) {\r\n                    if (CHARACTER_E_FIRST_ARR.includes(character)) {\r\n                        skillCount++;\r\n                    }\r\n                }\r\n                if (untilMap && untilMap.size > 0) {\r\n                    for (const [key, value] of untilMap.entries()) {\r\n                        if (key.filter(untilAction => action.indexOf(untilAction) != -1).length > 0) {\r\n                            let untilCount = value;\r\n                            if (untilCount) {\r\n                                untilCount -= action.startsWith('N') ? action.length === 1 ? 1 : Number(action.substring(1, 2)) : 1;\r\n                                if (untilCount > 0) {\r\n                                    untilMap.set(key, untilCount);\r\n                                } else {\r\n                                    untilMap.clear();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (action.startsWith('E') || delayActions && delayActions.filter(delayAction => action.indexOf(delayAction) != -1).length) {\r\n                    const workMap = CHARACTER_E_UNTIL_MAP.get(character);\r\n                    if (workMap && workMap.size > 0) {\r\n                        untilMap = _.cloneDeep(workMap);\r\n                    } else if (CHARACTER_E_DELAY_MAP.has(character)) {\r\n                        if (action.startsWith('E')) {\r\n                            delayActions = _.cloneDeep(CHARACTER_E_DELAY_MAP.get(character));\r\n                            continue;\r\n                        }\r\n                        delayActions = undefined;\r\n                        action = 'E';\r\n                    }\r\n                    const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                    timeArr[myIndex] = setSkillParticleNumToArr(resultVal, character, action, constellation, team, rotationLength, rotationList, i, onFields, timeArr[myIndex], isBursting, skillCount > 1);\r\n                    resultMap.set(action, resultVal);\r\n                }\r\n            }\r\n            curCharacter = rotation.member;\r\n        }\r\n    }\r\n    const result: TERParticle[] = [];\r\n    const characterMaster = getCharacterMaster(character);\r\n    const element = characterMaster?. ?? '';\r\n    resultMap.forEach((value, key) => {\r\n        result.push([kind, key, element, value, []]);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getParticleByCharacterExtra(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle[] | undefined {\r\n    const func = CHARACTER_PARTICLE_EXTRA_FUNC[character];\r\n    if (func === undefined) return undefined;\r\n    const ret = func(character, constellation, team.members, rotationLength, rotationList, onFields);\r\n    if (ret === undefined) return undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (myIndex === -1) return undefined;\r\n    const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const result: TERParticle = [ret[0], ret[1], ret[2], particles, ret[6]];\r\n    if (ret[3]) {   // \r\n        particles[myIndex] += ret[3];\r\n    }\r\n    if (ret[4]) {   // \r\n        splitNumToArrByOnFieldRate(particles, ret[4], team, onFields);\r\n    }\r\n    if (ret[5].length) {   // \r\n        for (let i = 0; i < ret[5].length && i < particles.length; i++) {\r\n            particles[i] += ret[5][i];\r\n        }\r\n    }\r\n    return [result];\r\n}\r\n\r\nexport function getParticleByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    if (['', '', '', '', ''].includes(weapon)) {\r\n        const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        const ct = [12, 10.5, 9, 7.5, 6][weaponRefine - 1];\r\n        let triggerCnt = 1;\r\n        if (rotationList?.length) {\r\n            const rindexArr: number[] = [];\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character && (i === 0 || rotationList[i - 1].member != character)) {\r\n                    rindexArr.push(i);\r\n                }\r\n            }\r\n            const onField = onFields[memberNameArr.indexOf(character)];\r\n            triggerCnt = Math.min(Math.trunc(rotationLength / ct), rindexArr.length + Math.max(0, Math.trunc(rotationLength * onField / 100 / ct) - 1));\r\n            for (let i = 0; i < triggerCnt; i++) {\r\n                let nxtCharacter = character;\r\n                if (i < rindexArr.length && (rindexArr[i] + 1) < rotationList.length) {\r\n                    nxtCharacter = rotationList[rindexArr[i] + 1].member;\r\n                }\r\n                const toIndex = memberNameArr.indexOf(nxtCharacter);\r\n                particles[toIndex] += 3;\r\n            }\r\n        } else {\r\n            const toIndex = memberNameArr.indexOf(character);\r\n            particles[toIndex] = 3 * triggerCnt;\r\n        }\r\n        result = [RECHARGE_PARTICLE_FAVONIUS, weapon, '', particles, []];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleByResonance(\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined = undefined;\r\n    if (team.members.filter(member => member.name).length < 4) return result;\r\n    const electroCount = team.members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n    if (electroCount >= 2) { // \r\n        const messages = [\r\n            '100%5',\r\n        ];\r\n        let allParticle = 0; // \r\n        if (team.members.filter(member => ['', '', '', ''].includes(getCharacterMaster(member.name)?. ?? '--')).length) {\r\n            const ct = 5;\r\n            allParticle = 1 * Math.trunc(rotationLength / ct);\r\n        }\r\n        const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(particles, allParticle, team, onFields);\r\n        result = [RECHARGE_PARTICLE_RESONANCE, '', '', particles, messages];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n    teamMemberResult?: TTeamMemberResult,\r\n): TEREnergy[] {\r\n    const result: TEREnergy[] = [];\r\n    const func = CHARACTER_ENERGY_FUNC[character];\r\n    if (func === undefined) return result;\r\n    const ret = func(character, constellation, team.members, rotationLength, rotationList, teamMemberResult);\r\n    if (!ret?.length) return result;\r\n    const myIndex = team.members.map(member => member.name).indexOf(character);\r\n    if (myIndex === -1) return result;\r\n    ret.forEach(entry => {\r\n        const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        const workResult: TEREnergy = [entry[0], entry[1], energies, entry[6]];\r\n        if (entry[2]) {   // \r\n            energies[myIndex] += entry[2];\r\n        }\r\n        if (entry[3]) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                energies[i] += entry[3];\r\n            }\r\n        }\r\n        if (entry[4]) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                if (i != myIndex) {\r\n                    energies[i] += entry[4];\r\n                }\r\n            }\r\n        }\r\n        if (entry[5]?.length) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                energies[i] += entry[5][i];\r\n            }\r\n        }\r\n        result.push(workResult);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n): TEREnergy | undefined {\r\n    let result: TEREnergy | undefined = undefined;\r\n    const func = WEAPON_ENERGY_FUNC[weapon];\r\n    if (func === undefined) return result;\r\n    const members = team.members.map(member => member.name);\r\n    const ret = func(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    if (!ret?.length) return result;\r\n    const myIndex = members.indexOf(character);\r\n    if (myIndex === -1) return result;\r\n    const entry = ret;\r\n    const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    result = [entry[0], entry[1], energies, entry[6]];\r\n    if (entry[2]) {   // \r\n        energies[myIndex] += entry[2];\r\n    }\r\n    if (entry[3]) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            energies[i] += entry[3];\r\n        }\r\n    }\r\n    if (entry[4]) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            if (i != myIndex) {\r\n                energies[i] += entry[4];\r\n            }\r\n        }\r\n    }\r\n    if (entry[5]?.length) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            energies[i] += entry[5][i];\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByArtifact(\r\n    character: string,\r\n    artifactSet4: string,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n): TEREnergy | undefined {\r\n    const rechargeKind = RECHARGE_ENERGY_ARTIFACT;\r\n    const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const messages: string[] = [];\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (artifactSet4 === '') {\r\n        messages.push('226');\r\n        const otherEnergy = 6 * countQ(character, rotationList);\r\n        if (otherEnergy) {\r\n            for (let i = 0; i < energies.length; i++) {\r\n                if (i != myIndex) {\r\n                    energies[i] += otherEnergy;\r\n                }\r\n            }\r\n        }\r\n    } else if (artifactSet4 === '') {\r\n        messages.push('6');\r\n        const natlanCount = team.members.filter(member => (getCharacterDetail(member.name) as any)?.region == '').length;\r\n        if (natlanCount > 0) {\r\n            let myEnergy = 6 * Math.trunc(rotationLength / [-1, 18, 12, 9][natlanCount]);\r\n            if (team.members.filter(member => member.name === '').length > 0) {\r\n                myEnergy += 6 * Math.trunc(rotationLength / 14);\r\n            }\r\n            energies[myIndex] += myEnergy;\r\n        }\r\n    }\r\n    if (energies.filter(e => e > 0).length || messages.length) {\r\n        return [rechargeKind, artifactSet4, energies, messages];\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function getEnergyByAttack(\r\n    character: string,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n): TEREnergy | undefined {\r\n    let result: TEREnergy | undefined = undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    const characterDetail = getCharacterDetail(character);\r\n    if (characterDetail) {\r\n        const denominator = ATTACK_ENERGY_COUNT_OBJ[characterDetail.];\r\n        if (denominator) {\r\n            let hitCount = 0;\r\n            if (rotationList?.length) {\r\n                rotationList.filter(rotation => rotation.member == character).forEach(rotation => {\r\n                    let withC = false;\r\n                    if (rotation.action.startsWith('N')) {\r\n                        let workHitCount = 0;\r\n                        let dans = 1;\r\n                        if (rotation.action.length > 1) {\r\n                            dans = Number(rotation.action.substring(1, 2));\r\n                        }\r\n                        characterDetail...forEach((obj: any) => {\r\n                            if (obj. && obj..endsWith('')) {\r\n                                const workDan = obj..substring(0, 1);\r\n                                if (!isNaN(workDan) && dans <= Number(workDan)) {\r\n                                    if (obj.HIT) {\r\n                                        workHitCount += obj.HIT;\r\n                                    }\r\n                                }\r\n                            }\r\n                        })\r\n                        if (workHitCount < dans) {\r\n                            workHitCount = dans;\r\n                        }\r\n                        hitCount += workHitCount;\r\n                        if (rotation.action.endsWith('C')) {\r\n                            withC = true;\r\n                        }\r\n                    }\r\n                    if (rotation.action === 'C' || withC) {\r\n                        let workHitCount = 1;\r\n                        characterDetail...forEach((obj: any) => {\r\n                            if (obj. && obj. === '') {\r\n                                if (obj.HIT) {\r\n                                    workHitCount = obj.HIT;\r\n                                }\r\n                            }\r\n                        })\r\n                        hitCount += workHitCount;\r\n                    }\r\n                })\r\n            }\r\n            const energy = Math.trunc(hitCount / denominator);\r\n            if (energy) {\r\n                const rechargeKind = RECHARGE_ENERGY_ATTACK;\r\n                const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                const messages: string[] = [];\r\n                result = [rechargeKind, '', energies, messages];\r\n                energies[myIndex] += energy;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction setSkillParticleNumToArr(\r\n    arr: number[],\r\n    character: string,\r\n    action: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    onFields: number[],\r\n    time: number,\r\n    isBursting = false,\r\n    isSkilling = false,\r\n) {\r\n    const particleInfo = getParticleInfo(character, action, constellation, isBursting, isSkilling);\r\n    if (particleInfo) {\r\n        const rotation = rotationList[index];\r\n        if (rotation) {\r\n            const num = getParticleNumFromInfo(particleInfo, rotationLength - time);\r\n            const receiveType = getReceiveTypeFromInfo(particleInfo);\r\n            const duration = getDurationFromInfo(particleInfo);\r\n            if ([SP_SELF, SP_NEXT].includes(receiveType)) {\r\n                addNumToArr(arr, num, team, rotationList, index, receiveType);\r\n            } else if ([SP_LONG, SP_SHRT].includes(receiveType)) {\r\n                splitNumToArrByOnFieldRate(arr, num, team, onFields);\r\n            }\r\n            time += duration;\r\n        }\r\n    }\r\n    return time;\r\n}\r\n\r\nfunction addNumToArr(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    receiveType = SP_NEXT,\r\n) {\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const nxtRotation = (index + receiveType - SP_SELF) < rotationList.length ? rotationList[index + receiveType - SP_SELF] : rotationList[0];\r\n    if (nxtRotation.action === 'Q' && CHARACTER_Q_NOT_RECHARGEABLE.includes(nxtRotation.member)) {\r\n        num = 0;\r\n    }\r\n    arr[memberNameArr.indexOf(nxtRotation.member)] += num;\r\n}\r\n\r\nexport function splitNumToArrByOnFieldRate(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    onFields: number[],\r\n) {\r\n    const denominator = onFields.map(v => Math.pow(v / 100, 2)).reduce((p, c) => p + c, 0);\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if (team.members[i].name) {\r\n            const onField = onFields[i];\r\n            arr[i] += num * Math.pow(onField / 100, 2) / denominator;\r\n        }\r\n    }\r\n}\r\n","import _ from \"lodash\";\r\nimport { TActionItem, TTeamMemberResult, NUMBER_OF_MEMBERS, getCharacterMaster, getCharacterDetail, TMember } from \"./team\";\r\nimport { RECHARGE_ENERGY_BURST, RECHARGE_ENERGY_CONSTELLATION, RECHARGE_ENERGY_PASSIVE, RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_CONSTELLATION, RECHARGE_PARTICLE_PASSIVE, countC, countE, countN, countQ, getCharacterInputValue, getMemberResult, getStatsInputValue, } from \"./ERCalculatorCommon\";\r\nimport { CHARACTER_MASTER } from \"@/master\";\r\n\r\nexport type TCharacterEnergyRet = [string, string, number, number, number, number[], string[]];\r\nexport type TCharacterParticleRet = [string, string, string, number, number, number[], string[]];\r\n\r\nexport const CHARACTER_ENERGY_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        constellation: number,\r\n        members: TMember[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n        teamMemberResult?: TTeamMemberResult,\r\n    ) => TCharacterEnergyRet[]\r\n} = {\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '525',\r\n            ];\r\n            const myEnergy = 5 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            ' ',\r\n            '10%',\r\n        ];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            messages.push('35%+100%');\r\n        }\r\n        const skillLevel = getCharacterInputValue(character, members, '', teamMemberResult) ?? 8;\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult) ?? 100;\r\n        const myEnergy = [3, 3, 3, 3.5, 3.5, 3.5, 4, 4, 4, 4, 4, 4, 4, 4, 4][skillLevel - 1] * (100 + (er / 10)) / 100;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_SKILL, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const messages2 = [\r\n            ' 0.51'\r\n        ];\r\n        const burstLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const somebodyEnergy = [0.8, 0.8, 0.8, 0.9, 0.9, 0.9, 1, 1, 1, 1, 1, 1, 1, 1, 1][burstLevel - 1];\r\n        result.push([RECHARGE_ENERGY_BURST, '', somebodyEnergy, allEnergy, otherEnergy, herEnergies, messages2]);\r\n        return result;\r\n    },\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '3.5',\r\n            ];\r\n            const myEnergy = 3.5 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '115',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '210',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList, 'E.Hold');\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        let constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '101',\r\n            ];\r\n            const myEnergy = 1 * Math.trunc(rotationLength / 10);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 1 * countC(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '10',\r\n        ];\r\n        const myEnergy = 0;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '23',\r\n            ];\r\n            const nCount = rotationList?.length ? Math.trunc(rotationList.filter(rotation => rotation.action.startsWith('N')).length / 3) : 1;\r\n            const myEnergy = 3 * nCount;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '121',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '511',\r\n            ];\r\n            const myEnergy = 5;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.221',\r\n            ];\r\n            const myEnergy = 1.2;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '100%1.231',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = 0;\r\n        const allEnergy = 1.2 * er / 100 * countE(character, rotationList);\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '91.513.5',\r\n            ];\r\n            const myEnergy = 9 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '100%5115',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = Math.min(15, 5 * er / 100) * countE(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const burstLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const somebodyEnergy = [1.6, 1.7, 1.8, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5][burstLevel - 1];\r\n        const messages2 = [\r\n            ' '\r\n        ];\r\n        result.push([RECHARGE_ENERGY_BURST, '', somebodyEnergy, allEnergy, otherEnergy, herEnergies, messages2]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '11',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1210.514',\r\n            ];\r\n            const myEnergy = 2 * (constellation >= 6 ? Math.trunc(rotationLength / 3) : Math.min(countE(character, rotationList) * 2, countC(character, rotationList)));\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '30.81',\r\n            ];\r\n            const myEnergy = 3;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                'HP315',\r\n            ];\r\n            const myEnergy = 3 * 5 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '243',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '20%',\r\n        ];\r\n        const myEnergy = 80 * 0.2 * countQ(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '2',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '1515',\r\n        ];\r\n        const qCount = countQ(character, rotationList);\r\n        const myEnergy = 15 * qCount;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        for (const element of ['', '', '', '']) {\r\n            let doBreak = false;\r\n            for (let herIndex = 0; herIndex < members.length; herIndex++) {\r\n                const herCm = getCharacterMaster(members[herIndex].name);\r\n                if (herCm?. == element) {\r\n                    herEnergies[herIndex] = myEnergy;\r\n                    doBreak = true;\r\n                }\r\n            }\r\n            if (doBreak) break;\r\n        }\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '2',\r\n        ];\r\n        const myEnergy = 2;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '33',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 3;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.2',\r\n            ];\r\n            const myEnergy = 1.2 * (countE(character, rotationList) ? Math.trunc(rotationLength / 2) : 1);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '-15%6211',\r\n            ];\r\n            const myEnergy = 2 * countC(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '45/3/412',\r\n            ];\r\n            const myEnergy = 3;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '115',\r\n            '100%1%+0.6%',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult) ?? 100;\r\n        let unit = 2.3 * (1 + (er - 100) * 0.006);\r\n        let unit2 = 0;\r\n        const memberResult = getMemberResult(character, members, teamMemberResult);\r\n        if (memberResult?.damageResult?.) {\r\n            memberResult.damageResult..forEach(entry => {\r\n                if (entry[0] === '') {\r\n                    unit = entry[2];\r\n                } else if (entry[0] === '_') {\r\n                    unit2 = entry[2];\r\n                }\r\n            })\r\n        }\r\n        if (memberResult?.characterInput?.weapon === '') {\r\n            unit2 *= [30, 35, 40, 45, 50][memberResult.characterInput. - 1] * 0.006;\r\n        }\r\n        const myEnergy = 0;\r\n        const allEnergy = (unit + unit2) * 5 * countQ(character, rotationList);\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '+10%0.80.21',\r\n            ];\r\n            const myEnergy = 0.8 * countN(character, rotationList, true);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1-1.564.518',\r\n            ];\r\n            const geoCount = members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n            const myEnergy = Math.min(18, 6 * geoCount) * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '18',\r\n            ];\r\n            const myEnergy = 3 * 8 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '4012',\r\n        ];\r\n        const myEnergy = 2;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '35',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 3 * 5 * countQ(character, rotationList);\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '315',\r\n            ];\r\n            const myEnergy = 15 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '()0.80.21',\r\n        ];\r\n        const electroCount = members.filter(member => getCharacterDetail(member.name)?. === '').length;\r\n        const myEnergy = electroCount > 0 ? 0.8 * (countN(character, rotationList) + countC(character, rotationList)) : 0;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.50.21',\r\n            ];\r\n            const myEnergy = 1.5;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            'HP3',\r\n        ];\r\n        const myEnergy = 3;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                'HP451',\r\n            ];\r\n            const myEnergy = 4 * Math.trunc(rotationLength / 5);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '+10%2205',\r\n            ];\r\n            const myEnergy = 2;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '13193',\r\n            ];\r\n            const myEnergy = 3 * 3 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '20.21',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '215101',\r\n            ];\r\n            const myEnergy = 15 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '8',\r\n            ];\r\n            const myEnergy = 8 * 2 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '351',\r\n            ];\r\n            const myEnergy = 3 * Math.trunc(rotationLength / 5);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '52.81',\r\n            ];\r\n            const myEnergy = 5 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '25-6',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            for (let i = 0; i < members.length; i++) {\r\n                if ('' == (CHARACTER_MASTER as any)[members[i].name]?.) {\r\n                    herEnergies[i] = 25 * countE(character, rotationList);\r\n                }\r\n            }\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        {\r\n            const messages: string[] = [\r\n                '15\\n\\n\\n33113',\r\n            ];\r\n            let myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            if (rotationList) {\r\n                let startIndex = -1;\r\n                for (let i = 0; i < rotationList.length; i++) {\r\n                    if (rotationList[i].member == character && rotationList[i].action === 'E') {\r\n                        startIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n                if (startIndex >= 0) {\r\n                    const ncpCountMap = new Map<string, number>();\r\n                    let rechargeCount = 0;\r\n                    for (let i = startIndex; i < rotationList.length; i++) {\r\n                        if (rotationList[i].member == character && rotationList[i].action === 'E') {\r\n                            rechargeCount = 3;\r\n                        } else if (rotationList[i].member != character && rechargeCount > 0) {\r\n                            if (rotationList[i].action.startsWith('N') || rotationList[i].action.startsWith('C') || ['P'].includes(rotationList[i].action)) {\r\n                                ncpCountMap.set(character, (ncpCountMap.get(character) ?? 0) + 1);\r\n                                rechargeCount--;\r\n                            }\r\n                        }\r\n                    }\r\n                    for (let i = 0; i < startIndex; i++) {\r\n                        if (rotationList[i].member != character && rechargeCount > 0) {\r\n                            if (rotationList[i].action.startsWith('N') || rotationList[i].action.startsWith('C') || ['P'].includes(rotationList[i].action)) {\r\n                                ncpCountMap.set(character, (ncpCountMap.get(character) ?? 0) + 1);\r\n                                rechargeCount--;\r\n                            }\r\n                        }\r\n                    }\r\n                    myEnergy = _.sum(Array.from(ncpCountMap.values())) * 3;\r\n                    for (let i = 0; i < members.length; i++) {\r\n                        if (ncpCountMap.has(members[i].name)) {\r\n                            herEnergies[i] = (ncpCountMap.get(members[i].name) ?? 0) * 3;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '8',\r\n            ];\r\n            const myEnergy = countQ(character) * 8;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.5400%\\n1',\r\n            ];\r\n            const visionCount = members.filter(member => ['', '', '', ''].includes((CHARACTER_MASTER as any)[member.name]?.)).length;\r\n            const myEnergy = 1.5 * 2 * visionCount * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '<span style=\"color:#FFD780FF\"></span><span style=\"color:#FFD780FF\"></span>11800%<span style=\"color:#99FFFFFF\"></span>16881',\r\n            ];\r\n            const myEnergy = 8 * Math.trunc(rotationLength / 8);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n}\r\n\r\nexport const CHARACTER_PARTICLE_EXTRA_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        constellation: number,\r\n        members: TMember[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n        onFields: number[],\r\n    ) => TCharacterParticleRet | undefined\r\n} = {\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const messages: string[] = [\r\n            '12',\r\n        ];\r\n        const hydroCount = members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n        const myParticle = hydroCount > 0 ? 2 * countE(character, rotationList) : 2;\r\n        const allParticle = 0;\r\n        result = [RECHARGE_PARTICLE_PASSIVE, '', '', myParticle, allParticle, [], messages];\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '30%',\r\n            ];\r\n            const myParticle = 0;\r\n            const allParticle = 2 / 3 * countN(undefined, rotationList);\r\n            result = [RECHARGE_PARTICLE_CONSTELLATION, String(constellationLevel), '', myParticle, allParticle, [], messages];\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '50%151',\r\n            ];\r\n            const myParticle = 0;\r\n            const allParticle = 0;\r\n            const herParticles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            let triggerCnt = 1;\r\n            if (rotationList?.length) {\r\n                const ct = 5;\r\n                const rindexArr: number[] = [];\r\n                let isRecorded = false;\r\n                for (let i = 0; i < rotationList.length; i++) {\r\n                    const rotation = rotationList[i];\r\n                    if (rotation.member == character) {\r\n                        if (rotation.action.startsWith('N') && !isRecorded) {\r\n                            rindexArr.push(i);\r\n                            isRecorded = true;\r\n                        }\r\n                    } else {\r\n                        isRecorded = false;\r\n                    }\r\n                }\r\n                const memberNameArr = members.map(member => member.name);\r\n                const onField = onFields[memberNameArr.indexOf(character)];\r\n                triggerCnt = Math.min(Math.trunc(rotationLength / ct), rindexArr.length + Math.max(0, Math.trunc(rotationLength * onField / 100 / ct) - 1));\r\n                for (let i = 0; i < triggerCnt; i++) {\r\n                    let nxtCharacter = character;\r\n                    if (i < rindexArr.length && (rindexArr[i] + 1) < rotationList.length) {\r\n                        nxtCharacter = rotationList[rindexArr[i] + 1].member;\r\n                    }\r\n                    const toIndex = memberNameArr.indexOf(nxtCharacter);\r\n                    herParticles[toIndex] += 1;\r\n                }\r\n            }\r\n            result = [RECHARGE_PARTICLE_CONSTELLATION, String(constellationLevel), '', myParticle, allParticle, herParticles, messages];\r\n        }\r\n        return result;\r\n    },\r\n}\r\n","import _ from \"lodash\";\r\nimport { NUMBER_OF_MEMBERS, TActionItem } from \"./team\";\r\nimport { RECHARGE_ENERGY_WEAPON, countC, countE, countN, countP, countQ } from \"./ERCalculatorCommon\";\r\n\r\nexport type TWeaponEnergyRet = [string, string, number, number, number, number[], string[]];\r\n\r\nexport const WEAPON_ENERGY_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        weapon: string,\r\n        weaponRefine: number,\r\n        members: string[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n    ) => TWeaponEnergyRet\r\n} = {\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '624/4.5/5/5.5/6HP24%/4.5%/5%/5.5%/6%',\r\n        ];\r\n        const myEnergy = [4, 4.5, 5, 5.5, 6][weaponRefine - 1] * 3 * countQ(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '301513126/7.5/9/10.5/12',\r\n        ];\r\n        const myEnergy = [6, 7.5, 9, 10.5, 12][weaponRefine - 1] * Math.min(countE(character, rotationList), countQ(character, rotationList) * 3, rotationLength / 5);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '120.60.11',\r\n        ];\r\n        const myEnergy = 0.6 * countN(character, rotationList, true);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '32.54.5/5/5.5/6/6.5',\r\n        ];\r\n        const myEnergy = [4.5, 5, 5.5, 6, 6.5][weaponRefine - 1];\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '8/10/12/14/16101',\r\n        ];\r\n        const myEnergy = [8, 10, 12, 14, 16][weaponRefine - 1] * Math.trunc(rotationLength / 10);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            'HP430.31338/9/10/11/12121',\r\n        ];\r\n        const myEnergy = [8, 9, 10, 11, 12][weaponRefine - 1];\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '2.5/2.75/3/3.25/3.50.71',\r\n        ];\r\n        const myEnergy = [2.5, 2.75, 3, 3.25, 3.5][weaponRefine - 1] * countP(undefined, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '8/10/12/14/16101',\r\n        ];\r\n        const myEnergy = [8, 10, 12, 14, 16][weaponRefine - 1] * Math.trunc(rotationLength / 10);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '+18%/23%/28%/33%/38%822212/13/14/15/16121',\r\n        ];\r\n        const myEnergy = [12, 13, 14, 15, 16][weaponRefine - 1] * Math.trunc(rotationLength / 12);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n}\r\n\r\nfunction weaponEnergySub_(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    members: string[],  // eslint-disable-line\r\n    rotationLength: number,  // eslint-disable-line\r\n    rotationList: TActionItem[] | undefined,\r\n): TWeaponEnergyRet {\r\n    const messages = [\r\n        '3623/3.5/4/4.5/5101',\r\n    ];\r\n    let myEnergy = 0;\r\n    const unit = [3, 3.5, 4, 4.5, 5][weaponRefine - 1];\r\n    if (rotationList?.length) {\r\n        let isInCt = false;\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (rotation.member == character) {\r\n                if (rotation.action.startsWith('E')) {\r\n                    if (!isInCt) {\r\n                        myEnergy += unit * 3;\r\n                        if (i === 0 || rotationList[i - 1].member != character || rotationList[i - 1].action !== 'Q') {\r\n                            myEnergy -= 3;\r\n                        }\r\n                    }\r\n                    isInCt = true;\r\n                }\r\n            } else {\r\n                isInCt = false;\r\n            }\r\n        }\r\n    } else {\r\n        myEnergy = unit * 3 - 3;\r\n    }\r\n    const allEnergy = 0;\r\n    const otherEnergy = 0;\r\n    const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n}\r\n\r\nfunction weaponEnergySub_(\r\n    character: string,  // eslint-disable-line\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    members: string[],  // eslint-disable-line\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,  // eslint-disable-line\r\n): TWeaponEnergyRet {\r\n    const messages = [\r\n        '130310212/2.5/3/3.5/4151',\r\n    ];\r\n    const myEnergy = [2, 2.5, 3, 3.5, 4][weaponRefine - 1] * 3 * Math.min(countE(character, rotationList) + countC(character, rotationList), Math.trunc(rotationLength / 15));\r\n    const allEnergy = 0;\r\n    const otherEnergy = 0;\r\n    const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n}\r\n","import _ from \"lodash\";\r\nimport { calculateArtifactStatsMain, calculateArtifactStats, calculateStats, calculateDamageResult } from \"@/calculate\";\r\nimport { overwriteObject } from \"@/common\";\r\nimport { TArtifactDetailInput, TCharacterInput, TConditionInput, TDamageResult, TOptionInput, TStats, TStatsInput, getDefaultArtifactDetailInput, getDefaultCharacterInput, getDefaultConditionInput, getDefaultDamageResultInput, getDefaultOptionInput, getDefaultStatsInput, loadRecommendation, makeBuildStorageKey, makeDamageDetailObjArrObjArtifactSets, makeDamageDetailObjArrObjCharacter, makeDamageDetailObjArrObjWeapon, makeDefaultBuildname, setupConditionValues, updateConditionsByTeam } from \"@/input\";\r\nimport { CHARACTER_MASTER, ELEMENTAL_RESONANCE_MASTER, TAnyObject, TCharacterDetail, TCharacterEntry, TCharacterKey, TWeaponEntry, TWeaponKey, TWeaponTypeKey, WEAPON_MASTER, getCharacterMasterDetail } from \"@/master\";\r\nimport { getElementalSkillActions } from \"@/particlemaster\";\r\n\r\nexport type TMember = {\r\n    id: number;\r\n    name: string;\r\n    buildname: string | undefined;\r\n    builddata: any | undefined;\r\n    tags: string[],\r\n    replacements: string[],\r\n};\r\n\r\nexport type TActionItem = {\r\n    id: number;\r\n    member: string;\r\n    action: string;\r\n};\r\n\r\nexport type TTeam = {\r\n    id: number;\r\n    name: string;\r\n    members: TMember[];\r\n    description: string,\r\n    rotation: TActionItem[];\r\n    rotationDescription: string,\r\n    tags: string[],\r\n};\r\n\r\nexport type TMemberResult = {\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n    statsInput: TStatsInput,\r\n    damageResult: TDamageResult,\r\n};\r\n\r\nexport type TTeamMemberResult = {\r\n    [key: string]: TMemberResult,\r\n};\r\n\r\nexport type TConstellation = {\r\n    [key: string]: number,\r\n};\r\n\r\nexport const NUMBER_OF_TEAMS = 10;\r\nexport const NUMBER_OF_MEMBERS = 4;\r\n\r\n// \r\nexport const CHARGED_WITH_NORMAL_WEAPON = ['', ''];\r\nexport const CHARGED_WITH_NORMAL_CHARACTER = ['', ''];\r\nexport const CHARGED_ONLY_CHARACTER = ['', '', '', ''];\r\n\r\nlet memberId = 0;\r\nconst characterDetailMap = new Map<string, TCharacterDetail>();\r\n\r\nexport function getCharacterMaster(character: string) {\r\n    let result;\r\n    if (character && character in CHARACTER_MASTER) {\r\n        result = CHARACTER_MASTER[character as TCharacterKey] as TCharacterEntry;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport async function setupCharacterDetailMap() {\r\n    const list: Promise<void>[] = [];\r\n    for (const character of Object.keys(CHARACTER_MASTER)) {\r\n        list.push(getCharacterMasterDetail(character as TCharacterKey).then(response => {\r\n            characterDetailMap.set(character, response);\r\n        }));\r\n    }\r\n    await Promise.all(list);\r\n}\r\n\r\nexport function getCharacterDetail(character: string) {\r\n    return characterDetailMap.get(character);\r\n}\r\n\r\nexport function getEnergyCost(character: string) {\r\n    return characterDetailMap.get(character)?.?. ?? 0;\r\n}\r\n\r\nexport function getWeaponMaster(weaponType: string, weapon: string) {\r\n    let result = undefined;\r\n    if (weaponType && weapon && weaponType in WEAPON_MASTER) {\r\n        const weaponTypeMaster = WEAPON_MASTER[weaponType as TWeaponTypeKey];\r\n        if (weapon in weaponTypeMaster) {\r\n            result = (weaponTypeMaster as any)[weapon] as TWeaponEntry;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getBuildnameFromStorageKey(storageKey: string) {\r\n    const work = storageKey.split('_');\r\n    const character = work[1];\r\n    work.splice(0, 2);\r\n    let result;\r\n    if (work.length > 0) {\r\n        result = work.join('_');\r\n    } else {\r\n        result = makeDefaultBuildname(character);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getBuildStorageKeys(character: string) {\r\n    return Object.keys(localStorage).filter(s => s.startsWith(makeBuildStorageKey(character)));\r\n}\r\n\r\nexport function getBuilddataFromStorage(character: string, buildname?: string) {\r\n    let result;\r\n    const storageKey = makeBuildStorageKey(character, buildname);\r\n    const storageValue = localStorage.getItem(storageKey);\r\n    if (storageValue) result = JSON.parse(storageValue);\r\n    return result;\r\n}\r\n\r\nexport function getDefaultMemberResult(): TMemberResult {\r\n    return {\r\n        characterInput: getDefaultCharacterInput(),\r\n        artifactDetailInput: getDefaultArtifactDetailInput(),\r\n        conditionInput: getDefaultConditionInput(),\r\n        optionInput: getDefaultOptionInput(),\r\n        statsInput: getDefaultStatsInput(),\r\n        damageResult: getDefaultDamageResultInput(),\r\n    }\r\n}\r\n\r\nexport const calculateMemberResult = async (member: TMember, team: TTeam): Promise<TMemberResult> => {\r\n    const result = getDefaultMemberResult();\r\n    if (!member.name) return result;\r\n    result.characterInput.character = member.name as TCharacterKey;\r\n    result.characterInput.characterMaster = await getCharacterMasterDetail(result.characterInput.character);\r\n\r\n    const DEFAULT_WEAPON: { [key: string]: TWeaponKey } = {\r\n        '': '',\r\n        '': '',\r\n        '': '',\r\n        '': '',\r\n        '': ''\r\n    };\r\n    result.characterInput.weapon = DEFAULT_WEAPON[result.characterInput.characterMaster.];\r\n\r\n    const builddata = member.builddata;\r\n    if (!builddata) return result;\r\n    await loadRecommendation(result.characterInput, result.artifactDetailInput, result.conditionInput, result.optionInput, builddata);\r\n\r\n    makeDamageDetailObjArrObjCharacter(result.characterInput);\r\n    makeDamageDetailObjArrObjWeapon(result.characterInput);\r\n    makeDamageDetailObjArrObjArtifactSets(result.characterInput);\r\n    setupConditionValues(result.conditionInput, result.characterInput, result.optionInput);\r\n    calculateArtifactStatsMain(\r\n        result.artifactDetailInput.,\r\n        result.artifactDetailInput.\r\n    );\r\n    calculateArtifactStats(result.artifactDetailInput);\r\n\r\n    result.conditionInput.checkboxList.forEach((entry) => {\r\n        result.conditionInput.conditionValues[entry.name] = false;\r\n    });\r\n    result.conditionInput.selectList.forEach((entry) => {\r\n        result.conditionInput.conditionValues[entry.name] = 0;\r\n    });\r\n    await updateConditionsByTeam(result.characterInput, result.conditionInput, result.optionInput);\r\n\r\n    // \r\n    if (getElementalResonance(team)) {\r\n        const workObj = {} as TStats;\r\n        getElementalResonance(team).filter(s => ['', '', '', ''].includes(s)).forEach(entry => {\r\n            result.optionInput.elementalResonance.conditionValues[entry] = true;\r\n            if (\"\" in (ELEMENTAL_RESONANCE_MASTER as any)[entry]) {\r\n                const detailObjArr = (ELEMENTAL_RESONANCE_MASTER as any)[entry].;\r\n                if (detailObjArr) {\r\n                    for (const detailObj of detailObjArr) {\r\n                        if (\"\" in detailObj && \"\" in detailObj) {\r\n                            if (detailObj. in workObj) {\r\n                                workObj[detailObj.] += detailObj.;\r\n                            } else {\r\n                                workObj[detailObj.] = detailObj.;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        overwriteObject(result.optionInput.elementalResonance.conditionAdjustments, workObj);\r\n    }\r\n\r\n    calculateStats(result.statsInput, result.characterInput, result.artifactDetailInput, result.conditionInput, result.optionInput);\r\n    calculateDamageResult(result.damageResult, result.characterInput, result.conditionInput, result.statsInput);\r\n\r\n    return result;\r\n}\r\n\r\nexport const getElementalResonance = (team: TTeam) => {\r\n    const result: string[] = [];\r\n    const work: TAnyObject = {};\r\n    const members = team.members.filter((member) => member.name);\r\n    if (members.length == 4) {\r\n        members.forEach((member) => {\r\n            const master = getCharacterMaster(member.name);\r\n            if (master) {\r\n                if (master. in work) {\r\n                    work[master.]++;\r\n                } else {\r\n                    work[master.] = 1;\r\n                }\r\n            }\r\n        });\r\n        if (Object.keys(work).length == 4) {\r\n            result.push(\"\");\r\n        } else {\r\n            Object.keys(work).forEach((key) => {\r\n                if (work[key] >= 2) {\r\n                    result.push(key + \"\");\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeBlankMember(id: number): TMember {\r\n    return {\r\n        id: id,\r\n        name: '',\r\n        buildname: undefined,\r\n        builddata: undefined,\r\n        tags: [],\r\n        replacements: [],\r\n    };\r\n}\r\n\r\nexport function makeBlankTeam(id: number) {\r\n    const team: TTeam = {\r\n        id: id,\r\n        name: '' + (id + 1),\r\n        members: [] as TMember[],\r\n        description: '',\r\n        rotation: [],\r\n        rotationDescription: '',\r\n        tags: [],\r\n    };\r\n    for (let i = 0; i < NUMBER_OF_MEMBERS; i++) {\r\n        team.members.push(makeBlankMember(memberId++));\r\n    }\r\n    return team;\r\n}\r\n\r\nexport function initializeMember(member: TMember) {\r\n    member.name = '';\r\n    member.buildname = undefined;\r\n    member.builddata = undefined;\r\n    member.tags = [];\r\n    member.replacements = [];\r\n}\r\n\r\nexport function initializeTeam(team: TTeam) {\r\n    team.name = '' + (team.id + 1);\r\n    team.members.forEach((member) => {\r\n        initializeMember(member);\r\n    });\r\n}\r\n\r\nexport function makeTeamsStr(teams: TTeam[]) {\r\n    const work: TTeam[] = _.cloneDeep(teams);\r\n    let id = 0;\r\n    work.forEach((team) => {\r\n        team.id = id++;\r\n        team.members.forEach(member => {\r\n            member.id = 0;\r\n            member.builddata = undefined;\r\n        })\r\n        if (team.rotation?.length) {\r\n            team.rotation.forEach(action => {\r\n                action.id = 0;\r\n            })\r\n        }\r\n    });\r\n    return JSON.stringify(work, (key, value) => value !== null ? value : undefined);\r\n}\r\n\r\nexport function copyTeams(output: TTeam[], input: any[], useBuilddata = false) {\r\n    let actionId = 0;\r\n    for (let i = 0; i < input.length; i++) {\r\n        const src = input[i];\r\n        let dst = output[i];\r\n        if (!dst) {\r\n            dst = makeBlankTeam(i);\r\n            output.push(dst);\r\n        }\r\n        dst.name = src.name;\r\n        for (let j = 0; j < dst.members.length; j++) {\r\n            if (src.members?.length) {\r\n                const srcMember = src.members[j];\r\n                if (srcMember) {\r\n                    dst.members[j].name = srcMember.name;\r\n                    if (useBuilddata) {\r\n                        dst.members[j].buildname = srcMember.buildname;\r\n                        dst.members[j].builddata = srcMember.buildname ? getBuilddataFromStorage(srcMember.name, srcMember.buildname) : undefined;\r\n                    } else {\r\n                        dst.members[j].buildname = undefined;\r\n                        dst.members[j].builddata = undefined;\r\n                    }\r\n                    dst.members[j].tags = srcMember.tags ?? [];\r\n                    dst.members[j].replacements = srcMember.replacements ?? [];\r\n                }\r\n            }\r\n        }\r\n        dst.description = src.description ?? '';\r\n        if (src.rotation?.length) {\r\n            dst.rotation = _.cloneDeep(src.rotation);\r\n            dst.rotation.forEach(rotation => {\r\n                rotation.id = actionId++;\r\n                if (rotation.action.startsWith('E')) {\r\n                    const actions = getElementalSkillActions(rotation.member);\r\n                    if (!actions.includes(rotation.action)) {\r\n                        rotation.action = actions[0];\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        dst.rotationDescription = src.rotationDescription ?? '';\r\n        dst.tags = src.tags ?? [];\r\n    }\r\n    if (output.length > input.length && output.length >= NUMBER_OF_TEAMS) {\r\n        output.splice(input.length);\r\n    }\r\n}\r\n\r\nexport function getNormalAttackDan(name: string) {\r\n    let dan = 1;\r\n    const master = getCharacterDetail(name);\r\n    if (master) {\r\n        for (const detail of [master.?., master.?.]) {\r\n            if (!detail) continue;\r\n            let workDan = 1;\r\n            detail.forEach((dmgDetail: any) => {\r\n                if (dmgDetail.) {\r\n                    const ret = dmgDetail..match(/.*(\\d).+/);\r\n                    if (!ret) return;\r\n                    const tempDan = Number(ret[1]);\r\n                    if (tempDan > workDan) {\r\n                        workDan = tempDan;\r\n                    }\r\n                }\r\n            })\r\n            if (dan < workDan) { // \r\n                dan = workDan;\r\n            }\r\n        }\r\n    }\r\n    return dan;\r\n}\r\n","import _ from \"lodash\";\r\n\r\n// 21\r\nexport type TParticleInfo = number | (number | undefined)[];\r\nexport type TParticleEntry = {\r\n    [key: string]: TParticleInfo,\r\n};\r\nexport type TParticleMaster = {\r\n    [key: string]: TParticleEntry,\r\n};\r\n\r\nexport const SP_SELF = 0x1000;  // =[0] or [0]* or [0]/[4]*[2]    \r\nexport const SP_NEXT = 0x1001;  // =[0]                               \r\nexport const SP_LONG = 0x1002;  // =[0]/[4]*[2]                       \r\nexport const SP_SHRT = 0x1003;  // =[0] or [0]* or [0]/[4]*[2]    \r\nconst C0 = 0x2000;  //  0\r\nconst C1 = 0x2001;  //  1\r\nconst C2 = 0x2002;  //  2\r\nconst C4 = 0x2004;  //  4\r\nconst C6 = 0x2006;  //  6\r\nexport const CT_AFTER_DURATION = 0x1000;    // \r\nconst PARTICLE_GENERATE_1 = 0x1000; // 1=1\r\nconst PARTICLE_GENERATE_2 = 0x2000; // 1=2\r\nconst PARTICLE_GENERATE_3 = 0x3000; // 1=3\r\nconst PARTICLE_GENERATE_4 = 0x4000; // 1=4\r\nconst PARTICLE_GENERATE_5 = 0x5000; // 1=5\r\nconst PARTICLE_GENERATE_6 = 0x6000; // 1=6\r\n// [0]\r\n// [0],[1]\r\n// [0],[1],[2],[3],[4]\r\n// [0],[1],[2],[3],[4],[5],[6],[7],[8],[9],[10]\r\nconst PARTICLE_MASTER: TParticleMaster = {\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, undefined, 9, undefined],\r\n        'E.Hold': [3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, undefined, 8 + CT_AFTER_DURATION, 15],\r\n        'E.Hold': [4, SP_NEXT, undefined, 8 + CT_AFTER_DURATION, 15],\r\n    },\r\n    '': {\r\n        'E': [4, SP_SELF, undefined, 7.5 + CT_AFTER_DURATION, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 20, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, undefined, 16, undefined],\r\n    },\r\n    '': {\r\n        'E': [2.3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 5, 15, 0.5 + PARTICLE_GENERATE_4],\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, 12.5, 16, undefined],\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, 20, 16, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [5, SP_NEXT, undefined, 15, undefined],  // \r\n        'E.Hold': [5, SP_NEXT, undefined, 15, undefined],   // \r\n    },\r\n    '': {\r\n        'E': [5, SP_SELF, undefined, 6.5 + CT_AFTER_DURATION, undefined],   // \r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 15, undefined],    // \r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 1, 7 + CT_AFTER_DURATION, undefined], // EN2\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, undefined, 18, undefined],    // \r\n        'E(skill)': 0,\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_SHRT, undefined, 20, 2 + PARTICLE_GENERATE_6],  // 0.667 * 6\r\n    },\r\n    '': {\r\n        'E': [4.5, SP_NEXT, undefined, 6 + CT_AFTER_DURATION, undefined],   // \r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 22, 14, 2.5],\r\n    },\r\n    '': {\r\n        'E': 2,\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, undefined, 18, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 18, undefined],\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 7.5, 16, 2],\r\n        'E(skill)': 0,\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, 30, 30, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [1.2, SP_LONG, 17, 15, 3.6],\r\n        'E.Hold': [1.2, SP_LONG, 17, 15, 3.6],\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, undefined, 6, 3], // CT3s\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, 12, 15, 10],\r\n        'E.Hold': [4, SP_NEXT, 12, 15, 10, C4, 4, SP_NEXT, 12, 15, 10],   // CT10s\r\n    },\r\n    '': {\r\n        'E.Press': [3.5, SP_NEXT, undefined, 9, undefined],\r\n        'E.Hold': [3.5, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, 6, 12, undefined],  // \r\n        'E.Hold': [5, SP_NEXT, 12, 18, undefined],  //  2\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 30, 20, 2.5],   // CT2.5s\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 10, 16, 2, C1, 1, SP_SELF, 14, 16, 2],    // CT2s\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': [5, SP_NEXT, undefined, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 12, 20, 2.5, C2, 1, SP_LONG, 18, 20, 2.5],    //  CT2.5s\r\n    },\r\n    '': {\r\n        'E.Press': [1, SP_SELF, 0, 18, 1.6 + PARTICLE_GENERATE_6],   // 11 CT1.6s\r\n        'E.Hold': [1, SP_SELF, 0, 18, 1.6 + PARTICLE_GENERATE_6],    // 11 CT1.6s\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 10, 6 + CT_AFTER_DURATION, 2 + PARTICLE_GENERATE_5, C6, 1, SP_SELF, 12, 6 + CT_AFTER_DURATION, 2 + PARTICLE_GENERATE_5],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_LONG, 25, 5, 7],     // CT7s\r\n        'E.Hold': [3, SP_LONG, 25, 6, 7],      // CT7s\r\n    },\r\n    '': {\r\n        'E': [1.5 + 1 + 1 + 1, SP_SELF, 8, 18, undefined],  // 8 12\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 7.5, undefined],\r\n        'E(burst)': [1.33, SP_NEXT, undefined, 3, undefined],  // 3s\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, 8, 12, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, undefined, 10, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [1.5, SP_SELF, 6, 12, 2.5 + PARTICLE_GENERATE_3],\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 14, 4, 2.5],    // CT2.5s\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, 10, 10, undefined],\r\n        'E.Hold': [4, SP_NEXT, 15, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, 6, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_LONG, 12, 20, 2],    // per damage CT2s\r\n    },\r\n    '': {\r\n        'E': [0.5, SP_LONG, 25, 10, 0.9],   // per damage CT0.9s\r\n    },\r\n    '': {\r\n        'E': 5,\r\n    },\r\n    '': {\r\n        'E': [1, SP_SELF, 10, 18, 2 + PARTICLE_GENERATE_4],   // CT2s 4\r\n    },\r\n    '': {\r\n        'E': [4.5, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [1.5, SP_NEXT, undefined, 4, undefined],\r\n        'E.Hold': [2.5, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [2.5, SP_SELF, 9, 16, 5 + PARTICLE_GENERATE_2], // CT5s 2\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 10, undefined],\r\n        'E(burst)': [0, SP_NEXT, undefined, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [2, SP_SHRT, 6, 10, 0 + PARTICLE_GENERATE_2]\r\n    },\r\n    '': {\r\n        'E.Press': [0.67, SP_LONG, 30, 4, 2],   // 10.67 CT2s\r\n        'E.Hold': [0.67, SP_LONG, 30, 4, 2],    // 10.67 CT2s\r\n    },\r\n    '': {\r\n        'E.Press': [0.5, SP_LONG, 20, 4, 1.5],  // CT1.5s\r\n        'E.Hold': [0.5, SP_LONG, 20, 12, 1.5],  // CT1.5s\r\n    },\r\n    '': {\r\n        'E': [1 / 3 * 9, SP_SELF],              // 9s\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, undefined, 20, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 15, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2.5, SP_NEXT, undefined, 7.5, undefined],\r\n        'E.Hold': [2.5, SP_NEXT, undefined, 7.5, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3.33, SP_SHRT, 5, 12, undefined],\r\n        'E.Hold': [3.33, SP_SHRT, 5, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': [0, SP_NEXT, 15, 30, undefined],\r\n    },\r\n    '': {\r\n        'E': [1.33, SP_SELF, undefined, 10, 0 + PARTICLE_GENERATE_3],\r\n    },\r\n    '': {\r\n        'E.Press': [2.67, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [2.67, SP_NEXT, 1, 6 + CT_AFTER_DURATION, undefined], // 5\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, undefined, 10, undefined],\r\n        'E(burst)': [1, SP_NEXT, undefined, 10, undefined], // \r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, undefined, 12, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, 12, 8, undefined],\r\n        'E.Hold': [3 + 1, SP_NEXT, 12, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, undefined, 6, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, 12, 15, undefined],\r\n        'E.Hold': [4, SP_NEXT, 12, 15, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [1, SP_LONG, 10, 15, 1.5],\r\n        'E.Hold': [1, SP_LONG, 10, 15, 1.5]\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, 18, 6, 5.5, C6, 2, SP_LONG, 18, 20, 5.5], // CT5.5s\r\n    },\r\n    '': {\r\n        'E': [1.33, SP_LONG, 12, 12, 3]     // CT3s\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': 4,     // 2:0-1/2.5:2-3/3:4=\r\n    },\r\n    '': {\r\n        'E': [0.45, SP_LONG, 12, 15, 1.5, C2, 0.45, SP_LONG, 15, 15, 1.5],  // CT1.5s\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, undefined, 9, undefined],\r\n        'E.Hold': [3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, 10, 10, undefined],\r\n        'E.Hold': [2, SP_NEXT, 10, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [3.5, SP_NEXT, 8, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, 10, 6, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [3, SP_NEXT, 10, 10 + CT_AFTER_DURATION, undefined], // 10\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 9, undefined],\r\n    },\r\n    '': {\r\n        'E': [3, SP_NEXT, undefined, 6, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 12, 18, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [0.8 * 2, SP_NEXT, 4.8, 6, undefined], //  Lv.72.4\r\n        'E.Hold': [0.8 * 5, SP_NEXT, 12, 15, undefined], //  Lv.72.4\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, undefined, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 10, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': [0, SP_NEXT, 12, 24, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2.25, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [3, SP_NEXT, undefined, 7.5, undefined],  // 12CT10\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_LONG, 10, 25, 1, C6, 0.67, SP_LONG, 12, 25, 1],\r\n    },\r\n    '': {\r\n        'E': [3.33, SP_NEXT, undefined, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': [4.5, SP_NEXT, 15, 21, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [2, SP_NEXT, undefined, 7.5, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 7.5, undefined],  // \r\n    },\r\n    '': {\r\n        'E': [1, SP_SHRT, 8, 12, 2 + PARTICLE_GENERATE_4],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, undefined, 6, undefined],\r\n        'E.Hold': [4, SP_NEXT, undefined, 10, undefined],\r\n        'E.Press(burst)': 0,\r\n    },\r\n    '': {\r\n        'E': [0, SP_NEXT, 15, 32, undefined, C2, 0, SP_NEXT, 15, 27.2, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [0, SP_NEXT, undefined, 1, undefined],\r\n        'E.Hold': [5, SP_NEXT, undefined, 16, undefined],\r\n    },\r\n    '': {\r\n        'E': [2.67, SP_NEXT, undefined, 6, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_SHRT, 8, 15, undefined],\r\n        'E.Hold': [4, SP_SHRT, 8, 15, undefined],\r\n    },\r\n    '()': {\r\n        'E.Press': [1, SP_SHRT, 12, 18, 2.9],   // 126\r\n        'E.Hold': [1, SP_SHRT, 12, 18, 2.9],    // 126\r\n    },\r\n    '()': {\r\n        'E.Press': [3.33, SP_NEXT, undefined, 10, undefined],\r\n        'E.Hold': [3.33, SP_NEXT, 6, 10, undefined],            // 6\r\n    },\r\n    '()': {\r\n        'E': [2.5, SP_NEXT, undefined, 8, undefined],\r\n    },\r\n    '()': {\r\n        'E': [1, SP_NEXT, 6, 13.5, undefined],\r\n    },\r\n    '()': {\r\n        'E.Press': [3.33, SP_NEXT, 30, 6, undefined],   // 1CT-2\r\n        'E.Hold': [3.33, SP_NEXT, 30, 6, undefined],    // 1CT-2\r\n    },\r\n    '()': {\r\n        'E.Press': [2, SP_NEXT, undefined, 5, undefined],\r\n        'E.Hold': [3.33, SP_NEXT, undefined, 8, undefined], // \r\n    },\r\n}\r\n\r\nObject.keys(PARTICLE_MASTER).forEach(key => {\r\n    const pentry = PARTICLE_MASTER[key];\r\n    Object.keys(pentry).forEach(key2 => {\r\n        const pinfo = pentry[key2];\r\n        if (_.isNumber(pinfo)) {\r\n            return;\r\n        }\r\n        if (_.isArray(pinfo)) {\r\n            if (pinfo.length === 2 || pinfo.length === 5 || pinfo.length === 11) {\r\n                const receiveTypeArr: (number | undefined)[] = [];\r\n                receiveTypeArr.push(pinfo[1]);\r\n                if (pinfo.length === 11) {\r\n                    receiveTypeArr.push(pinfo[7]);\r\n                }\r\n                if (pinfo.filter(s => s !== undefined && !_.isNumber(s)).length === 0\r\n                    && receiveTypeArr.filter(s => s === undefined || ![SP_SELF, SP_NEXT, SP_LONG, SP_SHRT].includes(s)).length === 0\r\n                    && (pinfo.length !== 11 || (pinfo[5] !== undefined && [C1, C2, C4, C6].includes(pinfo[5])))) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        console.error(key, key2, pinfo);\r\n    })\r\n})\r\n\r\n/**    */\r\nexport const CHARACTER_Q_TO_E_ARR = ['', '', ''];\r\n/** CT */\r\nexport const CHARACTER_E_CT_RESET_BY_Q_ARR = ['', ''];\r\n\r\n/**  */\r\nexport const CHARACTER_E_UNTIL_MAP = new Map<string, Map<string[], number>>();\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E'], 2],]));            // EEE\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E', 'C'], 1],]));             // E(E|C)\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E', 'N'], 3],]));         // E(E|N){3}\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E'], 1], [['N'], 4],]));  // E(E|N{4})\r\n\r\n/**  */\r\nexport const CHARACTER_E_DELAY_MAP = new Map<string, string[]>();\r\nCHARACTER_E_DELAY_MAP.set('', ['C']);\r\nCHARACTER_E_DELAY_MAP.set('', ['C']);\r\nCHARACTER_E_DELAY_MAP.set('', ['P']);\r\nCHARACTER_E_DELAY_MAP.set('', ['P']);\r\n\r\n/**  */\r\nexport const CHARACTER_E_FIRST_ARR = ['', '', ''];\r\n\r\n/**  */\r\nexport const CHARACTER_Q_NOT_RECHARGEABLE = ['', ''];\r\n\r\nexport function getElementalSkillActions(character: string) {\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    return particleMaster ? Object.keys(particleMaster).filter(action => action.startsWith('E') && !action.includes('(burst)') && !action.includes('(skill)')) : ['E'];\r\n}\r\n\r\nexport function getParticleInfo(character: string, action: string, constellation = 0, isBursting = false, isSkilling = false) {\r\n    const result: TParticleInfo = [0, SP_NEXT, 0, undefined, undefined];    // , , , , CT\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    if (particleMaster) {\r\n        const keyArr: string[] = [];\r\n        if (isBursting) {\r\n            keyArr.push(action + '(burst)');\r\n        }\r\n        if (isSkilling) {\r\n            keyArr.push(action + '(skill)');\r\n        }\r\n        keyArr.push(action);\r\n        for (const key of keyArr) {\r\n            if (key in particleMaster) {\r\n                const work = particleMaster[key];\r\n                if (_.isNumber(work)) {\r\n                    result[0] = work;\r\n                } else if (_.isArray(work)) {\r\n                    let start = 0;\r\n                    if (work.length > 5 && work[5] !== undefined && work[5] <= (constellation + C0)) {\r\n                        start = 6;\r\n                    }\r\n                    for (let i = 0; i < 5; i++) {\r\n                        if (work.length > (i + start)) {\r\n                            result[i] = work[i + start];\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleNumFromInfo(particleInfo: TParticleInfo, leftTime?: number) {\r\n    let result = 0;\r\n    if (_.isNumber(particleInfo)) {\r\n        result = particleInfo;\r\n    } else {\r\n        result = particleInfo[0] ?? 0;\r\n        const receiveType = getReceiveTypeFromInfo(particleInfo);\r\n        const particleCooltime = getParticleCooltimeFromInfo(particleInfo);\r\n        const generateCount = getParticleGenerateCountFromInfo(particleInfo);\r\n        let duration = getDurationFromInfo(particleInfo);\r\n        switch (receiveType) {\r\n            case SP_SELF:   // \r\n            case SP_SHRT:   // ()\r\n                if (generateCount) {\r\n                    result *= generateCount;\r\n                } else if (particleCooltime && duration) {\r\n                    result *= Math.ceil(duration / particleCooltime);\r\n                }\r\n                break;\r\n            case SP_NEXT:   // \r\n                break;\r\n            case SP_LONG:   // ()\r\n                if (particleCooltime) {\r\n                    result /= particleCooltime;\r\n                }\r\n                if (duration > 0) {\r\n                    if (leftTime !== undefined && duration > leftTime) {\r\n                        duration = Math.max(0, leftTime);\r\n                    }\r\n                    result *= duration;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    return _.round(result, 2);\r\n}\r\n\r\nexport function getReceiveTypeFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 1) ? particleInfo[1] ?? SP_NEXT : SP_NEXT;\r\n}\r\n\r\n/**  */\r\nexport function getDurationFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 2) ? particleInfo[2] ?? 0 : 0;\r\n}\r\n\r\n/**  */\r\nexport function getCooltimeFromInfo(particleInfo: TParticleInfo) {\r\n    let result = (_.isArray(particleInfo) && particleInfo.length > 3) ? particleInfo[3] : undefined;\r\n    if (result) {\r\n        if (result > CT_AFTER_DURATION) {\r\n            result -= CT_AFTER_DURATION;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function getCooltimeTypeFromInfo(particleInfo: TParticleInfo) {\r\n    let result = (_.isArray(particleInfo) && particleInfo.length > 3) ? particleInfo[3] : undefined;\r\n    if (result) {\r\n        if (result > CT_AFTER_DURATION) {\r\n            result = CT_AFTER_DURATION;\r\n        } else {\r\n            result = 0;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function getParticleCooltimeFromInfo(particleInfo: TParticleInfo) {\r\n    let result = (_.isArray(particleInfo) && particleInfo.length > 4) ? particleInfo[4] : undefined;\r\n    if (result) {\r\n        while (result >= PARTICLE_GENERATE_1) {\r\n            result -= PARTICLE_GENERATE_1;\r\n        }\r\n        result = _.round(result, 2);\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function getParticleGenerateCountFromInfo(particleInfo: TParticleInfo) {\r\n    let result = (_.isArray(particleInfo) && particleInfo.length > 4) ? particleInfo[4] : undefined;\r\n    if (result) {\r\n        result = Math.trunc(result / PARTICLE_GENERATE_1);\r\n    }\r\n    return result;\r\n}\r\n","import { render } from \"./ArtifactItem.vue?vue&type=template&id=632d0887&scoped=true&ts=true\"\nimport script from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactItem.vue?vue&type=style&index=0&id=632d0887&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-632d0887\"]])\n\nexport default __exports__","import { render } from \"./ArtifactSetSelect.vue?vue&type=template&id=91b28a50&scoped=true&ts=true\"\nimport script from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactSetSelect.vue?vue&type=style&index=0&id=91b28a50&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-91b28a50\"]])\n\nexport default __exports__","import { render } from \"./CharacterSelect.vue?vue&type=template&id=6b0e72ca&scoped=true&ts=true\"\nimport script from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./CharacterSelect.vue?vue&type=style&index=0&id=6b0e72ca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b0e72ca\"]])\n\nexport default __exports__","import script from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\nexport * from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { render } from \"./ERCalculator.vue?vue&type=template&id=7de6944e&scoped=true&ts=true\"\nimport script from \"./ERCalculator.vue?vue&type=script&lang=ts\"\nexport * from \"./ERCalculator.vue?vue&type=script&lang=ts\"\n\nimport \"./ERCalculator.vue?vue&type=style&index=0&id=7de6944e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7de6944e\"]])\n\nexport default __exports__","import { render } from \"./MemberItem.vue?vue&type=template&id=490d348a&ts=true\"\nimport script from \"./MemberItem.vue?vue&type=script&lang=ts\"\nexport * from \"./MemberItem.vue?vue&type=script&lang=ts\"\n\nimport \"./MemberItem.vue?vue&type=style&index=0&id=490d348a&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TeamEditorModal.vue?vue&type=template&id=2b4d924c&scoped=true&ts=true\"\nimport script from \"./TeamEditorModal.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamEditorModal.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamEditorModal.vue?vue&type=style&index=0&id=2b4d924c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2b4d924c\"]])\n\nexport default __exports__","import { render } from \"./TeamItem.vue?vue&type=template&id=291c6742&ts=true\"\nimport script from \"./TeamItem.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamItem.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamItem.vue?vue&type=style&index=0&id=291c6742&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TeamRotation.vue?vue&type=template&id=b2eaab7c&scoped=true&ts=true\"\nimport script from \"./TeamRotation.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamRotation.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamRotation.vue?vue&type=style&index=0&id=b2eaab7c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b2eaab7c\"]])\n\nexport default __exports__"],"names":["lodash_1","__importDefault","require","common_1","input_1","master_1","vue_1","CompositionFunction_vue_1","ArtifactSetSelect_vue_1","exports","defineComponent","name","props","artifact","type","Object","required","id","Number","control","String","initial","Boolean","selected","score","components","ArtifactSetSelect","default","emits","setup","context","displayName","displayStatValue","percent","copiedArtifact","reactive","cloneDeep","artifactSetMasters","ARTIFACT_SET_MASTER_DUMMY","isEditing","ref","isSelected","isListShow","artifactImgSrc","computed","getArtifactIconUrl","setname","cat_id","MAINSTAT_CAT_ARR","Array","from","Set","_ARRAY","map","s","replace","_ARRAY","_ARRAY","_ARRAY","_ARRAY","mainStatOptions","subStatOptions","ARRAY","statStep","stat","subStatOptionDisabled","value","work","subStats","includes","onChange","emit","starOnChange","rarity","artifactIconOnClick","selectOnClick","updateArtifactSet","artifactSet","master","ARTIFACT_SET_MASTER","","artifact_list","onLoad","undefined","watch","newVal","oldVal","overwriteObject","visible","index","bgImageClass","item","STAR_BACKGROUND_IMAGE_CLASS","selectedClass","key","artifactSetMastersRea","filteredList","ARTIFACT_SET_MASTER_LIST","artifactSetEffects","result","length","push","","character","characters","visionSrc","ELEMENT_IMG_SRC","","elementList","keys","elementSrc","element","elementCheckList","weaponList","WEAPON_IMG_SRC","weaponSrc","weapon","weaponCheckList","checkListOnChange","checkList","filter","forEach","elementChecked","weaponChecked","entry","CHARACTER_MASTER_LIST","","selectionNumber","indexOf","characterOnClick","blankIndex","i18n_1","vue_i18n_1","CompositionFunction","t","te","useI18n","useScope","localeList","setI18nLanguage","locale","global","loadLocaleMessages","document","querySelector","setAttribute","async","messages","fetch","then","resp","json","setLocaleMessage","nextTick","re","RegExp","reRet","exec","tempArr","split","hasPercent","endsWith","STAT_PERCENT_LIST","postfix","displayStatName","opt_s","myPercent","p","Math","pow","round","displayStatAbbrev","startsWith","targetValue","event","target","HTMLInputElement","HTMLSelectElement","displayOptionName","particlemaster_1","team_1","ERCalculatorCommon_1","ERCalculatorFunc_1","team","teamMemberResult","constellations","calculatorInput","inputRowParticle","inputRowEnergy","inputRowParticleEnemy","DEFAULT_ROTATION_LENGTH","DEFAULT_COMBAT_LENGTH","rotationLength","combatLength","supplyFromEnemy","isOpenSupplyFromEnemy","REPLACE_WEAPON_MAP","isShowUsage","onMounted","setupCharacterDetailMap","updateRotationLength","setupInput","watchCount","getConstellation","workArr","members","member","characterInput","","memberNameArr","eLength","fill","NUMBER_OF_MEMBERS","qLength","rotation","i","memberIndex","action","characterDetail","getCharacterDetail","ct","","","constellation","CHARACTER_Q_TO_E_ARR","particleInfo","getParticleInfo","ect","getCooltimeFromInfo","max","qct","CHARACTER_E_CT_RESET_BY_Q_ARR","min","newLength","updateOnFields","onFields","getOnFieldRate","onField","isEqual","setupInputRows","deep","newInput","memberResult","weaponRefine","","artifactSet4","artifactSets","replaceWeapons","energyCost","","initialWeapon","currentWeapon","splice","pushInputRowParticle","inputRows","newMessages","particle","initialValues","rechargeKind","triggerName","currentValues","unit","message","RECHARGE_PARTICLE_SKILL","RECHARGE_PARTICLE_PASSIVE","RECHARGE_PARTICLE_CONSTELLATION","pushInputRowEnergy","energy","RECHARGE_ENERGY_SKILL","RECHARGE_ENERGY_BURST","RECHARGE_ENERGY_PASSIVE","RECHARGE_ENERGY_CONSTELLATION","newInputRowPacticle1","newInputRowPacticle2","newInputRowEnergy","newInputRowResonance","newinputRowParticleEnemy","getParticleByCharacter","getParticleByCharacterExtra","energyByCharacter","getEnergyByCharacter","particleByWeapon","getParticleByWeapon","energyByWeapon","getEnergyByWeapon","energyByArtifact","getEnergyByArtifact","energyByAttack","getEnergyByAttack","particleByResonance","getParticleByResonance","num","splitNumToArrByOnFieldRate","RECHARGE_PARTICLE_ENEMY","burstCounts","countQ","particleRecharges","characterMaster","getCharacterMaster","myElement","input","isRechargeKindParticle","j","energyRechargeGls","isRechargeKindEnergy","burstCount","particleEnergy","er","ceil","CHARACTER_E_DECREMENT_IN_BURST","CHARACTER_MASTER","getElementalSkillActions","sort","characterImgSrc","icon_url","IMG_SRC_DUMMY","weaponImgSrc","characterMater","getWeaponMaster","replaceWeaponImgSrc","rowImgSrc1","row","RECHARGE_PARTICLE_RESONANCE","rowImgSrc1Class","rowImgSrc2","","","obj","","constellationObj","RECHARGE_PARTICLE_FAVONIUS","RECHARGE_ENERGY_WEAPON","weaponType","weaponMaster","RECHARGE_ENERGY_ARTIFACT","artifactSetMater","image","RECHARGE_ENERGY_ATTACK","bgColorClass","ELEMENT_BG_COLOR_CLASS","bgColorClass2","replaceWeaponClass","actionName","inputOnChange","replaceWeaponOnClick","resetInput","inputRow","CHARACTER_E_UNTIL_MAP","CHARACTER_E_DELAY_MAP","CHARACTER_Q_NOT_RECHARGEABLE","displayStat","showEquipment","statsObj","viewable","tags","elementalResonance","characterImgClass","visionImgSrc","builddata","buildname","getBuilddataFromStorage","WEAPON_MASTER","imgWeaponSrc","weaponName","statValue","replaceImgSrc","replIndex","replacements","imgArtifactSetSrc","artifactSetName","tagColorClass","ELEMENT_COLOR_CLASS","toLowerCase","characterOnDblclick","locate","confirm","teammembers","pushBuildinfoToSession","window","open","CharacterSelect_vue_1","MemberItem_vue_1","CharacterSelect","MemberItem","teamTags","characterSelectMode","workTeam","description","rotationDescription","selectedMemberId","MEMBER_TAG_LIST","selectedMemberBuildname","replacementIndex","txtTeamTags","workTeamTags","duplicateTeam","clone","setupTxtTeamTags","updateCharacters","newCharacters","workBuildnames","getBuildStorageKeys","getBuildnameFromStorageKey","makeDefaultBuildname","characterSelectModeOnClick","memberOnClick","memberSelectedClass","selectedMemberName","tagOnClick","tag","tagSelectedClass","buildnames","defaultBuildname","others","buildnameOnChange","updateReplacements","join","txtTeamTagsOnChange","teamTagSelected","teamTagOnClick","cancelOnClick","okOnClick","calculate_1","requied","editable","displayRes","displayTags","memberStats","memberResults","res","resKey","initializeRes","watchFunc","getElementalResonance","resonanceElementImgSrcs","src","list","calculateMemberResult","Promise","all","results","statsInput","calculateStat","calculateRes","teamAdjustments","","damageDetail","detailObj","makeDetailObj","","","","evalFormula","damageResult","","","toStat","key2","dmgElements","artifactSet4s","","isNumber","isPlainObject","level","","","talentDetail","countHy","countCr","workRes","console","log","resBgClass","editOnClick","jumpToRotation","vuedraggable_1","ERCalculator_vue_1","draggable","ERCalculator","removeMode","normalAttackActions","elementalSkillActions","rotationList","actionId","selectedActionId","initializeTeam","isCWith","CHARGED_WITH_NORMAL_WEAPON","CHARGED_WITH_NORMAL_CHARACTER","CHARGED_ONLY_CHARACTER","getNormalAttackDan","isSameMember","actions","updateRotation","normalAttackIconSrc","selectedAction","actionArr","getActionDetail","","previousRotation","elementalSkillIconSrc","elementalBurstIconSrc","colorClass","actionDisplay","selectedActionClass","rotationListOnChange","listActionOnClick","actionKey","rotationActionOnClick","removeItemOnClick","selectedActionOnClick","_hoisted_1","class","_hoisted_2","_hoisted_3","style","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","render","_ctx","_cache","$props","$setup","$data","$options","_component_ArtifactSetSelect","resolveComponent","openBlock","createElementBlock","createElementVNode","onClick","$event","alt","toDisplayString","withDirectives","mainStat","args","Fragment","renderList","option","vModelSelect","mainStatValue","step","vModelText","dummy","subStat","disabled","createCommentVNode","createVNode","vShow","normalizeClass","$emit","vModelCheckbox","colspan","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","for","_hoisted_50","_hoisted_51","_hoisted_52","createTextVNode","refine","rowIndex","reduce","c","_","columnIndex","weaponIndex","createStaticVNode","entries","untilMap","delayArr","onDblclick","_component_CharacterSelect","_component_MemberItem","createBlock","minlength","maxlength","placeholder","_component_draggable","_component_ERCalculator","handle","delay","animation","withCtx","rows","setupReactionDmgElementMap","REACTION_DMG_ARR","reactionDmg","reaction","ELEMENTAL_REACTION_MASTER","reactionMaster","REACTION_DMG_ELEMENT_MAP","set","getLevelStr","ascension","ARRAY","getStatValueByLevel","statObj","myLevelStr","lowLevel","highLevel","lowValue","highValue","getPropertyValueByLevel","getValueByLevel","valueObj","levelArr","calculateArtifactStatsMain","artifactStatsMain","mainstats","statWithRarity","ARTIFACT_MAIN_MASTER","calculateArtifactSubStatByPriority","artifactStatsSub","prioritySubstats","priotritySubstatIndices","priotritySubstatValues","prioritySubstatCounts","totalCount","noPrioritySubstatArr","noPriorityCount","floor","substat","ARTIFACT_SUB_MASTER","star4Count","multiplier","calculateArtifactStats","artifactDetailInput","artifactStats","","","","makeEvalableScript","formula","replaceMap","Map","has","arr","major","minor","entryArr","warn","getStatValue","replaceAll","opt_max","opt_min","script","eval","error","debug","calculateStats","conditionInput","optionInput","","","weaponAscension","","weaponLevel","","workStatsObj","TEMPLATE","conditionValues","enemyMaster","statAdjustments","ARRAY","statAdjustmentsEx","ARRAY","_Var","_Var","_Var","teamOption","miscOption","optionObj","conditionAdjustments","workValue","my","validConditionValueArr","makeValidConditionValueArr","myDamageDetail","damageDetailMyCharacter","damageDetailMyWeapon","damageDetailMyArtifactSets","CHANGE_KIND_TALENT","myDetailObj","number","checkConditionMatches","DAMAGE_RESULT_TEMPLATE","calculateStatsTop","updateStatsWithCondition","my","","workConditionAdjustments","statFormulaMap","CHANGE_KIND_STATUS","hasCondition","my","my","updateStatsWithConditionSub2","get","saveStatsObj","hpStatArr","defStatArr","atkStatArr","otherStatArr","_ARRAY","_ARRAY","ARRAY","ARRAY","ARRAY","formulaStatArr","compareFunction","oldStatsObj","workStat","updateStatsWithConditionSub","fromStat","formulaKey","formulaArr","diffStats","updateStats","topValue","kind","maxFormula","minFormula","a","b","lowestArr","aIndex","bIndex","calculateElementalResonance","ELEMENTAL_RESONANCE_MASTER","matchRet","dendroOption","calculateDamageResult","vision","reactionResult","TEMPLATE","reactionMasterArr","dmgElementSet","add","selectList","selectEntry","selectedIndex","dmgElement","options","has","characterArr","","","","reactionObj","resultValue","calculate","optionValue","calculate","calculate","calculate","suffix","dmg","critRateKey","critRate","critDmgKey","critDmg","","isArray","category","talentDetailArr","workObj","resultArr","calculateDamageFromDetail","n","sum","damageTakenArr","damageTaken","calculateDamageTaken","resScoreArr","calculateDamageResultLunarReaction","allMap","template","makeTDamageResultEntry","teamMembers","supporter","supporters","nonCrit","crit","expectedValue","checkboxList","numberList","conditionStr","myCondStr","myCondStrArr","resultSub","checkConditionMatchesSub","opkind","getConditionOpkind","conditionKeyValArr","conditionKey","conditionVal","isNumeric","tempVal","substring","tempValArr","fromVal","toVal","actualVal","NUMBER_CONDITION_VALUE_RE","test","elementalMastery","dmgBuff","opt_dmgElement","baseDmgUp","dmgUp","baseDmg","ELEMENTAL_REACTION_BASE_DAMAGE_MASTER","calculateEnemyRes","calculateEnemyDef","opt_ignoreDef","enemyLevel","calcIgnoreDef","calcDef","Infinity","statName","opt_element","myArr","isCalc","isCalc","isCalc","my","my","myHIT","my","talentChangeDetailObjArr","getChangeDetailObjArr","myConditionValuesAfter","delCondition","isBoolean","addCondition","isString","newValue","desc","myConditionInputAfter","validConditionValueArrAfter","","damageDetailObj","matchesBefore","matchesAfter","valueBefore","valueAfter","before","after","diff","new","","myTalentChangeDetailObjArr","my","myArr","myValue","myNewValueObj","JSON","parse","stringify","concat","tempStatsObj","entryObj","isValid","HIT","my","","DAMAGE_CATEGORY_ARRAY","myResult","calculateDamageFromDetailSubLunar","calculateDamageFromDetailSub","myResultWork","temp","dmgUpStatArr","dmgUpStat","isUseReference","buffArr","","","my","my","my","buff","my","my","my","my","myResult","myResult","workKind","em","emBonus","otherBonus","changeKind","nameArr","ALL_ELEMENTS","damage","def","dmgReduction","calculateArtifactScore","scoringStats","scoringStat","magnification","srcStat","srcStatValue","calculatedSupporter","setupTeamOptionSupporter","build","getDefaultCharacterInput","getDefaultArtifactDetailInput","getDefaultConditionInput","getDefaultStatsInput","getDefaultDamageResultInput","optionDetails1","optionDetails2","conditionMap","exclusionMap","getCharacterMasterDetail","loadRecommendation","makeDamageDetailObjArrObjCharacter","makeDamageDetailObjArrObjWeapon","makeDamageDetailObjArrObjArtifactSets","setupConditionValues","","updateNumberConditionValues","myCharacterMaster","teamOptions","TEAM_OPTION_MASTER_LIST","makeSupporterCondition","makeDamageDetailObjArr","makeConditionExclusionMapFromStr","characterOptions","weaponOptions","elementalReactionArr","artifactSetOptions","","damageDetailObjArr","makeTeamOptionDetailObjArr","condition","getChangeKind","calculateConditionAdjustments","stats","damageDetailObjs","refStats","kinds","elem","tempKind","TEAM_OPTION_NOT_UNIQUE_ARR","calculateTeamStatsAdjustments","topStats","workInput","optionDetails","calculateMiscStatsAdjustments","teamConditionValueArr","getCritFromResultEntry","getDamageResultArr","rotationDamageEntry","calculateRotationDamageEntry","reactions","dmgResultEntry","count","counts","plainDmg","calculateReactedDamage","workDmg","calculateRotationTotalDamage","rotationDamageArr","dmgIndex","elementalReaction","reactionTimes","reactionKey","getAmplifyingReactionElement","reactionElement","isFinite","myType","prototype","toString","call","dst","srcKeys","basename","path","pop","shift","i18n","createI18n","legacy","fallbackLocale","isGlobal","makeStatusTemplate","ARRAY_MAP","makeEnemyStatusTemplate","ARRAY","ARRAY","ARRAY","ARRAY","_ARRAY","_ARRAY","_","_","_","_","","","","","","","","","","","","","","","","","","","","","","","","","","","ALL","","","","","","","","damageDetailElementalResonance","recommendationSelectedIndex","removeDisabled","","NUMBER_OF_PRIORITY_SUBSTATS","","GENSEN_MASTER_LIST","values","","TEMPLATE","Disabled","ENEMY_MASTER_LIST","STATS_INPUT_TEMPLATE","CHARACTER_INPUT_TEMPLATE","ARTIFACT_DETAIL_INPUT_TEMPLATE","CONDITION_INPUT_TEMPLATE","getDefaultOptionInput","OPTION_INPUT_TEMPLATE","parseLevelStr","levelStr","makeBuildStorageKey","makeOptionStorageKey","makeArtifactScoringStorageKey","makeSupporterBuildnameStorageKey","makeRecommendationList","opt_buildData","isSavable","overwrite","storageKeyArr","localStorage","buildObj","optionsObj","key3","artifactScoringObj","artifactScoring","key4","supporterBuildnameObj","supporterBuildname","myRecommendation","subkey","artifactRarerityArrArr","artifactRarerity4Num","artifactSet1","artifactSet2","makeArtifactSetAbbrev","statusName","RECOMMEND_ABBREV_MAP","abbrRe","abbr","makePrioritySubstatValueList","opt_substat","valueArr","makeEasyInputSubstatValueList","weaponKey","getWeaponMasterDetail","prioritySubstatsDisabled","toKey","newArtifactSets","newArtifactSetMasters","newArtifactStatsMain","newPriotitySubstat","newPriotitySubstatValue","newPriotitySubstatCount","subkey1","subkey2","subkey3","substatValue","substatCount","PROPERTY_MAP","astarIndex","workCharacter","ARTIFACT_KEYS","ARTIFACT_TEMPLATE","newList","makeSavedata","resultObj","makeOptionsSavedata","makeSupporterBuildnameSavedata","buildnameSelection","conditionKeys","myTalentDetail","myTalentLevelArr","myDefaultKind","myDefaultElement","myInputCategory","myStatusChangeDetailObjArr","workCategory","workTalentLevelArr","myLevel","cond","","","","","makeDamageDetailObjArrObjElementalResonance","ELEMENTAL_RESONANCE_MASTER_LIST","defaultKind","defaultElement","inputCategory","opt_condition","my","makeFormulaTemplate","my","my","talentDataObj","statusChangeDetailObjArr","isChanged","info","detailObjArr","exclusionStr","workStr","conditionStrArr","makeConditionExclusionMapFromStrSub","exclusion","pushToMapValueArray","conditionObj","prefix","condValueArr","re2","rangeStart","rangeEnd","re2Ret","addDecimal","e","workConditionValues","workCheckboxList","workSelectList","workNumberList","makeConditionMapFromCharacterInput","makeExclusionMapFromCharacterInput","numberObj","conditionValue","exclusions","initialValue","minValue","checked","","vStat","trunc","numberEntryArr","maxValue","oldValue","getDecimalLength","multiplyDecimal","value1","value2","decimalLength","intValue1","intValue2","k","symbols","escapedSymbols","trim","getMaxConstellation","getMaxTalentLevel","talentObj","setupTeamOption","workDetails1","workDetails2","workMap1","workMap2","setupMiscOption","OPTION1_MASTER_LIST","OPTION2_MASTER_LIST","masterList","updateConditionsByTeam","myVision","regionCountMap","totalEnergyCost","visionCountMap","region","size","pyroCount","hydroCount","electroCount","cryoCount","updateOptionsElementalResonanceByTeam","newElementResonance","resonanceElementArr","restMemberElementArr","currentElementArr","resonance","makeSharedata","savedata","sharedataArr","myBasename","ARTIFACT_STAT_JA_EN_ABBREV_MAP","match","openTwitter","text","url","opt_hashtags","opt_via","baseUrl","params","URLSearchParams","append","query","shareUrl","shareByTwitter","sharedata","encoded","encodeURI","sessionStorage","setItem","popBuildinfoFromSession","getItem","removeItem","CharacterMaster_json_1","SwordMaster_json_1","ClaymoreMaster_json_1","PolearmMaster_json_1","BowMaster_json_1","CatalystMaster_json_1","ArtifactSetMaster_json_1","ArtifactMainMaster_json_1","ArtifactSubMaster_json_1","EnemyMaster_json_1","ElementalResonanceMaster_json_1","TeamOptionMaster_json_1","OptionMaster1_json_1","OptionMaster2_json_1","ElementalReactionMaster_json_1","ElementalReactionBaseDamageMaster_json_1","getIconUrl","import","","","","","","","","typedMaster","SWORD_MASTER_LIST","CLAYMORE_MASTER_LIST","POLEARM_MASTER_LIST","BOW_MASTER_LIST","CATALYST_MASTER_LIST","CHARACTER_MASTER_DETAIL_MAP","WEAPON_MASTER_DETAIL_MAP","opt_weaponType","weaponTypeArr","","","","","","","","ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP","gensen","opt_cat_id","ARTIFACT_CAT_NAMES","NORMAL_ATTACK_LENGTH_OBJ","ACTION_LENGTH_MAP","countN","isBursting","isQing","countC","countP","countE","untilAction","untilCount","clear","workMap","danArr","lengthList","preRotation","isNCPIgnoring","actionLength1","actionLength2","duration","getDurationFromInfo","getReceiveTypeFromInfo","SP_SELF","maxDan","dan","unitLength","multiple","lengthSum","sumVal","maxVal","memberNum","rate","getMemberResult","getDefaultMemberResult","memberArr","getCharacterInputValue","getStatsInputValue","ERCalculatorFuncCharacter_1","ERCalculatorFuncWeapon_1","resultMap","myIndex","eCount","cCount","qCount","getParticleNumFromInfo","resultVal","ousiaLength","isOusia","timeArr","curCharacter","delayActions","skillCount","CHARACTER_E_FIRST_ARR","delayAction","setSkillParticleNumToArr","func","CHARACTER_PARTICLE_EXTRA_FUNC","ret","particles","triggerCnt","rindexArr","nxtCharacter","toIndex","allParticle","CHARACTER_ENERGY_FUNC","energies","workResult","WEAPON_ENERGY_FUNC","otherEnergy","natlanCount","myEnergy","denominator","ATTACK_ENERGY_COUNT_OBJ","hitCount","withC","workHitCount","dans","workDan","isNaN","time","isSkilling","receiveType","SP_NEXT","addNumToArr","SP_LONG","SP_SHRT","nxtRotation","v","()","constellationLevel","allEnergy","herEnergies","()","skillLevel","messages2","burstLevel","somebodyEnergy","()","","","","","","nCount","","","","","","","","","","","","","","","","","doBreak","herIndex","herCm","","","","","","unit2","","","geoCount","","","","","","","","","","","","","","","","","","startIndex","ncpCountMap","rechargeCount","","visionCount","","myParticle","","","herParticles","isRecorded","weaponEnergySub_","isInCt","weaponEnergySub_","","","","","","","","","","","","","","memberId","characterDetailMap","response","getEnergyCost","weaponTypeMaster","storageKey","storageValue","DEFAULT_WEAPON","makeBlankMember","makeBlankTeam","initializeMember","makeTeamsStr","teams","copyTeams","output","useBuilddata","srcMember","NUMBER_OF_TEAMS","detail","","dmgDetail","tempDan","C0","C1","C2","C4","C6","PARTICLE_GENERATE_1","PARTICLE_GENERATE_2","PARTICLE_GENERATE_3","PARTICLE_GENERATE_4","PARTICLE_GENERATE_5","PARTICLE_GENERATE_6","PARTICLE_MASTER","CT_AFTER_DURATION","particleMaster","keyArr","start","leftTime","particleCooltime","getParticleCooltimeFromInfo","generateCount","getParticleGenerateCountFromInfo","getCooltimeTypeFromInfo","pentry","pinfo","receiveTypeArr","__exports__"],"sourceRoot":""}