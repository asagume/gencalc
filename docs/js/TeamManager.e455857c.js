(function(){"use strict";var e={1431:function(e,t,a){a(4114),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(8626)),o=l(a(1527)),i=a(1175),d=l(a(845)),r=a(2112),c=a(9164),s=l(a(3509)),u=l(a(47)),m=l(a(9415)),f=a(8175);t["default"]=(0,i.defineComponent)({name:"TeamManager",props:{id:{type:Number}},components:{draggable:o.default,TeamItem:u.default,TeamEditorModal:s.default,TeamRotation:m.default},setup(e){const{displayName:t}=(0,d.default)(),a=(0,i.ref)(!1),l=[["","None"],["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],o=(0,i.ref)(c.NUMBER_OF_TEAMS),s=(0,i.reactive)([]);for(let n=0;n<o.value;n++)s.push((0,c.makeBlankTeam)(n));const u=(0,i.reactive)({}),m=(0,i.ref)(""),p=(0,i.ref)(!0),v=(0,i.ref)(!1),h=(0,i.ref)(0),b=(0,i.ref)(""),g=(0,i.reactive)({}),k=(0,i.ref)(""),T=(0,i.reactive)({}),E=(0,i.ref)();(0,i.onMounted)((()=>{x(),void 0!==e.id&&(h.value=e.id,a.value=!0)}));const y=(0,i.computed)((()=>f.CHARACTER_MASTER_LIST.map((e=>[e.key,e.icon_url])).sort(((e,t)=>{const a=e[1].split("/"),l=a[a.length-1].split("_"),n=l[l.length-1],o=t[1].split("/"),i=o[o.length-1].split("_"),d=i[i.length-1];return n.localeCompare(d)})).map((e=>e[0])))),C=(0,i.computed)((()=>{const e=[];return s.forEach((t=>{e.push(...t.tags)})),[...new Set(e)].sort()})),O=(0,i.computed)((()=>s.filter((e=>e.id==h.value)).length?s.filter((e=>e.id==h.value))[0]:void 0)),N=(0,i.computed)((()=>(0,c.makeTeamsStr)(s))),V=(0,i.computed)((()=>N.value==b.value)),S=e=>e==h.value,_=(0,i.computed)((()=>{let e={};if(h.value in u)e=u[h.value];else if(-1!=h.value){const t=s.filter((e=>e.id==h.value))[0];t.members.forEach((t=>{e&&(e[t.id]=(0,c.getDefaultMemberResult)())}))}return e})),M=(0,i.computed)((()=>{let e=s;if(k.value){const t=k.value;e=e.filter((e=>e.name.includes(t)||e.members.filter((e=>e.name.includes(t)||e.replacements.filter((e=>e.includes(t))).length>0)).length>0))}const t=Object.keys(T).filter((e=>C.value.includes(e)&&T[e]));return t.length&&(e=e.filter((e=>e.tags.filter((e=>t.includes(e))).length>0))),e})),R=()=>{if(o.value>s.length){const e=Math.max(...s.map((e=>e.id))),t=o.value-s.length;for(let a=0;a<t;a++)s.push((0,c.makeBlankTeam)(e+1+a))}else o.value<s.length&&(h.value>o.value&&(h.value=0),s.splice(o.value))};function B(){const e=localStorage.getItem("キャラクター所持状況");if(e){const t={},a=JSON.parse(e);Object.keys(a).forEach((e=>{const l=Number(a[e]);Number.isNaN(l)&&(t[e]=l)})),(0,r.overwriteObject)(g,t)}}function w(){const e=localStorage.getItem("teams"),t=[];for(let a=0;a<o.value;a++)t.push((0,c.makeBlankTeam)(a));if(e){const a=JSON.parse(e);(0,c.copyTeams)(t,a,!0),o.value=t.length,b.value=e}s.splice(0,s.length,...t)}const j=()=>{s.forEach((e=>{e.tags.forEach((e=>{void 0===T[e]&&(T[e]=!1)}))}))},x=()=>{B(),w(),j()},D=()=>{localStorage.setItem("teams",N.value),w(),h.value=0},I=()=>{s.forEach((e=>{(0,c.initializeTeam)(e)}))},A=e=>{h.value=e},L=e=>{e==h.value?(a.value=!0,(0,i.nextTick)().then((()=>{document.getElementById("team-list-and-editor")?.scrollIntoView({behavior:"smooth"})}))):h.value=e},U=e=>{if(a.value=!1,h.value<0)return;q();const t=s.filter((e=>e.id==h.value))[0];if(t){t.name=e.name;for(let a=0;a<e.members.length;a++){const l=e.members[a],o=t.members[a];o.name==l.name&&o.buildname==e.members[a].buildname||(o.name=e.members[a].name,o.buildname=e.members[a].buildname,o.builddata=o.buildname?(0,c.getBuilddataFromStorage)(o.name,o.buildname):void 0),n.default.isEqual(o.tags,l.tags)||o.tags.splice(0,o.tags.length,...l.tags),n.default.isEqual(o.replacements,l.replacements)||o.replacements.splice(0,o.replacements.length,...l.replacements)}t.description=e.description,n.default.isEqual(t.rotation,e.rotation)||t.rotation.splice(0,t.rotation.length,...e.rotation),t.tags=e.tags,j(),E.value&&E.value.initializeTeam(t)}},P=()=>{a.value=!1,q()},F=(e,t)=>{if(-1!=h.value){const a=s.filter((e=>e.id==h.value))[0];a&&(a.rotation.splice(0,a.rotation.length,...e),a.rotationDescription=t)}},X=()=>{(0,i.nextTick)().then((()=>{document.getElementById("team-rotation")?.scrollIntoView({behavior:"smooth"})}))},q=()=>{-1!=h.value&&(0,i.nextTick)().then((()=>{document.getElementById("team-"+h.value)?.scrollIntoView({behavior:"smooth"})}))},H=(e,t)=>{u[e]=t,e==h.value&&_.value};return{displayName:t,teamRotationVmRef:E,DISPLAY_STAT_LIST:l,NUMBER_OF_TEAMS:c.NUMBER_OF_TEAMS,numberOfTeams:o,displayStat:m,displayRes:p,displayTags:v,teams:s,constellations:g,teamEditorVisible:a,teamSelected:S,forcusedTeam:O,saveDisabled:V,teamMemberResult:_,searchWord:k,searchDatalist:y,teamTagList:C,teamTagChecked:T,filteredTeams:M,numberOfTeamsOnChange:R,saveOnClick:D,loadOnClick:x,clearOnClick:I,teamOnClick:A,editOnClick:L,teamEditorOnClickOk:U,teamEditorOnClickCancel:P,updateRotation:F,jumpToRotation:X,jumpToTeam:q,updateMemberResult:H}}})},159:function(e,t,a){t.X=void 0;const l=a(1175),n={class:"base-container"},o={class:"pane1"},i={class:"display-stat-select"},d=["value"],r={class:"display-stat"},c={class:"number-of-teams"},s=["min"],u={class:"data-control"},m=["disabled"],f={class:"pane2",id:"team-list-and-editor"},p={class:"team-tags-area"},v={id:"search-datalist"},h=["value"],b=["onUpdate:modelValue"],g=["id"],k={class:"pane3"},T={id:"team-rotation"};function E(e,t,a,E,y,C){const O=(0,l.resolveComponent)("TeamItem"),N=(0,l.resolveComponent)("draggable"),V=(0,l.resolveComponent)("TeamEditorModal"),S=(0,l.resolveComponent)("TeamRotation");return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[t[12]||(t[12]=(0,l.createStaticVNode)('<div class="header" data-v-36d9cf19><div class="top-left" data-v-36d9cf19><p data-v-36d9cf19><a href="./" data-v-36d9cf19>げんかるく</a></p></div><div class="top-right" data-v-36d9cf19><p data-v-36d9cf19><a href="./EnergyList" data-v-36d9cf19>元素粒子生成一覧</a></p></div></div>',1)),(0,l.createElementVNode)("div",o,[(0,l.createElementVNode)("fieldset",null,[(0,l.createElementVNode)("div",i,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.DISPLAY_STAT_LIST,(a=>((0,l.openBlock)(),(0,l.createElementBlock)("label",{class:"display-stat",key:a[1]},[(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":t[0]||(t[0]=t=>e.displayStat=t),value:a[0]},null,8,d),[[l.vModelRadio,e.displayStat]]),(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(a[1]),1)])))),128)),(0,l.createElementVNode)("label",r,[(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=t=>e.displayTags=t)},null,512),[[l.vModelCheckbox,e.displayTags]]),t[8]||(t[8]=(0,l.createElementVNode)("span",null,"TAGS",-1))])]),(0,l.createElementVNode)("label",c,[t[9]||(t[9]=(0,l.createTextVNode)(" Number of teams ")),(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"number",min:e.NUMBER_OF_TEAMS,max:999,"onUpdate:modelValue":t[2]||(t[2]=t=>e.numberOfTeams=t),onChange:t[3]||(t[3]=(...t)=>e.numberOfTeamsOnChange&&e.numberOfTeamsOnChange(...t))},null,40,s),[[l.vModelText,e.numberOfTeams]])]),(0,l.createElementVNode)("div",u,[(0,l.createElementVNode)("button",{type:"button",disabled:e.saveDisabled,onClick:t[4]||(t[4]=(...t)=>e.saveOnClick&&e.saveOnClick(...t))}," Save ",8,m),(0,l.createElementVNode)("button",{type:"button",onClick:t[5]||(t[5]=(...t)=>e.loadOnClick&&e.loadOnClick(...t))}," Load "),(0,l.createElementVNode)("button",{type:"button",onClick:t[6]||(t[6]=(...t)=>e.clearOnClick&&e.clearOnClick(...t))}," Clear ")])])]),(0,l.createElementVNode)("div",f,[(0,l.withDirectives)((0,l.createElementVNode)("div",null,[(0,l.createElementVNode)("div",p,[(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"search",type:"search","onUpdate:modelValue":t[7]||(t[7]=t=>e.searchWord=t),list:"search-datalist"},null,512),[[l.vModelText,e.searchWord]]),(0,l.createElementVNode)("datalist",v,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.searchDatalist,(t=>((0,l.openBlock)(),(0,l.createElementBlock)("option",{key:t,value:e.displayName(t)},null,8,h)))),128))]),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.teamTagList,(t=>((0,l.openBlock)(),(0,l.createElementBlock)("label",{key:t},[(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":a=>e.teamTagChecked[t]=a},null,8,b),[[l.vModelCheckbox,e.teamTagChecked[t]]]),(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(t),1)])))),128))]),(0,l.createVNode)(N,{list:e.filteredTeams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,l.withCtx)((({element:t})=>[(0,l.createElementVNode)("div",{style:{display:"inline-block"},id:"team-"+t.id},[(0,l.createVNode)(O,{team:t,selected:e.teamSelected(t.id),"display-stat":e.displayStat,"display-res":e.displayRes,constellations:e.constellations,editable:!0,"show-equipment":!0,"display-tags":e.displayTags,onClick:a=>e.teamOnClick(t.id),"onClick:edit":e.editOnClick,"onClick:jumpToRotation":e.jumpToRotation,"onUpdate:memberResult":e.updateMemberResult},null,8,["team","selected","display-stat","display-res","constellations","display-tags","onClick","onClick:edit","onClick:jumpToRotation","onUpdate:memberResult"])],8,g)])),_:1},8,["list"])],512),[[l.vShow,!e.teamEditorVisible]]),(0,l.withDirectives)((0,l.createElementVNode)("div",null,[e.forcusedTeam?((0,l.openBlock)(),(0,l.createBlock)(V,{key:0,visible:e.teamEditorVisible,team:e.forcusedTeam,"team-tags":e.teamTagList,"onClick:cancel":e.teamEditorOnClickCancel,"onClick:ok":e.teamEditorOnClickOk},null,8,["visible","team","team-tags","onClick:cancel","onClick:ok"])):(0,l.createCommentVNode)("",!0)],512),[[l.vShow,e.teamEditorVisible]])]),(0,l.createElementVNode)("div",k,[t[10]||(t[10]=(0,l.createElementVNode)("hr",null,null,-1)),t[11]||(t[11]=(0,l.createElementVNode)("h3",null,"ROTATION",-1)),(0,l.createElementVNode)("div",T,[e.forcusedTeam?((0,l.openBlock)(),(0,l.createBlock)(S,{key:0,ref:"teamRotationVmRef",team:e.forcusedTeam,"team-member-result":e.teamMemberResult,constellations:e.constellations,"onUpdate:rotation":e.updateRotation,"onClick:jumpToTeam":e.jumpToTeam},null,8,["team","team-member-result","constellations","onUpdate:rotation","onClick:jumpToTeam"])):(0,l.createCommentVNode)("",!0)])]),t[13]||(t[13]=(0,l.createStaticVNode)('<div class="pane4" data-v-36d9cf19></div><div class="footer" data-v-36d9cf19><hr data-v-36d9cf19><h2 data-v-36d9cf19>チーム編成 Ver.1.0.0</h2><ul class="usage" data-v-36d9cf19><li data-v-36d9cf19>右上の◆のドラッグ＆ドロップでチームの並べ替えができます。</li></ul><dl class="history" data-v-36d9cf19><dt data-v-36d9cf19>1.1.0</dt><dd data-v-36d9cf19> チーム分類用のタグ機能を追加。 </dd><dt data-v-36d9cf19>1.0.0</dt><dd data-v-36d9cf19> 元素チャージ効率計算機能が（ひとまず）完成しました。 </dd><dt data-v-36d9cf19>0.5.0</dt><dd data-v-36d9cf19> ローテーションが保存されるようになりました。チームデータの一部として記憶します。 </dd></dl><p data-v-36d9cf19><a href="./TeamExample.html" data-v-36d9cf19>EXAMPLE</a></p><p data-v-36d9cf19><a href="./" data-v-36d9cf19>げんかるく - 原神ダメージシミュレーター</a>   <a href="./TeamOptionList.html" data-v-36d9cf19>強化・弱体効果一覧</a></p></div>',2))])}t.X=E},2616:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(1175),o=l(a(7447)),i=l(a(2277));async function d(){(0,n.createApp)(o.default,{}).use(i.default).mount("#app")}d()},7447:function(e,t,a){a.r(t);var l=a(5e3),n=a(3344),o={};for(var i in n)"default"!==i&&(o[i]=function(e){return n[e]}.bind(0,i));a.d(t,o);a(6644),a(6777);var d=a(1241);const r=(0,d.A)(n["default"],[["render",l.X],["__scopeId","data-v-36d9cf19"]]);t["default"]=r},6644:function(){},6777:function(){},3344:function(e,t,a){a.r(t),a.d(t,{default:function(){return n.a}});var l=a(1431),n=a.n(l),o={};for(var i in l)"default"!==i&&(o[i]=function(e){return l[e]}.bind(0,i));a.d(t,o)},5e3:function(e,t,a){a.d(t,{X:function(){return l.X}});var l=a(159)}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var o=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,l,n,o){if(!l){var i=1/0;for(s=0;s<e.length;s++){l=e[s][0],n=e[s][1],o=e[s][2];for(var d=!0,r=0;r<l.length;r++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](l[r])}))?l.splice(r--,1):(d=!1,o<i&&(i=o));if(d){e.splice(s--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[l,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.j=609}(),function(){var e={609:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,o,i=l[0],d=l[1],r=l[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(n in d)a.o(d,n)&&(a.m[n]=d[n]);if(r)var s=r(a)}for(t&&t(l);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(s)},l=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504,996],(function(){return a(2616)}));l=a.O(l)})();
//# sourceMappingURL=TeamManager.e455857c.js.map