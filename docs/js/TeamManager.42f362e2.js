(function(){"use strict";var e={3874:function(e,t,n){var a=n(9242),i=n(3396),o=n(7139);const l=e=>((0,i.dD)("data-v-8f212e62"),e=e(),(0,i.Cn)(),e),r={class:"base-container"},s=l((()=>(0,i._)("div",{class:"header"},[(0,i.Uk)("   "),(0,i._)("a",{href:"./"},"げんかるく")],-1))),c={class:"pane1"},u={class:"display-stat-select"},d=["value"],m={class:"display-stat"},p=l((()=>(0,i._)("span",null,"TAGS",-1))),f={class:"number-of-teams"},h=["min"],v={class:"data-control"},b=["disabled"],g={class:"pane2",id:"team-list-and-editor"},y={class:"team-tags-area"},k={id:"search-datalist"},T=["value"],I=["onUpdate:modelValue"],O=["id"],_={class:"pane3"},C=l((()=>(0,i._)("hr",null,null,-1))),E=l((()=>(0,i._)("h3",null,"ROTATION",-1))),w={id:"team-rotation"},S=(0,i.uE)('<div class="pane4" data-v-8f212e62></div><div class="footer" data-v-8f212e62><hr data-v-8f212e62><h2 data-v-8f212e62>チーム編成 Ver.1.0.0</h2><ul class="usage" data-v-8f212e62><li data-v-8f212e62>右上の◆のドラッグ＆ドロップでチームの並べ替えができます。</li></ul><dl class="history" data-v-8f212e62><dt data-v-8f212e62>1.1.0</dt><dd data-v-8f212e62> チーム分類用のタグ機能を追加。 </dd><dt data-v-8f212e62>1.0.0</dt><dd data-v-8f212e62> 元素チャージ効率計算機能が（ひとまず）完成しました。 </dd><dt data-v-8f212e62>0.5.0</dt><dd data-v-8f212e62> ローテーションが保存されるようになりました。チームデータの一部として記憶します。 </dd></dl><p data-v-8f212e62><a href="./TeamExample.html" data-v-8f212e62>EXAMPLE</a></p><p data-v-8f212e62><a href="./" data-v-8f212e62>げんかるく - 原神ダメージシミュレーター</a>   <a href="./TeamOptionList.html" data-v-8f212e62>強化・弱体効果一覧</a></p></div>',2);function j(e,t,n,l,j,R){const D=(0,i.up)("TeamItem"),V=(0,i.up)("draggable"),N=(0,i.up)("TeamEditorModal"),M=(0,i.up)("TeamRotation");return(0,i.wg)(),(0,i.iD)("div",r,[s,(0,i._)("div",c,[(0,i._)("fieldset",null,[(0,i._)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.DISPLAY_STAT_LIST,(n=>((0,i.wg)(),(0,i.iD)("label",{class:"display-stat",key:n[1]},[(0,i.wy)((0,i._)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":t[0]||(t[0]=t=>e.displayStat=t),value:n[0]},null,8,d),[[a.G2,e.displayStat]]),(0,i._)("span",null,(0,o.zw)(n[1]),1)])))),128)),(0,i._)("label",m,[(0,i.wy)((0,i._)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=t=>e.displayTags=t)},null,512),[[a.e8,e.displayTags]]),p])]),(0,i._)("label",f,[(0,i.Uk)(" Number of teams "),(0,i.wy)((0,i._)("input",{type:"number",min:e.NUMBER_OF_TEAMS,max:999,"onUpdate:modelValue":t[2]||(t[2]=t=>e.numberOfTeams=t),onChange:t[3]||(t[3]=(...t)=>e.numberOfTeamsOnChange&&e.numberOfTeamsOnChange(...t))},null,40,h),[[a.nr,e.numberOfTeams]])]),(0,i._)("div",v,[(0,i._)("button",{type:"button",disabled:e.saveDisabled,onClick:t[4]||(t[4]=(...t)=>e.saveOnClick&&e.saveOnClick(...t))}," Save ",8,b),(0,i._)("button",{type:"button",onClick:t[5]||(t[5]=(...t)=>e.loadOnClick&&e.loadOnClick(...t))}," Load "),(0,i._)("button",{type:"button",onClick:t[6]||(t[6]=(...t)=>e.clearOnClick&&e.clearOnClick(...t))}," Clear ")])])]),(0,i._)("div",g,[(0,i.wy)((0,i._)("div",null,[(0,i._)("div",y,[(0,i.wy)((0,i._)("input",{class:"search",type:"search","onUpdate:modelValue":t[7]||(t[7]=t=>e.searchWord=t),list:"search-datalist"},null,512),[[a.nr,e.searchWord]]),(0,i._)("datalist",k,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.searchDatalist,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t,value:e.displayName(t)},null,8,T)))),128))]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.teamTagList,(t=>((0,i.wg)(),(0,i.iD)("label",{key:t},[(0,i.wy)((0,i._)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":n=>e.teamTagChecked[t]=n},null,8,I),[[a.e8,e.teamTagChecked[t]]]),(0,i._)("span",null,(0,o.zw)(t),1)])))),128))]),(0,i.Wm)(V,{list:e.filteredTeams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,i.w5)((({element:t})=>[(0,i._)("div",{style:{display:"inline-block"},id:"team-"+t.id},[(0,i.Wm)(D,{team:t,selected:e.teamSelected(t.id),"display-stat":e.displayStat,"display-res":e.displayRes,constellations:e.constellations,editable:!0,"show-equipment":!0,"display-tags":e.displayTags,onClick:n=>e.teamOnClick(t.id),"onClick:edit":e.editOnClick,"onClick:jumpToRotation":e.jumpToRotation,"onUpdate:memberResult":e.updateMemberResult},null,8,["team","selected","display-stat","display-res","constellations","display-tags","onClick","onClick:edit","onClick:jumpToRotation","onUpdate:memberResult"])],8,O)])),_:1},8,["list"])],512),[[a.F8,!e.teamEditorVisible]]),(0,i.wy)((0,i._)("div",null,[e.forcusedTeam?((0,i.wg)(),(0,i.j4)(N,{key:0,visible:e.teamEditorVisible,team:e.forcusedTeam,"team-tags":e.teamTagList,"onClick:cancel":e.teamEditorOnClickCancel,"onClick:ok":e.teamEditorOnClickOk},null,8,["visible","team","team-tags","onClick:cancel","onClick:ok"])):(0,i.kq)("",!0)],512),[[a.F8,e.teamEditorVisible]])]),(0,i._)("div",_,[C,E,(0,i._)("div",w,[e.forcusedTeam?((0,i.wg)(),(0,i.j4)(M,{key:0,team:e.forcusedTeam,"team-member-result":e.teamMemberResult,constellations:e.constellations,"onUpdate:rotation":e.updateRotation,"onClick:jumpToTeam":e.jumpToTeam},null,8,["team","team-member-result","constellations","onUpdate:rotation","onClick:jumpToTeam"])):(0,i.kq)("",!0)])]),S])}n(560);var R=n(4806),D=n.n(R),V=n(6983),N=n.n(V),M=n(4870),F=n(6552),H=n(5983),U=n(9541),x=n(9158),L=n(1611),q=n(5872),A=n(6125),P=(0,i.aZ)({name:"TeamManager",props:{id:{type:Number}},components:{draggable:N(),TeamItem:L.Z,TeamEditorModal:x.Z,TeamRotation:q.Z},setup(e){const{displayName:t}=(0,F.Z)(),n=(0,M.iH)(!1),a=[["","None"],["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],o=(0,M.iH)(U.g6),l=(0,M.qj)([]);for(let i=0;i<o.value;i++)l.push((0,U.un)(i));const r=(0,M.qj)({}),s=(0,M.iH)(""),c=(0,M.iH)(!0),u=(0,M.iH)(!1),d=(0,M.iH)(0),m=(0,M.iH)(""),p=(0,M.qj)({}),f=(0,M.iH)(""),h=(0,M.qj)({});(0,i.bv)((()=>{S(),void 0!==e.id&&(d.value=e.id,n.value=!0)}));const v=(0,i.Fl)((()=>A.qy.map((e=>[e.key,e.icon_url])).sort(((e,t)=>{const n=e[1].split("/"),a=n[n.length-1].split("_"),i=a[a.length-1],o=t[1].split("/"),l=o[o.length-1].split("_"),r=l[l.length-1];return i.localeCompare(r)})).map((e=>e[0])))),b=(0,i.Fl)((()=>{const e=[];return l.forEach((t=>{e.push(...t.tags)})),[...new Set(e)].sort()})),g=(0,i.Fl)((()=>l.filter((e=>e.id==d.value)).length?l.filter((e=>e.id==d.value))[0]:void 0)),y=(0,i.Fl)((()=>(0,U.Jc)(l))),k=(0,i.Fl)((()=>y.value==m.value)),T=e=>e==d.value,I=(0,i.Fl)((()=>{let e={};if(d.value in r)e=r[d.value];else if(-1!=d.value){const t=l.filter((e=>e.id==d.value))[0];t.members.forEach((t=>{e&&(e[t.id]=(0,U.V5)())}))}return e})),O=(0,i.Fl)((()=>{let e=l;if(f.value){const t=f.value;e=e.filter((e=>e.name.includes(t)||e.members.filter((e=>e.name.includes(t)||e.replacements.filter((e=>e.includes(t))).length>0)).length>0))}const t=Object.keys(h).filter((e=>b.value.includes(e)&&h[e]));return t.length&&(e=e.filter((e=>e.tags.filter((e=>t.includes(e))).length>0))),e})),_=()=>{if(o.value>l.length){const e=Math.max(...l.map((e=>e.id))),t=o.value-l.length;for(let n=0;n<t;n++)l.push((0,U.un)(e+1+n))}else o.value<l.length&&(d.value>o.value&&(d.value=0),l.splice(o.value))};function C(){const e=localStorage.getItem("キャラクター所持状況");if(e){const t={},n=JSON.parse(e);Object.keys(n).forEach((e=>{const a=Number(n[e]);Number.isNaN(a)&&(t[e]=a)})),(0,H.fX)(p,t)}}function E(){const e=localStorage.getItem("teams"),t=[];for(let n=0;n<o.value;n++)t.push((0,U.un)(n));if(e){const n=JSON.parse(e);(0,U.FF)(t,n,!0),o.value=t.length,m.value=e}l.splice(0,l.length,...t)}const w=()=>{l.forEach((e=>{e.tags.forEach((e=>{void 0===h[e]&&(h[e]=!1)}))}))},S=()=>{C(),E(),w()},j=()=>{localStorage.setItem("teams",y.value),E(),d.value=0},R=()=>{l.forEach((e=>{(0,U.mt)(e)}))},V=e=>{d.value=e},N=e=>{e==d.value?(n.value=!0,(0,i.Y3)().then((()=>{document.getElementById("team-list-and-editor")?.scrollIntoView({behavior:"smooth"})}))):d.value=e},x=e=>{if(n.value=!1,d.value<0)return;Y();const t=l.filter((e=>e.id==d.value))[0];if(t){t.name=e.name;for(let n=0;n<e.members.length;n++){const a=e.members[n],i=t.members[n];i.name==a.name&&i.buildname==e.members[n].buildname||(i.name=e.members[n].name,i.buildname=e.members[n].buildname,i.builddata=i.buildname?(0,U.XY)(i.name,i.buildname):void 0),D().isEqual(i.tags,a.tags)||i.tags.splice(0,i.tags.length,...a.tags),D().isEqual(i.replacements,a.replacements)||i.replacements.splice(0,i.replacements.length,...a.replacements)}t.description=e.description,D().isEqual(t.rotation,e.rotation)||t.rotation.splice(0,t.rotation.length,...e.rotation),t.tags=e.tags,w()}},L=()=>{n.value=!1,Y()},q=(e,t)=>{if(-1!=d.value){const n=l.filter((e=>e.id==d.value))[0];n&&(n.rotation.splice(0,n.rotation.length,...e),n.rotationDescription=t)}},P=()=>{(0,i.Y3)().then((()=>{document.getElementById("team-rotation")?.scrollIntoView({behavior:"smooth"})}))},Y=()=>{-1!=d.value&&(0,i.Y3)().then((()=>{document.getElementById("team-"+d.value)?.scrollIntoView({behavior:"smooth"})}))},Z=(e,t)=>{r[e]=t,e==d.value&&I.value};return{displayName:t,DISPLAY_STAT_LIST:a,NUMBER_OF_TEAMS:U.g6,numberOfTeams:o,displayStat:s,displayRes:c,displayTags:u,teams:l,constellations:p,teamEditorVisible:n,teamSelected:T,forcusedTeam:g,saveDisabled:k,teamMemberResult:I,searchWord:f,searchDatalist:v,teamTagList:b,teamTagChecked:h,filteredTeams:O,numberOfTeamsOnChange:_,saveOnClick:j,loadOnClick:S,clearOnClick:R,teamOnClick:V,editOnClick:N,teamEditorOnClickOk:x,teamEditorOnClickCancel:L,updateRotation:q,jumpToRotation:P,jumpToTeam:Y,updateMemberResult:Z}}}),Y=n(89);const Z=(0,Y.Z)(P,[["render",j],["__scopeId","data-v-8f212e62"]]);var W=Z,J=n(2540);async function B(){(0,a.ri)(W,{}).use(J.Z).mount("#app")}B()},9541:function(e,t,n){n.d(t,{$C:function(){return m},FF:function(){return V},FP:function(){return p},Jc:function(){return D},NC:function(){return N},R7:function(){return E},V5:function(){return _},VN:function(){return k},XY:function(){return O},_t:function(){return y},bV:function(){return g},br:function(){return C},c1:function(){return I},g6:function(){return u},gw:function(){return f},mt:function(){return R},n7:function(){return d},qQ:function(){return b},sE:function(){return T},un:function(){return S}});n(560);var a=n(4806),i=n.n(a),o=n(8710),l=n(5983),r=n(2986),s=n(6125),c=n(9098);const u=10,d=4,m=["片手剣","長柄武器"],p=["鹿野院平蔵","リオセスリ"],f=["フリーナ","アルレッキーノ"];let h=0;const v=new Map;function b(e){let t;return e&&e in s.bw&&(t=s.bw[e]),t}async function g(){const e=[];for(const t of Object.keys(s.bw))e.push((0,s.tm)(t).then((e=>{v.set(t,e)})));await Promise.all(e)}function y(e){return v.get(e)}function k(e,t){let n;if(e&&t&&e in s.Nd){const a=s.Nd[e];t in a&&(n=a[t])}return n}function T(e){const t=e.split("_"),n=t[1];let a;return t.splice(0,2),a=t.length>0?t.join("_"):(0,r.K1)(n),a}function I(e){return Object.keys(localStorage).filter((t=>t.startsWith((0,r.R4)(e))))}function O(e,t){let n;const a=(0,r.R4)(e,t),i=localStorage.getItem(a);return i&&(n=JSON.parse(i)),n}function _(){return{characterInput:(0,r.Yy)(),artifactDetailInput:(0,r.sx)(),conditionInput:(0,r.tQ)(),optionInput:(0,r.hh)(),statsInput:(0,r.O$)(),damageResult:(0,r.F7)()}}const C=async(e,t)=>{const n=_();if(!e.name)return n;n.characterInput.character=e.name,n.characterInput.characterMaster=await(0,s.tm)(n.characterInput.character);const a={"片手剣":"無鋒の剣","両手剣":"訓練用大剣","長柄武器":"新米の長槍","弓":"狩猟弓","法器":"生徒ノート"};n.characterInput.weapon=a[n.characterInput.characterMaster.武器];const i=e.builddata;if(!i)return n;if(await(0,r.pS)(n.characterInput,n.artifactDetailInput,n.conditionInput,n.optionInput,i),(0,r.ge)(n.characterInput),(0,r.Cl)(n.characterInput),(0,r.Vk)(n.characterInput),(0,r.Hk)(n.conditionInput,n.characterInput,n.optionInput),(0,o.fk)(n.artifactDetailInput.聖遺物ステータスメイン効果,n.artifactDetailInput.聖遺物メイン効果),(0,o.Zr)(n.artifactDetailInput),n.conditionInput.checkboxList.forEach((e=>{n.conditionInput.conditionValues[e.name]=!1})),n.conditionInput.selectList.forEach((e=>{n.conditionInput.conditionValues[e.name]=0})),await(0,r.a_)(n.characterInput,n.conditionInput,n.optionInput),E(t)){const e={};E(t).filter((e=>["炎元素共鳴","水元素共鳴","草元素共鳴","元素共鳴なし"].includes(e))).forEach((t=>{if(n.optionInput.elementalResonance.conditionValues[t]=!0,"詳細"in s._9[t]){const n=s._9[t].詳細;if(n)for(const t of n)"種類"in t&&"数値"in t&&(t.種類 in e?e[t.種類]+=t.数値:e[t.種類]=t.数値)}})),(0,l.fX)(n.optionInput.elementalResonance.conditionAdjustments,e)}return(0,o.i6)(n.statsInput,n.characterInput,n.artifactDetailInput,n.conditionInput,n.optionInput),(0,o.V1)(n.damageResult,n.characterInput,n.conditionInput,n.statsInput),n},E=e=>{const t=[],n={},a=e.members.filter((e=>e.name));return 4==a.length&&(a.forEach((e=>{const t=b(e.name);t&&(t.元素 in n?n[t.元素]++:n[t.元素]=1)})),4==Object.keys(n).length?t.push("元素共鳴なし"):Object.keys(n).forEach((e=>{n[e]>=2&&t.push(e+"元素共鳴")}))),t};function w(e){return{id:e,name:"",buildname:void 0,builddata:void 0,tags:[],replacements:[]}}function S(e){const t={id:e,name:"チーム"+(e+1),members:[],description:"",rotation:[],rotationDescription:"",tags:[]};for(let n=0;n<d;n++)t.members.push(w(h++));return t}function j(e){e.name="",e.buildname=void 0,e.builddata=void 0,e.tags=[],e.replacements=[]}function R(e){e.name="チーム"+(e.id+1),e.members.forEach((e=>{j(e)}))}function D(e){const t=i().cloneDeep(e);let n=0;return t.forEach((e=>{e.id=n++,e.members.forEach((e=>{e.id=0,e.builddata=void 0})),e.rotation?.length&&e.rotation.forEach((e=>{e.id=0}))})),JSON.stringify(t,((e,t)=>null!==t?t:void 0))}function V(e,t,n=!1){let a=0;for(let o=0;o<t.length;o++){const l=t[o];let r=e[o];r||(r=S(o),e.push(r)),r.name=l.name;for(let e=0;e<r.members.length;e++)if(l.members?.length){const t=l.members[e];t&&(r.members[e].name=t.name,n?(r.members[e].buildname=t.buildname,r.members[e].builddata=t.buildname?O(t.name,t.buildname):void 0):(r.members[e].buildname=void 0,r.members[e].builddata=void 0),r.members[e].tags=t.tags??[],r.members[e].replacements=t.replacements??[])}r.description=l.description??"",l.rotation?.length&&(r.rotation=i().cloneDeep(l.rotation),r.rotation.forEach((e=>{if(e.id=a++,e.action.startsWith("E")){const t=(0,c.H0)(e.member);t.includes(e.action)||(e.action=t[0])}}))),r.rotationDescription=l.rotationDescription??"",r.tags=l.tags??[]}e.length>t.length&&e.length>=u&&e.splice(t.length)}function N(e){let t=1;const n=y(e);if(n)for(const a of[n.特殊通常攻撃?.詳細,n.通常攻撃?.詳細]){if(!a)continue;let e=1;a.forEach((t=>{if(t.名前){const n=t.名前.match(/.*(\d)段.+/);if(!n)return;const a=Number(n[1]);a>e&&(e=a)}})),t<e&&(t=e)}return t}}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,o){if(!a){var l=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],o=e[u][2];for(var r=!0,s=0;s<a.length;s++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(r=!1,o<l&&(l=o));if(r){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.j=299}(),function(){var e={299:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,l=a[0],r=a[1],s=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(s)var u=s(n)}for(t&&t(a);c<l.length;c++)o=l[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},a=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998,64],(function(){return n(3874)}));a=n.O(a)})();
//# sourceMappingURL=TeamManager.42f362e2.js.map