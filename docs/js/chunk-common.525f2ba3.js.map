{"version":3,"file":"js/chunk-common.525f2ba3.js","mappings":"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Y,SAASuN,IACpBA,EAAMvN,SAAQG,IACVuF,EAASvF,GAAQ,CAAC,GACpB,IAENuF,EAAS,OAAS,EAClBA,EAAS,UAAY,GACrBA,EAAS,YAAc,IACvBA,EAAS,QAAU,EACnBA,EAAS,QAAU,EACZA,CACX,CACO,MAAMvC,EAAgB6V,IAE7B,SAASC,IACL,MAAMvT,EAAmB,CAAC,EAO1B,MANA,CAACuB,GAAiBjH,SAASuN,IACvBA,EAAMvN,SAAQG,IACVuF,EAASvF,GAAQ,CAAC,GACpB,IAENuF,EAAS,OAAS,EACXA,CACX,CAC8BuT,IAAvB,MAEMC,EAAoB,wBAC7B,OAAQ,QACX,KACYC,EAAoB,wBAC7B,QAAS,SACZ,KACYC,EAAoB,wBAC7B,aACA,QACA,SACA,SACA,SACA,aACA,QACA,SACA,SACA,UACH,KACYC,EAAoB,wBAC7B,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,QACA,SACA,SACA,SACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,aACA,QACA,SACA,SACA,UACH,KACYC,EAAoB,wBAC7B,QACA,WACA,QACA,SACA,SACA,SACA,YACA,QACA,WACA,QACA,SACA,SACA,SACA,aACH,KAEYvY,EAAe,wBACxB,MACA,KACA,OACA,MACA,OACA,MACA,OACA,MACA,SACA,YACH,KACYwY,EAAmB,UAC5B,OACA,MACA,OACA,OACA,MACA,SACA,YACH,KAEYC,EAAmB,CAC5B,GAAM,EACN,MAAO,EACP,MAAO,EACP,OAAQ,EACR,MAAO,EACP,SAAU,EACV,WAAY,EACZ,MAAO,EACP,OAAQ,EACR,OAAQ,EACR,YAAa,EACb,YAAa,EACb,YAAa,EACb,YAAa,EACb,YAAa,EACb,YAAa,EACb,YAAa,EACb,WAAY,EACZ,UAAW,GAGF3O,EAAe,CACxBzH,KAAI,IACJqW,SAAQ,EACRC,SAAQ,EACRC,SAAQ,EACRC,SAAQ,EACRC,UAAS,EACTC,SAAQ,EACRC,UAAS,EACTC,SAAQ,EACRC,OAAM,IACNC,QAAO,EACPC,UAAS,EACTC,SAAQ,EACRC,SAAQ,EACRC,UAAS,EACT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","sources":["webpack://gencalc/./src/calculate.ts","webpack://gencalc/./src/common.ts","webpack://gencalc/./src/i18n.ts","webpack://gencalc/./src/input.ts","webpack://gencalc/./src/components/ArtifactItem.vue?52dd","webpack://gencalc/./src/components/ArtifactItem.vue?f1bd","webpack://gencalc/./src/components/ArtifactItem.vue","webpack://gencalc/./src/components/ArtifactSetSelect.vue?96cd","webpack://gencalc/./src/components/ArtifactSetSelect.vue?c0d4","webpack://gencalc/./src/components/ArtifactSetSelect.vue","webpack://gencalc/./src/components/CharacterSelect.vue?9536","webpack://gencalc/./src/components/CharacterSelect.vue?1f8b","webpack://gencalc/./src/components/CharacterSelect.vue","webpack://gencalc/./src/components/CompositionFunction.vue?c68d","webpack://gencalc/./src/components/CompositionFunction.vue","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?8e5c","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?b372","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?2f35","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?4cc0","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?86b6","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?f7af","webpack://gencalc/./src/particlemaster.ts","webpack://gencalc/./src/pages/TeamManager/energyrecharge.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?0eca","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?a17d","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue"],"sourcesContent":["import _ from 'lodash';\nimport { isNumber, overwriteObject } from '@/common';\nimport {\n    ARTIFACT_DETAIL_INPUT_TEMPLATE,\n    CHANGE_KIND_STATUS,\n    CHANGE_KIND_TALENT,\n    CHARACTER_INPUT_TEMPLATE,\n    CONDITION_INPUT_TEMPLATE,\n    DAMAGE_RESULT_TEMPLATE,\n    getStatValue,\n    NUMBER_CONDITION_VALUE_RE,\n    STATS_INPUT_TEMPLATE,\n    TArtifactDetailInput,\n    TCharacterInput,\n    TConditionInput,\n    TConditionValues,\n    TDamageResult,\n    TDamageResultEntry,\n    TOptionInput,\n    TStats,\n    TStatsInput,\n    TEMPLATE,\n    ARRAY,\n    ARRAY,\n    _ARRAY,\n    _ARRAY,\n    TEMPLATE,\n    ARRAY,\n    ARRAY,\n    ARRAY,\n    ARRAY,\n    ARRAY,\n    loadRecommendation,\n    makeDamageDetailObjArrObjCharacter,\n    makeDamageDetailObjArrObjWeapon,\n    makeDamageDetailObjArrObjArtifactSets,\n    setupConditionValues,\n    updateNumberConditionValues,\n    TDamageResultElementalReaction,\n} from '@/input';\nimport { ARTIFACT_MAIN_MASTER, ARTIFACT_SUB_MASTER, DAMAGE_CATEGORY_ARRAY, ELEMENTAL_REACTION_MASTER, ELEMENTAL_RESONANCE_MASTER, getCharacterMasterDetail, TArtifactMainRarity, TArtifactMainStat, TCharacterKey } from '@/master';\n\n/** [, ] => \\+?  */\nexport function getLevelStr(ascension: number, level: number): string {\n    return level + ARRAY[ascension][0] == level ? '+' : '';\n}\n\n/** / */\nexport function getStatValueByLevel(statObj: any, ascension: number, level: number): number {\n    if (!statObj) return 0;\n    const myLevelStr = getLevelStr(ascension, level);\n    if (myLevelStr in statObj) {\n        return statObj[myLevelStr];\n    }\n    const lowLevel = ARRAY[ascension][0];\n    const highLevel = ARRAY[ascension][ARRAY[ascension].length - 1];\n    const lowValue = statObj[lowLevel + '+'];\n    const highValue = statObj[highLevel];\n    return lowValue + (highValue - lowValue) * (level - lowLevel) / (highLevel - lowLevel);\n}\n\n/** / */\nexport function getPropertyValueByLevel(statObj: any, ascension: number): number {\n    const lowLevel = ARRAY[ascension][0];\n    return statObj[lowLevel + '+'];\n}\n\nexport function getValueByLevel(level: number | string, valueObj: any): number {\n    if (level in valueObj) return valueObj[level];\n    level = Number(level);\n    const levelArr = Object.keys(valueObj).map(s => Number(s));\n    let lowLevel;\n    let highLevel;\n    for (let i = 0; i < levelArr.length - 1; i++) {\n        if (levelArr[i] <= level && levelArr[i + 1] >= level) {\n            lowLevel = levelArr[i];\n            highLevel = levelArr[i + 1];\n        }\n    }\n    if (!lowLevel || !highLevel) return 0;\n    return valueObj[lowLevel] + (valueObj[highLevel] - valueObj[lowLevel]) * (level - lowLevel) / (highLevel - lowLevel);\n}\n\n/**  */\nexport function calculateArtifactStatsMain(artifactStatsMain: any, mainstats: string[]) {\n    (Object.keys(artifactStatsMain) as (keyof typeof artifactStatsMain)[]).forEach(\n        (key) => {\n            artifactStatsMain[key] = 0;\n        }\n    );\n    for (const statWithRarity of mainstats) {\n        if (!statWithRarity) continue;\n        const stat: any[] = statWithRarity.split('_');\n        artifactStatsMain[stat[1]] += ARTIFACT_MAIN_MASTER[stat[0] as TArtifactMainRarity][stat[1] as TArtifactMainStat];\n    }\n}\n\n/**  */\nexport function calculateArtifactSubStatByPriority(\n    artifactStatsSub: any,\n    mainstats: string[],\n    prioritySubstats: string[],\n    priotritySubstatIndices: number[],\n    priotritySubstatValues: number[][],\n    prioritySubstatCounts: number[]) {\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach(\n        (key) => {\n            artifactStatsSub[key] = 0;\n        }\n    );\n    let totalCount = 0;\n    for (let i = 0; i < 3; i++) {\n        if (!prioritySubstats[i]) continue;\n        if (priotritySubstatIndices[i] === undefined || priotritySubstatIndices[i] < 0) continue;\n        if (!prioritySubstatCounts[i]) continue;\n        artifactStatsSub[prioritySubstats[i]] += priotritySubstatValues[i][priotritySubstatIndices[i]] * prioritySubstatCounts[i];\n        totalCount += prioritySubstatCounts[i];\n    }\n    // : 3 or 4\n    // : 5 (+4 +8 +12 +16 +20)\n    // +: min=40 max=45\n    const noPrioritySubstatArr = ARRAY.filter(s => !prioritySubstats.includes(s));\n    let noPriorityCount = Math.min(45, 40 + Math.round(Math.max(0, (totalCount - 12) / 4)));\n    noPriorityCount -= Math.min(45, totalCount);\n    for (let i = noPriorityCount; i > 0; i--) {\n        const substat = noPrioritySubstatArr[i % noPrioritySubstatArr.length] as keyof typeof ARTIFACT_SUB_MASTER;\n        artifactStatsSub[substat] += ARTIFACT_SUB_MASTER[substat][3];\n    }\n    const star4Count = mainstats.filter(s => s && s.startsWith('4')).length;\n    const multiplier = 1 - (0.07 * star4Count); // 47%\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach(\n        (key) => {\n            artifactStatsSub[key] *= multiplier;\n            artifactStatsSub[key] = Math.round(artifactStatsSub[key] * 10) / 10;\n        }\n    );\n}\n\nexport function calculateArtifactStats(artifactDetailInput: TArtifactDetailInput) {\n    const artifactStats = artifactDetailInput.;\n    const artifactStatsMain = artifactDetailInput.;\n    const artifactStatsSub = artifactDetailInput.;\n    for (const stat of Object.keys(artifactStats)) {\n        (artifactStats as any)[stat] = 0;\n    }\n    for (const stat of Object.keys(artifactStatsMain)) {\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsMain as any)[stat];\n        else (artifactStats as any)[stat] = (artifactStatsMain as any)[stat];\n    }\n    for (const stat of Object.keys(artifactStatsSub)) {\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsSub as any)[stat];\n        else (artifactStats as any)[stat] = (artifactStatsSub as any)[stat];\n    }\n}\n\n/**  */\nexport const calculateStats = function (\n    statsInput: TStatsInput,\n    characterInput: TCharacterInput,\n    artifactDetailInput: TArtifactDetailInput,\n    conditionInput: TConditionInput,\n    optionInput: TOptionInput\n) {\n    if (!characterInput) return;\n    if (!artifactDetailInput) return;\n    if (!conditionInput) return;\n    if (!optionInput) return;\n\n    try {\n        const characterMaster = characterInput.characterMaster;\n        const ascension = characterInput.;\n        const level = characterInput.;\n        const constellation = characterInput.;\n        const weaponMaster = characterInput.weaponMaster;\n        const weaponAscension = characterInput.;\n        const weaponLevel = characterInput.;\n\n        const workStatsObj = _.cloneDeep(TEMPLATE);\n\n        workStatsObj[''] = ascension;\n        workStatsObj[''] = level;\n        workStatsObj[''] = constellation;\n        (workStatsObj as any)[''] = characterMaster.;\n\n        // \n        if ('' in characterMaster['']) {\n            workStatsObj[''] = characterMaster[''][''];\n        }\n        if ('' in characterMaster) {\n            for (const name of Object.keys(characterMaster[''])) {\n                if (name in conditionInput.conditionValues) {\n                    workStatsObj[name] = Number(conditionInput.conditionValues[name]);\n                } else {\n                    workStatsObj[name] = characterMaster[''][name];\n                }\n            }\n        }\n\n        // \n        for (const stat of Object.keys(statsInput.enemyMaster).filter(s => s != 'key')) {\n            const toStat = '' + stat;\n            workStatsObj[toStat] = statsInput.enemyMaster[stat];\n        }\n\n        // \n        Object.keys(statsInput.statAdjustments).filter(s => !ARRAY.includes(s)).forEach(stat => {\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustments[stat];\n        });\n        Object.keys(statsInput.statAdjustmentsEx).filter(s => !ARRAY.includes(s)).forEach(stat => {\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustmentsEx[stat];\n        });\n\n        // \n        for (const stat of Object.keys(characterMaster[''])) {\n            if (ARRAY.includes(stat)) {\n                workStatsObj[stat] += getStatValueByLevel(characterMaster[''][stat], ascension, level);\n            } else {\n                const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\n                if (toStat in workStatsObj) {\n                    workStatsObj[toStat] += getPropertyValueByLevel(characterMaster[''][stat], ascension);\n                }\n            }\n        }\n\n        // \n        for (const stat of Object.keys(weaponMaster[''])) {\n            workStatsObj[stat] += getStatValueByLevel(weaponMaster[''][stat], weaponAscension, weaponLevel);\n        }\n\n        // \n        const artifactStats = artifactDetailInput.;\n        for (const stat of Object.keys(artifactStats)) {\n            const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\n            workStatsObj[toStat] += (artifactStats as any)[stat];\n        }\n\n        let _Var = characterMaster. == '' ? characterMaster. : '';\n        let _Var = characterMaster. == '' ? characterMaster. : '';\n        let _Var = characterMaster. == '' ? characterMaster. : '';\n\n        if (optionInput) {\n            // \n            [optionInput.elementalResonance, optionInput.teamOption, optionInput.miscOption].forEach(optionObj => {\n                if (optionObj && optionObj.conditionAdjustments) {\n                    Object.keys(optionObj.conditionAdjustments).forEach(stat => {\n                        const workValue = optionObj.conditionAdjustments[stat];\n                        if (workValue === Infinity) {\n                            if (stat.endsWith('')) {\n                                if (['', '', ''].includes(characterMaster.)) {\n                                    const my = stat.replace(/$/, '');\n                                    _Var = my;\n                                    _Var = my;\n                                    _Var = my;\n                                }\n                            }\n                        } else if (workValue !== null) {\n                            if (stat in workStatsObj) {\n                                workStatsObj[stat] += workValue;\n                            } else {\n                                workStatsObj[stat] = workValue;\n                            }\n                            if (stat.endsWith('V1') || stat.endsWith('V2') || stat.endsWith('V3')) {\n                                const toStat = stat.replace(/V[1-3]$/, '');\n                                if (toStat in workStatsObj) {\n                                    workStatsObj[toStat] += workValue;\n                                } else {\n                                    workStatsObj[toStat] = workValue;\n                                }\n                            }\n                        }\n                    })\n                }\n            })\n        }\n\n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\n\n        // \n        calculateStatsTop(workStatsObj, optionInput);\n        // \n        ARRAY.forEach(stat => {\n            if (stat in statsInput.statAdjustments) {\n                if (stat in workStatsObj) {\n                    workStatsObj[stat] += statsInput.statAdjustments[stat];\n                }\n            }\n        });\n\n        // \n        const conditionAdjustments = updateStatsWithCondition(characterInput, validConditionValueArr, workStatsObj);\n\n        // \n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\n            if (myDamageDetail && CHANGE_KIND_TALENT in myDamageDetail) {\n                for (const myDetailObj of myDamageDetail[CHANGE_KIND_TALENT]) {\n                    if (myDetailObj['']) {\n                        const number = checkConditionMatches(myDetailObj[''], validConditionValueArr, constellation);\n                        if (number == 0) continue;\n                    }\n                    if (myDetailObj[''] && myDetailObj[''].endsWith('')) {\n                        const my = myDetailObj[''].replace('', '');\n                        if (!myDetailObj['']) {\n                            _Var = my;\n                            _Var = my;\n                            _Var = my;\n                        } else if (myDetailObj[''] == '') {\n                            _Var = my;\n                        } else if (myDetailObj[''] == '') {\n                            _Var = my;\n                        } else if (myDetailObj[''] == '') {\n                            _Var = my;\n                        }\n                    }\n                }\n            }\n        }\n        conditionInput. = [_Var, _Var, _Var];\n\n        overwriteObject(statsInput.statsObj, workStatsObj);\n        overwriteObject(conditionInput.conditionAdjustments, conditionAdjustments);\n    } catch (error) {\n        console.error(error);\n        console.error(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\n        // throw error;\n    }\n}\n\nfunction updateStatsWithCondition(\n    characterInput: TCharacterInput,\n    validConditionValueArr: string[],\n    workStatsObj: TStats\n) {\n    const constellation = characterInput.;\n    const workConditionAdjustments = {} as { [key: string]: number };\n    const statFormulaMap: Map<string, any[]> = new Map();\n\n    for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\n        if (myDamageDetail && CHANGE_KIND_STATUS in myDamageDetail) {\n            for (const myDetailObj of myDamageDetail[CHANGE_KIND_STATUS]) {\n                let hasCondition = false;\n                let myNew = myDetailObj[''];\n                if (myDetailObj['']) {\n                    const number = checkConditionMatches(myDetailObj., validConditionValueArr, constellation);\n                    if (number == 0) continue;\n                    if (number != 1) {\n                        myNew = (myNew as any).concat(['*', number]);\n                    }\n                    hasCondition = true;\n                }\n                let myNew = myDetailObj[''];\n                if (myNew) {\n                    if (myDetailObj['']) {\n                        myNew += '.' + myDetailObj[''];\n                    }\n                    if (!statFormulaMap.has(myNew)) {\n                        statFormulaMap.set(myNew, []);\n                    }\n                    statFormulaMap.get(myNew)?.push([myNew, myNew, myDetailObj., myDetailObj., hasCondition]);\n                }\n            }\n        }\n    }\n\n    const hpStatArr = ['HP', 'HP%', 'HP+', 'HP'];\n    const defStatArr = ['', '%', '+', ''];\n    const atkStatArr = ['', '%', '+', ''];\n    const otherStatArr = [..._ARRAY, ..._ARRAY, ...ARRAY, ...ARRAY, ...ARRAY, ''];\n    otherStatArr.push(...Array.from(statFormulaMap.keys()).filter(s => s.indexOf('.') != -1));\n\n    const formulaStatArr = [...new Set(Array.from(statFormulaMap.keys()).map(s => s.replace(/V[1-3]$/, '')))].filter(s => ![...hpStatArr, ...defStatArr, ...atkStatArr, ...otherStatArr].includes(s));\n    formulaStatArr.sort(compareFunction);\n\n    // HP\n    for (const stat of hpStatArr) {\n        const oldStatsObj: TStats = {};\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const workStat = stat + postfix;\n            if (workStat in workStatsObj) {\n                oldStatsObj[workStat] = workStatsObj[workStat];\n            } else {\n                oldStatsObj[workStat] = 0;\n            }\n        });\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const fromStat = stat + postfix;\n            if (workStatsObj[fromStat]) {\n                if (stat in workStatsObj) {\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\n                } else {\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\n                }\n            }\n        });\n    }\n    workStatsObj['HP'] += workStatsObj['HP'] + workStatsObj['HP+'];\n    workStatsObj['HP'] += (workStatsObj['HP'] * workStatsObj['HP%']) / 100;\n\n    for (const stat of formulaStatArr) {\n        const oldStatsObj: TStats = {};\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const workStat = stat + postfix;\n            if (workStat in workStatsObj) {\n                oldStatsObj[workStat] = workStatsObj[workStat];\n            } else {\n                oldStatsObj[workStat] = 0;\n            }\n        });\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const fromStat = stat + postfix;\n            if (workStatsObj[fromStat]) {\n                if (stat in workStatsObj) {\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\n                } else {\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\n                }\n            }\n        });\n    }\n\n    // \n    for (const stat of defStatArr) {\n        const oldStatsObj: TStats = {};\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const workStat = stat + postfix;\n            if (workStat in workStatsObj) {\n                oldStatsObj[workStat] = workStatsObj[workStat];\n            } else {\n                oldStatsObj[workStat] = 0;\n            }\n        });\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const fromStat = stat + postfix;\n            if (workStatsObj[fromStat]) {\n                if (stat in workStatsObj) {\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\n                } else {\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\n                }\n            }\n        });\n    }\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\n\n    // \n    for (const stat of atkStatArr) {\n        const oldStatsObj: TStats = {};\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const workStat = stat + postfix;\n            if (workStat in workStatsObj) {\n                oldStatsObj[workStat] = workStatsObj[workStat];\n            } else {\n                oldStatsObj[workStat] = 0;\n            }\n        });\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const fromStat = stat + postfix;\n            if (workStatsObj[fromStat]) {\n                if (stat in workStatsObj) {\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\n                } else {\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\n                }\n            }\n        });\n    }\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\n\n    // \n    for (const stat of otherStatArr) {\n        const oldStatsObj: TStats = {};\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const workStat = stat + postfix;\n            if (workStat in workStatsObj) {\n                oldStatsObj[workStat] = workStatsObj[workStat];\n            } else {\n                oldStatsObj[workStat] = 0;\n            }\n        });\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\n        ['V1', 'V2', 'V3'].forEach(postfix => {\n            const fromStat = stat + postfix;\n            if (workStatsObj[fromStat]) {\n                if (stat in workStatsObj) {\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\n                } else {\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\n                }\n            }\n        });\n    }\n\n    return workConditionAdjustments;\n}\n\nfunction updateStatsWithConditionSub(\n    workConditionAdjustments: TStats,\n    workStatsObj: TStats,\n    statFormulaMap: Map<string, any[]>,\n    formulaKey: string\n) {\n    for (const formulaArr of [statFormulaMap.get(formulaKey), ...['V1', 'V2', 'V3'].map(s => statFormulaMap.get(formulaKey + s))]) {\n        if (!formulaArr) continue;\n        formulaArr.forEach(formula => {\n            const diffStats = updateStats(workStatsObj, formula[0], formula[1], formula[2], formula[3]);\n            for (const stat of Object.keys(diffStats)) {\n                if (ARRAY.includes(stat + 'TOP')) {\n                    const statValue = getStatValue(stat + 'X7', workStatsObj);\n                    const topValue = workStatsObj[stat + 'TOP'];\n                    if (statValue !== undefined && topValue !== undefined) {\n                        if (statValue > topValue) {\n                            workStatsObj[stat + 'TOP'] = statValue;\n                        }\n                    }\n                }\n            }\n            if (formula[4]) {\n                for (const stat of Object.keys(diffStats)) {\n                    if (stat in workConditionAdjustments) {\n                        workConditionAdjustments[stat] += diffStats[stat];\n                    } else {\n                        workConditionAdjustments[stat] = diffStats[stat];\n                    }\n                }\n            }\n        })\n    }\n}\n\nfunction compareFunction(a: string, b: string) {\n    const arr = ['', '', '', '', '', '', ''];\n    const lowestArr = [''];\n    let aIndex = arr.indexOf(a);\n    if (lowestArr.indexOf(a) >= 0) {\n        aIndex = arr.length + 1;\n    }\n    let bIndex = arr.indexOf(b);\n    if (lowestArr.indexOf(b) >= 0) {\n        bIndex = arr.length + 1;\n    }\n    return (aIndex != -1 ? aIndex : arr.length) - (bIndex != -1 ? bIndex : arr.length);\n}\n\nexport function calculateElementalResonance(\n    conditionValues: TConditionValues,\n    conditionInput: TConditionInput,\n): TStats {\n    const result: TStats = {};\n    const validConditionValueArr = makeValidConditionValueArr(conditionInput);\n    for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\n        if (!conditionValues[key]) continue;\n        const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\n        if (master.) {\n            for (const detailObj of master.) {\n                if (detailObj.) {\n                    const matchRet = checkConditionMatches(detailObj., validConditionValueArr, 0);\n                    if (matchRet == 0) continue;\n                }\n                if (detailObj. && detailObj.) {\n                    if (detailObj. in result) {\n                        result[detailObj.] += detailObj.;\n                    } else {\n                        result[detailObj.] = detailObj.;\n                    }\n                }\n            }\n        }\n        if (key == '' && conditionValues.dendroOption) {\n            result[''] += Number(conditionValues.dendroOption);\n        }\n    }\n    return result;\n}\n\n/**  */\nexport function calculateFormulaArray(\n    formulaArr: any,\n    statsObj: TStats,\n    damageResult: TDamageResult,\n    opt_max: number | string | Array<number | string> | null = null,\n    opt_min: number | string | Array<number | string> | null = null\n): number {\n    try {\n        let result = 0;\n        if (Array.isArray(formulaArr)) {\n            let operator: string | null = null;\n            for (const entry of formulaArr) {\n                let subResult = 0;\n                if (['+', '-', '*', '/'].includes(entry)) {\n                    operator = entry;\n                    continue;\n                } else if (isNumber(entry)) {\n                    subResult = Number(entry);\n                } else if (Array.isArray(entry)) {\n                    subResult = calculateFormulaArray(entry, statsObj, damageResult);\n                } else if (entry.indexOf('#') != -1) {\n                    const nameArr = entry.split('#');\n                    if (damageResult && nameArr[0] in damageResult) {\n                        const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\n                        let damage = null;\n                        for (const damageArr of damageArrArr) {\n                            if (nameArr[1] == damageArr[0]) {\n                                damage = damageArr[4];  // \n                                break;\n                            }\n                        }\n                        if (damage != null) {\n                            subResult = damage;\n                        } else {\n                            console.error(formulaArr, statsObj, damageResult, opt_max, opt_min, entry);\n                        }\n                    }\n                } else {\n                    const temp = getStatValue(entry, statsObj);\n                    if (temp === undefined) {\n                        console.error(formulaArr, statsObj, null, opt_max, opt_min, entry);\n                    } else {\n                        subResult = temp;\n                    }\n                }\n                if (operator == null) {\n                    result += subResult;\n                } else {\n                    switch (operator) {\n                        case '+':\n                            result += subResult;\n                            break;\n                        case '-':\n                            result -= subResult;\n                            break;\n                        case '*':\n                            result *= subResult;\n                            result = Math.floor(result * 100) / 100;\n                            break;\n                        case '/':\n                            result /= subResult;\n                            break;\n                    }\n                }\n            }\n        } else if (isNumber(formulaArr)) {\n            result = Number(formulaArr);\n        } else if (formulaArr.indexOf('#') != -1) {\n            const nameArr = formulaArr.split('#');\n            if (damageResult && nameArr[0] in damageResult) {\n                const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\n                for (const damageArr of damageArrArr) {\n                    if (nameArr[1] == damageArr[0]) {\n                        result = damageArr[4];  // \n                        break;\n                    }\n                }\n            }\n        } else {\n            const temp = getStatValue(formulaArr, statsObj);\n            if (temp !== undefined) {\n                result = temp;\n            } else {\n                console.error(formulaArr, statsObj, null, opt_max, opt_min);\n                result = 0; // \n            }\n        }\n        if (opt_max != null) {\n            const maxValue = calculateFormulaArray(opt_max, statsObj, damageResult);\n            result = Math.min(result, maxValue);\n        }\n        if (opt_min != null) {\n            const minValue = calculateFormulaArray(opt_min, statsObj, damageResult);\n            result = Math.max(result, minValue);\n        }\n        return result;\n    } catch (error) {\n        console.error(error);\n        console.error(formulaArr, statsObj, damageResult, opt_max, opt_min);\n        throw error;\n    }\n}\n\n/**  */\nexport function calculateDamageResult(\n    damageResult: TDamageResult,\n    characterInput: TCharacterInput,\n    conditionInput: TConditionInput,\n    statsInput: TStatsInput,\n) {\n    try {\n        if (!characterInput) return;\n        if (!conditionInput) return;\n        if (!statsInput) return;\n        const characterMaster = characterInput.characterMaster;\n        const constellation = characterInput[''];\n        const vision = characterMaster[''];\n\n        // \n        const reactionResult = _.cloneDeep(TEMPLATE);\n        const reactionMasterArr = [];\n        const dmgElementSet = new Set<string>();\n        dmgElementSet.add(vision); // \n        if (conditionInput.selectList.filter(s => s.name == '').length) {\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\n            const selectedIndex = conditionInput.conditionValues[''] as number;\n            if (selectedIndex) {\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\n                dmgElementSet.add(dmgElement); // \n            }\n        }\n        if (conditionInput.selectList.filter(s => s.name == '').length) {\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\n            const selectedIndex = conditionInput.conditionValues[''] as number;\n            if (selectedIndex) {\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\n                dmgElementSet.add(dmgElement); // \n            }\n        }\n        for (const dmgElement of conditionInput.) {\n            if (dmgElement && dmgElement != '') {\n                dmgElementSet.add(dmgElement); // //\n            }\n        }\n        for (const dmgElement of dmgElementSet) {\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\n        }\n        let has = false;\n        if (characterMaster. == '' || characterMaster. == '') {\n            has = true;\n        } else {\n            const characterArr = (ELEMENTAL_REACTION_MASTER as any).?.?.;\n            if (characterArr && characterArr.includes(characterMaster.)) {\n                has = true;\n            }\n        }\n        if (has) {\n            const dmgElement = '';\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\n        }\n        reactionResult[''] = vision;\n        reactionMasterArr.forEach(entry => {\n            const element = entry[0];\n            const reactionMaster = entry[1];\n            Object.keys(reactionMaster).forEach(reaction => {\n                const reactionObj = reactionMaster[reaction];\n                let resultValue = 0;\n                if (reaction == '') {\n                    resultValue = calculate(element, statsInput.statsObj);\n                } else if (reaction == '') {\n                    let dmgElement = '';\n                    for (const entry of conditionInput.selectList) {\n                        if (entry.name == '') {\n                            const optionValue = entry.options[Number(conditionInput.conditionValues[''])];\n                            if (optionValue) dmgElement = optionValue.replace(/$/, '');\n                            break;\n                        }\n                    }\n                    reactionResult[''] = dmgElement;\n                    resultValue = calculate(reaction, element, statsInput.statsObj, dmgElement);\n                } else {\n                    switch (reactionObj['']) {\n                        case '':    //  \n                            resultValue = calculate(reaction, element, statsInput.statsObj);\n                            break;\n                        case '':    //    \n                            resultValue = calculate(reaction, element, statsInput.statsObj);\n                            break;\n                        case '':    //  \n                            resultValue = calculate(reaction, element, statsInput.statsObj);\n                            break;\n                    }\n                }\n                ['', '', ''].forEach(suffix => {\n                    let key = reaction + suffix;\n                    if (suffix === '') {\n                        key += '_' + element;\n                    }\n                    if (key in reactionResult) {\n                        (reactionResult as any)[key] = resultValue;\n                    }\n                });\n            });\n        });\n        Object.keys(reactionResult).filter(s => s.endsWith('') && s.indexOf('') == -1).forEach(dmg => {\n            ['', ''].forEach(stat => {\n                const key = dmg + stat;\n                if (key in statsInput.statsObj) {\n                    (reactionResult as any)[key] = statsInput.statsObj[key];\n                }\n            });\n        });\n        overwriteObject(damageResult., reactionResult);\n        console.debug('', damageResult.);\n\n        // \n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\n\n        const damageDetailMyCharacter = characterInput.damageDetailMyCharacter;\n        const damageDetailMyWeapon = characterInput.damageDetailMyWeapon;\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\n\n        if (Array.isArray(damageResult[''])) {\n            damageResult[''].splice(0, damageResult[''].length);\n        }\n\n        if (damageDetailMyCharacter) {\n            for (const category of ['', '', '']) {\n                damageResult[category] = [];\n                if (!(category in damageDetailMyCharacter)) continue;\n                const element = conditionInput.[['', '', ''].indexOf(category)];\n                let talentDetailArr = (damageDetailMyCharacter as any)[category];\n                if (('' + category) in damageDetailMyCharacter) {\n                    const workObj = (damageDetailMyCharacter as any)['' + category];\n                    if (checkConditionMatches(workObj[''], validConditionValueArr, constellation) != 0) {\n                        talentDetailArr = workObj[''];\n                    }\n                }\n                for (const talentDetail of talentDetailArr) {\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation) == 0) {\n                        continue;\n                    }\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult, element);\n                    (damageResult[category] as any).push(resultArr);\n                }\n                if (category == '') {\n                    let n = 0;\n                    const sum = ['', null, 0, 0, 0, null, 0, 0, 1] as TDamageResultEntry;\n                    for (const entry of damageResult[category]) {\n                        if ((entry[0].endsWith('') || [''].includes(entry[0])) && !entry[0].startsWith('_')) {  // \n                            sum[1] = entry[1];\n                            sum[2] += entry[2];\n                            if (entry[3] == null) sum[3] = null;\n                            else if (sum[3] != null) sum[3] += entry[3];\n                            sum[4] += entry[4];\n                            if (sum[6] != null) {   // HIT\n                                if (entry[6]) sum[6] += entry[6];\n                                else sum[6]++;\n                            }\n                            sum[7] = entry[7];  // \n                            sum[8] = entry[8];  // \n                            n++;\n                        }\n                    }\n                    if (n > 0) {\n                        damageResult[category].splice(n, 0, sum);\n                    }\n                }\n            }\n            for (const category of ['', '', '']) {\n                damageResult[category] = [];\n                if (!(category in damageDetailMyCharacter)) continue;\n                const talentDetailArr = (damageDetailMyCharacter as any)[category];\n                for (const talentDetail of talentDetailArr) {\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation) == 0) {\n                        continue;\n                    }\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\n                    (damageResult[category] as TDamageResultEntry[]).push(resultArr);\n                }\n            }\n        }\n\n        // \n        for (const myDamageDetail of [damageDetailMyWeapon, damageDetailMyArtifactSets]) {\n            const category = '';\n            if (!myDamageDetail || !(category in myDamageDetail)) continue;\n            const talentDetailArr = (myDamageDetail as any)[category];\n            for (const talentDetail of talentDetailArr) {\n                if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation) == 0) {\n                    continue;\n                }\n                const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\n                (damageResult[category] as TDamageResultEntry[]).push(resultArr);\n            }\n        }\n\n        // \n        const damageTakenArr = [] as any;\n        for (const stat of _ARRAY) {\n            const element = stat.replace(/$/, '').replace(/$/, '');\n            const damageTaken = calculateDamageTaken(statsInput.statsObj, 10000, element);\n            damageTakenArr.push({ key: element, value: damageTaken });\n        }\n        damageResult[''] = damageTakenArr;\n\n        // \n        const resScoreArr = [] as any;\n        for (const damageTaken of damageTakenArr) {\n            resScoreArr.push({ key: damageTaken.key, value: statsInput.statsObj['HP'] * 10000 / damageTaken.value });\n        }\n        damageResult[''] = resScoreArr;\n\n        console.debug(damageResult);\n    } catch (error) {\n        console.error(error);\n        console.error(damageResult, characterInput, conditionInput, statsInput);\n        // throw error;\n    }\n}\n\nexport function makeValidConditionValueArr(conditionInput: any) {\n    try {\n        const result = [] as string[];\n        if (!conditionInput) return result;\n        const checkboxList = conditionInput.checkboxList;\n        if (checkboxList) {\n            checkboxList.forEach((entry: any) => {\n                if (conditionInput.conditionValues[entry.name]) {\n                    result.push(entry.name);\n                }\n            });\n        }\n        const selectList = conditionInput.selectList;\n        if (selectList) {\n            selectList.forEach((entry: any) => {\n                const value = conditionInput.conditionValues[entry.name];\n                if (value !== undefined && value !== null) {\n                    if (value > 0 || (value == 0 && entry.required)) {\n                        result.push(entry.name + '@' + entry.options[value]);\n                    }\n                }\n            });\n        }\n        const numberList = conditionInput.numberList;\n        if (numberList) {\n            numberList.forEach((entry: any) => {\n                const value = conditionInput.conditionValues[entry.name];\n                if (value !== undefined && value !== null) {\n                    result.push(entry.name + '=' + value);\n                }\n            });\n        }\n        return result;\n    } catch (error) {\n        console.error(error);\n        console.error(conditionInput);\n        throw error;\n    }\n}\n\nexport function checkConditionMatches(\n    conditionStr: string,\n    validConditionValueArr: string[],\n    constellation: number,\n): number {\n    const myCondStr = conditionStr.split('^')[0];\n\n    if (myCondStr.indexOf('|') != -1) {  // |OR\n        const myCondStrArr = myCondStr.split('|');\n        for (let i = 0; i < myCondStrArr.length; i++) {\n            const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation);\n            if (resultSub == 1) {\n                return 1;   // \n            }\n        }\n        return 0;\n    }\n\n    const myCondStrArr = myCondStr.split('&');    // &AND\n    let result = 1;\n    for (let i = 0; i < myCondStrArr.length; i++) {\n        const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation);\n        if (resultSub == 0) {\n            return 0;   // \n        }\n        if (resultSub != 1) {\n            result = resultSub;\n        }\n    }\n    return result;\n}\n\nfunction checkConditionMatchesSub(\n    conditionStr: string,\n    validConditionValueArr: string[],\n    constellation: number,\n): number {\n    const myCondArr = conditionStr.split(/[@=]/);\n    if (myCondArr[0] == '') {\n        if (myCondArr.length == 2) {\n            if (isNumber(myCondArr[1])) {\n                const work = Number(myCondArr[1]);\n                if (work <= constellation) {\n                    return 1;\n                }\n            }\n        }\n        return 0;   // \n    }\n    if (validConditionValueArr.includes(conditionStr) || validConditionValueArr.includes(conditionStr.replace('=', '@'))) {\n        return 1;   //  \n    }\n    if (myCondArr.length == 1) {\n        if (validConditionValueArr.filter(s => s.split('@')[0] == conditionStr).length > 0) {\n            return 1;   //  \n        }\n        return 0;   // \n    }\n    if (conditionStr.indexOf('=') != -1) {\n        if (NUMBER_CONDITION_VALUE_RE.test(myCondArr[1])) { // \n            const workArr = validConditionValueArr.filter(s => s.split('=')[0] == myCondArr[0]);\n            if (workArr.length > 0) {\n                return Number(workArr[0].split('=')[1]);   // \n            }\n        }\n        return 0;   // \n    }\n    const re = new RegExp('[^0-9]*?([\\\\-0-9\\\\.]+).*');    // ={prefix}{}{postfix}\n    for (let i = 0; i < validConditionValueArr.length; i++) {\n        if (validConditionValueArr[i].startsWith(myCondArr[0] + '@')) {\n            const workCondArr = validConditionValueArr[i].split('@');\n            const reRet = re.exec(workCondArr[1]);\n            if (reRet) {\n                const work = Number(reRet[1]);\n                return work;    //  \n            }\n        }\n    }\n    return 0;   // \n}\n\n/**  */\nfunction calculate(\n    reaction: any,\n    element: string,\n    statsObj: any,\n) {\n    try {\n        if (!element || element == '') return 0;\n        const elementalMastery = statsObj[''];\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\n        let result = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\n        result *= 1 + (25 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\n        return result;\n    } catch (error) {\n        console.error(error);\n        console.error(reaction, element, statsObj);\n        throw error;\n    }\n}\n\n/**\n * \n */\nfunction calculate(\n    reaction: any,\n    element: string,\n    statsObj: TStats,\n    opt_dmgElement?: string,\n) {\n    try {\n        if (!element || element == '') return 0;\n        const level = statsObj[''];\n        const elementalMastery = statsObj[''];\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\n        const dmgElement = opt_dmgElement ?? (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\n        let result = getValueByLevel(level, (ELEMENTAL_REACTION_MASTER as any)[element][reaction]['']);\n        result *= 1 + (16 * elementalMastery / (elementalMastery + 2000)) + dmgBuff / 100;\n        result *= calculateEnemyRes(dmgElement, statsObj);\n        return result;\n    } catch (error) {\n        console.error(error);\n        console.error(reaction, element, statsObj, opt_dmgElement);\n        throw error;\n    }\n}\n\n/**  */\nfunction calculate(element: string, statsObj: TStats) {\n    try {\n        if (!element || element == '') return 0;\n        const level = statsObj[''];\n        const elementalMastery = statsObj[''];\n        const dmgBuff = statsObj[''] ?? 0;\n        let result = getValueByLevel(level, (ELEMENTAL_REACTION_MASTER as any)[element]['']['']);\n        result *= 1 + (40 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\n        return result;\n    } catch (error) {\n        console.error(error);\n        console.error(element, statsObj);\n        throw error;\n    }\n}\n\n/**  */\nfunction calculate(reaction: any, element: string, statsObj: TStats) {\n    try {\n        if (!element || element == '') return 0;\n        const level = statsObj[''];\n        const elementalMastery = statsObj[''];\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\n        const dmgElement = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\n        let result = getValueByLevel(level, (ELEMENTAL_REACTION_MASTER as any)[element][reaction]['']);\n        result *= 1 + (5 * elementalMastery / (elementalMastery + 1200)) + dmgBuff / 100;\n        result *= calculateEnemyRes(dmgElement, statsObj);\n        return result;\n    } catch (error) {\n        console.error(error);\n        console.error(reaction, element, statsObj);\n        throw error;\n    }\n}\n\n/**  */\nexport function calculateEnemyDef(statsObj: TStats, opt_ignoreDef = 0) { // , \n    try {\n        const level = statsObj[''] ?? 0;\n        const enemyLevel = statsObj[''] ?? 0;\n        const calcIgnoreDef = opt_ignoreDef / 100;\n        const calcDef = Math.max(-100, statsObj[''] ?? 0) / 100;    //  -100%\n        const result = (level + 100) / ((1 - calcIgnoreDef) * (1 + calcDef) * (enemyLevel + 100) + level + 100);\n        return result;\n    } catch (error) {\n        console.error(error);\n        console.error(statsObj, opt_ignoreDef);\n        throw error;\n    }\n}\n\n/** () */\nfunction calculateRes(res: number) {\n    if (res == Infinity) return 0;  // \n    let result = res;\n    if (result < 0) {\n        result = 100 - result / 2;\n    } else if (result < 75) {\n        result = 100 - result;\n    } else {\n        result = 10000 / (4 * result + 100)\n    }\n    result /= 100;\n    return result;\n}\n\n/** () */\nexport function calculateEnemyRes(element: string, statsObj: TStats) {\n    try {\n        const statName = '' + element + (element != '' ? '' : '') + '';\n        const result = calculateRes(statsObj[statName] ?? 0);\n        return result;\n    } catch (error) {\n        console.error(error);\n        console.error(element, statsObj);\n        throw error;\n    }\n}\n\n/**  */\nfunction calculateDamageFromDetail(\n    detailObj: any,\n    characterInput: TCharacterInput,\n    conditionInput: TConditionInput,\n    statsObj: TStats,\n    damageResult: TDamageResult,\n    opt_element: string | null = null\n): TDamageResultEntry {\n    try {\n        const myArr = [] as Array<string>;\n        let isCalc = true;\n        let isCalc = true;\n        let isCalc = true;\n        let my = detailObj[''] != null ? detailObj[''] : opt_element != null ? opt_element : null;\n        let my = 0; // for \n        let my = 0; // for \n        const myHIT = detailObj['HIT'] != null ? Number(detailObj['HIT']) : 1;\n        const my = {} as { [key: string]: number };\n\n        const constellation = statsObj[''];\n        const talentChangeDetailObjArr = getChangeDetailObjArr(characterInput, CHANGE_KIND_TALENT);\n\n        let validConditionValueArr = makeValidConditionValueArr(conditionInput);  // \n        const myConditionValuesAfter = _.cloneDeep(conditionInput.conditionValues);\n\n        if (detailObj['']) {\n            for (const delCondition of detailObj['']) {\n                let work = delCondition;\n                if (_.isPlainObject(delCondition)) {\n                    work = delCondition.;\n                }\n                if (work in myConditionValuesAfter) {\n                    if (isNumber(myConditionValuesAfter[work])) {\n                        myConditionValuesAfter[work] = 0;\n                    } else if (_.isBoolean(myConditionValuesAfter[work])) {\n                        myConditionValuesAfter[work] = false;\n                    }\n                }\n            }\n        }\n        if (detailObj['']) {\n            for (const addCondition of detailObj['']) {\n                if (_.isString(addCondition)) {\n                    if (addCondition in myConditionValuesAfter) {\n                        if (_.isBoolean(myConditionValuesAfter[addCondition])) {\n                            myConditionValuesAfter[addCondition] = true;\n                        }\n                    }\n                } else if (_.isPlainObject(addCondition)) {\n                    if (addCondition. in myConditionValuesAfter) {\n                        let newValue = myConditionValuesAfter[addCondition.];\n                        if ('' in addCondition) {\n                            if (_.isString(addCondition.)) {\n                                const work = String(addCondition.).replace(/^\\+/, '');\n                                (newValue as number) += Number(work);\n                            } else if (isNumber(addCondition.)) {\n                                newValue = addCondition.;\n                            } else {\n                                newValue = addCondition.;\n                            }\n                            if (newValue !== null && isNumber(newValue)) {\n                                if ((newValue as number) < 0) {\n                                    newValue = 0;\n                                } else {\n                                    conditionInput.selectList.filter(s => s.name == addCondition.).forEach(entry => {\n                                        if (newValue !== null && (newValue as number) >= entry.options.length) {\n                                            newValue = entry.options.length - 1;\n                                        }\n                                    })\n                                }\n                            }\n                        } else {\n                            newValue = true;\n                        }\n                        myConditionValuesAfter[addCondition.] = newValue;\n                    }\n                    if (addCondition.) {\n                        if (Array.isArray(addCondition.)) {\n                            addCondition..forEach((desc: string) => {\n                                if (!damageResult[''].includes(desc)) {\n                                    damageResult[''].push(desc);\n                                }\n                            })\n                        } else {\n                            const desc = addCondition.;\n                            if (!damageResult[''].includes(desc)) {\n                                damageResult[''].push(desc);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (detailObj[''] || detailObj['']) {\n            const myConditionInputAfter: TConditionInput = _.cloneDeep(conditionInput);\n            myConditionInputAfter.conditionValues = myConditionValuesAfter;\n            const validConditionValueArrAfter = makeValidConditionValueArr(myConditionInputAfter);\n\n            [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets].forEach(damageDetail => {\n                if (!damageDetail) return;\n                damageDetail..filter(s => s.).forEach(damageDetailObj => {\n                    const conditionStr = damageDetailObj. as string;\n                    let valueBefore = 0;\n                    let valueAfter = 0;\n                    const matchesBefore = checkConditionMatches(conditionStr, validConditionValueArr, constellation);\n                    const matchesAfter = checkConditionMatches(conditionStr, validConditionValueArrAfter, constellation);\n                    if (matchesBefore == matchesAfter) return;\n                    if (matchesBefore != 0) {\n                        let new = damageDetailObj.;\n                        if (matchesBefore != 1) {\n                            new = (new as any[]).concat(['*', matchesBefore]);\n                        }\n                        valueBefore = calculateFormulaArray(new, statsObj, damageResult, damageDetailObj., damageDetailObj.);\n                    }\n                    if (matchesAfter != 0) {\n                        let new = damageDetailObj.;\n                        if (matchesAfter != 1) {\n                            new = (new as any[]).concat(['*', matchesAfter]);\n                        }\n                        valueAfter = calculateFormulaArray(new, statsObj, damageResult, damageDetailObj., damageDetailObj.);\n                    }\n                    const diff = valueAfter - valueBefore;\n                    if (diff) {\n                        let new = damageDetailObj. as string;\n                        if (damageDetailObj.) {\n                            new += '.' + damageDetailObj.;\n                        }\n                        if (new in my) {\n                            my[new] += diff;\n                        } else {\n                            my[new] = diff;\n                        }\n                    }\n                })\n            })\n\n            validConditionValueArr = validConditionValueArrAfter;\n        }\n\n        const myTalentChangeDetailObjArr = [] as any[];\n        if (talentChangeDetailObjArr) {\n            // \n            talentChangeDetailObjArr.forEach(valueObj => {\n                let number = null;\n                if (valueObj.) {\n                    number = checkConditionMatches(valueObj., validConditionValueArr, constellation);\n                    if (number == 0) {\n                        return;\n                    }\n                }\n                if (valueObj.) {\n                    if (valueObj..endsWith('')) {    // for \n                        if (!valueObj..startsWith(my)) {\n                            return;\n                        }\n                    } else if (valueObj. == '') {\n                        if (my != '') {\n                            return;\n                        }\n                    } else {\n                        //  or .\n                        const my = detailObj.;\n                        const myArr = valueObj..split('.');\n                        if (myArr[0] != my) {\n                            return;\n                        }\n                        if (myArr.length > 1 && myArr[myArr.length - 1] != detailObj.) {\n                            return;\n                        }\n                    }\n                }\n                if (valueObj[''].endsWith('')) {   // \n                    if (['', '', ''].includes(detailObj.)) {\n                        if (!detailObj['']) {\n                            my = valueObj[''].replace('', '');\n                        }\n                    }\n                } else if (valueObj. == '') {   //  for \n                    const myValue = calculateFormulaArray(valueObj., statsObj, damageResult, valueObj., valueObj.);\n                    my += myValue;\n                } else if (valueObj. == '') {\n                    // nop\n                } else {\n                    if (number != null && number != 1) {    // @\n                        const myNewValueObj = JSON.parse(JSON.stringify(valueObj)); // _.cloneDeep\n                        myNewValueObj. = myNewValueObj..concat(['*', number]);\n                        myTalentChangeDetailObjArr.push(myNewValueObj);\n                    } else {\n                        myTalentChangeDetailObjArr.push(valueObj);\n                    }\n                }\n            });\n        }\n        console.debug(detailObj[''] + ':myTalentChangeDetailObjArr');\n        console.debug(myTalentChangeDetailObjArr);\n\n        // \n        const tempStatsObj: TStats = {};\n        [statsObj, my].forEach(entryObj => {\n            Object.keys(entryObj).forEach(stat => {\n                const tempArr = stat.split('.');\n                if (tempArr.length == 1) return;\n                let isValid = false;\n                if (tempArr[1] == detailObj.) {\n                    if (tempArr.length == 2) {\n                        isValid = true;\n                    } else if (tempArr[2] == detailObj.) {\n                        if (tempArr.length == 3) {\n                            isValid = true;\n                        }\n                    }\n                } else if (tempArr[1] == (my + '')) {\n                    if (tempArr.length == 2) {\n                        isValid = true;\n                    }\n                } else if (tempArr[1] == '' && my == '') {\n                    if (tempArr.length == 2) {\n                        isValid = true;\n                    }\n                }\n                if (isValid) {\n                    const toStat = tempArr[0];\n                    if (toStat in tempStatsObj) {\n                        if (toStat == '' && tempStatsObj[toStat] > 0) {\n                            tempStatsObj[toStat] *= entryObj[stat] / 100;   // for \n                        } else {\n                            tempStatsObj[toStat] += entryObj[stat];\n                        }\n                    } else {\n                        tempStatsObj[toStat] = entryObj[stat];\n                    }\n                }\n            })\n        })\n        Object.keys(tempStatsObj).forEach(stat => {\n            if (stat in my) {\n                if (stat.startsWith('') && my[stat] > 0) {\n                    my[stat] *= tempStatsObj[stat] / 100;   // for \n                } else {\n                    my[stat] += tempStatsObj[stat];\n                }\n            } else {\n                my[stat] = tempStatsObj[stat];\n            }\n        });\n        console.debug('my', my);\n\n        // for  0.05\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\n        if (damageDetailMyArtifactSets) {\n            if (detailObj. == '' && detailObj.HIT > 1\n                && characterInput.artifactSets[0] == '' && characterInput.artifactSets[1] == '') {\n                let isValid = false;\n                for (const valueObj of damageDetailMyArtifactSets[CHANGE_KIND_STATUS].filter(s => s. && s. && s.)) {\n                    const my = valueObj. as string; // \n                    const my = valueObj. as string;\n                    const myHIT = detailObj.HIT;\n                    if (checkConditionMatches(my, validConditionValueArr, constellation) != 0) {\n                        const myValue = calculateFormulaArray(valueObj., statsObj, damageResult, valueObj., valueObj.);\n                        if (!(my in my)) {\n                            my[my] = 0;\n                        }\n                        my[my] -= myValue * (myHIT - Math.max(1, Math.floor(myHIT / 2))) / myHIT;\n                        isValid = true;\n                    }\n                }\n                if (isValid) {\n                    const description = '4HIT3HIT14HIT2';\n                    if (!damageResult[''].includes(description)) {\n                        damageResult[''].push(description);\n                    }\n                }\n            }\n        }\n\n        // \n        Object.keys(my).forEach(stat => {\n            if (stat in statsObj) {\n                if (stat.startsWith('') && statsObj[stat] > 0) {\n                    statsObj[stat] *= my[stat];\n                } else {\n                    statsObj[stat] += my[stat];\n                }\n            } else {\n                statsObj[stat] = my[stat];\n            }\n            console.debug('', stat, my[stat]);\n        });\n\n        if (statsObj['']) {\n            my = statsObj[''];\n        }\n\n        switch (detailObj.) {\n            case 'HP':\n                myArr.push('');\n                myArr.push('');\n                isCalc = false;\n                isCalc = false;\n                isCalc = false;\n                my = null;\n                break;\n            case '':\n                myArr.push('');\n                isCalc = false;\n                isCalc = false;\n                isCalc = false;\n                break;\n            case 'HP':    // for  \n                isCalc = false;\n                isCalc = false;\n                isCalc = false;\n                my = null;\n                break;\n            case '':\n                isCalc = false;\n                isCalc = false;\n                break;\n            case 'HP':\n                isCalc = false;\n                isCalc = false;\n                isCalc = false;\n                my = null;\n                break;\n            case '':    // for \n                if (!['', '', '', ''].includes(my)) {\n                    my = '';\n                }\n                break;\n            case 'HP':  // for  \n                isCalc = false;\n                isCalc = false;\n                isCalc = false;\n                my = null;\n                break;\n            default:\n                if (detailObj..startsWith('') || detailObj..startsWith('')) {\n                    isCalc = false;\n                    isCalc = false;\n                    isCalc = false;\n                    my = null;\n                } else {\n                    myArr.push('');\n                    if (detailObj. != 'NONE') {  // for \n                        if (detailObj.) {\n                            myArr.push(detailObj.);\n                        } else if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\n                            myArr.push(detailObj. + '');\n                        }\n                    }\n                    if (my) {\n                        myArr.push(my == '' ? '' : my + '');\n                    }\n                }\n                break;\n        }\n        const myResult = calculateDamageFromDetailSub(statsObj, damageResult, detailObj., myArr, isCalc, isCalc, isCalc, my, my, my, detailObj., detailObj.);\n\n        myTalentChangeDetailObjArr.forEach(valueObj => {\n            const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, valueObj., myArr, isCalc, isCalc, isCalc, my, my, null, valueObj., valueObj.);\n            if (valueObj..endsWith('')) {  // \n                if (detailObj. == '') return;  // for \n                if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\n                    // HITHIT\n                    if (myHIT > 1) {\n                        myResultWork[2] *= myHIT;\n                        if (myResultWork[3] != null) {\n                            myResultWork[3] *= myHIT;\n                        }\n                        myResultWork[4] *= myHIT;\n                    }\n                }\n            }\n            myResult[2] += myResultWork[2];\n            if (myResult[3] != null && myResultWork[3]) {\n                myResult[3] += myResultWork[3];\n            }\n            myResult[4] += myResultWork[4];\n        });\n\n        // \n        if ([...DAMAGE_CATEGORY_ARRAY, ''].includes(detailObj.)) {\n            let my = detailObj.;\n            if (detailObj.) {    // for \n                const temp = detailObj..replace(/$/, '');\n                if (DAMAGE_CATEGORY_ARRAY.includes(temp)) {\n                    my = temp;\n                }\n            }\n\n            const dmgUpStatArr = [];\n            dmgUpStatArr.push(my + '');\n            if (my) {\n                dmgUpStatArr.push(my == '' ? '' : my + '');\n            }\n            dmgUpStatArr.forEach(dmgUpStat => {\n                if (!statsObj[dmgUpStat]) return;\n                if (!isCalc || !isCalc) return;\n\n                if (detailObj..startsWith('_')) return;    // for \n\n                const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, statsObj[dmgUpStat], myArr, isCalc, isCalc, isCalc, my, my, null);\n                // HITHIT\n                if (myHIT > 1) {\n                    myResultWork[2] *= myHIT;\n                    if (myResultWork[3] != null) {\n                        myResultWork[3] *= myHIT;\n                    }\n                    myResultWork[4] *= myHIT;\n                }\n                myResult[2] += myResultWork[2];\n                if (myResult[3] != null && myResultWork[3]) {\n                    myResult[3] += myResultWork[3];\n                }\n                myResult[4] += myResultWork[4];\n            });\n        }\n\n        // \n        Object.keys(my).forEach(statName => {\n            statsObj[statName] -= my[statName];\n        });\n\n        if (detailObj. == '') {\n            if (myResult[1] == '') {  //  for  \n                myResult[2] = myResult[2] * 1.5;\n                myResult[4] = myResult[4] * 1.5;\n            }\n        }\n\n        const resultArr = [detailObj., myResult[1], myResult[2], myResult[3], myResult[4], detailObj., detailObj.HIT, myResult[7], myResult[8]] as TDamageResultEntry;\n        console.debug('calculateDamageFromDetail', detailObj, characterInput, conditionInput, statsObj, opt_element, resultArr);\n        return resultArr;\n    } catch (error) {\n        console.error(error);\n        console.error(detailObj, characterInput, conditionInput, statsObj, opt_element);\n        throw error;\n    }\n}\n\nfunction calculateDamageFromDetailSub(\n    statsObj: TStats,\n    damageResult: TDamageResult,\n    formula: number | string | (number | string)[],\n    buffArr: Array<string> | null,\n    isCalc: boolean,\n    isCalc: boolean,\n    isCalc: boolean,\n    : string,\n    : number,\n    : number | null,\n    opt_max: number | string | Array<number | string> | null = null,\n    opt_min: number | string | Array<number | string> | null = null\n): TDamageResultEntry {\n    const my = calculateFormulaArray(formula, statsObj, damageResult, opt_max, opt_min);\n    let my = my;\n\n    if () { //  for \n        my *=  / 100;\n    } else {\n         = 1;\n    }\n\n    // \n    if (isUseReference(formula)) {\n        buffArr = null;\n        isCalc = false;\n        isCalc = false;\n    }\n\n    let my = 1;\n    if (buffArr) {\n        my = 100;   // percent\n        buffArr.forEach(buff => {\n            if (statsObj[buff]) {\n                my += statsObj[buff];\n            }\n        });\n        my = my / 100;\n        my *= my;\n    }\n\n    let my = 1;\n    if (isCalc) {\n        my = calculateEnemyDef(statsObj, );\n        my *= my;\n    }\n\n    let my = 1;\n    if (isCalc && ) {\n        my = calculateEnemyRes(, statsObj);\n        my *= my;\n    }\n\n    let my = statsObj[''];\n    if ( == '') {\n        if ('' in statsObj) {\n            my += statsObj[''];\n        }\n    } else if (( + '') in statsObj) {\n        my += statsObj[ + ''];\n    }\n    my = Math.min(100, Math.max(0, my)) / 100;    // 01\n\n    let my = statsObj[''];\n    if ( == '') {\n        if ('' in statsObj) {\n            my += statsObj[''];\n        }\n    } else if (( + '') in statsObj) {\n        my += statsObj[ + ''];\n    }\n    my = (100 + my) / 100;\n\n    let myResult = null;\n    let myResult = my;\n    if (isCalc && my > 0) {\n        myResult = my * my;\n        myResult = (myResult * my) + (my * (1 - my));\n    }\n\n    console.debug('%f * %f * [%o]=%f * [%f,%f] * %f * %f => %f,%f,%f', my, , buffArr, my, my, my, my, my, myResult, myResult, my);\n    return ['', , myResult, myResult, my, null, null, my, my];\n}\n\nfunction getChangeDetailObjArr(characterInput: TCharacterInput, changeKind: string) {\n    let result = [] as any[];\n    if (!characterInput) return result;\n\n    if (characterInput.damageDetailMyCharacter && changeKind in characterInput.damageDetailMyCharacter) {\n        result = result.concat((characterInput.damageDetailMyCharacter as any)[changeKind]);\n    }\n    if (characterInput.damageDetailMyWeapon && changeKind in characterInput.damageDetailMyWeapon) {\n        result = result.concat((characterInput.damageDetailMyWeapon as any)[changeKind]);\n    }\n    if (characterInput.damageDetailMyArtifactSets && changeKind in characterInput.damageDetailMyArtifactSets) {\n        result = result.concat((characterInput.damageDetailMyArtifactSets as any)[changeKind]);\n    }\n    return result;\n}\n\n/**\n * \n */\nexport function isUseReference(formulaArr: number | string | Array<number | string>): boolean {\n    if (!Array.isArray(formulaArr)) {\n        if (isNumber(formulaArr)) {\n            return false;\n        }\n        return String(formulaArr).indexOf('#') != -1;\n    }\n    let result = false;\n    formulaArr.forEach(entry => {\n        if (['+', '-', '*', '/'].includes(String(entry))) {\n            return;\n        } else if (isNumber(entry)) {\n            return;\n        } else if (Array.isArray(entry)) {\n            if (isUseReference(entry)) {\n                result = true;\n            }\n        } else {\n            if (String(entry).indexOf('#') != -1) {\n                result = true;\n            }\n        }\n    });\n    return result;\n}\n\nexport const ALL_ELEMENTS = ['', '', '', '', '', '', ''];\n\n/**\n * \n */\nfunction updateStats(\n    statsObj: TStats,\n    statName: string,\n    formulaArr: number | string | Array<number | string>,\n    opt_max: number | string | Array<number | string> | null = null,\n    opt_min: number | string | Array<number | string> | null = null,\n) {\n    const value = calculateFormulaArray(formulaArr, statsObj, DAMAGE_RESULT_TEMPLATE, opt_max, opt_min);    // DAMAGE_RESULT_TEMPLATE\n    if (!isNumber(value)) {\n        console.error(statsObj, statName, formulaArr, value);\n    }\n    const nameArr = [];\n    if (statName == 'HP') {\n        nameArr.push('HP');\n    } else if (statName.startsWith('')) {\n        nameArr.push(statName.replace(/^/, String(statsObj[''])));\n    } else if (statName.startsWith('')) {\n        ALL_ELEMENTS.forEach(entry => {\n            nameArr.push(statName.replace(/^/, entry));\n        });\n    } else if (statName.startsWith('')) {\n        nameArr.push(statName.replace(/^/, '' + String(statsObj[''])));\n    } else if (statName.startsWith('')) {\n        ALL_ELEMENTS.forEach(entry => {\n            nameArr.push(statName.replace(/^/, '' + entry));\n        });\n    } else {\n        nameArr.push(statName);\n    }\n    const diffStats = {} as { [key: string]: number };\n    nameArr.forEach(name => {\n        diffStats[name] = value;\n    });\n    for (const name of Object.keys(diffStats)) {\n        if (name in statsObj) {\n            if (name.startsWith('') && diffStats[name] > 0) {\n                statsObj[name] *= diffStats[name] / 100;    // for \n            } else {\n                statsObj[name] += diffStats[name];\n            }\n        } else {\n            statsObj[name] = diffStats[name];\n        }\n    }\n    console.debug(updateStats.name, null, statName, formulaArr, '=>', diffStats);\n    return diffStats;\n}\n\n/**  */\nfunction calculateDamageTaken(statsObj: TStats, damage: number, element: string) {\n    const def = statsObj[''];\n    const enemyLevel = statsObj[''];\n    const dmgReduction = statsObj[''];\n    const res = calculateRes(statsObj[element == '' ? '' : element + '']);\n    let result = damage * (1 - def / (def + 5 * enemyLevel + 501)) * (100 - dmgReduction) / 100 * res;\n    result = Math.max(0, result);\n    return result;\n}\n\n// function flattenArray(value: any) {\n//     const result: any[] = [];\n//     if (Array.isArray(value)) {\n//         value.forEach(e => {\n//             if (Array.isArray(e)) {\n//                 result.push(...flattenArray(e));\n//             } else {\n//                 result.push(e);\n//             }\n//         });\n//     }\n//     return result;\n// }\n\nexport type TArtifactScoreFormulaElement = [string, number];\nexport type TArtifactScoreFormula = TArtifactScoreFormulaElement[];\n\nexport const ARTIFACT_SCORE_FACTORS = [\n    'HP%', '%', '%', '', '', '', '',\n];\n\nexport const ARTIFACT_SCORE_FORMULA_TEMPLATE: TArtifactScoreFormula[] = [\n    [['', 2], ['', 1]],\n    [['%', 1], ['', 2], ['', 1]],\n    [['HP%', 1], ['', 2], ['', 1]],\n    [['%', 1], ['', 2], ['', 1]],\n    [['HP%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\n    [['%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\n    [['%', 0.5], ['', 0.125], ['', 2], ['', 1]],\n];\n\nexport function calculateArtifactScore(\n    characterInput: TCharacterInput,\n    artifactDetailInput: TArtifactDetailInput,\n    scoringStats: [string, number][]\n) {\n    let result = 0;\n    for (const scoringStat of scoringStats) {\n        const stat = scoringStat[0];\n        const magnification = scoringStat[1];\n        const statValue = (artifactDetailInput. as any)[stat];\n        if (statValue) {\n            result += statValue * magnification;\n        }\n    }\n    return result;\n}\n\nexport function calculateStatsTop(\n    statsObj: TStats,\n    optionInput: TOptionInput,\n) {\n    ARRAY.forEach(stat => {\n        const srcStat = stat.replace(/TOP$/, 'X7');\n        let srcStatValue = getStatValue(srcStat, statsObj);\n        if (srcStatValue) {\n            statsObj[stat] = srcStatValue;\n        }\n        for (const member of optionInput.teamMembers) {\n            const calculatedSupporter = optionInput.supporters[member];\n            if (!calculatedSupporter?.statsInput?.statsObj) continue;\n            srcStatValue = getStatValue(srcStat, calculatedSupporter.statsInput.statsObj);\n            if (srcStatValue !== undefined) {\n                if (statsObj[stat] < srcStatValue) {\n                    statsObj[stat] = srcStatValue;\n                }\n            }\n        }\n    });\n}\n\nexport async function calculateSupporter(\n    optionInput: TOptionInput,\n    supporter: TCharacterKey,\n    build: string,\n    character: TCharacterKey,\n): Promise<[TStats, TDamageResult]> {\n    const characterInput = _.cloneDeep(CHARACTER_INPUT_TEMPLATE) as TCharacterInput;\n    const artifactDetailInput = _.cloneDeep(ARTIFACT_DETAIL_INPUT_TEMPLATE) as TArtifactDetailInput;\n    const conditionInput = _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput;\n    const statsInput = _.cloneDeep(STATS_INPUT_TEMPLATE) as TStatsInput;\n    const damageResult = _.cloneDeep(DAMAGE_RESULT_TEMPLATE) as TDamageResult;\n\n    characterInput.character = supporter;\n    characterInput.characterMaster = await getCharacterMasterDetail(characterInput.character);\n\n    const builddata = JSON.parse(build);\n\n    await loadRecommendation(characterInput, artifactDetailInput, conditionInput, optionInput, builddata);\n    makeDamageDetailObjArrObjCharacter(characterInput);\n    makeDamageDetailObjArrObjWeapon(characterInput);\n    makeDamageDetailObjArrObjArtifactSets(characterInput);\n    setupConditionValues(conditionInput, characterInput, optionInput);\n    calculateArtifactStatsMain(artifactDetailInput., artifactDetailInput.);\n    calculateArtifactStats(artifactDetailInput);\n    if (optionInput.elementalResonance) {\n        optionInput.elementalResonance.conditionAdjustments = calculateElementalResonance(optionInput.elementalResonance.conditionValues, conditionInput);\n    }\n    calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\n    updateNumberConditionValues(conditionInput, characterInput, statsInput.statsObj);\n    calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\n\n    if (characterInput.character == '') {\n        // for \n        const myCharacterMaster = await getCharacterMasterDetail(character);\n        if ('' in myCharacterMaster['']) {\n            statsInput.statsObj[''] = myCharacterMaster[''][''];\n        }\n    }\n\n    calculateDamageResult(damageResult, characterInput, conditionInput, statsInput);\n\n    optionInput.supporters[supporter] = {\n        characterInput: characterInput,\n        artifactDetailInput: artifactDetailInput,\n        conditionInput: conditionInput,\n        statsInput: statsInput,\n        damageResult: damageResult,\n    };\n\n    return [statsInput.statsObj, damageResult];\n}\n\nexport type TRotationDamageEntry = {\n    name: string;\n    category: string;\n    reactions: object[];\n    counts: number[];\n};\n\nexport type TRotationDamageInfo = {\n    totalDamage: number,\n    rotationDamages: TRotationDamageEntry[],\n};\n\nexport function getCritFromResultEntry(entry: TDamageResultEntry) {\n    let critRate = 0;\n    let critDmg = 0;\n    if (entry[2] && entry[3] && entry[4]) {\n        critRate = entry[2] - entry[4]; //  - \n        critRate /= entry[3] - entry[4]; //  - \n        critRate = Math.round(critRate * 1000) / 10;\n        critDmg = Math.round((entry[3] / entry[4] - 1) * 1000) / 10;\n    }\n    return [critRate, critDmg];\n}\n\nexport const REACTION_DMG_ARR = [\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n];\n\nexport const REACTION_DMG_ELEMENT_MAP = new Map<string, string>();\nfunction setupReactionDmgElementMap() {\n    REACTION_DMG_ARR.forEach((reactionDmg) => {\n        const reaction = reactionDmg.replace(/$/, '');\n        Object.keys(ELEMENTAL_REACTION_MASTER).forEach((element) => {\n            const reactionMaster = (ELEMENTAL_REACTION_MASTER as any)[element];\n            const workArr = Object.keys(reactionMaster);\n            if (workArr.includes(reaction)) {\n                if ('' in reactionMaster[reaction]) {\n                    REACTION_DMG_ELEMENT_MAP.set(reactionDmg, reactionMaster[reaction].);\n                }\n            }\n        });\n    });\n}\nsetupReactionDmgElementMap();\n\nexport function getDamageResultArr(\n    rotationDamageEntry: TRotationDamageEntry,\n    damageResult: TDamageResult,\n): TDamageResultEntry[] {\n    const result = [] as TDamageResultEntry[];\n    const category = rotationDamageEntry.category;\n    if (REACTION_DMG_ARR.includes(category)) {\n        result.push([\n            category,\n            REACTION_DMG_ELEMENT_MAP?.get(category) ?? null,\n            (damageResult. as any)[category],\n            null,\n            (damageResult. as any)[category],\n            null,\n            1,\n            null,\n            null,\n        ]);\n    } else {\n        for (let entry of damageResult[category] as TDamageResultEntry[]) {\n            if (entry[0].startsWith('')) continue;\n            if (entry[0].endsWith('')) continue;\n            if (entry[5]?.endsWith('')) {\n                if (entry[0].startsWith('')) {  // \n                    entry = _.cloneDeep(entry);\n                    const [critRate] = getCritFromResultEntry(entry);\n                    entry[2] = entry[2] * critRate / 100;\n                }\n                result.push(entry);\n            }\n        }\n    }\n    return result;\n}\n\nexport function calculateRotationDamageEntry(\n    rotationDamageEntry: TRotationDamageEntry,\n    index: number,\n    damageResult: TDamageResult,\n) {\n    let result = 0;\n    const list = getDamageResultArr(rotationDamageEntry, damageResult);\n    if (list && list.length > index && rotationDamageEntry.reactions.length > index) {\n        const dmgResultEntry = list[index];\n        const reactionObj: any = rotationDamageEntry.reactions[index];\n        const count = rotationDamageEntry.counts[index];\n        const plainDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., ''); // \n        for (let n = 0; n < count; n++) {\n            let workDmg = plainDmg;\n            ['', ''].forEach((reaction) => {\n                if (reaction in reactionObj && n < reactionObj[reaction]) {\n                    workDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction);\n                }\n            });\n            result += workDmg;\n        }\n        ['', ''].forEach((reaction) => {\n            if (reaction in reactionObj) {\n                result += calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction, reactionObj[reaction]) - plainDmg;\n            }\n        });\n    }\n    return result;\n}\n\nexport function calculateRotationTotalDamage(\n    rotationDamageArr: TRotationDamageEntry[],\n    damageResult: TDamageResult,\n) {\n    let result = 0;\n    rotationDamageArr.forEach((rotationDamageEntry) => {\n        const list = getDamageResultArr(rotationDamageEntry, damageResult);\n        for (let i = 0; i < list.length; i++) {\n            result += calculateRotationDamageEntry(rotationDamageEntry, i, damageResult);\n        }\n    });\n    return result;\n}\n\n/**  */\nexport function calculateReactedDamage(\n    dmgResultEntry: TDamageResultEntry,\n    dmgIndex: number,\n    elementalReaction: TDamageResultElementalReaction,\n    reaction: string,\n    reactionTimes = 1\n) {\n    let result = Number(dmgResultEntry[dmgIndex]); // 2:/3:/4:\n    const dmgElement = dmgResultEntry[1];\n    if (reaction && dmgElement) {\n        if (['', ''].includes(reaction)) {\n            const reactionKey = reaction + '_' + dmgElement;\n            if (reactionKey in elementalReaction) {\n                result *= (elementalReaction as any)[reactionKey];\n            }\n        } else if (['', ''].includes(reaction)) {\n            const reactionKey = reaction + '';\n            if (reactionKey in elementalReaction) {\n                let reactionDmg = (elementalReaction as any)[reactionKey];\n                if (dmgResultEntry[2]) {\n                    reactionDmg *= result / dmgResultEntry[4]; //  \n                }\n                if (dmgResultEntry[7]) {\n                    reactionDmg *= dmgResultEntry[7]; // \n                }\n                if (dmgResultEntry[8]) {\n                    reactionDmg *= dmgResultEntry[8]; // \n                }\n                reactionDmg *= reactionTimes; // \n                result += reactionDmg;\n            }\n        }\n    }\n    return result;\n}\n\nexport function getAmplifyingReactionElement(reaction: string, dmgElement: string) {\n    let reactionElement;\n    if (reaction === '' && dmgElement === '') {\n        reactionElement = '';\n    } else if (reaction === '' && dmgElement === '') {\n        reactionElement = '';\n    } else if (reaction === '' && dmgElement === '') {\n        reactionElement = '';\n    } else if (reaction === '' && dmgElement === '') {\n        reactionElement = '';\n    } else if (reaction === '' && dmgElement === '') {\n        reactionElement = '';\n    } else if (reaction === '' && dmgElement === '') {\n        reactionElement = '';\n    }\n    return reactionElement;\n}\n","import _ from 'lodash';\r\n\r\nexport type TKeyValue = {\r\n    key: string, value: any,\r\n};\r\n\r\nexport function isString(value: any): boolean {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\n\r\nexport function isNumber(value: any): boolean {\r\n    return isFinite(value) && value != null;\r\n}\r\n\r\nexport function isBoolean(value: any): boolean {\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isPlainObject(value: any): boolean {\r\n    const myType = Object.prototype.toString.call(value);\r\n    return myType === '[object Object]';\r\n}\r\n\r\n// /** deep copyundefined */\r\n// export function deepcopy(value: any): any {\r\n//     const result = JSON.parse(JSON.stringify(value));\r\n//     return result;\r\n// }\r\n\r\nexport function overwriteObject(dst: any, src: any) {\r\n    if (_.isPlainObject(src) && _.isPlainObject(dst)) {\r\n        const srcKeys = Object.keys(src);\r\n        for (const key of srcKeys) {\r\n            dst[key] = src[key];\r\n        }\r\n        for (const key of Object.keys(dst)) {\r\n            if (!srcKeys.includes(key)) delete dst[key];\r\n        }\r\n    }\r\n    return dst;\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport const basename = (path: string) => path!.split('/')!.pop()!.split('.')!.shift()!;\r\n","import { createI18n } from 'vue-i18n'\r\n\r\nconst i18n = createI18n({\r\n  legacy: false,\r\n  locale: 'ja-jp',\r\n  fallbackLocale: 'en-us',\r\n  isGlobal: true,\r\n})\r\nexport default i18n;\r\n","import { ARTIFACT_SET_MASTER, ARTIFACT_STAT_JA_EN_ABBREV_MAP, ARTIFACT_SUB_MASTER, CHARACTER_MASTER, DAMAGE_CATEGORY_ARRAY, ELEMENTAL_RESONANCE_MASTER, ELEMENTAL_RESONANCE_MASTER_LIST, ENEMY_MASTER_LIST, GENSEN_MASTER_LIST, getCharacterMasterDetail, getWeaponMasterDetail, IMG_SRC_DUMMY, RECOMMEND_ABBREV_MAP, TAnyObject, TArtifactSet, TArtifactSetEntry, TArtifactSetKey, TArtifactSubKey, TCharacterDetail, TCharacterKey, TEnemyEntry, TWeaponDetail, TWeaponKey, TWeaponTypeKey, WEAPON_MASTER, PROPERTY_MAP } from '@/master';\nimport _ from 'lodash';\nimport { basename, isNumber, overwriteObject } from './common';\n\nexport const ARRAY = [\n    'HP',\n    '',\n    ''\n];\nexport const ARRAY = [\n    'HP',\n    '',\n    '',\n    ''\n];\nexport const ARRAY = [\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    ''\n];\nexport const _ARRAY = [\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    ''\n];\nexport const _ARRAY = [\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    ''\n];\nexport const ARRAY = [\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n];\nexport const ARRAY = [\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    ''\n];\nexport const ARRAY = [\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n];\nexport const ARRAY = [\n    '',\n    'HP%',\n    '%',\n    '%',\n    'HP+',\n    '+',\n    '+',\n];\nexport const ARRAY = [\n    'HPV1',\n    'V1',\n    'V1',\n    'V1',\n    'V1',\n    'V1',\n    'V1',\n    'V1',\n    'V1',\n];\nexport const ARRAY = [\n    'TOP',\n];\nexport const _ARRAY = [\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    '',\n    ''\n];\nexport const _ARRAY = [\n    ''\n];\n\nexport const ARRAY_MAP = new Map([\n    ['', ARRAY],\n    ['', ARRAY],\n    ['', ARRAY],\n    ['', _ARRAY],\n    ['', _ARRAY],\n    ['', ARRAY],\n    ['', ARRAY],\n    ['', ARRAY],\n    ['', ARRAY],\n    ['', ARRAY],\n    ['', ARRAY],\n    ['', _ARRAY],\n    ['', _ARRAY],\n]);\n\nexport const STAT_PERCENT_LIST = [\n    ...ARRAY, ..._ARRAY, ..._ARRAY, ...ARRAY, ...ARRAY, ..._ARRAY,\n    '', '',\n];\n\nexport type TStats = {\n    [key: string]: number,\n};\n\nfunction makeStatusTenmplate() {\n    const statsObj: TStats = {};\n    ARRAY_MAP.forEach((value) => {\n        value.forEach(stat => {\n            statsObj[stat] = 0;\n        });\n    });\n    statsObj[''] = 5;\n    statsObj[''] = 50;\n    statsObj[''] = 100;\n    statsObj[''] = 0;\n    statsObj[''] = 0;\n    return statsObj;\n}\nexport const TEMPLATE = makeStatusTenmplate();\n\nfunction makeEnemyStatusTemplate() {\n    const statsObj: TStats = {};\n    [_ARRAY].forEach((value) => {\n        value.forEach(stat => {\n            statsObj[stat] = 0;\n        });\n    });\n    statsObj[''] = 0;\n    return statsObj;\n}\nexport const TEMPLATE = makeEnemyStatusTemplate();\n\nexport const _ARRAY = [\n    '5_HP', '4_HP'\n];\nexport const _ARRAY = [\n    '5_', '4_'\n];\nexport const _ARRAY = [\n    '5_',\n    '5_HP%',\n    '5_%',\n    '5_%',\n    '5_',\n    '4_',\n    '4_HP%',\n    '4_%',\n    '4_%',\n    '4_'\n];\nexport const _ARRAY = [\n    '5_',\n    '5_',\n    '5_',\n    '5_',\n    '5_',\n    '5_',\n    '5_',\n    '5_',\n    '5_HP%',\n    '5_%',\n    '5_%',\n    '5_',\n    '4_',\n    '4_',\n    '4_',\n    '4_',\n    '4_',\n    '4_',\n    '4_',\n    '4_',\n    '4_HP%',\n    '4_%',\n    '4_%',\n    '4_'\n];\nexport const _ARRAY = [\n    '5_',\n    '5_',\n    '5_HP%',\n    '5_%',\n    '5_%',\n    '5_',\n    '5_',\n    '4_',\n    '4_',\n    '4_HP%',\n    '4_%',\n    '4_%',\n    '4_',\n    '4_'\n];\n\nexport const ARRAY = [\n    'HP%',\n    'HP',\n    '%',\n    '',\n    '%',\n    '',\n    '',\n    '',\n    '',\n    '',\n];\nexport const ARRAY = [\n    '%',\n    'HP%',\n    '%',\n    '',\n    '',\n    '',\n    '',\n];\n\nexport const TEMPLATE = {\n    'HP': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    'HP%': 0,\n    '%': 0,\n    '%': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n    '': 0,\n};\n\nexport const TEMPLATE = {\n    : '',\n    _: 0,                 // 1.5\n    _: 0,                 // 2\n    _: 0,                 // 1.5\n    _: 0,                 // 2\n    : 0,\n    : 0,\n    : 0,\n    : 0,\n    : '',\n    : 0,\n    : 0,\n    : 0,\n    : 0,\n    : 0,\n    : 0,\n    : 0,\n    : 0,\n    : 0,          // for \n    : 0,    // for \n    : 0,          // for \n    : 0,    // for \n    : 0,        // for \n    : 0,  // for \n    : 0,        // for \n    : 0,  // for \n};\nexport type TDamageResultElementalReaction = typeof TEMPLATE;\nexport type TDamageResultElementalReactionKey = keyof typeof TEMPLATE;\n\nexport type TDamageResultEntry = [string, string | null, number, number | null, number, string | null, number | null, number | null, number | null];    // 0:, 1:, 2:, 3:, 4:, 5:, 6:HIT, 7:, 8:\nexport type TDamageResult = {\n    : TDamageResultElementalReaction,\n    : TDamageResultEntry[],\n    : TDamageResultEntry[],\n    : TDamageResultEntry[],\n    : TDamageResultEntry[],\n    : TDamageResultEntry[],\n    : TDamageResultEntry[],\n    : string[],\n    [key: string]: TDamageResultElementalReaction | TDamageResultEntry[] | string[],\n};\n\nexport const DAMAGE_RESULT_TEMPLATE = {\n    : _.cloneDeep(TEMPLATE) as TDamageResultElementalReaction,\n    : [] as TDamageResultEntry[],\n    : [] as TDamageResultEntry[],\n    : [] as TDamageResultEntry[],\n    : [] as TDamageResultEntry[],\n    : [] as TDamageResultEntry[],\n    : [] as TDamageResultEntry[],\n    : [] as string[],\n};\n\nexport const ARRAY = [\n    Array.from({ length: 20 }, (_, i) => i + 1),\n    Array.from({ length: 21 }, (_, i) => i + 20),\n    Array.from({ length: 11 }, (_, i) => i + 40),\n    Array.from({ length: 11 }, (_, i) => i + 50),\n    Array.from({ length: 11 }, (_, i) => i + 60),\n    Array.from({ length: 11 }, (_, i) => i + 70),\n    Array.from({ length: 11 }, (_, i) => i + 80),\n];\n\n\nexport type TDamageDetailObj = {\n    : string | null,\n    : string | null,\n    : string | null,\n    : number | string | Array<any> | null,\n    : string | null,\n    : string | null,\n    : number | string | Array<any> | null,\n    : number | string | Array<any> | null,\n    HIT: number | null,\n    : string | null,\n    : boolean | null,\n    : (string | object)[] | null,\n    : (string | object)[] | null,\n};\n\nexport type TDamageDetail = {\n    ?: TDamageDetailObj[],\n    ?: TDamageDetailObj[],\n    ?: TDamageDetailObj[],\n    ?: TDamageDetailObj[],\n    ?: TDamageDetailObj[],\n    ?: TDamageDetailObj[],\n    : TDamageDetailObj[],\n    : TDamageDetailObj[],\n    : Map<string, string[]>,\n    : Map<string, string[]>,\n};\n\nexport const ARTIFACT_SET_MASTER_DUMMY = {\n    key: 'NONE' as TArtifactSetKey,\n    : 5,\n    image: IMG_SRC_DUMMY,\n} as TArtifactSet;\n\nexport const CHARACTER_INPUT_TEMPLATE = {\n    character: '' as TCharacterKey,\n    characterMaster: {} as TCharacterDetail,\n    : 6,\n    : 90,\n    : 0,\n    : 8,\n    : 8,\n    : 8,\n    weapon: '' as TWeaponKey,\n    weaponMaster: {} as TWeaponDetail,\n    : 6,\n    : 90,\n    : 1,\n    artifactSets: ['NONE' as TArtifactSetKey, 'NONE' as TArtifactSetKey],\n    artifactSetMasters: [ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[],\n    damageDetailMyCharacter: null as TDamageDetail | null,\n    damageDetailMyWeapon: null as TDamageDetail | null,\n    damageDetailMyArtifactSets: null as TDamageDetail | null,\n    damageDetailElementalResonance: null as TDamageDetail | null,\n    buildname: '',\n    recommendationSelectedIndex: 0,\n    saveDisabled: true,     // \n    removeDisabled: true,   // \n};\nexport type TCharacterInput = typeof CHARACTER_INPUT_TEMPLATE;\n\nexport const ARTIFACT_TEMPLATE = {\n    name: '',\n    rarity: 1,\n    setname: 'NONE',\n    cat_id: 1,\n    mainStat: '',\n    mainStatValue: 0,\n    subStats: [\n        { name: 'HP', value: 0 },\n        { name: '', value: 0 },\n        { name: '', value: 0 },\n        { name: '', value: 0 },\n    ]\n};\nexport type TArtifact = typeof ARTIFACT_TEMPLATE;\n\nexport const ARTIFACT_DETAIL_INPUT_TEMPLATE = {\n    : ['', '', '', '', ''],\n    : ['', '', ''],\n    : Array.from(GENSEN_MASTER_LIST[2].values),     // 1\n    : Array.from(GENSEN_MASTER_LIST[2].counts),   // 1\n    : _.cloneDeep(TEMPLATE),\n    : _.cloneDeep(TEMPLATE),\n    : _.cloneDeep(TEMPLATE),\n    Disabled: false,\n    artifact_list: [] as TArtifact[],\n};\nexport type TArtifactDetailInput = typeof ARTIFACT_DETAIL_INPUT_TEMPLATE;\n\nexport type TCheckboxEntry = {\n    name: string;\n    displayName?: string;\n};\nexport type TSelectEntry = {\n    name: string;\n    displayName?: string;\n    options: string[];\n    required: boolean;\n};\nexport type TNumberEntry = {\n    name: string;\n    displayName?: string;\n    min: number | string;\n    max?: number | string;\n    step?: number;\n};\nexport type TConditionValues = {\n    [key: string]: boolean | number | null,\n};\nexport type TConditionAdjustments = {\n    [key: string]: number | null,\n};\nexport const CONDITION_INPUT_TEMPLATE = {\n    checkboxList: [] as TCheckboxEntry[],\n    selectList: [] as TSelectEntry[],\n    numberList: [] as TNumberEntry[],\n    conditionValues: {} as TConditionValues,\n    conditionAdjustments: {} as TConditionAdjustments,\n    : [null, null, null] as (string | null)[],\n};\nexport type TConditionInput = typeof CONDITION_INPUT_TEMPLATE;\n\nexport const STATS_INPUT_TEMPLATE = {\n    statsObj: _.cloneDeep(TEMPLATE) as TStats,\n    statAdjustments: _.cloneDeep(TEMPLATE) as TStats,\n    statAdjustmentsEx: {} as TStats,\n    enemyMaster: ENEMY_MASTER_LIST[0] as TEnemyEntry,\n};\nfor (const stat of Object.keys(STATS_INPUT_TEMPLATE.statAdjustments)) {\n    STATS_INPUT_TEMPLATE.statAdjustments[stat] = 0;\n}\nexport type TStatsInput = typeof STATS_INPUT_TEMPLATE;\n\nexport type TElementalResonance = {\n    conditionValues: TConditionValues,\n    conditionAdjustments: TConditionAdjustments,\n};\n\nexport const SUPPORTER_INPUT_TEMPLATE = {\n    characterInput: _.cloneDeep(CHARACTER_INPUT_TEMPLATE) as TCharacterInput,\n    artifactDetailInput: _.cloneDeep(ARTIFACT_DETAIL_INPUT_TEMPLATE) as TArtifactDetailInput,\n    conditionInput: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\n    statsInput: _.cloneDeep(STATS_INPUT_TEMPLATE) as TStatsInput,\n    damageResult: _.cloneDeep(DAMAGE_RESULT_TEMPLATE) as TDamageResult,\n};\nexport type TSupporterInput = typeof SUPPORTER_INPUT_TEMPLATE;\n\nexport const OPTION_INPUT_TEMPLATE = {\n    elementalResonance: {\n        conditionValues: {},\n        conditionAdjustments: {},\n    } as TElementalResonance,\n    supporterBuildname: {} as { [key: string]: string | undefined },\n    supporters: {} as { [key: string]: TSupporterInput | undefined },\n    teamMembers: [] as string[],\n    teamOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\n    miscOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\n};\nexport type TOptionInput = typeof OPTION_INPUT_TEMPLATE;\n\n/** 1+,20,20+,...,90 */\nfunction parseLevelStr(levelStr: number | string): [number, number] {\n    let result: [number, number] = [0, 1];\n    try {\n        let level: number;\n        if (_.isString(levelStr)) {\n            level = Number(String(levelStr).replace('+', ''));\n        } else {\n            level = Number(levelStr);\n        }\n        let ascension = 0;\n        for (let i = (ARRAY.length - 1); i >= 0; i--) {\n            ascension = i;\n            if (ARRAY[i][0] > level) continue;\n            if (ARRAY[i][0] == level && !String(levelStr).endsWith('+')) {\n                ascension--;\n            }\n            break;\n        }\n        result = [Math.max(0, ascension), level];\n    } catch (error) {\n        console.error(levelStr);\n        // throw error;\n    }\n    return result;\n}\n\nexport type TRecommendation = {\n    name: string,\n    build: any,\n    overwrite: boolean\n}\n\nexport function makeDefaultBuildname(character: any) {\n    return '' + character;\n}\n\nexport function makeBuildStorageKey(character: TCharacterKey | string, buildname?: string) {\n    let result = '_' + character;\n    if (buildname && buildname != makeDefaultBuildname(character)) {\n        result += '_' + buildname;\n    }\n    return result;\n}\n\nexport function makeOptionStorageKey(character: TCharacterKey | string, buildname?: string) {\n    return '' + makeBuildStorageKey(character, buildname);\n}\n\nexport function makeArtifactScoringStorageKey(character: TCharacterKey | string, buildname?: string) {\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'ArtifactScoring');\n}\n\nexport function makeSupporterBuildnameStorageKey(character: TCharacterKey | string, buildname?: string) {\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'SupporterBuildname');\n}\n\n/** . [, , ][] */\nexport function makeRecommendationList(\n    characterMaster: TAnyObject,\n    opt_buildData?: TAnyObject,\n): TRecommendation[] {\n    const result: TRecommendation[] = [];\n\n    const character = characterMaster[''];\n    let isSavable: boolean | null = null;\n\n    if (opt_buildData) {\n        result.push({ name: 'IMPORTED DATA', build: opt_buildData, overwrite: false });\n        isSavable = true;\n        console.log(opt_buildData);\n    }\n\n    const storageKeyArr: string[] = [];\n    Object.keys(localStorage).forEach(key => {\n        if (key.startsWith(makeBuildStorageKey(character))) {\n            storageKeyArr.push(key);\n            if (isSavable == null) {\n                isSavable = false;\n            }\n        }\n    });\n    storageKeyArr.sort();\n    const re = new RegExp('^_' + character + '_');\n    storageKeyArr.forEach(key => {\n        let buildname;\n        if (key == makeBuildStorageKey(character)) {\n            buildname = makeDefaultBuildname(character);\n        } else {\n            buildname = key.replace(re, '');\n        }\n        const buildObj = JSON.parse(localStorage[key]);\n        const key2 = '' + key;\n        if (key2 in localStorage) {\n            const optionsObj = JSON.parse(localStorage[key2]);\n            buildObj.options = optionsObj;\n        }\n        const key3 = key.replace(/^/, 'ArtifactScoring');\n        if (key3 in localStorage) {\n            const artifactScoringObj = JSON.parse(localStorage[key3]);\n            buildObj.artifactScoring = artifactScoringObj;\n        }\n        const key4 = key.replace(/^/, 'SupporterBuildname');\n        if (key4 in localStorage) {\n            const supporterBuildnameObj = JSON.parse(localStorage[key4]);\n            buildObj.supporterBuildname = supporterBuildnameObj;\n        }\n        result.push({ name: buildname, build: buildObj, overwrite: true });\n    });\n\n    characterMaster[''].forEach((obj: { [key: string]: any }) => {\n        const myRecommendation = obj;\n        ['1', '2', '3'].forEach(stat => {\n            if (!(stat in obj)) {\n                obj[stat] = null;\n            }\n        });\n        const artifactRarerityArrArr = [[5, 5, 5, 5, 5], [4, 4, 5, 5, 5], [4, 4, 4, 5, 4]];\n        let artifactRarerity4Num = 0;\n        const artifactSet1 = myRecommendation['1'] as TArtifactSetKey;\n        const artifactSet2 = myRecommendation['2'] as TArtifactSetKey;\n        if (ARTIFACT_SET_MASTER[artifactSet1][''] == 4) {\n            artifactRarerity4Num++;\n        }\n        if (ARTIFACT_SET_MASTER[artifactSet2][''] == 4) {\n            artifactRarerity4Num++;\n        }\n        for (let i = 0; i < 2; i++) {\n            const name = '' + (i + 1);\n            if (!(name in myRecommendation)) {\n                if (i == 0) {\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_HP';\n                } else if (i == 1) {\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_';\n                }\n            }\n        }\n\n        let buildname = myRecommendation[''];\n        buildname += ' ';\n        if (myRecommendation['1'] == myRecommendation['2']) {\n            buildname += myRecommendation['1'];\n        } else {\n            buildname += makeArtifactSetAbbrev(myRecommendation['1']);\n            buildname += '/';\n            buildname += makeArtifactSetAbbrev(myRecommendation['2']);\n        }\n        buildname += ' [';\n        for (let i = 3; i <= 5; i++) {\n            const statusName = myRecommendation['' + i].split('_')[1];\n            if (RECOMMEND_ABBREV_MAP.has(statusName)) {\n                buildname += RECOMMEND_ABBREV_MAP.get(statusName);\n            } else {\n                buildname += statusName.substring(0, 1);\n            }\n        }\n        buildname += ']';\n        result.push({ name: buildname, build: myRecommendation, overwrite: false });\n    });\n\n    return result;\n}\n\n/**  */\nfunction makeArtifactSetAbbrev(name: string): string {\n    const abbrRe = /[\\p{sc=Hiragana}\\p{sc=Katakana}]+/ug;\n    let abbr = name.replace(abbrRe, '');\n    if (abbr.length > 2) {\n        abbr = name.split(abbrRe).sort((a, b) => {\n            return b.length - a.length;\n        })[0];\n    }\n    if (abbr.length > 3) {\n        abbr = abbr.substring(0, 2);\n    }\n    return abbr;\n}\n\nexport function makePrioritySubstatValueList(\n    prioritySubstats: TArtifactSubKey[],\n    index: number,\n    opt_substat?: TArtifactSubKey\n) {\n    const result: number[] = [];\n    if (prioritySubstats[index]) {\n        if (!opt_substat) opt_substat = prioritySubstats[index];\n        if (opt_substat && opt_substat in ARTIFACT_SUB_MASTER) {\n            const valueArr = ARTIFACT_SUB_MASTER[opt_substat];\n            for (let i = 0; i < valueArr.length; i++) {\n                result.push(valueArr[i]);\n                if (i < valueArr.length - 1) {\n                    const diff = valueArr[i + 1] - valueArr[i];\n                    result.push(valueArr[i] + diff / 2);\n                }\n            }\n        }\n    }\n    return result;\n}\n\nexport function makeEasyInputSubstatValueList(\n    substat: TArtifactSubKey\n) {\n    const result: number[] = [];\n    if (substat && substat in ARTIFACT_SUB_MASTER) {\n        const valueArr = ARTIFACT_SUB_MASTER[substat];\n        for (let i = 0; i < valueArr.length; i++) {\n            result.push(valueArr[i]);\n            if (i < valueArr.length - 1) {\n                const diff = valueArr[i + 1] - valueArr[i];\n                result.push(valueArr[i] + diff / 2);\n            }\n        }\n    }\n    return result;\n}\n\n/**  */\nexport async function loadRecommendation(\n    characterInput: TCharacterInput,\n    artifactDetailInput: TArtifactDetailInput,\n    conditionInput: TConditionInput,\n    optionInput: TOptionInput,\n    build: { [key: string]: any }\n) {\n    try {\n        const character = characterInput.character;\n        const characterMaster = await getCharacterMasterDetail(character);\n        characterInput.characterMaster = characterMaster;\n        const artifactStatsSub = _.cloneDeep(TEMPLATE);\n\n        if ('' in build) {\n            [characterInput., characterInput.] = parseLevelStr(build['']);\n        }\n        ['', '', '', ''].forEach(key => {\n            if (key in build) {\n                (characterInput as any)[key] = Number(build[key]);\n            }\n        });\n\n        const weaponType = characterMaster[''];\n        if ('' in build) {\n            if (Object.keys(WEAPON_MASTER[weaponType]).includes(build[''])) {\n                characterInput.weapon = build[''] as TWeaponKey;\n            } else {\n                characterInput.weapon = Object.keys(WEAPON_MASTER[weaponType]).filter(s => s.startsWith(''))[0] as TWeaponKey;\n            }\n            characterInput.weaponMaster = await getWeaponMasterDetail(characterInput.weapon, weaponType);\n        }\n        if ('' in build) {\n            [characterInput., characterInput.] = parseLevelStr(build['']);\n        }\n        if ('' in build) {\n            characterInput. = Number(build['']);\n        }\n\n        let prioritySubstatsDisabled = false;\n        for (const key of Object.keys(build).filter((s: string) => s.startsWith(''))) {\n            let toKey = key.replace(/^/, '');\n            if (toKey != 'HP') toKey = toKey.replace(/P$/, '%');\n            if (build[key] || build[key] == 0) {\n                prioritySubstatsDisabled = true;\n                (artifactStatsSub as any)[toKey] = Number(build[key]);\n            }\n        }\n        artifactDetailInput.Disabled = prioritySubstatsDisabled;\n\n        ['1', '2'].forEach((key, index) => {\n            if (!(key in build)) return;\n            const artifactSet = build[key] as TArtifactSetKey;\n            if (artifactSet && artifactSet in ARTIFACT_SET_MASTER) {\n                characterInput.artifactSets[index] = artifactSet;\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER[artifactSet] as TArtifactSetEntry;\n            } else {\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER_DUMMY as TArtifactSetEntry;\n            }\n        });\n\n        ['1', '2'].forEach((key, index) => {\n            if (key in build) {\n                artifactDetailInput[''][index] = build[key];\n            } else {\n                artifactDetailInput[''][index] = ['5_HP', '5_'][index];\n            }\n        });\n        ['3', '4', '5'].forEach((key, index) => {\n            if (!(key in build)) return;\n            const mainstat = build[key];\n            artifactDetailInput[''][index + 2] = mainstat;\n        });\n        // for (const entry of artifactDetailInput['']) {\n        //     const [rarity, stat] = entry.split('_');\n        //     artifactStatsMain[stat] += (ARTIFACT_MAIN_MASTER as any)[rarity][stat];\n        // }\n        // overwriteObject(artifactDetailInput., artifactStatsMain);\n\n        if (!prioritySubstatsDisabled) {\n            ['1', '2', '3'].forEach((key, index) => {\n                if (!(key in build)) return;\n                const substat = build[key];\n                artifactDetailInput[''][index] = substat;\n            });\n            ['1', '2', '3'].forEach((key, index) => {\n                let doUpdate = false;\n                if (artifactDetailInput[''][index]) {\n                    if ((key in build) && isNumber(build[key])) {\n                        doUpdate = true;\n                    }\n                }\n                if (doUpdate) {\n                    const substatValue = Number(build[key]);\n                    const substat = artifactDetailInput[''][index] as TArtifactSubKey;\n                    const prioritySubstatValueList = makePrioritySubstatValueList([substat], 0);\n                    prioritySubstatValueList.forEach((v, i) => {\n                        if (substatValue <= v) {\n                            artifactDetailInput[''][index] = i;\n                        }\n                    })\n                } else {\n                    if (artifactDetailInput[''][index] && !artifactDetailInput[''][index]) {\n                        artifactDetailInput[''][index] = GENSEN_MASTER_LIST[2].values[index];\n                    }\n                }\n            });\n            ['1', '2', '3'].forEach((key, index) => {\n                let doUpdate = false;\n                if (artifactDetailInput[''][index]) {\n                    if ((key in build) && isNumber(build[key])) {\n                        doUpdate = true;\n                    }\n                }\n                if (doUpdate) {\n                    const substatCount = Number(build[key]);\n                    artifactDetailInput[''][index] = substatCount;\n                } else {\n                    if (artifactDetailInput[''][index] && !artifactDetailInput[''][index]) {\n                        artifactDetailInput[''][index] = GENSEN_MASTER_LIST[2].counts[index];\n                    }\n                }\n            });\n        }\n\n        Object.keys(build).filter(s => !PROPERTY_MAP.has(s) && !['options', 'artifactScoring', 'supporterBuildname', 'artifact_list'].includes(s)).forEach(key => {\n            if (build[key] == null) {\n                conditionInput.conditionValues[key] = build[key];   // null\n            } else if (_.isString(build[key])) {\n                conditionInput.conditionValues[key] = Number(build[key]);\n            } else {\n                conditionInput.conditionValues[key] = build[key];\n            }\n        });\n\n        if ('options' in build) {\n            const keys = Object.keys(build.options);\n            if (keys.length) {\n                overwriteObject(optionInput.elementalResonance.conditionValues, {});\n                overwriteObject(optionInput.teamOption.conditionValues, {});\n                overwriteObject(optionInput.miscOption.conditionValues, {});\n                keys.forEach(key => {\n                    if (key in ELEMENTAL_RESONANCE_MASTER || key == 'dendroOption') {\n                        // \n                        optionInput.elementalResonance.conditionValues[key] = build.options[key];\n                    } else {\n                        const astarIndex = key.indexOf('*');\n                        if (astarIndex != -1) {\n                            const workCharacter = key.substring(0, astarIndex);\n                            if (workCharacter in CHARACTER_MASTER) {\n                                // \n                                optionInput.teamOption.conditionValues[key] = build.options[key];\n                            } else {\n                                // \n                                optionInput.miscOption.conditionValues[key] = build.options[key];\n                            }\n                        } else {\n                            // \n                            optionInput.miscOption.conditionValues[key] = build.options[key];\n                        }\n                    }\n                })\n            }\n        }\n\n        if ('supporterBuildname' in build) {\n            const keys = Object.keys(build.supporterBuildname);\n            if (keys.length) {\n                overwriteObject(optionInput.supporterBuildname, {});\n                keys.forEach(key => {\n                    optionInput.supporterBuildname[key] = build.supporterBuildname[key];\n                });\n            }\n        }\n\n        if ('artifact_list' in build) {\n            const ARTIFACT_KEYS = Object.keys(ARTIFACT_TEMPLATE).sort();\n            const newList = build.artifact_list.filter((s: any) => _.isEqual(Object.keys(s).sort(), ARTIFACT_KEYS));\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length, ...newList);\n        } else {\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length);\n        }\n\n        overwriteObject(artifactDetailInput., artifactStatsSub);\n\n        console.debug('loadRecommendation', characterInput, artifactDetailInput, conditionInput, build);\n    }\n    catch (error) {\n        console.error(characterInput, artifactDetailInput, conditionInput, build);\n        // throw error;\n    }\n}\n\nexport function makeSavedata(characterInput: TCharacterInput, artifactDetailInput: TArtifactDetailInput, conditionInput: TConditionInput) {\n    const resultObj = {} as any;\n\n    // \n    resultObj[''] = characterInput.character;\n    // \n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\n    // \n    resultObj[''] = characterInput.;\n    // \n    resultObj[''] = characterInput.;\n    // \n    resultObj[''] = characterInput.;\n    // \n    resultObj[''] = characterInput.;\n    // \n    resultObj[''] = characterInput.weapon;\n    // \n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\n    // \n    resultObj[''] = characterInput.;\n    // 1\n    resultObj['1'] = characterInput.artifactSets[0];\n    // 2\n    resultObj['2'] = characterInput.artifactSets[1];\n    // 1\n    resultObj['1'] = artifactDetailInput.[0];\n    // 2\n    resultObj['2'] = artifactDetailInput.[1];\n    // 3\n    resultObj['3'] = artifactDetailInput.[2];\n    // 4\n    resultObj['4'] = artifactDetailInput.[3];\n    // 5\n    resultObj['5'] = artifactDetailInput.[4];\n    // HP\n    resultObj['HP'] = artifactDetailInput.['HP'];\n    // \n    resultObj[''] = artifactDetailInput.[''];\n    // \n    resultObj[''] = artifactDetailInput.[''];\n    // \n    resultObj[''] = artifactDetailInput.[''];\n    // \n    resultObj[''] = artifactDetailInput.[''];\n    // \n    resultObj[''] = artifactDetailInput.[''];\n    // \n    resultObj[''] = artifactDetailInput.[''];\n    // HPP\n    resultObj['HPP'] = artifactDetailInput.['HP%'];\n    // P\n    resultObj['P'] = artifactDetailInput.['%'];\n    // P\n    resultObj['P'] = artifactDetailInput.['%'];\n    // 1\n    resultObj['1'] = artifactDetailInput.[0];\n    // 1\n    resultObj['1'] = artifactDetailInput.[0];\n    // 1\n    resultObj['1'] = artifactDetailInput.[0];\n    // 2\n    resultObj['2'] = artifactDetailInput.[1];\n    // 2\n    resultObj['2'] = artifactDetailInput.[1];\n    // 2\n    resultObj['2'] = artifactDetailInput.[1];\n    // 3\n    resultObj['3'] = artifactDetailInput.[2];\n    // 3\n    resultObj['3'] = artifactDetailInput.[2];\n    // 3\n    resultObj['3'] = artifactDetailInput.[2];\n\n    for (const entry of conditionInput.checkboxList) {\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\n    }\n    for (const entry of conditionInput.selectList) {\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\n    }\n\n    resultObj['artifact_list'] = artifactDetailInput.artifact_list;\n\n    return resultObj;\n}\n\nexport function makeOptionsSavedata(character: string, optionInput: TOptionInput) {\n    const resultObj = {} as any;\n\n    // \n    {\n        const conditionValues = optionInput.elementalResonance.conditionValues;\n        Object.keys(conditionValues).forEach(key => {\n            if (conditionValues[key]) {\n                resultObj[key] = conditionValues[key];\n            }\n        })\n    }\n\n    // \n    {\n        const conditionValues = optionInput.teamOption.conditionValues;\n        Object.keys(conditionValues).forEach(key => {\n            if (key.startsWith(character + '*')) return;\n            if (conditionValues[key]) {\n                resultObj[key] = conditionValues[key];\n            }\n        })\n    }\n\n    // \n    {\n        const conditionValues = optionInput.miscOption.conditionValues;\n        Object.keys(conditionValues).forEach(key => {\n            if (conditionValues[key]) {\n                resultObj[key] = conditionValues[key];\n            }\n        })\n    }\n\n    return resultObj;\n}\n\nexport function makeSupporterBuildnameSavedata(buildnameSelection: TAnyObject, optionInput: TOptionInput) {\n    const result: TAnyObject = {};\n    const conditionKeys = Object.keys(optionInput.teamOption.conditionValues);\n    for (const supporter of Object.keys(buildnameSelection)) {\n        if (!buildnameSelection[supporter]) continue;\n        if (conditionKeys.filter(s => s.startsWith(supporter + '*')).length == 0) continue;\n        result[supporter] = buildnameSelection[supporter];\n    }\n    return result;\n}\n\nexport const CHANGE_KIND_STATUS = '';\nexport const CHANGE_KIND_TALENT = '';\n\nexport function makeDamageDetailObjArrObjCharacter(characterInput: TCharacterInput): TDamageDetail {\n    const result = {} as any;\n    try {\n        const characterMaster = characterInput.characterMaster as any;\n\n        let myTalentDetail;\n        let myTalentLevel: number;\n        let myDefaultKind: string | null;\n        let myDefaultElement: string | null;\n        const myInputCategory = '';\n\n        const myStatusChangeDetailObjArr = [] as any[];\n        const myTalentChangeDetailObjArr = [] as any[];\n\n        //   \n        myTalentLevel = characterInput[''];\n        myDefaultElement = characterMaster[''] === '' ? characterMaster[''] : null;\n        ['', '', ''].forEach(category => {\n            myTalentDetail = characterMaster[category];\n            myDefaultKind = category + '';\n            result[category] = makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\n        });\n\n        ['', '', ''].forEach(category => {\n            const workCategory = '' + category;\n            if (workCategory in characterMaster) {\n                myTalentDetail = characterMaster[workCategory];\n                if ('' in myTalentDetail) {\n                    myDefaultKind = myTalentDetail[''];\n                    switch (myDefaultKind) {\n                        case '':\n                            myTalentLevel = characterInput[''];\n                            break;\n                        case '':\n                            myTalentLevel = characterInput[''];\n                            break;\n                    }\n                }\n                if ('' in myTalentDetail) {\n                    myDefaultElement = myTalentDetail[''];\n                }\n                const workObj = {\n                    : myTalentDetail[''],\n                    : makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory)\n                };\n                result[workCategory] = workObj;\n            }\n        });\n\n        // \n        myTalentLevel = characterInput[''];\n        myDefaultKind = '';\n        myDefaultElement = characterMaster[''];\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\n\n        // \n        myTalentLevel = characterInput[''];\n        myDefaultKind = '';\n        myDefaultElement = characterMaster[''];\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\n\n        result[''] = [] as TDamageDetailObj[];\n\n        // \n        if ('' in characterMaster) {\n            characterMaster[''].forEach((myTalentDetail: any) => {\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\n                if (workArr.length > 0) result[''].push(...workArr);\n            });\n        }\n\n        // \n        characterMaster[''].forEach((myTalentDetail: any) => {\n            const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\n            if (workArr.length > 0) result[''].push(...workArr);\n        });\n\n        // \n        if ('' in characterMaster) {\n            Object.keys(characterMaster['']).forEach(key => {\n                if (Number(key) > characterInput.) return;\n                myTalentDetail = characterMaster[''][key];\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\n                if (workArr.length > 0) result[''].push(...workArr);\n            });\n        }\n\n        // \n        if (characterMaster[''] == '') {\n            if (myTalentChangeDetailObjArr.filter(s => s. && s..startsWith('@')).length == 0) {\n                ['', '', '', ''].forEach(cond => {\n                    myTalentChangeDetailObjArr.push({\n                        : null,\n                        : '',\n                        : null,\n                        : null,\n                        : '@' + cond,\n                        : null,\n                        : null,\n                        HIT: null,\n                        : null,\n                        : null,\n                        : null,\n                        : null\n                    });\n                });\n            }\n            if ('' in characterMaster) {\n                if (Object.keys(characterMaster['']).filter(s => s == '').length == 0) {\n                    characterMaster[''][''] = 1;\n                }\n            } else {\n                characterMaster[''] = { : 1 };\n            }\n        }\n\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\n\n        const conditionMap = new Map();\n        const exclusionMap = new Map();\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\n        });\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\n        });\n        // conditionMap.delete('');\n        conditionMap.forEach((value, key) => {\n            if (value && Array.isArray(value)) {\n                if (!value[0].startsWith('required_')) {\n                    conditionMap.set(key, ['', ...value]);\n                }\n            }\n        });\n        result[''] = conditionMap;\n        result[''] = exclusionMap;\n\n        characterInput.damageDetailMyCharacter = result;\n    } catch (error) {\n        console.error(characterInput, result);\n        // throw error;\n    }\n    return result;\n}\n\nexport function makeDamageDetailObjArrObjWeapon(characterInput: any) {\n    const result = {} as any;\n    try {\n        const name = characterInput.weapon;\n        const weaponMaster = characterInput.weaponMaster;\n        if (!name || !weaponMaster) return result;\n\n        let myTalentDetail;\n        const myLevel = characterInput.;\n        const myInputCategory = '';\n\n        const myStatusChangeDetailObjArr = [] as any[];\n        const myTalentChangeDetailObjArr = [] as any[];\n\n        if ('' in weaponMaster) {\n            myTalentDetail = weaponMaster[''];\n            result[''] = makeDamageDetailObjArr(myTalentDetail, myLevel, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\n        }\n\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\n\n        const conditionMap = new Map();\n        const exclusionMap = new Map();\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\n            let condition = detailObj[''];\n            if (_.isPlainObject(condition) && myLevel in condition) {\n                condition = condition[myLevel];\n            }\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\n        });\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\n            let condition = detailObj[''];\n            if (_.isPlainObject(condition) && myLevel in condition) {\n                condition = condition[myLevel];\n            }\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\n        });\n        conditionMap.forEach((value, key) => {\n            if (value && Array.isArray(value)) {\n                if (!value[0].startsWith('required_')) {\n                    conditionMap.set(key, ['', ...value]);\n                }\n            }\n        });\n        result[''] = conditionMap;\n        result[''] = exclusionMap;\n\n        characterInput.damageDetailMyWeapon = result;\n    } catch (error) {\n        console.error(characterInput, result);\n        // throw error;\n    }\n    return result;\n}\n\nexport function makeDamageDetailObjArrObjArtifactSets(characterInput: any) {\n    const result = [] as any;\n    try {\n        let myTalentDetail;\n        const myInputCategory = '';\n\n        const myStatusChangeDetailObjArr = [] as any[];\n        const myTalentChangeDetailObjArr = [] as any[];\n\n        const artifactSetMasters = characterInput.artifactSetMasters.filter((s: any) => s);\n\n        if (artifactSetMasters.length > 0) {\n            const damageDetailObjArr = [] as TDamageDetailObj[];\n            if ('2' in artifactSetMasters[0]) {\n                myTalentDetail = artifactSetMasters[0]['2'];\n                damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\n            }\n            if (artifactSetMasters.length == 2) {\n                if (artifactSetMasters[0] == artifactSetMasters[1]) {\n                    myTalentDetail = artifactSetMasters[0]['4'];\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\n                } else {\n                    myTalentDetail = artifactSetMasters[1]['2'];\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\n                }\n            }\n            result[''] = damageDetailObjArr;\n        }\n\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\n\n        const conditionMap = new Map();\n        const exclusionMap = new Map();\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\n        });\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\n        });\n        conditionMap.forEach((value, key) => {\n            if (value && Array.isArray(value)) {\n                if (!value[0].startsWith('required_')) {\n                    conditionMap.set(key, ['', ...value]);\n                }\n            }\n        });\n        result[''] = conditionMap;\n        result[''] = exclusionMap;\n\n        characterInput.damageDetailMyArtifactSets = result;\n    } catch (error) {\n        console.error(characterInput, result);\n        // throw error;\n    }\n    return result;\n}\n\nexport function makeDamageDetailObjArrObjElementalResonance(characterInput: any) {\n    const result = [] as any;\n    try {\n        const myInputCategory = '';\n        const damageDetailObjArr = [] as TDamageDetailObj[];\n        const myStatusChangeDetailObjArr = [] as any[];\n        const myTalentChangeDetailObjArr = [] as any[];\n        for (const myTalentDetail of ELEMENTAL_RESONANCE_MASTER_LIST) {\n            const workObj = _.cloneDeep(myTalentDetail);\n            if (workObj.) {\n                workObj..forEach((detailObj: TAnyObject) => {\n                    detailObj. = myTalentDetail.key;\n                });\n            }\n            damageDetailObjArr.push(...makeDamageDetailObjArr(workObj, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\n        }\n        result[''] = damageDetailObjArr;\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\n\n        const conditionMap = new Map();\n        const exclusionMap = new Map();\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\n        });\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\n        });\n        conditionMap.forEach((value, key) => {\n            if (value && Array.isArray(value)) {\n                if (!value[0].startsWith('required_')) {\n                    conditionMap.set(key, ['', ...value]);\n                }\n            }\n        });\n        result[''] = conditionMap;\n        result[''] = exclusionMap;\n\n        characterInput.damageDetailElementalResonance = result;\n    } catch (error) {\n        console.error(characterInput, result);\n        // throw error;\n    }\n    return result;\n}\n\nfunction makeDetailObj(\n    detailObj: any,\n    level: number | null,\n    defaultKind: string | null,\n    defaultElement: string | null,\n    inputCategory: string | null,\n    opt_condition?: string,\n): TDamageDetailObj {\n    let my = '' in detailObj ? detailObj[''] : defaultKind;\n    let my = null;\n    if (my.indexOf('.') != -1) {\n        my = my.substring(my.indexOf('.') + 1);\n        my = my.substring(0, my.indexOf('.'));\n    } else if ('' in detailObj) {\n        my = detailObj[''];\n    }\n    let my = null;\n    if ('' in detailObj) {\n        my = detailObj[''];\n        if (isNumber(my) || _.isString(my)) {\n            // nop\n        } else if (_.isPlainObject(my) && level && level in my) { // |\n            my = my[level];\n        } else {\n            console.error(detailObj, level, defaultKind, defaultElement, my);\n        }\n        if (DAMAGE_CATEGORY_ARRAY.includes(my + '') || my.endsWith('')) {\n            my = analyzeFormulaStr(my, '');\n        } else {\n            my = analyzeFormulaStr(my, my);\n        }\n    }\n    let my = null;\n    if ('' in detailObj) {\n        if (_.isPlainObject(detailObj['']) && level && level in detailObj['']) {  // \n            my = detailObj[''][level];\n        } else {\n            my = detailObj[''];\n        }\n    } else {\n        my = opt_condition ?? null;\n    }\n    let my = null;\n    if ('' in detailObj) {\n        my = detailObj[''];\n        if (_.isPlainObject(my) && level && level in my) {   // \n            my = my[level];\n        }\n        my = analyzeFormulaStr(my);\n    }\n    let my = null;\n    if ('' in detailObj) {  // \n        my = detailObj[''];\n        if (_.isPlainObject(my) && level && level in my) {\n            my = my[level];\n        }\n        my = analyzeFormulaStr(my);\n    }\n    const resultObj: TDamageDetailObj = {\n        : detailObj[''],\n        : my,\n        : '' in detailObj ? detailObj[''] : defaultElement,\n        : my,\n        : my,\n        : my,\n        : my,\n        : my,\n        HIT: 'HIT' in detailObj ? detailObj['HIT'] : null,\n        : '' in detailObj ? detailObj[''] : null,\n        : '' in detailObj ? detailObj[''] : inputCategory == '',\n        : '' in detailObj ? detailObj[''] : null,\n        : '' in detailObj ? detailObj[''] : null,\n    }\n    return resultObj;\n}\n\nexport function getChangeKind(kind: string) {\n    if (kind in TEMPLATE\n        || new RegExp('[].+(|)').exec(kind)\n        || [''].includes(kind)  // for \n        || new RegExp('?[]').exec(kind)\n        || ['', ''].includes(kind)\n        || [''].includes(kind)\n        || ['', ''].includes(kind)\n        || ['', '', '', ''].includes(kind)\n        || kind.endsWith('')\n        || kind.endsWith('')\n        || kind.endsWith('')\n        || kind.endsWith('')\n    ) {\n        return 'STATUS';\n    } else if (kind.endsWith('')\n        || kind.endsWith('')\n        || kind == '' ||\n        kind == ''\n    ) {   // ex.,\n        return 'TALENT';\n    }\n    return undefined;\n}\n\nexport function makeDamageDetailObjArr(\n    talentDataObj: any,\n    level: number | null,\n    defaultKind: string | null,\n    defaultElement: string | null,\n    statusChangeDetailObjArr: any[],\n    talentChangeDetailObjArr: any[],\n    inputCategory: string,\n    opt_condition?: string,\n): TDamageDetailObj[] {\n    const resultArr = [] as any[];\n    if (!('' in talentDataObj)) return resultArr;\n\n    talentDataObj[''].forEach((detailObj: TAnyObject) => {\n        const resultObj = makeDetailObj(detailObj, level, defaultKind, defaultElement, inputCategory, opt_condition);\n        const my = resultObj. as string;\n        if (statusChangeDetailObjArr != null && getChangeKind(my) == 'STATUS') {\n            resultObj[''] = '' in detailObj ? detailObj[''] : null;\n            statusChangeDetailObjArr.push(resultObj);\n            return;\n        }\n        if (talentChangeDetailObjArr != null && getChangeKind(my) == 'TALENT') {\n            resultObj[''] = '' in detailObj ? detailObj[''] : null;\n            talentChangeDetailObjArr.push(resultObj);\n            return;\n        }\n        resultArr.push(resultObj);\n    });\n\n    return resultArr;\n}\n\nexport function makeTeamOptionDetailObjArr(\n    detailObjArr: any[],\n): TDamageDetailObj[] {\n    const resultArr = [] as any[];\n\n    detailObjArr.forEach((detailObj: { [x: string]: any; }) => {\n        const resultObj = makeDetailObj(detailObj, null, null, null, null);\n        if (resultObj) {\n            resultArr.push(resultObj);\n        }\n    });\n\n    return resultArr;\n}\n\n// \n// @prefixpostfix\n// @prefix(From)-(To)postfix\n// @prefix1,2,3postfix\n// =prefixpostfix\n// @\n// =\n// ={min=|,max=|,step=}\n// OR   A|B\n// AND  A&B\n//  A^B\nexport function makeConditionExclusionMapFromStr(\n    conditionStr: string,\n    conditionMap: Map<string, string[] | null | object>,\n    exclusionMap: Map<string, string[] | null>\n) {\n    // \n    let exclusionCond: string | null = null;\n    let myCondStrArr = conditionStr.split('^');\n    if (myCondStrArr.length > 1) {\n        exclusionCond = myCondStrArr[1];\n    }\n    const myCondStr = myCondStrArr[0];\n    if (myCondStr.indexOf('|') != -1) {\n        // OR for \n        myCondStrArr = myCondStr.split('|');\n        myCondStrArr.forEach((myCondStr: string) => {\n            makeConditionExclusionMapFromStrSub(myCondStr, conditionMap, exclusionMap, exclusionCond);\n        });\n    } else {\n        // AND\n        myCondStrArr = myCondStr.split('&');\n        myCondStrArr.forEach((myCondStr: string) => {\n            makeConditionExclusionMapFromStrSub(myCondStr, conditionMap, exclusionMap, exclusionCond);\n        });\n    }\n}\n\nexport const NUMBER_CONDITION_VALUE_RE = /^\\s*{.+}\\s*$/;\n\nfunction makeConditionExclusionMapFromStrSub(\n    conditionStr: string,\n    conditionMap: Map<string, string[] | null | object>,\n    exclusionMap: Map<string, string[] | null>,\n    exclusion: string | null\n) {\n    const myCondStrArr = conditionStr.split(/[@=]/);\n    const myName = myCondStrArr[0];\n    if (myCondStrArr.length == 1) {\n        pushToMapValueArray(conditionMap, myName, null);\n    } else if (myCondStrArr.length == 2) {\n        if (NUMBER_CONDITION_VALUE_RE.test(myCondStrArr[1])) {\n            try {\n                const workObj = JSON.parse(myCondStrArr[1]);\n                if ('min' in workObj) { // min\n                    const conditionObj = {\n                        min: workObj.min,\n                        max: workObj.max,\n                        step: workObj.step,\n                    };\n                    pushToMapValueArray(conditionMap, myName, conditionObj);\n                } else {\n                    console.error(conditionStr, conditionMap, exclusionMap, exclusion);\n                }\n            } catch (error) {\n                console.error(error);\n                console.error(conditionStr, conditionMap, exclusionMap, exclusion);\n            }\n        } else if (myCondStrArr[1].indexOf(',') != -1) {\n            const re = new RegExp('([^0-9]*?)([\\\\+\\\\-0-9\\\\.,]+)(.*)');  // :-10,+60%\n            const reRet = re.exec(myCondStrArr[1]);\n            if (reRet) {\n                const prefix = reRet[1];\n                const condValueArr = reRet[2].split(',');\n                const postfix = reRet[3];\n                condValueArr.forEach(value => {\n                    pushToMapValueArray(conditionMap, myName, prefix + value + postfix);\n                });\n            }\n        } else if (myCondStrArr[1].indexOf('-') != -1) {\n            const re = new RegExp('([^0-9\\\\.]*)(-?[0-9\\\\.]+)-(-?[0-9\\\\.]+)(.*)');   // +prefix\n            const re2 = new RegExp('/([0-9\\\\.]+)(.*)');\n            const reRet = re.exec(myCondStrArr[1]);\n            if (reRet) {\n                const prefix = reRet[1];\n                const rangeStart = Number(reRet[2]);\n                const rangeEnd = Number(reRet[3]);\n                let step = rangeStart;\n                let postfix = reRet[4];\n                if (postfix) {\n                    const re2Ret = re2.exec(postfix);\n                    if (re2Ret) {\n                        step = Number(re2Ret[1]);\n                        postfix = re2Ret[2];\n                    }\n                }\n                for (let i = rangeStart; i < rangeEnd; i = addDecimal(i, step, rangeEnd)) {\n                    pushToMapValueArray(conditionMap, myName, prefix + String(i) + postfix);\n                }\n                pushToMapValueArray(conditionMap, myName, prefix + String(rangeEnd) + postfix);\n            } else {\n                pushToMapValueArray(conditionMap, myName, myCondStrArr[1]);\n            }\n        } else {\n            pushToMapValueArray(conditionMap, myName, myCondStrArr[1]);\n        }\n    } else {\n        console.error(conditionStr, conditionMap, exclusionMap, exclusion);\n    }\n    if (exclusion) {\n        exclusion.split(',').forEach(e => {\n            pushToMapValueArray(exclusionMap, myName, e);\n        });\n    }\n}\n\nexport function setupConditionValues(\n    conditionInput: TConditionInput,\n    characterInput: TCharacterInput,\n    optionInput: TOptionInput,\n) {\n    try {\n        const conditionValues = conditionInput.conditionValues;\n        const checkboxList = conditionInput.checkboxList as TCheckboxEntry[];\n        const selectList = conditionInput.selectList as TSelectEntry[];\n        const numberList = conditionInput.numberList as TNumberEntry[];\n\n        checkboxList.splice(0, checkboxList.length);\n        selectList.splice(0, selectList.length);\n\n        const masters = [characterInput.characterMaster, characterInput.weaponMaster, ...characterInput.artifactSetMasters];\n        for (const master of masters.filter(s => s)) {\n            if ('' in master) {\n                for (const key of Object.keys((master as any)[''])) {\n                    if (!(key in conditionValues)) {\n                        conditionValues[key] = (master as any)[''][key];\n                    }\n                }\n            }\n            // \n            if ('4' in master && '' in (master as any)['4']) {\n                for (const key of Object.keys((master as any)['4'][''])) {\n                    if (!(key in conditionValues)) {\n                        conditionValues[key] = (master as any)['4'][''][key];\n                    }\n                }\n            }\n        }\n\n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\n            if (myDamageDetail) {\n                const conditionMap: Map<string, string[] | null | object> = myDamageDetail.;\n                const exclusionMap: Map<string, string[] | null> = myDamageDetail.;\n\n                conditionMap.forEach((value: string[] | null | object, key: string) => {\n                    if (value == null) {\n                        if (checkboxList.filter(s => s.name == key).length == 0) {\n                            checkboxList.push({ name: key });\n                        }\n                    } else if (Array.isArray(value)) {\n                        if (selectList.filter(s => s.name == key).length == 0) {\n                            const required = value[0].startsWith(\"required_\");\n                            selectList.push({\n                                name: key,\n                                options: value,\n                                required: required,\n                            });\n                        }\n                    } else if (_.isPlainObject(value)) {\n                        if (numberList.filter(s => s.name == key).length == 0) {\n                            const entry = {\n                                name: key,\n                                min: (value as any).min,\n                                max: (value as any).max,\n                                step: (value as any).step,\n                            };\n                            numberList.push(entry);\n                        }\n                    }\n                    if (key in conditionValues && conditionValues[key] != null) {\n                        const exclusions = exclusionMap.get(key);\n                        if (exclusions) {\n                            for (const exclusion of exclusions) {\n                                if (exclusion in conditionValues) {\n                                    const conditionValue = conditionMap.get(exclusion);\n                                    if (conditionValue === null) {  // checkbox\n                                        conditionValues[exclusion] = false;\n                                    } else if (Array.isArray(value)) {    // select\n                                        conditionValues[exclusion] = 0;\n                                    } else if (_.isPlainObject(value)) {    // number\n                                        const minValue = (value as any).min;\n                                        if (isNumber(minValue)) {\n                                            conditionValues[exclusion] = minValue;\n                                        } else {\n                                            conditionValues[exclusion] = 0;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    } else {\n                        if (value === null) {   // checkbox\n                            let checked = true;\n                            const arr = exclusionMap.get(key);\n                            if (arr && arr.filter(s => conditionValues[s]).length > 0) {\n                                checked = false;\n                            }\n                            conditionValues[key] = checked;\n                        } else if (Array.isArray(value)) {   // select\n                            let selectedIndex = value.length - 1;\n                            const arr = exclusionMap.get(key);\n                            if (arr && arr.filter(s => conditionValues[s]).length > 0) {\n                                selectedIndex = 0;\n                            }\n                            conditionValues[key] = selectedIndex;\n                        } else if (_.isPlainObject(value)) {    // number\n                            const minValue = (value as any).min;\n                            if (isNumber(minValue)) {\n                                conditionValues[key] = minValue;\n                            } else {\n                                conditionValues[key] = 0;\n                            }\n                        }\n                    }\n                });\n            }\n        }\n\n        if (optionInput.elementalResonance) {\n            const conditionMap: Map<string, any[] | null | object> = new Map();\n            const exclusionMap: Map<string, string[] | null> = new Map();\n            for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\n                if (!optionInput.elementalResonance.conditionValues[key]) continue;\n                const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\n                if (!master.) continue;\n                for (const detailObj of master.) {\n                    if (!detailObj.) continue;\n                    makeConditionExclusionMapFromStr(detailObj., conditionMap, exclusionMap);\n                }\n            }\n            conditionMap.forEach((value: string[] | null | object, key: string) => {\n                if (value == null) {\n                    if (checkboxList.filter(s => s.name == key).length == 0) {\n                        checkboxList.push({ name: key });\n                    }\n                } else if (Array.isArray(value)) {\n                    if (selectList.filter(s => s.name == key).length == 0) {\n                        const required = value[0].startsWith(\"required_\");\n                        selectList.push({\n                            name: key,\n                            options: value,\n                            required: required,\n                        });\n                    }\n                }\n\n                if (key in conditionValues && conditionValues[key] != null) {\n                    const exclusions = exclusionMap.get(key);\n                    if (exclusions) {\n                        for (const exclusion of exclusions) {\n                            if (exclusion in conditionValues) {\n                                const conditionValue = conditionMap.get(exclusion);\n                                if (conditionValue === null) {  // checkbox\n                                    conditionValues[exclusion] = false;\n                                } else if (Array.isArray(value)) {    // select\n                                    conditionValues[exclusion] = 0;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    if (value === null) {   // checkbox\n                        let checked = true;\n                        const arr = exclusionMap.get(key);\n                        if (arr && arr.filter(s => conditionValues[s]).length > 0) {\n                            checked = false;\n                        }\n                        conditionValues[key] = checked;\n                    } else if (Array.isArray(value)) {   // select\n                        let selectedIndex = value.length - 1;\n                        const arr = exclusionMap.get(key);\n                        if (arr && arr.filter(s => conditionValues[s]).length > 0) {\n                            selectedIndex = 0;\n                        }\n                        conditionValues[key] = selectedIndex;\n                    }\n                }\n            });\n        }\n    } catch (error) {\n        console.error(conditionInput, characterInput);\n        // throw error;\n    }\n}\n\nexport function getStatValue(stat: string, statsObj: TStats) {\n    let result;\n    if (stat in statsObj) {\n        result = statsObj[stat];\n    } else {\n        const re = /(.+)X([0-7])$/;\n        const reRet = re.exec(stat);\n        if (reRet) {\n            if (reRet[1] in statsObj) {\n                result = statsObj[reRet[1]];\n                let n = Number(reRet[2]);\n                for (let i = 1; i <= 3; i++) {\n                    if ((n % 2) == 1) {\n                        const vStat: string = reRet[1] + 'V' + i;\n                        if (vStat in statsObj) {\n                            result -= statsObj[vStat];\n                        }\n                    }\n                    n = Math.trunc(n / 2);\n                }\n            }\n        }\n    }\n    if (result === undefined) {\n        console.warn(stat, statsObj); // \n        result = 0; // fixed\n    }\n    return result;\n}\n\nexport function updateNumberConditionValues(\n    conditionInput: TConditionInput,\n    characterInput: TCharacterInput,\n    statsObj: TStats,\n) {\n    for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\n        if (myDamageDetail) {\n            const conditionMap: Map<string, string[] | null | object> = myDamageDetail.;\n            conditionMap.forEach((value: string[] | null | object, key: string) => {\n                if (_.isPlainObject(value)) {\n                    const numberEntryArr = conditionInput.numberList.filter(s => s.name == key);\n                    if (numberEntryArr.length > 0) {\n                        let minValue = (value as any).min;\n                        let maxValue = (value as any).max;\n                        if (_.isString(minValue) || _.isString(maxValue)) {\n                            if (_.isString(minValue)) {\n                                minValue = getStatValue(minValue, statsObj);\n                            }\n                            if (_.isString(maxValue)) {\n                                maxValue = getStatValue(maxValue, statsObj);\n                            }\n                            numberEntryArr[0].min = minValue;\n                            numberEntryArr[0].max = maxValue;\n                            if (key in conditionInput.conditionValues) {\n                                const value = conditionInput.conditionValues[key];\n                                if (_.isNumber(value)) {\n                                    if (value < minValue) {\n                                        conditionInput.conditionValues[key] = minValue;\n                                    } else if (maxValue !== undefined && value > maxValue) {\n                                        conditionInput.conditionValues[key] = maxValue;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n    }\n}\n\nfunction pushToMapValueArray(map: Map<any, any>, key: any, value: any) {\n    if (value == null) {    // checkbox\n        if (!map.has(key)) {\n            map.set(key, null);\n        }\n    } else if (_.isString(value)) { // select\n        if (map.has(key)) {\n            const oldValue = map.get(key);\n            if (oldValue == null) {\n                map.set(key, [value]);\n            } else if (Array.isArray(oldValue)) {\n                if (!oldValue.includes(value)) {\n                    map.get(key).push(value);\n                }\n            } else {\n                console.error(map, key, value);\n            }\n        } else {\n            map.set(key, [value]);\n        }\n    } else if (_.isPlainObject(value)) {    // number\n        map.set(key, value);\n    }\n}\n\nfunction getDecimalLength(value: number): number {\n    const arr = ('' + value).split('.');\n    return arr.length > 1 ? arr[1].length : 0;\n}\n\nexport function multiplyDecimal(value1: number, value2: number): number {\n    const decimalLength = getDecimalLength(value1) + getDecimalLength(value2);\n    const intValue1 = Number(('' + value1).replace('.', ''));\n    const intValue2 = Number(('' + value2).replace('.', ''));\n    const result = (intValue1 * intValue2) / Math.pow(10, decimalLength);\n    return Number(result);\n}\n\nexport function addDecimal(value1: number, value2: number, opt_max?: number): number {\n    const k = Math.pow(10, Math.max(getDecimalLength(value1), getDecimalLength(value2)));\n    let result = (multiplyDecimal(value1, k) + multiplyDecimal(value2, k)) / k;\n    if (opt_max != undefined) {\n        result = Math.min(result, opt_max);\n    }\n    return result;\n}\n\nfunction analyzeFormulaStr(\n    formulaStr: number | string,\n    opt_defaultItem: string | null = null\n) {\n    const resultArr = [] as any[];\n    const re = new RegExp('([\\\\+\\\\-\\\\*/]?)([^\\\\+\\\\-\\\\*/]+)(.*)');\n    let workStr = String(formulaStr);\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const reRet = re.exec(workStr);\n        if (!reRet) {\n            resultArr.push(workStr);\n            break;\n        }\n        if (reRet[1]) { // + - * /\n            resultArr.push(reRet[1]);\n        }\n        resultArr.push(analyzeFormulaStrSub(reRet[2], opt_defaultItem));\n        if (!reRet[3]) {\n            break;\n        }\n        workStr = reRet[3];\n    }\n    return resultArr;\n}\n\nfunction analyzeFormulaStrSub(\n    formulaStr: string,\n    opt_defaultItem: string | null = null\n) {\n    const resultArr = [] as any;\n    if (isNumber(formulaStr)) {\n        resultArr.push(Number(formulaStr));\n    } else {\n        const strArr = (formulaStr as string).split('%');\n        if (strArr.length == 1) {\n            resultArr.push(strArr[0]);\n        } else {\n            resultArr.push(Number(strArr[0]) / 100);\n            resultArr.push('*');\n            if (strArr[1].length > 0) {\n                resultArr.push(strArr[1]);\n            } else if (opt_defaultItem != null) {\n                resultArr.push(opt_defaultItem);\n            }\n        }\n    }\n    return resultArr;\n}\n\nexport function makeSharedata(savedata: TAnyObject) {\n    const sharedataArr = [] as any[];\n\n    let character: TCharacterKey;\n    let weaponType: TWeaponTypeKey;\n\n    PROPERTY_MAP.forEach((value, key) => {\n        let newValue = savedata[key];\n        let myBasename;\n        switch (key) {\n            case '':\n                character = newValue as TCharacterKey;\n                myBasename = basename(CHARACTER_MASTER[character]['import']);\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\n                break;\n            case '':\n                weaponType = CHARACTER_MASTER[character][''] as TWeaponTypeKey;\n                myBasename = basename((WEAPON_MASTER as any)[weaponType][newValue]['import']);\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\n                break;\n            case '1':\n            case '2':\n                if (newValue == 'NONE') {\n                    newValue = '';  // \n                } else {\n                    myBasename = basename(ARTIFACT_SET_MASTER[newValue as TArtifactSetKey]['image']);\n                    newValue = myBasename.split('_')[myBasename.split('_').length - 1];\n                }\n                break;\n            case '1':\n            case '2':\n            case '3':\n            case '4':\n            case '5':\n                if (newValue) {\n                    newValue = newValue.split('_')[0] + '_' + ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue.split('_')[1]);\n                }\n                break;\n            case '1':\n            case '2':\n            case '3':\n                if (newValue) {\n                    newValue = ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue);\n                }\n                break;\n        }\n        sharedataArr.push(newValue);\n    });\n    Object.keys(savedata).forEach(key => {\n        if (!PROPERTY_MAP.has(key)) {\n            sharedataArr.push(key + '=' + savedata[key]);\n        }\n    });\n\n    return sharedataArr.join(',');\n}\n\nfunction openTwitter(text: string, url: string, opt_hashtags?: string, opt_via?: string) {\n    const baseUrl = 'https://twitter.com/intent/tweet?';\n    const params = new URLSearchParams();\n    params.append('text', text);\n    params.append('url', url);\n    if (opt_hashtags) {\n        params.append('hashtags', opt_hashtags);\n    }\n    if (opt_via) {\n        params.append('via', opt_via);\n    }\n    const query = params.toString();\n    const shareUrl = `${baseUrl}${query}`;\n    console.log(params);\n    console.log(shareUrl);\n    window.open(shareUrl);\n}\n\nexport function shareByTwitter(\n    characterInput: TCharacterInput,\n    artifactDetailInput: TArtifactDetailInput,\n    conditionInput: TConditionInput\n) {\n    const savedata = makeSavedata(characterInput, artifactDetailInput, conditionInput);\n    const sharedata = makeSharedata(savedata);\n\n    const text = characterInput.buildname;\n    const encoded = encodeURI(sharedata);\n    const url = 'https://asagume.github.io/gencalc/' + '?allin=' + encoded;\n\n    openTwitter(text, url);\n}\n\nexport function getMaxConstellation(characterMaster: TCharacterDetail) {\n    let max = 0;\n    if ('' in characterMaster) {\n        max = Object.keys(characterMaster.).length;\n    }\n    return max;\n}\n\nexport function getMaxTalentLevel(characterMaster: TCharacterDetail, key: string) {\n    let max = 10;\n    if (key in characterMaster) {\n        const talentObj = (characterMaster as any)[key];\n        if (\"\" in talentObj) {\n            for (const detailObj of talentObj.) {\n                if (\"\" in detailObj && _.isPlainObject(detailObj.)) {\n                    const work = Object.keys(detailObj.).length;\n                    if (max < work) max = work;\n                }\n            }\n        }\n    }\n    return max;\n}\n\nexport function pushBuildinfoToSession(character: TCharacterKey | string, buildname?: string, builddata?: any, teammembers?: string[]) {\n    sessionStorage.setItem('character', character);\n    if (buildname) {\n        sessionStorage.setItem('buildname', buildname);\n    }\n    if (builddata) {\n        sessionStorage.setItem('builddata', JSON.stringify(builddata));\n    }\n    if (teammembers) {\n        sessionStorage.setItem('teammembers', JSON.stringify(teammembers));\n    }\n}\n\nexport function popBuildinfoFromSession() {\n    const result: [string | undefined, string | undefined, TAnyObject | undefined, string[] | undefined] = [undefined, undefined, undefined, undefined];\n    const character = sessionStorage.getItem('character');\n    if (character) {\n        result[0] = character;\n        const buildname = sessionStorage.getItem('buildname');\n        if (buildname) {\n            result[1] = buildname;\n        }\n        const builddata = sessionStorage.getItem('builddata');\n        if (builddata) {\n            result[2] = JSON.parse(builddata);\n        }\n        const teammembers = sessionStorage.getItem('teammembers');\n        if (teammembers) {\n            result[3] = JSON.parse(teammembers);\n        }\n        console.log(character, buildname, builddata, teammembers);\n    }\n    sessionStorage.removeItem('character');\n    sessionStorage.removeItem('builddata');\n    sessionStorage.removeItem('buildname');\n    sessionStorage.removeItem('teammembers');\n    return result;\n}\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-fe60a4d2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"artifact\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"artifact\"\n}\nconst _hoisted_3 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_4 = { class: \"control\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_7 = { class: \"with-tooltip\" }\nconst _hoisted_8 = [\"src\", \"alt\"]\nconst _hoisted_9 = { class: \"tooltip\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"edit-mainstat\"\n}\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = [\"step\"]\nconst _hoisted_13 = {\n  key: 1,\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_14 = { key: 2 }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"5\" }, \" 5 \", -1))\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"4\" }, \" 4 \", -1))\nconst _hoisted_17 = [\n  _hoisted_15,\n  _hoisted_16\n]\nconst _hoisted_18 = { key: 3 }\nconst _hoisted_19 = { style: {\"width\":\"55%\"} }\nconst _hoisted_20 = { class: \"artifact-substat\" }\nconst _hoisted_21 = { class: \"right\" }\nconst _hoisted_22 = [\"onUpdate:modelValue\"]\nconst _hoisted_23 = [\"value\", \"disabled\"]\nconst _hoisted_24 = { class: \"right\" }\nconst _hoisted_25 = [\"onUpdate:modelValue\", \"step\"]\nconst _hoisted_26 = { key: 1 }\nconst _hoisted_27 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_28 = {\n  key: 0,\n  class: \"score\"\n}\nconst _hoisted_29 = { class: \"control\" }\nconst _hoisted_30 = {\n  key: 0,\n  type: \"button\"\n}\nconst _hoisted_31 = {\n  key: 0,\n  class: \"material-symbols-outlined\",\n  style: {\"color\":\"yellow\"}\n}\nconst _hoisted_32 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_33 = { class: \"with-tooltip\" }\nconst _hoisted_34 = [\"src\", \"alt\"]\nconst _hoisted_35 = { class: \"tooltip\" }\nconst _hoisted_36 = {\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_37 = { style: {\"width\":\"55%\"} }\nconst _hoisted_38 = { class: \"artifact-substat\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ArtifactSetSelect = _resolveComponent(\"ArtifactSetSelect\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_ctx.control == 'editable')\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_2, [\n          _createElementVNode(\"tr\", null, [\n            _createElementVNode(\"td\", _hoisted_3, [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createElementVNode(\"button\", {\n                  type: \"button\",\n                  onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.isEditing = !_ctx.isEditing))\n                }, [\n                  (_ctx.isEditing)\n                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \" edit_off \"))\n                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \" edit \"))\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_7, [\n                _createElementVNode(\"img\", {\n                  class: \"artifact-icon\",\n                  src: _ctx.artifactImgSrc,\n                  alt: _ctx.displayName(_ctx.copiedArtifact.name),\n                  onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.artifactIconOnClick()))\n                }, null, 8, _hoisted_8),\n                _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n              ]),\n              (_ctx.isEditing)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                    _withDirectives(_createElementVNode(\"select\", {\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.copiedArtifact.mainStat) = $event)),\n                      onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                    }, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.mainStatOptions, (option) => {\n                        return (_openBlock(), _createElementBlock(\"option\", {\n                          key: option,\n                          value: option\n                        }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_11))\n                      }), 128))\n                    ], 544), [\n                      [_vModelSelect, _ctx.copiedArtifact.mainStat]\n                    ]),\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"number\",\n                      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.copiedArtifact.mainStatValue) = $event)),\n                      step: _ctx.statStep(_ctx.copiedArtifact.mainStat),\n                      min: \"0\",\n                      onChange: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                    }, null, 40, _hoisted_12), [\n                      [_vModelText, _ctx.copiedArtifact.mainStatValue]\n                    ])\n                  ]))\n                : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' + _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                _ctx.copiedArtifact.mainStatValue)), 1)),\n              (_ctx.isEditing)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                    _withDirectives(_createElementVNode(\"select\", {\n                      class: \"star\",\n                      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.copiedArtifact.rarity) = $event)),\n                      onChange: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.starOnChange && _ctx.starOnChange(...args)))\n                    }, _hoisted_17, 544), [\n                      [_vModelSelect, _ctx.copiedArtifact.rarity]\n                    ])\n                  ]))\n                : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                      return (_openBlock(), _createElementBlock(\"img\", {\n                        class: \"star\",\n                        src: \"images/star.png\",\n                        key: dummy\n                      }))\n                    }), 128))\n                  ]))\n            ]),\n            _createElementVNode(\"td\", _hoisted_19, [\n              _createElementVNode(\"table\", _hoisted_20, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                  return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                    (_ctx.isEditing)\n                      ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                          _createElementVNode(\"td\", _hoisted_21, [\n                            _withDirectives(_createElementVNode(\"select\", {\n                              \"onUpdate:modelValue\": ($event: any) => ((subStat.name) = $event),\n                              onChange: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                            }, [\n                              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.subStatOptions, (option) => {\n                                return (_openBlock(), _createElementBlock(\"option\", {\n                                  key: option,\n                                  value: option,\n                                  disabled: _ctx.subStatOptionDisabled(option, subStat.name)\n                                }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_23))\n                              }), 128))\n                            ], 40, _hoisted_22), [\n                              [_vModelSelect, subStat.name]\n                            ])\n                          ]),\n                          _createElementVNode(\"td\", _hoisted_24, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                              type: \"number\",\n                              \"onUpdate:modelValue\": ($event: any) => ((subStat.value) = $event),\n                              step: _ctx.statStep(subStat.name),\n                              min: \"0\",\n                              onChange: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                            }, null, 40, _hoisted_25), [\n                              [_vModelText, subStat.value]\n                            ])\n                          ])\n                        ], 64))\n                      : (_openBlock(), _createElementBlock(\"td\", _hoisted_26, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1))\n                  ]))\n                }), 128))\n              ])\n            ])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"table\", {\n          key: 1,\n          class: \"artifact\",\n          onClick: _cache[10] || (_cache[10] = ($event: any) => (_ctx.selectOnClick()))\n        }, [\n          _createElementVNode(\"tr\", null, [\n            _createElementVNode(\"td\", _hoisted_27, [\n              (_ctx.score)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, _toDisplayString(Math.round(_ctx.score * 10) / 10), 1))\n                : _createCommentVNode(\"\", true),\n              _createElementVNode(\"div\", _hoisted_29, [\n                (_ctx.control == 'selectable')\n                  ? (_openBlock(), _createElementBlock(\"button\", _hoisted_30, [\n                      (_ctx.selected)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_31, \" select_check_box \"))\n                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_32, \" check_box_outline_blank \"))\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _createElementVNode(\"div\", _hoisted_33, [\n                _createElementVNode(\"img\", {\n                  class: \"artifact-icon\",\n                  src: _ctx.artifactImgSrc,\n                  alt: _ctx.displayName(_ctx.copiedArtifact.name)\n                }, null, 8, _hoisted_34),\n                _createElementVNode(\"div\", _hoisted_35, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n              ]),\n              _createElementVNode(\"div\", _hoisted_36, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' + _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                _ctx.copiedArtifact.mainStatValue)), 1),\n              _createElementVNode(\"div\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                  return (_openBlock(), _createElementBlock(\"img\", {\n                    class: \"star\",\n                    src: \"images/star.png\",\n                    key: dummy\n                  }))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"td\", _hoisted_37, [\n              _createElementVNode(\"table\", _hoisted_38, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                  return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                    _createElementVNode(\"td\", null, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1)\n                  ]))\n                }), 128))\n              ])\n            ])\n          ])\n        ])),\n    _withDirectives(_createElementVNode(\"div\", null, [\n      _createVNode(_component_ArtifactSetSelect, {\n        visible: true,\n        index: 1,\n        \"artifact-set\": _ctx.artifact.setname,\n        \"artifact-set-masters\": _ctx.artifactSetMasters,\n        cat_id: _ctx.artifact.cat_id,\n        \"onUpdate:artifactSet\": _ctx.updateArtifactSet\n      }, null, 8, [\"artifact-set\", \"artifact-set-masters\", \"cat_id\", \"onUpdate:artifactSet\"])\n    ], 512), [\n      [_vShow, _ctx.isListShow]\n    ])\n  ]))\n}","\r\nimport _ from 'lodash';\r\nimport { overwriteObject } from \"@/common\";\r\nimport { ARTIFACT_SET_MASTER_DUMMY, TArtifact, ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY } from \"@/input\";\r\nimport { ARTIFACT_SET_MASTER, TArtifactSetEntry, TArtifactSetKey, getArtifactIconUrl } from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\nimport ArtifactSetSelect from \"./ArtifactSetSelect.vue\";\r\n\r\nexport default defineComponent({\r\n  name: 'ArtifactItem',\r\n  props: {\r\n    artifact: { type: Object as PropType<TArtifact>, required: true },\r\n    id: { type: Number },\r\n    control: String,\r\n    initial: Boolean,\r\n    selected: Boolean,\r\n    score: Number,\r\n  },\r\n  components: {\r\n    ArtifactSetSelect,\r\n  },\r\n  emits: ['update:artifact', 'select:artifact'],\r\n  setup(props, context) {\r\n    const { displayName, displayStatValue, percent } = CompositionFunction();\r\n\r\n    const copiedArtifact = reactive(_.cloneDeep(props.artifact));\r\n    const artifactSetMasters = reactive([ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[]);\r\n    const isEditing = ref(false);\r\n    const isSelected = ref(false);\r\n    const isListShow = ref(false);\r\n\r\n    const artifactImgSrc = computed(() => {\r\n      return getArtifactIconUrl(copiedArtifact.setname, copiedArtifact.cat_id);\r\n    });\r\n\r\n    const MAINSTAT_CAT_ARR = {\r\n      '1': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '2': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '3': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '4': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '5': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n    };\r\n\r\n    const mainStatOptions = computed(() => {\r\n      return (MAINSTAT_CAT_ARR as any)[copiedArtifact.cat_id];\r\n    });\r\n\r\n    const subStatOptions = computed(() => {\r\n      return ARRAY;\r\n    });\r\n\r\n    const statStep = (stat: string) => {\r\n      return percent(stat) ? 0.1 : 1;\r\n    };\r\n\r\n    const subStatOptionDisabled = ((value: string, selected: string) => {\r\n      if (value == selected) return false;\r\n      const work = copiedArtifact.subStats.map(s => s.name);\r\n      return work.includes(value);\r\n    });\r\n\r\n    const onChange = () => {\r\n      context.emit('update:artifact', props.id, copiedArtifact);\r\n    };\r\n\r\n    const starOnChange = () => {\r\n      copiedArtifact.rarity = Number(copiedArtifact.rarity);\r\n    }\r\n\r\n    const artifactIconOnClick = () => {\r\n      if (isEditing.value) {\r\n        isListShow.value = !isListShow.value;\r\n      } else {\r\n        isListShow.value = false;\r\n      }\r\n    };\r\n\r\n    const selectOnClick = () => {\r\n      if (props.control === 'selectable') {\r\n        context.emit('select:artifact', props.id);\r\n      }\r\n    };\r\n\r\n    const updateArtifactSet = (artifactSet: TArtifactSetKey) => {\r\n      copiedArtifact.setname = artifactSet;\r\n      const master = ARTIFACT_SET_MASTER[artifactSet];\r\n      copiedArtifact.rarity = master.;\r\n      if ('artifact_list' in master) {\r\n        copiedArtifact.name = master.artifact_list[copiedArtifact.cat_id - 1];\r\n      }\r\n      isListShow.value = false;\r\n      onChange();\r\n    };\r\n\r\n    function onLoad() {\r\n      if (props.initial !== undefined) {\r\n        if (props.control === 'editable') {\r\n          isEditing.value = props.initial;\r\n        } else if (props.control === 'selectable') {\r\n          isSelected.value = props.initial;\r\n        }\r\n      }\r\n    }\r\n    onLoad();\r\n\r\n    watch(props, (newVal, oldVal) => {\r\n      overwriteObject(copiedArtifact, newVal.artifact);\r\n      if (newVal.initial != oldVal.initial) {\r\n        onLoad();\r\n      }\r\n    });\r\n\r\n    return {\r\n      displayName, displayStatValue,\r\n\r\n      copiedArtifact,\r\n      artifactSetMasters,\r\n      isEditing,\r\n      isSelected,\r\n      isListShow,\r\n\r\n      artifactImgSrc,\r\n      mainStatOptions,\r\n      subStatOptions,\r\n      subStatOptionDisabled,\r\n      statStep,\r\n\r\n      onChange,\r\n      starOnChange,\r\n      artifactIconOnClick,\r\n      updateArtifactSet,\r\n      selectOnClick,\r\n    }\r\n  }\r\n});\r\n","import { render } from \"./ArtifactItem.vue?vue&type=template&id=fe60a4d2&scoped=true&ts=true\"\nimport script from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactItem.vue?vue&type=style&index=0&id=fe60a4d2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fe60a4d2\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-91b28a50\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"title\" }\nconst _hoisted_3 = { class: \"description\" }\nconst _hoisted_4 = { class: \"select-list\" }\nconst _hoisted_5 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_6 = { class: \"tooltip\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"table\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.artifactSetEffects, (item) => {\n            return (_openBlock(), _createElementBlock(_Fragment, { key: item }, [\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"th\", _hoisted_2, _toDisplayString(_ctx.displayName(item.key)), 1)\n              ]),\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_3, _toDisplayString(item.value), 1)\n              ])\n            ], 64))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('artifact-set' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: _ctx.getArtifactIconUrl(item.key, _ctx.cat_id),\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.$emit('update:artifact-set', item.key))\n              }, null, 10, _hoisted_5),\n              _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.displayName(item.key)), 1)\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","\r\nimport {\r\n  ARTIFACT_SET_MASTER_LIST,\r\n  getArtifactIconUrl,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n  TArtifactSetEntry,\r\n} from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive } from \"vue\";\r\nimport CompositionFunction from './CompositionFunction.vue';\r\n\r\nexport default defineComponent({\r\n  name: \"ArtifactSetSelect\",\r\n  props: {\r\n    visible: { type: Boolean, required: true },\r\n    index: { type: Number, required: true },\r\n    artifactSet: { type: String, required: true },\r\n    artifactSetMasters: { type: Array as PropType<TArtifactSetEntry[]>, required: true },\r\n    cat_id: { type: Number },\r\n  },\r\n  emits: [\"update:artifact-set\"],\r\n  setup(props) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const bgImageClass = (item: TArtifactSetEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TArtifactSetEntry) => {\r\n      return item.key == props.artifactSet ? \" selected\" : \"\";\r\n    };\r\n    const artifactSetMastersRea = reactive(props.artifactSetMasters);\r\n\r\n    const filteredList = computed(() => {\r\n      return ARTIFACT_SET_MASTER_LIST as TArtifactSetEntry[];\r\n    });\r\n\r\n    const artifactSetEffects = computed(() => {\r\n      const result = [] as any;\r\n      if (artifactSetMastersRea.length > 0) {\r\n        if (\"2\" in artifactSetMastersRea[0]) {\r\n          result.push({\r\n            key: artifactSetMastersRea[0].key + \" \" + \"2\",\r\n            value: artifactSetMastersRea[0][\"2\"]?.,\r\n          });\r\n        }\r\n        if (artifactSetMastersRea.length > 1) {\r\n          if (artifactSetMastersRea[0].key == artifactSetMastersRea[1].key) {\r\n            if (\"4\" in artifactSetMastersRea[0]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[0].key + \" \" + \"4\",\r\n                value: artifactSetMastersRea[0][\"4\"]?.,\r\n              });\r\n            }\r\n          } else {\r\n            if (\"2\" in artifactSetMastersRea[1]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[1].key + \" \" + \"2\",\r\n                value: artifactSetMastersRea[1][\"2\"]?.,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    return {\r\n      displayName,\r\n      getArtifactIconUrl,\r\n\r\n      bgImageClass,\r\n      selectedClass,\r\n      filteredList,\r\n      artifactSetEffects,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./ArtifactSetSelect.vue?vue&type=template&id=91b28a50&scoped=true&ts=true\"\nimport script from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactSetSelect.vue?vue&type=style&index=0&id=91b28a50&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-91b28a50\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, vShow as _vShow, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6b0e72ca\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"select-list\" }\nconst _hoisted_3 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_4 = [\"src\", \"alt\"]\nconst _hoisted_5 = { class: \"select-list\" }\nconst _hoisted_6 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = { class: \"select-list\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"ul\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.elementList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.elementCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.elementCheckList))\n                }, null, 40, _hoisted_3), [\n                  [_vModelCheckbox, _ctx.elementCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.elementSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_4)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.weaponList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.weaponCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.weaponCheckList))\n                }, null, 40, _hoisted_6), [\n                  [_vModelCheckbox, _ctx.weaponCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.weaponSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_7)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('character' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: item.icon_url,\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.characterOnClick(item.key))\n              }, null, 10, _hoisted_9),\n              _createElementVNode(\"div\", _hoisted_10, _toDisplayString(_ctx.displayName(item.key)), 1),\n              _createElementVNode(\"img\", {\n                class: \"vision\",\n                src: _ctx.visionSrc(item),\n                alt: item.\n              }, null, 8, _hoisted_11),\n              _withDirectives(_createElementVNode(\"div\", { class: \"selection-number\" }, _toDisplayString(_ctx.selectionNumber(item.key)), 513), [\n                [_vShow, _ctx.selectionNumber(item.key)]\n              ])\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","\r\nimport {\r\n  TCharacterEntry,\r\n  ELEMENT_IMG_SRC,\r\n  TVisionKey,\r\n  WEAPON_IMG_SRC,\r\n  TWeaponTypeKey,\r\n  CHARACTER_MASTER_LIST,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n} from \"@/master\";\r\nimport { defineComponent, reactive, computed, PropType } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\n\r\ninterface ICheckList {\r\n  [key: string]: boolean;\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"CharacterSelect\",\r\n  props: {\r\n    character: { type: String },\r\n    characters: { type: Array as PropType<string[]> },\r\n    visible: { type: Boolean, required: true },\r\n  },\r\n  emits: [\"update:character\", \"update:characters\"],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const visionSrc = (item: TCharacterEntry) => ELEMENT_IMG_SRC[item.];\r\n    const bgImageClass = (item: TCharacterEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TCharacterEntry) => {\r\n      if (props.character && props.character == item.key) {\r\n        return \" selected\";\r\n      }\r\n      if (props.characters && props.characters.includes(item.key)) {\r\n        return \" selected\";\r\n      }\r\n      return \"\";\r\n    };\r\n\r\n    const elementList = Object.keys(ELEMENT_IMG_SRC) as TVisionKey[];\r\n    const elementSrc = (element: TVisionKey) => ELEMENT_IMG_SRC[element] as string;\r\n    const elementCheckList = reactive({}) as ICheckList;\r\n    for (let key of elementList) {\r\n      elementCheckList[key] = false;\r\n    }\r\n\r\n    const weaponList = Object.keys(WEAPON_IMG_SRC) as TWeaponTypeKey[];\r\n    const weaponSrc = (weapon: TWeaponTypeKey) => WEAPON_IMG_SRC[weapon] as string;\r\n    const weaponCheckList = reactive({}) as ICheckList;\r\n    for (let key of weaponList) {\r\n      weaponCheckList[key] = false;\r\n    }\r\n\r\n    const checkListOnChange = function (item: string, checkList: ICheckList) {\r\n      if (!checkList[item]) return;\r\n      Object.keys(checkList)\r\n        .filter((s) => s != item)\r\n        .forEach((key) => {\r\n          checkList[key] = false;\r\n        });\r\n    };\r\n\r\n    const filteredList = computed(() => {\r\n      const result = [];\r\n      const elementChecked =\r\n        Object.keys(elementCheckList).filter((s) => elementCheckList[s]).length > 0;\r\n      const weaponChecked =\r\n        Object.keys(weaponCheckList).filter((s) => weaponCheckList[s]).length > 0;\r\n      for (let entry of CHARACTER_MASTER_LIST as TCharacterEntry[]) {\r\n        if (elementChecked && !elementCheckList[entry.]) continue;\r\n        if (weaponChecked && !weaponCheckList[entry.]) continue;\r\n        result.push(entry);\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const selectionNumber = (character: string) => {\r\n      let result = \"\";\r\n      if (props.characters) {\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          result = String(index + 1);\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const characterOnClick = (character: string) => {\r\n      if (props.character) {\r\n        context.emit(\"update:character\", character);\r\n      }\r\n      if (props.characters) {\r\n        const characters: string[] = props.characters.map((s) => s);\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          characters[index] = \"\";\r\n        } else {\r\n          const blankIndex = props.characters.indexOf(\"\");\r\n          if (blankIndex != -1) {\r\n            characters[blankIndex] = character;\r\n          }\r\n        }\r\n        context.emit(\"update:characters\", characters);\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      visionSrc,\r\n      bgImageClass,\r\n      selectedClass,\r\n      elementList,\r\n      elementSrc,\r\n      elementCheckList,\r\n      weaponList,\r\n      weaponSrc,\r\n      weaponCheckList,\r\n      checkListOnChange,\r\n      filteredList,\r\n\r\n      selectionNumber,\r\n      characterOnClick,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./CharacterSelect.vue?vue&type=template&id=6b0e72ca&scoped=true&ts=true\"\nimport script from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./CharacterSelect.vue?vue&type=style&index=0&id=6b0e72ca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b0e72ca\"]])\n\nexport default __exports__","\r\nimport i18n from \"@/i18n\";\r\nimport { STAT_PERCENT_LIST } from \"@/input\";\r\nimport { nextTick } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\n\r\nexport default function CompositionFunction() {\r\n    const { t, te } = useI18n({\r\n        useScope: \"global\",\r\n    });\r\n\r\n    const localeList = [\r\n        { name: \"\", value: \"ja-jp\" },\r\n        { name: \"English\", value: \"en-us\" },\r\n        { name: \"\", value: \"zh-cn\" },\r\n        { name: \"\", value: \"zh-tw\" },\r\n        { name: \"\", value: \"ko-kr\" },\r\n        { name: \"Deutsch\", value: \"de-de\" },\r\n        { name: \"Espaol\", value: \"es-es\" },\r\n        { name: \"Franais\", value: \"fr-fr\" },\r\n        { name: \"Indonesia\", value: \"id-id\" },\r\n        { name: \"Portugus\", value: \"pt-pt\" },\r\n        { name: \"P\", value: \"ru-ru\" },\r\n        { name: '', value: 'th-th' },\r\n        { name: \"Ting Vit\", value: \"vi-vn\" },\r\n    ];\r\n\r\n    const setI18nLanguage = function (locale: string) {\r\n        i18n.global.locale.value = locale;\r\n        loadLocaleMessages(locale);\r\n        document.querySelector('html')?.setAttribute('lang', locale)\r\n    }\r\n\r\n    const loadLocaleMessages = async function (locale: string) {\r\n        if (locale != 'ja-jp') {\r\n            const messages = await fetch(`./locales/${locale}.json`).then(resp => resp.json());\r\n            i18n.global.setLocaleMessage(locale, messages);\r\n        }\r\n        return nextTick();\r\n    }\r\n\r\n    const displayName = function (key: any): string {\r\n        if (!key) return key;\r\n        if (i18n.global.locale.value === 'ja-jp') { // translate\r\n            let result = String(key);\r\n            if (['', '', '', ''].includes(result)) {\r\n                return result;\r\n            }\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace('', '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/^/, '');\r\n            return result;\r\n        }\r\n        if (te(key)) return t(key);\r\n        const re = new RegExp('(.*?)([\\\\s_\\\\(\\\\)/]+)(.*)');\r\n        let result = '';\r\n        let work = key;\r\n        while (work) {\r\n            const reRet = re.exec(work);\r\n            if (!reRet) {\r\n                result += t(work);\r\n                break;\r\n            }\r\n            if (reRet[1]) result += t(reRet[1]);\r\n            result += reRet[2];\r\n            work = reRet[3];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const percent = function (stat: string) {\r\n        const tempArr = stat.split('.');\r\n        let work = tempArr[0].replace(/V[1-3]$/, '');\r\n        let hasPercent = work.endsWith(\"%\") || STAT_PERCENT_LIST.includes(work);\r\n        if (!hasPercent) {\r\n            ['', '', '', ''].forEach(postfix => {\r\n                if (work.endsWith(postfix)) hasPercent = true;\r\n            })\r\n        }\r\n        return hasPercent ? '%' : '';\r\n    }\r\n\r\n    const displayStatName = function (stat: string) {\r\n        let result = stat.replace(/V[1-3]$/, '');\r\n        const tempArr = result.split('.');\r\n        if (tempArr.length == 1) {\r\n            result = displayName(result);\r\n            result = result.replace('', '')\r\n        } else if (i18n.global.locale.value === 'ja-jp') {\r\n            result = tempArr[tempArr.length - 1] + '' + displayName(tempArr[0]);\r\n        } else {\r\n            result = displayName(tempArr[tempArr.length - 1]) + ' ' + displayName(tempArr[0]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const displayStatValue = function (stat: string, value: number, opt_s?: number): string {\r\n        const myPercent = percent(stat);\r\n        let p = myPercent ? 10 : 1;\r\n        if (opt_s) p = Math.pow(10, opt_s);\r\n        return String(Math.round(value * p) / p) + myPercent;\r\n    }\r\n\r\n    const displayStatAbbrev = function (stat: string) {\r\n        let result = stat;\r\n        const tempArr = stat.split('.');\r\n        if (tempArr.length == 1) {\r\n            stat = stat.replace(/V\\d$/, '');\r\n            stat = stat.replace(/TOP$/, '');\r\n            if (stat.startsWith('')) stat = stat.replace(/^/, '');\r\n            if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            result = displayName(stat);\r\n        } else {\r\n            result = displayStatName(stat);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /** $event.target.valuetypescript */\r\n    const targetValue = function (event: Event) {\r\n        if (event.target instanceof HTMLInputElement) return event.target.value;\r\n        if (event.target instanceof HTMLSelectElement) return event.target.value;\r\n        return undefined;\r\n    }\r\n\r\n    const displayOptionName = function (name: string) {\r\n        return displayName(name.replace(/^required_/, \"\"));\r\n    }\r\n\r\n    return {\r\n        localeList,\r\n        setI18nLanguage,\r\n        loadLocaleMessages,\r\n        displayName,\r\n        displayStatName,\r\n        displayStatValue,\r\n        displayStatAbbrev,\r\n        targetValue,\r\n        displayOptionName,\r\n        percent,\r\n    }\r\n}\r\n","import script from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\nexport * from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"member\" }\nconst _hoisted_2 = { class: \"with-tooltip\" }\nconst _hoisted_3 = [\"src\", \"alt\"]\nconst _hoisted_4 = { class: \"tooltip\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = {\n  key: 0,\n  class: \"tag tag-3\"\n}\nconst _hoisted_7 = {\n  key: 1,\n  class: \"tag tag-2\"\n}\nconst _hoisted_8 = {\n  key: 2,\n  class: \"tag tag-1\"\n}\nconst _hoisted_9 = {\n  key: 3,\n  class: \"tag tag-0\"\n}\nconst _hoisted_10 = [\"src\", \"alt\"]\nconst _hoisted_11 = [\"src\", \"alt\"]\nconst _hoisted_12 = {\n  key: 0,\n  class: \"stat-value\"\n}\nconst _hoisted_13 = { key: 1 }\nconst _hoisted_14 = [\"src\"]\nconst _hoisted_15 = [\"src\"]\nconst _hoisted_16 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"member-img\",\n      onDblclick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.characterOnDblclick && _ctx.characterOnDblclick(...args)))\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"img\", {\n          class: _normalizeClass('character' + _ctx.characterImgClass),\n          src: _ctx.characterImgSrc,\n          alt: _ctx.displayName(_ctx.member.name)\n        }, null, 10, _hoisted_3),\n        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.displayName(_ctx.member.name)), 1)\n      ]),\n      _createElementVNode(\"img\", {\n        class: \"vision\",\n        src: _ctx.visionImgSrc,\n        alt: \"vision\"\n      }, null, 8, _hoisted_5),\n      _withDirectives(_createElementVNode(\"div\", { class: \"constellation\" }, _toDisplayString(_ctx.constellation), 513), [\n        [_vShow, _ctx.constellation]\n      ]),\n      (_ctx.member.tags[3])\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString(_ctx.member.tags[3]), 1))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[2])\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _toDisplayString(_ctx.member.tags[2]), 1))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[1])\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString(_ctx.member.tags[1]), 1))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[0])\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString(_ctx.member.tags[0]), 1))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[0])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 4,\n            class: \"replacement replacement-0\",\n            src: _ctx.replaceImgSrc(0),\n            alt: _ctx.member.replacements[0]\n          }, null, 8, _hoisted_10))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[1])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 5,\n            class: \"replacement replacement-1\",\n            src: _ctx.replaceImgSrc(1),\n            alt: _ctx.member.replacements[1]\n          }, null, 8, _hoisted_11))\n        : _createCommentVNode(\"\", true)\n    ], 32),\n    (_ctx.displayStat)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _toDisplayString(_ctx.statValue), 1))\n      : _createCommentVNode(\"\", true),\n    (_ctx.showEquipment)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n          _createElementVNode(\"img\", {\n            class: \"weapon\",\n            src: _ctx.imgWeaponSrc,\n            alt: \"weapon\"\n          }, null, 8, _hoisted_14),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(0),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_15),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(1),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_16)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport {\r\n  pushBuildinfoToSession,\r\n  TStats,\r\n} from \"@/input\";\r\nimport {\r\n  ARTIFACT_SET_MASTER,\r\n  CHARACTER_MASTER,\r\n  ELEMENT_IMG_SRC,\r\n  IMG_SRC_DUMMY,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n  TArtifactSetEntry,\r\n  TCharacterEntry,\r\n  TCharacterKey,\r\n  TWeaponEntry,\r\n  WEAPON_MASTER,\r\n} from \"@/master\";\r\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\r\nimport {\r\n  getBuilddataFromStorage,\r\n  TMember,\r\n} from \"./team\";\r\n\r\nexport default defineComponent({\r\n  name: \"MemberItem\",\r\n  props: {\r\n    member: { type: Object as PropType<TMember>, required: true },\r\n    statsObj: { type: Object as PropType<TStats> },\r\n    displayStat: { type: String },\r\n    showEquipment: { type: Boolean },\r\n    viewable: { type: Boolean },\r\n    tags: { type: Array as PropType<any[]> },\r\n    members: { type: Array as PropType<string[]> },\r\n    elementalResonance: { type: Array as PropType<string[]> },\r\n  },\r\n  emits: [\"click:character\", \"change:buildname\"],\r\n  setup(props) {\r\n    const { displayName, displayStatValue } = CompositionFunction();\r\n\r\n    const extraControl = ref(\"locate\");\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, () => {\r\n      watchCount.value++;\r\n    });\r\n\r\n    const characterMaster = computed(() =>\r\n      props.member.name\r\n        ? (CHARACTER_MASTER[props.member.name as TCharacterKey] as TCharacterEntry) ??\r\n        undefined\r\n        : undefined\r\n    );\r\n    const characterImgSrc = computed(\r\n      () => characterMaster.value?.icon_url ?? IMG_SRC_DUMMY\r\n    );\r\n    const characterImgClass = computed(() => {\r\n      const rarity = characterMaster.value?.;\r\n      return rarity ? \" \" + (STAR_BACKGROUND_IMAGE_CLASS as any)[String(rarity)] : \"\";\r\n    });\r\n    const visionImgSrc = computed(() =>\r\n      characterMaster.value?.\r\n        ? (ELEMENT_IMG_SRC as any)[characterMaster.value.]\r\n        : IMG_SRC_DUMMY\r\n    );\r\n    const constellation = computed(() => (builddata.value ? builddata.value. : \"\"));\r\n\r\n    const replaceImgSrc = (replIndex: number) => {\r\n      const name = replIndex < props.member.replacements.length ? props.member.replacements[replIndex] : undefined;\r\n      return name ? (CHARACTER_MASTER[name as TCharacterKey] as TCharacterEntry).icon_url : IMG_SRC_DUMMY;\r\n    };\r\n\r\n    const builddata = computed(() => {\r\n      let result = undefined;\r\n      const character = props.member.name;\r\n      if (character && props.member.buildname) {\r\n        result = getBuilddataFromStorage(character, props.member.buildname);\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const weaponMaster = computed((): TWeaponEntry => {\r\n      let result = undefined;\r\n      if (builddata.value) {\r\n        const weapon = builddata.value.;\r\n        if (weapon && characterMaster.value) {\r\n          result = (WEAPON_MASTER as any)[characterMaster.value.][weapon];\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const imgWeaponSrc = computed(() =>\r\n      weaponMaster.value ? weaponMaster.value.icon_url : IMG_SRC_DUMMY\r\n    );\r\n    const weaponName = computed(() =>\r\n      weaponMaster.value ? weaponMaster.value.key : ''\r\n    );\r\n\r\n    const artifactSetMasters = computed((): TArtifactSetEntry[] => {\r\n      const result: TArtifactSetEntry[] = [];\r\n      if (builddata.value) {\r\n        for (let i = 0; i < 2; i++) {\r\n          const key = \"\" + (i + 1);\r\n          let value = builddata.value[key] ?? \"NONE\";\r\n          result.push((ARTIFACT_SET_MASTER as any)[value]);\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const imgArtifactSetSrc = (index: number) =>\r\n      artifactSetMasters.value[index]?.image ?? IMG_SRC_DUMMY;\r\n    const artifactSetName = (index: number) =>\r\n      artifactSetMasters.value[index]?.key ?? '';\r\n\r\n    const statValue = computed(() => {\r\n      watchCount.value;\r\n      let result = \"-\";\r\n      if (builddata.value) {\r\n        let stat = props.displayStat;\r\n        if (props.statsObj && stat) {\r\n          if (stat === \"/\") {\r\n            result = displayStatValue(\"\", props.statsObj[\"\"]);\r\n            result += \"/\";\r\n            result += displayStatValue(\"\", props.statsObj[\"\"]);\r\n          } else {\r\n            result = displayStatValue(stat, props.statsObj[stat]);\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const characterOnDblclick = () => {\r\n      if (props.viewable) {\r\n        locate();\r\n      }\r\n    };\r\n\r\n    const locate = () => {\r\n      const member = props.member;\r\n      if (member?.name) {\r\n        if (confirm('' + member.name + '')) {\r\n          const teammembers = props.members?.filter(s => s != member.name);\r\n          pushBuildinfoToSession(member.name, member.buildname, undefined, teammembers);\r\n          window.open(\"./\", \"_blank\");\r\n        }\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      characterImgSrc,\r\n      characterImgClass,\r\n      visionImgSrc,\r\n      constellation,\r\n      replaceImgSrc,\r\n      imgWeaponSrc,\r\n      weaponName,\r\n      imgArtifactSetSrc,\r\n      artifactSetName,\r\n\r\n      statValue,\r\n      extraControl,\r\n\r\n      characterOnDblclick,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./MemberItem.vue?vue&type=template&id=7a4727d4&ts=true\"\nimport script from \"./MemberItem.vue?vue&type=script&lang=ts\"\nexport * from \"./MemberItem.vue?vue&type=script&lang=ts\"\n\nimport \"./MemberItem.vue?vue&type=style&index=0&id=7a4727d4&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"title\" }\nconst _hoisted_2 = { class: \"name\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"handle\" }, \"\", -1)\nconst _hoisted_4 = { class: \"elemental-resonance\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = { class: \"members\" }\nconst _hoisted_7 = { class: \"res\" }\nconst _hoisted_8 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_9 = { class: \"description\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MemberItem = _resolveComponent(\"MemberItem\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass('team' + _ctx.selectedClass)\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"label\", _hoisted_2, [\n        _hoisted_3,\n        _createElementVNode(\"span\", null, _toDisplayString(_ctx.team.name), 1),\n        (_ctx.editable && _ctx.selected)\n          ? (_openBlock(), _createElementBlock(\"span\", {\n              key: 0,\n              class: \"button material-symbols-outlined\",\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.editOnClick && _ctx.editOnClick(...args)))\n            }, \" edit_square \"))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3], (index) => {\n          return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n            (_ctx.resonanceElementImgSrcs[index])\n              ? (_openBlock(), _createElementBlock(\"img\", {\n                  key: 0,\n                  class: \"elemental-resonance\",\n                  src: _ctx.resonanceElementImgSrcs[index],\n                  alt: \"resonance\"\n                }, null, 8, _hoisted_5))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        }), 64))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"table\", null, [\n        _createElementVNode(\"tr\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: member.id\n            }, [\n              _createVNode(_component_MemberItem, {\n                member: member,\n                statsObj: _ctx.memberStats[member.id],\n                displayStat: _ctx.displayStat,\n                showEquipment: _ctx.showEquipment,\n                viewable: true,\n                members: _ctx.team.members.map(s => s.name),\n                elementalResonance: _ctx.elementalResonance\n              }, null, 8, [\"member\", \"statsObj\", \"displayStat\", \"showEquipment\", \"members\", \"elementalResonance\"])\n            ]))\n          }), 128))\n        ])\n      ])\n    ]),\n    _createElementVNode(\"table\", _hoisted_7, [\n      _createElementVNode(\"tr\", null, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.resKey, (key) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: key,\n            class: _normalizeClass(_ctx.resBgClass(key))\n          }, _toDisplayString(_ctx.res[key]), 3))\n        }), 128))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_8, [\n      _createElementVNode(\"span\", {\n        class: \"material-symbols-outlined control-button\",\n        onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.jumpToRotation && _ctx.jumpToRotation(...args)))\n      }, \"stat_minus_2\"),\n      _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.description), 1)\n    ])\n  ], 2))\n}","\r\nimport _ from 'lodash';\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { CHARACTER_MASTER, ELEMENT_IMG_SRC, TAnyObject, TCharacterKey, ELEMENT_BG_COLOR_CLASS } from \"@/master\";\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { calculateMemberResult, getElementalResonance, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport MemberItem from \"./MemberItem.vue\";\r\nimport { calculateFormulaArray } from \"@/calculate\";\r\nimport { TStats } from \"@/input\";\r\n\r\nexport default defineComponent({\r\n  name: \"TeamItem\",\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    selected: { type: Boolean, requied: true },\r\n    displayStat: { type: String },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n    editable: { type: Boolean },\r\n    showEquipment: { type: Boolean },\r\n  },\r\n  emits: ['click:edit', 'change:buildname', 'click:jump-to-rotation', 'update:member-result'],\r\n  components: {\r\n    MemberItem,\r\n  },\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const memberStats = reactive({} as TAnyObject);\r\n    const memberResults = reactive({} as TTeamMemberResult);\r\n    const selectedClass = computed(() => (props.selected ? ' selected' : ''));\r\n    const res = reactive({} as TAnyObject);\r\n    const resKey = ['', '', '', '', '', '', '', ''];\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, async (newVal) => {\r\n      watchFunc(newVal.team);\r\n      watchCount.value++;\r\n    });\r\n\r\n    onMounted(() => {\r\n      watchFunc(props.team);\r\n    })\r\n\r\n    async function watchFunc(team: TTeam) {\r\n      const list = [];\r\n      for (const member of team.members) {\r\n        list.push({\r\n          key: member.id,\r\n          value: await calculateMemberResult(member, team),\r\n        });\r\n      }\r\n      await Promise.all(list).then(results => {\r\n        results.forEach(entry => {\r\n          memberStats[entry.key] = entry.value?.statsInput?.statsObj;\r\n          memberResults[entry.key] = entry.value;\r\n        });\r\n      });\r\n      calculateStat();\r\n      calculateRes();\r\n      context.emit('update:member-result', team.id, memberResults);\r\n    }\r\n\r\n    function calculateStat() {\r\n      const teamAdjustments: { [key: string]: TStats } = {};\r\n      Object.keys(memberStats).forEach(key => {\r\n        teamAdjustments[key] = {};\r\n      })\r\n      Object.keys(memberStats).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const weaponMaster = memberResult?.characterInput?.weaponMaster;\r\n        if (characterMaster && characterMaster.) {\r\n          for (const damageDetail of characterMaster.) {\r\n            if (damageDetail.) continue;\r\n            const value = calculateFormulaArray(damageDetail., memberResult.statsInput.statsObj, memberResult.damageResult, damageDetail., damageDetail.);\r\n            const toStat = damageDetail..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n        if (weaponMaster && weaponMaster.) {\r\n          for (const damageDetail of weaponMaster.) {\r\n            if (damageDetail.) continue;\r\n            const value = calculateFormulaArray(damageDetail., memberResult.statsInput.statsObj, memberResult.damageResult, damageDetail., damageDetail.);\r\n            const toStat = damageDetail..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n      for (const key of Object.keys(memberStats)) {\r\n        if (key in teamAdjustments) {\r\n          for (const stat of Object.keys(teamAdjustments[key])) {\r\n            if (!memberStats[key]) continue;\r\n            if (stat in memberStats[key]) {\r\n              memberStats[key][stat] += teamAdjustments[key][stat];\r\n            } else {\r\n              memberStats[key][stat] = teamAdjustments[key][stat];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    function initializeRes() {\r\n      resKey.forEach(key => {\r\n        res[key] = 0;\r\n      });\r\n    }\r\n    initializeRes();\r\n\r\n    // \r\n    function calculateRes() {\r\n      initializeRes();\r\n      const dmgElements: string[] = [];\r\n      const artifactSet4s: string[] = [];\r\n      Object.keys(memberResults).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const artifactSetMasters = memberResult?.characterInput?.artifactSetMasters;\r\n        if (characterMaster) {\r\n          if (characterMaster) {\r\n            dmgElements.push(characterMaster.);\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster.) {\r\n            for (const damageDetail of characterMaster.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          const constellation = memberResult.characterInput?. ?? (props.constellations ? props.constellations[characterMaster.] ?? 0 : 0);\r\n          if (characterMaster.) {\r\n            for (let i = 1; i <= constellation; i++) {\r\n              const constellationObj = characterMaster.[String(i)];\r\n              if (constellationObj.) {\r\n                for (const damageDetail of constellationObj.) {\r\n                  if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    if (_.isNumber(damageDetail.)) {\r\n                      if (element === '') {\r\n                        resKey.filter(s => s !== '').forEach(key => {\r\n                          res[key] -= damageDetail.;\r\n                        })\r\n                      } else {\r\n                        res[element] -= damageDetail.;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (artifactSetMasters && artifactSetMasters.length == 2) {\r\n          if (artifactSetMasters[0].key == artifactSetMasters[1].key) {\r\n            if (!artifactSet4s.includes(artifactSetMasters[0].key)) {\r\n              artifactSet4s.push(artifactSetMasters[0].key);\r\n              if (artifactSetMasters[0]['4']?.) {\r\n                artifactSetMasters[0]['4']?..forEach(damageDetail => {\r\n                  if (damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    res[element] -= Number(damageDetail.);\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n      if (dmgElements.filter(s => s === '').length >= 2) { // \r\n        res[''] -= -20;\r\n      }\r\n      if (dmgElements.includes('') && dmgElements.includes('')) { // \r\n        res[''] -= -40;\r\n      }\r\n      resKey.forEach(key => {\r\n        if (key !== '' && !dmgElements.includes(key)) {\r\n          res[key] = 0;\r\n        }\r\n      })\r\n    }\r\n\r\n    const elementalResonance = computed(() => getElementalResonance(props.team));\r\n\r\n    const resonanceElementImgSrcs = computed(() => {\r\n      const result: string[] = [];\r\n      elementalResonance.value.forEach((entry) => {\r\n        if (entry == \"\") {\r\n          const members = props.team.members.filter((s) => s.name);\r\n          if (members.length == 4) {\r\n            members.forEach((member) => {\r\n              const master = CHARACTER_MASTER[member.name as TCharacterKey];\r\n              const src = (ELEMENT_IMG_SRC as any)[master.];\r\n              result.push(src);\r\n            });\r\n          }\r\n        } else {\r\n          const src = (ELEMENT_IMG_SRC as any)[entry.replace(\"\", \"\")];\r\n          result.push(src);\r\n          result.push(src);\r\n        }\r\n      });\r\n      return result;\r\n    });\r\n\r\n    const description = computed(() => props.team.description ?? '')\r\n\r\n    const resBgClass = (key: string) => {\r\n      if (res[key] !== 0) {\r\n        return key in ELEMENT_BG_COLOR_CLASS ? (ELEMENT_BG_COLOR_CLASS as any)[key] : 'physical';\r\n      } else {\r\n        return '';\r\n      }\r\n    }\r\n\r\n    const editOnClick = () => {\r\n      context.emit('click:edit', props.team.id);\r\n    }\r\n\r\n    const jumpToRotation = () => {\r\n      context.emit('click:jump-to-rotation');\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n\r\n      selectedClass,\r\n      memberStats,\r\n      elementalResonance,\r\n      resonanceElementImgSrcs,\r\n      description,\r\n      res,\r\n      resKey,\r\n      resBgClass,\r\n\r\n      editOnClick,\r\n      jumpToRotation,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./TeamItem.vue?vue&type=template&id=3512101b&ts=true\"\nimport script from \"./TeamItem.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamItem.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamItem.vue?vue&type=style&index=0&id=3512101b&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, vModelText as _vModelText, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-674941d4\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"rotation-box\" }\nconst _hoisted_2 = { class: \"pane1\" }\nconst _hoisted_3 = { class: \"icon-list\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"action with-tooltip\"\n}\nconst _hoisted_5 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_6 = { class: \"tooltip\" }\nconst _hoisted_7 = {\n  key: 1,\n  class: \"action with-tooltip\"\n}\nconst _hoisted_8 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_9 = { class: \"tooltip\" }\nconst _hoisted_10 = {\n  key: 2,\n  class: \"action with-tooltip\"\n}\nconst _hoisted_11 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_12 = { class: \"tooltip\" }\nconst _hoisted_13 = { class: \"control-button\" }\nconst _hoisted_14 = { style: {\"width\":\"30px\"} }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"material-symbols-outlined\" }, \"delete\", -1))\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"td\", { style: {\"width\":\"30px\"} }, null, -1))\nconst _hoisted_17 = { class: \"rotation-list\" }\nconst _hoisted_18 = { class: \"rotation-item\" }\nconst _hoisted_19 = [\"src\", \"alt\"]\nconst _hoisted_20 = [\"onTouchend\"]\nconst _hoisted_21 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_22 = { class: \"tooltip\" }\nconst _hoisted_23 = [\"onClick\"]\nconst _hoisted_24 = { class: \"action-attribute\" }\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_27 = {\n  key: 0,\n  class: \"pane2\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_draggable = _resolveComponent(\"draggable\")!\n  const _component_ERCalculator = _resolveComponent(\"ERCalculator\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"fieldset\", _hoisted_3, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n          return (_openBlock(), _createElementBlock(_Fragment, {\n            key: member.id\n          }, [\n            (_ctx.getNormalAttackDetail(member))\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                  _createElementVNode(\"img\", {\n                    class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                    src: _ctx.getNormalAttackDetail(member).icon_url,\n                    alt: _ctx.displayName(_ctx.getNormalAttackDetail(member).),\n                    onClick: ($event: any) => (_ctx.listActionOnClick(member, 'N'))\n                  }, null, 10, _hoisted_5),\n                  _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.displayName(member.name)) + \" \" + _toDisplayString(_ctx.displayName(\"\")), 1)\n                ]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.getElementalSkillDetail(member))\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                  _createElementVNode(\"img\", {\n                    class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                    src: _ctx.getElementalSkillDetail(member).icon_url,\n                    alt: _ctx.displayName(_ctx.getElementalSkillDetail(member).),\n                    onClick: ($event: any) => (_ctx.listActionOnClick(member, 'E'))\n                  }, null, 10, _hoisted_8),\n                  _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_ctx.displayName(member.name)) + \" \" + _toDisplayString(_ctx.displayName(\"\")), 1)\n                ]))\n              : _createCommentVNode(\"\", true),\n            (_ctx.getElementalBurstDetail(member))\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                  _createElementVNode(\"img\", {\n                    class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                    src: _ctx.getElementalBurstDetail(member)?.icon_url,\n                    alt: _ctx.displayName(_ctx.getElementalBurstDetail(member).),\n                    onClick: ($event: any) => (_ctx.listActionOnClick(member, 'Q'))\n                  }, null, 10, _hoisted_11),\n                  _createElementVNode(\"span\", _hoisted_12, _toDisplayString(_ctx.displayName(member.name)) + \" \" + _toDisplayString(_ctx.displayName(\"\")), 1)\n                ]))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        }), 128)),\n        _createElementVNode(\"table\", _hoisted_13, [\n          _createElementVNode(\"tr\", null, [\n            _createElementVNode(\"td\", _hoisted_14, [\n              _createElementVNode(\"span\", {\n                class: \"material-symbols-outlined control-button\",\n                onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('click:jump-to-team')))\n              }, \"stat_2\")\n            ]),\n            _createElementVNode(\"td\", null, [\n              _createElementVNode(\"label\", {\n                class: _normalizeClass(_ctx.removeMode ? 'checked' : '')\n              }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.removeMode) = $event))\n                }, null, 512), [\n                  [_vModelCheckbox, _ctx.removeMode]\n                ]),\n                _hoisted_15\n              ], 2)\n            ]),\n            _hoisted_16\n          ])\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_17, [\n        _createVNode(_component_draggable, {\n          list: _ctx.rotationList,\n          \"item-key\": \"id\",\n          sort: true,\n          handle: \".handle\",\n          onChange: _ctx.rotationListOnChange\n        }, {\n          item: _withCtx(({ element }) => [\n            _createElementVNode(\"div\", _hoisted_18, [\n              (_ctx.previousRotation(element)?.member != element.member)\n                ? (_openBlock(), _createElementBlock(\"img\", {\n                    key: 0,\n                    class: \"character-icon\",\n                    src: _ctx.getCharacterMaster(element.member)?.icon_url ?? _ctx.IMG_SRC_DUMMY,\n                    alt: _ctx.displayName(element.member)\n                  }, null, 8, _hoisted_19))\n                : _createCommentVNode(\"\", true),\n              (_ctx.getActionDetail(element))\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 1,\n                    class: _normalizeClass('action-item ' + _ctx.colorClass(element.member))\n                  }, [\n                    _createElementVNode(\"div\", {\n                      class: \"with-tooltip\",\n                      onTouchend: ($event: any) => (_ctx.rotationActionOnClick(element))\n                    }, [\n                      _createElementVNode(\"img\", {\n                        class: _normalizeClass('action-icon handle' + _ctx.bgColorClass(element.member)),\n                        src: _ctx.getActionDetail(element).icon_url,\n                        alt: _ctx.displayName(_ctx.getActionDetail(element).),\n                        onClick: ($event: any) => (_ctx.rotationActionOnClick(element))\n                      }, null, 10, _hoisted_21),\n                      _createElementVNode(\"span\", _hoisted_22, _toDisplayString(_ctx.displayName(_ctx.getActionDetail(element).)), 1),\n                      (_ctx.removeMode)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"remove-mark\",\n                            onClick: ($event: any) => (_ctx.removeItemOnClick(element))\n                          }, null, 8, _hoisted_23))\n                        : _createCommentVNode(\"\", true)\n                    ], 40, _hoisted_20),\n                    _createElementVNode(\"div\", _hoisted_24, _toDisplayString(_ctx.actionDisplay(element)), 1)\n                  ], 2))\n                : _createCommentVNode(\"\", true)\n            ])\n          ]),\n          _: 1\n        }, 8, [\"list\", \"onChange\"]),\n        _hoisted_25,\n        _withDirectives(_createElementVNode(\"textarea\", {\n          class: \"rotation-description\",\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.rotationDescription) = $event)),\n          rows: \"10\",\n          maxlength: \"400\",\n          onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.updateRotation && _ctx.updateRotation(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.rotationDescription]\n        ])\n      ]),\n      _hoisted_26\n    ]),\n    true\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [\n          _createVNode(_component_ERCalculator, {\n            team: _ctx.team,\n            rotationList: _ctx.rotationList,\n            teamMemberResult: _ctx.teamMemberResult,\n            constellations: _ctx.constellations\n          }, null, 8, [\"team\", \"rotationList\", \"teamMemberResult\", \"constellations\"])\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","import { toDisplayString as _toDisplayString, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, vModelSelect as _vModelSelect, vShow as _vShow, createCommentVNode as _createCommentVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b3945d68\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"er-calculator\" }\nconst _hoisted_2 = { class: \"er-calculator\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", { colspan: \"2\" }, null, -1))\nconst _hoisted_4 = { class: \"with-tooltip\" }\nconst _hoisted_5 = [\"src\", \"alt\"]\nconst _hoisted_6 = { class: \"tooltip\" }\nconst _hoisted_7 = { colspan: \"2\" }\nconst _hoisted_8 = [\"onUpdate:modelValue\"]\nconst _hoisted_9 = { colspan: \"2\" }\nconst _hoisted_10 = [\"onUpdate:modelValue\"]\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = { colspan: \"2\" }\nconst _hoisted_13 = [\"src\", \"alt\"]\nconst _hoisted_14 = [\"onUpdate:modelValue\"]\nconst _hoisted_15 = [\"value\"]\nconst _hoisted_16 = { class: \"result-row\" }\nconst _hoisted_17 = { colspan: \"2\" }\nconst _hoisted_18 = { colspan: \"2\" }\nconst _hoisted_19 = [\"onUpdate:modelValue\"]\nconst _hoisted_20 = { class: \"label-row\" }\nconst _hoisted_21 = { colspan: \"2\" }\nconst _hoisted_22 = { colspan: \"4\" }\nconst _hoisted_23 = [\"onUpdate:modelValue\"]\nconst _hoisted_24 = { class: \"with-tooltip\" }\nconst _hoisted_25 = [\"src\", \"alt\"]\nconst _hoisted_26 = [\"src\", \"alt\"]\nconst _hoisted_27 = { class: \"tooltip\" }\nconst _hoisted_28 = [\"onUpdate:modelValue\"]\nconst _hoisted_29 = { colspan: \"2\" }\nconst _hoisted_30 = { class: \"label-row\" }\nconst _hoisted_31 = { colspan: \"2\" }\nconst _hoisted_32 = { colspan: \"4\" }\nconst _hoisted_33 = { class: \"with-tooltip\" }\nconst _hoisted_34 = [\"src\", \"alt\"]\nconst _hoisted_35 = [\"src\", \"alt\"]\nconst _hoisted_36 = { class: \"tooltip\" }\nconst _hoisted_37 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"td\", null, null, -1))\nconst _hoisted_38 = [\"onUpdate:modelValue\"]\nconst _hoisted_39 = { colspan: \"2\" }\nconst _hoisted_40 = [\"onUpdate:modelValue\"]\nconst _hoisted_41 = { colspan: \"2\" }\nconst _hoisted_42 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_43 = { class: \"tooltip\" }\nconst _hoisted_44 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_45 = { class: \"supply-from-enemy\" }\nconst _hoisted_46 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, null, -1))\nconst _hoisted_47 = [\"onUpdate:modelValue\"]\nconst _hoisted_48 = [\"onUpdate:modelValue\"]\nconst _hoisted_49 = { class: \"message-area\" }\nconst _hoisted_50 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_51 = { class: \"character\" }\nconst _hoisted_52 = { key: 0 }\nconst _hoisted_53 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"message-area\\\" data-v-b3945d68><hr data-v-b3945d68><dl data-v-b3945d68><dt data-v-b3945d68></dt><dd data-v-b3945d68><ol data-v-b3945d68><li data-v-b3945d68><br data-v-b3945d68>   </li><li data-v-b3945d68> <br data-v-b3945d68>    </li><li data-v-b3945d68> <br data-v-b3945d68>   </li></ol></dd><dt data-v-b3945d68></dt><dd data-v-b3945d68> 5 </dd><dt data-v-b3945d68></dt><dd data-v-b3945d68> (%) <br data-v-b3945d68> 1 </dd><dt data-v-b3945d68></dt><dd data-v-b3945d68></dd></dl></div>\", 1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.rotationLength) = $event)),\n          min: \"10\",\n          max: \"180\",\n          onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.rotationLength]\n        ])\n      ])\n    ]),\n    _createElementVNode(\"table\", _hoisted_2, [\n      _createElementVNode(\"tr\", null, [\n        _hoisted_3,\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"img\", {\n                src: _ctx.characterImgSrc(element.character),\n                alt: _ctx.displayName(element.character),\n                class: \"character\"\n              }, null, 8, _hoisted_5),\n              _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.displayName(element.character)), 1)\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_7, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              \"onUpdate:modelValue\": ($event: any) => ((element.energyCost) = $event)\n            }, null, 8, _hoisted_8), [\n              [_vModelText, element.energyCost]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_9, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": ($event: any) => ((element.constellation) = $event),\n              onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n            }, [\n              (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3, 4, 5, 6], (constellation) => {\n                return _createElementVNode(\"option\", {\n                  key: constellation,\n                  value: constellation\n                }, _toDisplayString('C' + constellation), 9, _hoisted_11)\n              }), 64))\n            ], 40, _hoisted_10), [\n              [_vModelSelect, element.constellation]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_12, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass('weapon' + _ctx.bgColorClass(index))\n          }, [\n            _createElementVNode(\"img\", {\n              src: _ctx.weaponImgSrc(element.character, element.currentWeapon),\n              alt: _ctx.displayName(element.currentWeapon),\n              class: \"input-item\"\n            }, null, 8, _hoisted_13),\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": ($event: any) => ((element.weaponRefine) = $event),\n              onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n            }, [\n              (_openBlock(), _createElementBlock(_Fragment, null, _renderList([1, 2, 3, 4, 5], (refine) => {\n                return _createElementVNode(\"option\", {\n                  key: refine,\n                  value: refine\n                }, _toDisplayString('R' + refine), 9, _hoisted_15)\n              }), 64))\n            ], 40, _hoisted_14), [\n              [_vModelSelect, element.weaponRefine]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", _hoisted_16, [\n        _createElementVNode(\"th\", _hoisted_17, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.energyRechargeGls, (value, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, _toDisplayString(value + '%'), 3))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_18, _toDisplayString(_ctx.displayName('(%)')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              \"onUpdate:modelValue\": ($event: any) => ((element.onField) = $event),\n              min: \"0\",\n              max: \"100\",\n              onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n            }, null, 40, _hoisted_19), [\n              [_vModelText, element.onField]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", _hoisted_20, [\n        _createElementVNode(\"th\", _hoisted_21, _toDisplayString(_ctx.displayName('')), 1),\n        _createElementVNode(\"th\", _hoisted_22, _toDisplayString(_ctx.displayName('')), 1)\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticleEnemy, (row, rowIndex) => {\n        return (_openBlock(), _createElementBlock(\"tr\", {\n          key: rowIndex,\n          class: _normalizeClass(_ctx.bgColorClass2(row))\n        }, [\n          _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 10) / 10), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n            return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_23), [\n                [_vModelText, row.currentValues[columnIndex]]\n              ])\n            ]))\n          }), 128))\n        ], 2))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticle, (row, rowIndex) => {\n        return (_openBlock(), _createElementBlock(\"tr\", {\n          key: rowIndex,\n          class: _normalizeClass(_ctx.bgColorClass2(row))\n        }, [\n          _createElementVNode(\"th\", _hoisted_24, [\n            _createElementVNode(\"span\", null, [\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc1(row),\n                alt: _ctx.displayName(row.character),\n                class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n              }, null, 10, _hoisted_25),\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc2(row),\n                alt: _ctx.displayName(row.triggerName),\n                class: \"input-item\"\n              }, null, 8, _hoisted_26)\n            ]),\n            _createElementVNode(\"span\", _hoisted_27, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n          ]),\n          _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 10) / 10), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n            return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_28), [\n                [_vModelText, row.currentValues[columnIndex]]\n              ])\n            ]))\n          }), 128))\n        ], 2))\n      }), 128)),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_29, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.particleRecharges, (value, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: \"result\"\n          }, _toDisplayString(value), 1))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", _hoisted_30, [\n        _createElementVNode(\"th\", _hoisted_31, _toDisplayString(_ctx.displayName('')), 1),\n        _createElementVNode(\"th\", _hoisted_32, _toDisplayString(_ctx.displayName('')), 1)\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowEnergy, (row, rowIndex) => {\n        return (_openBlock(), _createElementBlock(\"tr\", {\n          key: rowIndex,\n          class: _normalizeClass(_ctx.bgColorClass2(row))\n        }, [\n          _createElementVNode(\"th\", _hoisted_33, [\n            _createElementVNode(\"span\", null, [\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc1(row),\n                alt: _ctx.displayName(row.character),\n                class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n              }, null, 10, _hoisted_34),\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc2(row),\n                alt: _ctx.displayName(row.triggerName),\n                class: \"input-item\"\n              }, null, 8, _hoisted_35)\n            ]),\n            _createElementVNode(\"span\", _hoisted_36, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n          ]),\n          _hoisted_37,\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n            return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_38), [\n                [_vModelText, row.currentValues[columnIndex]]\n              ])\n            ]))\n          }), 128))\n        ], 2))\n      }), 128)),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_39, _toDisplayString(_ctx.displayName('()')), 1),\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3], (index) => {\n          return _createElementVNode(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              \"onUpdate:modelValue\": ($event: any) => ((_ctx.burstCounts[index]) = $event),\n              min: \"0\"\n            }, null, 8, _hoisted_40), [\n              [_vModelText, _ctx.burstCounts[index]]\n            ])\n          ], 2)\n        }), 64))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_41, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(element.replaceWeapons, (weapon, weaponIndex) => {\n              return (_openBlock(), _createElementBlock(\"span\", {\n                key: weaponIndex,\n                class: \"with-tooltip\"\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.replaceWeaponImgSrc(element, weapon),\n                  alt: _ctx.displayName(weapon),\n                  class: _normalizeClass('input-item' + _ctx.replaceWeaponClass(element, weapon)),\n                  onClick: ($event: any) => (_ctx.replaceWeaponOnClick(element, weapon))\n                }, null, 10, _hoisted_42),\n                _createElementVNode(\"span\", _hoisted_43, _toDisplayString(_ctx.displayName(weapon)), 1)\n              ]))\n            }), 128))\n          ], 2))\n        }), 128))\n      ])\n    ]),\n    _hoisted_44,\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.combatLength) = $event)),\n          min: \"1\",\n          onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.combatLength]\n        ])\n      ]),\n      _createElementVNode(\"table\", _hoisted_45, [\n        _createElementVNode(\"caption\", {\n          onClick: _cache[7] || (_cache[7] = ($event: any) => (_ctx.isOpenSupplyFromEnemy = !_ctx.isOpenSupplyFromEnemy))\n        }, _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+') + \" \" + _toDisplayString(_ctx.displayName('')) + \" \" + _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+'), 1),\n        _createElementVNode(\"tr\", null, [\n          _hoisted_46,\n          _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.supplyFromEnemy, (element, index) => {\n          return _withDirectives((_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n            _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName(element[0])), 1),\n            _createElementVNode(\"td\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element[1]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_47), [\n                [_vModelText, element[1]]\n              ])\n            ]),\n            _createElementVNode(\"td\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element[2]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_48), [\n                [_vModelText, element[2]]\n              ])\n            ])\n          ])), [\n            [_vShow, _ctx.isOpenSupplyFromEnemy || element[1] || element[2]]\n          ])\n        }), 128))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_49, [\n      _hoisted_50,\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.messages, (message, index) => {\n        return (_openBlock(), _createElementBlock(\"p\", { key: index }, [\n          _createElementVNode(\"span\", _hoisted_51, _toDisplayString(message[0]), 1),\n          _createTextVNode(\"  \"),\n          _createElementVNode(\"span\", null, _toDisplayString(message[1]), 1),\n          (message[0] || message[1])\n            ? (_openBlock(), _createElementBlock(\"br\", _hoisted_52))\n            : _createCommentVNode(\"\", true),\n          _createTextVNode(\"  \" + _toDisplayString(message[2]), 1)\n        ]))\n      }), 128))\n    ]),\n    _hoisted_53\n  ]))\n}","import _ from \"lodash\";\r\n\r\n// 21\r\nexport type TParticleInfo = number | number[];\r\nexport type TParticleEntry = {\r\n    [key: string]: TParticleInfo,\r\n};\r\nexport type TParticleMaster = {\r\n    [key: string]: TParticleEntry,\r\n};\r\n\r\n// \r\n// [, ]\r\n// [, , , ]\r\n// [, , , , , , , , ]\r\nexport const PARTICLE_MASTER: TParticleMaster = {\r\n    '': {\r\n        'E': [4, 1, 0, 12],\r\n    },\r\n    '': {\r\n        'E': 5,\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E': [0.33, -1, 12, 20, 2, 0.33, -1, 18, 20],\r\n    },\r\n    '': {\r\n        'E.Press': [6, 0],\r\n        'E.Hold': [6, 0],\r\n    },\r\n    '': {\r\n        'E': [4, 0],\r\n    },\r\n    '': {\r\n        'E.Press': [0.36, -1, 25, 5],\r\n        'E.Hold': [0.36, -1, 25, 6],\r\n    },\r\n    '': {\r\n        'E': 4.5,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n        'E(burst)': 1.5,\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E.Press': [4, 1, 0, 10],\r\n        'E.Hold': [4, 1, 0, 10],\r\n    },\r\n    '': {\r\n        'E': [4, 0, 6, 12],\r\n    },\r\n    '': {\r\n        'E': [0.36, -1, 14, 4],\r\n    },\r\n    '': {\r\n        'E.Press': [3, 1, 10, 10],\r\n        'E.Hold': [4, 1, 15, 15],\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E': [0.33, -1, 12, 20],\r\n    },\r\n    '': {\r\n        'E': [0.45, -1, 25, 10],\r\n    },\r\n    '': {\r\n        'E': 5,\r\n    },\r\n    '': {\r\n        'E': [4, 0, 10, 18],\r\n    },\r\n    '': {\r\n        'E': 4.5,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 1.5,\r\n        'E.Hold': 2.5,\r\n    },\r\n    '': {\r\n        'E': [5, 0, 9, 16],\r\n    },\r\n    '': {\r\n        'E': 3,\r\n        'E(burst)': 0,\r\n    },\r\n    '': {\r\n        'E': [1, -1, 4, 10]\r\n    },\r\n    '': {\r\n        'E.Press': [0.3, -1, 30, 4],\r\n        'E.Hold': [0.3, -1, 30, 4],\r\n    },\r\n    '': {\r\n        'E.Press': [0.25, -1, 20, 4],\r\n        'E.Hold': [0.25, -1, 20, 12],\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 2.5,\r\n        'E.Hold': 2.5,\r\n    },\r\n    '': {\r\n        'E.Press': [3.33, 5, 5, 12],\r\n        'E.Hold': [3.33, 5, 5, 12],\r\n    },\r\n    '': {\r\n        'E': 0,\r\n    },\r\n    '': {\r\n        'E': 3.75,\r\n    },\r\n    '': {\r\n        'E': 2.5,\r\n    },\r\n    '': {\r\n        'E': 2,\r\n        'E(burst)': 1,\r\n    },\r\n    '': {\r\n        'E.Press': 4,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 3 + 1,\r\n    },\r\n    '': {\r\n        'E': 2,\r\n    },\r\n    '': {\r\n        'E.Press': 4,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': [0.5, -1, 10, 15],\r\n        'E.Hold': [0.5, -1, 10, 15]\r\n    },\r\n    '': {\r\n        'E': [2, 1, 18, 6],\r\n    },\r\n    '': {\r\n        'E': [0.11, -1, 12, 12]\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3\r\n    },\r\n    '': {\r\n        'E': 2,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E': 2,\r\n    },\r\n    '': {\r\n        'E': [0.3, -1, 12, 15, 2, 0.3, -1, 15, 15],\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 2,\r\n    },\r\n    '': {\r\n        'E': 3.4,\r\n    },\r\n    '': {\r\n        'E': 0,\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E': 2.5,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 1.6,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E': 0,\r\n    },\r\n    '': {\r\n        'E.Press': 2.5,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E': [2 / 3, -1, 10, 24, 6, 2 / 3, -1, 12, 24],\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E': [4.5, 1, 15, 21],\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E': [0.5, -1, 8, 12],\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 4,\r\n        'E.Press(burst)': 0,\r\n    },\r\n    '': {\r\n        'E': [0, 1, 15, 32, 2, 0, 1, 15, 27.2],\r\n    },\r\n    '': {\r\n        'E.Press': 0,\r\n        'E.Hold': 5,\r\n    },\r\n    '': {\r\n        'E': 2.5,\r\n    },\r\n    '': {\r\n        'E.Press': [4, 8, 0, 15],\r\n        'E.Hold': [4, 8, 0, 15],\r\n    },\r\n    '()': {\r\n        'E.Press': 3 + 1 / 3,\r\n        'E.Hold': 3 + 1 / 3,\r\n    },\r\n    '()': {\r\n        'E': 2.5,\r\n    },\r\n    '()': {\r\n        'E': 1,\r\n    },\r\n    '()': {\r\n        'E.Press': 3 + 1 / 3,\r\n        'E.Hold': 3 + 1 / 3,\r\n    },\r\n    '()': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3 + 1 / 3,\r\n    },\r\n}\r\n\r\nexport function getElementalSkillActions(character: string) {\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    return particleMaster ? Object.keys(particleMaster).filter(action => action.startsWith('E') && action.indexOf('(burst)') == -1) : ['E'];\r\n}\r\n\r\nexport function getParticleInfo(character: string, action: string, constellation = 0, isBursting = false) {\r\n    let result;\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    if (particleMaster) {\r\n        const postfix = isBursting ? '(burst)' : '';\r\n        for (const workAction of [action + postfix, action]) {\r\n            result = particleMaster[workAction];\r\n            if (_.isArray(result) && result.length > 4) {\r\n                if (result[4] >= constellation) {\r\n                    result = result.slice(5);       // 5,6,7,8\r\n                } else {\r\n                    result = result.slice(0, 4);    // 1,2,3,4\r\n                }\r\n            }\r\n            if (result !== undefined) break;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleNumFromInfo(particleInfo: TParticleInfo, leftTime?: number) {\r\n    let result = 0;\r\n    if (_.isNumber(particleInfo)) {\r\n        result = particleInfo;\r\n    } else {\r\n        result = particleInfo[0];\r\n        const receiver = getReceiverFromInfo(particleInfo);\r\n        if (receiver < 0) {\r\n            let duration = getDurationFromInfo(particleInfo);\r\n            if (duration > 0) {\r\n                if (leftTime !== undefined && duration > leftTime) {\r\n                    duration = Math.max(0, leftTime);\r\n                }\r\n                result *= duration;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getReceiverFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 1) ? particleInfo[1] : 1;\r\n}\r\n\r\nexport function getDurationFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 2) ? particleInfo[2] : 0;\r\n}\r\n\r\nexport function getCtFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 3) ? particleInfo[3] : undefined;\r\n}","import _ from \"lodash\";\r\nimport { TActionItem, TTeam, TTeamMemberResult, getCharacterDetail, getCharacterMaster } from \"./team\";\r\nimport { PARTICLE_MASTER, getDurationFromInfo, getParticleInfo, getParticleNumFromInfo, getReceiverFromInfo } from \"@/particlemaster\";\r\n\r\nexport const RECHARGE_ENERGY_SKILL = \"01\";              // \r\nexport const RECHARGE_ENERGY_BURST = \"02\";              // \r\nexport const RECHARGE_ENERGY_PASSIVE = \"03\";            // \r\nexport const RECHARGE_ENERGY_CONSTELLATION = \"04\";      // \r\nexport const RECHARGE_ENERGY_WEAPON = \"06\";             // \r\nexport const RECHARGE_PARTICLE_SKILL = \"11\";            // \r\nexport const RECHARGE_PARTICLE_PASSIVE = \"13\";          // \r\nexport const RECHARGE_PARTICLE_CONSTELLATION = \"14\";    // \r\nexport const RECHARGE_PARTICLE_FAVONIUS = \"16\";         // \r\nexport const RECHARGE_PARTICLE_RESONANCE = \"18\";        // \r\nexport const RECHARGE_PARTICLE_ENEMY = \"19\";            // \r\n\r\n// rechargeKind, triggerName, energies[0], energies[1], energies[2], energies[3], messages[]\r\nexport type TEREnergy = [string, string, number, number, number, number, string[]];\r\n// rechargeKind, triggerName, element, particles[0], particles[1], particles[2], particles[3], messages[]\r\nexport type TERParticle = [string, string, string, number, number, number, number, string[]];\r\n\r\nexport function isRechargeKindEnergy(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('0') : false;\r\n}\r\n\r\nexport function isRechargeKindParticle(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('1') : false;\r\n}\r\n\r\n/**  */\r\nexport function countN(character?: string, rotationList?: TActionItem[]) {\r\n    return rotationList?.length ?\r\n        rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith('N')).reduce((sum, rotation) => sum + Number(rotation.action.substring(1, 2) ?? '1'), 0)\r\n        : 1;\r\n}\r\n/**  */\r\nexport function countC(character?: string, rotationList?: TActionItem[]) {\r\n    return rotationList?.length ?\r\n        rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.indexOf('C') != -1).length\r\n        : 1;\r\n}\r\n/**  */\r\nexport function countE(character?: string, rotationList?: TActionItem[], action = 'E') {\r\n    return rotationList?.length ?\r\n        rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith(action)).length\r\n        : 1;\r\n}\r\n/**  */\r\nexport function countQ(character?: string, rotationList?: TActionItem[]) {\r\n    return rotationList?.length ?\r\n        rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action === 'Q').length\r\n        : 1;\r\n}\r\n/** (%) */\r\nexport function getOnFieldRate(team: TTeam, rotationLength: number, rotationList: TActionItem[], constellations: number[]) {\r\n    let result = [0, 0, 0, 0];\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    if (rotationList?.length) {\r\n        result = [0, 0, 0, 0];\r\n        const multiple = Math.ceil(100 / rotationLength);\r\n        const lengthList = [0, 0, 0, 0];\r\n        let curCharacter;\r\n        let length = 0;\r\n        let isNCPIgnore = false;\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            const characterMaster = getCharacterMaster(rotation.member);\r\n            if (curCharacter && rotation.member != curCharacter) {\r\n                lengthList[memberNameArr.indexOf(curCharacter)] += (length > 1 ? length : 1);\r\n                length = 0;\r\n                isNCPIgnore = false;\r\n            }\r\n            if (rotation.action === 'Q') {\r\n                length += 1;\r\n                if (characterMaster?. && characterMaster. === 5) {\r\n                    length += 0.5;\r\n                }\r\n            } else if (rotation.action === 'E.Hold') {\r\n                length += 1;\r\n            } else if (['E', 'E.Press'].includes(rotation.action)) {\r\n                length += 0.5;\r\n                const particleInfo = getParticleInfo(rotation.member, rotation.action, constellations[memberNameArr.indexOf(rotation.member)]);\r\n                if (particleInfo) {\r\n                    const duration = getDurationFromInfo(particleInfo);\r\n                    if (getReceiverFromInfo(particleInfo) === 0 && duration) {\r\n                        // \r\n                        length += duration;\r\n                        isNCPIgnore = true;\r\n                    }\r\n                }\r\n            } else if (!isNCPIgnore) {\r\n                if (rotation.action.startsWith('N')) {\r\n                    const dan = Number(rotation.action.substring(1, 2)) ?? 1;\r\n                    const withC = rotation.action.endsWith('C');\r\n                    if (characterMaster?. === '') {\r\n                        if (rotation.action == 'N' && rotation.member === '') {\r\n                            length += 6;\r\n                        } else {\r\n                            length += dan * 0.3 + (withC ? 0.5 : 0);\r\n                        }\r\n                    } else if (characterMaster?. === '') {\r\n                        length += dan * 0.3 + (withC ? 0.5 : 0);\r\n                    } else if (characterMaster?. === '') {\r\n                        length += dan * 0.5;\r\n                    } else if (characterMaster?. === '') {\r\n                        length += dan * 0.3;\r\n                    } else if (characterMaster?. === '') {\r\n                        length += dan * 0.5;\r\n                    }\r\n                } else if (rotation.action == 'C') {\r\n                    if (characterMaster?. === '') {\r\n                        length += 3;\r\n                    } else if (characterMaster?. === '') {\r\n                        length += 1.5;\r\n                    } else if (characterMaster?. === '') {\r\n                        if (rotation.member === '') {\r\n                            length += 3;\r\n                        } else {\r\n                            length += 1;\r\n                        }\r\n                    }\r\n                } else if (rotation.action == 'P') {\r\n                    length += 1.5;\r\n                }\r\n            }\r\n            curCharacter = rotation.member;\r\n        }\r\n        if (curCharacter && length > 0) {\r\n            lengthList[memberNameArr.indexOf(curCharacter)] += (length > 1 ? length : 1);\r\n        }\r\n        const lengthSum = _.sum(lengthList);\r\n        for (let i = 0; i < result.length; i++) {\r\n            if (lengthSum && i < lengthList.length) {\r\n                result[i] = Math.ceil(lengthList[i] / lengthSum * 100 / multiple) * multiple;\r\n            } else {\r\n                result[i] = 25;\r\n            }\r\n        }\r\n        const sumVal = _.sum(result);\r\n        if (sumVal > 100) {\r\n            const maxVal = _.max(result);\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (result[i] == maxVal) {\r\n                    result[i] -= sumVal - 100;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        const memberNum = memberNameArr.filter(name => name).length;\r\n        if (memberNum) {\r\n            const rate = 100 / memberNum;\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (memberNameArr[i]) {\r\n                    result[i] = rate;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    teamMemberResult?: TTeamMemberResult,\r\n): TEREnergy[] {\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (myIndex == -1) return [];\r\n    const resultArr = new Array<[string, string, number, number, number, number[]]>(); // [rechargeType, triggerName, myEnergy, allEnergy, otherEnergy, herEnergies]\r\n    const messages: string[] = [];\r\n    const member = team.members[myIndex];\r\n    const eCount = countE(character, rotationList);\r\n    const qCount = countQ(character, rotationList);\r\n    const memberResult = teamMemberResult ? teamMemberResult[member.id] : undefined;\r\n    let myEnergy = 0; // \r\n    let allEnergy = 0; // \r\n    let otherEnergy = 0; // \r\n    const herEnergies = [0, 0, 0, 0]; // \r\n    if (!character) {\r\n        return [];\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        messages.push('HP3');\r\n        myEnergy = 3;\r\n        resultArr.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('1.50.21');\r\n        myEnergy = 1.5;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        messages.push('0.80.21');\r\n        const electroCount = team.members.filter(member => getCharacterDetail(member.name)?. === '').length;\r\n        if (electroCount) {\r\n            const count = countN(character, rotationList) + countC(character, rotationList);\r\n            myEnergy += 0.8 * count;\r\n        }\r\n        resultArr.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('315');\r\n        let count = eCount;\r\n        if (rotationList?.length) {\r\n            count = 0;\r\n            let isSkilling = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (rotation.action === 'E') {\r\n                        if (!isSkilling) {\r\n                            count++;\r\n                        }\r\n                        isSkilling = true;\r\n                    }\r\n                } else {\r\n                    isSkilling = false;\r\n                }\r\n            }\r\n        }\r\n        myEnergy += 15 * count;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('35');\r\n        if (team.members.filter(member => ['', '', '', ''].includes(getCharacterMaster(member.name)?. ?? '--')).length) {\r\n            otherEnergy = 3 * 5 * qCount;\r\n        }\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        messages.push('4012');\r\n        myEnergy = 2;\r\n        resultArr.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '' && constellation >= 1) {\r\n        messages.push('18');\r\n        myEnergy = 8 * 3 * qCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '1', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 2) {\r\n        messages.push('1-1.564.518');\r\n        const geoCount = team.members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n        myEnergy = Math.min(18, 6 * geoCount) * qCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '2', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('+10%0.80.21');\r\n        myEnergy = 0.8;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        messages.push('115');\r\n        messages.push('100%1%+0.6%');\r\n        let unit = 2.3 * (1 + (132 - 100) * 0.006);\r\n        if (memberResult) {\r\n            memberResult.damageResult..forEach(entry => {\r\n                if (entry[0] === '') {\r\n                    unit = entry[2];\r\n                }\r\n            })\r\n        }\r\n        allEnergy = unit * 5 * qCount;\r\n        resultArr.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('45/3/412');\r\n        myEnergy = 3;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 1) {\r\n        messages.push('-15%6211');\r\n        const cCount = countC(character, rotationList);\r\n        myEnergy = 2 * cCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '1', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '' && constellation >= 1) {\r\n        messages.push('1.2');\r\n        myEnergy = 1.2 * Math.trunc(rotationLength / 2);\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '1', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        messages.push('2');\r\n        const cCount = countC(character, rotationList);\r\n        const critRate = memberResult?.statsInput.statsObj. ?? 100;\r\n        allEnergy = 2 * critRate / 100 * cCount;\r\n        resultArr.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n        if (constellation >= 6) {\r\n            messages.push('33');\r\n            allEnergy = 0;\r\n            otherEnergy = 3;\r\n            resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '6', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n        }\r\n    } else if (character === '') {\r\n        messages.push('1515');\r\n        myEnergy = 15 * qCount;\r\n        const herEnergy = myEnergy;\r\n        for (const elmt of ['', '', '', '']) {\r\n            let doBreak = false;\r\n            for (let herIndex = 0; herIndex < team.members.length; herIndex++) {\r\n                const herCm = getCharacterMaster(team.members[herIndex].name);\r\n                if (herCm?. == elmt) {\r\n                    herEnergies[herIndex] = herEnergy;\r\n                    doBreak = true;\r\n                }\r\n            }\r\n            if (doBreak) break;\r\n        }\r\n        resultArr.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 1) {\r\n        messages.push('2');\r\n        myEnergy = 2;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '1', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 80 * 0.2 * qCount;\r\n    } else if (character === '' && constellation >= 2) {\r\n        messages.push('243');\r\n        myEnergy = 2 * eCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '2', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('HP315');\r\n        myEnergy = 3 * 5 * qCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '' && constellation >= 2) {\r\n        messages.push('30.81');\r\n        myEnergy = 3;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '2', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('1210.514');\r\n        if (constellation >= 6) {\r\n            myEnergy = 2 * Math.trunc(rotationLength / 3);\r\n        } else {\r\n            myEnergy = 2 * Math.min(eCount * 2, countC(character, rotationList)); // 12\r\n        }\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '' && constellation >= 2) {\r\n        messages.push('11');\r\n        myEnergy = 1;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '2', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        messages.push('100%5115');\r\n        const er = memberResult?.statsInput.statsObj. ?? 100;\r\n        myEnergy = Math.min(15, 5 * er / 100 * eCount);\r\n        resultArr.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('91.513.5');\r\n        myEnergy = 9 * qCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('15');\r\n        myEnergy = 15 * qCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        messages.push('100%1.231');\r\n        const er = memberResult?.statsInput.statsObj. ?? 100;\r\n        allEnergy = 1.2 * er / 100 * eCount;\r\n        resultArr.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('1.221');\r\n        myEnergy = 1.2;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('511');\r\n        const critRate = memberResult?.statsInput.statsObj. ?? 100;\r\n        myEnergy = 5 * critRate / 100 * eCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 1) {\r\n        messages.push('15');\r\n        myEnergy = 15 * qCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '1', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 4) {\r\n        messages.push('121');\r\n        myEnergy = 1;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '' && constellation >= 6) {\r\n        messages.push('23');\r\n        const nCount = countN(undefined, rotationList);\r\n        myEnergy = 3 * Math.trunc(nCount / 3);\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '6', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '') {\r\n        messages.push('10');\r\n        myEnergy = 0;\r\n        resultArr.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        if (constellation >= 1) {\r\n            messages.push('101');\r\n            myEnergy = Math.trunc(1 * rotationLength / 10);\r\n            resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '1', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n        }\r\n        if (constellation >= 4) {\r\n            messages.push('15');\r\n            const cCount = countC(character, rotationList);\r\n            myEnergy = 1 * cCount;\r\n            resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n        }\r\n    } else if (character === '' && constellation >= 1) {\r\n        messages.push('210');\r\n        const eHoldCount = countE(character, rotationList, 'E.Hold');\r\n        myEnergy = 2 * eHoldCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '1', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '' && constellation >= 6) {\r\n        messages.push('115');\r\n        myEnergy = 15 * qCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '6', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '') {\r\n        myEnergy = 0;\r\n    } else if (character === '()') {\r\n        myEnergy = 0;\r\n    } else if (character === '()' && constellation >= 1) {\r\n        messages.push('3.5');\r\n        myEnergy = 3.5 * eCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '1', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '()') {\r\n        messages.push(' ');\r\n        messages.push('10%');\r\n        myEnergy = 0;\r\n        if (constellation >= 4) {\r\n            messages.push('35%+100%');\r\n            myEnergy = 0;\r\n        }\r\n        resultArr.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '()' && constellation >= 4) {\r\n        messages.push('525');\r\n        myEnergy = 5 * qCount;\r\n        resultArr.push([RECHARGE_ENERGY_CONSTELLATION, '4', myEnergy, allEnergy, otherEnergy, herEnergies]);\r\n    } else if (character === '()') {\r\n        myEnergy = 0;\r\n    }\r\n    const result: TEREnergy[] = [];\r\n    if (resultArr.length) {\r\n        resultArr.forEach(entry => {\r\n            const energies = [0, 0, 0, 0];\r\n            if (myEnergy) {\r\n                energies[myIndex] += myEnergy;\r\n            }\r\n            if (allEnergy) {\r\n                for (let i = 0; i < energies.length; i++) {\r\n                    energies[i] += allEnergy;\r\n                }\r\n            }\r\n            if (otherEnergy) {\r\n                for (let i = 0; i < energies.length; i++) {\r\n                    if (i != myIndex) {\r\n                        energies[i] += otherEnergy;\r\n                    }\r\n                }\r\n            }\r\n            for (let i = 0; i < herEnergies.length; i++) {\r\n                energies[i] += herEnergies[i];\r\n            }\r\n            result.push([entry[0], entry[1], energies[0], energies[1], energies[2], energies[3], messages]);\r\n        })\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n): TEREnergy | undefined {\r\n    const rechargeKind = RECHARGE_ENERGY_WEAPON;\r\n    const energies = [0, 0, 0, 0];\r\n    const messages: string[] = [];\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    let unit = 1;\r\n    const eCount = countE(character, rotationList);\r\n    const qCount = countQ(character, rotationList);\r\n    let myEnergy = 0;\r\n    if (weapon === '') {\r\n        messages.push('624/4.5/5/5.5/6HP24%/4.5%/5%/5.5%/6%');\r\n        unit = [4, 4.5, 5, 5.5, 6][weaponRefine - 1];\r\n        myEnergy = unit * 3 * qCount;\r\n    } else if (weapon === '') {\r\n        messages.push('301513126/7.5/9/10.5/12');\r\n        unit = [6, 7.5, 9, 10.5, 12][weaponRefine - 1];\r\n        if (qCount) {\r\n            myEnergy = unit * eCount;\r\n        }\r\n    } else if (weapon === '' || weapon === '') {\r\n        messages.push('3623/3.5/4/4.5/5101');\r\n        unit = [3, 3.5, 4, 4.5, 5][weaponRefine - 1];\r\n        if (rotationList?.length) {\r\n            let next = Number.MIN_SAFE_INTEGER;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                if (i < next) continue; // 101\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character && rotation.action.startsWith('E')) {\r\n                    if (i === 0 || rotationList[i - 1].member != character && rotationList[i - 1].action !== 'Q') {\r\n                        myEnergy -= 3;\r\n                    }\r\n                    myEnergy += unit * 3;\r\n                    next = i + 5;\r\n                }\r\n            }\r\n        }\r\n    } else if (weapon === '') {\r\n        messages.push('120.60.11');\r\n        unit = 0.6;\r\n        if (rotationList?.length) {\r\n            let isBursting = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (rotation.action === 'Q') {\r\n                        isBursting = true;\r\n                    } else if (isBursting && rotation.action.startsWith('N')) {\r\n                        const n = Number(rotation.action.substring(1) ?? '1');\r\n                        myEnergy += unit * n;\r\n                    }\r\n                } else {\r\n                    isBursting = false;\r\n                }\r\n            }\r\n        } else {\r\n            myEnergy += unit * 1;\r\n        }\r\n    } else if (weapon === '') {\r\n        messages.push('32.54.5/5/5.5/6/6.5');\r\n        unit = [4.5, 5, 5.5, 6, 6.5][weaponRefine - 1];\r\n        myEnergy = unit * qCount * 12 / 2.5;\r\n    } else if (weapon === '') {\r\n        messages.push('8/10/12/14/16101');\r\n        unit = [8, 10, 12, 14, 16][weaponRefine - 1];\r\n        myEnergy = unit * qCount;\r\n    } else if (weapon === '') {\r\n        messages.push('HP+16%/20%/24%/28%/32%HP+14%/18%/22%/26%/30%430.31338/9/10/11/12121');\r\n        unit = [8, 9, 10, 11, 12][weaponRefine - 1];\r\n        myEnergy = unit * qCount;\r\n    } else if (weapon === '' || weapon === '') {\r\n        messages.push('1303101+40/50/60/70/80212/2.5/3/3.5/4151');\r\n        unit = [2, 2.5, 3, 3.5, 4][weaponRefine - 1];\r\n        if (eCount || qCount) {\r\n            myEnergy = unit * 3 * qCount;\r\n        }\r\n    }\r\n    if (myEnergy) {\r\n        energies[myIndex] += myEnergy;\r\n    }\r\n    if (energies.filter(e => e > 0).length || messages.length) {\r\n        return [rechargeKind, weapon, energies[0], energies[1], energies[2], energies[3], messages];\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function getParticleByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle[] | undefined {\r\n    const kind = RECHARGE_PARTICLE_SKILL;\r\n    const resultMap = new Map<string, number[]>();\r\n    if (!character) return undefined;\r\n    const cpmv = PARTICLE_MASTER[character];\r\n    if (!cpmv) return undefined;\r\n    if (!rotationList?.length) {\r\n        rotationList = [{\r\n            id: 0,\r\n            member: character,\r\n            action: Object.keys(cpmv)[0],\r\n        }];\r\n    }\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    let curCharacter;\r\n    let isBursting = false;\r\n    const timeArr = [0, 0, 0, 0];\r\n    for (let i = 0; i < rotationList.length; i++) {\r\n        const rotation = rotationList[i];\r\n        if (rotation.member != curCharacter) {\r\n            isBursting = false;\r\n        }\r\n        if (rotation.member == character) {\r\n            const index = memberNameArr.indexOf(character);\r\n            let action = rotation.action;\r\n            if (action === 'Q' && ['', ''].includes(character)) {\r\n                action = 'E';\r\n            }\r\n            if (action === 'Q') {\r\n                isBursting = true; // \r\n            } else if (action.startsWith('E')) {\r\n                if (['', ''].includes(character) && curCharacter == character) { // 1\r\n                    continue;\r\n                }\r\n                const resultVal = resultMap.get(action) ?? [0, 0, 0, 0];\r\n                timeArr[index] = setSkillParticleNumToArr(resultVal, character, action, constellation, team, rotationLength, rotationList, i, onFields, timeArr[index], isBursting);\r\n                resultMap.set(action, resultVal);\r\n            }\r\n        }\r\n        curCharacter = rotation.member;\r\n    }\r\n    const result: TERParticle[] = [];\r\n    const characterMaster = getCharacterMaster(character);\r\n    const element = characterMaster?. ?? '';\r\n    resultMap.forEach((value, key) => {\r\n        result.push([kind, key, element, value[0], value[1], value[2], value[3], []]);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getParticleByCharacterExtra(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[], // eslint-disable-line\r\n): TERParticle[] | undefined {\r\n    const resultArr = new Array<[string, string, string, number]>(); // [rechargeType, triggerName, element, num]\r\n    const messages: string[] = [];\r\n    let num;\r\n    const eCount = countE(character, rotationList);\r\n    if (character === '' && constellation >= 2) {\r\n        messages.push('50%151');\r\n        const ct = 5;\r\n        num = rotationLength / ct;\r\n        resultArr.push([RECHARGE_PARTICLE_CONSTELLATION, '2', '', num]);\r\n    } else if (character === '') {\r\n        messages.push('12');\r\n        if (team.members.filter(member => getCharacterMaster(member.name)?. === '').length) {\r\n            num = 2 * eCount;\r\n            resultArr.push([RECHARGE_PARTICLE_PASSIVE, '', '', num]);\r\n        }\r\n    } else if (character === '' && constellation >= 6) {\r\n        messages.push('30%');\r\n        num = 1;\r\n        resultArr.push([RECHARGE_PARTICLE_CONSTELLATION, '6', '', num]);\r\n    }\r\n    let result: TERParticle[] | undefined;\r\n    resultArr.forEach(entry => {\r\n        result = [[entry[0], entry[1], entry[2], 0, 0, 0, 0, messages]];\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getParticleByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined;\r\n    const kind = RECHARGE_PARTICLE_FAVONIUS;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    if (['', '', '', '', ''].includes(weapon)) {\r\n        result = [kind, weapon, '', 0, 0, 0, 0, []];\r\n        const ct = [12, 10.5, 9, 7.5, 6][weaponRefine - 1];\r\n        let triggerCnt = 1;\r\n        if (rotationLength && rotationList && onFields) {\r\n            const rindexArr: number[] = [];\r\n            let fieldCnt = 0;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                if (rotationList[i].member == character) {\r\n                    fieldCnt += (i === 0 || rotationList[i - 1].member != character) ? 1 : 0;\r\n                }\r\n            }\r\n            const onField = onFields[memberNameArr.indexOf(character)];\r\n            triggerCnt = Math.max(Math.round(rotationLength * onField / 100 / ct), fieldCnt);\r\n            triggerCnt = Math.min(Math.round(rotationLength / ct), triggerCnt);\r\n            let curCharacter = undefined;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character && rotation.member != curCharacter) {\r\n                    rindexArr.push(i);\r\n                }\r\n                curCharacter = rotation.member;\r\n            }\r\n            for (let i = 0; i < triggerCnt; i++) {\r\n                let nxtCharacter = character;\r\n                if (i < rindexArr.length) {\r\n                    const rindex = rindexArr[i];\r\n                    const nxtRotation = (rindex + 1) < rotationList.length ? rotationList[rindex + 1] : rotationList[0];\r\n                    nxtCharacter = nxtRotation.member;\r\n                }\r\n                const toIndex = memberNameArr.indexOf(nxtCharacter);\r\n                result[3 + toIndex] = 3;\r\n            }\r\n        } else {\r\n            const toIndex = memberNameArr.indexOf(character);\r\n            result[3 + toIndex] = 3 * triggerCnt;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleByResonance(\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined;\r\n    const kind = RECHARGE_PARTICLE_RESONANCE;\r\n    const memberNum = team.members.filter(member => member.name).length;\r\n    if (memberNum !== 4) return result;\r\n    const electroCount = team.members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n    if (electroCount >= 2) { // \r\n        // 100%5\r\n        if (team.members.filter(member => ['', '', '', ''].includes(getCharacterMaster(member.name)?. ?? '--')).length) {\r\n            const ct = 5;\r\n            const num = 1 * Math.trunc(rotationLength / ct);\r\n            const workArr = [0, 0, 0, 0];\r\n            splitNumToArrByOnFieldRate(workArr, num, team, onFields);\r\n            result = [kind, '', '', workArr[0], workArr[1], workArr[2], workArr[3], []];\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction setSkillParticleNumToArr(\r\n    arr: number[],\r\n    character: string,\r\n    action: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    onFields: number[],\r\n    time: number,\r\n    isBursting = false,\r\n) {\r\n    const particleInfo = getParticleInfo(character, action, constellation, isBursting);\r\n    if (particleInfo) {\r\n        const rotation = rotationList[index];\r\n        if (rotation) {\r\n            const num = getParticleNumFromInfo(particleInfo, rotationLength - time);\r\n            const receiver = getReceiverFromInfo(particleInfo);\r\n            const duration = getDurationFromInfo(particleInfo);\r\n            if (receiver >= 0) {\r\n                addNumToArr(arr, num, team, rotationList, index, receiver);\r\n            } else {\r\n                splitNumToArrByOnFieldRate(arr, num, team, onFields);\r\n            }\r\n            time += duration;\r\n        }\r\n    }\r\n    return time;\r\n}\r\n\r\nfunction addNumToArr(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    toAdd = 1,\r\n) {\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const nxtRotation = (index + toAdd) < rotationList.length ? rotationList[index + toAdd] : rotationList[0];\r\n    arr[memberNameArr.indexOf(nxtRotation.member)] += num;\r\n}\r\n\r\nfunction splitNumToArrByOnFieldRate(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    onFields: number[],\r\n) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if (team.members[i].name) {\r\n            const onField = onFields[i];\r\n            arr[i] += num * onField / 100;\r\n        }\r\n    }\r\n}\r\n","\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { countQ, getEnergyByCharacter, getEnergyByWeapon, getOnFieldRate, getParticleByCharacter, getParticleByCharacterExtra, getParticleByResonance, getParticleByWeapon, isRechargeKindEnergy, isRechargeKindParticle, RECHARGE_ENERGY_BURST, RECHARGE_ENERGY_CONSTELLATION, RECHARGE_ENERGY_PASSIVE, RECHARGE_ENERGY_SKILL, RECHARGE_ENERGY_WEAPON, RECHARGE_PARTICLE_CONSTELLATION, RECHARGE_PARTICLE_ENEMY, RECHARGE_PARTICLE_FAVONIUS, RECHARGE_PARTICLE_PASSIVE, RECHARGE_PARTICLE_RESONANCE, RECHARGE_PARTICLE_SKILL, TEREnergy, TERParticle } from \"./energyrecharge\";\r\nimport { getCharacterDetail, getCharacterMaster, getWeaponMaster, setupCharacterDetailMap, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport { ELEMENT_BG_COLOR_CLASS, ELEMENT_IMG_SRC, IMG_SRC_DUMMY } from \"@/master\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport _ from \"lodash\";\r\nimport { getCtFromInfo, getParticleInfo } from \"@/particlemaster\";\r\n\r\ntype TCalculatorInput = {\r\n    character: string,                  // \r\n    energyCost: number,                 //   40-90\r\n    constellation: number,              //  0-6\r\n    initialWeapon: string | undefined,  // \r\n    currentWeapon: string | undefined,  // \r\n    weaponRefine: number,               //  1-5\r\n    onField: number,                    // \r\n    replaceWeapons: string[],           //     \r\n}\r\n\r\ntype TCalculatorInputRow = {\r\n    character: string,          // \r\n    rechargeKind: string,       // \r\n    triggerName: string,        // ,,,\r\n    element: string,            // \r\n    initialValues: number[],    // \r\n    currentValues: number[],    // \r\n    unit: number,               // \r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"ERCalculator\",\r\n    props: {\r\n        team: { type: Object as PropType<TTeam>, required: true },\r\n        teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n        constellations: { type: Object as PropType<TConstellation> },\r\n    },\r\n    setup(props) {\r\n        const { displayName } = CompositionFunction();\r\n        const calculatorInput = reactive([] as TCalculatorInput[]);\r\n        const inputRowParticle = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowEnergy = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowParticleEnemy = reactive([] as TCalculatorInputRow[]);\r\n        const messages = reactive([] as string[][]);\r\n        const DEFAULT_ROTATION_LENGTH = 20;\r\n        const DEFAULT_COMBAT_LENGTH = 90;\r\n        const rotationLength = ref(DEFAULT_ROTATION_LENGTH); // \r\n        const combatLength = ref(DEFAULT_COMBAT_LENGTH);   // \r\n        const supplyFromEnemy = reactive([\r\n            ['', 3, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n        ] as [string, number, number][]);\r\n        const isOpenSupplyFromEnemy = ref(false);\r\n        const REPLACE_WEAPON_MAP = {\r\n            '': ['', ''],\r\n            '': ['', ''],\r\n            '': ['', '', ''],\r\n            '': [''],\r\n            '': ['', ''],\r\n        };\r\n\r\n        onMounted(() => {\r\n            setupCharacterDetailMap().then(() => {\r\n                setupInput(props.team, props.teamMemberResult);\r\n            });\r\n        })\r\n\r\n        const watchCount = ref(0);\r\n        watch(() => _.cloneDeep(props), (newVal, oldVal) => {\r\n            updateRotationLength(newVal.team);\r\n            if (!_.isEqual(newVal.team.members, oldVal.team.members) || !_.isEqual(newVal.teamMemberResult, oldVal.teamMemberResult)) {\r\n                setupInput(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            } else {\r\n                setupInputRows(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            }\r\n        }, { deep: true })\r\n\r\n        function getConstellation(character: string, team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            if (teamMemberResult) {\r\n                const workArr = team.members.filter(member => member.name == character);\r\n                if (workArr.length) {\r\n                    return teamMemberResult[workArr[0].id]?.characterInput. ?? (props.constellations ? props.constellations[character] ?? 0 : 0);\r\n                }\r\n            }\r\n            return props.constellations ? props.constellations[character] ?? 0 : 0;\r\n        }\r\n\r\n        function updateRotationLength(team: TTeam) {\r\n            const memberNameArr = team.members.map(member => member.name);\r\n            const eLength = [0, 0, 0, 0];\r\n            const qLength = [0, 0, 0, 0];\r\n            if (team.rotation.length) {\r\n                for (let i = 0; i < team.rotation.length; i++) {\r\n                    const rotation = team.rotation[i];\r\n                    const memberIndex = memberNameArr.indexOf(rotation.member);\r\n                    if (memberIndex == -1) continue;\r\n                    if (rotation.action === 'Q' || rotation.action.startsWith('E')) {\r\n                        const characterDetail = getCharacterDetail(rotation.member);\r\n                        if (rotation.action === 'Q') {\r\n                            let ct = characterDetail?.. ?? 0;\r\n                            if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 2) {\r\n                                    ct *= 0.85;\r\n                                }\r\n                            } else if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 6) {\r\n                                    ct -= 5;\r\n                                }\r\n                            }\r\n                            qLength[memberIndex] += ct;\r\n                        } else {\r\n                            const constellation = getConstellation(rotation.member, props.team, props.teamMemberResult);\r\n                            const particleInfo = getParticleInfo(rotation.member, rotation.action, constellation);\r\n                            let ct = 0;\r\n                            if (particleInfo) {\r\n                                ct = getCtFromInfo(particleInfo) ?? 0;\r\n                                if (memberNameArr.includes('') && rotation.member != '') {\r\n                                    const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                    if (constellation >= 2) {\r\n                                        ct *= 0.85;\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (ct > eLength[memberIndex]) {\r\n                                eLength[memberIndex] = ct;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let newLength = Math.max(...eLength, ...qLength);\r\n            if (newLength == 0) {\r\n                newLength = DEFAULT_ROTATION_LENGTH;\r\n            }\r\n            rotationLength.value = newLength;\r\n        }\r\n\r\n        function updateOnFields(team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                calculatorInput[i].onField = onFields[i];\r\n            }\r\n        }\r\n\r\n        const setupInput = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            const newInput: TCalculatorInput[] = [];\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < team.members.length; i++) {\r\n                const member = team.members[i];\r\n                const characterDetail = getCharacterDetail(member.name);\r\n                const constellation = constellations[i];\r\n                const memberResult = teamMemberResult ? teamMemberResult[member.id] : undefined;\r\n                const weapon = memberResult?.characterInput.weapon;\r\n                const weaponRefine = memberResult?.characterInput. ?? 1;\r\n                let replaceWeapons: string[] = [];\r\n                if (characterDetail) {\r\n                    replaceWeapons = REPLACE_WEAPON_MAP[characterDetail.];\r\n                }\r\n                newInput.push({\r\n                    character: member.name,\r\n                    energyCost: characterDetail?.. ?? 0,\r\n                    constellation: constellation,\r\n                    initialWeapon: weapon,\r\n                    currentWeapon: weapon,\r\n                    weaponRefine: weaponRefine,\r\n                    onField: onFields[i],\r\n                    replaceWeapons: replaceWeapons,\r\n                });\r\n            }\r\n            calculatorInput.splice(0, calculatorInput.length, ...newInput);\r\n\r\n            setupInputRows(team, teamMemberResult);\r\n        }\r\n\r\n        function pushInputRowParticle(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, particle: TERParticle) {\r\n            const initialValues = [0, 0, 0, 0];\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(Number(particle[3 + i]) * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: particle[0],\r\n                triggerName: particle[1],\r\n                element: particle[2],\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 1,\r\n            })\r\n            if (particle[7].length) {\r\n                particle[7].forEach(message => {\r\n                    let work = '';\r\n                    if (particle[0] === RECHARGE_PARTICLE_SKILL) {\r\n                        work = '';\r\n                    } else {\r\n                        work = particle[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n        function pushInputRowEnergy(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, energy: TEREnergy) {\r\n            const initialValues = [0, 0, 0, 0];\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(Number(energy[2 + i]) * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: energy[0],\r\n                triggerName: energy[1],\r\n                element: '',\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 0.1,\r\n            })\r\n            if (energy[6].length) {\r\n                energy[6].forEach(message => {\r\n                    let work = '';\r\n                    if (energy[0] === RECHARGE_ENERGY_SKILL) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_BURST) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_CONSTELLATION) {\r\n                        if (energy[1]) {\r\n                            work = 'C' + energy[1];\r\n                        }\r\n                    } else {\r\n                        work = energy[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n\r\n        const setupInputRows = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            updateOnFields(team, teamMemberResult);\r\n            const newInputRowPacticle1: TCalculatorInputRow[] = [];\r\n            const newInputRowPacticle2: TCalculatorInputRow[] = [];\r\n            const newInputRowEnergy: TCalculatorInputRow[] = [];\r\n            const newInputRowResonance: TCalculatorInputRow[] = [];\r\n            const newinputRowParticleEnemy: TCalculatorInputRow[] = [];\r\n            const newMessages: string[][] = [];\r\n            const onFields = calculatorInput.map(s => s.onField);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                const character = calculatorInput[i].character;\r\n                const constellation = calculatorInput[i].constellation;\r\n                const weapon = calculatorInput[i].currentWeapon;\r\n                const weaponRefine = calculatorInput[i].weaponRefine;\r\n                // \r\n                [\r\n                    getParticleByCharacter(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                    getParticleByCharacterExtra(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                ].forEach(result => {\r\n                    if (result) {\r\n                        result.forEach(entry => {\r\n                            pushInputRowParticle(newInputRowPacticle1, newMessages, character, entry);\r\n                        })\r\n                    }\r\n                })\r\n                // \r\n                const energyByCharacter = getEnergyByCharacter(character, constellation, team, rotationLength.value, team.rotation, teamMemberResult);\r\n                energyByCharacter.forEach(entry => {\r\n                    pushInputRowEnergy(newInputRowEnergy, newMessages, character, entry);\r\n                })\r\n                // \r\n                if (weapon) {\r\n                    // \r\n                    const particleByWeapon = getParticleByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation, onFields);\r\n                    if (particleByWeapon) {\r\n                        pushInputRowParticle(newInputRowPacticle2, newMessages, character, particleByWeapon);\r\n                    }\r\n                    // \r\n                    const energyByWeapon = getEnergyByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation);\r\n                    if (energyByWeapon) {\r\n                        pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByWeapon);\r\n                    }\r\n                }\r\n            }\r\n            // \r\n            const particleByResonance = getParticleByResonance(team, rotationLength.value, team.rotation, onFields);\r\n            if (particleByResonance) {\r\n                pushInputRowParticle(newInputRowResonance, newMessages, '', particleByResonance);\r\n            }\r\n            // \r\n            supplyFromEnemy.filter(s => s[1] || s[2]).forEach(entry => {\r\n                const sum = entry[1] * 3 + entry[2]; // 3\r\n                const initialValues = [0, 0, 0, 0];\r\n                for (let i = 0; i < onFields.length; i++) {\r\n                    initialValues[i] = rotationLength.value / combatLength.value * sum * onFields[i] / 100;\r\n                }\r\n                pushInputRowParticle(newinputRowParticleEnemy, newMessages, '', [\r\n                    RECHARGE_PARTICLE_ENEMY, '', entry[0], initialValues[0], initialValues[1], initialValues[2], initialValues[3], []\r\n                ]);\r\n            })\r\n            inputRowParticle.splice(0, inputRowParticle.length, ...newInputRowPacticle1, ...newInputRowPacticle2, ...newInputRowResonance);\r\n            inputRowEnergy.splice(0, inputRowEnergy.length, ...newInputRowEnergy);\r\n            inputRowParticleEnemy.splice(0, inputRowParticleEnemy.length, ...newinputRowParticleEnemy);\r\n            messages.splice(0, messages.length, ...newMessages);\r\n        }\r\n\r\n        /** () */\r\n        const burstCounts = computed(() => {\r\n            const result: { [key: number]: number } = { 0: 1, 1: 1, 2: 1, 3: 1 };\r\n            if (props.team.rotation?.length) {\r\n                for (let i = 0; i < props.team.members.length; i++) {\r\n                    const member = props.team.members[i];\r\n                    if (member.name) {\r\n                        result[i] = countQ(member.name, props.team.rotation);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /** () */\r\n        const particleRecharges = computed(() => {\r\n            const result: number[] = [0, 0, 0, 0];\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                const member = props.team.members[i];\r\n                if (!member.name) continue;\r\n                const characterMaster = getCharacterMaster(member.name);\r\n                const myElement = characterMaster?.;\r\n                if (!myElement) continue;\r\n                [inputRowParticle, inputRowParticleEnemy].forEach(input => {\r\n                    input.filter(s => isRechargeKindParticle(s.rechargeKind)).forEach(entry => {\r\n                        let energy = 0;\r\n                        for (let j = 0; j < entry.currentValues.length; j++) {\r\n                            if (j == i) {\r\n                                energy += entry.currentValues[j];\r\n                            } else {\r\n                                energy += entry.currentValues[j] * 0.6;\r\n                            }\r\n                        }\r\n                        if (entry.element == myElement) {\r\n                            energy *= 3;\r\n                        } else if (entry.element == '') {\r\n                            energy *= 2;\r\n                        }\r\n                        result[i] = Math.round((result[i] + energy) * 10) / 10;\r\n                    })\r\n                })\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /**  */\r\n        const energyRechargeGls = computed(() => {\r\n            const result = [100, 100, 100, 100];\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                if (!props.team.members[i].name) continue;\r\n                let energyCost = calculatorInput[i]?.energyCost;\r\n                if (!energyCost) continue;\r\n                inputRowEnergy.filter(s => isRechargeKindEnergy(s.rechargeKind)).forEach(entry => {\r\n                    energyCost -= entry.currentValues[i];\r\n                })\r\n                const burstCount = burstCounts.value[i] > 0 ? burstCounts.value[i] : 1;\r\n                const particleEnergy = particleRecharges.value[i] / burstCount;\r\n                if (energyCost > 0 && particleEnergy > 0) {\r\n                    const er = Math.ceil(energyCost * 100 / particleEnergy);\r\n                    result[i] = Math.max(100, er);\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n\r\n        const characterImgSrc = (character: string) => getCharacterMaster(character)?.icon_url ?? IMG_SRC_DUMMY;\r\n        const weaponImgSrc = (character: string, weapon?: string) => {\r\n            const characterMater = getCharacterMaster(character);\r\n            return weapon ? characterMater ? getWeaponMaster(characterMater., weapon)?.icon_url ?? IMG_SRC_DUMMY : IMG_SRC_DUMMY : IMG_SRC_DUMMY;\r\n        }\r\n        const replaceWeaponImgSrc = (input: TCalculatorInput, weapon: string) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (input.character && input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                const characterMaster = getCharacterMaster(input.character);\r\n                if (characterMaster) {\r\n                    result = getWeaponMaster(characterMaster., weapon)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else {\r\n                    result = getCharacterMaster(row.character)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1Class = (row: TCalculatorInputRow) =>\r\n            (row.rechargeKind && row.rechargeKind == RECHARGE_PARTICLE_RESONANCE) ? 'input-item' : 'input-item-character';\r\n        const rowImgSrc2 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    const constellationObj = characterDetail?.[row.triggerName];\r\n                    result = constellationObj?.icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_PARTICLE_FAVONIUS, RECHARGE_ENERGY_WEAPON].includes(row.rechargeKind) && row.triggerName) { // \r\n                    const characterMater = getCharacterMaster(row.character);\r\n                    if (characterMater) {\r\n                        const weaponType = characterMater.;\r\n                        const weaponMaster = getWeaponMaster(weaponType, row.triggerName);\r\n                        if (weaponMaster) {\r\n                            result = weaponMaster.icon_url;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const bgColorClass = (index: number) => {\r\n            const master = index < props.team.members.length ? getCharacterMaster(props.team.members[index].name) : undefined;\r\n            return ' ' + (master ? (ELEMENT_BG_COLOR_CLASS as any)[master.] : 'white');\r\n        }\r\n        const bgColorClass2 = (row: TCalculatorInputRow) =>\r\n            ' ' + (row.element ? (ELEMENT_BG_COLOR_CLASS as any)[row.element] : 'white');\r\n        const replaceWeaponClass = (input: TCalculatorInput, weapon: string) =>\r\n            input.currentWeapon == weapon ? ' disabled' : '';\r\n        const triggerName = (row: TCalculatorInputRow) => {\r\n            let result = '';\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_ENERGY_PASSIVE, RECHARGE_PARTICLE_PASSIVE].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) {\r\n                    result = ' ' + row.triggerName + '';\r\n                } else if ([RECHARGE_ENERGY_WEAPON, RECHARGE_PARTICLE_FAVONIUS].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n\r\n        const inputOnChange = () => {\r\n            setupInputRows(props.team, props.teamMemberResult);\r\n        }\r\n\r\n        const replaceWeaponOnClick = (input: TCalculatorInput, weapon: string) => {\r\n            if (input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                if (input.currentWeapon == weapon) {\r\n                    input.currentWeapon = input.initialWeapon;\r\n                } else {\r\n                    input.currentWeapon = weapon;\r\n                }\r\n                inputOnChange();\r\n            }\r\n        }\r\n\r\n        const resetInput = () => {\r\n            inputRowParticleEnemy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowParticle.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowEnergy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n        }\r\n\r\n        return {\r\n            displayName,\r\n\r\n            rotationLength,\r\n            combatLength,\r\n            supplyFromEnemy,\r\n            isOpenSupplyFromEnemy,\r\n            calculatorInput,\r\n            inputRowParticle,\r\n            inputRowEnergy,\r\n            inputRowParticleEnemy,\r\n            burstCounts,\r\n            messages,\r\n            characterImgSrc,\r\n            weaponImgSrc,\r\n            replaceWeaponImgSrc,\r\n            rowImgSrc1,\r\n            rowImgSrc1Class,\r\n            rowImgSrc2,\r\n            bgColorClass,\r\n            bgColorClass2,\r\n            replaceWeaponClass,\r\n            particleRecharges,\r\n            energyRechargeGls,\r\n            triggerName,\r\n\r\n            inputOnChange,\r\n            replaceWeaponOnClick,\r\n            resetInput,\r\n        }\r\n    }\r\n});\r\n","import { render } from \"./ERCalculator.vue?vue&type=template&id=b3945d68&scoped=true&ts=true\"\nimport script from \"./ERCalculator.vue?vue&type=script&lang=ts\"\nexport * from \"./ERCalculator.vue?vue&type=script&lang=ts\"\n\nimport \"./ERCalculator.vue?vue&type=style&index=0&id=b3945d68&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b3945d68\"]])\n\nexport default __exports__","\r\nimport draggable from \"vuedraggable\";\r\nimport { defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { getCharacterDetail, getCharacterMaster, setupCharacterDetailMap, TActionItem, TConstellation, TMember, TTeam, TTeamMemberResult } from \"./team\";\r\nimport { ELEMENT_BG_COLOR_CLASS, ELEMENT_COLOR_CLASS, IMG_SRC_DUMMY } from \"@/master\";\r\nimport _ from \"lodash\";\r\nimport ERCalculator from './ERCalculator.vue';\r\nimport { getElementalSkillActions } from \"@/particlemaster\";\r\n\r\nexport default defineComponent({\r\n  name: \"TeamRotation\",\r\n  components: {\r\n    draggable,\r\n    ERCalculator,\r\n  },\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n  },\r\n  emit: ['update:rotation', 'click:jump-to-team'],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n    const removeMode = ref(false);\r\n    const NORMAL_ATTACK_ACTION_LIST = ['N', 'C', 'P']; // , , \r\n    const normalAttackDans = reactive({} as { [key: string]: number }); // \r\n    const elementalSkillActions = reactive({} as { [key: string]: string[] }); // \r\n    const rotationList = reactive([] as TActionItem[]);\r\n    const actionId = ref(0);\r\n    const rotationDescription = ref('');\r\n\r\n    // \r\n    const CHARGED_WITH_NORMAL_WEAPON = ['', ''];\r\n    const CHARGED_WITH_NORMAL_CHARACTER = ['', ''];\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, () => {\r\n      watchFunc(props.team);\r\n    });\r\n\r\n    function watchFunc(team: TTeam) {\r\n      setupCharacterDetailMap().then(() => {\r\n        for (const member of team.members) {\r\n          if (member.name) {\r\n            normalAttackDans[member.name] = getNormalAttackDan(member.name);\r\n            elementalSkillActions[member.name] = getElementalSkillActions(member.name);\r\n          }\r\n        }\r\n        if (team.rotation?.length) {\r\n          const workArr = _.cloneDeep(team.rotation);\r\n          workArr.forEach(rotation => {\r\n            if (rotation.action.startsWith('E')) {\r\n              const actions = elementalSkillActions[rotation.member];\r\n              if (actions && actions.length > 0 && !actions.includes(rotation.action)) {\r\n                rotation.action = actions[0];\r\n              }\r\n            }\r\n          })\r\n          rotationList.splice(0, rotationList.length, ...workArr);\r\n          actionId.value = Math.max(...rotationList.map(s => s.id));\r\n        } else {\r\n          rotationList.splice(0, rotationList.length);\r\n          actionId.value = 0;\r\n        }\r\n        rotationDescription.value = team.rotationDescription;\r\n        watchCount.value++;\r\n      });\r\n    }\r\n\r\n    onMounted(() => {\r\n      watchFunc(props.team);\r\n    })\r\n\r\n    function getNormalAttackDan(name: string) {\r\n      watchCount.value;\r\n      let dan = 1;\r\n      const master = getCharacterDetail(name);\r\n      if (master) {\r\n        for (const detail of [master.?., master.?.]) {\r\n          if (!detail) continue;\r\n          let workDan = 1;\r\n          detail.forEach((dmgDetail: any) => {\r\n            if (dmgDetail.) {\r\n              const ret = dmgDetail..match(/.*(\\d).+/);\r\n              if (!ret) return;\r\n              const tempDan = Number(ret[1]);\r\n              if (tempDan > workDan) {\r\n                workDan = tempDan;\r\n              }\r\n            }\r\n          })\r\n          if (dan < workDan) { // \r\n            dan = workDan;\r\n          }\r\n        }\r\n      }\r\n      return dan;\r\n    }\r\n\r\n    const getNormalAttackDetail = (member: TMember) => getCharacterDetail(member.name)?.;\r\n    const getElementalSkillDetail = (member: TMember) => getCharacterDetail(member.name)?.;\r\n    const getElementalBurstDetail = (member: TMember) => getCharacterDetail(member.name)?.;\r\n\r\n    const getActionDetail = (item: TActionItem) => {\r\n      let result;\r\n      const master = getCharacterDetail(item.member);\r\n      if (master) {\r\n        if (NORMAL_ATTACK_ACTION_LIST.includes(item.action) || item.action.startsWith('N')) { // , , \r\n          result = master.;\r\n        } else if (item.action.startsWith('E')) { // \r\n          result = master.;\r\n        } else if (item.action == 'Q') { // \r\n          result = master.;\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const previousRotation = (item: TActionItem) => {\r\n      let result;\r\n      for (const rotation of rotationList) {\r\n        if (item.id == rotation.id) {\r\n          break;\r\n        }\r\n        result = rotation;\r\n      }\r\n      return result;\r\n    }\r\n\r\n    const colorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n\r\n    const bgColorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_BG_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n\r\n    function isActionNormalAttack(action: string) {\r\n      return NORMAL_ATTACK_ACTION_LIST.includes(action) || action.startsWith('N');\r\n    }\r\n\r\n    const actionDisplay = (item: TActionItem) =>\r\n      item.action.startsWith('E') ? item.action.replace(/^E\\./, '') : item.action;\r\n\r\n    const updateRotation = () => {\r\n      context.emit('update:rotation', rotationList, rotationDescription.value);\r\n    }\r\n\r\n    const rotationListOnChange = () => {\r\n      updateRotation();\r\n    }\r\n\r\n    const listActionOnClick = (member: TMember, actionKey: string) => {\r\n      let action = actionKey;\r\n      if (isActionNormalAttack(action)) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && isActionNormalAttack(s.action));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        }\r\n      } else if (action.startsWith('E')) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && s.action.startsWith('E'));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        } else {\r\n          const actions = elementalSkillActions[member.name];\r\n          if (actions && actions.length > 0) {\r\n            action = actions[0];\r\n          }\r\n        }\r\n      }\r\n      rotationList.push({\r\n        id: ++actionId.value,\r\n        member: member.name,\r\n        action: action,\r\n      });\r\n      updateRotation();\r\n    }\r\n\r\n    const rotationActionOnClick = (item: TActionItem) => {\r\n      if (removeMode.value) {\r\n        removeItemOnClick(item);\r\n        return;\r\n      }\r\n      if (isActionNormalAttack(item.action)) {\r\n        if (item.action.startsWith('N')) { // \r\n          const master = getCharacterDetail(item.member);\r\n          const work = item.action.substring(1, 2);\r\n          let n = work ? Number(work) : 1;\r\n          const dan = normalAttackDans[item.member] ?? 1;\r\n          if (master && (CHARGED_WITH_NORMAL_WEAPON.includes(master.) || CHARGED_WITH_NORMAL_CHARACTER.includes(item.member))) {\r\n            if (item.action.length < 3) {\r\n              item.action = 'N' + n + 'C';\r\n            } else {\r\n              item.action = ++n > dan ? 'P' : 'N' + n;\r\n            }\r\n          } else {\r\n            item.action = ++n > dan ? 'C' : 'N' + n;\r\n          }\r\n        } else { // , \r\n          let index = NORMAL_ATTACK_ACTION_LIST.indexOf(item.action);\r\n          index = index < (NORMAL_ATTACK_ACTION_LIST.length - 1) ? index + 1 : 0;\r\n          item.action = NORMAL_ATTACK_ACTION_LIST[index];\r\n        }\r\n      } else if (item.action.startsWith('E')) { // \r\n        const actions = elementalSkillActions[item.member];\r\n        if (actions && actions.length > 1) {\r\n          let index = actions.indexOf(item.action);\r\n          index = index < (actions.length - 1) ? index + 1 : 0;\r\n          item.action = actions[index];\r\n        }\r\n      }\r\n      updateRotation();\r\n    }\r\n\r\n    const removeItemOnClick = (item: TActionItem) => {\r\n      rotationList.splice(0, rotationList.length, ...rotationList.filter(s => s != item));\r\n      updateRotation();\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n      IMG_SRC_DUMMY,\r\n      removeMode,\r\n\r\n      colorClass,\r\n      bgColorClass,\r\n\r\n      getCharacterMaster,\r\n      getNormalAttackDetail,\r\n      getElementalSkillDetail,\r\n      getElementalBurstDetail,\r\n\r\n      rotationList,\r\n      rotationDescription,\r\n      previousRotation,\r\n      getCharacterDetail,\r\n      getActionDetail,\r\n      actionDisplay,\r\n\r\n      rotationListOnChange,\r\n      listActionOnClick,\r\n      rotationActionOnClick,\r\n      removeItemOnClick,\r\n      updateRotation,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./TeamRotation.vue?vue&type=template&id=674941d4&scoped=true&ts=true\"\nimport script from \"./TeamRotation.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamRotation.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamRotation.vue?vue&type=style&index=0&id=674941d4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-674941d4\"]])\n\nexport default __exports__"],"names":["getLevelStr","ascension","level","ARRAY","getStatValueByLevel","statObj","myLevelStr","lowLevel","highLevel","length","lowValue","highValue","getPropertyValueByLevel","getValueByLevel","valueObj","Number","levelArr","Object","keys","map","s","i","calculateArtifactStatsMain","artifactStatsMain","mainstats","forEach","key","statWithRarity","stat","split","ARTIFACT_MAIN_MASTER","calculateArtifactSubStatByPriority","artifactStatsSub","prioritySubstats","priotritySubstatIndices","priotritySubstatValues","prioritySubstatCounts","totalCount","undefined","noPrioritySubstatArr","ARRAY","filter","includes","noPriorityCount","Math","min","round","max","substat","ARTIFACT_SUB_MASTER","star4Count","startsWith","multiplier","calculateArtifactStats","artifactDetailInput","artifactStats","","","","calculateStats","statsInput","characterInput","conditionInput","optionInput","characterMaster","","","constellation","","weaponMaster","weaponAscension","","weaponLevel","","workStatsObj","_","TEMPLATE","","name","conditionValues","enemyMaster","toStat","statAdjustments","ARRAY","statAdjustmentsEx","ARRAY","_Var","","_Var","_Var","elementalResonance","teamOption","miscOption","optionObj","conditionAdjustments","workValue","Infinity","endsWith","my","replace","validConditionValueArr","makeValidConditionValueArr","calculateStatsTop","updateStatsWithCondition","myDamageDetail","damageDetailMyCharacter","damageDetailMyWeapon","damageDetailMyArtifactSets","CHANGE_KIND_TALENT","myDetailObj","number","checkConditionMatches","my","","overwriteObject","statsObj","error","console","workConditionAdjustments","statFormulaMap","Map","CHANGE_KIND_STATUS","hasCondition","myNew","","concat","myNew","has","set","get","push","","","hpStatArr","defStatArr","atkStatArr","otherStatArr","_ARRAY","_ARRAY","ARRAY","ARRAY","ARRAY","Array","from","indexOf","formulaStatArr","Set","sort","compareFunction","oldStatsObj","postfix","workStat","updateStatsWithConditionSub","fromStat","formulaKey","formulaArr","formula","diffStats","updateStats","statValue","getStatValue","topValue","a","b","arr","lowestArr","aIndex","bIndex","calculateElementalResonance","result","ELEMENTAL_RESONANCE_MASTER","master","","detailObj","matchRet","","","dendroOption","calculateFormulaArray","damageResult","opt_max","opt_min","isArray","operator","entry","subResult","isNumber","nameArr","damageArrArr","damage","damageArr","temp","floor","maxValue","minValue","calculateDamageResult","vision","reactionResult","TEMPLATE","reactionMasterArr","dmgElementSet","add","selectList","selectEntry","selectedIndex","dmgElement","options","ELEMENTAL_REACTION_MASTER","has","characterArr","","","","","element","reactionMaster","reaction","reactionObj","resultValue","calculate","optionValue","calculate","calculate","calculate","suffix","dmg","","debug","splice","category","talentDetailArr","workObj","talentDetail","resultArr","calculateDamageFromDetail","n","sum","damageTakenArr","damageTaken","calculateDamageTaken","value","resScoreArr","checkboxList","required","numberList","conditionStr","myCondStr","myCondStrArr","resultSub","checkConditionMatchesSub","myCondArr","work","NUMBER_CONDITION_VALUE_RE","test","workArr","re","RegExp","workCondArr","reRet","exec","elementalMastery","dmgBuff","opt_dmgElement","calculateEnemyRes","calculateEnemyDef","opt_ignoreDef","enemyLevel","calcIgnoreDef","calcDef","calculateRes","res","statName","opt_element","myArr","isCalc","isCalc","isCalc","my","my","myHIT","my","talentChangeDetailObjArr","getChangeDetailObjArr","myConditionValuesAfter","delCondition","addCondition","newValue","String","","desc","myConditionInputAfter","validConditionValueArrAfter","damageDetail","","damageDetailObj","valueBefore","valueAfter","matchesBefore","matchesAfter","new","diff","new","","myTalentChangeDetailObjArr","my","myArr","myValue","myNewValueObj","JSON","parse","stringify","tempStatsObj","entryObj","tempArr","isValid","HIT","artifactSets","my","my","description","","DAMAGE_CATEGORY_ARRAY","myResult","calculateDamageFromDetailSub","myResultWork","dmgUpStatArr","dmgUpStat","buffArr","","","my","my","isUseReference","my","buff","my","my","my","my","myResult","myResult","changeKind","ALL_ELEMENTS","DAMAGE_RESULT_TEMPLATE","def","dmgReduction","ARTIFACT_SCORE_FORMULA_TEMPLATE","calculateArtifactScore","scoringStats","scoringStat","magnification","srcStat","srcStatValue","member","teamMembers","calculatedSupporter","supporters","async","calculateSupporter","supporter","build","character","CHARACTER_INPUT_TEMPLATE","ARTIFACT_DETAIL_INPUT_TEMPLATE","CONDITION_INPUT_TEMPLATE","STATS_INPUT_TEMPLATE","getCharacterMasterDetail","builddata","loadRecommendation","makeDamageDetailObjArrObjCharacter","makeDamageDetailObjArrObjWeapon","makeDamageDetailObjArrObjArtifactSets","setupConditionValues","","updateNumberConditionValues","myCharacterMaster","getCritFromResultEntry","critRate","critDmg","REACTION_DMG_ARR","REACTION_DMG_ELEMENT_MAP","setupReactionDmgElementMap","reactionDmg","getDamageResultArr","rotationDamageEntry","calculateRotationDamageEntry","index","list","reactions","dmgResultEntry","count","counts","plainDmg","calculateReactedDamage","workDmg","calculateRotationTotalDamage","rotationDamageArr","dmgIndex","elementalReaction","reactionTimes","reactionKey","getAmplifyingReactionElement","reactionElement","isFinite","dst","src","srcKeys","basename","path","pop","shift","i18n","createI18n","legacy","locale","fallbackLocale","isGlobal","ARRAY","ARRAY","ARRAY","ARRAY","_ARRAY","_ARRAY","ARRAY_MAP","STAT_PERCENT_LIST","makeStatusTenmplate","makeEnemyStatusTemplate","_ARRAY","_ARRAY","_ARRAY","_ARRAY","_ARRAY","ARRAY","TEMPLATE","_","_","_","_","","","","","","","","","","","","","","","","","","","","","","","","","","","","","ARTIFACT_SET_MASTER_DUMMY","","image","IMG_SRC_DUMMY","","","","weapon","","artifactSetMasters","damageDetailElementalResonance","buildname","recommendationSelectedIndex","saveDisabled","removeDisabled","ARTIFACT_TEMPLATE","rarity","setname","cat_id","mainStat","mainStatValue","subStats","","","GENSEN_MASTER_LIST","values","","Disabled","artifact_list","ENEMY_MASTER_LIST","SUPPORTER_INPUT_TEMPLATE","OPTION_INPUT_TEMPLATE","supporterBuildname","parseLevelStr","levelStr","makeDefaultBuildname","makeBuildStorageKey","makeOptionStorageKey","makeArtifactScoringStorageKey","makeRecommendationList","opt_buildData","isSavable","overwrite","log","storageKeyArr","localStorage","buildObj","key2","optionsObj","key3","artifactScoringObj","artifactScoring","key4","supporterBuildnameObj","obj","myRecommendation","artifactRarerityArrArr","artifactRarerity4Num","artifactSet1","artifactSet2","ARTIFACT_SET_MASTER","makeArtifactSetAbbrev","statusName","RECOMMEND_ABBREV_MAP","substring","abbrRe","abbr","makePrioritySubstatValueList","opt_substat","valueArr","makeEasyInputSubstatValueList","weaponType","WEAPON_MASTER","getWeaponMasterDetail","prioritySubstatsDisabled","toKey","artifactSet","mainstat","doUpdate","substatValue","prioritySubstatValueList","v","substatCount","PROPERTY_MAP","astarIndex","workCharacter","CHARACTER_MASTER","ARTIFACT_KEYS","newList","makeSavedata","resultObj","makeOptionsSavedata","myTalentDetail","myTalentLevel","myDefaultKind","myDefaultElement","myInputCategory","myStatusChangeDetailObjArr","makeDamageDetailObjArr","workCategory","cond","","","","","conditionMap","exclusionMap","makeConditionExclusionMapFromStr","myLevel","condition","damageDetailObjArr","makeDamageDetailObjArrObjElementalResonance","ELEMENTAL_RESONANCE_MASTER_LIST","makeDetailObj","defaultKind","defaultElement","inputCategory","opt_condition","my","my","analyzeFormulaStr","my","my","getChangeKind","kind","talentDataObj","statusChangeDetailObjArr","makeTeamOptionDetailObjArr","detailObjArr","exclusionCond","makeConditionExclusionMapFromStrSub","exclusion","myName","pushToMapValueArray","conditionObj","step","prefix","condValueArr","re2","rangeStart","rangeEnd","re2Ret","addDecimal","e","masters","","exclusions","conditionValue","checked","vStat","trunc","warn","numberEntryArr","oldValue","getDecimalLength","multiplyDecimal","value1","value2","decimalLength","intValue1","intValue2","pow","k","formulaStr","opt_defaultItem","workStr","analyzeFormulaStrSub","strArr","makeSharedata","savedata","sharedataArr","myBasename","ARTIFACT_STAT_JA_EN_ABBREV_MAP","join","openTwitter","text","url","opt_hashtags","opt_via","baseUrl","params","URLSearchParams","append","query","toString","shareUrl","window","open","shareByTwitter","sharedata","encoded","encodeURI","getMaxConstellation","getMaxTalentLevel","talentObj","pushBuildinfoToSession","teammembers","sessionStorage","setItem","popBuildinfoFromSession","getItem","removeItem","_withScopeId","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","style","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_createElementVNode","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","type","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","render","_ctx","_cache","$props","$setup","$data","$options","_component_ArtifactSetSelect","_resolveComponent","_openBlock","_createElementBlock","control","onClick","$event","isEditing","artifactImgSrc","alt","displayName","copiedArtifact","artifactIconOnClick","_toDisplayString","_withDirectives","onChange","args","_Fragment","_renderList","mainStatOptions","option","_vModelSelect","statStep","_vModelText","displayStatValue","starOnChange","dummy","subStat","subStatOptions","disabled","subStatOptionDisabled","selectOnClick","score","_createCommentVNode","selected","_createVNode","visible","artifact","updateArtifactSet","_vShow","isListShow","defineComponent","props","id","initial","Boolean","components","ArtifactSetSelect","emits","setup","context","percent","CompositionFunction","reactive","ref","isSelected","computed","getArtifactIconUrl","MAINSTAT_CAT_ARR","emit","onLoad","watch","newVal","oldVal","__exports__","artifactSetEffects","item","filteredList","_normalizeClass","bgImageClass","selectedClass","$emit","STAR_BACKGROUND_IMAGE_CLASS","artifactSetMastersRea","ARTIFACT_SET_MASTER_LIST","elementList","elementCheckList","checkListOnChange","_vModelCheckbox","elementSrc","weaponList","weaponCheckList","weaponSrc","icon_url","characterOnClick","visionSrc","selectionNumber","characters","ELEMENT_IMG_SRC","WEAPON_IMG_SRC","checkList","elementChecked","weaponChecked","CHARACTER_MASTER_LIST","blankIndex","t","te","useI18n","useScope","localeList","setI18nLanguage","global","loadLocaleMessages","document","querySelector","setAttribute","messages","fetch","then","resp","json","setLocaleMessage","nextTick","hasPercent","displayStatName","opt_s","myPercent","p","displayStatAbbrev","targetValue","event","target","HTMLInputElement","HTMLSelectElement","displayOptionName","onDblclick","characterOnDblclick","characterImgClass","characterImgSrc","visionImgSrc","tags","replacements","replaceImgSrc","displayStat","showEquipment","imgWeaponSrc","imgArtifactSetSrc","viewable","members","extraControl","watchCount","replIndex","getBuilddataFromStorage","weaponName","artifactSetName","locate","confirm","_component_MemberItem","team","editable","editOnClick","resonanceElementImgSrcs","memberStats","resKey","resBgClass","jumpToRotation","requied","constellations","MemberItem","memberResults","watchFunc","calculateMemberResult","Promise","all","results","calculateStat","teamAdjustments","memberResult","","","","initializeRes","dmgElements","artifactSet4s","","constellationObj","onMounted","getElementalResonance","ELEMENT_BG_COLOR_CLASS","_component_draggable","_component_ERCalculator","getNormalAttackDetail","bgColorClass","listActionOnClick","getElementalSkillDetail","getElementalBurstDetail","removeMode","rotationList","handle","rotationListOnChange","_withCtx","previousRotation","getCharacterMaster","getActionDetail","colorClass","onTouchend","rotationActionOnClick","removeItemOnClick","actionDisplay","rotationDescription","rows","maxlength","updateRotation","teamMemberResult","colspan","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_createStaticVNode","_createTextVNode","rotationLength","inputOnChange","calculatorInput","energyCost","weaponImgSrc","currentWeapon","weaponRefine","refine","energyRechargeGls","onField","inputRowParticleEnemy","row","rowIndex","bgColorClass2","currentValues","reduce","c","columnIndex","inputRowParticle","rowImgSrc1","rowImgSrc1Class","rowImgSrc2","triggerName","particleRecharges","inputRowEnergy","burstCounts","replaceWeapons","weaponIndex","replaceWeaponImgSrc","replaceWeaponClass","replaceWeaponOnClick","combatLength","isOpenSupplyFromEnemy","supplyFromEnemy","message","PARTICLE_MASTER","getElementalSkillActions","particleMaster","action","getParticleInfo","isBursting","workAction","slice","getParticleNumFromInfo","particleInfo","leftTime","receiver","getReceiverFromInfo","duration","getDurationFromInfo","getCtFromInfo","RECHARGE_ENERGY_SKILL","RECHARGE_ENERGY_BURST","RECHARGE_ENERGY_PASSIVE","RECHARGE_ENERGY_CONSTELLATION","RECHARGE_ENERGY_WEAPON","RECHARGE_PARTICLE_SKILL","RECHARGE_PARTICLE_PASSIVE","RECHARGE_PARTICLE_CONSTELLATION","RECHARGE_PARTICLE_FAVONIUS","RECHARGE_PARTICLE_RESONANCE","RECHARGE_PARTICLE_ENEMY","isRechargeKindEnergy","rechargeKind","isRechargeKindParticle","countN","rotation","countC","countE","countQ","getOnFieldRate","memberNameArr","multiple","ceil","lengthList","curCharacter","isNCPIgnore","dan","withC","lengthSum","sumVal","maxVal","memberNum","rate","getEnergyByCharacter","myIndex","eCount","qCount","myEnergy","allEnergy","otherEnergy","herEnergies","electroCount","getCharacterDetail","isSkilling","geoCount","unit","cCount","","herEnergy","elmt","doBreak","herIndex","herCm","er","","nCount","eHoldCount","energies","getEnergyByWeapon","next","MIN_SAFE_INTEGER","getParticleByCharacter","onFields","resultMap","cpmv","timeArr","resultVal","setSkillParticleNumToArr","getParticleByCharacterExtra","num","ct","getParticleByWeapon","triggerCnt","rindexArr","fieldCnt","nxtCharacter","rindex","nxtRotation","toIndex","getParticleByResonance","splitNumToArrByOnFieldRate","time","addNumToArr","toAdd","DEFAULT_ROTATION_LENGTH","DEFAULT_COMBAT_LENGTH","REPLACE_WEAPON_MAP","setupCharacterDetailMap","setupInput","getConstellation","updateRotationLength","eLength","qLength","memberIndex","characterDetail","","newLength","updateOnFields","setupInputRows","deep","newInput","","initialWeapon","pushInputRowParticle","inputRows","newMessages","particle","initialValues","pushInputRowEnergy","energy","newInputRowPacticle1","newInputRowPacticle2","newInputRowEnergy","newInputRowResonance","newinputRowParticleEnemy","energyByCharacter","particleByWeapon","energyByWeapon","particleByResonance","myElement","input","j","burstCount","particleEnergy","characterMater","getWeaponMaster","resetInput","inputRow","draggable","ERCalculator","NORMAL_ATTACK_ACTION_LIST","normalAttackDans","elementalSkillActions","actionId","CHARGED_WITH_NORMAL_WEAPON","CHARGED_WITH_NORMAL_CHARACTER","getNormalAttackDan","actions","detail","","workDan","dmgDetail","ret","match","tempDan","ELEMENT_COLOR_CLASS","isActionNormalAttack","actionKey"],"sourceRoot":""}