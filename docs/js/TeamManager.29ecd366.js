(function(){"use strict";var t={8039:function(t,e,n){var a=n(5130),i=n(6768),o=n(4232);const l={class:"base-container"},r={class:"pane1"},c={class:"display-stat-select"},s=["value"],u={class:"display-stat"},d={class:"number-of-teams"},m=["min"],f={class:"data-control"},p=["disabled"],h={class:"pane2",id:"team-list-and-editor"},v={class:"team-tags-area"},b={id:"search-datalist"},g=["value"],k=["onUpdate:modelValue"],y=["id"],T={class:"pane3"},E={id:"team-rotation"};function I(t,e,n,I,O,C){const L=(0,i.g2)("TeamItem"),R=(0,i.g2)("draggable"),S=(0,i.g2)("TeamEditorModal"),M=(0,i.g2)("TeamRotation");return(0,i.uX)(),(0,i.CE)("div",l,[e[12]||(e[12]=(0,i.Fv)('<div class="header" data-v-36d9cf19><div class="top-left" data-v-36d9cf19><p data-v-36d9cf19><a href="./" data-v-36d9cf19>げんかるく</a></p></div><div class="top-right" data-v-36d9cf19><p data-v-36d9cf19><a href="./EnergyList" data-v-36d9cf19>元素粒子生成一覧</a></p></div></div>',1)),(0,i.Lk)("div",r,[(0,i.Lk)("fieldset",null,[(0,i.Lk)("div",c,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.DISPLAY_STAT_LIST,(n=>((0,i.uX)(),(0,i.CE)("label",{class:"display-stat",key:n[1]},[(0,i.bo)((0,i.Lk)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":e[0]||(e[0]=e=>t.displayStat=e),value:n[0]},null,8,s),[[a.XL,t.displayStat]]),(0,i.Lk)("span",null,(0,o.v_)(n[1]),1)])))),128)),(0,i.Lk)("label",u,[(0,i.bo)((0,i.Lk)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=e=>t.displayTags=e)},null,512),[[a.lH,t.displayTags]]),e[8]||(e[8]=(0,i.Lk)("span",null,"TAGS",-1))])]),(0,i.Lk)("label",d,[e[9]||(e[9]=(0,i.eW)(" Number of teams ")),(0,i.bo)((0,i.Lk)("input",{type:"number",min:t.NUMBER_OF_TEAMS,max:999,"onUpdate:modelValue":e[2]||(e[2]=e=>t.numberOfTeams=e),onChange:e[3]||(e[3]=(...e)=>t.numberOfTeamsOnChange&&t.numberOfTeamsOnChange(...e))},null,40,m),[[a.Jo,t.numberOfTeams]])]),(0,i.Lk)("div",f,[(0,i.Lk)("button",{type:"button",disabled:t.saveDisabled,onClick:e[4]||(e[4]=(...e)=>t.saveOnClick&&t.saveOnClick(...e))}," Save ",8,p),(0,i.Lk)("button",{type:"button",onClick:e[5]||(e[5]=(...e)=>t.loadOnClick&&t.loadOnClick(...e))}," Load "),(0,i.Lk)("button",{type:"button",onClick:e[6]||(e[6]=(...e)=>t.clearOnClick&&t.clearOnClick(...e))}," Clear ")])])]),(0,i.Lk)("div",h,[(0,i.bo)((0,i.Lk)("div",null,[(0,i.Lk)("div",v,[(0,i.bo)((0,i.Lk)("input",{class:"search",type:"search","onUpdate:modelValue":e[7]||(e[7]=e=>t.searchWord=e),list:"search-datalist"},null,512),[[a.Jo,t.searchWord]]),(0,i.Lk)("datalist",b,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.searchDatalist,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:t.displayName(e)},null,8,g)))),128))]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.teamTagList,(e=>((0,i.uX)(),(0,i.CE)("label",{key:e},[(0,i.bo)((0,i.Lk)("input",{class:"hidden",type:"checkbox","onUpdate:modelValue":n=>t.teamTagChecked[e]=n},null,8,k),[[a.lH,t.teamTagChecked[e]]]),(0,i.Lk)("span",null,(0,o.v_)(e),1)])))),128))]),(0,i.bF)(R,{list:t.filteredTeams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,i.k6)((({element:e})=>[(0,i.Lk)("div",{style:{display:"inline-block"},id:"team-"+e.id},[(0,i.bF)(L,{team:e,selected:t.teamSelected(e.id),"display-stat":t.displayStat,"display-res":t.displayRes,constellations:t.constellations,editable:!0,"show-equipment":!0,"display-tags":t.displayTags,onClick:n=>t.teamOnClick(e.id),"onClick:edit":t.editOnClick,"onClick:jumpToRotation":t.jumpToRotation,"onUpdate:memberResult":t.updateMemberResult},null,8,["team","selected","display-stat","display-res","constellations","display-tags","onClick","onClick:edit","onClick:jumpToRotation","onUpdate:memberResult"])],8,y)])),_:1},8,["list"])],512),[[a.aG,!t.teamEditorVisible]]),(0,i.bo)((0,i.Lk)("div",null,[t.forcusedTeam?((0,i.uX)(),(0,i.Wv)(S,{key:0,visible:t.teamEditorVisible,team:t.forcusedTeam,"team-tags":t.teamTagList,"onClick:cancel":t.teamEditorOnClickCancel,"onClick:ok":t.teamEditorOnClickOk},null,8,["visible","team","team-tags","onClick:cancel","onClick:ok"])):(0,i.Q3)("",!0)],512),[[a.aG,t.teamEditorVisible]])]),(0,i.Lk)("div",T,[e[10]||(e[10]=(0,i.Lk)("hr",null,null,-1)),e[11]||(e[11]=(0,i.Lk)("h3",null,"ROTATION",-1)),(0,i.Lk)("div",E,[t.forcusedTeam?((0,i.uX)(),(0,i.Wv)(M,{key:0,ref:"teamRotationVmRef",team:t.forcusedTeam,"team-member-result":t.teamMemberResult,constellations:t.constellations,"onUpdate:rotation":t.updateRotation,"onClick:jumpToTeam":t.jumpToTeam},null,8,["team","team-member-result","constellations","onUpdate:rotation","onClick:jumpToTeam"])):(0,i.Q3)("",!0)])]),e[13]||(e[13]=(0,i.Fv)('<div class="pane4" data-v-36d9cf19></div><div class="footer" data-v-36d9cf19><hr data-v-36d9cf19><h2 data-v-36d9cf19>チーム編成 Ver.1.0.0</h2><ul class="usage" data-v-36d9cf19><li data-v-36d9cf19>右上の◆のドラッグ＆ドロップでチームの並べ替えができます。</li></ul><dl class="history" data-v-36d9cf19><dt data-v-36d9cf19>1.1.0</dt><dd data-v-36d9cf19> チーム分類用のタグ機能を追加。 </dd><dt data-v-36d9cf19>1.0.0</dt><dd data-v-36d9cf19> 元素チャージ効率計算機能が（ひとまず）完成しました。 </dd><dt data-v-36d9cf19>0.5.0</dt><dd data-v-36d9cf19> ローテーションが保存されるようになりました。チームデータの一部として記憶します。 </dd></dl><p data-v-36d9cf19><a href="./TeamExample.html" data-v-36d9cf19>EXAMPLE</a></p><p data-v-36d9cf19><a href="./" data-v-36d9cf19>げんかるく - 原神ダメージシミュレーター</a>   <a href="./TeamOptionList.html" data-v-36d9cf19>強化・弱体効果一覧</a></p></div>',2))])}n(4114),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var O=n(8626),C=n.n(O),L=n(1527),R=n.n(L),S=n(144),M=n(5682),j=n(2112),_=n(9164),D=n(6923),w=n(2253),V=n(960),A=n(4949),K=(0,i.pM)({name:"TeamManager",props:{id:{type:Number}},components:{draggable:R(),TeamItem:w.A,TeamEditorModal:D.A,TeamRotation:V.A},setup(t){const{displayName:e}=(0,M.A)(),n=(0,S.KR)(!1),a=[["","None"],["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],o=(0,S.KR)(_.dk),l=(0,S.Kh)([]);for(let i=0;i<o.value;i++)l.push((0,_.Mu)(i));const r=(0,S.Kh)({}),c=(0,S.KR)(""),s=(0,S.KR)(!0),u=(0,S.KR)(!1),d=(0,S.KR)(0),m=(0,S.KR)(""),f=(0,S.Kh)({}),p=(0,S.KR)(""),h=(0,S.Kh)({}),v=(0,S.KR)();(0,i.sV)((()=>{V(),void 0!==t.id&&(d.value=t.id,n.value=!0)}));const b=(0,i.EW)((()=>A.AB.map((t=>[t.key,t.icon_url])).sort(((t,e)=>{const n=t[1].split("/"),a=n[n.length-1].split("_"),i=a[a.length-1],o=e[1].split("/"),l=o[o.length-1].split("_"),r=l[l.length-1];return i.localeCompare(r)})).map((t=>t[0])))),g=(0,i.EW)((()=>{const t=[];return l.forEach((e=>{t.push(...e.tags)})),[...new Set(t)].sort()})),k=(0,i.EW)((()=>l.filter((t=>t.id==d.value)).length?l.filter((t=>t.id==d.value))[0]:void 0)),y=(0,i.EW)((()=>(0,_.Wh)(l))),T=(0,i.EW)((()=>y.value==m.value)),E=t=>t==d.value,I=(0,i.EW)((()=>{let t={};if(d.value in r)t=r[d.value];else if(-1!=d.value){const e=l.filter((t=>t.id==d.value))[0];e.members.forEach((e=>{t&&(t[e.id]=(0,_.RX)())}))}return t})),O=(0,i.EW)((()=>{let t=l;if(p.value){const e=p.value;t=t.filter((t=>t.name.includes(e)||t.members.filter((t=>t.name.includes(e)||t.replacements.filter((t=>t.includes(e))).length>0)).length>0))}const e=Object.keys(h).filter((t=>g.value.includes(t)&&h[t]));return e.length&&(t=t.filter((t=>t.tags.filter((t=>e.includes(t))).length>0))),t})),L=()=>{if(o.value>l.length){const t=Math.max(...l.map((t=>t.id))),e=o.value-l.length;for(let n=0;n<e;n++)l.push((0,_.Mu)(t+1+n))}else o.value<l.length&&(d.value>o.value&&(d.value=0),l.splice(o.value))};function R(){const t=localStorage.getItem("キャラクター所持状況");if(t){const e={},n=JSON.parse(t);Object.keys(n).forEach((t=>{const a=Number(n[t]);Number.isNaN(a)&&(e[t]=a)})),(0,j.BW)(f,e)}}function D(){const t=localStorage.getItem("teams"),e=[];for(let n=0;n<o.value;n++)e.push((0,_.Mu)(n));if(t){const n=JSON.parse(t);(0,_.GX)(e,n,!0),o.value=e.length,m.value=t}l.splice(0,l.length,...e)}const w=()=>{l.forEach((t=>{t.tags.forEach((t=>{void 0===h[t]&&(h[t]=!1)}))}))},V=()=>{R(),D(),w()},K=()=>{localStorage.setItem("teams",y.value),D(),d.value=0},N=()=>{l.forEach((t=>{(0,_.ab)(t)}))},W=t=>{d.value=t},X=t=>{t==d.value?(n.value=!0,(0,i.dY)().then((()=>{document.getElementById("team-list-and-editor")?.scrollIntoView({behavior:"smooth"})}))):d.value=t},F=t=>{if(n.value=!1,d.value<0)return;B();const e=l.filter((t=>t.id==d.value))[0];if(e){e.name=t.name;for(let n=0;n<t.members.length;n++){const a=t.members[n],i=e.members[n];i.name==a.name&&i.buildname==t.members[n].buildname||(i.name=t.members[n].name,i.buildname=t.members[n].buildname,i.builddata=i.buildname?(0,_.ME)(i.name,i.buildname):void 0),C().isEqual(i.tags,a.tags)||i.tags.splice(0,i.tags.length,...a.tags),C().isEqual(i.replacements,a.replacements)||i.replacements.splice(0,i.replacements.length,...a.replacements)}e.description=t.description,C().isEqual(e.rotation,t.rotation)||e.rotation.splice(0,e.rotation.length,...t.rotation),e.tags=t.tags,w(),v.value&&v.value.initializeTeam(e)}},U=()=>{n.value=!1,B()},x=(t,e)=>{if(-1!=d.value){const n=l.filter((t=>t.id==d.value))[0];n&&(n.rotation.splice(0,n.rotation.length,...t),n.rotationDescription=e)}},P=()=>{(0,i.dY)().then((()=>{document.getElementById("team-rotation")?.scrollIntoView({behavior:"smooth"})}))},B=()=>{-1!=d.value&&(0,i.dY)().then((()=>{document.getElementById("team-"+d.value)?.scrollIntoView({behavior:"smooth"})}))},G=(t,e)=>{r[t]=e,t==d.value&&I.value};return{displayName:e,teamRotationVmRef:v,DISPLAY_STAT_LIST:a,NUMBER_OF_TEAMS:_.dk,numberOfTeams:o,displayStat:c,displayRes:s,displayTags:u,teams:l,constellations:f,teamEditorVisible:n,teamSelected:E,forcusedTeam:k,saveDisabled:T,teamMemberResult:I,searchWord:p,searchDatalist:b,teamTagList:g,teamTagChecked:h,filteredTeams:O,numberOfTeamsOnChange:L,saveOnClick:K,loadOnClick:V,clearOnClick:N,teamOnClick:W,editOnClick:X,teamEditorOnClickOk:F,teamEditorOnClickCancel:U,updateRotation:x,jumpToRotation:P,jumpToTeam:B,updateMemberResult:G}}}),N=n(1241);const W=(0,N.A)(K,[["render",I],["__scopeId","data-v-36d9cf19"]]);var X=W,F=n(2277);async function U(){(0,a.Ef)(X,{}).use(F.A).mount("#app")}U()},9164:function(t,e,n){n.d(e,{AS:function(){return T},FT:function(){return k},GX:function(){return D},Gm:function(){return d},KS:function(){return b},Kq:function(){return L},ME:function(){return I},MQ:function(){return g},Mu:function(){return S},RX:function(){return O},Wh:function(){return _},Yw:function(){return E},ZF:function(){return w},ab:function(){return j},dk:function(){return u},jI:function(){return m},mu:function(){return C},os:function(){return p},rr:function(){return y},uP:function(){return f}});n(4114);var a=n(8626),i=n.n(a),o=n(725),l=n(2112),r=n(1493),c=n(4949),s=n(3497);const u=10,d=4,m=["片手剣","長柄武器"],f=["鹿野院平蔵","リオセスリ"],p=["フリーナ","アルレッキーノ","マーヴィカ"];let h=0;const v=new Map;function b(t){let e;return t&&t in c.Zn&&(e=c.Zn[t]),e}async function g(){const t=[];for(const e of Object.keys(c.Zn))t.push((0,c.Td)(e).then((t=>{v.set(e,t)})));await Promise.all(t)}function k(t){return v.get(t)}function y(t,e){let n;if(t&&e&&t in c._U){const a=c._U[t];e in a&&(n=a[e])}return n}function T(t){const e=t.split("_"),n=e[1];let a;return e.splice(0,2),a=e.length>0?e.join("_"):(0,r.no)(n),a}function E(t){return Object.keys(localStorage).filter((e=>e.startsWith((0,r.F0)(t))))}function I(t,e){let n;const a=(0,r.F0)(t,e),i=localStorage.getItem(a);return i&&(n=JSON.parse(i)),n}function O(){return{characterInput:(0,r.D$)(),artifactDetailInput:(0,r.fD)(),conditionInput:(0,r.BP)(),optionInput:(0,r.Xs)(),statsInput:(0,r.b7)(),damageResult:(0,r.GQ)()}}const C=async(t,e)=>{const n=O();if(!t.name)return n;n.characterInput.character=t.name,n.characterInput.characterMaster=await(0,c.Td)(n.characterInput.character);const a={"片手剣":"無鋒の剣","両手剣":"訓練用大剣","長柄武器":"新米の長槍","弓":"狩猟弓","法器":"生徒ノート"};n.characterInput.weapon=a[n.characterInput.characterMaster.武器];const i=t.builddata;if(!i)return n;if(await(0,r.g4)(n.characterInput,n.artifactDetailInput,n.conditionInput,n.optionInput,i),(0,r.Lk)(n.characterInput),(0,r.Oq)(n.characterInput),(0,r.pL)(n.characterInput),(0,r.N2)(n.conditionInput,n.characterInput,n.optionInput),(0,o.Jo)(n.artifactDetailInput.聖遺物ステータスメイン効果,n.artifactDetailInput.聖遺物メイン効果),(0,o.S_)(n.artifactDetailInput),n.conditionInput.checkboxList.forEach((t=>{n.conditionInput.conditionValues[t.name]=!1})),n.conditionInput.selectList.forEach((t=>{n.conditionInput.conditionValues[t.name]=0})),await(0,r.c0)(n.characterInput,n.conditionInput,n.optionInput),L(e)){const t={};L(e).filter((t=>["炎元素共鳴","水元素共鳴","草元素共鳴","元素共鳴なし"].includes(t))).forEach((e=>{if(n.optionInput.elementalResonance.conditionValues[e]=!0,"詳細"in c.u[e]){const n=c.u[e].詳細;if(n)for(const e of n)"種類"in e&&"数値"in e&&(e.種類 in t?t[e.種類]+=e.数値:t[e.種類]=e.数値)}})),(0,l.BW)(n.optionInput.elementalResonance.conditionAdjustments,t)}return(0,o.s2)(n.statsInput,n.characterInput,n.artifactDetailInput,n.conditionInput,n.optionInput),(0,o.h9)(n.damageResult,n.characterInput,n.conditionInput,n.statsInput),n},L=t=>{const e=[],n={},a=t.members.filter((t=>t.name));return 4==a.length&&(a.forEach((t=>{const e=b(t.name);e&&(e.元素 in n?n[e.元素]++:n[e.元素]=1)})),4==Object.keys(n).length?e.push("元素共鳴なし"):Object.keys(n).forEach((t=>{n[t]>=2&&e.push(t+"元素共鳴")}))),e};function R(t){return{id:t,name:"",buildname:void 0,builddata:void 0,tags:[],replacements:[]}}function S(t){const e={id:t,name:"チーム"+(t+1),members:[],description:"",rotation:[],rotationDescription:"",tags:[]};for(let n=0;n<d;n++)e.members.push(R(h++));return e}function M(t){t.name="",t.buildname=void 0,t.builddata=void 0,t.tags=[],t.replacements=[]}function j(t){t.name="チーム"+(t.id+1),t.members.forEach((t=>{M(t)}))}function _(t){const e=i().cloneDeep(t);let n=0;return e.forEach((t=>{t.id=n++,t.members.forEach((t=>{t.id=0,t.builddata=void 0})),t.rotation?.length&&t.rotation.forEach((t=>{t.id=0}))})),JSON.stringify(e,((t,e)=>null!==e?e:void 0))}function D(t,e,n=!1){let a=0;for(let o=0;o<e.length;o++){const l=e[o];let r=t[o];r||(r=S(o),t.push(r)),r.name=l.name;for(let t=0;t<r.members.length;t++)if(l.members?.length){const e=l.members[t];e&&(r.members[t].name=e.name,n?(r.members[t].buildname=e.buildname,r.members[t].builddata=e.buildname?I(e.name,e.buildname):void 0):(r.members[t].buildname=void 0,r.members[t].builddata=void 0),r.members[t].tags=e.tags??[],r.members[t].replacements=e.replacements??[])}r.description=l.description??"",l.rotation?.length&&(r.rotation=i().cloneDeep(l.rotation),r.rotation.forEach((t=>{if(t.id=a++,t.action.startsWith("E")){const e=(0,s.y0)(t.member);e.includes(t.action)||(t.action=e[0])}}))),r.rotationDescription=l.rotationDescription??"",r.tags=l.tags??[]}t.length>e.length&&t.length>=u&&t.splice(e.length)}function w(t){let e=1;const n=k(t);if(n)for(const a of[n.特殊通常攻撃?.詳細,n.通常攻撃?.詳細]){if(!a)continue;let t=1;a.forEach((e=>{if(e.名前){const n=e.名前.match(/.*(\d)段.+/);if(!n)return;const a=Number(n[1]);a>t&&(t=a)}})),e<t&&(e=t)}return e}}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var o=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,function(){var t=[];n.O=function(e,a,i,o){if(!a){var l=1/0;for(u=0;u<t.length;u++){a=t[u][0],i=t[u][1],o=t[u][2];for(var r=!0,c=0;c<a.length;c++)(!1&o||l>=o)&&Object.keys(n.O).every((function(t){return n.O[t](a[c])}))?a.splice(c--,1):(r=!1,o<l&&(l=o));if(r){t.splice(u--,1);var s=i();void 0!==s&&(e=s)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,i,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){n.j=609}(),function(){var t={609:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,o,l=a[0],r=a[1],c=a[2],s=0;if(l.some((function(e){return 0!==t[e]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(c)var u=c(n)}for(e&&e(a);s<l.length;s++)o=l[s],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(u)},a=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504,996],(function(){return n(8039)}));a=n.O(a)})();
//# sourceMappingURL=TeamManager.29ecd366.js.map