{"version":3,"file":"js/chunk-common.9cd89816.js","mappings":"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","sources":["webpack://gencalc/./src/common.ts","webpack://gencalc/./src/i18n.ts","webpack://gencalc/./src/input.ts","webpack://gencalc/./src/components/CharacterSelect.vue?c946","webpack://gencalc/./src/components/CharacterSelect.vue?1f8b","webpack://gencalc/./src/components/CharacterSelect.vue","webpack://gencalc/./src/components/CompositionFunction.vue?c68d","webpack://gencalc/./src/components/CompositionFunction.vue"],"sourcesContent":["export function isString(value: any): boolean {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\n\r\nexport function isNumber(value: any): boolean {\r\n    return isFinite(value) && value != null;\r\n}\r\n\r\nexport function isBoolean(value: any): boolean {\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isPlainObject(value: any): boolean {\r\n    const myType = Object.prototype.toString.call(value);\r\n    return myType === '[object Object]';\r\n}\r\n\r\n/** 簡易なdeep copy。undefinedなどは消失します */\r\nexport function deepcopy(value: any): any {\r\n    const result = JSON.parse(JSON.stringify(value));\r\n    return result;\r\n}\r\n\r\nexport function overwriteObject(dst: any, src: any) {\r\n    if (isPlainObject(src) && isPlainObject(dst)) {\r\n        const srcKeys = Object.keys(src);\r\n        for (const key of srcKeys) {\r\n            dst[key] = src[key];\r\n        }\r\n        for (const key of Object.keys(dst)) {\r\n            if (!srcKeys.includes(key)) delete dst[key];\r\n        }\r\n    }\r\n    return dst;\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport const basename = (path: string) => path!.split('/')!.pop()!.split('.')!.shift()!;\r\n","import { createI18n } from 'vue-i18n'\r\n\r\nconst i18n = createI18n({\r\n  legacy: false,\r\n  locale: 'ja-jp',\r\n  fallbackLocale: 'en-us',\r\n  isGlobal: true,\r\n})\r\nexport default i18n;\r\n","import { ARTIFACT_SET_MASTER, ARTIFACT_STAT_JA_EN_ABBREV_MAP, ARTIFACT_SUB_MASTER, CHARACTER_MASTER, DAMAGE_CATEGORY_ARRAY, ELEMENTAL_RESONANCE_MASTER, ENEMY_MASTER_LIST, GENSEN_MASTER_LIST, getCharacterMasterDetail, getWeaponMasterDetail, IMG_SRC_DUMMY, RECOMMEND_ABBREV_MAP, TAnyObject, TArtifactSet, TArtifactSetEntry, TArtifactSetKey, TArtifactSubKey, TCharacterDetail, TCharacterKey, TEnemyEntry, TWeaponDetail, TWeaponKey, TWeaponTypeKey, WEAPON_MASTER, キャラクター構成PROPERTY_MAP } from '@/master';\r\nimport { basename, deepcopy, isNumber, isPlainObject, isString, overwriteObject } from './common';\r\n\r\nexport const 基礎ステータスARRAY = [\r\n    '基礎HP',\r\n    '基礎攻撃力',\r\n    '基礎防御力'\r\n];\r\nexport const 基本ステータスARRAY = [\r\n    'HP上限',\r\n    '攻撃力',\r\n    '防御力',\r\n    '元素熟知'\r\n];\r\nexport const 高級ステータスARRAY = [\r\n    '会心率',\r\n    '会心ダメージ',\r\n    '与える治療効果',\r\n    '受ける治療効果',\r\n    '元素チャージ効率',\r\n    'クールタイム短縮',\r\n    'シールド強化'\r\n];\r\nexport const 元素ステータス_ダメージARRAY = [\r\n    '炎元素ダメージバフ',\r\n    '水元素ダメージバフ',\r\n    '風元素ダメージバフ',\r\n    '雷元素ダメージバフ',\r\n    '草元素ダメージバフ',\r\n    '氷元素ダメージバフ',\r\n    '岩元素ダメージバフ',\r\n    '物理ダメージバフ'\r\n];\r\nexport const 元素ステータス_耐性ARRAY = [\r\n    '炎元素耐性',\r\n    '水元素耐性',\r\n    '風元素耐性',\r\n    '雷元素耐性',\r\n    '草元素耐性',\r\n    '氷元素耐性',\r\n    '岩元素耐性',\r\n    '物理耐性'\r\n];\r\nexport const ダメージバフARRAY = [\r\n    '通常攻撃ダメージバフ',\r\n    '重撃ダメージバフ',\r\n    '落下攻撃ダメージバフ',\r\n    '元素スキルダメージバフ',\r\n    '元素爆発ダメージバフ',\r\n    '与えるダメージ',\r\n];\r\nexport const 実数ダメージ加算ARRAY = [\r\n    '通常攻撃ダメージアップ',\r\n    '重撃ダメージアップ',\r\n    '落下攻撃ダメージアップ',\r\n    '元素スキルダメージアップ',\r\n    '元素爆発ダメージアップ',\r\n    '炎元素ダメージアップ',\r\n    '水元素ダメージアップ',\r\n    '風元素ダメージアップ',\r\n    '雷元素ダメージアップ',\r\n    '草元素ダメージアップ',\r\n    '氷元素ダメージアップ',\r\n    '岩元素ダメージアップ',\r\n    '物理ダメージアップ'\r\n];\r\nexport const 元素反応バフARRAY = [\r\n    '蒸発反応ボーナス',\r\n    '溶解反応ボーナス',\r\n    '過負荷反応ボーナス',\r\n    '感電反応ボーナス',\r\n    '凍結反応ボーナス',\r\n    '超電導反応ボーナス',\r\n    '拡散反応ボーナス',\r\n    '結晶反応ボーナス',\r\n    '燃焼反応ボーナス',\r\n    '開花反応ボーナス',\r\n    '烈開花反応ボーナス',\r\n    '超開花反応ボーナス',\r\n    '超激化反応ボーナス',\r\n    '草激化反応ボーナス',\r\n];\r\nexport const ステータスその他ARRAY = [\r\n    'ダメージ軽減',\r\n    'HP%',\r\n    '攻撃力%',\r\n    '防御力%',\r\n    'HP+',\r\n    '攻撃力+',\r\n    '防御力+'\r\n];\r\nexport const 敵ステータス_元素耐性ARRAY = [\r\n    '敵炎元素耐性',\r\n    '敵水元素耐性',\r\n    '敵風元素耐性',\r\n    '敵雷元素耐性',\r\n    '敵草元素耐性',\r\n    '敵氷元素耐性',\r\n    '敵岩元素耐性',\r\n    '敵物理耐性'\r\n];\r\nexport const 敵ステータス_その他ARRAY = [\r\n    '敵防御力'\r\n];\r\n\r\nexport const ステータスARRAY_MAP = new Map([\r\n    ['基礎ステータス', 基礎ステータスARRAY],\r\n    ['基本ステータス', 基本ステータスARRAY],\r\n    ['高級ステータス', 高級ステータスARRAY],\r\n    ['元素ステータス·ダメージ', 元素ステータス_ダメージARRAY],\r\n    ['元素ステータス·耐性', 元素ステータス_耐性ARRAY],\r\n    ['ダメージバフ', ダメージバフARRAY],\r\n    ['実数ダメージ加算', 実数ダメージ加算ARRAY],\r\n    ['元素反応バフ', 元素反応バフARRAY],\r\n    ['その他', ステータスその他ARRAY],\r\n    ['敵ステータス·元素耐性', 敵ステータス_元素耐性ARRAY],\r\n    ['敵ステータス·その他', 敵ステータス_その他ARRAY],\r\n]);\r\n\r\nexport const STAT_PERCENT_LIST = [\r\n    ...高級ステータスARRAY, ...元素ステータス_ダメージARRAY, ...元素ステータス_耐性ARRAY, ...ダメージバフARRAY, ...元素反応バフARRAY, ...敵ステータス_元素耐性ARRAY,\r\n    '別枠乗算',\r\n];\r\n\r\nfunction makeStatusTenmplate() {\r\n    const statsObj = {} as { [key: string]: number };\r\n    ステータスARRAY_MAP.forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj['会心率'] = 5;\r\n    statsObj['会心ダメージ'] = 50;\r\n    statsObj['元素チャージ効率'] = 100;\r\n    statsObj['敵レベル'] = 0;\r\n    statsObj['敵防御力'] = 0;\r\n    return statsObj;\r\n}\r\nexport const ステータスTEMPLATE = makeStatusTenmplate();\r\nexport type TStats = {\r\n    [key: string]: number,\r\n};\r\n\r\nfunction makeEnemyStatusTemplate() {\r\n    const statsObj = {} as { [key: string]: number };\r\n    [元素ステータス_耐性ARRAY].forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj['防御力'] = 0;\r\n    return statsObj;\r\n}\r\nexport const 敵ステータスTEMPLATE = makeEnemyStatusTemplate();\r\n\r\nexport const 聖遺物メイン効果_生の花ARRAY = [\r\n    '5_HP', '4_HP'\r\n];\r\nexport const 聖遺物メイン効果_死の羽ARRAY = [\r\n    '5_攻撃力', '4_攻撃力'\r\n];\r\nexport const 聖遺物メイン効果_時の砂ARRAY = [\r\n    '5_元素チャージ効率',\r\n    '5_HP%',\r\n    '5_攻撃力%',\r\n    '5_防御力%',\r\n    '5_元素熟知',\r\n    '4_元素チャージ効率',\r\n    '4_HP%',\r\n    '4_攻撃力%',\r\n    '4_防御力%',\r\n    '4_元素熟知'\r\n];\r\nexport const 聖遺物メイン効果_空の杯ARRAY = [\r\n    '5_炎元素ダメージバフ',\r\n    '5_水元素ダメージバフ',\r\n    '5_風元素ダメージバフ',\r\n    '5_雷元素ダメージバフ',\r\n    '5_草元素ダメージバフ',\r\n    '5_氷元素ダメージバフ',\r\n    '5_岩元素ダメージバフ',\r\n    '5_物理ダメージバフ',\r\n    '5_HP%',\r\n    '5_攻撃力%',\r\n    '5_防御力%',\r\n    '5_元素熟知',\r\n    '4_炎元素ダメージバフ',\r\n    '4_水元素ダメージバフ',\r\n    '4_風元素ダメージバフ',\r\n    '4_雷元素ダメージバフ',\r\n    '4_草元素ダメージバフ',\r\n    '4_氷元素ダメージバフ',\r\n    '4_岩元素ダメージバフ',\r\n    '4_物理ダメージバフ',\r\n    '4_HP%',\r\n    '4_攻撃力%',\r\n    '4_防御力%',\r\n    '4_元素熟知'\r\n];\r\nexport const 聖遺物メイン効果_理の冠ARRAY = [\r\n    '5_会心率',\r\n    '5_会心ダメージ',\r\n    '5_HP%',\r\n    '5_攻撃力%',\r\n    '5_防御力%',\r\n    '5_元素熟知',\r\n    '5_与える治療効果',\r\n    '4_会心率',\r\n    '4_会心ダメージ',\r\n    '4_HP%',\r\n    '4_攻撃力%',\r\n    '4_防御力%',\r\n    '4_元素熟知',\r\n    '4_与える治療効果'\r\n];\r\n\r\nexport const 聖遺物サブ効果ARRAY = [\r\n    'HP',\r\n    '攻撃力',\r\n    '防御力',\r\n    '元素熟知',\r\n    '会心率',\r\n    '会心ダメージ',\r\n    '元素チャージ効率',\r\n    '攻撃力%',\r\n    'HP%',\r\n    '防御力%',\r\n];\r\nexport const 聖遺物優先するサブ効果ARRAY = [\r\n    '攻撃力%',\r\n    'HP%',\r\n    '防御力%',\r\n    '元素熟知',\r\n    '会心率',\r\n    '会心ダメージ',\r\n    '元素チャージ効率',\r\n];\r\n\r\nexport const 聖遺物ステータスTEMPLATE = {\r\n    'HP': 0,\r\n    '攻撃力': 0,\r\n    '防御力': 0,\r\n    '元素熟知': 0,\r\n    '会心率': 0,\r\n    '会心ダメージ': 0,\r\n    '元素チャージ効率': 0,\r\n    'HP%': 0,\r\n    '攻撃力%': 0,\r\n    '防御力%': 0,\r\n    '炎元素ダメージバフ': 0,\r\n    '水元素ダメージバフ': 0,\r\n    '風元素ダメージバフ': 0,\r\n    '雷元素ダメージバフ': 0,\r\n    '草元素ダメージバフ': 0,\r\n    '氷元素ダメージバフ': 0,\r\n    '岩元素ダメージバフ': 0,\r\n    '物理ダメージバフ': 0,\r\n    '与える治療効果': 0,\r\n};\r\n\r\nexport const 元素反応TEMPLATE = {\r\n    元素: '炎',\r\n    蒸発倍率: 0,\r\n    溶解倍率: 0,\r\n    過負荷ダメージ: 0,\r\n    感電ダメージ: 0,\r\n    超電導ダメージ: 0,\r\n    拡散ダメージ: 0,\r\n    拡散元素: '炎',\r\n    結晶吸収量: 0,\r\n    燃焼ダメージ: 0,\r\n    開花ダメージ: 0,\r\n    烈開花ダメージ: 0,\r\n    超開花ダメージ: 0,\r\n    超激化ダメージ: 0,\r\n    草激化ダメージ: 0,\r\n};\r\nexport type TDamageResultElementalReaction = typeof 元素反応TEMPLATE;\r\nexport type TDamageResultElementalReactionKey = keyof typeof 元素反応TEMPLATE;\r\n\r\nexport type TDamageResultEntry = [string, string | null, number, number | null, number, string | null, number | null, number | null, number | null];    // 名前, 元素, 期待値, 会心, 非会心, 種類, HIT数, ダメージバフ, 敵の防御補正\r\nexport type TDamageResult = {\r\n    元素反応: TDamageResultElementalReaction,\r\n    通常攻撃: TDamageResultEntry[],\r\n    重撃: TDamageResultEntry[],\r\n    落下攻撃: TDamageResultEntry[],\r\n    元素スキル: TDamageResultEntry[],\r\n    元素爆発: TDamageResultEntry[],\r\n    その他: TDamageResultEntry[],\r\n    キャラクター注釈: string[],\r\n    [key: string]: TDamageResultElementalReaction | TDamageResultEntry[] | string[],\r\n};\r\n\r\nexport const DAMAGE_RESULT_TEMPLATE = {\r\n    元素反応: deepcopy(元素反応TEMPLATE) as TDamageResultElementalReaction,\r\n    通常攻撃: [] as TDamageResultEntry[],\r\n    重撃: [] as TDamageResultEntry[],\r\n    落下攻撃: [] as TDamageResultEntry[],\r\n    元素スキル: [] as TDamageResultEntry[],\r\n    元素爆発: [] as TDamageResultEntry[],\r\n    その他: [] as TDamageResultEntry[],\r\n    キャラクター注釈: [] as string[],\r\n};\r\n\r\nexport const 突破レベルレベルARRAY = [\r\n    Array.from({ length: 20 }, (_, i) => i + 1),\r\n    Array.from({ length: 21 }, (_, i) => i + 20),\r\n    Array.from({ length: 11 }, (_, i) => i + 40),\r\n    Array.from({ length: 11 }, (_, i) => i + 50),\r\n    Array.from({ length: 11 }, (_, i) => i + 60),\r\n    Array.from({ length: 11 }, (_, i) => i + 70),\r\n    Array.from({ length: 11 }, (_, i) => i + 80),\r\n];\r\n\r\n\r\nexport type TDamageDetailObj = {\r\n    名前: string | null,\r\n    種類: string | null,\r\n    元素: string | null,\r\n    数値: number | string | Array<any> | null,\r\n    条件: string | null,\r\n    対象: string | null,\r\n    上限: number | string | Array<any> | null,\r\n    HIT数: number | null,\r\n    ダメージバフ: string | null,\r\n    元素付与無効: boolean | null,\r\n    除外条件: (string | object)[] | null,\r\n    適用条件: (string | object)[] | null,\r\n};\r\n\r\nexport type TDamageDetail = {\r\n    通常攻撃?: TDamageDetailObj[],\r\n    重撃?: TDamageDetailObj[],\r\n    落下攻撃?: TDamageDetailObj[],\r\n    元素スキル?: TDamageDetailObj[],\r\n    元素爆発?: TDamageDetailObj[],\r\n    その他?: TDamageDetailObj[],\r\n    ステータス変更系詳細: TDamageDetailObj[],\r\n    天賦性能変更系詳細: TDamageDetailObj[],\r\n    条件: Map<string, string[]>,\r\n    排他: Map<string, string[]>,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_DUMMY = {\r\n    key: 'NONE' as TArtifactSetKey,\r\n    レアリティ: 5,\r\n    image: IMG_SRC_DUMMY,\r\n} as TArtifactSet;\r\n\r\nexport const CHARACTER_INPUT_TEMPLATE = {\r\n    character: 'アンバー' as TCharacterKey,\r\n    characterMaster: {} as TCharacterDetail,\r\n    突破レベル: 6,\r\n    レベル: 90,\r\n    命ノ星座: 0,\r\n    通常攻撃レベル: 8,\r\n    元素スキルレベル: 8,\r\n    元素爆発レベル: 8,\r\n    weapon: '西風猟弓' as TWeaponKey,\r\n    weaponMaster: {} as TWeaponDetail,\r\n    武器突破レベル: 6,\r\n    武器レベル: 90,\r\n    武器精錬ランク: 1,\r\n    artifactSets: ['NONE' as TArtifactSetKey, 'NONE' as TArtifactSetKey],\r\n    artifactSetMasters: [ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[],\r\n    damageDetailMyCharacter: null as TDamageDetail | null,\r\n    damageDetailMyWeapon: null as TDamageDetail | null,\r\n    damageDetailMyArtifactSets: null as TDamageDetail | null,\r\n    buildname: '',\r\n    recommendationSelectedIndex: 0,\r\n    saveDisabled: true,     // ローカルストレージへの構成保存不可か？\r\n    removeDisabled: true,   // ローカルストレージの構成削除不可か？\r\n};\r\nexport type TCharacterInput = typeof CHARACTER_INPUT_TEMPLATE;\r\n\r\nexport const ARTIFACT_DETAIL_INPUT_TEMPLATE = {\r\n    聖遺物メイン効果: ['', '', '', '', ''],\r\n    聖遺物優先するサブ効果: ['', '', ''],\r\n    聖遺物優先するサブ効果上昇値: Array.from(GENSEN_MASTER_LIST[2].values),     // 厳選1ヶ月\r\n    聖遺物優先するサブ効果上昇回数: Array.from(GENSEN_MASTER_LIST[2].counts),   // 厳選1ヶ月\r\n    聖遺物ステータス: deepcopy(聖遺物ステータスTEMPLATE),\r\n    聖遺物ステータスメイン効果: deepcopy(聖遺物ステータスTEMPLATE),\r\n    聖遺物ステータスサブ効果: deepcopy(聖遺物ステータスTEMPLATE),\r\n    聖遺物優先するサブ効果Disabled: false,\r\n};\r\nexport type TArtifactDetailInput = typeof ARTIFACT_DETAIL_INPUT_TEMPLATE;\r\n\r\nexport type TCheckboxEntry = {\r\n    name: string;\r\n    displayName?: string,\r\n};\r\nexport type TSelectEntry = {\r\n    name: string;\r\n    displayName?: string,\r\n    options: string[];\r\n    required: boolean;\r\n};\r\nexport type TConditionValues = {\r\n    [key: string]: boolean | number | null,\r\n};\r\nexport type TConditionAdjustments = {\r\n    [key: string]: number | null,\r\n};\r\nexport const CONDITION_INPUT_TEMPLATE = {\r\n    checkboxList: [] as TCheckboxEntry[],\r\n    selectList: [] as TSelectEntry[],\r\n    conditionValues: {} as TConditionValues,\r\n    conditionAdjustments: {} as TConditionAdjustments,\r\n    攻撃元素: [null, null, null] as (string | null)[],\r\n};\r\nexport type TConditionInput = typeof CONDITION_INPUT_TEMPLATE;\r\n\r\nexport const STATS_INPUT_TEMPLATE = {\r\n    statsObj: deepcopy(ステータスTEMPLATE) as TStats,\r\n    statAdjustments: deepcopy(ステータスTEMPLATE) as TStats,\r\n    enemyMaster: ENEMY_MASTER_LIST[0] as TEnemyEntry,\r\n};\r\nfor (const stat of Object.keys(STATS_INPUT_TEMPLATE.statAdjustments)) {\r\n    STATS_INPUT_TEMPLATE.statAdjustments[stat] = 0;\r\n}\r\nexport type TStatsInput = typeof STATS_INPUT_TEMPLATE;\r\n\r\nexport const OPTION_INPUT_TEMPLATE = {\r\n    elementalResonance: {\r\n        conditionValues: {} as TConditionValues,\r\n        conditionAdjustments: {} as TConditionAdjustments,\r\n    },\r\n    supporterList: [],\r\n    isSupporterOptionOpened: {} as { [key: string]: boolean },\r\n    teamOption: deepcopy(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n    miscOption: deepcopy(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n};\r\nexport type TOptionInput = typeof OPTION_INPUT_TEMPLATE;\r\n\r\nexport const SUPPORTER_INPUT_TEMPLATE = {\r\n    characterInput: deepcopy(CHARACTER_INPUT_TEMPLATE) as TCharacterInput,\r\n    artifactDetailInput: deepcopy(ARTIFACT_DETAIL_INPUT_TEMPLATE) as TArtifactDetailInput,\r\n    conditionInput: deepcopy(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n    statusInput: deepcopy(STATS_INPUT_TEMPLATE) as TStatsInput,\r\n};\r\nexport type TSupporterInput = typeof SUPPORTER_INPUT_TEMPLATE;\r\n\r\n/** レベル文字列（1+,20,20+,...,90）を突破レベルとレベルに分割します */\r\nexport function parseLevelStr(levelStr: number | string): [number, number] {\r\n    try {\r\n        let level: number;\r\n        if (isString(levelStr)) {\r\n            level = Number(String(levelStr).replace('+', ''));\r\n        } else {\r\n            level = Number(levelStr);\r\n        }\r\n        let ascension = 0;\r\n        for (let i = (突破レベルレベルARRAY.length - 1); i >= 0; i--) {\r\n            ascension = i;\r\n            if (突破レベルレベルARRAY[i][0] > level) continue;\r\n            if (突破レベルレベルARRAY[i][0] == level && !String(levelStr).endsWith('+')) {\r\n                ascension--;\r\n            }\r\n            break;\r\n        }\r\n        return [ascension, level];\r\n    } catch (error) {\r\n        console.error(levelStr);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport type TRecommendation = {\r\n    name: string,\r\n    build: any,\r\n    overwrite: boolean\r\n}\r\n\r\nexport function makeDefaultBuildname(character: any) {\r\n    return 'あなたの' + character;\r\n}\r\n\r\nexport function makeBuildStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    let result = '構成_' + character;\r\n    if (buildname && buildname != makeDefaultBuildname(character)) {\r\n        result += '_' + buildname;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeOptionStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return 'オプション' + makeBuildStorageKey(character, buildname);\r\n}\r\n\r\nexport function makeArtifactScoringStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^構成/, 'ArtifactScoring');\r\n}\r\n\r\n/** おすすめセットのリストを作成します. [おすすめセットの名前, おすすめセットの内容, 上書き可不可][] */\r\nexport function makeRecommendationList(characterMaster: { [key: string]: any }, opt_buildData?: { [key: string]: any }): TRecommendation[] {\r\n    const result: TRecommendation[] = [];\r\n\r\n    const character = characterMaster['名前'];\r\n    let isSavable: boolean | null = null;\r\n\r\n    if (opt_buildData) {\r\n        result.push({ name: 'IMPORTED DATA', build: opt_buildData, overwrite: false });\r\n        isSavable = true;\r\n        console.log(opt_buildData);\r\n    }\r\n\r\n    const storageKeyArr: string[] = [];\r\n    Object.keys(localStorage).forEach(key => {\r\n        if (key.startsWith(makeBuildStorageKey(character))) {\r\n            storageKeyArr.push(key);\r\n            if (isSavable == null) {\r\n                isSavable = false;\r\n            }\r\n        }\r\n    });\r\n    storageKeyArr.sort();\r\n    const re = new RegExp('^構成_' + character + '_');\r\n    storageKeyArr.forEach(key => {\r\n        let buildname;\r\n        if (key == makeBuildStorageKey(character)) {\r\n            buildname = makeDefaultBuildname(character);\r\n        } else {\r\n            buildname = key.replace(re, '');\r\n        }\r\n        const buildObj = JSON.parse(localStorage[key]);\r\n        const key2 = 'オプション' + key;\r\n        if (key2 in localStorage) {\r\n            const optionsObj = JSON.parse(localStorage[key2]);\r\n            buildObj.options = optionsObj;\r\n        }\r\n        const key3 = key.replace(/^構成/, 'ArtifactScoring');\r\n        if (key3 in localStorage) {\r\n            const artifactScoringObj = JSON.parse(localStorage[key3]);\r\n            buildObj.artifactScoring = artifactScoringObj;\r\n        }\r\n        result.push({ name: buildname, build: buildObj, overwrite: true });\r\n    });\r\n\r\n    characterMaster['おすすめセット'].forEach((obj: { [key: string]: any }) => {\r\n        const myRecommendation = obj;\r\n        ['聖遺物優先するサブ効果1', '聖遺物優先するサブ効果2', '聖遺物優先するサブ効果3'].forEach(stat => {\r\n            if (!(stat in obj)) {\r\n                obj[stat] = null;\r\n            }\r\n        });\r\n        const artifactRarerityArrArr = [[5, 5, 5, 5, 5], [4, 4, 5, 5, 5], [4, 4, 4, 5, 4]];\r\n        let artifactRarerity4Num = 0;\r\n        const artifactSet1 = myRecommendation['聖遺物セット効果1'] as TArtifactSetKey;\r\n        const artifactSet2 = myRecommendation['聖遺物セット効果2'] as TArtifactSetKey;\r\n        if (ARTIFACT_SET_MASTER[artifactSet1]['レアリティ'] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        if (ARTIFACT_SET_MASTER[artifactSet2]['レアリティ'] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        for (let i = 0; i < 2; i++) {\r\n            const name = '聖遺物メイン効果' + (i + 1);\r\n            if (!(name in myRecommendation)) {\r\n                if (i == 0) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_HP';\r\n                } else if (i == 1) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_攻撃力';\r\n                }\r\n            }\r\n        }\r\n\r\n        let buildname = myRecommendation['武器'];\r\n        buildname += ' ';\r\n        if (myRecommendation['聖遺物セット効果1'] == myRecommendation['聖遺物セット効果2']) {\r\n            buildname += myRecommendation['聖遺物セット効果1'];\r\n        } else {\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['聖遺物セット効果1']);\r\n            buildname += '/';\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['聖遺物セット効果2']);\r\n        }\r\n        buildname += ' [';\r\n        for (let i = 3; i <= 5; i++) {\r\n            const statusName = myRecommendation['聖遺物メイン効果' + i].split('_')[1];\r\n            if (RECOMMEND_ABBREV_MAP.has(statusName)) {\r\n                buildname += RECOMMEND_ABBREV_MAP.get(statusName);\r\n            } else {\r\n                buildname += statusName.substring(0, 1);\r\n            }\r\n        }\r\n        buildname += ']';\r\n        result.push({ name: buildname, build: myRecommendation, overwrite: false });\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\n/** 聖遺物セット名の略称を作成します */\r\nfunction makeArtifactSetAbbrev(name: string): string {\r\n    const abbrRe = /[\\p{sc=Hiragana}\\p{sc=Katakana}ー]+/ug;\r\n    let abbr = name.replace(abbrRe, '');\r\n    if (abbr.length > 2) {\r\n        abbr = name.split(abbrRe).sort((a, b) => {\r\n            return b.length - a.length;\r\n        })[0];\r\n    }\r\n    if (abbr.length > 3) {\r\n        abbr = abbr.substring(0, 2);\r\n    }\r\n    return abbr;\r\n}\r\n\r\nexport function makePrioritySubstatValueList(\r\n    prioritySubstats: TArtifactSubKey[],\r\n    index: number,\r\n    opt_substat?: TArtifactSubKey\r\n) {\r\n    const result: number[] = [];\r\n    if (prioritySubstats[index]) {\r\n        if (!opt_substat) opt_substat = prioritySubstats[index];\r\n        if (opt_substat && opt_substat in ARTIFACT_SUB_MASTER) {\r\n            const valueArr = ARTIFACT_SUB_MASTER[opt_substat];\r\n            for (let i = 0; i < valueArr.length; i++) {\r\n                result.push(valueArr[i]);\r\n                if (i < valueArr.length - 1) {\r\n                    const diff = valueArr[i + 1] - valueArr[i];\r\n                    result.push(valueArr[i] + diff / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/** おすすめセットをロードします */\r\nexport async function loadRecommendation(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n    build: { [key: string]: any }\r\n) {\r\n    try {\r\n        const character = characterInput.character;\r\n        const characterMaster = await getCharacterMasterDetail(character);\r\n        characterInput.characterMaster = characterMaster;\r\n        const artifactStatsSub = deepcopy(聖遺物ステータスTEMPLATE);\r\n\r\n        if ('レベル' in build) {\r\n            [characterInput.突破レベル, characterInput.レベル] = parseLevelStr(build['レベル']);\r\n        }\r\n        ['命ノ星座', '通常攻撃レベル', '元素スキルレベル', '元素爆発レベル'].forEach(key => {\r\n            if (key in build) {\r\n                (characterInput as any)[key] = Number(build[key]);\r\n            }\r\n        });\r\n\r\n        const weaponType = characterMaster['武器'];\r\n        if ('武器' in build) {\r\n            if (Object.keys(WEAPON_MASTER[weaponType]).includes(build['武器'])) {\r\n                characterInput.weapon = build['武器'] as TWeaponKey;\r\n            } else {\r\n                characterInput.weapon = Object.keys(WEAPON_MASTER[weaponType]).filter(s => s.startsWith('西風'))[0] as TWeaponKey;\r\n            }\r\n            characterInput.weaponMaster = await getWeaponMasterDetail(characterInput.weapon, weaponType);\r\n        }\r\n        if ('武器レベル' in build) {\r\n            [characterInput.武器突破レベル, characterInput.武器レベル] = parseLevelStr(build['武器レベル']);\r\n        }\r\n        if ('精錬ランク' in build) {\r\n            characterInput.武器精錬ランク = Number(build['精錬ランク']);\r\n        }\r\n\r\n        let prioritySubstatsDisabled = false;\r\n        for (const key of Object.keys(build).filter((s: string) => s.startsWith('聖遺物サブ効果'))) {\r\n            let toKey = key.replace(/^聖遺物サブ効果/, '');\r\n            if (toKey != 'HP') toKey = toKey.replace(/P$/, '%');\r\n            if (build[key] || build[key] == 0) {\r\n                prioritySubstatsDisabled = true;\r\n                artifactStatsSub[toKey] = Number(build[key]);\r\n            }\r\n        }\r\n        artifactDetailInput.聖遺物優先するサブ効果Disabled = prioritySubstatsDisabled;\r\n\r\n        ['聖遺物セット効果1', '聖遺物セット効果2'].forEach((key, index) => {\r\n            if (!(key in build)) return;\r\n            const artifactSet = build[key] as TArtifactSetKey;\r\n            if (artifactSet && artifactSet in ARTIFACT_SET_MASTER) {\r\n                characterInput.artifactSets[index] = artifactSet;\r\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER[artifactSet] as TArtifactSetEntry;\r\n            } else {\r\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER_DUMMY as TArtifactSetEntry;\r\n            }\r\n        });\r\n\r\n        ['聖遺物メイン効果1', '聖遺物メイン効果2'].forEach((key, index) => {\r\n            if (key in build) {\r\n                artifactDetailInput['聖遺物メイン効果'][index] = build[key];\r\n            } else {\r\n                artifactDetailInput['聖遺物メイン効果'][index] = ['5_HP', '5_攻撃力'][index];\r\n            }\r\n        });\r\n        ['聖遺物メイン効果3', '聖遺物メイン効果4', '聖遺物メイン効果5'].forEach((key, index) => {\r\n            if (!(key in build)) return;\r\n            const mainstat = build[key];\r\n            artifactDetailInput['聖遺物メイン効果'][index + 2] = mainstat;\r\n        });\r\n        // for (const entry of artifactDetailInput['聖遺物メイン効果']) {\r\n        //     const [rarity, stat] = entry.split('_');\r\n        //     artifactStatsMain[stat] += (ARTIFACT_MAIN_MASTER as any)[rarity][stat];\r\n        // }\r\n        // overwriteObject(artifactDetailInput.聖遺物ステータスメイン効果, artifactStatsMain);\r\n\r\n        if (!prioritySubstatsDisabled) {\r\n            ['聖遺物優先するサブ効果1', '聖遺物優先するサブ効果2', '聖遺物優先するサブ効果3'].forEach((key, index) => {\r\n                if (!(key in build)) return;\r\n                const substat = build[key];\r\n                artifactDetailInput['聖遺物優先するサブ効果'][index] = substat;\r\n            });\r\n            ['聖遺物優先するサブ効果1上昇値', '聖遺物優先するサブ効果2上昇値', '聖遺物優先するサブ効果3上昇値'].forEach((key, index) => {\r\n                let doUpdate = false;\r\n                if (artifactDetailInput['聖遺物優先するサブ効果'][index]) {\r\n                    if ((key in build) && isNumber(build[key])) {\r\n                        doUpdate = true;\r\n                    }\r\n                }\r\n                if (doUpdate) {\r\n                    const substatValue = Number(build[key]);\r\n                    const substat = artifactDetailInput['聖遺物優先するサブ効果'][index] as TArtifactSubKey;\r\n                    const prioritySubstatValueList = makePrioritySubstatValueList([substat], 0);\r\n                    prioritySubstatValueList.forEach((v, i) => {\r\n                        if (substatValue <= v) {\r\n                            artifactDetailInput['聖遺物優先するサブ効果上昇値'][index] = i;\r\n                        }\r\n                    })\r\n                } else {\r\n                    if (artifactDetailInput['聖遺物優先するサブ効果'][index] && !artifactDetailInput['聖遺物優先するサブ効果上昇値'][index]) {\r\n                        artifactDetailInput['聖遺物優先するサブ効果上昇値'][index] = GENSEN_MASTER_LIST[2].values[index];\r\n                    }\r\n                }\r\n            });\r\n            ['聖遺物優先するサブ効果1上昇回数', '聖遺物優先するサブ効果2上昇回数', '聖遺物優先するサブ効果3上昇回数'].forEach((key, index) => {\r\n                let doUpdate = false;\r\n                if (artifactDetailInput['聖遺物優先するサブ効果'][index]) {\r\n                    if ((key in build) && isNumber(build[key])) {\r\n                        doUpdate = true;\r\n                    }\r\n                }\r\n                if (doUpdate) {\r\n                    const substatCount = Number(build[key]);\r\n                    artifactDetailInput['聖遺物優先するサブ効果上昇回数'][index] = substatCount;\r\n                } else {\r\n                    if (artifactDetailInput['聖遺物優先するサブ効果'][index] && !artifactDetailInput['聖遺物優先するサブ効果上昇回数'][index]) {\r\n                        artifactDetailInput['聖遺物優先するサブ効果上昇回数'][index] = GENSEN_MASTER_LIST[2].counts[index];\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        Object.keys(build).filter(s => !キャラクター構成PROPERTY_MAP.has(s) && !['options', 'artifactScoring'].includes(s)).forEach(key => {\r\n            if (build[key] == null) {\r\n                conditionInput.conditionValues[key] = build[key];   // null\r\n            } else if (isString(build[key])) {\r\n                conditionInput.conditionValues[key] = Number(build[key]);\r\n            } else {\r\n                conditionInput.conditionValues[key] = build[key];\r\n            }\r\n        });\r\n\r\n        if ('options' in build) {\r\n            const keys = Object.keys(build.options);\r\n            if (keys.length) {\r\n                overwriteObject(optionInput.elementalResonance.conditionValues, {});\r\n                overwriteObject(optionInput.teamOption.conditionValues, {});\r\n                overwriteObject(optionInput.miscOption.conditionValues, {});\r\n                keys.forEach(key => {\r\n                    if (key in ELEMENTAL_RESONANCE_MASTER || key == 'dendroOption') {\r\n                        // 元素共鳴\r\n                        optionInput.elementalResonance.conditionValues[key] = build.options[key];\r\n                    } else {\r\n                        const astarIndex = key.indexOf('*');\r\n                        if (astarIndex != -1) {\r\n                            const workCharacter = key.substring(0, astarIndex);\r\n                            if (workCharacter in CHARACTER_MASTER) {\r\n                                // チーム\r\n                                optionInput.teamOption.conditionValues[key] = build.options[key];\r\n                            } else {\r\n                                // その他\r\n                                optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                            }\r\n                        } else {\r\n                            // その他\r\n                            optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        overwriteObject(artifactDetailInput.聖遺物ステータスサブ効果, artifactStatsSub);\r\n\r\n        console.debug('loadRecommendation', characterInput, artifactDetailInput, conditionInput, build);\r\n    }\r\n    catch (error) {\r\n        console.error(characterInput, artifactDetailInput, conditionInput, build);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function makeSavedata(characterInput: TCharacterInput, artifactDetailInput: TArtifactDetailInput, conditionInput: TConditionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // キャラクター\r\n    resultObj['キャラクター'] = characterInput.character;\r\n    // レベル\r\n    resultObj['レベル'] = characterInput.レベル + (突破レベルレベルARRAY[characterInput.突破レベル][0] == characterInput.レベル ? '+' : '');\r\n    // 命ノ星座\r\n    resultObj['命ノ星座'] = characterInput.命ノ星座;\r\n    // 通常攻撃レベル\r\n    resultObj['通常攻撃レベル'] = characterInput.通常攻撃レベル;\r\n    // 元素スキルレベル\r\n    resultObj['元素スキルレベル'] = characterInput.元素スキルレベル;\r\n    // 元素爆発レベル\r\n    resultObj['元素爆発レベル'] = characterInput.元素爆発レベル;\r\n    // 武器\r\n    resultObj['武器'] = characterInput.weapon;\r\n    // 武器レベル\r\n    resultObj['武器レベル'] = characterInput.武器レベル + (突破レベルレベルARRAY[characterInput.突破レベル][0] == characterInput.武器レベル ? '+' : '');\r\n    // 精錬ランク\r\n    resultObj['精錬ランク'] = characterInput.武器精錬ランク;\r\n    // 聖遺物セット効果1\r\n    resultObj['聖遺物セット効果1'] = characterInput.artifactSets[0];\r\n    // 聖遺物セット効果2\r\n    resultObj['聖遺物セット効果2'] = characterInput.artifactSets[1];\r\n    // 聖遺物メイン効果1\r\n    resultObj['聖遺物メイン効果1'] = artifactDetailInput.聖遺物メイン効果[0];\r\n    // 聖遺物メイン効果2\r\n    resultObj['聖遺物メイン効果2'] = artifactDetailInput.聖遺物メイン効果[1];\r\n    // 聖遺物メイン効果3\r\n    resultObj['聖遺物メイン効果3'] = artifactDetailInput.聖遺物メイン効果[2];\r\n    // 聖遺物メイン効果4\r\n    resultObj['聖遺物メイン効果4'] = artifactDetailInput.聖遺物メイン効果[3];\r\n    // 聖遺物メイン効果5\r\n    resultObj['聖遺物メイン効果5'] = artifactDetailInput.聖遺物メイン効果[4];\r\n    // 聖遺物サブ効果HP\r\n    resultObj['聖遺物サブ効果HP'] = artifactDetailInput.聖遺物ステータスサブ効果['HP'];\r\n    // 聖遺物サブ効果攻撃力\r\n    resultObj['聖遺物サブ効果攻撃力'] = artifactDetailInput.聖遺物ステータスサブ効果['攻撃力'];\r\n    // 聖遺物サブ効果防御力\r\n    resultObj['聖遺物サブ効果防御力'] = artifactDetailInput.聖遺物ステータスサブ効果['防御力'];\r\n    // 聖遺物サブ効果元素熟知\r\n    resultObj['聖遺物サブ効果元素熟知'] = artifactDetailInput.聖遺物ステータスサブ効果['元素熟知'];\r\n    // 聖遺物サブ効果会心率\r\n    resultObj['聖遺物サブ効果会心率'] = artifactDetailInput.聖遺物ステータスサブ効果['会心率'];\r\n    // 聖遺物サブ効果会心ダメージ\r\n    resultObj['聖遺物サブ効果会心ダメージ'] = artifactDetailInput.聖遺物ステータスサブ効果['会心ダメージ'];\r\n    // 聖遺物サブ効果元素チャージ効率\r\n    resultObj['聖遺物サブ効果元素チャージ効率'] = artifactDetailInput.聖遺物ステータスサブ効果['元素チャージ効率'];\r\n    // 聖遺物サブ効果HPP\r\n    resultObj['聖遺物サブ効果HPP'] = artifactDetailInput.聖遺物ステータスサブ効果['HP%'];\r\n    // 聖遺物サブ効果攻撃力P\r\n    resultObj['聖遺物サブ効果攻撃力P'] = artifactDetailInput.聖遺物ステータスサブ効果['攻撃力%'];\r\n    // 聖遺物サブ効果防御力P\r\n    resultObj['聖遺物サブ効果防御力P'] = artifactDetailInput.聖遺物ステータスサブ効果['防御力%'];\r\n    // 聖遺物優先するサブ効果1\r\n    resultObj['聖遺物優先するサブ効果1'] = artifactDetailInput.聖遺物優先するサブ効果[0];\r\n    // 聖遺物優先するサブ効果1上昇値\r\n    resultObj['聖遺物優先するサブ効果1上昇値'] = artifactDetailInput.聖遺物優先するサブ効果上昇値[0];\r\n    // 聖遺物優先するサブ効果1上昇回数\r\n    resultObj['聖遺物優先するサブ効果1上昇回数'] = artifactDetailInput.聖遺物優先するサブ効果上昇回数[0];\r\n    // 聖遺物優先するサブ効果2\r\n    resultObj['聖遺物優先するサブ効果2'] = artifactDetailInput.聖遺物優先するサブ効果[1];\r\n    // 聖遺物優先するサブ効果2上昇値\r\n    resultObj['聖遺物優先するサブ効果2上昇値'] = artifactDetailInput.聖遺物優先するサブ効果上昇値[1];\r\n    // 聖遺物優先するサブ効果2上昇回数\r\n    resultObj['聖遺物優先するサブ効果2上昇回数'] = artifactDetailInput.聖遺物優先するサブ効果上昇回数[1];\r\n    // 聖遺物優先するサブ効果3\r\n    resultObj['聖遺物優先するサブ効果3'] = artifactDetailInput.聖遺物優先するサブ効果[2];\r\n    // 聖遺物優先するサブ効果3上昇値\r\n    resultObj['聖遺物優先するサブ効果3上昇値'] = artifactDetailInput.聖遺物優先するサブ効果上昇値[2];\r\n    // 聖遺物優先するサブ効果3上昇回数\r\n    resultObj['聖遺物優先するサブ効果3上昇回数'] = artifactDetailInput.聖遺物優先するサブ効果上昇回数[2];\r\n\r\n    for (const entry of conditionInput.checkboxList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n    for (const entry of conditionInput.selectList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeOptionsSavedata(character: string, optionInput: TOptionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // 元素共鳴\r\n    {\r\n        const conditionValues = optionInput.elementalResonance.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    // チーム\r\n    {\r\n        const conditionValues = optionInput.teamOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (key.startsWith(character + '*')) return;\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    // その他\r\n    {\r\n        const conditionValues = optionInput.miscOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport const CHANGE_KIND_STATUS = 'ステータス変更系詳細';\r\nexport const CHANGE_KIND_TALENT = '天賦性能変更系詳細';\r\n\r\nexport function makeDamageDetailObjArrObjCharacter(characterInput: TCharacterInput): TDamageDetail {\r\n    try {\r\n        const characterMaster = characterInput.characterMaster as any;\r\n\r\n        const result = {} as any;\r\n\r\n        let myTalentDetail;\r\n        let myTalentLevel: number;\r\n        let myDefaultKind: string | null;\r\n        let myDefaultElement: string | null;\r\n        const myInputCategory = 'キャラクター';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        // 通常攻撃 重撃 落下攻撃\r\n        myTalentLevel = characterInput['通常攻撃レベル'];\r\n        myDefaultElement = characterMaster['武器'] === '法器' ? characterMaster['元素'] : null;\r\n        ['通常攻撃', '重撃', '落下攻撃'].forEach(category => {\r\n            myTalentDetail = characterMaster[category];\r\n            myDefaultKind = category + 'ダメージ';\r\n            result[category] = makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        });\r\n\r\n        ['通常攻撃', '重撃', '落下攻撃'].forEach(category => {\r\n            const workCategory = '特殊' + category;\r\n            if (workCategory in characterMaster) {\r\n                myTalentDetail = characterMaster[workCategory];\r\n                if ('種類' in myTalentDetail) {\r\n                    myDefaultKind = myTalentDetail['種類'];\r\n                    switch (myDefaultKind) {\r\n                        case '元素スキルダメージ':\r\n                            myTalentLevel = characterInput['元素スキルレベル'];\r\n                            break;\r\n                        case '元素爆発ダメージ':\r\n                            myTalentLevel = characterInput['元素爆発レベル'];\r\n                            break;\r\n                    }\r\n                }\r\n                if ('元素' in myTalentDetail) {\r\n                    myDefaultElement = myTalentDetail['元素'];\r\n                }\r\n                const workObj = {\r\n                    条件: myTalentDetail['条件'],\r\n                    詳細: makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory)\r\n                };\r\n                result[workCategory] = workObj;\r\n            }\r\n        });\r\n\r\n        // 元素スキル\r\n        myTalentLevel = characterInput['元素スキルレベル'];\r\n        myDefaultKind = '元素スキルダメージ';\r\n        myDefaultElement = characterMaster['元素'];\r\n        result['元素スキル'] = makeDamageDetailObjArr(characterMaster['元素スキル'], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        // 元素爆発\r\n        myTalentLevel = characterInput['元素爆発レベル'];\r\n        myDefaultKind = '元素爆発ダメージ';\r\n        myDefaultElement = characterMaster['元素'];\r\n        result['元素爆発'] = makeDamageDetailObjArr(characterMaster['元素爆発'], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        result['その他'] = [] as TDamageDetailObj[];\r\n\r\n        // その他戦闘天賦\r\n        if ('その他戦闘天賦' in characterMaster) {\r\n            characterMaster['その他戦闘天賦'].forEach((myTalentDetail: any) => {\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result['その他'].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // 固有天賦\r\n        characterMaster['固有天賦'].forEach((myTalentDetail: any) => {\r\n            const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n            if (workArr.length > 0) result['その他'].push(...workArr);\r\n        });\r\n\r\n        // 命ノ星座\r\n        if ('命ノ星座' in characterMaster) {\r\n            Object.keys(characterMaster['命ノ星座']).forEach(key => {\r\n                if (Number(key) > characterInput.命ノ星座) return;\r\n                myTalentDetail = characterMaster['命ノ星座'][key];\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result['その他'].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // 風元素キャラクター\r\n        if (characterMaster['元素'] == '風') {\r\n            if (myTalentChangeDetailObjArr.filter(s => s.条件 && s.条件.startsWith('拡散@')).length == 0) {\r\n                ['炎元素', '水元素', '雷元素', '氷元素'].forEach(cond => {\r\n                    myTalentChangeDetailObjArr.push({\r\n                        名前: null,\r\n                        種類: '固有変数',\r\n                        元素: null,\r\n                        数値: null,\r\n                        条件: '拡散@' + cond,\r\n                        対象: null,\r\n                        上限: null,\r\n                        HIT数: null,\r\n                        ダメージバフ: null,\r\n                        元素付与無効: null,\r\n                        除外条件: null,\r\n                        適用条件: null\r\n                    });\r\n                });\r\n            }\r\n            if ('オプション初期値' in characterMaster) {\r\n                if (Object.keys(characterMaster['オプション初期値']).filter(s => s == '拡散').length == 0) {\r\n                    characterMaster['オプション初期値']['拡散'] = 1;\r\n                }\r\n            } else {\r\n                characterMaster['オプション初期値'] = { 拡散: 1 };\r\n            }\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj['条件'], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj['条件'], conditionMap, exclusionMap);\r\n        });\r\n        // conditionMap.delete('命ノ星座');\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && Array.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result['条件'] = conditionMap;\r\n        result['排他'] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyCharacter = result;\r\n\r\n        return result;\r\n    } catch (error) {\r\n        console.error(characterInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjWeapon(characterInput: any) {\r\n    try {\r\n        const name = characterInput.weapon;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n\r\n        const result = {} as any;\r\n\r\n        if (!name || !weaponMaster) return result;\r\n\r\n        let myTalentDetail;\r\n        const myLevel = characterInput.武器精錬ランク;\r\n        const myInputCategory = '武器';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        if ('武器スキル' in weaponMaster) {\r\n            myTalentDetail = weaponMaster['武器スキル'];\r\n            result['その他'] = makeDamageDetailObjArr(myTalentDetail, myLevel, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            let condition = detailObj['条件'];\r\n            if (isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            let condition = detailObj['条件'];\r\n            if (isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && Array.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result['条件'] = conditionMap;\r\n        result['排他'] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyWeapon = result;\r\n\r\n        return result;\r\n    } catch (error) {\r\n        console.error(characterInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjArtifactSets(characterInput: any) {\r\n    try {\r\n        const result = [] as any;\r\n\r\n        let myTalentDetail;\r\n        const myInputCategory = '聖遺物セット効果';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        const artifactSetMasters = characterInput.artifactSetMasters.filter((s: any) => s);\r\n\r\n        if (artifactSetMasters.length > 0) {\r\n            const damageDetailObjArr = [] as TDamageDetailObj[];\r\n            if ('2セット効果' in artifactSetMasters[0]) {\r\n                myTalentDetail = artifactSetMasters[0]['2セット効果'];\r\n                damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n            }\r\n            if (artifactSetMasters.length == 2) {\r\n                if (artifactSetMasters[0] == artifactSetMasters[1]) {\r\n                    myTalentDetail = artifactSetMasters[0]['4セット効果'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                } else {\r\n                    myTalentDetail = artifactSetMasters[1]['2セット効果'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                }\r\n            }\r\n            result['その他'] = damageDetailObjArr;\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj['条件'], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['条件']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj['条件'], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && Array.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result['条件'] = conditionMap;\r\n        result['排他'] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyArtifactSets = result;\r\n\r\n        return result;\r\n    } catch (error) {\r\n        console.error(characterInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nconst makeDetailObj = function (\r\n    detailObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    inputCategory: string | null,\r\n    opt_condition?: string,\r\n): TDamageDetailObj {\r\n    let my種類 = '種類' in detailObj ? detailObj['種類'] : defaultKind;\r\n    let my対象 = null;\r\n    if (my種類.indexOf('.') != -1) {\r\n        my対象 = my種類.substring(my種類.indexOf('.') + 1);\r\n        my種類 = my種類.substring(0, my種類.indexOf('.'));\r\n    } else if ('対象' in detailObj) {\r\n        my対象 = detailObj['対象'];\r\n    }\r\n    let my数値 = null;\r\n    if ('数値' in detailObj) {\r\n        my数値 = detailObj['数値'];\r\n        if (isNumber(my数値) || isString(my数値)) {\r\n            // nop\r\n        } else if (isPlainObject(my数値) && level && level in my数値) { // キャラクター|武器のサブステータス\r\n            my数値 = my数値[level];\r\n        } else {\r\n            console.error(detailObj, level, defaultKind, defaultElement, my数値);\r\n        }\r\n        if (DAMAGE_CATEGORY_ARRAY.includes(my種類 + 'ダメージ') || my種類.endsWith('ダメージ')) {\r\n            my数値 = analyzeFormulaStr(my数値, '攻撃力');\r\n        } else {\r\n            my数値 = analyzeFormulaStr(my数値, my種類);\r\n        }\r\n    }\r\n    let my条件 = null;\r\n    if ('条件' in detailObj) {\r\n        if (isPlainObject(detailObj['条件']) && level && level in detailObj['条件']) {  // 武器は精錬ランクによって数値を変えたいときがあるので\r\n            my条件 = detailObj['条件'][level];\r\n        } else {\r\n            my条件 = detailObj['条件'];\r\n        }\r\n    } else {\r\n        my条件 = opt_condition ?? null;\r\n    }\r\n    let my上限 = null;\r\n    if ('上限' in detailObj) {\r\n        my上限 = detailObj['上限'];\r\n        if (isPlainObject(my上限) && level && level in my上限) {   // 草薙の稲光\r\n            my上限 = my上限[level];\r\n        }\r\n        my上限 = analyzeFormulaStr(my上限);\r\n    }\r\n    const resultObj: TDamageDetailObj = {\r\n        名前: detailObj['名前'],\r\n        種類: my種類,\r\n        元素: '元素' in detailObj ? detailObj['元素'] : defaultElement,\r\n        数値: my数値,\r\n        条件: my条件,\r\n        対象: my対象,\r\n        上限: my上限,\r\n        HIT数: 'HIT数' in detailObj ? detailObj['HIT数'] : null,\r\n        ダメージバフ: 'ダメージバフ' in detailObj ? detailObj['ダメージバフ'] : null,\r\n        元素付与無効: '元素付与無効' in detailObj ? detailObj['元素付与無効'] : inputCategory == '武器',\r\n        除外条件: '除外条件' in detailObj ? detailObj['除外条件'] : null,\r\n        適用条件: '適用条件' in detailObj ? detailObj['適用条件'] : null,\r\n    }\r\n    return resultObj;\r\n}\r\n\r\nexport function getChangeKind(kind: string) {\r\n    if (kind in ステータスTEMPLATE\r\n        || new RegExp('[自全].+(バフ|アップ)').exec(kind)\r\n        || new RegExp('敵?[自全]元素耐性').exec(kind)\r\n        || ['別枠乗算', '回復量アップ'].includes(kind)\r\n        || ['敵防御力'].includes(kind)\r\n        || ['発動回数', '使用回数'].includes(kind)\r\n        || ['攻撃速度', '通常攻撃速度', '移動速度'].includes(kind)\r\n        || kind.endsWith('継続時間')\r\n        || kind.endsWith('クールタイム')\r\n        || kind.endsWith('会心率')\r\n        || kind.endsWith('会心ダメージ')\r\n    ) {\r\n        return 'STATUS';\r\n    } else if (kind.endsWith('強化')\r\n        || kind.endsWith('付与')\r\n        || kind == '防御無視' ||\r\n        kind == '固有変数'\r\n    ) {   // ex.元素爆発強化,氷元素付与\r\n        return 'TALENT';\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport const makeDamageDetailObjArr = function (\r\n    talentDataObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    statusChangeDetailObjArr: any[],\r\n    talentChangeDetailObjArr: any[],\r\n    inputCategory: string,\r\n    opt_condition?: string,\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as any[];\r\n    if (!('詳細' in talentDataObj)) return resultArr;\r\n\r\n    talentDataObj['詳細'].forEach((detailObj: { [x: string]: any; }) => {\r\n        const resultObj = makeDetailObj(detailObj, level, defaultKind, defaultElement, inputCategory, opt_condition);\r\n        const my種類 = resultObj.種類 as string;\r\n        if (statusChangeDetailObjArr != null && getChangeKind(my種類) == 'STATUS') {\r\n            resultObj['元素'] = '元素' in detailObj ? detailObj['元素'] : null;\r\n            statusChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        if (talentChangeDetailObjArr != null && getChangeKind(my種類) == 'TALENT') {\r\n            resultObj['元素'] = '元素' in detailObj ? detailObj['元素'] : null;\r\n            talentChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        resultArr.push(resultObj);\r\n    });\r\n\r\n    return resultArr;\r\n}\r\n\r\nexport const makeTeamOptionDetailObjArr = function (\r\n    detailObjArr: any[],\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as any[];\r\n\r\n    detailObjArr.forEach((detailObj: { [x: string]: any; }) => {\r\n        const resultObj = makeDetailObj(detailObj, null, null, null, null);\r\n        if (resultObj) {\r\n            resultArr.push(resultObj);\r\n        }\r\n    });\r\n\r\n    return resultArr;\r\n}\r\n\r\nexport const makeConditionExclusionMapFromStr = function (conditionStr: string, conditionMap: Map<string, string[] | null>, exclusionMap: Map<string, string[] | null>) {\r\n    // 排他条件を抽出します\r\n    let exclusionCond: string | null = null;\r\n    let myCondStrArr = conditionStr.split('^');\r\n    if (myCondStrArr.length > 1) {\r\n        exclusionCond = myCondStrArr[1];\r\n    }\r\n    const myCondStr = myCondStrArr[0];\r\n    if (myCondStr.indexOf('|') != -1) {\r\n        // OR条件 for 申鶴\r\n        myCondStrArr = myCondStr.split('|');\r\n        myCondStrArr.forEach((myCondStr: string) => {\r\n            makeConditionExclusionMapFromStrSub(myCondStr, conditionMap, exclusionMap, exclusionCond);\r\n        });\r\n    } else {\r\n        // AND条件\r\n        myCondStrArr = myCondStr.split('&');\r\n        myCondStrArr.forEach((myCondStr: string) => {\r\n            makeConditionExclusionMapFromStrSub(myCondStr, conditionMap, exclusionMap, exclusionCond);\r\n        });\r\n    }\r\n}\r\n\r\nfunction makeConditionExclusionMapFromStrSub(conditionStr: string, conditionMap: Map<string, string[] | null>, exclusionMap: Map<string, string[] | null>, exclusion: string | null) {\r\n    const myCondStrArr = conditionStr.split(/[@=]/);\r\n    const myName = myCondStrArr[0];\r\n    if (myCondStrArr.length == 1) {\r\n        pushToMapValueArray(conditionMap, myName, null);\r\n    } else if (myCondStrArr.length == 2) {\r\n        if (myCondStrArr[1].indexOf(',') != -1) {\r\n            const re = new RegExp('([^0-9]*?)([\\\\+\\\\-0-9\\\\.,]+)(.*)');  // 表現可能:-10,+60%\r\n            const reRet = re.exec(myCondStrArr[1]);\r\n            if (reRet) {\r\n                const prefix = reRet[1];\r\n                const condValueArr = reRet[2].split(',');\r\n                const postfix = reRet[3];\r\n                condValueArr.forEach(value => {\r\n                    pushToMapValueArray(conditionMap, myName, prefix + value + postfix);\r\n                });\r\n            }\r\n        } else if (myCondStrArr[1].indexOf('-') != -1) {\r\n            const re = new RegExp('([^0-9\\\\.]*)(-?[0-9\\\\.]+)-(-?[0-9\\\\.]+)(.*)');   // 数値部に+は含められない。prefixには含められる。\r\n            const re2 = new RegExp('/([0-9\\\\.]+)(.*)');\r\n            const reRet = re.exec(myCondStrArr[1]);\r\n            if (reRet) {\r\n                const prefix = reRet[1];\r\n                const rangeStart = Number(reRet[2]);\r\n                const rangeEnd = Number(reRet[3]);\r\n                let step = rangeStart;\r\n                let postfix = reRet[4];\r\n                if (postfix) {\r\n                    const re2Ret = re2.exec(postfix);\r\n                    if (re2Ret) {\r\n                        step = Number(re2Ret[1]);\r\n                        postfix = re2Ret[2];\r\n                    }\r\n                }\r\n                for (let i = rangeStart; i < rangeEnd; i = addDecimal(i, step, rangeEnd)) {\r\n                    pushToMapValueArray(conditionMap, myName, prefix + String(i) + postfix);\r\n                }\r\n                pushToMapValueArray(conditionMap, myName, prefix + String(rangeEnd) + postfix);\r\n            } else {\r\n                pushToMapValueArray(conditionMap, myName, myCondStrArr[1]);\r\n            }\r\n        } else {\r\n            pushToMapValueArray(conditionMap, myName, myCondStrArr[1]);\r\n        }\r\n    } else {\r\n        console.error(conditionStr, conditionMap, exclusionMap);\r\n    }\r\n    if (exclusion) {\r\n        exclusion.split(',').forEach(e => {\r\n            pushToMapValueArray(exclusionMap, myName, e);\r\n        });\r\n    }\r\n}\r\n\r\nexport function setupConditionValues(conditionInput: TConditionInput, characterInput: TCharacterInput) {\r\n    try {\r\n        const conditionValues = conditionInput.conditionValues;\r\n        const checkboxList = conditionInput.checkboxList as TCheckboxEntry[];\r\n        const selectList = conditionInput.selectList as TSelectEntry[];\r\n\r\n        checkboxList.splice(0, checkboxList.length);\r\n        selectList.splice(0, selectList.length);\r\n\r\n        const masters = [characterInput.characterMaster, characterInput.weaponMaster, ...characterInput.artifactSetMasters];\r\n        for (const master of masters.filter(s => s)) {\r\n            if ('オプション初期値' in master) {\r\n                for (const key of Object.keys((master as any)['オプション初期値'])) {\r\n                    if (!(key in conditionValues)) {\r\n                        conditionValues[key] = (master as any)['オプション初期値'][key];\r\n                    }\r\n                }\r\n            }\r\n            // 聖遺物セット効果のオプション初期値は変な位置にあります\r\n            if ('4セット効果' in master && 'オプション初期値' in (master as any)['4セット効果']) {\r\n                for (const key of Object.keys((master as any)['4セット効果']['オプション初期値'])) {\r\n                    if (!(key in conditionValues)) {\r\n                        conditionValues[key] = (master as any)['4セット効果']['オプション初期値'][key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n            if (myDamageDetail) {\r\n                const conditionMap: Map<string, any[] | null> = myDamageDetail.条件;\r\n                const exclusionMap: Map<string, string[] | null> = myDamageDetail.排他;\r\n\r\n                conditionMap.forEach((value: string[] | null, key: string) => {\r\n                    if (value == null) {\r\n                        if (checkboxList.filter(s => s.name == key).length == 0) {\r\n                            checkboxList.push({ name: key });\r\n                        }\r\n                    } else {\r\n                        if (selectList.filter(s => s.name == key).length == 0) {\r\n                            const required = value[0].startsWith(\"required_\");\r\n                            selectList.push({\r\n                                name: key,\r\n                                options: value,\r\n                                required: required,\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    if (key in conditionValues && conditionValues[key] != null) {\r\n                        const exclusions = exclusionMap.get(key);\r\n                        if (exclusions) {\r\n                            for (const exclusion of exclusions) {\r\n                                if (exclusion in conditionValues) {\r\n                                    const conditionValue = conditionMap.get(exclusion);\r\n                                    if (conditionValue !== undefined) {\r\n                                        if (conditionValue === null) {  // checkbox\r\n                                            conditionValues[exclusion] = false;\r\n                                        } else {    // select\r\n                                            conditionValues[exclusion] = 0;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (value === null) {   // checkbox\r\n                            let checked = true;\r\n                            const arr = exclusionMap.get(key);\r\n                            if (arr && arr.filter(s => conditionValues[s]).length > 0) {\r\n                                checked = false;\r\n                            }\r\n                            conditionValues[key] = checked;\r\n                        } else {   // select\r\n                            let selectedIndex = value.length - 1;\r\n                            const arr = exclusionMap.get(key);\r\n                            if (arr && arr.filter(s => conditionValues[s]).length > 0) {\r\n                                selectedIndex = 0;\r\n                            }\r\n                            conditionValues[key] = selectedIndex;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    } catch (error) {\r\n        console.error(conditionInput, characterInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nfunction pushToMapValueArray(map: Map<any, any>, key: any, value: any) {\r\n    if (value == null) {\r\n        if (!map.has(key)) {\r\n            map.set(key, null);\r\n        }\r\n    } else if (map.has(key)) {\r\n        const oldValue = map.get(key);\r\n        if (oldValue == null) {\r\n            map.set(key, [value]);\r\n        } else if (!oldValue.includes(value)) {\r\n            map.get(key).push(value);\r\n        }\r\n    } else {\r\n        map.set(key, [value]);\r\n    }\r\n}\r\n\r\nfunction getDecimalLength(value: number): number {\r\n    const arr = ('' + value).split('.');\r\n    return arr.length > 1 ? arr[1].length : 0;\r\n}\r\n\r\nexport function multiplyDecimal(value1: number, value2: number): number {\r\n    const decimalLength = getDecimalLength(value1) + getDecimalLength(value2);\r\n    const intValue1 = Number(('' + value1).replace('.', ''));\r\n    const intValue2 = Number(('' + value2).replace('.', ''));\r\n    const result = (intValue1 * intValue2) / Math.pow(10, decimalLength);\r\n    return Number(result);\r\n}\r\n\r\nexport function addDecimal(value1: number, value2: number, opt_max?: number): number {\r\n    const k = Math.pow(10, Math.max(getDecimalLength(value1), getDecimalLength(value2)));\r\n    let result = (multiplyDecimal(value1, k) + multiplyDecimal(value2, k)) / k;\r\n    if (opt_max != undefined) {\r\n        result = Math.min(result, opt_max);\r\n    }\r\n    return result;\r\n}\r\n\r\nconst analyzeFormulaStr = function (formulaStr: number | string, opt_defaultItem: string | null = null) {\r\n    const resultArr = [] as any[];\r\n    const re = new RegExp('([\\\\+\\\\-\\\\*/]?)([^\\\\+\\\\-\\\\*/]+)(.*)');\r\n    let workStr = String(formulaStr);\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n        const reRet = re.exec(workStr);\r\n        if (!reRet) {\r\n            resultArr.push(workStr);\r\n            break;\r\n        }\r\n        if (reRet[1]) { // + - * /\r\n            resultArr.push(reRet[1]);\r\n        }\r\n        resultArr.push(analyzeFormulaStrSub(reRet[2], opt_defaultItem));\r\n        if (!reRet[3]) {\r\n            break;\r\n        }\r\n        workStr = reRet[3];\r\n    }\r\n    return resultArr;\r\n}\r\n\r\nfunction analyzeFormulaStrSub(formulaStr: string, opt_defaultItem: string | null = null) {\r\n    const resultArr = [] as any;\r\n    if (isNumber(formulaStr)) {\r\n        resultArr.push(Number(formulaStr));\r\n    } else {\r\n        const strArr = (formulaStr as string).split('%');\r\n        if (strArr.length == 1) {\r\n            resultArr.push(strArr[0]);\r\n        } else {\r\n            resultArr.push(Number(strArr[0]) / 100);\r\n            resultArr.push('*');\r\n            if (strArr[1].length > 0) {\r\n                resultArr.push(strArr[1]);\r\n            } else if (opt_defaultItem != null) {\r\n                resultArr.push(opt_defaultItem);\r\n            }\r\n        }\r\n    }\r\n    return resultArr;\r\n}\r\n\r\nexport function makeSharedata(savedata: TAnyObject) {\r\n    const sharedataArr = [] as any[];\r\n\r\n    let character: TCharacterKey;\r\n    let weaponType: TWeaponTypeKey;\r\n\r\n    キャラクター構成PROPERTY_MAP.forEach((value, key) => {\r\n        let newValue = savedata[key];\r\n        let myBasename;\r\n        switch (key) {\r\n            case 'キャラクター':\r\n                character = newValue as TCharacterKey;\r\n                myBasename = basename(CHARACTER_MASTER[character]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '武器':\r\n                weaponType = CHARACTER_MASTER[character]['武器'] as TWeaponTypeKey;\r\n                myBasename = basename((WEAPON_MASTER as any)[weaponType][newValue]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '聖遺物セット効果1':\r\n            case '聖遺物セット効果2':\r\n                if (newValue == 'NONE') {\r\n                    newValue = '';  // 聖遺物セット効果なし\r\n                } else {\r\n                    myBasename = basename(ARTIFACT_SET_MASTER[newValue as TArtifactSetKey]['image']);\r\n                    newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                }\r\n                break;\r\n            case '聖遺物メイン効果1':\r\n            case '聖遺物メイン効果2':\r\n            case '聖遺物メイン効果3':\r\n            case '聖遺物メイン効果4':\r\n            case '聖遺物メイン効果5':\r\n                if (newValue) {\r\n                    newValue = newValue.split('_')[0] + '_' + ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue.split('_')[1]);\r\n                }\r\n                break;\r\n            case '聖遺物優先するサブ効果1':\r\n            case '聖遺物優先するサブ効果2':\r\n            case '聖遺物優先するサブ効果3':\r\n                if (newValue) {\r\n                    newValue = ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue);\r\n                }\r\n                break;\r\n        }\r\n        sharedataArr.push(newValue);\r\n    });\r\n    Object.keys(savedata).forEach(key => {\r\n        if (!キャラクター構成PROPERTY_MAP.has(key)) {\r\n            sharedataArr.push(key + '=' + savedata[key]);\r\n        }\r\n    });\r\n\r\n    return sharedataArr.join(',');\r\n}\r\n\r\nfunction openTwitter(text: string, url: string, opt_hashtags?: string, opt_via?: string) {\r\n    const baseUrl = 'https://twitter.com/intent/tweet?';\r\n    const params = new URLSearchParams();\r\n    params.append('text', text);\r\n    params.append('url', url);\r\n    if (opt_hashtags) {\r\n        params.append('hashtags', opt_hashtags);\r\n    }\r\n    if (opt_via) {\r\n        params.append('via', opt_via);\r\n    }\r\n    const query = params.toString();\r\n    const shareUrl = `${baseUrl}${query}`;\r\n    console.log(params);\r\n    console.log(shareUrl);\r\n    window.open(shareUrl);\r\n}\r\n\r\nexport function shareByTwitter(characterInput: TCharacterInput, artifactDetailInput: TArtifactDetailInput, conditionInput: TConditionInput) {\r\n    const savedata = makeSavedata(characterInput, artifactDetailInput, conditionInput);\r\n    const sharedata = makeSharedata(savedata);\r\n\r\n    const text = characterInput.buildname;\r\n    const encoded = encodeURI(sharedata);\r\n    const url = 'https://asagume.github.io/gencalc/' + '?allin=' + encoded;\r\n\r\n    openTwitter(text, url);\r\n}\r\n\r\nexport function getMaxConstellation(characterMaster: TCharacterDetail) {\r\n    let max = 0;\r\n    if ('命ノ星座' in characterMaster) {\r\n        max = Object.keys(characterMaster.命ノ星座).length;\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function getMaxTalentLevel(characterMaster: TCharacterDetail, key: string) {\r\n    let max = 10;\r\n    if (key in characterMaster) {\r\n        const talentObj = (characterMaster as any)[key];\r\n        if (\"詳細\" in talentObj) {\r\n            for (const detailObj of talentObj.詳細) {\r\n                if (\"数値\" in detailObj && isPlainObject(detailObj.数値)) {\r\n                    const work = Object.keys(detailObj.数値).length;\r\n                    if (max < work) max = work;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function pushBuildinfoToSession(character: TCharacterKey | string, buildname?: string, builddata?: any) {\r\n    sessionStorage.setItem('character', character);\r\n    if (buildname) {\r\n        sessionStorage.setItem('buildname', buildname);\r\n    }\r\n    if (builddata) {\r\n        sessionStorage.setItem('builddata', JSON.stringify(builddata));\r\n    }\r\n}\r\n\r\nexport function popBuildinfoFromSession() {\r\n    const result: [string | undefined, string | undefined, TAnyObject | undefined] = [undefined, undefined, undefined];\r\n    const character = sessionStorage.getItem('character');\r\n    if (character) {\r\n        result[0] = character;\r\n        const buildname = sessionStorage.getItem('buildname');\r\n        if (buildname) {\r\n            result[1] = buildname;\r\n        }\r\n        const builddata = sessionStorage.getItem('builddata');\r\n        if (builddata) {\r\n            result[2] = JSON.parse(builddata);\r\n        }\r\n    }\r\n    sessionStorage.removeItem('character');\r\n    sessionStorage.removeItem('buildname');\r\n    sessionStorage.removeItem('builddata');\r\n    return result;\r\n}\r\n\r\n","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, vShow as _vShow, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-a66d2282\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"select-list\" }\nconst _hoisted_3 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_4 = [\"src\", \"alt\"]\nconst _hoisted_5 = { class: \"select-list\" }\nconst _hoisted_6 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = { class: \"select-list\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"ul\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.elementList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.elementCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.elementCheckList))\n                }, null, 40, _hoisted_3), [\n                  [_vModelCheckbox, _ctx.elementCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.elementSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_4)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.weaponList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.weaponCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.weaponCheckList))\n                }, null, 40, _hoisted_6), [\n                  [_vModelCheckbox, _ctx.weaponCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.weaponSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_7)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('character' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: item.icon_url,\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.characterOnClick(item.key))\n              }, null, 10, _hoisted_9),\n              _createElementVNode(\"div\", _hoisted_10, _toDisplayString(_ctx.displayName(item.key)), 1),\n              _createElementVNode(\"img\", {\n                class: \"vision\",\n                src: _ctx.visionSrc(item),\n                alt: item.元素\n              }, null, 8, _hoisted_11),\n              _withDirectives(_createElementVNode(\"div\", { class: \"selection-number\" }, _toDisplayString(_ctx.selectionNumber(item.key)), 513), [\n                [_vShow, _ctx.selectionNumber(item.key)]\n              ])\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","\r\nimport {\r\n  TCharacterEntry,\r\n  ELEMENT_IMG_SRC,\r\n  TVisionKey,\r\n  WEAPON_IMG_SRC,\r\n  TWeaponTypeKey,\r\n  CHARACTER_MASTER_LIST,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n} from \"@/master\";\r\nimport { defineComponent, reactive, computed, PropType } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\n\r\ninterface ICheckList {\r\n  [key: string]: boolean;\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"CharacterSelect\",\r\n  props: {\r\n    character: { type: String },\r\n    characters: { type: Array as PropType<string[]> },\r\n    visible: { type: Boolean, required: true },\r\n  },\r\n  emits: [\"update:character\", \"update:characters\"],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const visionSrc = (item: TCharacterEntry) => ELEMENT_IMG_SRC[item.元素];\r\n    const bgImageClass = (item: TCharacterEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.レアリティ]) as string;\r\n    const selectedClass = (item: TCharacterEntry) => {\r\n      if (props.character && props.character == item.key) {\r\n        return \" selected\";\r\n      }\r\n      if (props.characters && props.characters.includes(item.key)) {\r\n        return \" selected\";\r\n      }\r\n      return \"\";\r\n    };\r\n\r\n    const elementList = Object.keys(ELEMENT_IMG_SRC) as TVisionKey[];\r\n    const elementSrc = (element: TVisionKey) => ELEMENT_IMG_SRC[element] as string;\r\n    const elementCheckList = reactive({}) as ICheckList;\r\n    for (let key of elementList) {\r\n      elementCheckList[key] = false;\r\n    }\r\n\r\n    const weaponList = Object.keys(WEAPON_IMG_SRC) as TWeaponTypeKey[];\r\n    const weaponSrc = (weapon: TWeaponTypeKey) => WEAPON_IMG_SRC[weapon] as string;\r\n    const weaponCheckList = reactive({}) as ICheckList;\r\n    for (let key of weaponList) {\r\n      weaponCheckList[key] = false;\r\n    }\r\n\r\n    const checkListOnChange = function (item: string, checkList: ICheckList) {\r\n      if (!checkList[item]) return;\r\n      Object.keys(checkList)\r\n        .filter((s) => s != item)\r\n        .forEach((key) => {\r\n          checkList[key] = false;\r\n        });\r\n    };\r\n\r\n    const filteredList = computed(() => {\r\n      const result = [];\r\n      const elementChecked =\r\n        Object.keys(elementCheckList).filter((s) => elementCheckList[s]).length > 0;\r\n      const weaponChecked =\r\n        Object.keys(weaponCheckList).filter((s) => weaponCheckList[s]).length > 0;\r\n      for (let entry of CHARACTER_MASTER_LIST as TCharacterEntry[]) {\r\n        if (elementChecked && !elementCheckList[entry.元素]) continue;\r\n        if (weaponChecked && !weaponCheckList[entry.武器]) continue;\r\n        result.push(entry);\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const selectionNumber = (character: string) => {\r\n      let result = \"\";\r\n      if (props.characters) {\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          result = String(index + 1);\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const characterOnClick = (character: string) => {\r\n      if (props.character) {\r\n        context.emit(\"update:character\", character);\r\n      }\r\n      if (props.characters) {\r\n        const characters: string[] = props.characters.map((s) => s);\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          characters[index] = \"\";\r\n        } else {\r\n          const blankIndex = props.characters.indexOf(\"\");\r\n          if (blankIndex != -1) {\r\n            characters[blankIndex] = character;\r\n          }\r\n        }\r\n        context.emit(\"update:characters\", characters);\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      visionSrc,\r\n      bgImageClass,\r\n      selectedClass,\r\n      elementList,\r\n      elementSrc,\r\n      elementCheckList,\r\n      weaponList,\r\n      weaponSrc,\r\n      weaponCheckList,\r\n      checkListOnChange,\r\n      filteredList,\r\n\r\n      selectionNumber,\r\n      characterOnClick,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./CharacterSelect.vue?vue&type=template&id=a66d2282&scoped=true&ts=true\"\nimport script from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./CharacterSelect.vue?vue&type=style&index=0&id=a66d2282&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\Github\\\\gencalc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a66d2282\"]])\n\nexport default __exports__","\r\nimport i18n from \"@/i18n\";\r\nimport { STAT_PERCENT_LIST } from \"@/input\";\r\nimport { nextTick } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\n\r\nexport default function CompositionFunction() {\r\n    const { t, te } = useI18n({\r\n        useScope: \"global\",\r\n    });\r\n\r\n    const localeList = [\r\n        { name: \"日本語\", value: \"ja-jp\" },\r\n        { name: \"English\", value: \"en-us\" },\r\n        { name: \"简体中文\", value: \"zh-cn\" },\r\n        { name: \"繁體中文\", value: \"zh-tw\" },\r\n        { name: \"한국어\", value: \"ko-kr\" },\r\n        { name: \"Deutsch\", value: \"de-de\" },\r\n        { name: \"Español\", value: \"es-es\" },\r\n        { name: \"Français\", value: \"fr-fr\" },\r\n        { name: \"Indonesia\", value: \"id-id\" },\r\n        { name: \"Português\", value: \"pt-pt\" },\r\n        { name: \"Pусский\", value: \"ru-ru\" },\r\n        { name: 'ภาษาไทย', value: 'th-th' },\r\n        { name: \"Tiếng Việt\", value: \"vi-vn\" },\r\n    ];\r\n\r\n    const setI18nLanguage = function (locale: string) {\r\n        i18n.global.locale.value = locale;\r\n        loadLocaleMessages(locale);\r\n        document.querySelector('html')?.setAttribute('lang', locale)\r\n    }\r\n\r\n    const loadLocaleMessages = async function (locale: string) {\r\n        if (locale != 'ja-jp') {\r\n            const messages = await fetch(`./locales/${locale}.json`).then(resp => resp.json());\r\n            i18n.global.setLocaleMessage(locale, messages);\r\n        }\r\n        return nextTick();\r\n    }\r\n\r\n    const displayName = function (key: any): string {\r\n        if (!key) return key;\r\n        if (i18n.global.locale.value === 'ja-jp') { // 日本語はtranslateしません\r\n            let result = String(key);\r\n            if (['ダメージバフ', 'ダメージアップ', '反応ボーナス', '敵'].includes(result)) {\r\n                return result;\r\n            }\r\n            result = result.replace(/ダメージバフ$/, 'ダメージ');\r\n            result = result.replace(/ダメージアップ$/, 'ダメージ');\r\n            result = result.replace('凍結反応ボーナス', '凍結反応の継続時間');\r\n            result = result.replace(/反応ボーナス$/, '反応ダメージ');\r\n            result = result.replace(/^敵/, '敵の');\r\n            return result;\r\n        }\r\n        if (te(key)) return t(key);\r\n        const re = new RegExp('(.*?)([\\\\s_\\\\(\\\\)/]+)(.*)');\r\n        let result = '';\r\n        let work = key;\r\n        while (work) {\r\n            const reRet = re.exec(work);\r\n            if (!reRet) {\r\n                result += t(work);\r\n                break;\r\n            }\r\n            if (reRet[1]) result += t(reRet[1]);\r\n            result += reRet[2];\r\n            work = reRet[3];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const percent = function (stat: string) {\r\n        const tempArr = stat.split('.');\r\n        let work = tempArr[0];\r\n        let hasPercent = work.endsWith(\"%\") || STAT_PERCENT_LIST.includes(work);\r\n        if (!hasPercent) {\r\n            ['会心率', '会心ダメージ', 'クールタイム'].forEach(postfix => {\r\n                if (work.endsWith(postfix)) hasPercent = true;\r\n            })\r\n        }\r\n        return hasPercent ? '%' : '';\r\n    }\r\n\r\n    const displayStatName = function (stat: string) {\r\n        let result = stat;\r\n        const tempArr = stat.split('.');\r\n        if (tempArr.length == 1) {\r\n            result = displayName(stat);\r\n        } else if (i18n.global.locale.value === 'ja-jp') {\r\n            result = tempArr[tempArr.length - 1] + 'の' + displayName(tempArr[0]);\r\n        } else {\r\n            result = displayName(tempArr[tempArr.length - 1]) + ' ' + displayName(tempArr[0]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const displayStatValue = function (stat: string, value: number, opt_s?: number): string {\r\n        const myPercent = percent(stat);\r\n        let p = myPercent ? 10 : 1;\r\n        if (opt_s) p = Math.pow(10, opt_s);\r\n        return String(Math.round(value * p) / p) + myPercent;\r\n    }\r\n\r\n    const displayStatAbbrev = function (stat: string) {\r\n        let result = stat;\r\n        const tempArr = stat.split('.');\r\n        if (tempArr.length == 1) {\r\n            if (stat.startsWith('敵')) stat = stat.replace(/^敵/, '');\r\n            if (stat.endsWith('ダメージバフ')) stat = stat.replace(/ダメージバフ$/, '');\r\n            else if (stat.endsWith('ダメージアップ')) stat = stat.replace(/ダメージアップ$/, '');\r\n            else if (stat.endsWith('元素ダメージ')) stat = stat.replace(/元素ダメージ$/, '');\r\n            else if (stat.endsWith('物理ダメージ')) stat = stat.replace(/ダメージ$/, '');\r\n            else if (stat.endsWith('反応ボーナス')) stat = stat.replace(/反応ボーナス$/, '');\r\n            else if (stat.endsWith('耐性')) stat = stat.replace(/耐性$/, '');\r\n            result = displayName(stat);\r\n        } else {\r\n            result = displayStatName(stat);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /** $event.target.valueでのtypescriptエラー回避のために */\r\n    const targetValue = function (event: Event) {\r\n        if (event.target instanceof HTMLInputElement) return event.target.value;\r\n        if (event.target instanceof HTMLSelectElement) return event.target.value;\r\n        return undefined;\r\n    }\r\n\r\n    const displayOptionName = function (name: string) {\r\n        return displayName(name.replace(/^required_/, \"\"));\r\n    }\r\n\r\n    return {\r\n        localeList,\r\n        setI18nLanguage,\r\n        loadLocaleMessages,\r\n        displayName,\r\n        displayStatName,\r\n        displayStatValue,\r\n        displayStatAbbrev,\r\n        targetValue,\r\n        displayOptionName,\r\n    }\r\n}\r\n","import script from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\nexport * from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["isString","value","String","isNumber","isFinite","isBoolean","isPlainObject","myType","Object","prototype","toString","call","deepcopy","result","JSON","parse","stringify","overwriteObject","dst","src","srcKeys","keys","key","includes","basename","path","split","pop","shift","i18n","createI18n","legacy","locale","fallbackLocale","isGlobal","基礎ステータスARRAY","基本ステータスARRAY","高級ステータスARRAY","元素ステータス_ダメージARRAY","元素ステータス_耐性ARRAY","ダメージバフARRAY","実数ダメージ加算ARRAY","元素反応バフARRAY","ステータスその他ARRAY","敵ステータス_元素耐性ARRAY","敵ステータス_その他ARRAY","ステータスARRAY_MAP","Map","STAT_PERCENT_LIST","makeStatusTenmplate","statsObj","forEach","stat","ステータスTEMPLATE","makeEnemyStatusTemplate","聖遺物メイン効果_生の花ARRAY","聖遺物メイン効果_死の羽ARRAY","聖遺物メイン効果_時の砂ARRAY","聖遺物メイン効果_空の杯ARRAY","聖遺物メイン効果_理の冠ARRAY","聖遺物サブ効果ARRAY","聖遺物優先するサブ効果ARRAY","聖遺物ステータスTEMPLATE","元素反応TEMPLATE","元素","蒸発倍率","溶解倍率","過負荷ダメージ","感電ダメージ","超電導ダメージ","拡散ダメージ","拡散元素","結晶吸収量","燃焼ダメージ","開花ダメージ","烈開花ダメージ","超開花ダメージ","超激化ダメージ","草激化ダメージ","DAMAGE_RESULT_TEMPLATE","元素反応","通常攻撃","重撃","落下攻撃","元素スキル","元素爆発","その他","キャラクター注釈","突破レベルレベルARRAY","Array","from","length","_","i","ARTIFACT_SET_MASTER_DUMMY","レアリティ","image","IMG_SRC_DUMMY","CHARACTER_INPUT_TEMPLATE","character","characterMaster","突破レベル","レベル","命ノ星座","通常攻撃レベル","元素スキルレベル","元素爆発レベル","weapon","weaponMaster","武器突破レベル","武器レベル","武器精錬ランク","artifactSets","artifactSetMasters","damageDetailMyCharacter","damageDetailMyWeapon","damageDetailMyArtifactSets","buildname","recommendationSelectedIndex","saveDisabled","removeDisabled","ARTIFACT_DETAIL_INPUT_TEMPLATE","聖遺物メイン効果","聖遺物優先するサブ効果","聖遺物優先するサブ効果上昇値","GENSEN_MASTER_LIST","聖遺物優先するサブ効果上昇回数","聖遺物ステータス","聖遺物ステータスメイン効果","聖遺物ステータスサブ効果","聖遺物優先するサブ効果Disabled","CONDITION_INPUT_TEMPLATE","checkboxList","selectList","conditionValues","conditionAdjustments","攻撃元素","STATS_INPUT_TEMPLATE","statAdjustments","enemyMaster","ENEMY_MASTER_LIST","OPTION_INPUT_TEMPLATE","elementalResonance","supporterList","isSupporterOptionOpened","teamOption","miscOption","parseLevelStr","levelStr","level","Number","replace","ascension","endsWith","error","console","makeDefaultBuildname","makeBuildStorageKey","makeOptionStorageKey","makeArtifactScoringStorageKey","makeRecommendationList","opt_buildData","isSavable","push","name","build","overwrite","log","storageKeyArr","localStorage","startsWith","sort","re","RegExp","buildObj","key2","optionsObj","options","key3","artifactScoringObj","artifactScoring","obj","myRecommendation","artifactRarerityArrArr","artifactRarerity4Num","artifactSet1","artifactSet2","ARTIFACT_SET_MASTER","makeArtifactSetAbbrev","statusName","RECOMMEND_ABBREV_MAP","substring","abbrRe","abbr","a","b","makePrioritySubstatValueList","prioritySubstats","index","opt_substat","ARTIFACT_SUB_MASTER","valueArr","diff","async","loadRecommendation","characterInput","artifactDetailInput","conditionInput","optionInput","getCharacterMasterDetail","artifactStatsSub","weaponType","WEAPON_MASTER","filter","s","getWeaponMasterDetail","prioritySubstatsDisabled","toKey","artifactSet","mainstat","substat","doUpdate","substatValue","prioritySubstatValueList","v","substatCount","キャラクター構成PROPERTY_MAP","ELEMENTAL_RESONANCE_MASTER","astarIndex","indexOf","workCharacter","CHARACTER_MASTER","debug","makeSavedata","resultObj","entry","makeOptionsSavedata","CHANGE_KIND_STATUS","CHANGE_KIND_TALENT","makeDamageDetailObjArrObjCharacter","myTalentDetail","myTalentLevel","myDefaultKind","myDefaultElement","myInputCategory","myStatusChangeDetailObjArr","myTalentChangeDetailObjArr","category","makeDamageDetailObjArr","workCategory","workObj","条件","詳細","workArr","cond","名前","種類","数値","対象","上限","HIT数","ダメージバフ","元素付与無効","除外条件","適用条件","拡散","conditionMap","exclusionMap","detailObj","makeConditionExclusionMapFromStr","isArray","set","makeDamageDetailObjArrObjWeapon","myLevel","condition","makeDamageDetailObjArrObjArtifactSets","damageDetailObjArr","makeDetailObj","defaultKind","defaultElement","inputCategory","opt_condition","my種類","my対象","my数値","DAMAGE_CATEGORY_ARRAY","analyzeFormulaStr","my条件","my上限","getChangeKind","kind","exec","talentDataObj","statusChangeDetailObjArr","talentChangeDetailObjArr","resultArr","makeTeamOptionDetailObjArr","detailObjArr","conditionStr","exclusionCond","myCondStrArr","myCondStr","makeConditionExclusionMapFromStrSub","exclusion","myName","pushToMapValueArray","reRet","prefix","condValueArr","postfix","re2","rangeStart","rangeEnd","step","re2Ret","addDecimal","e","setupConditionValues","splice","masters","master","myDamageDetail","排他","required","exclusions","get","conditionValue","undefined","checked","arr","selectedIndex","map","has","oldValue","getDecimalLength","multiplyDecimal","value1","value2","decimalLength","intValue1","intValue2","Math","pow","opt_max","k","max","min","formulaStr","opt_defaultItem","workStr","analyzeFormulaStrSub","strArr","makeSharedata","savedata","sharedataArr","myBasename","newValue","ARTIFACT_STAT_JA_EN_ABBREV_MAP","join","openTwitter","text","url","opt_hashtags","opt_via","baseUrl","params","URLSearchParams","append","query","shareUrl","window","open","shareByTwitter","sharedata","encoded","encodeURI","getMaxConstellation","getMaxTalentLevel","talentObj","work","pushBuildinfoToSession","builddata","sessionStorage","setItem","popBuildinfoFromSession","getItem","removeItem","_hoisted_1","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","render","_ctx","_cache","$props","$setup","$data","$options","visible","_openBlock","_createElementBlock","_createElementVNode","_Fragment","_renderList","elementList","item","_withDirectives","type","$event","elementCheckList","onChange","checkListOnChange","_vModelCheckbox","elementSrc","alt","weaponList","weaponCheckList","weaponSrc","filteredList","_normalizeClass","bgImageClass","selectedClass","icon_url","onClick","characterOnClick","_toDisplayString","displayName","visionSrc","selectionNumber","_vShow","_createCommentVNode","defineComponent","props","characters","Boolean","emits","setup","context","CompositionFunction","ELEMENT_IMG_SRC","STAR_BACKGROUND_IMAGE_CLASS","element","reactive","WEAPON_IMG_SRC","checkList","computed","elementChecked","weaponChecked","CHARACTER_MASTER_LIST","武器","emit","blankIndex","__exports__","t","te","useI18n","useScope","localeList","setI18nLanguage","loadLocaleMessages","document","querySelector","setAttribute","messages","fetch","then","resp","json","nextTick","percent","tempArr","hasPercent","displayStatName","displayStatValue","opt_s","myPercent","p","round","displayStatAbbrev","targetValue","event","target","HTMLInputElement","HTMLSelectElement","displayOptionName"],"sourceRoot":""}