(function(){"use strict";var e={5983:function(e,n,t){t.d(n,{HD:function(){return r},PO:function(){return c},X8:function(){return o},fX:function(){return s},hj:function(){return a}});t(6699);function r(e){return"string"===typeof e||e instanceof String}function a(e){return isFinite(e)&&null!=e}function c(e){const n=Object.prototype.toString.call(e);return"[object Object]"===n}function o(e){const n=JSON.parse(JSON.stringify(e));return n}function s(e,n){if(c(n)&&c(e)){const t=Object.keys(n);for(const r of t)e[r]=n[r];for(const n of Object.keys(e))t.includes(n)||delete e[n]}return e}},2986:function(e,n,t){t.d(n,{Ac:function(){return $},Cl:function(){return I},HN:function(){return S},HO:function(){return A},Hd:function(){return j},Hk:function(){return Y},K1:function(){return H},NY:function(){return C},R4:function(){return P},US:function(){return w},V6:function(){return b},Vd:function(){return c},Vk:function(){return V},e2:function(){return T},ge:function(){return X},iU:function(){return _},pS:function(){return D},q2:function(){return y},wX:function(){return N},yL:function(){return W}});t(6699);var r=t(3550),a=t(5983);const c=["基礎HP","基礎攻撃力","基礎防御力"],o=["HP上限","攻撃力","防御力","元素熟知"],s=["会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","クールタイム短縮","シールド強化"],l=["炎元素ダメージバフ","水元素ダメージバフ","風元素ダメージバフ","雷元素ダメージバフ","草元素ダメージバフ","氷元素ダメージバフ","岩元素ダメージバフ","物理ダメージバフ"],i=["炎元素耐性","水元素耐性","風元素耐性","雷元素耐性","草元素耐性","氷元素耐性","岩元素耐性","物理耐性"],u=["通常攻撃ダメージバフ","重撃ダメージバフ","落下攻撃ダメージバフ","元素スキルダメージバフ","元素爆発ダメージバフ","与えるダメージ"],f=["通常攻撃ダメージアップ","重撃ダメージアップ","落下攻撃ダメージアップ","元素スキルダメージアップ","元素爆発ダメージアップ","炎元素ダメージアップ","水元素ダメージアップ","風元素ダメージアップ","雷元素ダメージアップ","草元素ダメージアップ","氷元素ダメージアップ","岩元素ダメージアップ","物理ダメージアップ"],m=["蒸発反応ボーナス","溶解反応ボーナス","過負荷反応ボーナス","感電反応ボーナス","凍結反応ボーナス","超電導反応ボーナス","拡散反応ボーナス","結晶反応ボーナス","燃焼反応ボーナス","開花反応ボーナス","烈開花反応ボーナス","超開花反応ボーナス","超激化反応ボーナス","草激化反応ボーナス"],h=["ダメージ軽減","HP%","攻撃力%","防御力%","HP+","攻撃力+","防御力+"],d=["敵炎元素耐性","敵水元素耐性","敵風元素耐性","敵雷元素耐性","敵草元素耐性","敵氷元素耐性","敵岩元素耐性","敵物理耐性"],p=new Map([["基礎ステータス",c],["基本ステータス",o],["高級ステータス",s],["元素ステータス·ダメージ",l],["元素ステータス·耐性",i],["ダメージバフ",u],["実数ダメージ加算",f],["元素反応バフ",m],["その他",h],["敵元素ステータス·耐性",d]]),b=[...s,...l,...i,...u,...m,...d,"別枠乗算"];function g(){const e={};return p.forEach((n=>{n.forEach((n=>{e[n]=0}))})),e["会心率"]=5,e["会心ダメージ"]=50,e["元素チャージ効率"]=100,e["敵レベル"]=0,e["敵防御力"]=0,e}const y=g();function k(){const e={};return[i].forEach((n=>{n.forEach((n=>{e[n]=0}))})),e["防御力"]=0,e}k();const O={HP:0,"攻撃力":0,"防御力":0,"元素熟知":0,"会心率":0,"会心ダメージ":0,"元素チャージ効率":0,"HP%":0,"攻撃力%":0,"防御力%":0,"炎元素ダメージバフ":0,"水元素ダメージバフ":0,"風元素ダメージバフ":0,"雷元素ダメージバフ":0,"草元素ダメージバフ":0,"氷元素ダメージバフ":0,"岩元素ダメージバフ":0,"物理ダメージバフ":0,"与える治療効果":0},v={"元素":"炎","蒸発倍率":0,"溶解倍率":0,"過負荷ダメージ":0,"感電ダメージ":0,"超電導ダメージ":0,"拡散ダメージ":0,"拡散元素":"炎","結晶吸収量":0,"燃焼ダメージ":0,"開花ダメージ":0,"烈開花ダメージ":0,"超開花ダメージ":0,"超激化ダメージ":0,"草激化ダメージ":0},w={"元素反応":(0,a.X8)(v),"通常攻撃":[],"重撃":[],"落下攻撃":[],"元素スキル":[],"元素爆発":[],"その他":[],"キャラクター注釈":[]},_=[Array.from({length:20},((e,n)=>n+1)),Array.from({length:21},((e,n)=>n+20)),Array.from({length:11},((e,n)=>n+40)),Array.from({length:11},((e,n)=>n+50)),Array.from({length:11},((e,n)=>n+60)),Array.from({length:11},((e,n)=>n+70)),Array.from({length:11},((e,n)=>n+80))],E={key:"NONE","レアリティ":5,image:r.bx},j={character:"アンバー",characterMaster:{},"突破レベル":6,"レベル":90,"命ノ星座":0,"通常攻撃レベル":8,"元素スキルレベル":8,"元素爆発レベル":8,weapon:"西風猟弓",weaponMaster:{},"武器突破レベル":6,"武器レベル":90,"武器精錬ランク":1,artifactSets:["NONE","NONE"],artifactSetMasters:[E,E],damageDetailMyCharacter:null,damageDetailMyWeapon:null,damageDetailMyArtifactSets:null,buildname:"",recommendationSelectedIndex:0,saveDisabled:!0,removeDisabled:!0},S={"聖遺物メイン効果":["","","","",""],"聖遺物優先するサブ効果":["","",""],"聖遺物優先するサブ効果上昇値":Array.from(r.Ml[2].values),"聖遺物優先するサブ効果上昇回数":Array.from(r.Ml[2].counts),"聖遺物ステータス":(0,a.X8)(O),"聖遺物ステータスメイン効果":(0,a.X8)(O),"聖遺物ステータスサブ効果":(0,a.X8)(O),"聖遺物優先するサブ効果Disabled":!1},C={checkboxList:[],selectList:[],conditionValues:{},conditionAdjustments:{},"攻撃元素":[null,null,null]},A={statsObj:(0,a.X8)(y),statAdjustments:(0,a.X8)(y),enemyMaster:r.FX[0]};for(const Q of Object.keys(A.statAdjustments))A.statAdjustments[Q]=0;const N={elementalResonance:{conditionValues:{},conditionAdjustments:{}},supporterList:[],isSupporterOptionOpened:{},teamOption:(0,a.X8)(C),miscOption:(0,a.X8)(C)};(0,a.X8)(j),(0,a.X8)(S),(0,a.X8)(C),(0,a.X8)(A);function M(e){try{let n;n=(0,a.HD)(e)?Number(String(e).replace("+","")):Number(e);let t=0;for(let r=_.length-1;r>=0;r--)if(t=r,!(_[r][0]>n)){_[r][0]!=n||String(e).endsWith("+")||t--;break}return[t,n]}catch(n){throw console.error(e),n}}function H(e){return"あなたの"+e}function P(e,n){let t="構成_"+e;return n&&n!=H(e)&&(t+="_"+n),t}function x(e,n,t){const a=[];if(e[n]&&(t||(t=e[n]),t&&t in r._J)){const e=r._J[t];for(let n=0;n<e.length;n++)if(a.push(e[n]),n<e.length-1){const t=e[n+1]-e[n];a.push(e[n]+t/2)}}return a}async function D(e,n,t,c,o){try{const s=e.character,l=await(0,r.tm)(s);e.characterMaster=l;const i=(0,a.X8)(O);"レベル"in o&&([e.突破レベル,e.レベル]=M(o["レベル"])),["命ノ星座","通常攻撃レベル","元素スキルレベル","元素爆発レベル"].forEach((n=>{n in o&&(e[n]=Number(o[n]))}));const u=l["武器"];"武器"in o&&(Object.keys(r.Nd[u]).includes(o["武器"])?e.weapon=o["武器"]:e.weapon=Object.keys(r.Nd[u]).filter((e=>e.startsWith("西風")))[0],e.weaponMaster=await(0,r.i7)(e.weapon,u)),"武器レベル"in o&&([e.武器突破レベル,e.武器レベル]=M(o["武器レベル"])),"精錬ランク"in o&&(e.武器精錬ランク=Number(o["精錬ランク"]));let f=!1;for(const e of Object.keys(o).filter((e=>e.startsWith("聖遺物サブ効果")))){let n=e.replace(/^聖遺物サブ効果/,"");"HP"!=n&&(n=n.replace(/P$/,"%")),(o[e]||0==o[e])&&(f=!0,i[n]=Number(o[e]))}if(n.聖遺物優先するサブ効果Disabled=f,["聖遺物セット効果1","聖遺物セット効果2"].forEach(((n,t)=>{if(!(n in o))return;const a=o[n];a&&a in r.oN?(e.artifactSets[t]=a,e.artifactSetMasters[t]=r.oN[a]):e.artifactSetMasters[t]=E})),["聖遺物メイン効果1","聖遺物メイン効果2"].forEach(((e,t)=>{n["聖遺物メイン効果"][t]=e in o?o[e]:["5_HP","5_攻撃力"][t]})),["聖遺物メイン効果3","聖遺物メイン効果4","聖遺物メイン効果5"].forEach(((e,t)=>{if(!(e in o))return;const r=o[e];n["聖遺物メイン効果"][t+2]=r})),f||(["聖遺物優先するサブ効果1","聖遺物優先するサブ効果2","聖遺物優先するサブ効果3"].forEach(((e,t)=>{if(!(e in o))return;const r=o[e];n["聖遺物優先するサブ効果"][t]=r})),["聖遺物優先するサブ効果1上昇値","聖遺物優先するサブ効果2上昇値","聖遺物優先するサブ効果3上昇値"].forEach(((e,t)=>{let c=!1;if(n["聖遺物優先するサブ効果"][t]&&e in o&&(0,a.hj)(o[e])&&(c=!0),c){const r=Number(o[e]),a=n["聖遺物優先するサブ効果"][t],c=x([a],0);c.forEach(((e,a)=>{r<=e&&(n["聖遺物優先するサブ効果上昇値"][t]=a)}))}else n["聖遺物優先するサブ効果"][t]&&!n["聖遺物優先するサブ効果上昇値"][t]&&(n["聖遺物優先するサブ効果上昇値"][t]=r.Ml[2].values[t])})),["聖遺物優先するサブ効果1上昇回数","聖遺物優先するサブ効果2上昇回数","聖遺物優先するサブ効果3上昇回数"].forEach(((e,t)=>{let c=!1;if(n["聖遺物優先するサブ効果"][t]&&e in o&&(0,a.hj)(o[e])&&(c=!0),c){const r=Number(o[e]);n["聖遺物優先するサブ効果上昇回数"][t]=r}else n["聖遺物優先するサブ効果"][t]&&!n["聖遺物優先するサブ効果上昇回数"][t]&&(n["聖遺物優先するサブ効果上昇回数"][t]=r.Ml[2].counts[t])}))),Object.keys(o).filter((e=>!r.PW.has(e)&&!["options","artifactScoring"].includes(e))).forEach((e=>{null==o[e]?t.conditionValues[e]=o[e]:(0,a.HD)(o[e])?t.conditionValues[e]=Number(o[e]):t.conditionValues[e]=o[e]})),"options"in o){const e=Object.keys(o.options);e.length&&((0,a.fX)(c.elementalResonance.conditionValues,{}),(0,a.fX)(c.teamOption.conditionValues,{}),(0,a.fX)(c.miscOption.conditionValues,{}),e.forEach((e=>{if(e in r._9||"dendroOption"==e)c.elementalResonance.conditionValues[e]=o.options[e];else{const n=e.indexOf("*");if(-1!=n){const t=e.substring(0,n);t in r.bw?c.teamOption.conditionValues[e]=o.options[e]:c.miscOption.conditionValues[e]=o.options[e]}else c.miscOption.conditionValues[e]=o.options[e]}})))}(0,a.fX)(n.聖遺物ステータスサブ効果,i),console.debug("loadRecommendation",e,n,t,o)}catch(s){throw console.error(e,n,t,o),s}}const T="ステータス変更系詳細",W="天賦性能変更系詳細";function X(e){try{const n=e.characterMaster,t={};let r,a,c,o;const s="キャラクター",l=[],i=[];a=e["通常攻撃レベル"],o="法器"===n["武器"]?n["元素"]:null,["通常攻撃","重撃","落下攻撃"].forEach((e=>{r=n[e],c=e+"ダメージ",t[e]=U(r,a,c,o,l,i,s)})),["通常攻撃","重撃","落下攻撃"].forEach((u=>{const f="特殊"+u;if(f in n){if(r=n[f],"種類"in r)switch(c=r["種類"],c){case"元素スキルダメージ":a=e["元素スキルレベル"];break;case"元素爆発ダメージ":a=e["元素爆発レベル"];break}"元素"in r&&(o=r["元素"]);const u={"条件":r["条件"],"詳細":U(r,a,c,o,l,i,s)};t[f]=u}})),a=e["元素スキルレベル"],c="元素スキルダメージ",o=n["元素"],t["元素スキル"]=U(n["元素スキル"],a,c,o,l,i,s),a=e["元素爆発レベル"],c="元素爆発ダメージ",o=n["元素"],t["元素爆発"]=U(n["元素爆発"],a,c,o,l,i,s),t["その他"]=[],"その他戦闘天賦"in n&&n["その他戦闘天賦"].forEach((e=>{const n=U(e,null,null,null,l,i,s);n.length>0&&t["その他"].push(...n)})),n["固有天賦"].forEach((e=>{const n=U(e,null,null,null,l,i,s);n.length>0&&t["その他"].push(...n)})),"命ノ星座"in n&&Object.keys(n["命ノ星座"]).forEach((a=>{if(Number(a)>e.命ノ星座)return;r=n["命ノ星座"][a];const c=U(r,null,null,null,l,i,s);c.length>0&&t["その他"].push(...c)})),"風"==n["元素"]&&(0==i.filter((e=>e.条件&&e.条件.startsWith("拡散@"))).length&&["炎元素","水元素","雷元素","氷元素"].forEach((e=>{i.push({"名前":null,"種類":"固有変数","元素":null,"数値":null,"条件":"拡散@"+e,"対象":null,"上限":null,"HIT数":null,"ダメージバフ":null,"元素付与無効":null,"除外条件":null,"適用条件":null})})),"オプション初期値"in n?0==Object.keys(n["オプション初期値"]).filter((e=>"拡散"==e)).length&&(n["オプション初期値"]["拡散"]=1):n["オプション初期値"]={"拡散":1}),t[T]=l,t[W]=i;const u=new Map,f=new Map;return l.filter((e=>e["条件"])).forEach((e=>{q(e["条件"],u,f)})),i.filter((e=>e["条件"])).forEach((e=>{q(e["条件"],u,f)})),u.forEach(((e,n)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(n,["",...e]))})),t["条件"]=u,t["排他"]=f,e.damageDetailMyCharacter=t,t}catch(n){throw console.error(e),n}}function I(e){try{const n=e.weapon,t=e.weaponMaster,r={};if(!n||!t)return r;let c;const o=e.武器精錬ランク,s="武器",l=[],i=[];"武器スキル"in t&&(c=t["武器スキル"],r["その他"]=U(c,o,null,null,l,i,s)),r[T]=l,r[W]=i;const u=new Map,f=new Map;return l.filter((e=>e["条件"])).forEach((e=>{let n=e["条件"];(0,a.PO)(n)&&o in n&&(n=n[o]),q(n,u,f)})),i.filter((e=>e["条件"])).forEach((e=>{let n=e["条件"];(0,a.PO)(n)&&o in n&&(n=n[o]),q(n,u,f)})),u.forEach(((e,n)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(n,["",...e]))})),r["条件"]=u,r["排他"]=f,e.damageDetailMyWeapon=r,r}catch(n){throw console.error(e),n}}function V(e){try{const n=[];let t;const r="聖遺物セット効果",a=[],c=[],o=e.artifactSetMasters.filter((e=>e));if(o.length>0){const e=[];"2セット効果"in o[0]&&(t=o[0]["2セット効果"],e.push(...U(t,null,null,null,a,c,r))),2==o.length&&(o[0]==o[1]?(t=o[0]["4セット効果"],e.push(...U(t,null,null,null,a,c,r))):(t=o[1]["2セット効果"],e.push(...U(t,null,null,null,a,c,r)))),n["その他"]=e}n[T]=a,n[W]=c;const s=new Map,l=new Map;return a.filter((e=>e["条件"])).forEach((e=>{q(e["条件"],s,l)})),c.filter((e=>e["条件"])).forEach((e=>{q(e["条件"],s,l)})),s.forEach(((e,n)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||s.set(n,["",...e]))})),n["条件"]=s,n["排他"]=l,e.damageDetailMyArtifactSets=n,n}catch(n){throw console.error(e),n}}const F=function(e,n,t,c,o,s){let l="種類"in e?e["種類"]:t,i=null;-1!=l.indexOf(".")?(i=l.substring(l.indexOf(".")+1),l=l.substring(0,l.indexOf("."))):"対象"in e&&(i=e["対象"]);let u=null;"数値"in e&&(u=e["数値"],(0,a.hj)(u)||(0,a.HD)(u)||((0,a.PO)(u)&&n&&n in u?u=u[n]:console.error(e,n,t,c,u)),u=r.vN.includes(l+"ダメージ")||l.endsWith("ダメージ")?G(u,"攻撃力"):G(u,l));let f=null;f="条件"in e?(0,a.PO)(e["条件"])&&n&&n in e["条件"]?e["条件"][n]:e["条件"]:s??null;let m=null;"上限"in e&&(m=e["上限"],(0,a.PO)(m)&&n&&n in m&&(m=m[n]),m=G(m));const h={"名前":e["名前"],"種類":l,"元素":"元素"in e?e["元素"]:c,"数値":u,"条件":f,"対象":i,"上限":m,"HIT数":"HIT数"in e?e["HIT数"]:null,"ダメージバフ":"ダメージバフ"in e?e["ダメージバフ"]:null,"元素付与無効":"元素付与無効"in e?e["元素付与無効"]:"武器"==o,"除外条件":"除外条件"in e?e["除外条件"]:null,"適用条件":"適用条件"in e?e["適用条件"]:null};return h};function R(e){return e in y||new RegExp("[自全].+(バフ|アップ)").exec(e)||new RegExp("敵?[自全]元素耐性").exec(e)||["別枠乗算","回復量アップ"].includes(e)||["敵防御力"].includes(e)||["発動回数","使用回数"].includes(e)||["攻撃速度","通常攻撃速度","移動速度"].includes(e)||e.endsWith("継続時間")||e.endsWith("クールタイム")||e.endsWith("会心率")||e.endsWith("会心ダメージ")?"STATUS":e.endsWith("強化")||e.endsWith("付与")||"防御無視"==e||"固有変数"==e?"TALENT":void 0}const U=function(e,n,t,r,a,c,o,s){const l=[];return"詳細"in e?(e["詳細"].forEach((e=>{const i=F(e,n,t,r,o,s),u=i.種類;return null!=a&&"STATUS"==R(u)?(i["元素"]="元素"in e?e["元素"]:null,void a.push(i)):null!=c&&"TALENT"==R(u)?(i["元素"]="元素"in e?e["元素"]:null,void c.push(i)):void l.push(i)})),l):l},q=function(e,n,t){let r=null,a=e.split("^");a.length>1&&(r=a[1]);const c=a[0];-1!=c.indexOf("|")?(a=c.split("|"),a.forEach((e=>{L(e,n,t,r)}))):(a=c.split("&"),a.forEach((e=>{L(e,n,t,r)})))};function L(e,n,t,r){const a=e.split(/[@=]/),c=a[0];if(1==a.length)Z(n,c,null);else if(2==a.length)if(-1!=a[1].indexOf(",")){const e=new RegExp("([^0-9]*?)([\\+\\-0-9\\.,]+)(.*)"),t=e.exec(a[1]);if(t){const e=t[1],r=t[2].split(","),a=t[3];r.forEach((t=>{Z(n,c,e+t+a)}))}}else if(-1!=a[1].indexOf("-")){const e=new RegExp("([^0-9\\.]*)(-?[0-9\\.]+)-(-?[0-9\\.]+)(.*)"),t=new RegExp("/([0-9\\.]+)(.*)"),r=e.exec(a[1]);if(r){const e=r[1],a=Number(r[2]),o=Number(r[3]);let s=a,l=r[4];if(l){const e=t.exec(l);e&&(s=Number(e[1]),l=e[2])}for(let t=a;t<o;t=J(t,s,o))Z(n,c,e+String(t)+l);Z(n,c,e+String(o)+l)}else Z(n,c,a[1])}else Z(n,c,a[1]);else console.error(e,n,t);r&&r.split(",").forEach((e=>{Z(t,c,e)}))}function Y(e,n){try{const t=e.conditionValues,r=e.checkboxList,a=e.selectList;r.splice(0,r.length),a.splice(0,a.length);const c=[n.characterMaster,n.weaponMaster,...n.artifactSetMasters];for(const e of c.filter((e=>e))){if("オプション初期値"in e)for(const n of Object.keys(e["オプション初期値"]))n in t||(t[n]=e["オプション初期値"][n]);if("4セット効果"in e&&"オプション初期値"in e["4セット効果"])for(const n of Object.keys(e["4セット効果"]["オプション初期値"]))n in t||(t[n]=e["4セット効果"]["オプション初期値"][n])}for(const e of[n.damageDetailMyCharacter,n.damageDetailMyWeapon,n.damageDetailMyArtifactSets])if(e){const n=e.条件,c=e.排他;n.forEach(((e,o)=>{if(null==e)0==r.filter((e=>e.name==o)).length&&r.push({name:o});else if(0==a.filter((e=>e.name==o)).length){const n=e[0].startsWith("required_");a.push({name:o,options:e,required:n})}if(o in t&&null!=t[o]){const e=c.get(o);if(e)for(const r of e)if(r in t){const e=n.get(r);void 0!==e&&(t[r]=null!==e&&0)}}else if(null===e){let e=!0;const n=c.get(o);n&&n.filter((e=>t[e])).length>0&&(e=!1),t[o]=e}else{let n=e.length-1;const r=c.get(o);r&&r.filter((e=>t[e])).length>0&&(n=0),t[o]=n}}))}}catch(t){throw console.error(e,n),t}}function Z(e,n,t){if(null==t)e.has(n)||e.set(n,null);else if(e.has(n)){const r=e.get(n);null==r?e.set(n,[t]):r.includes(t)||e.get(n).push(t)}else e.set(n,[t])}function B(e){const n=(""+e).split(".");return n.length>1?n[1].length:0}function K(e,n){const t=B(e)+B(n),r=Number((""+e).replace(".","")),a=Number((""+n).replace(".","")),c=r*a/Math.pow(10,t);return Number(c)}function J(e,n,t){const r=Math.pow(10,Math.max(B(e),B(n)));let a=(K(e,r)+K(n,r))/r;return void 0!=t&&(a=Math.min(a,t)),a}const G=function(e,n=null){const t=[],r=new RegExp("([\\+\\-\\*/]?)([^\\+\\-\\*/]+)(.*)");let a=String(e);while(1){const e=r.exec(a);if(!e){t.push(a);break}if(e[1]&&t.push(e[1]),t.push(z(e[2],n)),!e[3])break;a=e[3]}return t};function z(e,n=null){const t=[];if((0,a.hj)(e))t.push(Number(e));else{const r=e.split("%");1==r.length?t.push(r[0]):(t.push(Number(r[0])/100),t.push("*"),r[1].length>0?t.push(r[1]):null!=n&&t.push(n))}return t}function $(e,n,t){sessionStorage.setItem("character",e),n&&sessionStorage.setItem("buildname",n),t&&sessionStorage.setItem("builddata",JSON.stringify(t))}},3550:function(e,n,t){t.d(n,{$Y:function(){return u},FX:function(){return _},GN:function(){return A},Ml:function(){return T},Nd:function(){return v},PW:function(){return H},_9:function(){return h},_J:function(){return f},bw:function(){return r},bx:function(){return y},dr:function(){return M},i7:function(){return C},k9:function(){return N},oN:function(){return i},qy:function(){return O},tm:function(){return j},vN:function(){return P}});var r=t(8667),a=t(7722),c=t(1930),o=t(7849),s=t(2364),l=t(1003),i=t(5678),u=t(2124),f=t(3185),m=t(8970),h=t(6385),d=t(5093),p=t(9286),b=t(8846),g=t(7646);const y="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7";function k(e){if(e.icon_url)return e.icon_url;if(e.image)return e.image;if(e.import){let n=e.import.replace("data/","images/");return-1!=n.indexOf("characters/")&&(n=n.replace("characters/","characters/face/")),n=n.replace(/json$/,"png"),n}return null}const O=[];Object.keys(r).forEach((e=>{const n=r[e];n.key=e,n.icon_url=k(n),O.push(n)}));const v={"片手剣":a,"両手剣":c,"長柄武器":o,"弓":s,"法器":l};Object.keys(v).forEach((e=>{const n=v[e];Object.keys(n).forEach((e=>{const t=n[e];t.key=e,t.icon_url=k(t)}))}));Object.keys(a).map((e=>a[e])),Object.keys(c).map((e=>c[e])),Object.keys(o).map((e=>o[e])),Object.keys(s).map((e=>s[e])),Object.keys(l).map((e=>l[e]));const w=[];Object.keys(i).forEach((e=>{const n=i[e];n.key=e,n.icon_url=k(n),w.push(n)}));Object.keys(u[5]),Object.keys(f);for(const W of Object.keys(m))for(const e of Object.keys(m[W]))m[W][e]>=1e3&&(m[W][e]=1/0);const _=Object.keys(m).map((e=>({key:e,...m[e]}))),E=(Object.keys(h).map((e=>({key:e,...h[e]}))),Object.keys(d).map((e=>({key:e,...d[e]}))),Object.keys(p).map((e=>({key:e,...p[e]}))),Object.keys(b).map((e=>({key:e,...b[e]}))),Object.keys(g).map((e=>({key:e,...g[e]}))),new Map);async function j(e){try{if(!E.has(e)){const n=r[e]["import"].replace(/^\//,""),t=await fetch(n).then((e=>e.json())),a=r[e].武器;t.通常攻撃.icon_url=N[a],E.set(e,t)}return E.get(e)}catch(n){throw console.error(e),n}}const S=new Map;async function C(e,n){try{if(!S.has(e)){let t;t=n?[n]:Object.keys(v);for(const n of t)if(e in v[n]){const t=v[n],r=t[e]["import"],a=await fetch(r).then((e=>e.json()));a.種類=n,S.set(e,a);break}}return S.get(e)}catch(t){throw console.error(e,n),t}}const A={"炎":"images/element_pyro.png","水":"images/element_hydro.png","風":"images/element_anemo.png","雷":"images/element_electro.png","草":"images/element_dendro.png","氷":"images/element_cryo.png","岩":"images/element_geo.png"},N={"片手剣":"images/characters/NormalAttack_sword.png","両手剣":"images/characters/NormalAttack_claymore.png","長柄武器":"images/characters/NormalAttack_polearm.png","弓":"images/characters/NormalAttack_bow.png","法器":"images/characters/NormalAttack_catalyst.png"},M={1:"star1-bg",2:"star2-bg",3:"star3-bg",4:"star4-bg",5:"star5-bg"},H=new Map([["キャラクター",null],["レベル",null],["命ノ星座",0],["通常攻撃レベル",0],["元素スキルレベル",0],["元素爆発レベル",0],["武器",null],["武器レベル",0],["精錬ランク",0],["聖遺物セット効果1",null],["聖遺物セット効果2",null],["聖遺物メイン効果1",null],["聖遺物メイン効果2",null],["聖遺物メイン効果3",null],["聖遺物メイン効果4",null],["聖遺物メイン効果5",null],["聖遺物サブ効果HP",0],["聖遺物サブ効果攻撃力",0],["聖遺物サブ効果防御力",0],["聖遺物サブ効果元素熟知",0],["聖遺物サブ効果会心率",0],["聖遺物サブ効果会心ダメージ",0],["聖遺物サブ効果元素チャージ効率",0],["聖遺物サブ効果HPP",0],["聖遺物サブ効果攻撃力P",0],["聖遺物サブ効果防御力P",0],["聖遺物優先するサブ効果1",null],["聖遺物優先するサブ効果1上昇値",-1],["聖遺物優先するサブ効果1上昇回数",-1],["聖遺物優先するサブ効果2",null],["聖遺物優先するサブ効果2上昇値",-1],["聖遺物優先するサブ効果2上昇回数",-1],["聖遺物優先するサブ効果3",null],["聖遺物優先するサブ効果3上昇値",-1],["聖遺物優先するサブ効果3上昇回数",-1]]),P=["通常攻撃ダメージ","重撃ダメージ","落下攻撃ダメージ","元素スキルダメージ","元素爆発ダメージ"],x=(new Map([["HP%","HP"],["元素熟知","熟"],["元素チャージ効率","ﾁｬ"],["会心率","率"],["会心ダメージ","ダ"],["与える治療効果","治"]]),new Map([["HP%","HP"],["攻撃力%","AT"],["防御力%","DF"],["元素熟知","EM"],["会心率","CR"],["会心ダメージ","CD"],["元素チャージ効率","ER"],["与える治療効果","HE"],["炎元素ダメージバフ","Py"],["水元素ダメージバフ","Hy"],["風元素ダメージバフ","An"],["雷元素ダメージバフ","El"],["草元素ダメージバフ","De"],["氷元素ダメージバフ","Cr"],["岩元素ダメージバフ","Ge"],["物理ダメージバフ","Ph"]]),new Map([["HP","HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","ElementalMastery"],["会心率","CritRate"],["会心ダメージ","CritDMG"],["元素チャージ効率","EnergyRecharge"],["炎元素ダメージバフ","Pyro"],["水元素ダメージバフ","Hydro"],["風元素ダメージバフ","Anemo"],["雷元素ダメージバフ","Electro"],["草元素ダメージバフ","Dendro"],["氷元素ダメージバフ","Cryo"],["岩元素ダメージバフ","Geo"],["物理ダメージバフ","Physical"],["与える治療効果","Healing"],["HP%","HPp"],["攻撃力%","ATKp"],["防御力%","DEFp"]])),D=new Map;x.forEach(((e,n)=>{D.set(e,n)}));const T=[{key:"",values:[7,7,7],counts:[0,0,0]},{key:"厳選初心者",values:[3,3,3],counts:[7,4,4]},{key:"厳選1ヶ月",values:[3,3,3],counts:[8,5,5]},{key:"厳選3ヶ月",values:[3,3,3],counts:[11,8,7]},{key:"日々石割り",values:[1,1,1],counts:[14,11,10]}]},448:function(e,n,t){var r=t(9242),a=t(3396),c=t(7139);const o=e=>((0,a.dD)("data-v-5ca21e80"),e=e(),(0,a.Cn)(),e),s={class:"base-container"},l={class:"pane1"},i={class:"display-stat-select"},u=["value"],f={class:"number-of-teams"},m=(0,a.Uk)(" Number of teams "),h=["min"],d={class:"pane2"},p=o((()=>(0,a._)("div",{class:"pane3"},null,-1))),b=o((()=>(0,a._)("div",{class:"pane4"},null,-1))),g=o((()=>(0,a._)("div",{class:"footer"},null,-1)));function y(e,n,t,o,y,k){const O=(0,a.up)("TeamItem"),v=(0,a.up)("draggable"),w=(0,a.up)("CharacterSelectModal");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",l,[(0,a._)("div",i,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.DISPLAY_STAT_LIST,(t=>((0,a.wg)(),(0,a.iD)("label",{key:t[1]},[(0,a.wy)((0,a._)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":n[0]||(n[0]=n=>e.displayStat=n),value:t[0]},null,8,u),[[r.G2,e.displayStat]]),(0,a._)("span",null,(0,c.zw)(t[1]),1)])))),128))]),(0,a._)("label",f,[m,(0,a.wy)((0,a._)("input",{type:"number",min:e.NUMBER_OF_TEAMS,"onUpdate:modelValue":n[1]||(n[1]=n=>e.numberOfTeams=n),onChange:n[2]||(n[2]=(...n)=>e.numberOfTeamsOnChange&&e.numberOfTeamsOnChange(...n))},null,40,h),[[r.nr,e.numberOfTeams]])]),(0,a._)("div",null,[(0,a._)("button",{type:"button",onClick:n[3]||(n[3]=(...n)=>e.save&&e.save(...n))},"Save"),(0,a._)("button",{type:"button",onClick:n[4]||(n[4]=(...n)=>e.load&&e.load(...n))},"Reset"),(0,a._)("button",{type:"button",onClick:n[5]||(n[5]=(...n)=>e.clear&&e.clear(...n))},"Clear")])]),(0,a._)("div",d,[(0,a.Wm)(v,{list:e.teams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,a.w5)((({element:n})=>[(0,a.Wm)(O,{team:n,selected:e.teamSelected(n.id),displayStat:e.displayStat,onClick:t=>e.teamOnClick(n.id),"onChange:name":e.teamNameOnChange,"onChange:buildname":e.buildnameOnChange,"onClick:character":t=>e.characterOnClick(n)},null,8,["team","selected","displayStat","onClick","onChange:name","onChange:buildname","onClick:character"])])),_:1},8,["list"])]),(0,a.Wm)(w,{visible:e.characterSelectVisible,memberNames:e.memberNames,"onClick:cancel":n[6]||(n[6]=n=>e.characterSelectVisible=!1),"onClick:ok":e.updateCharacters},null,8,["visible","memberNames","onClick:ok"]),p,b,g])}var k=t(6983),O=t.n(k),v=t(4870),w=t(589),_=t(2986),E=t(5983),j=t(3550);const S=10,C=4;function A(e){let n;return e.name&&e.name in j.bw&&(n=j.bw[e.name]),n}function N(e){const n=e.split("_"),t=n[1];let r;return n.splice(0,2),r=n.length>0?n.join("_"):(0,_.K1)(t),r}function M(e){return Object.keys(localStorage).filter((n=>n.startsWith((0,_.R4)(e))))}function H(e,n){let t;const r=(0,_.R4)(e,n),a=localStorage.getItem(r);return a&&(t=JSON.parse(a)),t}const P={class:"title handle"},x={class:"name"},D=(0,a._)("span",null,"◇",-1),T={key:0},W={key:1},X={class:"element-resonance"},I=["src"],V={class:"members"};function F(e,n,t,o,s,l){const i=(0,a.up)("MemberItem");return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)("team"+e.selectedClass)},[(0,a._)("div",P,[(0,a._)("label",x,[D,e.editable?((0,a.wg)(),(0,a.iD)("span",T,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=n=>e.name=n),placeholder:"INPUT TEAM NAME",onChange:n[1]||(n[1]=(...n)=>e.nameOnChange&&e.nameOnChange(...n))},null,544),[[r.nr,e.name]]),(0,a._)("span",{class:"button material-symbols-outlined",onClick:n[2]||(n[2]=n=>e.editable=!1)}," edit_off ")])):((0,a.wg)(),(0,a.iD)("span",W,[(0,a._)("span",null,(0,c.zw)(e.name),1),(0,a._)("span",{class:"button material-symbols-outlined",onClick:n[3]||(n[3]=n=>e.editable=!0)}," edit ")]))]),(0,a._)("div",X,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.resonanceElementImgSrcs,(e=>((0,a.wg)(),(0,a.iD)("img",{class:"element-resonance",key:e,src:e,alt:"resonance"},null,8,I)))),128))])]),(0,a._)("div",V,[(0,a._)("table",null,[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.team.members,(n=>((0,a.wg)(),(0,a.iD)("td",{key:n.id},[(0,a.Wm)(i,{member:n,"onClick:character":e.characterOnClick,"onChange:buildname":e.changeBuildname},null,8,["member","onClick:character","onChange:buildname"])])))),128))])])])],2)}const R={class:"member"},U=["src","alt"],q=["src"],L=["src"],Y=["src"],Z=["src"],B={class:"extra-control"},K={key:0},J=["value"],G={key:1};function z(e,n,t,o,s,l){return(0,a.wg)(),(0,a.iD)("div",R,[(0,a._)("div",{class:"member-img",onClick:n[0]||(n[0]=(...n)=>e.characterOnClick&&e.characterOnClick(...n))},[(0,a._)("img",{class:(0,c.C_)("character"+e.characterImgClass),src:e.characterImgSrc,alt:e.displayName(e.member.name)},null,10,U),(0,a._)("img",{class:"vision",src:e.visionImgSrc,alt:"vision"},null,8,q),(0,a.wy)((0,a._)("div",{class:"constellation"},(0,c.zw)(e.constellation),513),[[r.F8,e.constellation]])]),(0,a._)("div",null,(0,c.zw)(e.statValue),1),(0,a._)("div",null,[(0,a._)("img",{class:"weapon",src:e.imgWeaponSrc,alt:"weapon"},null,8,L),(0,a._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(0),alt:"artifact-set"},null,8,Y),(0,a._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(1),alt:"artifact-set"},null,8,Z)]),(0,a._)("div",null,[(0,a._)("span",{class:"button material-symbols-outlined",onClick:n[1]||(n[1]=n=>e.extraControl="buildname")}," manage_accounts "),(0,a._)("span",{class:"button material-symbols-outlined",onClick:n[2]||(n[2]=n=>e.extraControl="locate")}," edit_note ")]),(0,a._)("div",B,["buildname"==e.extraControl?((0,a.wg)(),(0,a.iD)("div",K,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":n[3]||(n[3]=n=>e.buildname=n),onChange:n[4]||(n[4]=(...n)=>e.buildnameOnChange&&e.buildnameOnChange(...n))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.buildnames,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e},(0,c.zw)(e),9,J)))),128))],544),[[r.bM,e.buildname]])])):(0,a.kq)("",!0),"locate"==e.extraControl?((0,a.wg)(),(0,a.iD)("div",G,[(0,a._)("button",{type:"button",onClick:n[5]||(n[5]=(...n)=>e.locate&&e.locate(...n))},"open")])):(0,a.kq)("",!0)])])}t(6699);function $(e,n){return n+_.iU[e][0]==n?"+":""}function Q(e,n,t){if(!e)return 0;const r=$(n,t);if(r in e)return e[r];const a=_.iU[n][0],c=_.iU[n][_.iU[n].length-1],o=e[a+"+"],s=e[c];return o+(s-o)*(t-a)/(c-a)}function ee(e,n){const t=_.iU[n][0];return e[t+"+"]}function ne(e,n){Object.keys(e).forEach((n=>{e[n]=0}));for(const t of n){if(!t)continue;const n=t.split("_");e[n[1]]+=j.$Y[n[0]][n[1]]}}function te(e){const n=e.聖遺物ステータス,t=e.聖遺物ステータスメイン効果,r=e.聖遺物ステータスサブ効果;for(const a of Object.keys(n))n[a]=0;for(const a of Object.keys(t))a in n?n[a]+=t[a]:n[a]=t[a];for(const a of Object.keys(r))a in n?n[a]+=r[a]:n[a]=r[a]}const re=function(e,n,t,r,a){if(n&&t&&r&&a)try{const c=n.characterMaster,o=n.突破レベル,s=n.レベル,l=n.命ノ星座,i=n.weaponMaster,u=n.武器突破レベル,f=n.武器レベル,m=(0,E.X8)(_.q2);if(m["突破レベル"]=o,m["レベル"]=s,m["命ノ星座"]=l,m["元素"]=c.元素,"元素エネルギー"in c["元素爆発"]&&(m["元素エネルギー"]=c["元素爆発"]["元素エネルギー"]),"固有変数"in c)for(const e of Object.keys(c["固有変数"]))e in r.conditionValues?m[e]=Number(r.conditionValues[e]):m[e]=c["固有変数"][e];for(const n of Object.keys(e.enemyMaster).filter((e=>"key"!=e))){const t="敵"+n;m[t]=e.enemyMaster[n]}Object.keys(e.statAdjustments).forEach((n=>{n in m&&(m[n]+=e.statAdjustments[n])}));for(const e of Object.keys(c["ステータス"]))if(_.Vd.includes(e))m[e]+=Q(c["ステータス"][e],o,s);else{const n=["HP","攻撃力","防御力"].includes(e)?e+"+":e;n in m&&(m[n]+=ee(c["ステータス"][e],o))}for(const e of Object.keys(i["ステータス"]))m[e]+=Q(i["ステータス"][e],u,f);const h=t.聖遺物ステータス;for(const e of Object.keys(h)){const n=["HP","攻撃力","防御力"].includes(e)?e+"+":e;m[n]+=h[e]}let d="法器"==c.武器?c.元素:"物理",p="法器"==c.武器?c.元素:"物理",b="法器"==c.武器?c.元素:"物理";a&&[a.elementalResonance,a.teamOption,a.miscOption].forEach((e=>{e&&Object.keys(e.conditionAdjustments).forEach((n=>{if(e.conditionAdjustments[n]===1/0){if(n.endsWith("元素付与")&&["片手剣","両手剣","長柄武器"].includes(c.武器)){const e=n.replace(/元素付与$/,"");d=e,p=e,b=e}}else n in m?m[n]+=e.conditionAdjustments[n]:m[n]=e.conditionAdjustments[n]}))}));const g=se(r),y=ae(n,g,m);for(const e of[n.damageDetailMyCharacter,n.damageDetailMyWeapon,n.damageDetailMyArtifactSets])if(e&&_.yL in e)for(const n of e[_.yL]){if(n["条件"]){const e=le(n["条件"],g,l);if(0==e)continue}if(n["種類"]&&n["種類"].endsWith("元素付与")){const e=n["種類"].replace("元素付与","");n["対象"]?"通常攻撃ダメージ"==n["対象"]?d=e:"重撃ダメージ"==n["対象"]?p=e:"落下攻撃ダメージ"==n["対象"]&&(b=e):(d=e,p=e,b=e)}}r.攻撃元素=[d,p,b],(0,E.fX)(e.statsObj,m),(0,E.fX)(r.conditionAdjustments,y)}catch(c){throw console.error(e,n,t,r,a),c}};function ae(e,n,t){const r=e.命ノ星座,a={},c=["元素熟知","元素チャージ効率"],o=[],s=[],l=[];for(const i of[e.damageDetailMyCharacter,e.damageDetailMyWeapon,e.damageDetailMyArtifactSets])if(i&&_.e2 in i)for(const e of i[_.e2]){let t=!1,a=e["数値"];if(e["条件"]){const c=le(e["条件"],n,r);if(0==c)continue;1!=c&&(a=a.concat(["*",c])),t=!0}if(e["種類"])if(e["対象"]){const n=e["種類"]+"."+e["対象"];l.push([n,a,e["上限"],t])}else c.includes(e["種類"])?o.push([e["種類"],a,e["上限"],t]):e["種類"].endsWith("%")?s.push([e["種類"],a,e["上限"],t]):l.push([e["種類"],a,e["上限"],t])}return o.forEach((e=>{const n=fe(t,e[0],e[1],e[2]);if(e[3])for(const t of Object.keys(n))t in a?a[t]+=n[t]:a[t]=n[t]})),s.sort(ce),s.forEach((e=>{const n=fe(t,e[0],e[1],e[2]);if(e[3])for(const t of Object.keys(n))t in a?a[t]+=n[t]:a[t]=n[t]})),t["HP上限"]+=t["基礎HP"]+t["HP+"],t["HP上限"]+=t["基礎HP"]*t["HP%"]/100,t["攻撃力"]+=t["基礎攻撃力"]+t["攻撃力+"],t["攻撃力"]+=t["基礎攻撃力"]*t["攻撃力%"]/100,t["防御力"]+=t["基礎防御力"]+t["防御力+"],t["防御力"]+=t["基礎防御力"]*t["防御力%"]/100,l.sort(ce),l.forEach((e=>{const n=fe(t,e[0],e[1],e[2]);if(e[3])for(const t of Object.keys(n))t in a?a[t]+=n[t]:a[t]=n[t]})),a}function ce(e,n){const t=["HP%","HP","HP上限","防御力%","防御力","元素熟知","会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","攻撃力%","攻撃力"],r=["ダメージ軽減"];let a=t.indexOf(e[0]);r.indexOf(e[0])>=0&&(a=t.length+1);let c=t.indexOf(n[0]);return r.indexOf(n[0])>=0&&(c=t.length+1),(-1!=a?a:t.length)-(-1!=c?c:t.length)}const oe=function(e,n,t,r=null){try{let a=0;if(Array.isArray(e)){let c=null;for(const o of e){let s=0;if(["+","-","*","/"].includes(o))c=o;else{if((0,E.hj)(o))s=Number(o);else if(Array.isArray(o))s=oe(o,n,t);else if(o in n)s=Number(n[o]);else if(-1!=o.indexOf("#")){const a=o.split("#");if(t&&a[0]in t){const c=t[a[0]];let l=null;for(const e of c)if(a[1]==e[0]){l=e[4];break}null!=l?s=l:console.error(e,n,t,r,o)}}else console.error(e,n,t,r,o);if(null==c)a+=s;else switch(c){case"+":a+=s;break;case"-":a-=s;break;case"*":a*=s,a=Math.floor(100*a)/100;break;case"/":a/=s;break}}}}else(0,E.hj)(e)?a=Number(e):e in n?a=n[e]:console.error(n,e,r);if(null!=r){const e=oe(r,n,t);a>e&&(a=e)}return a}catch(a){throw console.error(e,n,t,r),a}};function se(e){try{const n=[];if(!e)return n;const t=e.checkboxList;t&&t.forEach((t=>{e.conditionValues[t.name]&&n.push(t.name)}));const r=e.selectList;return r&&r.forEach((t=>{const r=e.conditionValues[t.name];void 0!==r&&null!==r&&(r>0||0==r&&t.required)&&n.push(t.name+"@"+t.options[r])})),n}catch(n){throw console.error(e),n}}const le=function(e,n,t){const r=e.split("^")[0];if(-1!=r.indexOf("|")){const e=r.split("|");for(let r=0;r<e.length;r++){const a=ie(e[r],n,t);if(1==a)return 1}return 0}const a=r.split("&");let c=1;for(let o=0;o<a.length;o++){const e=ie(a[o],n,t);if(0==e)return 0;1!=e&&(c=e)}return c};function ie(e,n,t){const r=e.split(/[@=]/);if("命ノ星座"==r[0]){if(2==r.length&&(0,E.hj)(r[1])){const e=Number(r[1]);if(e<=t)return 1}return 0}if(n.includes(e)||n.includes(e.replace("=","@")))return 1;if(1==r.length)return n.filter((n=>n.split("@")[0]==e)).length>0?1:0;if(-1!=e.indexOf("="))return 0;const a=new RegExp("[^0-9]*?([\\-0-9\\.]+).*");for(let c=0;c<n.length;c++)if(n[c].startsWith(r[0]+"@")){const e=n[c].split("@"),t=a.exec(e[1]);if(t){const e=Number(t[1]);return e}}return 0}const ue=["炎","水","風","雷","草","氷","岩"];function fe(e,n,t,r=null){const a=oe(t,e,_.US,r);(0,E.hj)(a)||console.error(e,n,t,a);const c=[];"HP"==n?c.push("HP上限"):n.startsWith("自元素")?c.push(n.replace(/^自/,String(e["元素"]))):n.startsWith("全元素")?ue.forEach((e=>{c.push(n.replace(/^全/,e))})):n.startsWith("敵自元素")?c.push(n.replace(/^敵自/,"敵"+String(e["元素"]))):n.startsWith("敵全元素")?ue.forEach((e=>{c.push(n.replace(/^敵全/,"敵"+e))})):c.push(n);const o={};c.forEach((e=>{o[e]=a}));for(const s of Object.keys(o))s in e?s.startsWith("別枠乗算")&&o[s]>0?e[s]*=o[s]/100:e[s]+=o[s]:e[s]=o[s];return console.debug(fe.name,null,n,t,"=>",o),o}var me=(0,a.aZ)({name:"MemberItem",props:{member:{type:Object,required:!0},displayStat:{type:String}},emits:["click:character","change:buildname"],setup(e,n){const{displayName:t,displayStatValue:r}=(0,w.Z)(),c=(0,v.iH)(e.member.buildname),o=()=>{n.emit("change:buildname",e.member.id,c.value)},s=(0,E.X8)(_.Hd),l=(0,E.X8)(_.HN),i=(0,E.X8)(_.NY),u=(0,E.X8)(_.wX),f=(0,E.X8)(_.HO),m=(0,v.iH)("locate");(0,a.YP)(e,(e=>{c.value=e.member.buildname,h()}));const h=async()=>{if((0,E.fX)(s,_.Hd),(0,E.fX)(l,_.HN),(0,E.fX)(i,_.NY),(0,E.fX)(u,_.wX),(0,E.fX)(f,_.HO),!e.member.name)return s.characterMaster={},void(s.weaponMaster={});s.character=e.member.name,s.characterMaster=await(0,j.tm)(s.character);const n=A.value;if(n)return await(0,_.pS)(s,l,i,u,n),(0,_.ge)(s),(0,_.Cl)(s),(0,_.Vk)(s),(0,_.Hk)(i,s),ne(l.聖遺物ステータスメイン効果,l.聖遺物メイン効果),te(l),re(f,s,l,i,u),f.statsObj;s.weaponMaster={}},d=(0,a.Fl)((()=>e.member.name?j.bw[e.member.name]??void 0:void 0)),p=(0,a.Fl)((()=>d.value?.icon_url??j.bx)),b=(0,a.Fl)((()=>{const e=d.value?.レアリティ;return e?" "+j.dr[String(e)]:""})),g=(0,a.Fl)((()=>d.value?.元素?j.GN[d.value.元素]:j.bx)),y=(0,a.Fl)((()=>s.命ノ星座)),k=(0,a.Fl)((()=>P.value?P.value.icon_url:j.bx)),O=e=>x.value[e]?.image??j.bx,S=()=>{n.emit("click:character")},C=(0,a.Fl)((()=>{const n=e.member.name;let t=M(n).map((e=>N(e)));const r=(0,_.K1)(n);if(t.includes(r)){const e=t.filter((e=>e!=r)).sort();e.length&&(t=[r,...e])}return t})),A=(0,a.Fl)((()=>{let n;const t=e.member.name;return t&&c.value&&(n=H(t,c.value)),n})),P=(0,a.Fl)((()=>{let e;if(A.value){const n=A.value.武器;n&&d.value&&(e=j.Nd[d.value.武器][n])}return e})),x=(0,a.Fl)((()=>{const e=[];if(A.value)for(let n=0;n<2;n++){const t="聖遺物セット効果"+(n+1);let r=A.value[t]??"NONE";e.push(j.oN[r])}return e})),D=(0,a.Fl)((()=>{let n="0",t=e.displayStat;return t&&("会心率/ダメージ"===t?(n+=r("会心率",f.statsObj["会心率"]),n+="/",n+=r("会心ダメージ",f.statsObj["会心ダメージ"])):n+=r(t,f.statsObj[t])),n})),T=()=>{const n=e.member;(0,_.Ac)(n.name,c.value),window.open("./","_blank")};return{displayName:t,characterImgSrc:p,characterImgClass:b,visionImgSrc:g,constellation:y,imgWeaponSrc:k,imgArtifactSetSrc:O,statValue:D,extraControl:m,buildname:c,buildnameOnChange:o,buildnames:C,locate:T,characterOnClick:S}}}),he=t(89);const de=(0,he.Z)(me,[["render",z]]);var pe=de,be=(0,a.aZ)({name:"TeamItem",props:{team:{type:Object,required:!0},selected:{type:Boolean,requied:!0},displayStat:{type:String}},emits:["change:name","click:character","change:buildname"],components:{MemberItem:pe},setup(e,n){const{displayName:t}=(0,w.Z)(),r=(0,a.Fl)((()=>e.selected?" selected":"")),c=(0,v.iH)(!1),o=(0,v.iH)(e.team.name),s=()=>{n.emit("change:name",o)},l=(0,a.Fl)((()=>{const n=[],t={},r=e.team.members.filter((e=>e.name));return 4==r.length&&(r.forEach((e=>{const n=A(e);n&&(n.元素 in t?t[n.元素]++:t[n.元素]=1)})),4==Object.keys(t).length?n.push("元素共鳴なし"):Object.keys(t).forEach((e=>{t[e]>=2&&n.push(e+"元素共鳴")}))),n})),i=(0,a.Fl)((()=>{const n=[];return l.value.forEach((t=>{if("元素共鳴なし"==t){const t=e.team.members.filter((e=>e.name));t.forEach((e=>{const t=j.bw[e.name],r=j.GN[t.元素];n.push(r)}))}else{const e=j.GN[t.replace("元素共鳴","")];n.push(e),n.push(e)}})),n})),u=(0,a.Fl)((()=>{const e={};return l.value.forEach((n=>{switch(n){case"炎元素共鳴":e["攻撃力%"]=25;break;case"水元素共鳴":e["HP%"]=25;break;case"草元素共鳴":e["元素熟知"]=50;break;case"元素共鳴なし":ue.forEach((n=>{e[n+"元素耐性"]=15})),e["物理耐性"]=15;break}})),e})),f=()=>{n.emit("click:character")},m=(t,r)=>{n.emit("change:buildname",e.team.id,t,r)};return{displayName:t,selectedClass:r,editable:c,name:o,resonanceElementImgSrcs:i,elementalResonanceAdjustments:u,nameOnChange:s,characterOnClick:f,changeBuildname:m}}});const ge=(0,he.Z)(be,[["render",F]]);var ye=ge;const ke={class:"modal character-select"},Oe={class:"modal-content"};function ve(e,n,t,c,o,s){const l=(0,a.up)("CharacterSelect");return(0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.wy)((0,a._)("div",ke,[(0,a._)("div",Oe,[(0,a.Wm)(l,{visible:!0,characters:e.characters,"onUpdate:characters":e.updateCharacters},null,8,["characters","onUpdate:characters"]),(0,a._)("button",{type:"button",onClick:n[0]||(n[0]=(...n)=>e.cancelOnClick&&e.cancelOnClick(...n))},"cancel"),(0,a._)("button",{type:"button",onClick:n[1]||(n[1]=(...n)=>e.okOnClick&&e.okOnClick(...n))},"ok")])],512),[[r.F8,e.visible]])])}var we=t(1246),_e=(0,a.aZ)({name:"CharacterSelectModal",components:{CharacterSelect:we.Z},props:{visible:{type:Boolean,required:!0},memberNames:{type:Array,required:!0}},emits:["click:cancel","click:ok"],setup(e,n){const t=(0,v.qj)(e.memberNames);(0,a.YP)(e,(e=>{if(e.memberNames){const n=JSON.stringify(e.memberNames),r=JSON.stringify(t);n!=r&&t.splice(0,t.length,...e.memberNames)}}));const r=e=>{t.splice(0,t.length,...e)},c=()=>{n.emit("click:cancel")},o=()=>{n.emit("click:ok",t)};return{characters:t,updateCharacters:r,cancelOnClick:c,okOnClick:o}}});const Ee=(0,he.Z)(_e,[["render",ve],["__scopeId","data-v-196a00fd"]]);var je=Ee;let Se=1;var Ce=(0,a.aZ)({name:"TeamManager",components:{draggable:O(),TeamItem:ye,CharacterSelectModal:je},setup(){const{displayName:e}=(0,w.Z)(),n=(0,v.iH)(!1),t=(0,v.iH)(S),r=[["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],c=(0,v.iH)("元素チャージ効率"),o=(0,v.iH)(0),s=e=>e==o.value;function l(e){return{id:e,name:"",buildname:void 0,savedata:void 0}}function i(e){const n={id:e,name:"チーム"+(e+1),members:[]};for(let t=0;t<C;t++)n.members.push(l(Se++));return n}function u(e){e.name="",e.buildname=void 0,e.savedata=void 0}function f(e){e.name="",e.members.forEach((e=>{u(e)}))}const m=(0,v.qj)([]);for(let a=0;a<t.value;a++)m.push(i(a));const h=e=>{o.value=e},d=e=>{o.value==e&&(n.value=!0),o.value=e},p=()=>{m.forEach((e=>{f(e)}))},b=()=>{const e=(0,E.X8)(m);e.forEach((e=>{e.members.forEach((e=>{e.savedata=void 0}))})),localStorage.setItem("teams",JSON.stringify(e))},g=()=>{const e=localStorage.getItem("teams");if(e){const n=JSON.parse(e);for(let e=0;e<m.length;e++){const t=m[e];if(n[e]){t.name=n[e].name;const r=t.members;for(let t=0;t<r.length;t++)n[e].members[t]&&(r[t].name=n[e].members[t].name,r[t].buildname=n[e].members[t].buildname,r[t].savedata=void 0)}}}};g();const y=()=>{if(t.value>m.length)for(let e=m.length;e<t.value;e++)m.push(i(e));else t.value<m.length&&(o.value>t.value&&(o.value=0),m.splice(t.value))},k=(0,a.Fl)((()=>{let e=Array(C).fill("");const n=m.filter((e=>e.id==o.value))[0];return n&&(e=n.members.map((e=>e.name))),e})),O=e=>{if(-1!=o.value){const n=m.filter((e=>e.id==o.value))[0];if(n){const t=n.members;for(let n=0;n<e.length;n++)t[n].name!=e[n]&&(t[n].name=e[n],t[n].buildname=(0,_.K1)(t[n].name),t[n].savedata=void 0)}}n.value=!1},j=e=>{s(e.id)?n.value=!0:o.value=e.id},A=(e,n)=>{const t=m.filter((n=>n.id==e))[0];t&&(t.name=n)},N=(e,n,t)=>{const r=m.filter((n=>n.id==e))[0];if(r){const e=r.members.filter((e=>e.id==n))[0];e&&(e.buildname=t)}};return{displayName:e,characterSelectVisible:n,NUMBER_OF_TEAMS:S,NUMBER_OF_MEMBERS:C,numberOfTeams:t,numberOfTeamsOnChange:y,DISPLAY_STAT_LIST:r,displayStat:c,clear:p,save:b,load:g,teamSelected:s,teams:m,memberNames:k,teamOnClick:h,characterOnClick:j,memberOnClick:d,updateCharacters:O,teamNameOnChange:A,buildnameOnChange:N}}});const Ae=(0,he.Z)(Ce,[["render",y],["__scopeId","data-v-5ca21e80"]]);var Ne=Ae,Me=t(2540);async function He(){(0,r.ri)(Ne,{}).use(Me.Z).mount("#app")}He()}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var c=n[r]={exports:{}};return e[r].call(c.exports,c,c.exports,t),c.exports}t.m=e,function(){var e=[];t.O=function(n,r,a,c){if(!r){var o=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],c=e[u][2];for(var s=!0,l=0;l<r.length;l++)(!1&c||o>=c)&&Object.keys(t.O).every((function(e){return t.O[e](r[l])}))?r.splice(l--,1):(s=!1,c<o&&(o=c));if(s){e.splice(u--,1);var i=a();void 0!==i&&(n=i)}}return n}c=c||0;for(var u=e.length;u>0&&e[u-1][2]>c;u--)e[u]=e[u-1];e[u]=[r,a,c]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.j=299}(),function(){var e={299:0};t.O.j=function(n){return 0===e[n]};var n=function(n,r){var a,c,o=r[0],s=r[1],l=r[2],i=0;if(o.some((function(n){return 0!==e[n]}))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(l)var u=l(t)}for(n&&n(r);i<o.length;i++)c=o[i],t.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return t.O(u)},r=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998,64],(function(){return t(448)}));r=t.O(r)})();
//# sourceMappingURL=TeamManager.a8f5157a.js.map