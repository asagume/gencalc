(function(){"use strict";var e={5983:function(e,t,n){function a(e){return"string"===typeof e||e instanceof String}function r(e){return isFinite(e)&&null!=e}function c(e){const t=Object.prototype.toString.call(e);return"[object Object]"===t}function s(e){const t=JSON.parse(JSON.stringify(e));return t}function l(e,t){if(c(t)&&c(e)){const n=Object.keys(t);for(const a of n)e[a]=t[a];for(const t of Object.keys(e))n.includes(t)||delete e[t]}return e}n.d(t,{HD:function(){return a},PO:function(){return c},X8:function(){return s},fX:function(){return l},hj:function(){return r}})},2986:function(e,t,n){n.d(t,{Ac:function(){return $},Cl:function(){return V},HN:function(){return _},HO:function(){return A},Hd:function(){return C},Hk:function(){return Y},K1:function(){return H},NY:function(){return j},R4:function(){return P},US:function(){return w},V6:function(){return b},Vd:function(){return c},Vk:function(){return F},e2:function(){return T},ge:function(){return I},iU:function(){return E},pS:function(){return x},q2:function(){return y},wX:function(){return M},yL:function(){return W}});n(7658);var a=n(3550),r=n(5983);const c=["基礎HP","基礎攻撃力","基礎防御力"],s=["HP上限","攻撃力","防御力","元素熟知"],l=["会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","クールタイム短縮","シールド強化"],i=["炎元素ダメージバフ","水元素ダメージバフ","風元素ダメージバフ","雷元素ダメージバフ","草元素ダメージバフ","氷元素ダメージバフ","岩元素ダメージバフ","物理ダメージバフ"],o=["炎元素耐性","水元素耐性","風元素耐性","雷元素耐性","草元素耐性","氷元素耐性","岩元素耐性","物理耐性"],u=["通常攻撃ダメージバフ","重撃ダメージバフ","落下攻撃ダメージバフ","元素スキルダメージバフ","元素爆発ダメージバフ","与えるダメージ"],f=["通常攻撃ダメージアップ","重撃ダメージアップ","落下攻撃ダメージアップ","元素スキルダメージアップ","元素爆発ダメージアップ","炎元素ダメージアップ","水元素ダメージアップ","風元素ダメージアップ","雷元素ダメージアップ","草元素ダメージアップ","氷元素ダメージアップ","岩元素ダメージアップ","物理ダメージアップ"],m=["蒸発反応ボーナス","溶解反応ボーナス","過負荷反応ボーナス","感電反応ボーナス","凍結反応ボーナス","超電導反応ボーナス","拡散反応ボーナス","結晶反応ボーナス","燃焼反応ボーナス","開花反応ボーナス","烈開花反応ボーナス","超開花反応ボーナス","超激化反応ボーナス","草激化反応ボーナス"],h=["ダメージ軽減","HP%","攻撃力%","防御力%","HP+","攻撃力+","防御力+"],d=["敵炎元素耐性","敵水元素耐性","敵風元素耐性","敵雷元素耐性","敵草元素耐性","敵氷元素耐性","敵岩元素耐性","敵物理耐性"],p=new Map([["基礎ステータス",c],["基本ステータス",s],["高級ステータス",l],["元素ステータス·ダメージ",i],["元素ステータス·耐性",o],["ダメージバフ",u],["実数ダメージ加算",f],["元素反応バフ",m],["その他",h],["敵元素ステータス·耐性",d]]),b=[...l,...i,...o,...u,...m,...d,"別枠乗算"];function g(){const e={};return p.forEach((t=>{t.forEach((t=>{e[t]=0}))})),e["会心率"]=5,e["会心ダメージ"]=50,e["元素チャージ効率"]=100,e["敵レベル"]=0,e["敵防御力"]=0,e}const y=g();function k(){const e={};return[o].forEach((t=>{t.forEach((t=>{e[t]=0}))})),e["防御力"]=0,e}k();const v={HP:0,"攻撃力":0,"防御力":0,"元素熟知":0,"会心率":0,"会心ダメージ":0,"元素チャージ効率":0,"HP%":0,"攻撃力%":0,"防御力%":0,"炎元素ダメージバフ":0,"水元素ダメージバフ":0,"風元素ダメージバフ":0,"雷元素ダメージバフ":0,"草元素ダメージバフ":0,"氷元素ダメージバフ":0,"岩元素ダメージバフ":0,"物理ダメージバフ":0,"与える治療効果":0},O={"元素":"炎","蒸発倍率":0,"溶解倍率":0,"過負荷ダメージ":0,"感電ダメージ":0,"超電導ダメージ":0,"拡散ダメージ":0,"拡散元素":"炎","結晶吸収量":0,"燃焼ダメージ":0,"開花ダメージ":0,"烈開花ダメージ":0,"超開花ダメージ":0,"超激化ダメージ":0,"草激化ダメージ":0},w={"元素反応":(0,r.X8)(O),"通常攻撃":[],"重撃":[],"落下攻撃":[],"元素スキル":[],"元素爆発":[],"その他":[],"キャラクター注釈":[]},E=[Array.from({length:20},((e,t)=>t+1)),Array.from({length:21},((e,t)=>t+20)),Array.from({length:11},((e,t)=>t+40)),Array.from({length:11},((e,t)=>t+50)),Array.from({length:11},((e,t)=>t+60)),Array.from({length:11},((e,t)=>t+70)),Array.from({length:11},((e,t)=>t+80))],S={key:"NONE","レアリティ":5,image:a.bx},C={character:"アンバー",characterMaster:{},"突破レベル":6,"レベル":90,"命ノ星座":0,"通常攻撃レベル":8,"元素スキルレベル":8,"元素爆発レベル":8,weapon:"西風猟弓",weaponMaster:{},"武器突破レベル":6,"武器レベル":90,"武器精錬ランク":1,artifactSets:["NONE","NONE"],artifactSetMasters:[S,S],damageDetailMyCharacter:null,damageDetailMyWeapon:null,damageDetailMyArtifactSets:null,buildname:"",recommendationSelectedIndex:0,saveDisabled:!0,removeDisabled:!0},_={"聖遺物メイン効果":["","","","",""],"聖遺物優先するサブ効果":["","",""],"聖遺物優先するサブ効果上昇値":Array.from(a.Ml[2].values),"聖遺物優先するサブ効果上昇回数":Array.from(a.Ml[2].counts),"聖遺物ステータス":(0,r.X8)(v),"聖遺物ステータスメイン効果":(0,r.X8)(v),"聖遺物ステータスサブ効果":(0,r.X8)(v),"聖遺物優先するサブ効果Disabled":!1},j={checkboxList:[],selectList:[],conditionValues:{},conditionAdjustments:{},"攻撃元素":[null,null,null]},A={statsObj:(0,r.X8)(y),statAdjustments:(0,r.X8)(y),enemyMaster:a.FX[0]};for(const Q of Object.keys(A.statAdjustments))A.statAdjustments[Q]=0;const M={elementalResonance:{conditionValues:{},conditionAdjustments:{}},supporterList:[],isSupporterOptionOpened:{},teamOption:(0,r.X8)(j),miscOption:(0,r.X8)(j)};(0,r.X8)(C),(0,r.X8)(_),(0,r.X8)(j),(0,r.X8)(A);function N(e){try{let t;t=(0,r.HD)(e)?Number(String(e).replace("+","")):Number(e);let n=0;for(let a=E.length-1;a>=0;a--)if(n=a,!(E[a][0]>t)){E[a][0]!=t||String(e).endsWith("+")||n--;break}return[n,t]}catch(t){throw console.error(e),t}}function H(e){return"あなたの"+e}function P(e,t){let n="構成_"+e;return t&&t!=H(e)&&(n+="_"+t),n}function D(e,t,n){const r=[];if(e[t]&&(n||(n=e[t]),n&&n in a._J)){const e=a._J[n];for(let t=0;t<e.length;t++)if(r.push(e[t]),t<e.length-1){const n=e[t+1]-e[t];r.push(e[t]+n/2)}}return r}async function x(e,t,n,c,s){try{const l=e.character,i=await(0,a.tm)(l);e.characterMaster=i;const o=(0,r.X8)(v);"レベル"in s&&([e.突破レベル,e.レベル]=N(s["レベル"])),["命ノ星座","通常攻撃レベル","元素スキルレベル","元素爆発レベル"].forEach((t=>{t in s&&(e[t]=Number(s[t]))}));const u=i["武器"];"武器"in s&&(Object.keys(a.Nd[u]).includes(s["武器"])?e.weapon=s["武器"]:e.weapon=Object.keys(a.Nd[u]).filter((e=>e.startsWith("西風")))[0],e.weaponMaster=await(0,a.i7)(e.weapon,u)),"武器レベル"in s&&([e.武器突破レベル,e.武器レベル]=N(s["武器レベル"])),"精錬ランク"in s&&(e.武器精錬ランク=Number(s["精錬ランク"]));let f=!1;for(const e of Object.keys(s).filter((e=>e.startsWith("聖遺物サブ効果")))){let t=e.replace(/^聖遺物サブ効果/,"");"HP"!=t&&(t=t.replace(/P$/,"%")),(s[e]||0==s[e])&&(f=!0,o[t]=Number(s[e]))}if(t.聖遺物優先するサブ効果Disabled=f,["聖遺物セット効果1","聖遺物セット効果2"].forEach(((t,n)=>{if(!(t in s))return;const r=s[t];r&&r in a.oN?(e.artifactSets[n]=r,e.artifactSetMasters[n]=a.oN[r]):e.artifactSetMasters[n]=S})),["聖遺物メイン効果1","聖遺物メイン効果2"].forEach(((e,n)=>{t["聖遺物メイン効果"][n]=e in s?s[e]:["5_HP","5_攻撃力"][n]})),["聖遺物メイン効果3","聖遺物メイン効果4","聖遺物メイン効果5"].forEach(((e,n)=>{if(!(e in s))return;const a=s[e];t["聖遺物メイン効果"][n+2]=a})),f||(["聖遺物優先するサブ効果1","聖遺物優先するサブ効果2","聖遺物優先するサブ効果3"].forEach(((e,n)=>{if(!(e in s))return;const a=s[e];t["聖遺物優先するサブ効果"][n]=a})),["聖遺物優先するサブ効果1上昇値","聖遺物優先するサブ効果2上昇値","聖遺物優先するサブ効果3上昇値"].forEach(((e,n)=>{let c=!1;if(t["聖遺物優先するサブ効果"][n]&&e in s&&(0,r.hj)(s[e])&&(c=!0),c){const a=Number(s[e]),r=t["聖遺物優先するサブ効果"][n],c=D([r],0);c.forEach(((e,r)=>{a<=e&&(t["聖遺物優先するサブ効果上昇値"][n]=r)}))}else t["聖遺物優先するサブ効果"][n]&&!t["聖遺物優先するサブ効果上昇値"][n]&&(t["聖遺物優先するサブ効果上昇値"][n]=a.Ml[2].values[n])})),["聖遺物優先するサブ効果1上昇回数","聖遺物優先するサブ効果2上昇回数","聖遺物優先するサブ効果3上昇回数"].forEach(((e,n)=>{let c=!1;if(t["聖遺物優先するサブ効果"][n]&&e in s&&(0,r.hj)(s[e])&&(c=!0),c){const a=Number(s[e]);t["聖遺物優先するサブ効果上昇回数"][n]=a}else t["聖遺物優先するサブ効果"][n]&&!t["聖遺物優先するサブ効果上昇回数"][n]&&(t["聖遺物優先するサブ効果上昇回数"][n]=a.Ml[2].counts[n])}))),Object.keys(s).filter((e=>!a.PW.has(e)&&!["options","artifactScoring"].includes(e))).forEach((e=>{null==s[e]?n.conditionValues[e]=s[e]:(0,r.HD)(s[e])?n.conditionValues[e]=Number(s[e]):n.conditionValues[e]=s[e]})),"options"in s){const e=Object.keys(s.options);e.length&&((0,r.fX)(c.elementalResonance.conditionValues,{}),(0,r.fX)(c.teamOption.conditionValues,{}),(0,r.fX)(c.miscOption.conditionValues,{}),e.forEach((e=>{if(e in a._9||"dendroOption"==e)c.elementalResonance.conditionValues[e]=s.options[e];else{const t=e.indexOf("*");if(-1!=t){const n=e.substring(0,t);n in a.bw?c.teamOption.conditionValues[e]=s.options[e]:c.miscOption.conditionValues[e]=s.options[e]}else c.miscOption.conditionValues[e]=s.options[e]}})))}(0,r.fX)(t.聖遺物ステータスサブ効果,o),console.debug("loadRecommendation",e,t,n,s)}catch(l){throw console.error(e,t,n,s),l}}const T="ステータス変更系詳細",W="天賦性能変更系詳細";function I(e){try{const t=e.characterMaster,n={};let a,r,c,s;const l="キャラクター",i=[],o=[];r=e["通常攻撃レベル"],s="法器"===t["武器"]?t["元素"]:null,["通常攻撃","重撃","落下攻撃"].forEach((e=>{a=t[e],c=e+"ダメージ",n[e]=q(a,r,c,s,i,o,l)})),["通常攻撃","重撃","落下攻撃"].forEach((u=>{const f="特殊"+u;if(f in t){if(a=t[f],"種類"in a)switch(c=a["種類"],c){case"元素スキルダメージ":r=e["元素スキルレベル"];break;case"元素爆発ダメージ":r=e["元素爆発レベル"];break}"元素"in a&&(s=a["元素"]);const u={"条件":a["条件"],"詳細":q(a,r,c,s,i,o,l)};n[f]=u}})),r=e["元素スキルレベル"],c="元素スキルダメージ",s=t["元素"],n["元素スキル"]=q(t["元素スキル"],r,c,s,i,o,l),r=e["元素爆発レベル"],c="元素爆発ダメージ",s=t["元素"],n["元素爆発"]=q(t["元素爆発"],r,c,s,i,o,l),n["その他"]=[],"その他戦闘天賦"in t&&t["その他戦闘天賦"].forEach((e=>{const t=q(e,null,null,null,i,o,l);t.length>0&&n["その他"].push(...t)})),t["固有天賦"].forEach((e=>{const t=q(e,null,null,null,i,o,l);t.length>0&&n["その他"].push(...t)})),"命ノ星座"in t&&Object.keys(t["命ノ星座"]).forEach((r=>{if(Number(r)>e.命ノ星座)return;a=t["命ノ星座"][r];const c=q(a,null,null,null,i,o,l);c.length>0&&n["その他"].push(...c)})),"風"==t["元素"]&&(0==o.filter((e=>e.条件&&e.条件.startsWith("拡散@"))).length&&["炎元素","水元素","雷元素","氷元素"].forEach((e=>{o.push({"名前":null,"種類":"固有変数","元素":null,"数値":null,"条件":"拡散@"+e,"対象":null,"上限":null,"HIT数":null,"ダメージバフ":null,"元素付与無効":null,"除外条件":null,"適用条件":null})})),"オプション初期値"in t?0==Object.keys(t["オプション初期値"]).filter((e=>"拡散"==e)).length&&(t["オプション初期値"]["拡散"]=1):t["オプション初期値"]={"拡散":1}),n[T]=i,n[W]=o;const u=new Map,f=new Map;return i.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],u,f)})),o.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],u,f)})),u.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(t,["",...e]))})),n["条件"]=u,n["排他"]=f,e.damageDetailMyCharacter=n,n}catch(t){throw console.error(e),t}}function V(e){try{const t=e.weapon,n=e.weaponMaster,a={};if(!t||!n)return a;let c;const s=e.武器精錬ランク,l="武器",i=[],o=[];"武器スキル"in n&&(c=n["武器スキル"],a["その他"]=q(c,s,null,null,i,o,l)),a[T]=i,a[W]=o;const u=new Map,f=new Map;return i.filter((e=>e["条件"])).forEach((e=>{let t=e["条件"];(0,r.PO)(t)&&s in t&&(t=t[s]),L(t,u,f)})),o.filter((e=>e["条件"])).forEach((e=>{let t=e["条件"];(0,r.PO)(t)&&s in t&&(t=t[s]),L(t,u,f)})),u.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(t,["",...e]))})),a["条件"]=u,a["排他"]=f,e.damageDetailMyWeapon=a,a}catch(t){throw console.error(e),t}}function F(e){try{const t=[];let n;const a="聖遺物セット効果",r=[],c=[],s=e.artifactSetMasters.filter((e=>e));if(s.length>0){const e=[];"2セット効果"in s[0]&&(n=s[0]["2セット効果"],e.push(...q(n,null,null,null,r,c,a))),2==s.length&&(s[0]==s[1]?(n=s[0]["4セット効果"],e.push(...q(n,null,null,null,r,c,a))):(n=s[1]["2セット効果"],e.push(...q(n,null,null,null,r,c,a)))),t["その他"]=e}t[T]=r,t[W]=c;const l=new Map,i=new Map;return r.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],l,i)})),c.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],l,i)})),l.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||l.set(t,["",...e]))})),t["条件"]=l,t["排他"]=i,e.damageDetailMyArtifactSets=t,t}catch(t){throw console.error(e),t}}const X=function(e,t,n,c,s,l){let i="種類"in e?e["種類"]:n,o=null;-1!=i.indexOf(".")?(o=i.substring(i.indexOf(".")+1),i=i.substring(0,i.indexOf("."))):"対象"in e&&(o=e["対象"]);let u=null;"数値"in e&&(u=e["数値"],(0,r.hj)(u)||(0,r.HD)(u)||((0,r.PO)(u)&&t&&t in u?u=u[t]:console.error(e,t,n,c,u)),u=a.vN.includes(i+"ダメージ")||i.endsWith("ダメージ")?z(u,"攻撃力"):z(u,i));let f=null;f="条件"in e?(0,r.PO)(e["条件"])&&t&&t in e["条件"]?e["条件"][t]:e["条件"]:l??null;let m=null;"上限"in e&&(m=e["上限"],(0,r.PO)(m)&&t&&t in m&&(m=m[t]),m=z(m));const h={"名前":e["名前"],"種類":i,"元素":"元素"in e?e["元素"]:c,"数値":u,"条件":f,"対象":o,"上限":m,"HIT数":"HIT数"in e?e["HIT数"]:null,"ダメージバフ":"ダメージバフ"in e?e["ダメージバフ"]:null,"元素付与無効":"元素付与無効"in e?e["元素付与無効"]:"武器"==s,"除外条件":"除外条件"in e?e["除外条件"]:null,"適用条件":"適用条件"in e?e["適用条件"]:null};return h};function R(e){return e in y||new RegExp("[自全].+(バフ|アップ)").exec(e)||new RegExp("敵?[自全]元素耐性").exec(e)||["別枠乗算","回復量アップ"].includes(e)||["敵防御力"].includes(e)||["発動回数","使用回数"].includes(e)||["攻撃速度","通常攻撃速度","移動速度"].includes(e)||e.endsWith("継続時間")||e.endsWith("クールタイム")||e.endsWith("会心率")||e.endsWith("会心ダメージ")?"STATUS":e.endsWith("強化")||e.endsWith("付与")||"防御無視"==e||"固有変数"==e?"TALENT":void 0}const q=function(e,t,n,a,r,c,s,l){const i=[];return"詳細"in e?(e["詳細"].forEach((e=>{const o=X(e,t,n,a,s,l),u=o.種類;return null!=r&&"STATUS"==R(u)?(o["元素"]="元素"in e?e["元素"]:null,void r.push(o)):null!=c&&"TALENT"==R(u)?(o["元素"]="元素"in e?e["元素"]:null,void c.push(o)):void i.push(o)})),i):i},L=function(e,t,n){let a=null,r=e.split("^");r.length>1&&(a=r[1]);const c=r[0];-1!=c.indexOf("|")?(r=c.split("|"),r.forEach((e=>{U(e,t,n,a)}))):(r=c.split("&"),r.forEach((e=>{U(e,t,n,a)})))};function U(e,t,n,a){const r=e.split(/[@=]/),c=r[0];if(1==r.length)B(t,c,null);else if(2==r.length)if(-1!=r[1].indexOf(",")){const e=new RegExp("([^0-9]*?)([\\+\\-0-9\\.,]+)(.*)"),n=e.exec(r[1]);if(n){const e=n[1],a=n[2].split(","),r=n[3];a.forEach((n=>{B(t,c,e+n+r)}))}}else if(-1!=r[1].indexOf("-")){const e=new RegExp("([^0-9\\.]*)(-?[0-9\\.]+)-(-?[0-9\\.]+)(.*)"),n=new RegExp("/([0-9\\.]+)(.*)"),a=e.exec(r[1]);if(a){const e=a[1],r=Number(a[2]),s=Number(a[3]);let l=r,i=a[4];if(i){const e=n.exec(i);e&&(l=Number(e[1]),i=e[2])}for(let n=r;n<s;n=G(n,l,s))B(t,c,e+String(n)+i);B(t,c,e+String(s)+i)}else B(t,c,r[1])}else B(t,c,r[1]);else console.error(e,t,n);a&&a.split(",").forEach((e=>{B(n,c,e)}))}function Y(e,t){try{const n=e.conditionValues,a=e.checkboxList,r=e.selectList;a.splice(0,a.length),r.splice(0,r.length);const c=[t.characterMaster,t.weaponMaster,...t.artifactSetMasters];for(const e of c.filter((e=>e))){if("オプション初期値"in e)for(const t of Object.keys(e["オプション初期値"]))t in n||(n[t]=e["オプション初期値"][t]);if("4セット効果"in e&&"オプション初期値"in e["4セット効果"])for(const t of Object.keys(e["4セット効果"]["オプション初期値"]))t in n||(n[t]=e["4セット効果"]["オプション初期値"][t])}for(const e of[t.damageDetailMyCharacter,t.damageDetailMyWeapon,t.damageDetailMyArtifactSets])if(e){const t=e.条件,c=e.排他;t.forEach(((e,s)=>{if(null==e)0==a.filter((e=>e.name==s)).length&&a.push({name:s});else if(0==r.filter((e=>e.name==s)).length){const t=e[0].startsWith("required_");r.push({name:s,options:e,required:t})}if(s in n&&null!=n[s]){const e=c.get(s);if(e)for(const a of e)if(a in n){const e=t.get(a);void 0!==e&&(n[a]=null!==e&&0)}}else if(null===e){let e=!0;const t=c.get(s);t&&t.filter((e=>n[e])).length>0&&(e=!1),n[s]=e}else{let t=e.length-1;const a=c.get(s);a&&a.filter((e=>n[e])).length>0&&(t=0),n[s]=t}}))}}catch(n){throw console.error(e,t),n}}function B(e,t,n){if(null==n)e.has(t)||e.set(t,null);else if(e.has(t)){const a=e.get(t);null==a?e.set(t,[n]):a.includes(n)||e.get(t).push(n)}else e.set(t,[n])}function K(e){const t=(""+e).split(".");return t.length>1?t[1].length:0}function Z(e,t){const n=K(e)+K(t),a=Number((""+e).replace(".","")),r=Number((""+t).replace(".","")),c=a*r/Math.pow(10,n);return Number(c)}function G(e,t,n){const a=Math.pow(10,Math.max(K(e),K(t)));let r=(Z(e,a)+Z(t,a))/a;return void 0!=n&&(r=Math.min(r,n)),r}const z=function(e,t=null){const n=[],a=new RegExp("([\\+\\-\\*/]?)([^\\+\\-\\*/]+)(.*)");let r=String(e);while(1){const e=a.exec(r);if(!e){n.push(r);break}if(e[1]&&n.push(e[1]),n.push(J(e[2],t)),!e[3])break;r=e[3]}return n};function J(e,t=null){const n=[];if((0,r.hj)(e))n.push(Number(e));else{const a=e.split("%");1==a.length?n.push(a[0]):(n.push(Number(a[0])/100),n.push("*"),a[1].length>0?n.push(a[1]):null!=t&&n.push(t))}return n}function $(e,t,n){sessionStorage.setItem("character",e),t&&sessionStorage.setItem("buildname",t),n&&sessionStorage.setItem("builddata",JSON.stringify(n))}},3550:function(e,t,n){n.d(t,{$Y:function(){return u},FX:function(){return E},GN:function(){return A},Ml:function(){return T},Nd:function(){return O},PW:function(){return H},_9:function(){return h},_J:function(){return f},bw:function(){return a},bx:function(){return y},dr:function(){return N},i7:function(){return j},k9:function(){return M},oN:function(){return o},qy:function(){return v},tm:function(){return C},vN:function(){return P}});n(7658);var a=n(8667),r=n(7722),c=n(1930),s=n(7849),l=n(2364),i=n(1003),o=n(5678),u=n(2124),f=n(3185),m=n(8970),h=n(6385),d=n(5093),p=n(9286),b=n(8846),g=n(7646);const y="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7";function k(e){if(e.icon_url)return e.icon_url;if(e.image)return e.image;if(e.import){let t=e.import.replace("data/","images/");return-1!=t.indexOf("characters/")&&(t=t.replace("characters/","characters/face/")),t=t.replace(/json$/,"png"),t}return null}const v=[];Object.keys(a).forEach((e=>{const t=a[e];t.key=e,t.icon_url=k(t),v.push(t)}));const O={"片手剣":r,"両手剣":c,"長柄武器":s,"弓":l,"法器":i};Object.keys(O).forEach((e=>{const t=O[e];Object.keys(t).forEach((e=>{const n=t[e];n.key=e,n.icon_url=k(n)}))}));Object.keys(r).map((e=>r[e])),Object.keys(c).map((e=>c[e])),Object.keys(s).map((e=>s[e])),Object.keys(l).map((e=>l[e])),Object.keys(i).map((e=>i[e]));const w=[];Object.keys(o).forEach((e=>{const t=o[e];t.key=e,t.icon_url=k(t),w.push(t)}));Object.keys(u[5]),Object.keys(f);for(const W of Object.keys(m))for(const e of Object.keys(m[W]))m[W][e]>=1e3&&(m[W][e]=1/0);const E=Object.keys(m).map((e=>({key:e,...m[e]}))),S=(Object.keys(h).map((e=>({key:e,...h[e]}))),Object.keys(d).map((e=>({key:e,...d[e]}))),Object.keys(p).map((e=>({key:e,...p[e]}))),Object.keys(b).map((e=>({key:e,...b[e]}))),Object.keys(g).map((e=>({key:e,...g[e]}))),new Map);async function C(e){try{if(!S.has(e)){const t=a[e]["import"].replace(/^\//,""),n=await fetch(t).then((e=>e.json())),r=a[e].武器;n.通常攻撃.icon_url=M[r],S.set(e,n)}return S.get(e)}catch(t){throw console.error(e),t}}const _=new Map;async function j(e,t){try{if(!_.has(e)){let n;n=t?[t]:Object.keys(O);for(const t of n)if(e in O[t]){const n=O[t],a=n[e]["import"],r=await fetch(a).then((e=>e.json()));r.種類=t,_.set(e,r);break}}return _.get(e)}catch(n){throw console.error(e,t),n}}const A={"炎":"images/element_pyro.png","水":"images/element_hydro.png","風":"images/element_anemo.png","雷":"images/element_electro.png","草":"images/element_dendro.png","氷":"images/element_cryo.png","岩":"images/element_geo.png"},M={"片手剣":"images/characters/NormalAttack_sword.png","両手剣":"images/characters/NormalAttack_claymore.png","長柄武器":"images/characters/NormalAttack_polearm.png","弓":"images/characters/NormalAttack_bow.png","法器":"images/characters/NormalAttack_catalyst.png"},N={1:"star1-bg",2:"star2-bg",3:"star3-bg",4:"star4-bg",5:"star5-bg"},H=new Map([["キャラクター",null],["レベル",null],["命ノ星座",0],["通常攻撃レベル",0],["元素スキルレベル",0],["元素爆発レベル",0],["武器",null],["武器レベル",0],["精錬ランク",0],["聖遺物セット効果1",null],["聖遺物セット効果2",null],["聖遺物メイン効果1",null],["聖遺物メイン効果2",null],["聖遺物メイン効果3",null],["聖遺物メイン効果4",null],["聖遺物メイン効果5",null],["聖遺物サブ効果HP",0],["聖遺物サブ効果攻撃力",0],["聖遺物サブ効果防御力",0],["聖遺物サブ効果元素熟知",0],["聖遺物サブ効果会心率",0],["聖遺物サブ効果会心ダメージ",0],["聖遺物サブ効果元素チャージ効率",0],["聖遺物サブ効果HPP",0],["聖遺物サブ効果攻撃力P",0],["聖遺物サブ効果防御力P",0],["聖遺物優先するサブ効果1",null],["聖遺物優先するサブ効果1上昇値",-1],["聖遺物優先するサブ効果1上昇回数",-1],["聖遺物優先するサブ効果2",null],["聖遺物優先するサブ効果2上昇値",-1],["聖遺物優先するサブ効果2上昇回数",-1],["聖遺物優先するサブ効果3",null],["聖遺物優先するサブ効果3上昇値",-1],["聖遺物優先するサブ効果3上昇回数",-1]]),P=["通常攻撃ダメージ","重撃ダメージ","落下攻撃ダメージ","元素スキルダメージ","元素爆発ダメージ"],D=(new Map([["HP%","HP"],["元素熟知","熟"],["元素チャージ効率","ﾁｬ"],["会心率","率"],["会心ダメージ","ダ"],["与える治療効果","治"]]),new Map([["HP%","HP"],["攻撃力%","AT"],["防御力%","DF"],["元素熟知","EM"],["会心率","CR"],["会心ダメージ","CD"],["元素チャージ効率","ER"],["与える治療効果","HE"],["炎元素ダメージバフ","Py"],["水元素ダメージバフ","Hy"],["風元素ダメージバフ","An"],["雷元素ダメージバフ","El"],["草元素ダメージバフ","De"],["氷元素ダメージバフ","Cr"],["岩元素ダメージバフ","Ge"],["物理ダメージバフ","Ph"]]),new Map([["HP","HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","ElementalMastery"],["会心率","CritRate"],["会心ダメージ","CritDMG"],["元素チャージ効率","EnergyRecharge"],["炎元素ダメージバフ","Pyro"],["水元素ダメージバフ","Hydro"],["風元素ダメージバフ","Anemo"],["雷元素ダメージバフ","Electro"],["草元素ダメージバフ","Dendro"],["氷元素ダメージバフ","Cryo"],["岩元素ダメージバフ","Geo"],["物理ダメージバフ","Physical"],["与える治療効果","Healing"],["HP%","HPp"],["攻撃力%","ATKp"],["防御力%","DEFp"]])),x=new Map;D.forEach(((e,t)=>{x.set(e,t)}));const T=[{key:"",values:[7,7,7],counts:[0,0,0]},{key:"厳選初心者",values:[3,3,3],counts:[7,4,4]},{key:"厳選1ヶ月",values:[3,3,3],counts:[8,5,5]},{key:"厳選3ヶ月",values:[3,3,3],counts:[11,8,7]},{key:"日々石割り",values:[1,1,1],counts:[14,11,10]}]},4980:function(e,t,n){var a=n(9242),r=n(3396),c=n(7139);const s={class:"base-container"},l={class:"pane1"},i={class:"display-stat-select"},o=["value"],u={class:"number-of-teams"},f=["min"],m={class:"data-control"},h=["disabled"],d={class:"pane2"},p=(0,r.uE)('<div class="pane3" data-v-450c19c9></div><div class="pane4" data-v-450c19c9></div><div class="footer" data-v-450c19c9><hr data-v-450c19c9><h2 data-v-450c19c9>チーム編成 Ver.0.1.0</h2><ul class="usage" data-v-450c19c9><li data-v-450c19c9>右上の◆のドラッグ＆ドロップでチームの並べ替えができます。</li></ul><p data-v-450c19c9><a href="./" data-v-450c19c9>げんかるく - 原神ダメージシミュレーター</a></p></div>',3);function b(e,t,n,b,g,y){const k=(0,r.up)("TeamItem"),v=(0,r.up)("draggable"),O=(0,r.up)("CharacterSelectModal");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",l,[(0,r._)("fieldset",null,[(0,r._)("div",i,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.DISPLAY_STAT_LIST,(n=>((0,r.wg)(),(0,r.iD)("label",{class:"display-stat",key:n[1]},[(0,r.wy)((0,r._)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":t[0]||(t[0]=t=>e.displayStat=t),value:n[0]},null,8,o),[[a.G2,e.displayStat]]),(0,r._)("span",null,(0,c.zw)(n[1]),1)])))),128))]),(0,r._)("label",u,[(0,r.Uk)(" Number of teams "),(0,r.wy)((0,r._)("input",{type:"number",min:e.NUMBER_OF_TEAMS,"onUpdate:modelValue":t[1]||(t[1]=t=>e.numberOfTeams=t),onChange:t[2]||(t[2]=(...t)=>e.numberOfTeamsOnChange&&e.numberOfTeamsOnChange(...t))},null,40,f),[[a.nr,e.numberOfTeams]])]),(0,r._)("div",m,[(0,r._)("button",{type:"button",disabled:e.saveDisabled,onClick:t[3]||(t[3]=(...t)=>e.saveOnClick&&e.saveOnClick(...t))}," Save ",8,h),(0,r._)("button",{type:"button",onClick:t[4]||(t[4]=(...t)=>e.clearOnClick&&e.clearOnClick(...t))},"Clear")])])]),(0,r._)("div",d,[(0,r.wy)((0,r._)("div",null,[(0,r.Wm)(v,{list:e.teams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,r.w5)((({element:t})=>[(0,r.Wm)(k,{team:t,selected:e.teamSelected(t.id),displayStat:e.displayStat,onClick:n=>e.teamOnClick(t.id),"onChange:name":e.teamNameOnChange,"onChange:buildname":e.buildnameOnChange,"onClick:character":n=>e.characterOnClick(t)},null,8,["team","selected","displayStat","onClick","onChange:name","onChange:buildname","onClick:character"])])),_:1},8,["list"])],512),[[a.F8,!e.characterSelectVisible]]),(0,r.wy)((0,r._)("div",null,[(0,r.Wm)(O,{visible:e.characterSelectVisible,members:e.forcusedMembers,"onClick:cancel":t[5]||(t[5]=t=>e.characterSelectVisible=!1),"onClick:ok":e.updateCharacters},null,8,["visible","members","onClick:ok"])],512),[[a.F8,e.characterSelectVisible]])]),p])}n(7658);var g=n(6983),y=n.n(g),k=n(4870),v=n(589),O=n(2986),w=n(5983),E=n(3550);const S=10,C=4;function _(e){let t;return e.name&&e.name in E.bw&&(t=E.bw[e.name]),t}function j(e){const t=e.split("_"),n=t[1];let a;return t.splice(0,2),a=t.length>0?t.join("_"):(0,O.K1)(n),a}function A(e){return Object.keys(localStorage).filter((t=>t.startsWith((0,O.R4)(e))))}function M(e,t){let n;const a=(0,O.R4)(e,t),r=localStorage.getItem(a);return r&&(n=JSON.parse(r)),n}const N={class:"title"},H={class:"name"},P=(0,r._)("span",{class:"handle"},"◆",-1),D={key:0},x={key:1},T={class:"element-resonance"},W=["src"],I={class:"members"};function V(e,t,n,s,l,i){const o=(0,r.up)("MemberItem");return(0,r.wg)(),(0,r.iD)("div",{class:(0,c.C_)("team"+e.selectedClass)},[(0,r._)("div",N,[(0,r._)("label",H,[P,e.editable?((0,r.wg)(),(0,r.iD)("span",D,[(0,r.wy)((0,r._)("input",{type:"text",minlength:"1",maxlength:"16","onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),placeholder:"INPUT TEAM NAME",onChange:t[1]||(t[1]=(...t)=>e.nameOnChange&&e.nameOnChange(...t))},null,544),[[a.nr,e.name]]),(0,r._)("span",{class:"button material-symbols-outlined",onClick:t[2]||(t[2]=t=>e.editable=!1)}," edit_off ")])):((0,r.wg)(),(0,r.iD)("span",x,[(0,r._)("span",null,(0,c.zw)(e.name),1),(0,r._)("span",{class:"button material-symbols-outlined",onClick:t[3]||(t[3]=t=>e.editable=!0)}," edit ")]))]),(0,r._)("div",T,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.resonanceElementImgSrcs,(e=>((0,r.wg)(),(0,r.iD)("img",{class:"element-resonance",key:e,src:e,alt:"resonance"},null,8,W)))),128))])]),(0,r._)("div",I,[(0,r._)("table",null,[(0,r._)("tr",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.team.members,(t=>((0,r.wg)(),(0,r.iD)("td",{key:t.id},[(0,r.Wm)(o,{member:t,displayStat:e.displayStat,showEquipment:!0,viewable:!0,"onClick:character":e.characterOnClick,"onChange:buildname":e.changeBuildname},null,8,["member","displayStat","onClick:character","onChange:buildname"])])))),128))])])])],2)}const F={class:"member"},X=["src","alt"],R=["src"],q={key:0,class:"tag tag-3"},L={key:1,class:"tag tag-2"},U={key:2,class:"tag tag-1"},Y={key:3,class:"tag tag-0"},B={key:0,class:"stat-value"},K={key:1},Z=["src"],G=["src"],z=["src"],J={class:"extra-control"},$={key:0};function Q(e,t,n,s,l,i){return(0,r.wg)(),(0,r.iD)("div",F,[(0,r._)("div",{class:"member-img",onClick:t[0]||(t[0]=(...t)=>e.characterOnClick&&e.characterOnClick(...t))},[(0,r._)("img",{class:(0,c.C_)("character"+e.characterImgClass),src:e.characterImgSrc,alt:e.displayName(e.member.name)},null,10,X),(0,r._)("img",{class:"vision",src:e.visionImgSrc,alt:"vision"},null,8,R),(0,r.wy)((0,r._)("div",{class:"constellation"},(0,c.zw)(e.constellation),513),[[a.F8,e.constellation]]),e.member.tags[3]?((0,r.wg)(),(0,r.iD)("div",q,(0,c.zw)(e.member.tags[3]),1)):(0,r.kq)("",!0),e.member.tags[2]?((0,r.wg)(),(0,r.iD)("div",L,(0,c.zw)(e.member.tags[2]),1)):(0,r.kq)("",!0),e.member.tags[1]?((0,r.wg)(),(0,r.iD)("div",U,(0,c.zw)(e.member.tags[1]),1)):(0,r.kq)("",!0),e.member.tags[0]?((0,r.wg)(),(0,r.iD)("div",Y,(0,c.zw)(e.member.tags[0]),1)):(0,r.kq)("",!0)]),e.displayStat?((0,r.wg)(),(0,r.iD)("div",B,(0,c.zw)(e.statValue),1)):(0,r.kq)("",!0),e.showEquipment?((0,r.wg)(),(0,r.iD)("div",K,[(0,r._)("img",{class:"weapon",src:e.imgWeaponSrc,alt:"weapon"},null,8,Z),(0,r._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(0),alt:"artifact-set"},null,8,G),(0,r._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(1),alt:"artifact-set"},null,8,z)])):(0,r.kq)("",!0),(0,r._)("div",J,[e.viewable&&"locate"==e.extraControl?((0,r.wg)(),(0,r.iD)("div",$,[(0,r._)("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>e.locate&&e.locate(...t))},"view")])):(0,r.kq)("",!0)])])}function ee(e,t){return t+O.iU[e][0]==t?"+":""}function te(e,t,n){if(!e)return 0;const a=ee(t,n);if(a in e)return e[a];const r=O.iU[t][0],c=O.iU[t][O.iU[t].length-1],s=e[r+"+"],l=e[c];return s+(l-s)*(n-r)/(c-r)}function ne(e,t){const n=O.iU[t][0];return e[n+"+"]}function ae(e,t){Object.keys(e).forEach((t=>{e[t]=0}));for(const n of t){if(!n)continue;const t=n.split("_");e[t[1]]+=E.$Y[t[0]][t[1]]}}function re(e){const t=e.聖遺物ステータス,n=e.聖遺物ステータスメイン効果,a=e.聖遺物ステータスサブ効果;for(const r of Object.keys(t))t[r]=0;for(const r of Object.keys(n))r in t?t[r]+=n[r]:t[r]=n[r];for(const r of Object.keys(a))r in t?t[r]+=a[r]:t[r]=a[r]}const ce=function(e,t,n,a,r){if(t&&n&&a&&r)try{const c=t.characterMaster,s=t.突破レベル,l=t.レベル,i=t.命ノ星座,o=t.weaponMaster,u=t.武器突破レベル,f=t.武器レベル,m=(0,w.X8)(O.q2);if(m["突破レベル"]=s,m["レベル"]=l,m["命ノ星座"]=i,m["元素"]=c.元素,"元素エネルギー"in c["元素爆発"]&&(m["元素エネルギー"]=c["元素爆発"]["元素エネルギー"]),"固有変数"in c)for(const e of Object.keys(c["固有変数"]))e in a.conditionValues?m[e]=Number(a.conditionValues[e]):m[e]=c["固有変数"][e];for(const t of Object.keys(e.enemyMaster).filter((e=>"key"!=e))){const n="敵"+t;m[n]=e.enemyMaster[t]}Object.keys(e.statAdjustments).forEach((t=>{t in m&&(m[t]+=e.statAdjustments[t])}));for(const e of Object.keys(c["ステータス"]))if(O.Vd.includes(e))m[e]+=te(c["ステータス"][e],s,l);else{const t=["HP","攻撃力","防御力"].includes(e)?e+"+":e;t in m&&(m[t]+=ne(c["ステータス"][e],s))}for(const e of Object.keys(o["ステータス"]))m[e]+=te(o["ステータス"][e],u,f);const h=n.聖遺物ステータス;for(const e of Object.keys(h)){const t=["HP","攻撃力","防御力"].includes(e)?e+"+":e;m[t]+=h[e]}let d="法器"==c.武器?c.元素:"物理",p="法器"==c.武器?c.元素:"物理",b="法器"==c.武器?c.元素:"物理";r&&[r.elementalResonance,r.teamOption,r.miscOption].forEach((e=>{e&&Object.keys(e.conditionAdjustments).forEach((t=>{if(e.conditionAdjustments[t]===1/0){if(t.endsWith("元素付与")&&["片手剣","両手剣","長柄武器"].includes(c.武器)){const e=t.replace(/元素付与$/,"");d=e,p=e,b=e}}else t in m?m[t]+=e.conditionAdjustments[t]:m[t]=e.conditionAdjustments[t]}))}));const g=oe(a),y=se(t,g,m);for(const e of[t.damageDetailMyCharacter,t.damageDetailMyWeapon,t.damageDetailMyArtifactSets])if(e&&O.yL in e)for(const t of e[O.yL]){if(t["条件"]){const e=ue(t["条件"],g,i);if(0==e)continue}if(t["種類"]&&t["種類"].endsWith("元素付与")){const e=t["種類"].replace("元素付与","");t["対象"]?"通常攻撃ダメージ"==t["対象"]?d=e:"重撃ダメージ"==t["対象"]?p=e:"落下攻撃ダメージ"==t["対象"]&&(b=e):(d=e,p=e,b=e)}}a.攻撃元素=[d,p,b],(0,w.fX)(e.statsObj,m),(0,w.fX)(a.conditionAdjustments,y)}catch(c){throw console.error(e,t,n,a,r),c}};function se(e,t,n){const a=e.命ノ星座,r={},c=["元素熟知","元素チャージ効率"],s=[],l=[],i=[];for(const o of[e.damageDetailMyCharacter,e.damageDetailMyWeapon,e.damageDetailMyArtifactSets])if(o&&O.e2 in o)for(const e of o[O.e2]){let n=!1,r=e["数値"];if(e["条件"]){const c=ue(e["条件"],t,a);if(0==c)continue;1!=c&&(r=r.concat(["*",c])),n=!0}if(e["種類"])if(e["対象"]){const t=e["種類"]+"."+e["対象"];i.push([t,r,e["上限"],n])}else c.includes(e["種類"])?s.push([e["種類"],r,e["上限"],n]):e["種類"].endsWith("%")?l.push([e["種類"],r,e["上限"],n]):i.push([e["種類"],r,e["上限"],n])}return s.forEach((e=>{const t=he(n,e[0],e[1],e[2]);if(e[3])for(const n of Object.keys(t))n in r?r[n]+=t[n]:r[n]=t[n]})),l.sort(le),l.forEach((e=>{const t=he(n,e[0],e[1],e[2]);if(e[3])for(const n of Object.keys(t))n in r?r[n]+=t[n]:r[n]=t[n]})),n["HP上限"]+=n["基礎HP"]+n["HP+"],n["HP上限"]+=n["基礎HP"]*n["HP%"]/100,n["攻撃力"]+=n["基礎攻撃力"]+n["攻撃力+"],n["攻撃力"]+=n["基礎攻撃力"]*n["攻撃力%"]/100,n["防御力"]+=n["基礎防御力"]+n["防御力+"],n["防御力"]+=n["基礎防御力"]*n["防御力%"]/100,i.sort(le),i.forEach((e=>{const t=he(n,e[0],e[1],e[2]);if(e[3])for(const n of Object.keys(t))n in r?r[n]+=t[n]:r[n]=t[n]})),r}function le(e,t){const n=["HP%","HP","HP上限","防御力%","防御力","元素熟知","会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","攻撃力%","攻撃力"],a=["ダメージ軽減"];let r=n.indexOf(e[0]);a.indexOf(e[0])>=0&&(r=n.length+1);let c=n.indexOf(t[0]);return a.indexOf(t[0])>=0&&(c=n.length+1),(-1!=r?r:n.length)-(-1!=c?c:n.length)}const ie=function(e,t,n,a=null){try{let r=0;if(Array.isArray(e)){let c=null;for(const s of e){let l=0;if(["+","-","*","/"].includes(s))c=s;else{if((0,w.hj)(s))l=Number(s);else if(Array.isArray(s))l=ie(s,t,n);else if(s in t)l=Number(t[s]);else if(-1!=s.indexOf("#")){const r=s.split("#");if(n&&r[0]in n){const c=n[r[0]];let i=null;for(const e of c)if(r[1]==e[0]){i=e[4];break}null!=i?l=i:console.error(e,t,n,a,s)}}else console.error(e,t,n,a,s);if(null==c)r+=l;else switch(c){case"+":r+=l;break;case"-":r-=l;break;case"*":r*=l,r=Math.floor(100*r)/100;break;case"/":r/=l;break}}}}else(0,w.hj)(e)?r=Number(e):e in t?r=t[e]:console.error(t,e,a);if(null!=a){const e=ie(a,t,n);r>e&&(r=e)}return r}catch(r){throw console.error(e,t,n,a),r}};function oe(e){try{const t=[];if(!e)return t;const n=e.checkboxList;n&&n.forEach((n=>{e.conditionValues[n.name]&&t.push(n.name)}));const a=e.selectList;return a&&a.forEach((n=>{const a=e.conditionValues[n.name];void 0!==a&&null!==a&&(a>0||0==a&&n.required)&&t.push(n.name+"@"+n.options[a])})),t}catch(t){throw console.error(e),t}}const ue=function(e,t,n){const a=e.split("^")[0];if(-1!=a.indexOf("|")){const e=a.split("|");for(let a=0;a<e.length;a++){const r=fe(e[a],t,n);if(1==r)return 1}return 0}const r=a.split("&");let c=1;for(let s=0;s<r.length;s++){const e=fe(r[s],t,n);if(0==e)return 0;1!=e&&(c=e)}return c};function fe(e,t,n){const a=e.split(/[@=]/);if("命ノ星座"==a[0]){if(2==a.length&&(0,w.hj)(a[1])){const e=Number(a[1]);if(e<=n)return 1}return 0}if(t.includes(e)||t.includes(e.replace("=","@")))return 1;if(1==a.length)return t.filter((t=>t.split("@")[0]==e)).length>0?1:0;if(-1!=e.indexOf("="))return 0;const r=new RegExp("[^0-9]*?([\\-0-9\\.]+).*");for(let c=0;c<t.length;c++)if(t[c].startsWith(a[0]+"@")){const e=t[c].split("@"),n=r.exec(e[1]);if(n){const e=Number(n[1]);return e}}return 0}const me=["炎","水","風","雷","草","氷","岩"];function he(e,t,n,a=null){const r=ie(n,e,O.US,a);(0,w.hj)(r)||console.error(e,t,n,r);const c=[];"HP"==t?c.push("HP上限"):t.startsWith("自元素")?c.push(t.replace(/^自/,String(e["元素"]))):t.startsWith("全元素")?me.forEach((e=>{c.push(t.replace(/^全/,e))})):t.startsWith("敵自元素")?c.push(t.replace(/^敵自/,"敵"+String(e["元素"]))):t.startsWith("敵全元素")?me.forEach((e=>{c.push(t.replace(/^敵全/,"敵"+e))})):c.push(t);const s={};c.forEach((e=>{s[e]=r}));for(const l of Object.keys(s))l in e?l.startsWith("別枠乗算")&&s[l]>0?e[l]*=s[l]/100:e[l]+=s[l]:e[l]=s[l];return console.debug(he.name,null,t,n,"=>",s),s}var de=(0,r.aZ)({name:"MemberItem",props:{member:{type:Object,required:!0},displayStat:{type:String},showEquipment:{type:Boolean},viewable:{type:Boolean},tags:{type:Array}},emits:["click:character","change:buildname"],setup(e,t){const{displayName:n,displayStatValue:a}=(0,v.Z)(),c=(0,k.iH)(e.member.buildname),s=()=>{t.emit("change:buildname",e.member.id,c.value)},l=(0,w.X8)(O.Hd),i=(0,w.X8)(O.HN),o=(0,w.X8)(O.NY),u=(0,w.X8)(O.wX),f=(0,w.X8)(O.HO),m=(0,k.iH)("locate");(0,r.YP)(e,(e=>{c.value=e.member.buildname,h()}));const h=async()=>{if(!e.member.name)return;l.character=e.member.name,l.characterMaster=await(0,E.tm)(l.character);const t=H.value;return t?(await(0,O.pS)(l,i,o,u,t),o.checkboxList.forEach((e=>{o.conditionValues[e.name]=!1})),o.selectList.forEach((e=>{o.conditionValues[e.name]=0})),(0,O.ge)(l),(0,O.Cl)(l),(0,O.Vk)(l),(0,O.Hk)(o,l),ae(i.聖遺物ステータスメイン効果,i.聖遺物メイン効果),re(i),ce(f,l,i,o,u),f.statsObj):void 0};h();const d=(0,r.Fl)((()=>e.member.name?E.bw[e.member.name]??void 0:void 0)),p=(0,r.Fl)((()=>d.value?.icon_url??E.bx)),b=(0,r.Fl)((()=>{const e=d.value?.レアリティ;return e?" "+E.dr[String(e)]:""})),g=(0,r.Fl)((()=>d.value?.元素?E.GN[d.value.元素]:E.bx)),y=(0,r.Fl)((()=>H.value?H.value.命ノ星座:"")),S=(0,r.Fl)((()=>P.value?P.value.icon_url:E.bx)),C=e=>D.value[e]?.image??E.bx,_=()=>{t.emit("click:character")},N=(0,r.Fl)((()=>{const t=e.member.name;let n=A(t).map((e=>j(e)));const a=(0,O.K1)(t);if(n.includes(a)){const e=n.filter((e=>e!=a)).sort();e.length&&(n=[a,...e])}return n})),H=(0,r.Fl)((()=>{let t;const n=e.member.name;return n&&c.value&&(t=M(n,c.value)),t})),P=(0,r.Fl)((()=>{let e;if(H.value){const t=H.value.武器;t&&d.value&&(e=E.Nd[d.value.武器][t])}return e})),D=(0,r.Fl)((()=>{const e=[];if(H.value)for(let t=0;t<2;t++){const n="聖遺物セット効果"+(t+1);let a=H.value[n]??"NONE";e.push(E.oN[a])}return e})),x=(0,r.Fl)((()=>{let t="-";if(H.value){let n=e.displayStat;n&&("会心率/ダメージ"===n?(t=a("会心率",f.statsObj["会心率"]),t+="/",t+=a("会心ダメージ",f.statsObj["会心ダメージ"])):t=a(n,f.statsObj[n]))}return t})),T=()=>{const t=e.member;(0,O.Ac)(t.name,c.value),window.open("./","_blank")};return{displayName:n,characterImgSrc:p,characterImgClass:b,visionImgSrc:g,constellation:y,imgWeaponSrc:S,imgArtifactSetSrc:C,statValue:x,extraControl:m,buildname:c,buildnameOnChange:s,buildnames:N,locate:T,characterOnClick:_}}}),pe=n(89);const be=(0,pe.Z)(de,[["render",Q]]);var ge=be,ye=(0,r.aZ)({name:"TeamItem",props:{team:{type:Object,required:!0},selected:{type:Boolean,requied:!0},displayStat:{type:String}},emits:["change:name","click:character","change:buildname"],components:{MemberItem:ge},setup(e,t){const{displayName:n}=(0,v.Z)();(0,r.YP)(e,(e=>{s.value=e.team.name}));const a=(0,r.Fl)((()=>e.selected?" selected":"")),c=(0,k.iH)(!1),s=(0,k.iH)(e.team.name),l=()=>{t.emit("change:name",e.team.id,s)},i=(0,r.Fl)((()=>{const t=[],n={},a=e.team.members.filter((e=>e.name));return 4==a.length&&(a.forEach((e=>{const t=_(e);t&&(t.元素 in n?n[t.元素]++:n[t.元素]=1)})),4==Object.keys(n).length?t.push("元素共鳴なし"):Object.keys(n).forEach((e=>{n[e]>=2&&t.push(e+"元素共鳴")}))),t})),o=(0,r.Fl)((()=>{const t=[];return i.value.forEach((n=>{if("元素共鳴なし"==n){const n=e.team.members.filter((e=>e.name));n.forEach((e=>{const n=E.bw[e.name],a=E.GN[n.元素];t.push(a)}))}else{const e=E.GN[n.replace("元素共鳴","")];t.push(e),t.push(e)}})),t})),u=(0,r.Fl)((()=>{const e={};return i.value.forEach((t=>{switch(t){case"炎元素共鳴":e["攻撃力%"]=25;break;case"水元素共鳴":e["HP%"]=25;break;case"草元素共鳴":e["元素熟知"]=50;break;case"元素共鳴なし":me.forEach((t=>{e[t+"元素耐性"]=15})),e["物理耐性"]=15;break}})),e})),f=()=>{t.emit("click:character")},m=(n,a)=>{t.emit("change:buildname",e.team.id,n,a)};return{displayName:n,selectedClass:a,editable:c,name:s,resonanceElementImgSrcs:o,elementalResonanceAdjustments:u,nameOnChange:l,characterOnClick:f,changeBuildname:m}}});const ke=(0,pe.Z)(ye,[["render",V]]);var ve=ke;const Oe=e=>((0,r.dD)("data-v-4bb7c8a4"),e=e(),(0,r.Cn)(),e),we=Oe((()=>(0,r._)("hr",null,null,-1))),Ee={class:"tags"},Se=["onClick"],Ce={class:"buttons"};function _e(e,t,n,a,s,l){const i=(0,r.up)("CharacterSelect"),o=(0,r.up)("MemberItem");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i,{visible:!0,characters:e.characters,"onUpdate:characters":e.updateCharacters},null,8,["characters","onUpdate:characters"]),we,(0,r._)("div",Ee,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.TAG_LIST,(t=>((0,r.wg)(),(0,r.iD)("span",{class:"tag",key:t,onClick:n=>e.tagOnClick(t)},(0,c.zw)(t),9,Se)))),128))]),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.workMembers,(t=>((0,r.wg)(),(0,r.iD)("div",{class:(0,c.C_)("member"+e.memberSelectedClass(t.id)),key:t.id},[(0,r.Wm)(o,{member:t,onClick:n=>e.memberOnClick(t.id)},null,8,["member","onClick"])],2)))),128))]),(0,r._)("div",Ce,[(0,r._)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.cancelOnClick&&e.cancelOnClick(...t))},"cancel"),(0,r._)("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>e.okOnClick&&e.okOnClick(...t))},"ok")])],64)}var je=n(1246),Ae=(0,r.aZ)({name:"CharacterSelectModal",components:{CharacterSelect:je.Z,MemberItem:ge},props:{visible:{type:Boolean,required:!0},members:{type:Array,required:!0}},emits:["click:cancel","click:ok"],setup(e,t){const n=(0,k.qj)([]),a=(0,k.iH)(-1),c=["FREE"];function s(){const t=[];for(let n=0;n<e.members.length;n++)t.push({id:n,name:e.members[n].name,buildname:e.members[n].buildname,savedata:e.members[n].savedata,tags:(0,w.X8)(e.members[n].tags)});n.splice(0,n.length,...t)}s(),(0,r.YP)(e,(e=>{e.members&&s()}));const l=(0,r.Fl)((()=>n.map((e=>e.name)))),i=e=>{for(let t=0;t<e.length;t++)n[t].name=e[t]},o=e=>{a.value=e},u=e=>e==a.value?" selected":"",f=e=>{if(console.log(e,a.value),a.value<0||a.value>=n.length)return;const t=n[a.value];if(console.log(e,t),t&&t.name){const n=t.tags;n&&(n.includes(e)?n.splice(0,n.length,...n.filter((t=>t!=e))):n.push(e))}},m=()=>{t.emit("click:cancel")},h=()=>{t.emit("click:ok",n)};return{characters:l,TAG_LIST:c,tagOnClick:f,workMembers:n,memberOnClick:o,memberSelectedClass:u,updateCharacters:i,cancelOnClick:m,okOnClick:h}}});const Me=(0,pe.Z)(Ae,[["render",_e],["__scopeId","data-v-4bb7c8a4"]]);var Ne=Me;let He=1;var Pe=(0,r.aZ)({name:"TeamManager",components:{draggable:y(),TeamItem:ve,CharacterSelectModal:Ne},setup(){const{displayName:e}=(0,v.Z)(),t=(0,k.iH)(!1),n=(0,k.iH)(S),a=[["","None"],["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],c=(0,k.iH)(""),s=(0,k.iH)(0),l=e=>e==s.value;function i(e){return{id:e,name:"",buildname:void 0,savedata:void 0,tags:[]}}function o(e){const t={id:e,name:"チーム"+(e+1),members:[]};for(let n=0;n<C;n++)t.members.push(i(He++));return t}function u(e){e.name="",e.buildname=void 0,e.savedata=void 0}function f(e){e.name="チーム"+(e.id+1),e.members.forEach((e=>{u(e)}))}const m=(0,k.qj)([]);for(let r=0;r<n.value;r++)m.push(o(r));const h=e=>{s.value=e},d=e=>{s.value==e&&(t.value=!0),s.value=e},p=()=>{m.forEach((e=>{f(e)}))},b=(0,r.Fl)((()=>{const e=(0,w.X8)(m);return e.forEach((e=>{e.members.forEach((e=>{e.savedata=void 0}))})),JSON.stringify(e)})),g=(0,k.iH)(""),y=()=>{localStorage.setItem("teams",b.value),g.value=b.value},E=(0,r.Fl)((()=>b.value==g.value)),_=()=>{const e=localStorage.getItem("teams");if(e){const t=JSON.parse(e);for(let e=0;e<m.length;e++){const n=m[e];if(t[e]){n.name=t[e].name;const a=n.members;for(let n=0;n<a.length;n++)t[e].members[n]&&(a[n].name=t[e].members[n].name,t[e].members[n].buildname?a[n].buildname=t[e].members[n].buildname:a[n].buildname=void 0,a[n].savedata=void 0,t[e].members[n].tags?a[n].tags=t[e].members[n].tags:a[n].tags=[])}}}};_();const j=()=>{if(n.value>m.length)for(let e=m.length;e<n.value;e++)m.push(o(e));else n.value<m.length&&(s.value>n.value&&(s.value=0),m.splice(n.value))},A=(0,r.Fl)((()=>m[s.value].members)),M=e=>{if(-1!=s.value){const t=m.filter((e=>e.id==s.value))[0];if(t){const n=t.members;for(let t=0;t<e.length;t++)n[t].name!=e[t].name&&(n[t].name=e[t].name,n[t].buildname=(0,O.K1)(n[t].name),n[t].savedata=void 0),n[t].tags.splice(0,n[t].tags.length,...e[t].tags)}}t.value=!1},N=e=>{l(e.id)?t.value=!0:s.value=e.id},H=(e,t)=>{const n=m.filter((t=>t.id==e))[0];n&&(n.name=t)},P=(e,t,n)=>{const a=m.filter((t=>t.id==e))[0];if(a){const e=a.members.filter((e=>e.id==t))[0];e&&(e.buildname=n)}};return{displayName:e,characterSelectVisible:t,NUMBER_OF_TEAMS:S,NUMBER_OF_MEMBERS:C,numberOfTeams:n,numberOfTeamsOnChange:j,DISPLAY_STAT_LIST:a,displayStat:c,clearOnClick:p,saveOnClick:y,loadOnClick:_,saveDisabled:E,teamSelected:l,teams:m,forcusedMembers:A,teamOnClick:h,characterOnClick:N,memberOnClick:d,updateCharacters:M,teamNameOnChange:H,buildnameOnChange:P}}});const De=(0,pe.Z)(Pe,[["render",b],["__scopeId","data-v-450c19c9"]]);var xe=De,Te=n(2540);async function We(){(0,a.ri)(xe,{}).use(Te.Z).mount("#app")}We()}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var c=t[a]={exports:{}};return e[a].call(c.exports,c,c.exports,n),c.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,c){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],c=e[u][2];for(var l=!0,i=0;i<a.length;i++)(!1&c||s>=c)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(l=!1,c<s&&(s=c));if(l){e.splice(u--,1);var o=r();void 0!==o&&(t=o)}}return t}c=c||0;for(var u=e.length;u>0&&e[u-1][2]>c;u--)e[u]=e[u-1];e[u]=[a,r,c]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.j=299}(),function(){var e={299:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,c,s=a[0],l=a[1],i=a[2],o=0;if(s.some((function(t){return 0!==e[t]}))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(i)var u=i(n)}for(t&&t(a);o<s.length;o++)c=s[o],n.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return n.O(u)},a=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998,64],(function(){return n(4980)}));a=n.O(a)})();
//# sourceMappingURL=TeamManager.087c0500.js.map