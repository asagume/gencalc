(function(){"use strict";var e={2986:function(e,t,n){n.d(t,{Ac:function(){return Q},Cl:function(){return R},Em:function(){return u},HN:function(){return S},HO:function(){return j},Hd:function(){return V},Hk:function(){return Y},K1:function(){return D},NY:function(){return M},R4:function(){return H},U3:function(){return c},US:function(){return E},V6:function(){return b},Vd:function(){return r},Vk:function(){return F},e2:function(){return I},ge:function(){return W},iU:function(){return C},pS:function(){return x},q2:function(){return v},tH:function(){return o},uc:function(){return f},wB:function(){return m},wX:function(){return A},yL:function(){return T}});n(7658);var a=n(3550),l=n(5983);const r=["基礎HP","基礎攻撃力","基礎防御力"],s=["HP上限","攻撃力","防御力","元素熟知"],i=["会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","クールタイム短縮","シールド強化"],c=["炎元素ダメージバフ","水元素ダメージバフ","風元素ダメージバフ","雷元素ダメージバフ","草元素ダメージバフ","氷元素ダメージバフ","岩元素ダメージバフ","物理ダメージバフ"],o=["炎元素耐性","水元素耐性","風元素耐性","雷元素耐性","草元素耐性","氷元素耐性","岩元素耐性","物理耐性"],u=["通常攻撃ダメージバフ","重撃ダメージバフ","落下攻撃ダメージバフ","元素スキルダメージバフ","元素爆発ダメージバフ","与えるダメージ"],m=["通常攻撃ダメージアップ","重撃ダメージアップ","落下攻撃ダメージアップ","元素スキルダメージアップ","元素爆発ダメージアップ","炎元素ダメージアップ","水元素ダメージアップ","風元素ダメージアップ","雷元素ダメージアップ","草元素ダメージアップ","氷元素ダメージアップ","岩元素ダメージアップ","物理ダメージアップ"],f=["蒸発反応ボーナス","溶解反応ボーナス","過負荷反応ボーナス","感電反応ボーナス","凍結反応ボーナス","超電導反応ボーナス","拡散反応ボーナス","結晶反応ボーナス","燃焼反応ボーナス","開花反応ボーナス","烈開花反応ボーナス","超開花反応ボーナス","超激化反応ボーナス","草激化反応ボーナス"],d=["ダメージ軽減","HP%","攻撃力%","防御力%","HP+","攻撃力+","防御力+","HP上限V1","攻撃力V1","防御力V1","元素熟知V1","会心率V1","会心ダメージV1","与える治療効果V1","受ける治療効果V1","元素チャージ効率V1","HP上限V2","攻撃力V2","防御力V2","元素熟知V2","会心率V2","会心ダメージV2","与える治療効果V2","受ける治療効果V2","元素チャージ効率V2"],h=["敵炎元素耐性","敵水元素耐性","敵風元素耐性","敵雷元素耐性","敵草元素耐性","敵氷元素耐性","敵岩元素耐性","敵物理耐性"],p=["敵防御力"],g=new Map([["基礎ステータス",r],["基本ステータス",s],["高級ステータス",i],["元素ステータス·ダメージ",c],["元素ステータス·耐性",o],["ダメージバフ",u],["実数ダメージ加算",m],["元素反応バフ",f],["その他",d],["敵ステータス·元素耐性",h],["敵ステータス·その他",p]]),b=[...i,...c,...o,...u,...f,...h,"別枠乗算"];function y(){const e={};return g.forEach((t=>{t.forEach((t=>{e[t]=0}))})),e["会心率"]=5,e["会心ダメージ"]=50,e["元素チャージ効率"]=100,e["敵レベル"]=0,e["敵防御力"]=0,e}const v=y();function k(){const e={};return[o].forEach((t=>{t.forEach((t=>{e[t]=0}))})),e["防御力"]=0,e}k();const O={HP:0,"攻撃力":0,"防御力":0,"元素熟知":0,"会心率":0,"会心ダメージ":0,"元素チャージ効率":0,"HP%":0,"攻撃力%":0,"防御力%":0,"炎元素ダメージバフ":0,"水元素ダメージバフ":0,"風元素ダメージバフ":0,"雷元素ダメージバフ":0,"草元素ダメージバフ":0,"氷元素ダメージバフ":0,"岩元素ダメージバフ":0,"物理ダメージバフ":0,"与える治療効果":0},w={"元素":"炎","蒸発倍率":0,"溶解倍率":0,"過負荷ダメージ":0,"感電ダメージ":0,"超電導ダメージ":0,"拡散ダメージ":0,"拡散元素":"炎","結晶吸収量":0,"燃焼ダメージ":0,"開花ダメージ":0,"烈開花ダメージ":0,"超開花ダメージ":0,"超激化ダメージ":0,"草激化ダメージ":0},E={"元素反応":(0,l.X8)(w),"通常攻撃":[],"重撃":[],"落下攻撃":[],"元素スキル":[],"元素爆発":[],"その他":[],"キャラクター注釈":[]},C=[Array.from({length:20},((e,t)=>t+1)),Array.from({length:21},((e,t)=>t+20)),Array.from({length:11},((e,t)=>t+40)),Array.from({length:11},((e,t)=>t+50)),Array.from({length:11},((e,t)=>t+60)),Array.from({length:11},((e,t)=>t+70)),Array.from({length:11},((e,t)=>t+80))],_={key:"NONE","レアリティ":5,image:a.bx},V={character:"アンバー",characterMaster:{},"突破レベル":6,"レベル":90,"命ノ星座":0,"通常攻撃レベル":8,"元素スキルレベル":8,"元素爆発レベル":8,weapon:"西風猟弓",weaponMaster:{},"武器突破レベル":6,"武器レベル":90,"武器精錬ランク":1,artifactSets:["NONE","NONE"],artifactSetMasters:[_,_],damageDetailMyCharacter:null,damageDetailMyWeapon:null,damageDetailMyArtifactSets:null,damageDetailElementalResonance:null,buildname:"",recommendationSelectedIndex:0,saveDisabled:!0,removeDisabled:!0},S={"聖遺物メイン効果":["","","","",""],"聖遺物優先するサブ効果":["","",""],"聖遺物優先するサブ効果上昇値":Array.from(a.Ml[2].values),"聖遺物優先するサブ効果上昇回数":Array.from(a.Ml[2].counts),"聖遺物ステータス":(0,l.X8)(O),"聖遺物ステータスメイン効果":(0,l.X8)(O),"聖遺物ステータスサブ効果":(0,l.X8)(O),"聖遺物優先するサブ効果Disabled":!1},M={checkboxList:[],selectList:[],conditionValues:{},conditionAdjustments:{},"攻撃元素":[null,null,null]},j={statsObj:(0,l.X8)(v),statAdjustments:(0,l.X8)(v),enemyMaster:a.FX[0]};for(const ee of Object.keys(j.statAdjustments))j.statAdjustments[ee]=0;const A={elementalResonance:{conditionValues:{},conditionAdjustments:{}},supporterBuildname:{},teamOption:(0,l.X8)(M),miscOption:(0,l.X8)(M)};(0,l.X8)(V),(0,l.X8)(S),(0,l.X8)(M),(0,l.X8)(j);function N(e){try{let t;t=(0,l.HD)(e)?Number(String(e).replace("+","")):Number(e);let n=0;for(let a=C.length-1;a>=0;a--)if(n=a,!(C[a][0]>t)){C[a][0]!=t||String(e).endsWith("+")||n--;break}return[n,t]}catch(t){throw console.error(e),t}}function D(e){return"あなたの"+e}function H(e,t){let n="構成_"+e;return t&&t!=D(e)&&(n+="_"+t),n}function P(e,t,n){const l=[];if(e[t]&&(n||(n=e[t]),n&&n in a._J)){const e=a._J[n];for(let t=0;t<e.length;t++)if(l.push(e[t]),t<e.length-1){const n=e[t+1]-e[t];l.push(e[t]+n/2)}}return l}async function x(e,t,n,r,s){try{const i=e.character,c=await(0,a.tm)(i);e.characterMaster=c;const o=(0,l.X8)(O);"レベル"in s&&([e.突破レベル,e.レベル]=N(s["レベル"])),["命ノ星座","通常攻撃レベル","元素スキルレベル","元素爆発レベル"].forEach((t=>{t in s&&(e[t]=Number(s[t]))}));const u=c["武器"];"武器"in s&&(Object.keys(a.Nd[u]).includes(s["武器"])?e.weapon=s["武器"]:e.weapon=Object.keys(a.Nd[u]).filter((e=>e.startsWith("西風")))[0],e.weaponMaster=await(0,a.i7)(e.weapon,u)),"武器レベル"in s&&([e.武器突破レベル,e.武器レベル]=N(s["武器レベル"])),"精錬ランク"in s&&(e.武器精錬ランク=Number(s["精錬ランク"]));let m=!1;for(const e of Object.keys(s).filter((e=>e.startsWith("聖遺物サブ効果")))){let t=e.replace(/^聖遺物サブ効果/,"");"HP"!=t&&(t=t.replace(/P$/,"%")),(s[e]||0==s[e])&&(m=!0,o[t]=Number(s[e]))}if(t.聖遺物優先するサブ効果Disabled=m,["聖遺物セット効果1","聖遺物セット効果2"].forEach(((t,n)=>{if(!(t in s))return;const l=s[t];l&&l in a.oN?(e.artifactSets[n]=l,e.artifactSetMasters[n]=a.oN[l]):e.artifactSetMasters[n]=_})),["聖遺物メイン効果1","聖遺物メイン効果2"].forEach(((e,n)=>{t["聖遺物メイン効果"][n]=e in s?s[e]:["5_HP","5_攻撃力"][n]})),["聖遺物メイン効果3","聖遺物メイン効果4","聖遺物メイン効果5"].forEach(((e,n)=>{if(!(e in s))return;const a=s[e];t["聖遺物メイン効果"][n+2]=a})),m||(["聖遺物優先するサブ効果1","聖遺物優先するサブ効果2","聖遺物優先するサブ効果3"].forEach(((e,n)=>{if(!(e in s))return;const a=s[e];t["聖遺物優先するサブ効果"][n]=a})),["聖遺物優先するサブ効果1上昇値","聖遺物優先するサブ効果2上昇値","聖遺物優先するサブ効果3上昇値"].forEach(((e,n)=>{let r=!1;if(t["聖遺物優先するサブ効果"][n]&&e in s&&(0,l.hj)(s[e])&&(r=!0),r){const a=Number(s[e]),l=t["聖遺物優先するサブ効果"][n],r=P([l],0);r.forEach(((e,l)=>{a<=e&&(t["聖遺物優先するサブ効果上昇値"][n]=l)}))}else t["聖遺物優先するサブ効果"][n]&&!t["聖遺物優先するサブ効果上昇値"][n]&&(t["聖遺物優先するサブ効果上昇値"][n]=a.Ml[2].values[n])})),["聖遺物優先するサブ効果1上昇回数","聖遺物優先するサブ効果2上昇回数","聖遺物優先するサブ効果3上昇回数"].forEach(((e,n)=>{let r=!1;if(t["聖遺物優先するサブ効果"][n]&&e in s&&(0,l.hj)(s[e])&&(r=!0),r){const a=Number(s[e]);t["聖遺物優先するサブ効果上昇回数"][n]=a}else t["聖遺物優先するサブ効果"][n]&&!t["聖遺物優先するサブ効果上昇回数"][n]&&(t["聖遺物優先するサブ効果上昇回数"][n]=a.Ml[2].counts[n])}))),Object.keys(s).filter((e=>!a.PW.has(e)&&!["options","artifactScoring","supporterBuildname"].includes(e))).forEach((e=>{null==s[e]?n.conditionValues[e]=s[e]:(0,l.HD)(s[e])?n.conditionValues[e]=Number(s[e]):n.conditionValues[e]=s[e]})),"options"in s){const e=Object.keys(s.options);e.length&&((0,l.fX)(r.elementalResonance.conditionValues,{}),(0,l.fX)(r.teamOption.conditionValues,{}),(0,l.fX)(r.miscOption.conditionValues,{}),e.forEach((e=>{if(e in a._9||"dendroOption"==e)r.elementalResonance.conditionValues[e]=s.options[e];else{const t=e.indexOf("*");if(-1!=t){const n=e.substring(0,t);n in a.bw?r.teamOption.conditionValues[e]=s.options[e]:r.miscOption.conditionValues[e]=s.options[e]}else r.miscOption.conditionValues[e]=s.options[e]}})))}if("supporterBuildname"in s){const e=Object.keys(s.supporterBuildname);e.length&&((0,l.fX)(r.supporterBuildname,{}),e.forEach((e=>{r.supporterBuildname[e]=s.supporterBuildname[e]})))}(0,l.fX)(t.聖遺物ステータスサブ効果,o),console.debug("loadRecommendation",e,t,n,s)}catch(i){throw console.error(e,t,n,s),i}}const I="ステータス変更系詳細",T="天賦性能変更系詳細";function W(e){try{const t=e.characterMaster,n={};let a,l,r,s;const i="キャラクター",c=[],o=[];l=e["通常攻撃レベル"],s="法器"===t["武器"]?t["元素"]:null,["通常攻撃","重撃","落下攻撃"].forEach((e=>{a=t[e],r=e+"ダメージ",n[e]=B(a,l,r,s,c,o,i)})),["通常攻撃","重撃","落下攻撃"].forEach((u=>{const m="特殊"+u;if(m in t){if(a=t[m],"種類"in a)switch(r=a["種類"],r){case"元素スキルダメージ":l=e["元素スキルレベル"];break;case"元素爆発ダメージ":l=e["元素爆発レベル"];break}"元素"in a&&(s=a["元素"]);const u={"条件":a["条件"],"詳細":B(a,l,r,s,c,o,i)};n[m]=u}})),l=e["元素スキルレベル"],r="元素スキルダメージ",s=t["元素"],n["元素スキル"]=B(t["元素スキル"],l,r,s,c,o,i),l=e["元素爆発レベル"],r="元素爆発ダメージ",s=t["元素"],n["元素爆発"]=B(t["元素爆発"],l,r,s,c,o,i),n["その他"]=[],"その他戦闘天賦"in t&&t["その他戦闘天賦"].forEach((e=>{const t=B(e,null,null,null,c,o,i);t.length>0&&n["その他"].push(...t)})),t["固有天賦"].forEach((e=>{const t=B(e,null,null,null,c,o,i);t.length>0&&n["その他"].push(...t)})),"命ノ星座"in t&&Object.keys(t["命ノ星座"]).forEach((l=>{if(Number(l)>e.命ノ星座)return;a=t["命ノ星座"][l];const r=B(a,null,null,null,c,o,i);r.length>0&&n["その他"].push(...r)})),"風"==t["元素"]&&(0==o.filter((e=>e.条件&&e.条件.startsWith("拡散@"))).length&&["炎元素","水元素","雷元素","氷元素"].forEach((e=>{o.push({"名前":null,"種類":"固有変数","元素":null,"数値":null,"条件":"拡散@"+e,"対象":null,"上限":null,"HIT数":null,"ダメージバフ":null,"元素付与無効":null,"除外条件":null,"適用条件":null})})),"オプション初期値"in t?0==Object.keys(t["オプション初期値"]).filter((e=>"拡散"==e)).length&&(t["オプション初期値"]["拡散"]=1):t["オプション初期値"]={"拡散":1}),n[I]=c,n[T]=o;const u=new Map,m=new Map;return c.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],u,m)})),o.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],u,m)})),u.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(t,["",...e]))})),n["条件"]=u,n["排他"]=m,e.damageDetailMyCharacter=n,n}catch(t){throw console.error(e),t}}function R(e){try{const t=e.weapon,n=e.weaponMaster,a={};if(!t||!n)return a;let r;const s=e.武器精錬ランク,i="武器",c=[],o=[];"武器スキル"in n&&(r=n["武器スキル"],a["その他"]=B(r,s,null,null,c,o,i)),a[I]=c,a[T]=o;const u=new Map,m=new Map;return c.filter((e=>e["条件"])).forEach((e=>{let t=e["条件"];(0,l.PO)(t)&&s in t&&(t=t[s]),L(t,u,m)})),o.filter((e=>e["条件"])).forEach((e=>{let t=e["条件"];(0,l.PO)(t)&&s in t&&(t=t[s]),L(t,u,m)})),u.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||u.set(t,["",...e]))})),a["条件"]=u,a["排他"]=m,e.damageDetailMyWeapon=a,a}catch(t){throw console.error(e),t}}function F(e){try{const t=[];let n;const a="聖遺物セット効果",l=[],r=[],s=e.artifactSetMasters.filter((e=>e));if(s.length>0){const e=[];"2セット効果"in s[0]&&(n=s[0]["2セット効果"],e.push(...B(n,null,null,null,l,r,a))),2==s.length&&(s[0]==s[1]?(n=s[0]["4セット効果"],e.push(...B(n,null,null,null,l,r,a))):(n=s[1]["2セット効果"],e.push(...B(n,null,null,null,l,r,a)))),t["その他"]=e}t[I]=l,t[T]=r;const i=new Map,c=new Map;return l.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],i,c)})),r.filter((e=>e["条件"])).forEach((e=>{L(e["条件"],i,c)})),i.forEach(((e,t)=>{e&&Array.isArray(e)&&(e[0].startsWith("required_")||i.set(t,["",...e]))})),t["条件"]=i,t["排他"]=c,e.damageDetailMyArtifactSets=t,t}catch(t){throw console.error(e),t}}const X=function(e,t,n,r,s,i){let c="種類"in e?e["種類"]:n,o=null;-1!=c.indexOf(".")?(o=c.substring(c.indexOf(".")+1),c=c.substring(0,c.indexOf("."))):"対象"in e&&(o=e["対象"]);let u=null;"数値"in e&&(u=e["数値"],(0,l.hj)(u)||(0,l.HD)(u)||((0,l.PO)(u)&&t&&t in u?u=u[t]:console.error(e,t,n,r,u)),u=a.vN.includes(c+"ダメージ")||c.endsWith("ダメージ")?$(u,"攻撃力"):$(u,c));let m=null;m="条件"in e?(0,l.PO)(e["条件"])&&t&&t in e["条件"]?e["条件"][t]:e["条件"]:i??null;let f=null;"上限"in e&&(f=e["上限"],(0,l.PO)(f)&&t&&t in f&&(f=f[t]),f=$(f));let d=null;"下限"in e&&(d=e["下限"],(0,l.PO)(d)&&t&&t in d&&(d=d[t]),d=$(d));const h={"名前":e["名前"],"種類":c,"元素":"元素"in e?e["元素"]:r,"数値":u,"条件":m,"対象":o,"上限":f,"下限":d,"HIT数":"HIT数"in e?e["HIT数"]:null,"ダメージバフ":"ダメージバフ"in e?e["ダメージバフ"]:null,"元素付与無効":"元素付与無効"in e?e["元素付与無効"]:"武器"==s,"除外条件":"除外条件"in e?e["除外条件"]:null,"適用条件":"適用条件"in e?e["適用条件"]:null};return h};function q(e){return e in v||new RegExp("[自全].+(バフ|アップ)").exec(e)||new RegExp("敵?[自全]元素耐性").exec(e)||["別枠乗算","回復量アップ"].includes(e)||["敵防御力"].includes(e)||["発動回数","使用回数"].includes(e)||["攻撃速度","通常攻撃速度","移動速度"].includes(e)||e.endsWith("継続時間")||e.endsWith("クールタイム")||e.endsWith("会心率")||e.endsWith("会心ダメージ")?"STATUS":e.endsWith("強化")||e.endsWith("付与")||"防御無視"==e||"固有変数"==e?"TALENT":void 0}const B=function(e,t,n,a,l,r,s,i){const c=[];return"詳細"in e?(e["詳細"].forEach((e=>{const o=X(e,t,n,a,s,i),u=o.種類;return null!=l&&"STATUS"==q(u)?(o["元素"]="元素"in e?e["元素"]:null,void l.push(o)):null!=r&&"TALENT"==q(u)?(o["元素"]="元素"in e?e["元素"]:null,void r.push(o)):void c.push(o)})),c):c},L=function(e,t,n){let a=null,l=e.split("^");l.length>1&&(a=l[1]);const r=l[0];-1!=r.indexOf("|")?(l=r.split("|"),l.forEach((e=>{U(e,t,n,a)}))):(l=r.split("&"),l.forEach((e=>{U(e,t,n,a)})))};function U(e,t,n,a){const l=e.split(/[@=]/),r=l[0];if(1==l.length)z(t,r,null);else if(2==l.length)if(-1!=l[1].indexOf(",")){const e=new RegExp("([^0-9]*?)([\\+\\-0-9\\.,]+)(.*)"),n=e.exec(l[1]);if(n){const e=n[1],a=n[2].split(","),l=n[3];a.forEach((n=>{z(t,r,e+n+l)}))}}else if(-1!=l[1].indexOf("-")){const e=new RegExp("([^0-9\\.]*)(-?[0-9\\.]+)-(-?[0-9\\.]+)(.*)"),n=new RegExp("/([0-9\\.]+)(.*)"),a=e.exec(l[1]);if(a){const e=a[1],l=Number(a[2]),s=Number(a[3]);let i=l,c=a[4];if(c){const e=n.exec(c);e&&(i=Number(e[1]),c=e[2])}for(let n=l;n<s;n=G(n,i,s))z(t,r,e+String(n)+c);z(t,r,e+String(s)+c)}else z(t,r,l[1])}else z(t,r,l[1]);else console.error(e,t,n);a&&a.split(",").forEach((e=>{z(n,r,e)}))}function Y(e,t,n){try{const l=e.conditionValues,r=e.checkboxList,s=e.selectList;r.splice(0,r.length),s.splice(0,s.length);const i=[t.characterMaster,t.weaponMaster,...t.artifactSetMasters];for(const e of i.filter((e=>e))){if("オプション初期値"in e)for(const t of Object.keys(e["オプション初期値"]))t in l||(l[t]=e["オプション初期値"][t]);if("4セット効果"in e&&"オプション初期値"in e["4セット効果"])for(const t of Object.keys(e["4セット効果"]["オプション初期値"]))t in l||(l[t]=e["4セット効果"]["オプション初期値"][t])}for(const e of[t.damageDetailMyCharacter,t.damageDetailMyWeapon,t.damageDetailMyArtifactSets])if(e){const t=e.条件,n=e.排他;t.forEach(((e,a)=>{if(null==e)0==r.filter((e=>e.name==a)).length&&r.push({name:a});else if(0==s.filter((e=>e.name==a)).length){const t=e[0].startsWith("required_");s.push({name:a,options:e,required:t})}if(a in l&&null!=l[a]){const e=n.get(a);if(e)for(const n of e)if(n in l){const e=t.get(n);void 0!==e&&(l[n]=null!==e&&0)}}else if(null===e){let e=!0;const t=n.get(a);t&&t.filter((e=>l[e])).length>0&&(e=!1),l[a]=e}else{let t=e.length-1;const r=n.get(a);r&&r.filter((e=>l[e])).length>0&&(t=0),l[a]=t}}))}if(n.elementalResonance){const e=new Map,t=new Map;for(const l of Object.keys(a._9)){if(!n.elementalResonance.conditionValues[l])continue;const r=a._9[l];if(r.詳細)for(const n of r.詳細)n.条件&&L(n.条件,e,t)}e.forEach(((n,a)=>{if(null==n)0==r.filter((e=>e.name==a)).length&&r.push({name:a});else if(0==s.filter((e=>e.name==a)).length){const e=n[0].startsWith("required_");s.push({name:a,options:n,required:e})}if(a in l&&null!=l[a]){const n=t.get(a);if(n)for(const t of n)if(t in l){const n=e.get(t);void 0!==n&&(l[t]=null!==n&&0)}}else if(null===n){let e=!0;const n=t.get(a);n&&n.filter((e=>l[e])).length>0&&(e=!1),l[a]=e}else{let e=n.length-1;const r=t.get(a);r&&r.filter((e=>l[e])).length>0&&(e=0),l[a]=e}}))}}catch(l){throw console.error(e,t),l}}function z(e,t,n){if(null==n)e.has(t)||e.set(t,null);else if(e.has(t)){const a=e.get(t);null==a?e.set(t,[n]):a.includes(n)||e.get(t).push(n)}else e.set(t,[n])}function Z(e){const t=(""+e).split(".");return t.length>1?t[1].length:0}function K(e,t){const n=Z(e)+Z(t),a=Number((""+e).replace(".","")),l=Number((""+t).replace(".","")),r=a*l/Math.pow(10,n);return Number(r)}function G(e,t,n){const a=Math.pow(10,Math.max(Z(e),Z(t)));let l=(K(e,a)+K(t,a))/a;return void 0!=n&&(l=Math.min(l,n)),l}const $=function(e,t=null){const n=[],a=new RegExp("([\\+\\-\\*/]?)([^\\+\\-\\*/]+)(.*)");let l=String(e);while(1){const e=a.exec(l);if(!e){n.push(l);break}if(e[1]&&n.push(e[1]),n.push(J(e[2],t)),!e[3])break;l=e[3]}return n};function J(e,t=null){const n=[];if((0,l.hj)(e))n.push(Number(e));else{const a=e.split("%");1==a.length?n.push(a[0]):(n.push(Number(a[0])/100),n.push("*"),a[1].length>0?n.push(a[1]):null!=t&&n.push(t))}return n}function Q(e,t,n){sessionStorage.setItem("character",e),t&&sessionStorage.setItem("buildname",t),n&&sessionStorage.setItem("builddata",JSON.stringify(n))}},3550:function(e,t,n){n.d(t,{$Y:function(){return u},Cb:function(){return j},FX:function(){return E},GN:function(){return A},Ml:function(){return T},Nd:function(){return O},PW:function(){return H},X9:function(){return M},_9:function(){return d},_J:function(){return m},bw:function(){return a},bx:function(){return y},dr:function(){return D},i7:function(){return S},k9:function(){return N},oN:function(){return o},qy:function(){return k},tm:function(){return _},vN:function(){return P}});n(7658);var a=n(8667),l=n(7722),r=n(1930),s=n(7849),i=n(2364),c=n(1003),o=n(5678),u=n(2124),m=n(3185),f=n(8970),d=n(6385),h=n(5093),p=n(9286),g=n(8846),b=n(7646);const y="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7";function v(e){if(e.icon_url)return e.icon_url;if(e.image)return e.image;if(e.import){let t=e.import.replace("data/","images/");return-1!=t.indexOf("characters/")&&(t=t.replace("characters/","characters/face/")),t=t.replace(/json$/,"png"),t}return null}const k=[];Object.keys(a).forEach((e=>{const t=a[e];t.key=e,t.icon_url=v(t),k.push(t)}));const O={"片手剣":l,"両手剣":r,"長柄武器":s,"弓":i,"法器":c};Object.keys(O).forEach((e=>{const t=O[e];Object.keys(t).forEach((e=>{const n=t[e];n.key=e,n.icon_url=v(n)}))}));Object.keys(l).map((e=>l[e])),Object.keys(r).map((e=>r[e])),Object.keys(s).map((e=>s[e])),Object.keys(i).map((e=>i[e])),Object.keys(c).map((e=>c[e]));const w=[];Object.keys(o).forEach((e=>{const t=o[e];t.key=e,t.icon_url=v(t),w.push(t)}));Object.keys(u[5]),Object.keys(m);for(const W of Object.keys(f))for(const e of Object.keys(f[W]))f[W][e]>=1e3&&(f[W][e]=1/0);const E=Object.keys(f).map((e=>({key:e,...f[e]}))),C=(Object.keys(d).map((e=>({key:e,...d[e]}))),Object.keys(h).map((e=>({key:e,...h[e]}))),Object.keys(p).map((e=>({key:e,...p[e]}))),Object.keys(g).map((e=>({key:e,...g[e]}))),Object.keys(b).map((e=>({key:e,...b[e]}))),new Map);async function _(e){try{if(!C.has(e)){const t=a[e]["import"].replace(/^\//,""),n=await fetch(t).then((e=>e.json())),l=a[e].武器;n.通常攻撃.icon_url=N[l],C.set(e,n)}return C.get(e)}catch(t){throw console.error(e),t}}const V=new Map;async function S(e,t){try{if(!V.has(e)){let n;n=t?[t]:Object.keys(O);for(const t of n)if(e in O[t]){const n=O[t],a=n[e]["import"],l=await fetch(a).then((e=>e.json()));l.種類=t,V.set(e,l);break}}return V.get(e)}catch(n){throw console.error(e,t),n}}const M={"炎":"pyro","水":"hydro","風":"anemo","雷":"electro","草":"dendro","氷":"cryo","岩":"geo"},j={"炎":"pyro-bg","水":"hydro-bg","風":"anemo-bg","雷":"electro-bg","草":"dendro-bg","氷":"cryo-bg","岩":"geo-bg"},A={"炎":"images/element_pyro.png","水":"images/element_hydro.png","風":"images/element_anemo.png","雷":"images/element_electro.png","草":"images/element_dendro.png","氷":"images/element_cryo.png","岩":"images/element_geo.png"},N={"片手剣":"images/characters/NormalAttack_sword.png","両手剣":"images/characters/NormalAttack_claymore.png","長柄武器":"images/characters/NormalAttack_polearm.png","弓":"images/characters/NormalAttack_bow.png","法器":"images/characters/NormalAttack_catalyst.png"},D={1:"star1-bg",2:"star2-bg",3:"star3-bg",4:"star4-bg",5:"star5-bg"},H=new Map([["キャラクター",null],["レベル",null],["命ノ星座",0],["通常攻撃レベル",0],["元素スキルレベル",0],["元素爆発レベル",0],["武器",null],["武器レベル",0],["精錬ランク",0],["聖遺物セット効果1",null],["聖遺物セット効果2",null],["聖遺物メイン効果1",null],["聖遺物メイン効果2",null],["聖遺物メイン効果3",null],["聖遺物メイン効果4",null],["聖遺物メイン効果5",null],["聖遺物サブ効果HP",0],["聖遺物サブ効果攻撃力",0],["聖遺物サブ効果防御力",0],["聖遺物サブ効果元素熟知",0],["聖遺物サブ効果会心率",0],["聖遺物サブ効果会心ダメージ",0],["聖遺物サブ効果元素チャージ効率",0],["聖遺物サブ効果HPP",0],["聖遺物サブ効果攻撃力P",0],["聖遺物サブ効果防御力P",0],["聖遺物優先するサブ効果1",null],["聖遺物優先するサブ効果1上昇値",-1],["聖遺物優先するサブ効果1上昇回数",-1],["聖遺物優先するサブ効果2",null],["聖遺物優先するサブ効果2上昇値",-1],["聖遺物優先するサブ効果2上昇回数",-1],["聖遺物優先するサブ効果3",null],["聖遺物優先するサブ効果3上昇値",-1],["聖遺物優先するサブ効果3上昇回数",-1]]),P=["通常攻撃ダメージ","重撃ダメージ","落下攻撃ダメージ","元素スキルダメージ","元素爆発ダメージ"],x=(new Map([["HP%","HP"],["元素熟知","熟"],["元素チャージ効率","ﾁｬ"],["会心率","率"],["会心ダメージ","ダ"],["与える治療効果","治"]]),new Map([["HP%","HP"],["攻撃力%","AT"],["防御力%","DF"],["元素熟知","EM"],["会心率","CR"],["会心ダメージ","CD"],["元素チャージ効率","ER"],["与える治療効果","HE"],["炎元素ダメージバフ","Py"],["水元素ダメージバフ","Hy"],["風元素ダメージバフ","An"],["雷元素ダメージバフ","El"],["草元素ダメージバフ","De"],["氷元素ダメージバフ","Cr"],["岩元素ダメージバフ","Ge"],["物理ダメージバフ","Ph"]]),new Map([["HP","HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","ElementalMastery"],["会心率","CritRate"],["会心ダメージ","CritDMG"],["元素チャージ効率","EnergyRecharge"],["炎元素ダメージバフ","Pyro"],["水元素ダメージバフ","Hydro"],["風元素ダメージバフ","Anemo"],["雷元素ダメージバフ","Electro"],["草元素ダメージバフ","Dendro"],["氷元素ダメージバフ","Cryo"],["岩元素ダメージバフ","Geo"],["物理ダメージバフ","Physical"],["与える治療効果","Healing"],["HP%","HPp"],["攻撃力%","ATKp"],["防御力%","DEFp"]])),I=new Map;x.forEach(((e,t)=>{I.set(e,t)}));const T=[{key:"",values:[7,7,7],counts:[0,0,0]},{key:"厳選初心者",values:[3,3,3],counts:[7,4,4]},{key:"厳選1ヶ月",values:[3,3,3],counts:[8,5,5]},{key:"厳選3ヶ月",values:[3,3,3],counts:[11,8,7]},{key:"日々石割り",values:[1,1,1],counts:[14,11,10]}]},7104:function(e,t,n){var a=n(9242),l=n(3396),r=n(7139);const s=e=>((0,l.dD)("data-v-6ec08632"),e=e(),(0,l.Cn)(),e),i={class:"base-container"},c={class:"pane1"},o={class:"display-stat-select"},u=["value"],m={class:"number-of-teams"},f=["min"],d={class:"data-control"},h=["disabled"],p={class:"pane2"},g={class:"pane3"},b=s((()=>(0,l._)("hr",null,null,-1))),y=(0,l.uE)('<div class="pane4" data-v-6ec08632></div><div class="footer" data-v-6ec08632><hr data-v-6ec08632><h2 data-v-6ec08632>チーム編成 Ver.0.1.2</h2><ul class="usage" data-v-6ec08632><li data-v-6ec08632>右上の◆のドラッグ＆ドロップでチームの並べ替えができます。</li></ul><p data-v-6ec08632><a href="./" data-v-6ec08632>げんかるく - 原神ダメージシミュレーター</a>   <a href="./TeamOptionList.html" data-v-6ec08632>強化・弱体効果一覧</a></p></div>',2);function v(e,t,n,s,v,k){const O=(0,l.up)("TeamItem"),w=(0,l.up)("draggable"),E=(0,l.up)("CharacterSelectModal"),C=(0,l.up)("TeamRotation");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",c,[(0,l._)("fieldset",null,[(0,l._)("div",o,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.DISPLAY_STAT_LIST,(n=>((0,l.wg)(),(0,l.iD)("label",{class:"display-stat",key:n[1]},[(0,l.wy)((0,l._)("input",{class:"hidden",type:"radio",name:"display-stat","onUpdate:modelValue":t[0]||(t[0]=t=>e.displayStat=t),value:n[0]},null,8,u),[[a.G2,e.displayStat]]),(0,l._)("span",null,(0,r.zw)(n[1]),1)])))),128))]),(0,l._)("label",m,[(0,l.Uk)(" Number of teams "),(0,l.wy)((0,l._)("input",{type:"number",min:e.NUMBER_OF_TEAMS,"onUpdate:modelValue":t[1]||(t[1]=t=>e.numberOfTeams=t),onChange:t[2]||(t[2]=(...t)=>e.numberOfTeamsOnChange&&e.numberOfTeamsOnChange(...t))},null,40,f),[[a.nr,e.numberOfTeams]])]),(0,l._)("div",d,[(0,l._)("button",{type:"button",disabled:e.saveDisabled,onClick:t[3]||(t[3]=(...t)=>e.saveOnClick&&e.saveOnClick(...t))}," Save ",8,h),(0,l._)("button",{type:"button",onClick:t[4]||(t[4]=(...t)=>e.clearOnClick&&e.clearOnClick(...t))},"Clear")])])]),(0,l._)("div",p,[(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(w,{list:e.teams,"item-key":"id",sort:!0,handle:".handle"},{item:(0,l.w5)((({element:t})=>[(0,l.Wm)(O,{team:t,selected:e.teamSelected(t.id),displayStat:e.displayStat,onClick:n=>e.teamOnClick(t.id),"onChange:name":e.teamNameOnChange,"onChange:buildname":e.buildnameOnChange,"onClick:character":n=>e.characterOnClick(t)},null,8,["team","selected","displayStat","onClick","onChange:name","onChange:buildname","onClick:character"])])),_:1},8,["list"])],512),[[a.F8,!e.characterSelectVisible]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(E,{visible:e.characterSelectVisible,members:e.forcusedMembers,"onClick:cancel":t[5]||(t[5]=t=>e.characterSelectVisible=!1),"onClick:ok":e.updateCharacters},null,8,["visible","members","onClick:ok"])],512),[[a.F8,e.characterSelectVisible]])]),(0,l._)("div",g,[b,e.teams[e.selectedTeamId]?((0,l.wg)(),(0,l.j4)(C,{key:0,team:e.teams[e.selectedTeamId]},null,8,["team"])):(0,l.kq)("",!0)]),y])}n(7658);var k=n(6983),O=n.n(k),w=n(4870),E=n(589),C=n(5983),_=n(2986),V=n(3550);const S=10,M=4;function j(e){let t;return e.name&&e.name in V.bw&&(t=V.bw[e.name]),t}function A(e){const t=e.split("_"),n=t[1];let a;return t.splice(0,2),a=t.length>0?t.join("_"):(0,_.K1)(n),a}function N(e){return Object.keys(localStorage).filter((t=>t.startsWith((0,_.R4)(e))))}function D(e,t){let n;const a=(0,_.R4)(e,t),l=localStorage.getItem(a);return l&&(n=JSON.parse(l)),n}const H={class:"title"},P={class:"name"},x=(0,l._)("span",{class:"handle"},"◆",-1),I={key:0},T={key:1},W={class:"elemental-resonance"},R=["src"],F={class:"members"};function X(e,t,n,s,i,c){const o=(0,l.up)("MemberItem");return(0,l.wg)(),(0,l.iD)("div",{class:(0,r.C_)("team"+e.selectedClass)},[(0,l._)("div",H,[(0,l._)("label",P,[x,e.editable?((0,l.wg)(),(0,l.iD)("span",I,[(0,l.wy)((0,l._)("input",{type:"text",minlength:"1",maxlength:"16","onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),placeholder:"INPUT TEAM NAME",onChange:t[1]||(t[1]=(...t)=>e.nameOnChange&&e.nameOnChange(...t))},null,544),[[a.nr,e.name]]),(0,l._)("span",{class:"button material-symbols-outlined",onClick:t[2]||(t[2]=t=>e.editable=!1)}," edit_off ")])):((0,l.wg)(),(0,l.iD)("span",T,[(0,l._)("span",null,(0,r.zw)(e.name),1),(0,l._)("span",{class:"button material-symbols-outlined",onClick:t[3]||(t[3]=t=>e.editable=!0)}," edit ")]))]),(0,l._)("div",W,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.resonanceElementImgSrcs,(e=>((0,l.wg)(),(0,l.iD)("img",{class:"elemental-resonance",key:e,src:e,alt:"resonance"},null,8,R)))),128))])]),(0,l._)("div",F,[(0,l._)("table",null,[(0,l._)("tr",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.team.members,(t=>((0,l.wg)(),(0,l.iD)("td",{key:t.id},[(0,l.Wm)(o,{member:t,statsObj:e.memberStats[t.id],displayStat:e.displayStat,showEquipment:!0,viewable:!0,members:e.team.members.map((e=>e.name)),elementalResonance:e.elementalResonance,"onClick:character":e.characterOnClick,"onChange:buildname":e.changeBuildname},null,8,["member","statsObj","displayStat","members","elementalResonance","onClick:character","onChange:buildname"])])))),128))])])])],2)}const q={class:"member"},B={class:"with-tooltip"},L=["src","alt"],U={class:"tooltip"},Y=["src"],z={key:0,class:"tag tag-3"},Z={key:1,class:"tag tag-2"},K={key:2,class:"tag tag-1"},G={key:3,class:"tag tag-0"},$={key:0,class:"stat-value"},J={key:1},Q=["src"],ee=["src"],te=["src"],ne={class:"extra-control"},ae={key:0};function le(e,t,n,s,i,c){return(0,l.wg)(),(0,l.iD)("div",q,[(0,l._)("div",{class:"member-img",onClick:t[0]||(t[0]=(...t)=>e.characterOnClick&&e.characterOnClick(...t))},[(0,l._)("div",B,[(0,l._)("img",{class:(0,r.C_)("character"+e.characterImgClass),src:e.characterImgSrc,alt:e.displayName(e.member.name)},null,10,L),(0,l._)("span",U,(0,r.zw)(e.displayName(e.member.name)),1)]),(0,l._)("img",{class:"vision",src:e.visionImgSrc,alt:"vision"},null,8,Y),(0,l.wy)((0,l._)("div",{class:"constellation"},(0,r.zw)(e.constellation),513),[[a.F8,e.constellation]]),e.member.tags[3]?((0,l.wg)(),(0,l.iD)("div",z,(0,r.zw)(e.member.tags[3]),1)):(0,l.kq)("",!0),e.member.tags[2]?((0,l.wg)(),(0,l.iD)("div",Z,(0,r.zw)(e.member.tags[2]),1)):(0,l.kq)("",!0),e.member.tags[1]?((0,l.wg)(),(0,l.iD)("div",K,(0,r.zw)(e.member.tags[1]),1)):(0,l.kq)("",!0),e.member.tags[0]?((0,l.wg)(),(0,l.iD)("div",G,(0,r.zw)(e.member.tags[0]),1)):(0,l.kq)("",!0)]),e.displayStat?((0,l.wg)(),(0,l.iD)("div",$,(0,r.zw)(e.statValue),1)):(0,l.kq)("",!0),e.showEquipment?((0,l.wg)(),(0,l.iD)("div",J,[(0,l._)("img",{class:"weapon",src:e.imgWeaponSrc,alt:"weapon"},null,8,Q),(0,l._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(0),alt:"artifact-set"},null,8,ee),(0,l._)("img",{class:"artifact-set",src:e.imgArtifactSetSrc(1),alt:"artifact-set"},null,8,te)])):(0,l.kq)("",!0),(0,l._)("div",ne,[e.viewable&&"locate"==e.extraControl?((0,l.wg)(),(0,l.iD)("div",ae,[(0,l._)("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>e.locate&&e.locate(...t))},"view")])):(0,l.kq)("",!0)])])}var re=(0,l.aZ)({name:"MemberItem",props:{member:{type:Object,required:!0},statsObj:{type:Object},displayStat:{type:String},showEquipment:{type:Boolean},viewable:{type:Boolean},tags:{type:Array},members:{type:Array},elementalResonance:{type:Array}},emits:["click:character","change:buildname"],setup(e,t){const{displayName:n,displayStatValue:a}=(0,E.Z)(),r=(0,w.iH)("locate"),s=(0,w.iH)(0);(0,l.YP)(e,(async e=>{console.log(e.statsObj),s.value++}));const i=(0,l.Fl)((()=>e.member.name?V.bw[e.member.name]??void 0:void 0)),c=(0,l.Fl)((()=>i.value?.icon_url??V.bx)),o=(0,l.Fl)((()=>{const e=i.value?.レアリティ;return e?" "+V.dr[String(e)]:""})),u=(0,l.Fl)((()=>i.value?.元素?V.GN[i.value.元素]:V.bx)),m=(0,l.Fl)((()=>b.value?b.value.命ノ星座:"")),f=(0,l.Fl)((()=>y.value?y.value.icon_url:V.bx)),d=(0,l.Fl)((()=>y.value?y.value.key:"")),h=e=>v.value[e]?.image??V.bx,p=e=>v.value[e]?.key??"",g=()=>{t.emit("click:character")},b=(0,l.Fl)((()=>{let t;const n=e.member.name;return n&&e.member.buildname&&(t=D(n,e.member.buildname)),t})),y=(0,l.Fl)((()=>{let e;if(b.value){const t=b.value.武器;t&&i.value&&(e=V.Nd[i.value.武器][t])}return e})),v=(0,l.Fl)((()=>{const e=[];if(b.value)for(let t=0;t<2;t++){const n="聖遺物セット効果"+(t+1);let a=b.value[n]??"NONE";e.push(V.oN[a])}return e})),k=(0,l.Fl)((()=>{s.value;let t="-";if(b.value){let n=e.displayStat;e.statsObj&&n&&("会心率/ダメージ"===n?(t=a("会心率",e.statsObj["会心率"]),t+="/",t+=a("会心ダメージ",e.statsObj["会心ダメージ"])):t=a(n,e.statsObj[n]))}return t})),O=()=>{const t=e.member;(0,_.Ac)(t.name,e.member.buildname),window.open("./","_blank")};return{displayName:n,characterImgSrc:c,characterImgClass:o,visionImgSrc:u,constellation:m,imgWeaponSrc:f,weaponName:d,imgArtifactSetSrc:h,artifactSetName:p,statValue:k,extraControl:r,locate:O,characterOnClick:g}}}),se=n(89);const ie=(0,se.Z)(re,[["render",le]]);var ce=ie;function oe(e,t){return t+_.iU[e][0]==t?"+":""}function ue(e,t,n){if(!e)return 0;const a=oe(t,n);if(a in e)return e[a];const l=_.iU[t][0],r=_.iU[t][_.iU[t].length-1],s=e[l+"+"],i=e[r];return s+(i-s)*(n-l)/(r-l)}function me(e,t){const n=_.iU[t][0];return e[n+"+"]}function fe(e,t){Object.keys(e).forEach((t=>{e[t]=0}));for(const n of t){if(!n)continue;const t=n.split("_");e[t[1]]+=V.$Y[t[0]][t[1]]}}function de(e){const t=e.聖遺物ステータス,n=e.聖遺物ステータスメイン効果,a=e.聖遺物ステータスサブ効果;for(const l of Object.keys(t))t[l]=0;for(const l of Object.keys(n))l in t?t[l]+=n[l]:t[l]=n[l];for(const l of Object.keys(a))l in t?t[l]+=a[l]:t[l]=a[l]}const he=function(e,t,n,a,l){if(t&&n&&a&&l)try{const r=t.characterMaster,s=t.突破レベル,i=t.レベル,c=t.命ノ星座,o=t.weaponMaster,u=t.武器突破レベル,m=t.武器レベル,f=(0,C.X8)(_.q2);if(f["突破レベル"]=s,f["レベル"]=i,f["命ノ星座"]=c,f["元素"]=r.元素,"元素エネルギー"in r["元素爆発"]&&(f["元素エネルギー"]=r["元素爆発"]["元素エネルギー"]),"固有変数"in r)for(const e of Object.keys(r["固有変数"]))e in a.conditionValues?f[e]=Number(a.conditionValues[e]):f[e]=r["固有変数"][e];for(const t of Object.keys(e.enemyMaster).filter((e=>"key"!=e))){const n="敵"+t;f[n]=e.enemyMaster[t]}Object.keys(e.statAdjustments).forEach((t=>{t in f&&(f[t]+=e.statAdjustments[t])}));for(const e of Object.keys(r["ステータス"]))if(_.Vd.includes(e))f[e]+=ue(r["ステータス"][e],s,i);else{const t=["HP","攻撃力","防御力"].includes(e)?e+"+":e;t in f&&(f[t]+=me(r["ステータス"][e],s))}for(const e of Object.keys(o["ステータス"]))f[e]+=ue(o["ステータス"][e],u,m);const d=n.聖遺物ステータス;for(const e of Object.keys(d)){const t=["HP","攻撃力","防御力"].includes(e)?e+"+":e;f[t]+=d[e]}let h="法器"==r.武器?r.元素:"物理",p="法器"==r.武器?r.元素:"物理",g="法器"==r.武器?r.元素:"物理";l&&[l.elementalResonance,l.teamOption,l.miscOption].forEach((e=>{e&&Object.keys(e.conditionAdjustments).forEach((t=>{if(e.conditionAdjustments[t]===1/0&&t.endsWith("元素付与")&&["片手剣","両手剣","長柄武器"].includes(r.武器)){const e=t.replace(/元素付与$/,"");h=e,p=e,g=e}if(t in f?f[t]+=e.conditionAdjustments[t]:f[t]=e.conditionAdjustments[t],t.endsWith("V1")||t.endsWith("V2")||t.endsWith("V3")){const n=t.replace(/V[1-3]$/,"");n in f?f[n]+=e.conditionAdjustments[t]:f[n]=e.conditionAdjustments[t]}}))}));const b=ve(a),y=pe(t,b,f);for(const e of[t.damageDetailMyCharacter,t.damageDetailMyWeapon,t.damageDetailMyArtifactSets])if(e&&_.yL in e)for(const t of e[_.yL]){if(t["条件"]){const e=ke(t["条件"],b,c);if(0==e)continue}if(t["種類"]&&t["種類"].endsWith("元素付与")){const e=t["種類"].replace("元素付与","");t["対象"]?"通常攻撃ダメージ"==t["対象"]?h=e:"重撃ダメージ"==t["対象"]?p=e:"落下攻撃ダメージ"==t["対象"]&&(g=e):(h=e,p=e,g=e)}}a.攻撃元素=[h,p,g],(0,C.fX)(e.statsObj,f),(0,C.fX)(a.conditionAdjustments,y)}catch(r){throw console.error(e,t,n,a,l),r}};function pe(e,t,n){const a=e.命ノ星座,l={},r=new Map;for(const m of[e.damageDetailMyCharacter,e.damageDetailMyWeapon,e.damageDetailMyArtifactSets])if(m&&_.e2 in m)for(const e of m[_.e2]){let n=!1,l=e["数値"];if(e["条件"]){const r=ke(e.条件,t,a);if(0==r)continue;1!=r&&(l=l.concat(["*",r])),n=!0}let s=e["種類"];s&&(e["対象"]&&(s+="."+e["対象"]),r.has(s)||r.set(s,[]),r.get(s)?.push([s,l,e.上限,e.下限,n]))}const s=["基礎HP","HP%","HP+","HP上限"],i=["基礎防御力","防御力%","防御力+","防御力"],c=["基礎攻撃力","攻撃力%","攻撃力+","攻撃力"],o=[..._.U3,..._.tH,..._.Em,..._.wB,..._.uc,"ダメージ軽減"];o.push(...Array.from(r.keys()).filter((e=>-1!=e.indexOf("ダメージバフ.")))),o.push(...Array.from(r.keys()).filter((e=>-1!=e.indexOf("ダメージアップ."))));const u=[...new Set(Array.from(r.keys()).map((e=>e.replace(/V[1-3]$/,""))))].filter((e=>![...s,...i,...c,...o].includes(e)));u.sort(be);for(const m of s){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),ge(l,n,r,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}n["HP上限"]+=n["基礎HP"]+n["HP+"],n["HP上限"]+=n["基礎HP"]*n["HP%"]/100;for(const m of u){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),ge(l,n,r,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}for(const m of i){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),ge(l,n,r,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}n["防御力"]+=n["基礎防御力"]+n["防御力+"],n["防御力"]+=n["基礎防御力"]*n["防御力%"]/100;for(const m of c){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),ge(l,n,r,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}n["攻撃力"]+=n["基礎攻撃力"]+n["攻撃力+"],n["攻撃力"]+=n["基礎攻撃力"]*n["攻撃力%"]/100;for(const m of o){const e={};["V1","V2","V3"].forEach((t=>{const a=m+t;e[a]=a in n?n[a]:0})),ge(l,n,r,m),["V1","V2","V3"].forEach((t=>{const a=m+t;n[a]&&(m in n?n[m]+=n[a]-e[a]:n[m]=n[a]-e[a])}))}return l}function ge(e,t,n,a){for(const l of[n.get(a),...["V1","V2","V3"].map((e=>n.get(a+e)))])l&&l.forEach((n=>{const a=Ee(t,n[0],n[1],n[2],n[3]);if(n[4])for(const t of Object.keys(a))t in e?e[t]+=a[t]:e[t]=a[t]}))}function be(e,t){const n=["元素熟知","会心率","会心ダメージ","与える治療効果","受ける治療効果","元素チャージ効率","シールド強化"],a=["ダメージ軽減"];let l=n.indexOf(e);a.indexOf(e)>=0&&(l=n.length+1);let r=n.indexOf(t);return a.indexOf(t)>=0&&(r=n.length+1),(-1!=l?l:n.length)-(-1!=r?r:n.length)}const ye=function(e,t,n,a=null,l=null){try{let r=0;const s=/(.+)X([0-8])$/;if(Array.isArray(e)){let i=null;for(const c of e){let o=0;if(["+","-","*","/"].includes(c))i=c;else{if((0,C.hj)(c))o=Number(c);else if(Array.isArray(c))o=ye(c,t,n);else if(-1!=c.indexOf("#")){const r=c.split("#");if(n&&r[0]in n){const s=n[r[0]];let i=null;for(const e of s)if(r[1]==e[0]){i=e[4];break}null!=i?o=i:console.error(e,t,n,a,l,c)}}else{const n=s.exec(c);if(n){const r=n[1];if(r in t){o=t[r];let e=Number(n[2]);e%2==1&&r+"V1"in t&&(o-=t[r+"V1"]),e=Math.trunc(e/2),e%2==1&&r+"V2"in t&&(o-=t[r+"V2"]),e=Math.trunc(e/2),e%2==1&&r+"V3"in t&&(o-=t[r+"V3"])}else console.error(e,t,null,a,l)}else c in t?o=t[c]:console.error(e,t,null,a,l)}if(null==i)r+=o;else switch(i){case"+":r+=o;break;case"-":r-=o;break;case"*":r*=o,r=Math.floor(100*r)/100;break;case"/":r/=o;break}}}}else if((0,C.hj)(e))r=Number(e);else{const n=s.exec(e);if(n){const s=n[1];if(s in t){r=t[s];let e=Number(n[2]);e%2==1&&s+"V1"in t&&(r-=t[s+"V1"]),e=Math.trunc(e/2),e%2==1&&s+"V2"in t&&(r-=t[s+"V2"]),e=Math.trunc(e/2),e%2==1&&s+"V3"in t&&(r-=t[s+"V3"])}else console.error(e,t,null,a,l)}else e in t?r=t[e]:console.error(e,t,null,a,l)}if(null!=a){const e=ye(a,t,n);r=Math.min(r,e)}if(null!=l){const e=ye(l,t,n);r=Math.max(r,e)}return r}catch(r){throw console.error(e,t,n,a,l),r}};function ve(e){try{const t=[];if(!e)return t;const n=e.checkboxList;n&&n.forEach((n=>{e.conditionValues[n.name]&&t.push(n.name)}));const a=e.selectList;return a&&a.forEach((n=>{const a=e.conditionValues[n.name];void 0!==a&&null!==a&&(a>0||0==a&&n.required)&&t.push(n.name+"@"+n.options[a])})),t}catch(t){throw console.error(e),t}}const ke=function(e,t,n){const a=e.split("^")[0];if(-1!=a.indexOf("|")){const e=a.split("|");for(let a=0;a<e.length;a++){const l=Oe(e[a],t,n);if(1==l)return 1}return 0}const l=a.split("&");let r=1;for(let s=0;s<l.length;s++){const e=Oe(l[s],t,n);if(0==e)return 0;1!=e&&(r=e)}return r};function Oe(e,t,n){const a=e.split(/[@=]/);if("命ノ星座"==a[0]){if(2==a.length&&(0,C.hj)(a[1])){const e=Number(a[1]);if(e<=n)return 1}return 0}if(t.includes(e)||t.includes(e.replace("=","@")))return 1;if(1==a.length)return t.filter((t=>t.split("@")[0]==e)).length>0?1:0;if(-1!=e.indexOf("="))return 0;const l=new RegExp("[^0-9]*?([\\-0-9\\.]+).*");for(let r=0;r<t.length;r++)if(t[r].startsWith(a[0]+"@")){const e=t[r].split("@"),n=l.exec(e[1]);if(n){const e=Number(n[1]);return e}}return 0}const we=["炎","水","風","雷","草","氷","岩"];function Ee(e,t,n,a=null,l=null){const r=ye(n,e,_.US,a,l);(0,C.hj)(r)||console.error(e,t,n,r);const s=[];"HP"==t?s.push("HP上限"):t.startsWith("自元素")?s.push(t.replace(/^自/,String(e["元素"]))):t.startsWith("全元素")?we.forEach((e=>{s.push(t.replace(/^全/,e))})):t.startsWith("敵自元素")?s.push(t.replace(/^敵自/,"敵"+String(e["元素"]))):t.startsWith("敵全元素")?we.forEach((e=>{s.push(t.replace(/^敵全/,"敵"+e))})):s.push(t);const i={};s.forEach((e=>{i[e]=r}));for(const c of Object.keys(i))c in e?c.startsWith("別枠乗算")&&i[c]>0?e[c]*=i[c]/100:e[c]+=i[c]:e[c]=i[c];return console.debug(Ee.name,null,t,n,"=>",i),i}var Ce=(0,l.aZ)({name:"TeamItem",props:{team:{type:Object,required:!0},selected:{type:Boolean,requied:!0},displayStat:{type:String}},emits:["change:name","click:character","change:buildname"],components:{MemberItem:ce},setup(e,t){const{displayName:n}=(0,E.Z)(),a=(0,w.qj)({}),r=(0,w.iH)(0);(0,l.YP)(e,(async e=>{c.value=e.team.name;for(const t of e.team.members){const e=await f(t);a[t.id]=e.statsInput?.statsObj}r.value++}));const s=(0,l.Fl)((()=>e.selected?" selected":"")),i=(0,w.iH)(!1),c=(0,w.iH)(e.team.name),o=()=>{t.emit("change:name",e.team.id,c)},u=(0,l.Fl)((()=>{const t=[],n={},a=e.team.members.filter((e=>e.name));return 4==a.length&&(a.forEach((e=>{const t=j(e);t&&(t.元素 in n?n[t.元素]++:n[t.元素]=1)})),4==Object.keys(n).length?t.push("元素共鳴なし"):Object.keys(n).forEach((e=>{n[e]>=2&&t.push(e+"元素共鳴")}))),t})),m=(0,l.Fl)((()=>{const t=[];return u.value.forEach((n=>{if("元素共鳴なし"==n){const n=e.team.members.filter((e=>e.name));n.forEach((e=>{const n=V.bw[e.name],a=V.GN[n.元素];t.push(a)}))}else{const e=V.GN[n.replace("元素共鳴","")];t.push(e),t.push(e)}})),t})),f=async t=>{const n=(0,C.X8)(_.Hd),a=(0,C.X8)(_.HN),l=(0,C.X8)(_.NY),r=(0,C.X8)(_.wX),s=(0,C.X8)(_.HO),i={characterInput:n,artifactDetailInput:a,conditionInput:l,optionInput:r,statsInput:s};if(!t.name)return i;let c;n.character=t.name,n.characterMaster=await(0,V.tm)(n.character);const o=t.name;if(o&&t.buildname&&(c=D(o,t.buildname)),!c)return i;await(0,_.pS)(n,a,l,r,c),(0,_.ge)(n),(0,_.Cl)(n),(0,_.Vk)(n),(0,_.Hk)(l,n,r),fe(a.聖遺物ステータスメイン効果,a.聖遺物メイン効果),de(a),l.checkboxList.forEach((e=>{l.conditionValues[e.name]=!1})),l.selectList.forEach((e=>{l.conditionValues[e.name]=0}));const m=n.characterMaster.元素,f={};if(e.team.members&&e.team.members.filter((e=>e.name)).forEach((e=>{const t=V.bw[e.name].元素;t in f?f[t]++:f[t]=1})),"夜蘭"==n.character)l.conditionValues["先後の決め手"]=Object.keys(f).length;else if("雲菫"==n.character)l.conditionValues["独立嶄然"]=Object.keys(f).length-1;else if("ゴロー"==n.character){const e=Math.min(3,f[m]);l.conditionValues["犬勇·忠に厚きこと山の如く 岩元素ダメージ 会心ダメージ"]=e}if(["千岩古剣","千岩長槍"].includes(n.weapon)){if(e.team.members){let t=0;for(const n of e.team.members.filter((e=>e))){const e=await(0,V.tm)(n.name);e.region&&["璃月港"].includes(e.region)&&t++}const a="["+n.weapon+"]璃月キャラ1人毎に攻撃力と会心率+";l.conditionValues[a]=t}}else if(["惡王丸","斬波のひれ長","曚雲の月"].includes(n.weapon)&&e.team.members){let t=0;for(const n of e.team.members.filter((e=>e))){const e=await(0,V.tm)(n.name);"元素エネルギー"in e.元素爆発&&(t+=e.元素爆発.元素エネルギー)}t>=40&&["0.12","0.15","0.18","0.21","0.24"].forEach((e=>{const a="["+n.weapon+"]元素爆発ダメージ+"+e+"%×元素エネルギー";l.conditionValues[a]=Math.round((t-40)/10)+1}))}if(u.value){const e={};u.value.filter((e=>["炎元素共鳴","水元素共鳴","草元素共鳴","元素共鳴なし"].includes(e))).forEach((t=>{if(r.elementalResonance.conditionValues[t]=!0,"詳細"in V._9[t]){const n=V._9[t].詳細;if(n)for(const t of n)"種類"in t&&"数値"in t&&(t.種類 in e?e[t.種類]+=t.数値:e[t.種類]=t.数値)}})),(0,C.fX)(r.elementalResonance.conditionAdjustments,e)}return he(s,n,a,l,r),{characterInput:n,artifactDetailInput:a,conditionInput:l,optionInput:r,statsInput:s}},d=()=>{t.emit("click:character")},h=(n,a)=>{t.emit("change:buildname",e.team.id,n,a)};return{displayName:n,selectedClass:s,editable:i,name:c,memberStats:a,elementalResonance:u,resonanceElementImgSrcs:m,nameOnChange:o,characterOnClick:d,changeBuildname:h}}});const _e=(0,se.Z)(Ce,[["render",X]]);var Ve=_e;const Se=e=>((0,l.dD)("data-v-14ee9842"),e=e(),(0,l.Cn)(),e),Me=Se((()=>(0,l._)("hr",null,null,-1))),je={class:"tags"},Ae=["onClick"],Ne={class:"buildname-select"},De=["value"],He={class:"buttons"};function Pe(e,t,n,s,i,c){const o=(0,l.up)("CharacterSelect"),u=(0,l.up)("MemberItem");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(o,{visible:!0,characters:e.characters,"onUpdate:characters":e.updateCharacters},null,8,["characters","onUpdate:characters"]),Me,(0,l._)("div",je,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.TAG_LIST,(t=>((0,l.wg)(),(0,l.iD)("span",{class:"tag",key:t,onClick:n=>e.tagOnClick(t)},(0,r.zw)(t),9,Ae)))),128))]),(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.workMembers,(t=>((0,l.wg)(),(0,l.iD)("div",{class:(0,r.C_)("member"+e.memberSelectedClass(t.id)),key:t.id},[(0,l.Wm)(u,{member:t,onClick:n=>e.memberOnClick(t.id)},null,8,["member","onClick"])],2)))),128)),(0,l._)("div",Ne,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedMemberBuildname=t),onChange:t[1]||(t[1]=(...t)=>e.buildnameOnChange&&e.buildnameOnChange(...t))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.buildnames,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,r.zw)(e),9,De)))),128))],544),[[a.F8,e.buildnames.length],[a.bM,e.selectedMemberBuildname]])])]),(0,l._)("div",He,[(0,l._)("button",{type:"button",onClick:t[2]||(t[2]=(...t)=>e.cancelOnClick&&e.cancelOnClick(...t))},"cancel"),(0,l._)("button",{type:"button",onClick:t[3]||(t[3]=(...t)=>e.okOnClick&&e.okOnClick(...t))},"ok")])],64)}var xe=n(7167),Ie=(0,l.aZ)({name:"CharacterSelectModal",components:{CharacterSelect:xe.Z,MemberItem:ce},props:{visible:{type:Boolean,required:!0},members:{type:Array,required:!0}},emits:["click:cancel","click:ok"],setup(e,t){const n=(0,w.qj)([]),a=(0,w.iH)(-1),r=["FREE"],s=(0,w.iH)("");function i(){const t=[];for(let n=0;n<e.members.length;n++)t.push({id:n,name:e.members[n].name,buildname:e.members[n].buildname,savedata:e.members[n].savedata,tags:(0,C.X8)(e.members[n].tags)});n.splice(0,n.length,...t)}i(),(0,l.YP)(e,(e=>{e.members&&(i(),a.value>=0&&a.value<n.length&&(s.value=n[a.value].buildname))}));const c=(0,l.Fl)((()=>n.map((e=>e.name)))),o=e=>{for(let t=0;t<e.length;t++)if(n[t].name=e[t],n[t].name){const e=N(n[t].name).map((e=>A(e)));e.length?(n[t].buildname&&e.includes(n[t].buildname)||(n[t].buildname=(0,_.K1)(n[t].name)),t==a.value&&(s.value=n[t].buildname)):n[t].buildname=void 0}},u=e=>{if(a.value=e,a.value>=0&&a.value<n.length){const e=n[a.value];s.value=e.buildname}},m=e=>e==a.value?" selected":"",f=e=>{if(a.value<0||a.value>=n.length)return;const t=n[a.value];if(console.log(e,t),t&&t.name){const n=t.tags;n&&(n.includes(e)?n.splice(0,n.length,...n.filter((t=>t!=e))):n.push(e))}},d=(0,l.Fl)((()=>{let e=[];if(a.value>=0&&a.value<n.length){const t=n[a.value],l=t.name;if(l){e=N(l).map((e=>A(e)));const t=(0,_.K1)(l);if(e.includes(t)){const n=e.filter((e=>e!=t)).sort();n.length&&(e=[t,...n])}}}return e})),h=()=>{if(a.value<0||a.value>=n.length)return;const e=n[a.value];e.buildname=s.value},p=()=>{t.emit("click:cancel")},g=()=>{t.emit("click:ok",n)};return{characters:c,TAG_LIST:r,tagOnClick:f,workMembers:n,memberOnClick:u,memberSelectedClass:m,selectedMemberBuildname:s,buildnames:d,buildnameOnChange:h,updateCharacters:o,cancelOnClick:p,okOnClick:g}}});const Te=(0,se.Z)(Ie,[["render",Pe],["__scopeId","data-v-14ee9842"]]);var We=Te;const Re={class:"team-rotation"},Fe={class:"icon-list"},Xe={key:0,class:"action with-tooltip"},qe=["src","alt","onClick"],Be={class:"tooltip"},Le={key:1,class:"action with-tooltip"},Ue=["src","alt","onClick"],Ye={class:"tooltip"},ze={class:"rotation-list"},Ze={class:"index"},Ke=["src","alt"],Ge=["src","alt"],$e={class:"information"},Je={class:"control"},Qe=["onClick"];function et(e,t,n,a,s,i){const c=(0,l.up)("draggable");return(0,l.wg)(),(0,l.iD)("div",Re,[(0,l._)("fieldset",Fe,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.team.members,(t=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t.id},[e.getElementalSkillDetail(t)?((0,l.wg)(),(0,l.iD)("div",Xe,[(0,l._)("img",{class:"action-icon",src:e.getElementalSkillDetail(t).icon_url,alt:e.displayName(e.getElementalSkillDetail(t).名前),onClick:n=>e.actionOnClick(t,"E")},null,8,qe),(0,l._)("span",Be,(0,r.zw)(e.displayName(t.name))+" "+(0,r.zw)(e.displayName("元素スキル")),1)])):(0,l.kq)("",!0),e.getElementalBurstDetail(t)?((0,l.wg)(),(0,l.iD)("div",Le,[(0,l._)("img",{class:"action-icon",src:e.getElementalBurstDetail(t).icon_url,alt:e.displayName(e.getElementalBurstDetail(t).名前),onClick:n=>e.actionOnClick(t,"Q")},null,8,Ue),(0,l._)("span",Ye,(0,r.zw)(e.displayName(t.name))+" "+(0,r.zw)(e.displayName("元素爆発")),1)])):(0,l.kq)("",!0)],64)))),128))]),(0,l._)("fieldset",ze,[(0,l.Wm)(c,{list:e.rotationList,"item-key":"id",sort:!0,handle:".handle"},{item:(0,l.w5)((({element:t,index:n})=>[e.actionDetail(t)?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,r.C_)("rotation-item"+e.colorClass(t.member))},[(0,l._)("span",Ze,(0,r.zw)(("00"+(n+1)).slice(-2)),1),(0,l._)("img",{class:"character-icon handle",src:e.getCharacterMaster(t.member).icon_url,alt:e.displayName(t.member)},null,8,Ke),(0,l._)("img",{class:(0,r.C_)("action-icon handle"+e.bgColorClass(t.member)),src:e.actionDetail(t).icon_url,alt:e.displayName(e.actionDetail(t).名前)},null,10,Ge),(0,l._)("span",null,(0,r.zw)(e.displayName(e.actionDetail(t).名前)),1),(0,l._)("div",$e,(0,r.zw)(e.actionEnergyFluctuation(t)),1),(0,l._)("div",Je,[(0,l._)("button",{type:"button",onClick:n=>e.removeItemOnClick(t)},"×",8,Qe)])],2)):(0,l.kq)("",!0)])),_:1},8,["list"])])])}let tt=0;var nt=(0,l.aZ)({name:"TeamRotation",components:{draggable:O()},props:{team:{type:Object,required:!0}},setup(e){const{displayName:t}=(0,E.Z)(),n=new Map,a=(0,w.qj)([]),r=(0,w.iH)(0);(0,l.YP)(e,(async()=>{if(e.team){for(const t of e.team.members)if(t.name){const e=await(0,V.tm)(t.name);n.set(t.name,e)}a.splice(0,a.length),r.value++}}));const s=e=>V.bw[e],i=e=>(r.value,n.get(e)??void 0),c=e=>{const t=i(e.name);return t?t.元素スキル:void 0},o=e=>{const t=i(e.name);return t?t.元素爆発:void 0},u=e=>{const t=s(e);return t?" "+V.X9[t.元素]:""},m=e=>{const t=s(e);return t?" "+V.Cb[t.元素]:""},f=(e,t)=>{a.push({id:++tt,member:e.name,action:t})},d=e=>{let t;const n=i(e.member);return n&&(t=e.action.startsWith("E")?n.元素スキル:"Q"==e.action?n.元素爆発:void 0),t},h=e=>{let t="";const n=i(e.member),a=d(e);return n&&a&&(a.名前==n.元素スキル.名前?t="":a.名前==n.元素爆発.名前&&(t+=a.元素エネルギー?"-"+a.元素エネルギー:"")),t},p=e=>{a.splice(0,a.length,...a.filter((t=>t!=e)))};return{displayName:t,colorClass:u,bgColorClass:m,getCharacterMaster:s,getElementalSkillDetail:c,getElementalBurstDetail:o,actionOnClick:f,rotationList:a,getCharacterDetail:i,actionDetail:d,actionEnergyFluctuation:h,removeItemOnClick:p}}});const at=(0,se.Z)(nt,[["render",et]]);var lt=at;let rt=1;var st=(0,l.aZ)({name:"TeamManager",components:{draggable:O(),TeamItem:Ve,CharacterSelectModal:We,TeamRotation:lt},setup(){const{displayName:e}=(0,E.Z)(),t=(0,w.iH)(!1),n=(0,w.iH)(S),a=[["","None"],["レベル","Lv."],["HP上限","Max HP"],["攻撃力","ATK"],["防御力","DEF"],["元素熟知","EM"],["会心率/ダメージ","CRIT"],["元素チャージ効率","ER"]],r=(0,w.iH)(""),s=(0,w.iH)(0),i=e=>e==s.value;function c(e){return{id:e,name:"",buildname:void 0,savedata:void 0,tags:[]}}function o(e){const t={id:e,name:"チーム"+(e+1),members:[]};for(let n=0;n<M;n++)t.members.push(c(rt++));return t}function u(e){e.name="",e.buildname=void 0,e.savedata=void 0}function m(e){e.name="チーム"+(e.id+1),e.members.forEach((e=>{u(e)}))}const f=(0,w.qj)([]);for(let l=0;l<n.value;l++)f.push(o(l));const d=e=>{s.value=e},h=e=>{s.value==e&&(t.value=!0),s.value=e},p=()=>{f.forEach((e=>{m(e)}))},g=(0,l.Fl)((()=>{const e=(0,C.X8)(f);return e.forEach((e=>{e.members.forEach((e=>{e.savedata=void 0}))})),JSON.stringify(e)})),b=(0,w.iH)(""),y=()=>{localStorage.setItem("teams",g.value),b.value=g.value},v=(0,l.Fl)((()=>g.value==b.value)),k=()=>{if(n.value>f.length)for(let e=f.length;e<n.value;e++)f.push(o(e));else n.value<f.length&&(s.value>n.value&&(s.value=0),f.splice(n.value))},O=()=>{const e=localStorage.getItem("teams");if(e){const t=JSON.parse(e);n.value=t.length,k();for(let e=0;e<f.length;e++){const n=f[e];if(t[e]){n.name=t[e].name;const a=n.members;for(let n=0;n<a.length;n++)t[e].members[n]&&(a[n].name=t[e].members[n].name,t[e].members[n].buildname?a[n].buildname=t[e].members[n].buildname:a[n].buildname=void 0,a[n].savedata=void 0,t[e].members[n].tags?a[n].tags=t[e].members[n].tags:a[n].tags=[])}}}};O();const _=(0,l.Fl)((()=>f.filter((e=>e.id==s.value))[0].members??[])),V=e=>{if(-1!=s.value){const t=f.filter((e=>e.id==s.value))[0];if(t){const n=[];for(let a=0;a<e.length;a++){const l=c(t.members[a].id);l.name=e[a].name,l.buildname=e[a].buildname,l.savedata=void 0,l.tags.splice(0,l.tags.length,...e[a].tags),n.push(l)}t.members.splice(0,t.members.length,...n)}}t.value=!1},j=e=>{i(e.id)?t.value=!0:s.value=e.id},A=(e,t)=>{const n=f.filter((t=>t.id==e))[0];n&&(n.name=t)},N=(e,t,n)=>{const a=f.filter((t=>t.id==e))[0];if(a){const e=a.members.filter((e=>e.id==t))[0];e&&(e.buildname=n)}};return{displayName:e,characterSelectVisible:t,NUMBER_OF_TEAMS:S,NUMBER_OF_MEMBERS:M,numberOfTeams:n,numberOfTeamsOnChange:k,DISPLAY_STAT_LIST:a,displayStat:r,clearOnClick:p,saveOnClick:y,loadOnClick:O,saveDisabled:v,selectedTeamId:s,teamSelected:i,teams:f,forcusedMembers:_,teamOnClick:d,characterOnClick:j,memberOnClick:h,updateCharacters:V,teamNameOnChange:A,buildnameOnChange:N}}});const it=(0,se.Z)(st,[["render",v],["__scopeId","data-v-6ec08632"]]);var ct=it,ot=n(2540);async function ut(){(0,a.ri)(ct,{}).use(ot.Z).mount("#app")}ut()}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,r){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],l=e[u][1],r=e[u][2];for(var i=!0,c=0;c<a.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var o=l();void 0!==o&&(t=o)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,l,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.j=299}(),function(){var e={299:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,r,s=a[0],i=a[1],c=a[2],o=0;if(s.some((function(t){return 0!==e[t]}))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(c)var u=c(n)}for(t&&t(a);o<s.length;o++)r=s[o],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},a=self["webpackChunkgencalc"]=self["webpackChunkgencalc"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998,64],(function(){return n(7104)}));a=n.O(a)})();
//# sourceMappingURL=TeamManager.12a002f9.js.map