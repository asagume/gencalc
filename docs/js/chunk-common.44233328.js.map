{"version":3,"file":"js/chunk-common.44233328.js","mappings":"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","sources":["webpack://gencalc/./src/calculate.ts","webpack://gencalc/./src/common.ts","webpack://gencalc/./src/i18n.ts","webpack://gencalc/./src/input.ts","webpack://gencalc/./src/master.ts","webpack://gencalc/./src/particlemaster.ts","webpack://gencalc/./src/components/ArtifactItem.vue?52dd","webpack://gencalc/./src/components/ArtifactItem.vue","webpack://gencalc/./src/components/ArtifactItem.vue?ce03","webpack://gencalc/./src/components/ArtifactSetSelect.vue?96cd","webpack://gencalc/./src/components/ArtifactSetSelect.vue","webpack://gencalc/./src/components/ArtifactSetSelect.vue?aaa4","webpack://gencalc/./src/components/CharacterSelect.vue?9536","webpack://gencalc/./src/components/CharacterSelect.vue","webpack://gencalc/./src/components/CharacterSelect.vue?237b","webpack://gencalc/./src/components/CompositionFunction.vue","webpack://gencalc/./src/components/CompositionFunction.vue?ba0e","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?2696","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue","webpack://gencalc/./src/pages/TeamManager/MemberItem.vue?c0a3","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue?893c","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue","webpack://gencalc/./src/pages/TeamManager/TeamEditorModal.vue?5a65","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?a681","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue","webpack://gencalc/./src/pages/TeamManager/TeamItem.vue?15e4","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?d65a","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?9acb","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue","webpack://gencalc/./src/pages/TeamManager/ERCalculatorCommon.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFuncCharacter.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFuncWeapon.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculatorFunc.ts","webpack://gencalc/./src/pages/TeamManager/ERCalculator.vue?9b31","webpack://gencalc/./src/pages/TeamManager/TeamRotation.vue?8dd9"],"sourcesContent":["import _ from 'lodash';\r\nimport { isNumeric, overwriteObject } from '@/common';\r\nimport {\r\n    CHANGE_KIND_STATUS,\r\n    CHANGE_KIND_TALENT,\r\n    DAMAGE_RESULT_TEMPLATE,\r\n    getChangeKind,\r\n    getDefaultArtifactDetailInput,\r\n    getDefaultCharacterInput,\r\n    getDefaultConditionInput,\r\n    getDefaultDamageResultInput,\r\n    getDefaultStatsInput,\r\n    getStatValue,\r\n    loadRecommendation,\r\n    makeConditionExclusionMapFromStr,\r\n    makeDamageDetailObjArr,\r\n    makeDamageDetailObjArrObjArtifactSets,\r\n    makeDamageDetailObjArrObjCharacter,\r\n    makeDamageDetailObjArrObjWeapon,\r\n    makeTeamOptionDetailObjArr,\r\n    NUMBER_CONDITION_VALUE_RE,\r\n    setupConditionValues,\r\n    TArtifactDetailInput,\r\n    TCharacterInput,\r\n    TConditionInput,\r\n    TConditionValues,\r\n    TDamageDetailObj,\r\n    TDamageResult,\r\n    TDamageResultElementalReaction,\r\n    TDamageResultEntry,\r\n    TOptionInput,\r\n    TStats,\r\n    TStatsInput,\r\n    updateNumberConditionValues,\r\n    TEMPLATE,\r\n    ARRAY,\r\n    ARRAY,\r\n    _ARRAY,\r\n    _ARRAY,\r\n    TEMPLATE,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n    ARRAY,\r\n} from '@/input';\r\nimport {\r\n    ALL_ELEMENTS,\r\n    ARTIFACT_MAIN_MASTER,\r\n    ARTIFACT_SUB_MASTER,\r\n    DAMAGE_CATEGORY_ARRAY,\r\n    ELEMENTAL_REACTION_MASTER,\r\n    ELEMENTAL_RESONANCE_MASTER,\r\n    getCharacterMasterDetail,\r\n    TArtifactMainRarity,\r\n    TArtifactMainStat,\r\n    TCharacterKey,\r\n    TEAM_OPTION_MASTER_LIST,\r\n} from '@/master';\r\n\r\nexport type TArtifactScoreFormulaElement = [string, number];\r\nexport type TArtifactScoreFormula = TArtifactScoreFormulaElement[];\r\nexport const ARTIFACT_SCORE_FACTORS = [\r\n    'HP%', '%', '%', '', '', '', '',\r\n];\r\nexport const ARTIFACT_SCORE_FORMULA_TEMPLATE: TArtifactScoreFormula[] = [\r\n    [['', 2], ['', 1]],\r\n    [['%', 1], ['', 2], ['', 1]],\r\n    [['HP%', 1], ['', 2], ['', 1]],\r\n    [['%', 1], ['', 2], ['', 1]],\r\n    [['HP%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\r\n    [['%', 0.5], ['%', 0.5], ['', 2], ['', 1]],\r\n    [['%', 0.5], ['', 0.125], ['', 2], ['', 1]],\r\n];\r\n\r\nexport type TRotationDamageEntry = {\r\n    name: string;\r\n    category: string;\r\n    reactions: object[];\r\n    counts: number[];\r\n};\r\nexport type TRotationDamageInfo = {\r\n    totalDamage: number,\r\n    rotationDamages: TRotationDamageEntry[],\r\n};\r\nexport const REACTION_DMG_ARR = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const REACTION_DMG_ELEMENT_MAP = new Map<string, string>();\r\nfunction setupReactionDmgElementMap() {\r\n    REACTION_DMG_ARR.forEach((reactionDmg) => {\r\n        const reaction = reactionDmg.replace(/$/, '');\r\n        Object.keys(ELEMENTAL_REACTION_MASTER).forEach((element) => {\r\n            const reactionMaster = (ELEMENTAL_REACTION_MASTER as any)[element];\r\n            const workArr = Object.keys(reactionMaster);\r\n            if (workArr.includes(reaction)) {\r\n                if ('' in reactionMaster[reaction]) {\r\n                    REACTION_DMG_ELEMENT_MAP.set(reactionDmg, reactionMaster[reaction].);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\nsetupReactionDmgElementMap();\r\n\r\n/** [, ] => \\+?  */\r\nexport function getLevelStr(ascension: number, level: number): string {\r\n    return level + ARRAY[ascension][0] == level ? '+' : '';\r\n}\r\n\r\n/** / */\r\nexport function getStatValueByLevel(statObj: any, ascension: number, level: number): number {\r\n    if (!statObj) return 0;\r\n    const myLevelStr = getLevelStr(ascension, level);\r\n    if (myLevelStr in statObj) {\r\n        return statObj[myLevelStr];\r\n    }\r\n    const lowLevel = ARRAY[ascension][0];\r\n    const highLevel = ARRAY[ascension][ARRAY[ascension].length - 1];\r\n    const lowValue = statObj[lowLevel + '+'];\r\n    const highValue = statObj[highLevel];\r\n    return lowValue + (highValue - lowValue) * (level - lowLevel) / (highLevel - lowLevel);\r\n}\r\n\r\n/** / */\r\nexport function getPropertyValueByLevel(statObj: any, ascension: number): number {\r\n    const lowLevel = ARRAY[ascension][0];\r\n    return statObj[lowLevel + '+'];\r\n}\r\n\r\nexport function getValueByLevel(level: number | string, valueObj: any): number {\r\n    if (level in valueObj) return valueObj[level];\r\n    level = Number(level);\r\n    const levelArr = Object.keys(valueObj).map(s => Number(s));\r\n    let lowLevel;\r\n    let highLevel;\r\n    for (let i = 0; i < levelArr.length - 1; i++) {\r\n        if (levelArr[i] <= level && levelArr[i + 1] >= level) {\r\n            lowLevel = levelArr[i];\r\n            highLevel = levelArr[i + 1];\r\n        }\r\n    }\r\n    if (!lowLevel || !highLevel) return 0;\r\n    return valueObj[lowLevel] + (valueObj[highLevel] - valueObj[lowLevel]) * (level - lowLevel) / (highLevel - lowLevel);\r\n}\r\n\r\n/**  */\r\nexport function calculateArtifactStatsMain(artifactStatsMain: any, mainstats: string[]) {\r\n    (Object.keys(artifactStatsMain) as (keyof typeof artifactStatsMain)[]).forEach(\r\n        (key) => {\r\n            artifactStatsMain[key] = 0;\r\n        }\r\n    );\r\n    for (const statWithRarity of mainstats) {\r\n        if (!statWithRarity) continue;\r\n        const stat: any[] = statWithRarity.split('_');\r\n        artifactStatsMain[stat[1]] += ARTIFACT_MAIN_MASTER[stat[0] as TArtifactMainRarity][stat[1] as TArtifactMainStat];\r\n    }\r\n}\r\n\r\n/**  */\r\nexport function calculateArtifactSubStatByPriority(\r\n    artifactStatsSub: any,\r\n    mainstats: string[],\r\n    prioritySubstats: string[],\r\n    priotritySubstatIndices: number[],\r\n    priotritySubstatValues: number[][],\r\n    prioritySubstatCounts: number[]) {\r\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach((key) => {\r\n        artifactStatsSub[key] = 0;\r\n    });\r\n    let totalCount = 0;\r\n    for (let i = 0; i < prioritySubstats.length; i++) {\r\n        if (!prioritySubstats[i]) continue;\r\n        if (priotritySubstatIndices[i] === undefined || priotritySubstatIndices[i] < 0) continue;\r\n        if (!prioritySubstatCounts[i]) continue;\r\n        artifactStatsSub[prioritySubstats[i]] += priotritySubstatValues[i][priotritySubstatIndices[i]] * prioritySubstatCounts[i];\r\n        totalCount += prioritySubstatCounts[i];\r\n    }\r\n    // : 3 or 4\r\n    // : 5 (+4 +8 +12 +16 +20)\r\n    // +: min=40 max=45\r\n    const noPrioritySubstatArr = ARRAY.filter(s => !prioritySubstats.includes(s));\r\n    let noPriorityCount = Math.min(45, 40 + Math.floor(Math.max(0, (totalCount - 12) / 5)));\r\n    noPriorityCount -= Math.min(45, totalCount);\r\n    for (let i = noPriorityCount; i > 0; i--) {\r\n        const substat = noPrioritySubstatArr[i % noPrioritySubstatArr.length] as keyof typeof ARTIFACT_SUB_MASTER;\r\n        artifactStatsSub[substat] += ARTIFACT_SUB_MASTER[substat][3];\r\n    }\r\n    const star4Count = mainstats.filter(s => s && s.startsWith('4')).length;\r\n    const multiplier = 1 - (0.07 * star4Count); // 47%\r\n    (Object.keys(artifactStatsSub) as (keyof typeof artifactStatsSub)[]).forEach(\r\n        (key) => {\r\n            artifactStatsSub[key] *= multiplier;\r\n            artifactStatsSub[key] = Math.round(artifactStatsSub[key] * 10) / 10;\r\n        }\r\n    );\r\n}\r\n\r\nexport function calculateArtifactStats(artifactDetailInput: TArtifactDetailInput) {\r\n    const artifactStats = artifactDetailInput.;\r\n    const artifactStatsMain = artifactDetailInput.;\r\n    const artifactStatsSub = artifactDetailInput.;\r\n    for (const stat of Object.keys(artifactStats)) {\r\n        (artifactStats as any)[stat] = 0;\r\n    }\r\n    for (const stat of Object.keys(artifactStatsMain)) {\r\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsMain as any)[stat];\r\n        else (artifactStats as any)[stat] = (artifactStatsMain as any)[stat];\r\n    }\r\n    for (const stat of Object.keys(artifactStatsSub)) {\r\n        if (stat in artifactStats) (artifactStats as any)[stat] += (artifactStatsSub as any)[stat];\r\n        else (artifactStats as any)[stat] = (artifactStatsSub as any)[stat];\r\n    }\r\n}\r\n\r\nfunction makeEvalableScript(\r\n    formula: string,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n) {\r\n    const replaceMap = new Map<string, string>();\r\n    const re = /\\$\\{(.+?)\\}/g;\r\n    let reRet;\r\n    while ((reRet = re.exec(formula)) !== null) {\r\n        const key = reRet[1];\r\n        if (!replaceMap.has(key)) {\r\n            let value;\r\n            if (key.includes('#')) {   // # \r\n                const arr = key.split('#');\r\n                if (arr.length === 2) {\r\n                    const major = arr[0];\r\n                    const minor = arr[1];\r\n                    if (major in damageResult) {\r\n                        const entryArr = (damageResult[major] as TDamageResultEntry[]).filter(s => s[0] == minor);\r\n                        if (entryArr.length) {\r\n                            value = String(entryArr[0][4]);  // \r\n                        }\r\n                    }\r\n                }\r\n                if (value === undefined) {\r\n                    console.warn(formula, damageResult, key);\r\n                    value = '0';\r\n                }\r\n            } else {    // \r\n                value = String(getStatValue(key, statsObj));\r\n            }\r\n            if (value !== undefined) {\r\n                replaceMap.set(key, value);\r\n            }\r\n        }\r\n    }\r\n    let result = formula;\r\n    replaceMap.forEach((value, key) => {\r\n        result = result.replaceAll('${' + key + '}', value);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function evalFormula(\r\n    formula: number | string | null | undefined,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null\r\n) {\r\n    let result = 0;\r\n    let script;\r\n    if (!formula) {\r\n        // nop\r\n    } else if (_.isNumber(formula)) {\r\n        result = formula;\r\n    } else {\r\n        script = makeEvalableScript(formula, statsObj, damageResult);\r\n        try {\r\n            result = eval(script);\r\n        } catch (error) {\r\n            console.error(error);\r\n            console.error(formula, statsObj, damageResult, script);\r\n        }\r\n    }\r\n    if (opt_max !== null) {\r\n        const max = evalFormula(opt_max, statsObj, damageResult);\r\n        result = Math.min(result, max);\r\n    }\r\n    if (opt_min !== null) {\r\n        const min = evalFormula(opt_min, statsObj, damageResult);\r\n        result = Math.max(result, min);\r\n    }\r\n    console.debug(formula, opt_max, opt_min, script, result);\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport const calculateStats = function (\r\n    statsInput: TStatsInput,\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput\r\n) {\r\n    if (!characterInput || !artifactDetailInput || !conditionInput || !optionInput) return;\r\n    try {\r\n        const characterMaster = characterInput.characterMaster;\r\n        const ascension = characterInput.;\r\n        const level = characterInput.;\r\n        const constellation = characterInput.;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n        const weaponAscension = characterInput.;\r\n        const weaponLevel = characterInput.;\r\n\r\n        const workStatsObj = _.cloneDeep(TEMPLATE);\r\n\r\n        workStatsObj[''] = ascension;\r\n        workStatsObj[''] = level;\r\n        workStatsObj[''] = constellation;\r\n        (workStatsObj as any)[''] = characterMaster.;\r\n\r\n        // \r\n        if ('' in characterMaster['']) {\r\n            workStatsObj[''] = Number(characterMaster['']['']);\r\n        }\r\n        if ('' in characterMaster) {\r\n            for (const name of Object.keys(characterMaster[''])) {\r\n                if (name in conditionInput.conditionValues) {\r\n                    workStatsObj[name] = Number(conditionInput.conditionValues[name]);\r\n                } else {\r\n                    workStatsObj[name] = characterMaster[''][name];\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const stat of Object.keys(statsInput.enemyMaster).filter(s => s != 'key')) {\r\n            const toStat = '' + stat;\r\n            workStatsObj[toStat] = statsInput.enemyMaster[stat];\r\n        }\r\n\r\n        // \r\n        Object.keys(statsInput.statAdjustments).filter(s => !ARRAY.includes(s)).forEach(stat => {\r\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustments[stat];\r\n        });\r\n        Object.keys(statsInput.statAdjustmentsEx).filter(s => !ARRAY.includes(s)).forEach(stat => {\r\n            if (stat in workStatsObj) workStatsObj[stat] += statsInput.statAdjustmentsEx[stat];\r\n        });\r\n\r\n        // \r\n        for (const stat of Object.keys(characterMaster[''])) {\r\n            if (ARRAY.includes(stat)) {\r\n                workStatsObj[stat] += getStatValueByLevel(characterMaster[''][stat], ascension, level);\r\n            } else {\r\n                const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\r\n                if (toStat in workStatsObj) {\r\n                    workStatsObj[toStat] += getPropertyValueByLevel(characterMaster[''][stat], ascension);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const stat of Object.keys(weaponMaster[''])) {\r\n            workStatsObj[stat] += getStatValueByLevel(weaponMaster[''][stat], weaponAscension, weaponLevel);\r\n        }\r\n\r\n        // \r\n        const artifactStats = artifactDetailInput.;\r\n        for (const stat of Object.keys(artifactStats)) {\r\n            const toStat = ['HP', '', ''].includes(stat) ? stat + '+' : stat;\r\n            workStatsObj[toStat] += (artifactStats as any)[stat];\r\n        }\r\n\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n        let _Var = characterMaster. == '' ? characterMaster. : '';\r\n\r\n        if (optionInput) {\r\n            // \r\n            [optionInput.elementalResonance, optionInput.teamOption, optionInput.miscOption].forEach(optionObj => {\r\n                if (optionObj && optionObj.conditionAdjustments) {\r\n                    Object.keys(optionObj.conditionAdjustments).forEach(stat => {\r\n                        const workValue = optionObj.conditionAdjustments[stat];\r\n                        if (workValue === Infinity) {\r\n                            if (stat.endsWith('')) {\r\n                                if (['', '', ''].includes(characterMaster.)) {\r\n                                    const my = stat.replace(/$/, '');\r\n                                    _Var = my;\r\n                                    _Var = my;\r\n                                    _Var = my;\r\n                                }\r\n                            }\r\n                        } else if (workValue !== null) {\r\n                            if (stat in workStatsObj) {\r\n                                workStatsObj[stat] += workValue;\r\n                            } else {\r\n                                workStatsObj[stat] = workValue;\r\n                            }\r\n                            if (stat.endsWith('V1') || stat.endsWith('V2') || stat.endsWith('V3')) {\r\n                                const toStat = stat.replace(/V[1-3]$/, '');\r\n                                if (toStat in workStatsObj) {\r\n                                    workStatsObj[toStat] += workValue;\r\n                                } else {\r\n                                    workStatsObj[toStat] = workValue;\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n\r\n        // \r\n        calculateStatsTop(workStatsObj, optionInput);\r\n        // \r\n        ARRAY.forEach(stat => {\r\n            if (stat in statsInput.statAdjustments) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += statsInput.statAdjustments[stat];\r\n                }\r\n            }\r\n        });\r\n\r\n        // \r\n        const conditionAdjustments = updateStatsWithCondition(characterInput, validConditionValueArr, workStatsObj);\r\n\r\n        // \r\n        for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n            if (myDamageDetail && CHANGE_KIND_TALENT in myDamageDetail) {\r\n                for (const myDetailObj of myDamageDetail[CHANGE_KIND_TALENT]) {\r\n                    if (myDetailObj['']) {\r\n                        const number = checkConditionMatches(myDetailObj[''], validConditionValueArr, constellation);\r\n                        if (number === 0) continue;\r\n                    }\r\n                    if (myDetailObj[''] && myDetailObj[''].endsWith('')) {\r\n                        const my = myDetailObj[''].replace('', '');\r\n                        if (!myDetailObj['']) {\r\n                            _Var = my;\r\n                            _Var = my;\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        } else if (myDetailObj[''] == '') {\r\n                            _Var = my;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        conditionInput. = [_Var, _Var, _Var];\r\n\r\n        overwriteObject(statsInput.statsObj, workStatsObj);\r\n        overwriteObject(conditionInput.conditionAdjustments, conditionAdjustments);\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nfunction updateStatsWithCondition(\r\n    characterInput: TCharacterInput,\r\n    validConditionValueArr: string[],\r\n    workStatsObj: TStats\r\n) {\r\n    const constellation = characterInput.;\r\n    const workConditionAdjustments = {} as { [key: string]: number };\r\n    const statFormulaMap: Map<string, any[]> = new Map();\r\n\r\n    for (const myDamageDetail of [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets]) {\r\n        if (myDamageDetail && CHANGE_KIND_STATUS in myDamageDetail) {\r\n            for (const myDetailObj of myDamageDetail[CHANGE_KIND_STATUS]) {\r\n                let hasCondition = false;\r\n                let my = myDetailObj[''];\r\n                if (my === null) {\r\n                    continue;\r\n                }\r\n                if (myDetailObj['']) {\r\n                    const number = checkConditionMatches(myDetailObj., validConditionValueArr, constellation);\r\n                    if (my.includes('${INDEX}')) {\r\n                        my = my.replaceAll('${INDEX}', String(number));\r\n                    } else if (number === 0) {\r\n                        continue;\r\n                    } else {\r\n                        my = '(' + my + ')*' + number;\r\n                    }\r\n                    hasCondition = true;\r\n                }\r\n                let my = myDetailObj[''];\r\n                if (my) {\r\n                    if (myDetailObj['']) {\r\n                        my += '.' + myDetailObj[''];\r\n                    }\r\n                    if (!statFormulaMap.has(my)) {\r\n                        statFormulaMap.set(my, []);\r\n                    }\r\n                    statFormulaMap.get(my)?.push([my, my, myDetailObj., myDetailObj., hasCondition]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const hpStatArr = ['HP', 'HP%', 'HP+', 'HP'];\r\n    const defStatArr = ['', '%', '+', ''];\r\n    const atkStatArr = ['', '%', '+', ''];\r\n    const otherStatArr = [..._ARRAY, ..._ARRAY, ...ARRAY, ...ARRAY, ...ARRAY, ''];\r\n    otherStatArr.push(...Array.from(statFormulaMap.keys()).filter(s => s.indexOf('.') != -1));\r\n\r\n    const formulaStatArr = [...new Set(Array.from(statFormulaMap.keys()).map(s => s.replace(/V[1-3]$/, '')))].filter(s => ![...hpStatArr, ...defStatArr, ...atkStatArr, ...otherStatArr].includes(s));\r\n    formulaStatArr.sort(compareFunction);\r\n\r\n    // HP\r\n    for (const stat of hpStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    workStatsObj['HP'] += workStatsObj['HP'] + workStatsObj['HP+'];\r\n    workStatsObj['HP'] += (workStatsObj['HP'] * workStatsObj['HP%']) / 100;\r\n\r\n    for (const stat of formulaStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // \r\n    for (const stat of defStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\r\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\r\n\r\n    // \r\n    for (const stat of atkStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    workStatsObj[''] += workStatsObj[''] + workStatsObj['+'];\r\n    workStatsObj[''] += (workStatsObj[''] * workStatsObj['%']) / 100;\r\n\r\n    // \r\n    for (const stat of otherStatArr) {\r\n        const oldStatsObj: TStats = {};\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const workStat = stat + postfix;\r\n            if (workStat in workStatsObj) {\r\n                oldStatsObj[workStat] = workStatsObj[workStat];\r\n            } else {\r\n                oldStatsObj[workStat] = 0;\r\n            }\r\n        });\r\n        updateStatsWithConditionSub(workConditionAdjustments, workStatsObj, statFormulaMap, stat);\r\n        ['V1', 'V2', 'V3'].forEach(postfix => {\r\n            const fromStat = stat + postfix;\r\n            if (workStatsObj[fromStat]) {\r\n                if (stat in workStatsObj) {\r\n                    workStatsObj[stat] += workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                } else {\r\n                    workStatsObj[stat] = workStatsObj[fromStat] - oldStatsObj[fromStat];\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return workConditionAdjustments;\r\n}\r\n\r\nfunction updateStatsWithConditionSub(\r\n    workConditionAdjustments: TStats,\r\n    workStatsObj: TStats,\r\n    statFormulaMap: Map<string, any[]>,\r\n    formulaKey: string\r\n) {\r\n    for (const formulaArr of [statFormulaMap.get(formulaKey), ...['V1', 'V2', 'V3'].map(s => statFormulaMap.get(formulaKey + s))]) {\r\n        if (!formulaArr) continue;\r\n        formulaArr.forEach(formula => {\r\n            const diffStats = updateStats(workStatsObj, formula[0], formula[1], formula[2], formula[3]);\r\n            for (const stat of Object.keys(diffStats)) {\r\n                if (ARRAY.includes(stat + 'TOP')) {\r\n                    const statValue = getStatValue(stat + 'X7', workStatsObj);\r\n                    const topValue = workStatsObj[stat + 'TOP'];\r\n                    if (statValue !== undefined && topValue !== undefined) {\r\n                        if (statValue > topValue) {\r\n                            workStatsObj[stat + 'TOP'] = statValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (formula[4]) {\r\n                for (const stat of Object.keys(diffStats)) {\r\n                    if (stat in workConditionAdjustments) {\r\n                        workConditionAdjustments[stat] += diffStats[stat];\r\n                    } else {\r\n                        workConditionAdjustments[stat] = diffStats[stat];\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nfunction compareFunction(a: string, b: string) {\r\n    const arr = ['', '', '', '', '', '', ''];\r\n    const lowestArr = [''];\r\n    let aIndex = arr.indexOf(a);\r\n    if (lowestArr.indexOf(a) >= 0) {\r\n        aIndex = arr.length + 1;\r\n    }\r\n    let bIndex = arr.indexOf(b);\r\n    if (lowestArr.indexOf(b) >= 0) {\r\n        bIndex = arr.length + 1;\r\n    }\r\n    return (aIndex != -1 ? aIndex : arr.length) - (bIndex != -1 ? bIndex : arr.length);\r\n}\r\n\r\nexport function calculateElementalResonance(\r\n    conditionValues: TConditionValues,\r\n    conditionInput: TConditionInput,\r\n): TStats {\r\n    const result: TStats = {};\r\n    const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n    for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\r\n        if (!conditionValues[key]) continue;\r\n        const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\r\n        if (master.) {\r\n            for (const detailObj of master.) {\r\n                if (detailObj.) {\r\n                    const matchRet = checkConditionMatches(detailObj., validConditionValueArr, 0);\r\n                    if (matchRet === 0) continue;\r\n                }\r\n                if (detailObj. && detailObj.) {\r\n                    if (detailObj. in result) {\r\n                        result[detailObj.] += detailObj.;\r\n                    } else {\r\n                        result[detailObj.] = detailObj.;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (key == '' && conditionValues.dendroOption) {\r\n            result[''] += Number(conditionValues.dendroOption);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n// /**  */\r\n// function calculateFormulaArray(\r\n//     formulaArr: any,\r\n//     statsObj: TStats,\r\n//     damageResult: TDamageResult,\r\n//     opt_max: number | string | Array<number | string> | null = null,\r\n//     opt_min: number | string | Array<number | string> | null = null\r\n// ): number {\r\n//     try {\r\n//         let result = 0;\r\n//         if (Array.isArray(formulaArr)) {\r\n//             let operator: string | null = null;\r\n//             for (const entry of formulaArr) {\r\n//                 let subResult = 0;\r\n//                 if (['+', '-', '*', '/'].includes(entry)) {\r\n//                     operator = entry;\r\n//                     continue;\r\n//                 } else if (isNumeric(entry)) {\r\n//                     subResult = Number(entry);\r\n//                 } else if (Array.isArray(entry)) {\r\n//                     subResult = calculateFormulaArray(entry, statsObj, damageResult);\r\n//                 } else if (entry.indexOf('#') != -1) {\r\n//                     const nameArr = entry.split('#');\r\n//                     if (damageResult && nameArr[0] in damageResult) {\r\n//                         const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\r\n//                         let damage = null;\r\n//                         for (const damageArr of damageArrArr) {\r\n//                             if (nameArr[1] == damageArr[0]) {\r\n//                                 damage = damageArr[4];  // \r\n//                                 break;\r\n//                             }\r\n//                         }\r\n//                         if (damage != null) {\r\n//                             subResult = damage;\r\n//                         } else {\r\n//                             console.error(formulaArr, statsObj, damageResult, opt_max, opt_min, entry);\r\n//                         }\r\n//                     }\r\n//                 } else {\r\n//                     const temp = getStatValue(entry, statsObj);\r\n//                     if (temp === undefined) {\r\n//                         console.error(formulaArr, statsObj, null, opt_max, opt_min, entry);\r\n//                     } else {\r\n//                         subResult = temp;\r\n//                     }\r\n//                 }\r\n//                 if (operator == null) {\r\n//                     result += subResult;\r\n//                 } else {\r\n//                     switch (operator) {\r\n//                         case '+':\r\n//                             result += subResult;\r\n//                             break;\r\n//                         case '-':\r\n//                             result -= subResult;\r\n//                             break;\r\n//                         case '*':\r\n//                             result *= subResult;\r\n//                             result = Math.floor(result * 100) / 100;\r\n//                             break;\r\n//                         case '/':\r\n//                             result /= subResult;\r\n//                             break;\r\n//                     }\r\n//                 }\r\n//             }\r\n//         } else if (isNumeric(formulaArr)) {\r\n//             result = Number(formulaArr);\r\n//         } else if (formulaArr.indexOf('#') != -1) {\r\n//             const nameArr = formulaArr.split('#');\r\n//             if (damageResult && nameArr[0] in damageResult) {\r\n//                 const damageArrArr = damageResult[nameArr[0]] as TDamageResultEntry[];\r\n//                 for (const damageArr of damageArrArr) {\r\n//                     if (nameArr[1] == damageArr[0]) {\r\n//                         result = damageArr[4];  // \r\n//                         break;\r\n//                     }\r\n//                 }\r\n//             }\r\n//         } else {\r\n//             const temp = getStatValue(formulaArr, statsObj);\r\n//             if (temp !== undefined) {\r\n//                 result = temp;\r\n//             } else {\r\n//                 console.error(formulaArr, statsObj, null, opt_max, opt_min);\r\n//                 result = 0; // \r\n//             }\r\n//         }\r\n//         if (opt_max != null) {\r\n//             const maxValue = calculateFormulaArray(opt_max, statsObj, damageResult);\r\n//             result = Math.min(result, maxValue);\r\n//         }\r\n//         if (opt_min != null) {\r\n//             const minValue = calculateFormulaArray(opt_min, statsObj, damageResult);\r\n//             result = Math.max(result, minValue);\r\n//         }\r\n//         return result;\r\n//     } catch (error) {\r\n//         console.error(error);\r\n//         console.error(formulaArr, statsObj, damageResult, opt_max, opt_min);\r\n//         throw error;\r\n//     }\r\n// }\r\n\r\n/**  */\r\nexport function calculateDamageResult(\r\n    damageResult: TDamageResult,\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    statsInput: TStatsInput,\r\n) {\r\n    try {\r\n        if (!characterInput) return;\r\n        if (!conditionInput) return;\r\n        if (!statsInput) return;\r\n        const characterMaster = characterInput.characterMaster;\r\n        const constellation = characterInput[''];\r\n        const vision = characterMaster[''];\r\n\r\n        // \r\n        const reactionResult = _.cloneDeep(TEMPLATE);\r\n        const reactionMasterArr = [];\r\n        const dmgElementSet = new Set<string>();\r\n        dmgElementSet.add(vision); // \r\n        if (conditionInput.selectList.filter(s => s.name == '').length) {\r\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\r\n            const selectedIndex = conditionInput.conditionValues[''] as number;\r\n            if (selectedIndex) {\r\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\r\n                dmgElementSet.add(dmgElement); // \r\n            }\r\n        }\r\n        if (conditionInput.selectList.filter(s => s.name == '').length) {\r\n            const selectEntry = conditionInput.selectList.filter(s => s.name == '')[0];\r\n            const selectedIndex = conditionInput.conditionValues[''] as number;\r\n            if (selectedIndex) {\r\n                const dmgElement = selectEntry.options[selectedIndex].replace(/$/, '');\r\n                dmgElementSet.add(dmgElement); // \r\n            }\r\n        }\r\n        for (const dmgElement of conditionInput.) {\r\n            if (dmgElement && dmgElement != '') {\r\n                dmgElementSet.add(dmgElement); // //\r\n            }\r\n        }\r\n        for (const dmgElement of dmgElementSet) {\r\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\r\n        }\r\n        let has = false;\r\n        if (characterMaster. == '' || characterMaster. == '') {\r\n            has = true;\r\n        } else {\r\n            const characterArr = (ELEMENTAL_REACTION_MASTER as any).?.?.;\r\n            if (characterArr && characterArr.includes(characterMaster.)) {\r\n                has = true;\r\n            }\r\n        }\r\n        if (has) {\r\n            const dmgElement = '';\r\n            reactionMasterArr.push([dmgElement, (ELEMENTAL_REACTION_MASTER as any)[dmgElement]]);\r\n        }\r\n        reactionResult[''] = vision;\r\n        reactionMasterArr.forEach(entry => {\r\n            const element = entry[0];\r\n            const reactionMaster = entry[1];\r\n            Object.keys(reactionMaster).forEach(reaction => {\r\n                const reactionObj = reactionMaster[reaction];\r\n                let resultValue = 0;\r\n                if (reaction == '') {\r\n                    resultValue = calculate(element, statsInput.statsObj);\r\n                } else if (reaction == '') {\r\n                    let dmgElement = '';\r\n                    for (const entry of conditionInput.selectList) {\r\n                        if (entry.name == '') {\r\n                            const optionValue = entry.options[Number(conditionInput.conditionValues[''])];\r\n                            if (optionValue) dmgElement = optionValue.replace(/$/, '');\r\n                            break;\r\n                        }\r\n                    }\r\n                    reactionResult[''] = dmgElement;\r\n                    resultValue = calculate(reaction, element, statsInput.statsObj, dmgElement);\r\n                } else {\r\n                    switch (reactionObj['']) {\r\n                        case '':    //  \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                        case '':    //    \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                        case '':    //  \r\n                            resultValue = calculate(reaction, element, statsInput.statsObj);\r\n                            break;\r\n                    }\r\n                }\r\n                ['', '', ''].forEach(suffix => {\r\n                    let key = reaction + suffix;\r\n                    if (suffix === '') {\r\n                        key += '_' + element;\r\n                    }\r\n                    if (key in reactionResult) {\r\n                        (reactionResult as any)[key] = resultValue;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        Object.keys(reactionResult).filter(s => s.endsWith('') && s.indexOf('') == -1).forEach(dmg => {\r\n            ['', ''].forEach(stat => {\r\n                const key = dmg + stat;\r\n                if (key in statsInput.statsObj) {\r\n                    (reactionResult as any)[key] = statsInput.statsObj[key];\r\n                }\r\n            });\r\n        });\r\n        overwriteObject(damageResult., reactionResult);\r\n\r\n        // \r\n        const validConditionValueArr = makeValidConditionValueArr(conditionInput);\r\n\r\n        const damageDetailMyCharacter = characterInput.damageDetailMyCharacter;\r\n        const damageDetailMyWeapon = characterInput.damageDetailMyWeapon;\r\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\r\n\r\n        if (Array.isArray(damageResult[''])) {\r\n            damageResult[''].splice(0, damageResult[''].length);\r\n        }\r\n\r\n        if (damageDetailMyCharacter) {\r\n            for (const category of ['', '', '']) {\r\n                damageResult[category] = [];\r\n                if (!(category in damageDetailMyCharacter)) continue;\r\n                const element = conditionInput.[['', '', ''].indexOf(category)];\r\n                let talentDetailArr = (damageDetailMyCharacter as any)[category];\r\n                if (('' + category) in damageDetailMyCharacter) {\r\n                    const workObj = (damageDetailMyCharacter as any)['' + category];\r\n                    if (checkConditionMatches(workObj[''], validConditionValueArr, constellation) !== 0) {\r\n                        talentDetailArr = workObj[''];\r\n                    }\r\n                }\r\n                for (const talentDetail of talentDetailArr) {\r\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation) === 0) {\r\n                        continue;\r\n                    }\r\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult, element);\r\n                    (damageResult[category] as any).push(resultArr);\r\n                }\r\n                if (category == '') {\r\n                    let n = 0;\r\n                    const sum = ['', null, 0, 0, 0, null, 0, 0, 1] as TDamageResultEntry;\r\n                    for (const entry of damageResult[category]) {\r\n                        if ((entry[0].endsWith('') || [''].includes(entry[0])) && !entry[0].startsWith('_')) {  // \r\n                            sum[1] = entry[1];\r\n                            sum[2] += entry[2];\r\n                            if (entry[3] == null) sum[3] = null;\r\n                            else if (sum[3] != null) sum[3] += entry[3];\r\n                            sum[4] += entry[4];\r\n                            if (sum[6] != null) {   // HIT\r\n                                if (entry[6]) sum[6] += entry[6];\r\n                                else sum[6]++;\r\n                            }\r\n                            sum[7] = entry[7];  // \r\n                            sum[8] = entry[8];  // \r\n                            n++;\r\n                        }\r\n                    }\r\n                    if (n > 0) {\r\n                        damageResult[category].splice(n, 0, sum);\r\n                    }\r\n                }\r\n            }\r\n            for (const category of ['', '', '']) {\r\n                damageResult[category] = [];\r\n                if (!(category in damageDetailMyCharacter)) continue;\r\n                const talentDetailArr = (damageDetailMyCharacter as any)[category];\r\n                for (const talentDetail of talentDetailArr) {\r\n                    if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation) === 0) {\r\n                        continue;\r\n                    }\r\n                    const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\r\n                    (damageResult[category] as TDamageResultEntry[]).push(resultArr);\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        for (const myDamageDetail of [damageDetailMyWeapon, damageDetailMyArtifactSets]) {\r\n            const category = '';\r\n            if (!myDamageDetail || !(category in myDamageDetail)) continue;\r\n            const talentDetailArr = (myDamageDetail as any)[category];\r\n            for (const talentDetail of talentDetailArr) {\r\n                if (talentDetail[''] && checkConditionMatches(talentDetail[''], validConditionValueArr, constellation) === 0) {\r\n                    continue;\r\n                }\r\n                const resultArr = calculateDamageFromDetail(talentDetail, characterInput, conditionInput, statsInput.statsObj, damageResult);\r\n                (damageResult[category] as TDamageResultEntry[]).push(resultArr);\r\n            }\r\n        }\r\n\r\n        // \r\n        const damageTakenArr = [] as any;\r\n        for (const stat of _ARRAY) {\r\n            const element = stat.replace(/$/, '').replace(/$/, '');\r\n            const damageTaken = calculateDamageTaken(statsInput.statsObj, 10000, element);\r\n            damageTakenArr.push({ key: element, value: damageTaken });\r\n        }\r\n        damageResult[''] = damageTakenArr;\r\n\r\n        // \r\n        const resScoreArr = [] as any;\r\n        for (const damageTaken of damageTakenArr) {\r\n            resScoreArr.push({ key: damageTaken.key, value: statsInput.statsObj['HP'] * 10000 / damageTaken.value });\r\n        }\r\n        damageResult[''] = resScoreArr;\r\n\r\n        console.debug('damageResult', damageResult);\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(damageResult, characterInput, conditionInput, statsInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeValidConditionValueArr(conditionInput: TConditionInput) {\r\n    try {\r\n        const result = [] as string[];\r\n        if (!conditionInput) return result;\r\n        const checkboxList = conditionInput.checkboxList;\r\n        if (checkboxList) {\r\n            checkboxList.forEach((entry: any) => {\r\n                if (conditionInput.conditionValues[entry.name]) {\r\n                    result.push(entry.name);\r\n                }\r\n            });\r\n        }\r\n        const selectList = conditionInput.selectList;\r\n        if (selectList) {\r\n            selectList.forEach((entry: any) => {\r\n                const value = conditionInput.conditionValues[entry.name];\r\n                if (_.isNumber(value)) {\r\n                    if (value > 0 || (value === 0 && entry.required)) {\r\n                        result.push(entry.name + '@' + entry.options[value]);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const numberList = conditionInput.numberList;\r\n        if (numberList) {\r\n            numberList.forEach((entry: any) => {\r\n                const value = conditionInput.conditionValues[entry.name];\r\n                if (_.isNumber(value)) {\r\n                    result.push(entry.name + '=' + value);\r\n                }\r\n            });\r\n        }\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(conditionInput);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport function checkConditionMatches(\r\n    conditionStr: string,\r\n    validConditionValueArr: string[],\r\n    constellation: number,\r\n): number {\r\n    const myCondStr = conditionStr.split('^')[0];\r\n\r\n    if (myCondStr.indexOf('|') !== -1) {  // |OR\r\n        const myCondStrArr = myCondStr.split('|');\r\n        for (let i = 0; i < myCondStrArr.length; i++) {\r\n            const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation);\r\n            if (resultSub === 1) {\r\n                return 1;   // \r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    const myCondStrArr = myCondStr.split('&');    // &AND\r\n    let result = 1;\r\n    for (let i = 0; i < myCondStrArr.length; i++) {\r\n        const resultSub = checkConditionMatchesSub(myCondStrArr[i], validConditionValueArr, constellation);\r\n        if (resultSub === 0) {\r\n            return 0;   // \r\n        }\r\n        if (resultSub !== 1) {\r\n            result = resultSub;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction checkConditionMatchesSub(\r\n    conditionStr: string,\r\n    validConditionValueArr: string[],\r\n    constellation: number,\r\n): number {\r\n    const myCondArr = conditionStr.split(/[@=]/);\r\n    if (myCondArr[0] === '') {\r\n        if (myCondArr.length === 2) {\r\n            if (isNumeric(myCondArr[1])) {\r\n                const work = Number(myCondArr[1]);\r\n                if (work <= constellation) {\r\n                    return 1;\r\n                }\r\n            }\r\n        }\r\n        return 0;   // \r\n    }\r\n    if (validConditionValueArr.includes(conditionStr) || validConditionValueArr.includes(conditionStr.replace('=', '@'))) {\r\n        return 1;   //  \r\n    }\r\n    if (myCondArr.length === 1) {\r\n        if (validConditionValueArr.filter(s => s.split('@')[0] == conditionStr).length > 0) {\r\n            return 1;   //  \r\n        }\r\n        return 0;   // \r\n    }\r\n    if (conditionStr.indexOf('=') !== -1) {\r\n        if (NUMBER_CONDITION_VALUE_RE.test(myCondArr[1])) { // \r\n            const workArr = validConditionValueArr.filter(s => s.split('=')[0] == myCondArr[0]);\r\n            if (workArr.length > 0) {\r\n                return Number(workArr[0].split('=')[1]);   // \r\n            }\r\n        }\r\n        return 0;   // \r\n    }\r\n    const re = new RegExp('[^0-9]*?([\\\\-0-9\\\\.]+).*');    // ={prefix}{}{postfix}\r\n    for (let i = 0; i < validConditionValueArr.length; i++) {\r\n        if (validConditionValueArr[i].startsWith(myCondArr[0] + '@')) {\r\n            const workCondArr = validConditionValueArr[i].split('@');\r\n            const reRet = re.exec(workCondArr[1]);\r\n            if (reRet) {\r\n                const work = Number(reRet[1]);\r\n                return work;    //  \r\n            }\r\n        }\r\n    }\r\n    return 0;   // \r\n}\r\n\r\n/**  */\r\nfunction calculate(\r\n    reaction: any,\r\n    element: string,\r\n    statsObj: any,\r\n) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        let result = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        result *= 1 + (25 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction calculate(\r\n    reaction: any,\r\n    element: string,\r\n    statsObj: TStats,\r\n    opt_dmgElement?: string,\r\n) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        const dmgElement = opt_dmgElement ?? (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        let result = getValueByLevel(level, (ELEMENTAL_REACTION_MASTER as any)[element][reaction]['']);\r\n        result *= 1 + (16 * elementalMastery / (elementalMastery + 2000)) + dmgBuff / 100;\r\n        result *= calculateEnemyRes(dmgElement, statsObj);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj, opt_dmgElement);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculate(element: string, statsObj: TStats) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[''] ?? 0;\r\n        let result = getValueByLevel(level, (ELEMENTAL_REACTION_MASTER as any)[element]['']['']);\r\n        result *= 1 + (40 * elementalMastery / (9 * (elementalMastery + 1400))) + dmgBuff / 100;\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculate(reaction: any, element: string, statsObj: TStats) {\r\n    try {\r\n        if (!element || element == '') return 0;\r\n        const level = statsObj[''];\r\n        const elementalMastery = statsObj[''];\r\n        const dmgBuff = statsObj[reaction + ''] ?? 0;\r\n        const dmgElement = (ELEMENTAL_REACTION_MASTER as any)[element][reaction][''];\r\n        let result = getValueByLevel(level, (ELEMENTAL_REACTION_MASTER as any)[element][reaction]['']);\r\n        result *= 1 + (5 * elementalMastery / (elementalMastery + 1200)) + dmgBuff / 100;\r\n        result *= calculateEnemyRes(dmgElement, statsObj);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(reaction, element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nexport function calculateEnemyDef(statsObj: TStats, opt_ignoreDef = 0) { // , \r\n    try {\r\n        const level = statsObj[''] ?? 0;\r\n        const enemyLevel = statsObj[''] ?? 0;\r\n        const calcIgnoreDef = opt_ignoreDef / 100;\r\n        const calcDef = Math.max(-100, statsObj[''] ?? 0) / 100;    //  -100%\r\n        const result = (level + 100) / ((1 - calcIgnoreDef) * (1 + calcDef) * (enemyLevel + 100) + level + 100);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(statsObj, opt_ignoreDef);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/** () */\r\nfunction calculateRes(res: number) {\r\n    if (res == Infinity) return 0;  // \r\n    let result = res;\r\n    if (result < 0) {\r\n        result = 100 - result / 2;\r\n    } else if (result < 75) {\r\n        result = 100 - result;\r\n    } else {\r\n        result = 10000 / (4 * result + 100)\r\n    }\r\n    result /= 100;\r\n    return result;\r\n}\r\n\r\n/** () */\r\nexport function calculateEnemyRes(element: string, statsObj: TStats) {\r\n    try {\r\n        const statName = '' + element + (element != '' ? '' : '') + '';\r\n        const result = calculateRes(statsObj[statName] ?? 0);\r\n        return result;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(element, statsObj);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**  */\r\nfunction calculateDamageFromDetail(\r\n    detailObj: any,\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    opt_element: string | null = null\r\n): TDamageResultEntry {\r\n    try {\r\n        const myArr = [] as Array<string>;\r\n        let isCalc = true;\r\n        let isCalc = true;\r\n        let isCalc = true;\r\n        let my = detailObj[''] != null ? detailObj[''] : opt_element != null ? opt_element : null;\r\n        let my = 0; // for \r\n        let my = 0; // for \r\n        const myHIT = detailObj['HIT'] != null ? Number(detailObj['HIT']) : 1;\r\n        const my = {} as { [key: string]: number };\r\n\r\n        const constellation = statsObj[''];\r\n        const talentChangeDetailObjArr = getChangeDetailObjArr(characterInput, CHANGE_KIND_TALENT);\r\n\r\n        let validConditionValueArr = makeValidConditionValueArr(conditionInput);  // \r\n        const myConditionValuesAfter = _.cloneDeep(conditionInput.conditionValues);\r\n\r\n        if (detailObj['']) {\r\n            for (const delCondition of detailObj['']) {\r\n                let work = delCondition;\r\n                if (_.isPlainObject(delCondition)) {\r\n                    work = delCondition.;\r\n                }\r\n                if (work in myConditionValuesAfter) {\r\n                    if (isNumeric(myConditionValuesAfter[work])) {\r\n                        myConditionValuesAfter[work] = 0;\r\n                    } else if (_.isBoolean(myConditionValuesAfter[work])) {\r\n                        myConditionValuesAfter[work] = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (detailObj['']) {\r\n            for (const addCondition of detailObj['']) {\r\n                if (_.isString(addCondition)) {\r\n                    if (addCondition in myConditionValuesAfter) {\r\n                        if (_.isBoolean(myConditionValuesAfter[addCondition])) {\r\n                            myConditionValuesAfter[addCondition] = true;\r\n                        }\r\n                    }\r\n                } else if (_.isPlainObject(addCondition)) {\r\n                    if (addCondition. in myConditionValuesAfter) {\r\n                        let newValue = myConditionValuesAfter[addCondition.];\r\n                        if ('' in addCondition) {\r\n                            if (_.isString(addCondition.)) {\r\n                                const work = String(addCondition.).replace(/^\\+/, '');\r\n                                (newValue as number) += Number(work);\r\n                            } else if (isNumeric(addCondition.)) {\r\n                                newValue = addCondition.;\r\n                            } else {\r\n                                newValue = addCondition.;\r\n                            }\r\n                            if (newValue !== null && isNumeric(newValue)) {\r\n                                if ((newValue as number) < 0) {\r\n                                    newValue = 0;\r\n                                } else {\r\n                                    conditionInput.selectList.filter(s => s.name == addCondition.).forEach(entry => {\r\n                                        if (newValue !== null && (newValue as number) >= entry.options.length) {\r\n                                            newValue = entry.options.length - 1;\r\n                                        }\r\n                                    })\r\n                                }\r\n                            }\r\n                        } else {\r\n                            newValue = true;\r\n                        }\r\n                        myConditionValuesAfter[addCondition.] = newValue;\r\n                    }\r\n                    if (addCondition.) {\r\n                        if (Array.isArray(addCondition.)) {\r\n                            addCondition..forEach((desc: string) => {\r\n                                if (!damageResult[''].includes(desc)) {\r\n                                    damageResult[''].push(desc);\r\n                                }\r\n                            })\r\n                        } else {\r\n                            const desc = addCondition.;\r\n                            if (!damageResult[''].includes(desc)) {\r\n                                damageResult[''].push(desc);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (detailObj[''] || detailObj['']) {\r\n            const myConditionInputAfter: TConditionInput = _.cloneDeep(conditionInput);\r\n            myConditionInputAfter.conditionValues = myConditionValuesAfter;\r\n            const validConditionValueArrAfter = makeValidConditionValueArr(myConditionInputAfter);\r\n\r\n            [characterInput.damageDetailMyCharacter, characterInput.damageDetailMyWeapon, characterInput.damageDetailMyArtifactSets].forEach(damageDetail => {\r\n                if (!damageDetail) return;\r\n                damageDetail..filter(s => s.).forEach(damageDetailObj => {\r\n                    if (damageDetailObj. === null) {\r\n                        return;\r\n                    }\r\n                    const conditionStr = damageDetailObj. as string;\r\n                    const matchesBefore = checkConditionMatches(conditionStr, validConditionValueArr, constellation);\r\n                    const matchesAfter = checkConditionMatches(conditionStr, validConditionValueArrAfter, constellation);\r\n                    if (matchesBefore == matchesAfter) {\r\n                        return;\r\n                    }\r\n                    let valueBefore = 0;\r\n                    let valueAfter = 0;\r\n                    let before = damageDetailObj.;\r\n                    if (before.includes('${INDEX}')) {\r\n                        before = before.replaceAll('${INDEX}', String(matchesBefore));\r\n                    } else if (matchesBefore !== 0) {\r\n                        before = '(' + before + ')*' + matchesBefore;\r\n                    } else {\r\n                        before = '0';\r\n                    }\r\n                    valueBefore = evalFormula(before, statsObj, damageResult, damageDetailObj., damageDetailObj.);\r\n                    let after = damageDetailObj.;\r\n                    if (after.includes('${INDEX}')) {\r\n                        after = after.replaceAll('${INDEX}', String(matchesAfter));\r\n                    } else if (matchesAfter !== 0) {\r\n                        after = '(' + after + ')*' + matchesAfter;\r\n                    } else {\r\n                        after = '0';\r\n                    }\r\n                    valueAfter = evalFormula(after, statsObj, damageResult, damageDetailObj., damageDetailObj.);\r\n                    const diff = valueAfter - valueBefore;\r\n                    if (diff) {\r\n                        let new = damageDetailObj. as string;\r\n                        if (damageDetailObj.) {\r\n                            new += '.' + damageDetailObj.;\r\n                        }\r\n                        if (new in my) {\r\n                            my[new] += diff;\r\n                        } else {\r\n                            my[new] = diff;\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n\r\n            validConditionValueArr = validConditionValueArrAfter;\r\n        }\r\n\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n        if (talentChangeDetailObjArr) {\r\n            // \r\n            talentChangeDetailObjArr.forEach(valueObj => {\r\n                let number = null;\r\n                if (valueObj.) {\r\n                    number = checkConditionMatches(valueObj., validConditionValueArr, constellation);\r\n                    if (number === 0) {\r\n                        return;\r\n                    }\r\n                }\r\n                if (valueObj.) {\r\n                    if (valueObj..endsWith('')) {    // for \r\n                        if (!valueObj..startsWith(my)) {\r\n                            return;\r\n                        }\r\n                    } else if (valueObj. == '') {\r\n                        if (my != '') {\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        //  or .\r\n                        const my = detailObj.;\r\n                        const myArr = valueObj..split('.');\r\n                        if (myArr[0] != my) {\r\n                            return;\r\n                        }\r\n                        if (myArr.length > 1 && myArr[myArr.length - 1] != detailObj.) {\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                if (valueObj[''].endsWith('')) {   // \r\n                    if (['', '', ''].includes(detailObj.)) {\r\n                        if (!detailObj['']) {\r\n                            my = valueObj[''].replace('', '');\r\n                        }\r\n                    }\r\n                } else if (valueObj. == '') {   //  for \r\n                    const myValue = evalFormula(valueObj., statsObj, damageResult, valueObj., valueObj.);\r\n                    my += myValue;\r\n                } else if (valueObj. == '') {\r\n                    // nop\r\n                } else {\r\n                    if (number != null && number != 1) {    // @\r\n                        const myNewValueObj = JSON.parse(JSON.stringify(valueObj)); // _.cloneDeep\r\n                        if (_.isString(myNewValueObj.)) {\r\n                            myNewValueObj. += '*' + number;\r\n                        } else if (_.isArray(myNewValueObj.)) {\r\n                            myNewValueObj. = myNewValueObj..concat(['*', number]);\r\n                        }\r\n                        myTalentChangeDetailObjArr.push(myNewValueObj);\r\n                    } else {\r\n                        myTalentChangeDetailObjArr.push(valueObj);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // \r\n        const tempStatsObj: TStats = {};\r\n        [statsObj, my].forEach(entryObj => {\r\n            Object.keys(entryObj).forEach(stat => {\r\n                const tempArr = stat.split('.');\r\n                if (tempArr.length == 1) return;\r\n                let isValid = false;\r\n                if (tempArr[1] == detailObj.) {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    } else if (tempArr[2] == detailObj.) {\r\n                        if (tempArr.length == 3) {\r\n                            isValid = true;\r\n                        }\r\n                    }\r\n                } else if (tempArr[1] == (my + '')) {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    }\r\n                } else if (tempArr[1] == '' && my == '') {\r\n                    if (tempArr.length == 2) {\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                if (isValid) {\r\n                    const toStat = tempArr[0];\r\n                    if (toStat in tempStatsObj) {\r\n                        if (toStat == '' && tempStatsObj[toStat] > 0) {\r\n                            tempStatsObj[toStat] *= entryObj[stat] / 100;   // for \r\n                        } else {\r\n                            tempStatsObj[toStat] += entryObj[stat];\r\n                        }\r\n                    } else {\r\n                        tempStatsObj[toStat] = entryObj[stat];\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        Object.keys(tempStatsObj).forEach(stat => {\r\n            if (stat in my) {\r\n                if (stat.startsWith('') && my[stat] > 0) {\r\n                    my[stat] *= tempStatsObj[stat] / 100;   // for \r\n                } else {\r\n                    my[stat] += tempStatsObj[stat];\r\n                }\r\n            } else {\r\n                my[stat] = tempStatsObj[stat];\r\n            }\r\n        });\r\n\r\n        // for  0.05\r\n        const damageDetailMyArtifactSets = characterInput.damageDetailMyArtifactSets;\r\n        if (damageDetailMyArtifactSets) {\r\n            if (detailObj. == '' && detailObj.HIT > 1\r\n                && characterInput.artifactSets[0] == '' && characterInput.artifactSets[1] == '') {\r\n                let isValid = false;\r\n                for (const valueObj of damageDetailMyArtifactSets[CHANGE_KIND_STATUS].filter(s => s. && s. && s.)) {\r\n                    const my = valueObj. as string; // \r\n                    const my = valueObj. as string;\r\n                    const myHIT = detailObj.HIT;\r\n                    if (checkConditionMatches(my, validConditionValueArr, constellation) !== 0) {\r\n                        const my = valueObj.;\r\n                        const myValue = evalFormula(my, statsObj, damageResult, valueObj., valueObj.);\r\n                        if (!(my in my)) {\r\n                            my[my] = 0;\r\n                        }\r\n                        my[my] -= myValue * (myHIT - Math.max(1, Math.floor(myHIT / 2))) / myHIT;\r\n                        isValid = true;\r\n                    }\r\n                }\r\n                if (isValid) {\r\n                    const description = '4HIT3HIT14HIT2';\r\n                    if (!damageResult[''].includes(description)) {\r\n                        damageResult[''].push(description);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \r\n        Object.keys(my).forEach(stat => {\r\n            if (stat in statsObj) {\r\n                if (stat.startsWith('') && statsObj[stat] > 0) {\r\n                    statsObj[stat] *= my[stat];\r\n                } else {\r\n                    statsObj[stat] += my[stat];\r\n                }\r\n            } else {\r\n                statsObj[stat] = my[stat];\r\n            }\r\n        });\r\n\r\n        if (statsObj['']) {\r\n            my = statsObj[''];\r\n        }\r\n\r\n        switch (detailObj.) {\r\n            case 'HP':\r\n                myArr.push('');\r\n                myArr.push('');\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':\r\n                myArr.push('');\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                break;\r\n            case 'HP':    // for  \r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':\r\n                isCalc = false;\r\n                isCalc = false;\r\n                break;\r\n            case 'HP':\r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            case '':    // for \r\n                if (!['', '', '', ''].includes(my)) {\r\n                    my = '';\r\n                }\r\n                break;\r\n            case 'HP':  // for  \r\n                isCalc = false;\r\n                isCalc = false;\r\n                isCalc = false;\r\n                my = null;\r\n                break;\r\n            default:\r\n                if (detailObj..startsWith('') || detailObj..startsWith('')) {\r\n                    isCalc = false;\r\n                    isCalc = false;\r\n                    isCalc = false;\r\n                    my = null;\r\n                } else {\r\n                    myArr.push('');\r\n                    if (detailObj. != 'NONE') {  // for \r\n                        if (detailObj.) {\r\n                            myArr.push(detailObj.);\r\n                        } else if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\r\n                            myArr.push(detailObj. + '');\r\n                        }\r\n                    }\r\n                    if (my) {\r\n                        myArr.push(my == '' ? '' : my + '');\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        const myResult = calculateDamageFromDetailSub(statsObj, damageResult, detailObj., myArr, isCalc, isCalc, isCalc, my, my, my, detailObj., detailObj.);\r\n\r\n        myTalentChangeDetailObjArr.forEach(valueObj => {\r\n            const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, valueObj., myArr, isCalc, isCalc, isCalc, my, my, null, valueObj., valueObj.);\r\n            if (valueObj..endsWith('')) {  // \r\n                if (detailObj. == '') return;  // for \r\n                if (DAMAGE_CATEGORY_ARRAY.includes(detailObj.)) {\r\n                    // HITHIT\r\n                    if (myHIT > 1) {\r\n                        myResultWork[2] *= myHIT;\r\n                        if (myResultWork[3] != null) {\r\n                            myResultWork[3] *= myHIT;\r\n                        }\r\n                        myResultWork[4] *= myHIT;\r\n                    }\r\n                }\r\n            }\r\n            myResult[2] += myResultWork[2];\r\n            if (myResult[3] != null && myResultWork[3]) {\r\n                myResult[3] += myResultWork[3];\r\n            }\r\n            myResult[4] += myResultWork[4];\r\n        });\r\n\r\n        // \r\n        if ([...DAMAGE_CATEGORY_ARRAY, ''].includes(detailObj.)) {\r\n            let my = detailObj.;\r\n            if (detailObj.) {    // for \r\n                const temp = detailObj..replace(/$/, '');\r\n                if (DAMAGE_CATEGORY_ARRAY.includes(temp)) {\r\n                    my = temp;\r\n                }\r\n            }\r\n\r\n            const dmgUpStatArr = [];\r\n            dmgUpStatArr.push(my + '');\r\n            if (my) {\r\n                dmgUpStatArr.push(my == '' ? '' : my + '');\r\n            }\r\n            dmgUpStatArr.forEach(dmgUpStat => {\r\n                if (!statsObj[dmgUpStat]) return;\r\n                if (!isCalc || !isCalc) return;\r\n\r\n                if (detailObj..startsWith('_')) return;    // for \r\n\r\n                const myResultWork = calculateDamageFromDetailSub(statsObj, damageResult, statsObj[dmgUpStat], myArr, isCalc, isCalc, isCalc, my, my, null);\r\n                // HITHIT\r\n                if (myHIT > 1) {\r\n                    myResultWork[2] *= myHIT;\r\n                    if (myResultWork[3] != null) {\r\n                        myResultWork[3] *= myHIT;\r\n                    }\r\n                    myResultWork[4] *= myHIT;\r\n                }\r\n                myResult[2] += myResultWork[2];\r\n                if (myResult[3] != null && myResultWork[3]) {\r\n                    myResult[3] += myResultWork[3];\r\n                }\r\n                myResult[4] += myResultWork[4];\r\n            });\r\n        }\r\n\r\n        // \r\n        Object.keys(my).forEach(statName => {\r\n            statsObj[statName] -= my[statName];\r\n        });\r\n\r\n        if (detailObj. == '') {\r\n            if (myResult[1] == '') {  //  for  \r\n                myResult[2] = myResult[2] * 1.5;\r\n                myResult[4] = myResult[4] * 1.5;\r\n            }\r\n        }\r\n\r\n        const resultArr = [detailObj., myResult[1], myResult[2], myResult[3], myResult[4], detailObj., detailObj.HIT, myResult[7], myResult[8]] as TDamageResultEntry;\r\n        console.debug(resultArr);\r\n        return resultArr;\r\n    } catch (error) {\r\n        console.error(error);\r\n        console.error(detailObj, characterInput, conditionInput, statsObj, opt_element);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport function isUseReference(formula: number | string) {\r\n    return _.isString(formula) && formula.includes('#');\r\n}\r\n\r\nfunction calculateDamageFromDetailSub(\r\n    statsObj: TStats,\r\n    damageResult: TDamageResult,\r\n    formula: number | string,\r\n    buffArr: Array<string> | null,\r\n    isCalc: boolean,\r\n    isCalc: boolean,\r\n    isCalc: boolean,\r\n    : string,\r\n    : number,\r\n    : number | null,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null\r\n): TDamageResultEntry {\r\n    const my = evalFormula(formula, statsObj, damageResult, opt_max, opt_min);\r\n    let my = my;\r\n\r\n    if () { //  for \r\n        my *=  / 100;\r\n    } else {\r\n         = 1;\r\n    }\r\n\r\n    // \r\n    if (isUseReference(formula)) {\r\n        buffArr = null;\r\n        isCalc = false;\r\n        isCalc = false;\r\n    }\r\n\r\n    let my = 1;\r\n    if (buffArr) {\r\n        my = 100;   // percent\r\n        buffArr.forEach(buff => {\r\n            if (statsObj[buff]) {\r\n                my += statsObj[buff];\r\n            }\r\n        });\r\n        my = my / 100;\r\n        my *= my;\r\n    }\r\n\r\n    let my = 1;\r\n    if (isCalc) {\r\n        my = calculateEnemyDef(statsObj, );\r\n        my *= my;\r\n    }\r\n\r\n    let my = 1;\r\n    if (isCalc && ) {\r\n        my = calculateEnemyRes(, statsObj);\r\n        my *= my;\r\n    }\r\n\r\n    let my = statsObj[''];\r\n    if ( == '') {\r\n        if ('' in statsObj) {\r\n            my += statsObj[''];\r\n        }\r\n    } else if (( + '') in statsObj) {\r\n        my += statsObj[ + ''];\r\n    }\r\n    my = Math.min(100, Math.max(0, my)) / 100;    // 01\r\n\r\n    let my = statsObj[''];\r\n    if ( == '') {\r\n        if ('' in statsObj) {\r\n            my += statsObj[''];\r\n        }\r\n    } else if (( + '') in statsObj) {\r\n        my += statsObj[ + ''];\r\n    }\r\n    my = (100 + my) / 100;\r\n\r\n    let myResult = null;\r\n    let myResult = my;\r\n    if (isCalc && my > 0) {\r\n        myResult = my * my;\r\n        myResult = (myResult * my) + (my * (1 - my));\r\n    }\r\n\r\n    console.debug('[%f] [%o=%f] [%f,%f] [%f] [%f]', , buffArr, my, my, my, my, my);\r\n    return ['', , myResult, myResult, my, null, null, my, my];\r\n}\r\n\r\nfunction getChangeDetailObjArr(characterInput: TCharacterInput, changeKind: string) {\r\n    let result = [] as any[];\r\n    if (!characterInput) return result;\r\n\r\n    if (characterInput.damageDetailMyCharacter && changeKind in characterInput.damageDetailMyCharacter) {\r\n        result = result.concat((characterInput.damageDetailMyCharacter as any)[changeKind]);\r\n    }\r\n    if (characterInput.damageDetailMyWeapon && changeKind in characterInput.damageDetailMyWeapon) {\r\n        result = result.concat((characterInput.damageDetailMyWeapon as any)[changeKind]);\r\n    }\r\n    if (characterInput.damageDetailMyArtifactSets && changeKind in characterInput.damageDetailMyArtifactSets) {\r\n        result = result.concat((characterInput.damageDetailMyArtifactSets as any)[changeKind]);\r\n    }\r\n    return result;\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction updateStats(\r\n    statsObj: TStats,\r\n    statName: string,\r\n    formulaArr: number | string,\r\n    opt_max: number | string | null = null,\r\n    opt_min: number | string | null = null,\r\n) {\r\n    const value = evalFormula(formulaArr, statsObj, DAMAGE_RESULT_TEMPLATE, opt_max, opt_min);    // DAMAGE_RESULT_TEMPLATE\r\n    if (!isNumeric(value)) {\r\n        console.error(statsObj, statName, formulaArr, value);\r\n    }\r\n    const nameArr = [];\r\n    if (statName == 'HP') {\r\n        nameArr.push('HP');\r\n    } else if (statName.startsWith('')) {\r\n        nameArr.push(statName.replace(/^/, String(statsObj[''])));\r\n    } else if (statName.startsWith('')) {\r\n        ALL_ELEMENTS.forEach(entry => {\r\n            nameArr.push(statName.replace(/^/, entry));\r\n        });\r\n    } else if (statName.startsWith('')) {\r\n        nameArr.push(statName.replace(/^/, '' + String(statsObj[''])));\r\n    } else if (statName.startsWith('')) {\r\n        ALL_ELEMENTS.forEach(entry => {\r\n            nameArr.push(statName.replace(/^/, '' + entry));\r\n        });\r\n    } else {\r\n        nameArr.push(statName);\r\n    }\r\n    const diffStats = {} as { [key: string]: number };\r\n    nameArr.forEach(name => {\r\n        diffStats[name] = value;\r\n    });\r\n    for (const name of Object.keys(diffStats)) {\r\n        if (name in statsObj) {\r\n            if (name.startsWith('') && diffStats[name] > 0) {\r\n                statsObj[name] *= diffStats[name] / 100;    // for \r\n            } else {\r\n                statsObj[name] += diffStats[name];\r\n            }\r\n        } else {\r\n            statsObj[name] = diffStats[name];\r\n        }\r\n    }\r\n    console.debug(updateStats.name, null, statName, formulaArr, '=>', diffStats);\r\n    return diffStats;\r\n}\r\n\r\n/**  */\r\nfunction calculateDamageTaken(statsObj: TStats, damage: number, element: string) {\r\n    const def = statsObj[''];\r\n    const enemyLevel = statsObj[''];\r\n    const dmgReduction = statsObj[''];\r\n    const res = calculateRes(statsObj[element == '' ? '' : element + '']);\r\n    let result = damage * (1 - def / (def + 5 * enemyLevel + 501)) * (100 - dmgReduction) / 100 * res;\r\n    result = Math.max(0, result);\r\n    return result;\r\n}\r\n\r\n// function flattenArray(value: any) {\r\n//     const result: any[] = [];\r\n//     if (Array.isArray(value)) {\r\n//         value.forEach(e => {\r\n//             if (Array.isArray(e)) {\r\n//                 result.push(...flattenArray(e));\r\n//             } else {\r\n//                 result.push(e);\r\n//             }\r\n//         });\r\n//     }\r\n//     return result;\r\n// }\r\n\r\nexport function calculateArtifactScore(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    scoringStats: [string, number][]\r\n) {\r\n    let result = 0;\r\n    for (const scoringStat of scoringStats) {\r\n        const stat = scoringStat[0];\r\n        const magnification = scoringStat[1];\r\n        const statValue = (artifactDetailInput. as any)[stat];\r\n        if (statValue) {\r\n            result += statValue * magnification;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateStatsTop(\r\n    statsObj: TStats,\r\n    optionInput: TOptionInput,\r\n) {\r\n    ARRAY.forEach(stat => {\r\n        const srcStat = stat.replace(/TOP$/, 'X7');\r\n        let srcStatValue = getStatValue(srcStat, statsObj);\r\n        if (srcStatValue) {\r\n            statsObj[stat] = srcStatValue;\r\n        }\r\n        for (const member of optionInput.teamMembers) {\r\n            const calculatedSupporter = optionInput.supporters[member];\r\n            if (!calculatedSupporter?.statsInput?.statsObj) continue;\r\n            srcStatValue = getStatValue(srcStat, calculatedSupporter.statsInput.statsObj);\r\n            if (srcStatValue !== undefined) {\r\n                if (statsObj[stat] < srcStatValue) {\r\n                    statsObj[stat] = srcStatValue;\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport async function setupTeamOptionSupporter(\r\n    optionInput: TOptionInput,\r\n    supporter: TCharacterKey,\r\n    build?: string,\r\n    character?: TCharacterKey,\r\n): Promise<[TStats, TDamageResult]> {\r\n    const characterInput = getDefaultCharacterInput();\r\n    const artifactDetailInput = getDefaultArtifactDetailInput();\r\n    const conditionInput = getDefaultConditionInput();\r\n    const statsInput = getDefaultStatsInput();\r\n    const damageResult = getDefaultDamageResultInput();\r\n    const optionDetails1: TDamageDetailObj[] = [];\r\n    const optionDetails2: TDamageDetailObj[] = [];\r\n    const conditionMap = new Map<string, string[] | object | null>();\r\n    const exclusionMap = new Map<string, string[]>();\r\n\r\n    characterInput.character = supporter;\r\n    characterInput.characterMaster = await getCharacterMasterDetail(characterInput.character);\r\n\r\n    if (build) {\r\n        const builddata = JSON.parse(build);\r\n\r\n        await loadRecommendation(characterInput, artifactDetailInput, conditionInput, optionInput, builddata);\r\n        makeDamageDetailObjArrObjCharacter(characterInput);\r\n        makeDamageDetailObjArrObjWeapon(characterInput);\r\n        makeDamageDetailObjArrObjArtifactSets(characterInput);\r\n        setupConditionValues(conditionInput, characterInput, optionInput);\r\n        calculateArtifactStatsMain(artifactDetailInput., artifactDetailInput.);\r\n        calculateArtifactStats(artifactDetailInput);\r\n        if (optionInput.elementalResonance) {\r\n            optionInput.elementalResonance.conditionAdjustments = calculateElementalResonance(optionInput.elementalResonance.conditionValues, conditionInput);\r\n        }\r\n        calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n        updateNumberConditionValues(conditionInput, characterInput, statsInput.statsObj);\r\n        calculateStats(statsInput, characterInput, artifactDetailInput, conditionInput, optionInput);\r\n\r\n        if (character && characterInput.character === '') {\r\n            // for \r\n            const myCharacterMaster = await getCharacterMasterDetail(character);\r\n            if ('' in myCharacterMaster['']) {\r\n                statsInput.statsObj[''] = Number(myCharacterMaster['']['']);\r\n            }\r\n        }\r\n\r\n        calculateDamageResult(damageResult, characterInput, conditionInput, statsInput);\r\n    }\r\n\r\n    // TEAM_OPTION_MASTER\r\n    const teamOptions: any[] = [];\r\n    TEAM_OPTION_MASTER_LIST.filter(entry => entry.key.startsWith(supporter + '_')).forEach(entry => {\r\n        if (_.isArray(entry.)) {\r\n            for (const detailObj of entry.) {\r\n                (detailObj as any). = makeSupporterCondition(supporter, entry., (detailObj as any).);\r\n            }\r\n        }\r\n        teamOptions.splice(teamOptions.length, 0, ...makeDamageDetailObjArr(entry, null, null, null, optionDetails1, optionDetails2, ''));\r\n    })\r\n    teamOptions.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    })\r\n    optionDetails1.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    })\r\n    optionDetails2.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    })\r\n    conditionMap.forEach((value, key) => {\r\n        if (value && _.isArray(value)) {\r\n            if (!value[0].startsWith('required_')) {\r\n                conditionMap.set(key, ['', ...value]);\r\n            }\r\n        }\r\n    })\r\n    // CHARACTER_MASTER\r\n    let characterOptions: any[] = [];\r\n    if (characterInput.characterMaster?.) {\r\n        characterOptions = characterInput.characterMaster.;\r\n    }\r\n    // WEAPON_MASTER\r\n    let weaponOptions: any[] = [];\r\n    if (characterInput.weaponMaster?.) {\r\n        weaponOptions = characterInput.weaponMaster.;\r\n    }\r\n    // ARTIFACT_SET_MASTER\r\n    const artifactSetOptions: any[] = [];\r\n    if (characterInput.artifactSets[0] && characterInput.artifactSets[1] && characterInput.artifactSets[0] == characterInput.artifactSets[1]) {\r\n        if (characterInput.artifactSetMasters[0]['4']) {\r\n            if (_.isArray(characterInput.artifactSetMasters[0]['4'][''])) {\r\n                characterInput.artifactSetMasters[0]['4'][''].forEach(detailObj => {\r\n                    if (detailObj.) {\r\n                        if (_.isString(detailObj.)) {\r\n                            detailObj. = detailObj..replace('', '');\r\n                        }\r\n                        artifactSetOptions.push(detailObj);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n    for (const options of [characterOptions, weaponOptions, artifactSetOptions]) {\r\n        if (options.length) {\r\n            const damageDetailObjArr = makeTeamOptionDetailObjArr(options);\r\n            damageDetailObjArr.forEach((damageDetailObj) => {\r\n                const condition = makeSupporterCondition(supporter, damageDetailObj., damageDetailObj.);\r\n                damageDetailObj. = condition;\r\n                const changeKind = getChangeKind(damageDetailObj. as string);\r\n                if (changeKind === 'STATUS' &&\r\n                    optionDetails1.filter((s) => s. == condition && s. == damageDetailObj.).length === 0\r\n                ) {\r\n                    optionDetails1.splice(optionDetails1.length, 0, damageDetailObj);\r\n                }\r\n                if (changeKind === 'TALENT' &&\r\n                    optionDetails2.filter((s) => s. == condition && s. == damageDetailObj.).length === 0\r\n                ) {\r\n                    optionDetails2.splice(optionDetails2.length, 0, damageDetailObj);\r\n                }\r\n                makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n            })\r\n        }\r\n    }\r\n\r\n    optionInput.supporters[supporter] = {\r\n        characterInput: characterInput,\r\n        artifactDetailInput: artifactDetailInput,\r\n        conditionInput: conditionInput,\r\n        statsInput: statsInput,\r\n        damageResult: damageResult,\r\n        optionDetails1: optionDetails1,\r\n        optionDetails2: optionDetails2,\r\n        conditionMap: conditionMap,\r\n        exclusionMap: exclusionMap,\r\n    };\r\n\r\n    console.log(supporter, optionDetails1, optionDetails2, conditionMap, exclusionMap);\r\n    return [statsInput.statsObj, damageResult];\r\n}\r\n\r\nfunction makeSupporterCondition(supporter: string, name: string | null, condition: string | null | undefined) {\r\n    let result = supporter + '*';\r\n    if (condition) {\r\n        result += condition.replace(/([&|^])/g, '$1' + supporter + '*');\r\n    } else if (name) {\r\n        result += name;\r\n    }\r\n    result = result.replace(supporter + '*' + supporter + '*', supporter + '*');\r\n    return result;\r\n}\r\n\r\nexport function calculateTeamStatsAdjustments(optionInput: TOptionInput, topStats: TStats, character: string) {\r\n    const result = {} as TStats;\r\n    const validConditionValueArr: string[] = [];\r\n    makeValidConditionValueArr(optionInput.teamOption).forEach(value => {\r\n        const indexOf = value.indexOf('*');\r\n        const supporter = value.substring(0, indexOf);\r\n        console.log(supporter, character);\r\n        if (supporter != character) {\r\n            const work = value.substring(indexOf);\r\n            if (validConditionValueArr.filter(s => s.endsWith(work)).length === 0) {\r\n                validConditionValueArr.push(value);\r\n            }\r\n        }\r\n    })\r\n    Object.keys(optionInput.supporters).filter(supporter => supporter != character).forEach(supporter => {\r\n        [\r\n            optionInput.supporters[supporter]?.optionDetails1,\r\n            optionInput.supporters[supporter]?.optionDetails2,\r\n        ].forEach(optionDetails => {\r\n            if (optionDetails === undefined) {\r\n                return;\r\n            }\r\n            for (const detailObj of optionDetails) {\r\n                let my = detailObj.;\r\n                if (my === null) {\r\n                    continue;\r\n                }\r\n                if (detailObj.) {\r\n                    const number = checkConditionMatches(detailObj., validConditionValueArr, 6);\r\n                    if (number === 0) continue;\r\n                    if (my.includes('${INDEX}')) {\r\n                        my = my.replaceAll('${INDEX}', String(number));\r\n                    } else {\r\n                        my = '(' + my + ')*' + number;\r\n                    }\r\n                }\r\n                const workInput = optionInput.supporters[supporter];\r\n                const statsObj = workInput ? workInput.statsInput.statsObj : _.cloneDeep(TEMPLATE);\r\n                const damageResult = workInput ? workInput.damageResult : _.cloneDeep(DAMAGE_RESULT_TEMPLATE);\r\n                Object.keys(topStats).forEach(stat => { // \r\n                    statsObj[stat] = topStats[stat];\r\n                })\r\n                const myValue = evalFormula(my, statsObj, damageResult, detailObj., detailObj.);\r\n                const kinds = [] as string[];\r\n                if (detailObj.) {\r\n                    if (detailObj..startsWith('') || detailObj..startsWith('')) {\r\n                        for (const elem of ALL_ELEMENTS) {\r\n                            kinds.push(detailObj..replace('', elem));\r\n                        }\r\n                    } else {\r\n                        kinds.push(detailObj.);\r\n                    }\r\n                }\r\n                for (const kind of kinds) {\r\n                    let tempKind = kind;\r\n                    if (detailObj.) {\r\n                        tempKind += '.' + detailObj.;\r\n                    }\r\n                    if (tempKind in result) {\r\n                        result[tempKind] += myValue;\r\n                    } else {\r\n                        result[tempKind] = myValue;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    })\r\n    overwriteObject(optionInput.teamOption.conditionAdjustments, result);\r\n    return result;\r\n}\r\n\r\nexport function calculateMiscStatsAdjustments(optionInput: TOptionInput) {\r\n    const result = {} as TStats;\r\n    const validConditionValueArr: string[] = [];\r\n    const teamConditionValueArr = makeValidConditionValueArr(optionInput.teamOption);\r\n    makeValidConditionValueArr(optionInput.miscOption).forEach(value => {\r\n        if (teamConditionValueArr.filter(s => s.endsWith('*' + value)).length === 0) {\r\n            validConditionValueArr.push(value);\r\n        }\r\n    });\r\n    [\r\n        optionInput.miscOption.optionDetails1,\r\n        optionInput.miscOption.optionDetails2,\r\n    ].forEach(optionDetails => {\r\n        if (optionDetails === undefined) {\r\n            return;\r\n        }\r\n        for (const detailObj of optionDetails) {\r\n            let my = detailObj.;\r\n            if (my === null) {\r\n                continue;\r\n            }\r\n            if (detailObj.) {\r\n                const number = checkConditionMatches(detailObj., validConditionValueArr, 6);\r\n                if (number === 0) continue;\r\n                if (my.includes('${INDEX}')) {\r\n                    my = my.replaceAll('${INDEX}', String(number));\r\n                } else {\r\n                    my = '(' + my + ')*' + number;\r\n                }\r\n            }\r\n            const statsObj = TEMPLATE;\r\n            const damageResult = DAMAGE_RESULT_TEMPLATE;\r\n            const myValue = evalFormula(my, statsObj, damageResult, detailObj., detailObj.);\r\n            const kinds = [] as string[];\r\n            if (detailObj.) {\r\n                if (detailObj..startsWith('') || detailObj..startsWith('')) {\r\n                    for (const elem of ALL_ELEMENTS) {\r\n                        kinds.push(detailObj..replace('', elem));\r\n                    }\r\n                } else {\r\n                    kinds.push(detailObj.);\r\n                }\r\n            }\r\n            for (const kind of kinds) {\r\n                let tempKind = kind;\r\n                if (detailObj.) {\r\n                    tempKind += '.' + detailObj.;\r\n                }\r\n                if (tempKind in result) {\r\n                    result[tempKind] += myValue;\r\n                } else {\r\n                    result[tempKind] = myValue;\r\n                }\r\n            }\r\n        }\r\n    })\r\n    overwriteObject(optionInput.miscOption.conditionAdjustments, result);\r\n    return result;\r\n}\r\n\r\nexport function getCritFromResultEntry(entry: TDamageResultEntry) {\r\n    let critRate = 0;\r\n    let critDmg = 0;\r\n    if (entry[2] && entry[3] && entry[4]) {\r\n        critRate = entry[2] - entry[4]; //  - \r\n        critRate /= entry[3] - entry[4]; //  - \r\n        critRate = Math.round(critRate * 1000) / 10;\r\n        critDmg = Math.round((entry[3] / entry[4] - 1) * 1000) / 10;\r\n    }\r\n    return [critRate, critDmg];\r\n}\r\n\r\nexport function getDamageResultArr(\r\n    rotationDamageEntry: TRotationDamageEntry,\r\n    damageResult: TDamageResult,\r\n): TDamageResultEntry[] {\r\n    const result = [] as TDamageResultEntry[];\r\n    const category = rotationDamageEntry.category;\r\n    if (REACTION_DMG_ARR.includes(category)) {\r\n        result.push([\r\n            category,\r\n            REACTION_DMG_ELEMENT_MAP?.get(category) ?? null,\r\n            (damageResult. as any)[category],\r\n            null,\r\n            (damageResult. as any)[category],\r\n            null,\r\n            1,\r\n            null,\r\n            null,\r\n        ]);\r\n    } else {\r\n        for (let entry of damageResult[category] as TDamageResultEntry[]) {\r\n            if (entry[0].startsWith('')) continue;\r\n            if (entry[0].endsWith('')) continue;\r\n            if (entry[5]?.endsWith('')) {\r\n                if (entry[0].startsWith('')) {  // \r\n                    entry = _.cloneDeep(entry);\r\n                    const [critRate] = getCritFromResultEntry(entry);\r\n                    entry[2] = entry[2] * critRate / 100;\r\n                }\r\n                result.push(entry);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateRotationDamageEntry(\r\n    rotationDamageEntry: TRotationDamageEntry,\r\n    index: number,\r\n    damageResult: TDamageResult,\r\n) {\r\n    let result = 0;\r\n    const list = getDamageResultArr(rotationDamageEntry, damageResult);\r\n    if (list && list.length > index && rotationDamageEntry.reactions.length > index) {\r\n        const dmgResultEntry = list[index];\r\n        const reactionObj: any = rotationDamageEntry.reactions[index];\r\n        const count = rotationDamageEntry.counts[index];\r\n        const plainDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., ''); // \r\n        for (let n = 0; n < count; n++) {\r\n            let workDmg = plainDmg;\r\n            ['', ''].forEach((reaction) => {\r\n                if (reaction in reactionObj && n < reactionObj[reaction]) {\r\n                    workDmg = calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction);\r\n                }\r\n            });\r\n            result += workDmg;\r\n        }\r\n        ['', ''].forEach((reaction) => {\r\n            if (reaction in reactionObj) {\r\n                result += calculateReactedDamage(dmgResultEntry, 2, damageResult., reaction, reactionObj[reaction]) - plainDmg;\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function calculateRotationTotalDamage(\r\n    rotationDamageArr: TRotationDamageEntry[],\r\n    damageResult: TDamageResult,\r\n) {\r\n    let result = 0;\r\n    rotationDamageArr.forEach((rotationDamageEntry) => {\r\n        const list = getDamageResultArr(rotationDamageEntry, damageResult);\r\n        for (let i = 0; i < list.length; i++) {\r\n            result += calculateRotationDamageEntry(rotationDamageEntry, i, damageResult);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport function calculateReactedDamage(\r\n    dmgResultEntry: TDamageResultEntry,\r\n    dmgIndex: number,\r\n    elementalReaction: TDamageResultElementalReaction,\r\n    reaction: string,\r\n    reactionTimes = 1\r\n) {\r\n    let result = Number(dmgResultEntry[dmgIndex]); // 2:/3:/4:\r\n    const dmgElement = dmgResultEntry[1];\r\n    if (reaction && dmgElement) {\r\n        if (['', ''].includes(reaction)) {\r\n            const reactionKey = reaction + '_' + dmgElement;\r\n            if (reactionKey in elementalReaction) {\r\n                result *= (elementalReaction as any)[reactionKey];\r\n            }\r\n        } else if (['', ''].includes(reaction)) {\r\n            const reactionKey = reaction + '';\r\n            if (reactionKey in elementalReaction) {\r\n                let reactionDmg = (elementalReaction as any)[reactionKey];\r\n                if (dmgResultEntry[2]) {\r\n                    reactionDmg *= result / dmgResultEntry[4]; //  \r\n                }\r\n                if (dmgResultEntry[7]) {\r\n                    reactionDmg *= dmgResultEntry[7]; // \r\n                }\r\n                if (dmgResultEntry[8]) {\r\n                    reactionDmg *= dmgResultEntry[8]; // \r\n                }\r\n                reactionDmg *= reactionTimes; // \r\n                result += reactionDmg;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getAmplifyingReactionElement(reaction: string, dmgElement: string) {\r\n    let reactionElement;\r\n    if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    } else if (reaction === '' && dmgElement === '') {\r\n        reactionElement = '';\r\n    }\r\n    return reactionElement;\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport type TKeyValue = {\r\n    key: string, value: any,\r\n};\r\n\r\nexport function isString(value: any): boolean {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\n\r\nexport function isNumeric(value: any): boolean {\r\n    return isFinite(value) && value != null;\r\n}\r\n\r\nexport function isBoolean(value: any): boolean {\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isPlainObject(value: any): boolean {\r\n    const myType = Object.prototype.toString.call(value);\r\n    return myType === '[object Object]';\r\n}\r\n\r\n// /** deep copyundefined */\r\n// export function deepcopy(value: any): any {\r\n//     const result = JSON.parse(JSON.stringify(value));\r\n//     return result;\r\n// }\r\n\r\nexport function overwriteObject(dst: any, src: any) {\r\n    if (_.isPlainObject(src) && _.isPlainObject(dst)) {\r\n        const srcKeys = Object.keys(src);\r\n        for (const key of srcKeys) {\r\n            dst[key] = src[key];\r\n        }\r\n        for (const key of Object.keys(dst)) {\r\n            if (!srcKeys.includes(key)) delete dst[key];\r\n        }\r\n    }\r\n    return dst;\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport const basename = (path: string) => path!.split('/')!.pop()!.split('.')!.shift()!;\r\n","import { createI18n } from 'vue-i18n'\r\n\r\nconst i18n = createI18n({\r\n  legacy: false,\r\n  locale: 'ja-jp',\r\n  fallbackLocale: 'en-us',\r\n  isGlobal: true,\r\n})\r\nexport default i18n;\r\n","import { ALL_ELEMENTS, ARTIFACT_SET_MASTER, ARTIFACT_STAT_JA_EN_ABBREV_MAP, ARTIFACT_SUB_MASTER, CHARACTER_MASTER, ELEMENTAL_RESONANCE_MASTER, ELEMENTAL_RESONANCE_MASTER_LIST, ENEMY_MASTER_LIST, GENSEN_MASTER_LIST, getCharacterMasterDetail, getWeaponMasterDetail, IMG_SRC_DUMMY, NUMBER_OF_PRIORITY_SUBSTATS, OPTION1_MASTER_LIST, OPTION2_MASTER_LIST, RECOMMEND_ABBREV_MAP, TAnyObject, TArtifactSet, TArtifactSetEntry, TArtifactSetKey, TArtifactSubKey, TCharacterDetail, TCharacterKey, TEnemyEntry, TWeaponDetail, TWeaponKey, TWeaponTypeKey, WEAPON_MASTER, PROPERTY_MAP } from '@/master';\r\nimport _ from 'lodash';\r\nimport { basename, isNumeric, overwriteObject } from './common';\r\n\r\nexport const ARRAY = [\r\n    'HP',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    'HP',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '',\r\n    'HP%',\r\n    '%',\r\n    '%',\r\n    'HP+',\r\n    '+',\r\n    '+',\r\n];\r\nexport const ARRAY = [\r\n    'HPV1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n    'V1',\r\n];\r\nexport const ARRAY = [\r\n    'TOP',\r\n];\r\nexport const _ARRAY = [\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n];\r\nexport const _ARRAY = [\r\n    ''\r\n];\r\n\r\nexport const ARRAY_MAP = new Map([\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', _ARRAY],\r\n    ['', _ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', ARRAY],\r\n    ['', _ARRAY],\r\n    ['', _ARRAY],\r\n]);\r\n\r\nexport const STAT_PERCENT_LIST = [\r\n    ...ARRAY, ..._ARRAY, ..._ARRAY, ...ARRAY, ...ARRAY, ..._ARRAY,\r\n    '', '', '',\r\n];\r\n\r\nexport type TStats = {\r\n    [key: string]: number,\r\n};\r\n\r\nfunction makeStatusTemplate() {\r\n    const statsObj: TStats = {};\r\n    ARRAY_MAP.forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj[''] = 5;\r\n    statsObj[''] = 50;\r\n    statsObj[''] = 100;\r\n    statsObj[''] = 0;\r\n    statsObj[''] = 0;\r\n    return statsObj;\r\n}\r\nexport const TEMPLATE = makeStatusTemplate();\r\n\r\nfunction makeEnemyStatusTemplate() {\r\n    const statsObj: TStats = {};\r\n    [_ARRAY].forEach((value) => {\r\n        value.forEach(stat => {\r\n            statsObj[stat] = 0;\r\n        });\r\n    });\r\n    statsObj[''] = 0;\r\n    return statsObj;\r\n}\r\nexport const TEMPLATE = makeEnemyStatusTemplate();\r\n\r\nexport const _ARRAY = [\r\n    '5_HP', '4_HP'\r\n];\r\nexport const _ARRAY = [\r\n    '5_', '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_'\r\n];\r\nexport const _ARRAY = [\r\n    '5_',\r\n    '5_',\r\n    '5_HP%',\r\n    '5_%',\r\n    '5_%',\r\n    '5_',\r\n    '5_',\r\n    '4_',\r\n    '4_',\r\n    '4_HP%',\r\n    '4_%',\r\n    '4_%',\r\n    '4_',\r\n    '4_'\r\n];\r\n\r\nexport const ARRAY = [\r\n    'HP%',\r\n    'HP',\r\n    '%',\r\n    '',\r\n    '%',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n];\r\nexport const ARRAY = [\r\n    '%',\r\n    'HP%',\r\n    '%',\r\n    '',\r\n    '',\r\n    '',\r\n    '',\r\n    'HP',\r\n    '',\r\n    '',\r\n];\r\n\r\nexport const TEMPLATE = {\r\n    'HP': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    'HP%': 0,\r\n    '%': 0,\r\n    '%': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n    '': 0,\r\n};\r\n\r\nexport const TEMPLATE = {\r\n    : '',\r\n    _: 0,                 // 1.5\r\n    _: 0,                 // 2\r\n    _: 0,                 // 1.5\r\n    _: 0,                 // 2\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : '',\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,\r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,          // for \r\n    : 0,    // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n    : 0,        // for \r\n    : 0,  // for \r\n};\r\nexport type TDamageResultElementalReaction = typeof TEMPLATE;\r\nexport type TDamageResultElementalReactionKey = keyof typeof TEMPLATE;\r\n\r\nexport type TDamageResultEntry = [string, string | null, number, number | null, number, string | null, number | null, number | null, number | null];    // 0:, 1:, 2:, 3:, 4:, 5:, 6:HIT, 7:, 8:\r\nexport type TDamageResult = {\r\n    : TDamageResultElementalReaction,\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : TDamageResultEntry[],\r\n    : string[],\r\n    : any[],\r\n    : any[],\r\n    [key: string]: TDamageResultElementalReaction | TDamageResultEntry[] | string[],\r\n};\r\n\r\nexport const DAMAGE_RESULT_TEMPLATE = {\r\n    : _.cloneDeep(TEMPLATE) as TDamageResultElementalReaction,\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as TDamageResultEntry[],\r\n    : [] as string[],\r\n    : [] as any[],\r\n    : [] as any[],\r\n};\r\n\r\nexport const ARRAY = [\r\n    Array.from({ length: 20 }, (_, i) => i + 1),\r\n    Array.from({ length: 21 }, (_, i) => i + 20),\r\n    Array.from({ length: 11 }, (_, i) => i + 40),\r\n    Array.from({ length: 11 }, (_, i) => i + 50),\r\n    Array.from({ length: 11 }, (_, i) => i + 60),\r\n    Array.from({ length: 11 }, (_, i) => i + 70),\r\n    Array.from({ length: 11 }, (_, i) => i + 80),\r\n];\r\n\r\nexport type TDamageDetailObj = {\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    : string | null,\r\n    HIT: number | null,\r\n    : string | null,\r\n    : boolean | null,\r\n    : (string | object)[] | null,\r\n    : (string | object)[] | null,\r\n};\r\n\r\nexport type TDamageDetail = {\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    ?: TDamageDetailObj[],\r\n    : TDamageDetailObj[],\r\n    : TDamageDetailObj[],\r\n    : Map<string, string[] | object | null>,\r\n    : Map<string, string[]>,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_DUMMY = {\r\n    key: 'NONE' as TArtifactSetKey,\r\n    : 5,\r\n    image: IMG_SRC_DUMMY,\r\n} as TArtifactSet;\r\n\r\nexport const CHARACTER_INPUT_TEMPLATE = {\r\n    character: '' as TCharacterKey,\r\n    characterMaster: {} as TCharacterDetail,\r\n    : 6,\r\n    : 90,\r\n    : 0,\r\n    : 8,\r\n    : 8,\r\n    : 8,\r\n    weapon: '' as TWeaponKey,\r\n    weaponMaster: {} as TWeaponDetail,\r\n    : 6,\r\n    : 90,\r\n    : 1,\r\n    artifactSets: ['NONE' as TArtifactSetKey, 'NONE' as TArtifactSetKey],\r\n    artifactSetMasters: [ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[],\r\n    damageDetailMyCharacter: null as TDamageDetail | null,\r\n    damageDetailMyWeapon: null as TDamageDetail | null,\r\n    damageDetailMyArtifactSets: null as TDamageDetail | null,\r\n    damageDetailElementalResonance: null as TDamageDetail | null,\r\n    buildname: '',\r\n    recommendationSelectedIndex: 0,\r\n    saveDisabled: true,     // \r\n    removeDisabled: true,   // \r\n};\r\nexport type TCharacterInput = typeof CHARACTER_INPUT_TEMPLATE;\r\n\r\nexport const ARTIFACT_TEMPLATE = {\r\n    name: '',\r\n    rarity: 1,\r\n    setname: 'NONE',\r\n    cat_id: 1,\r\n    mainStat: '',\r\n    mainStatValue: 0,\r\n    subStats: [\r\n        { name: 'HP', value: 0 },\r\n        { name: '', value: 0 },\r\n        { name: '', value: 0 },\r\n        { name: '', value: 0 },\r\n    ]\r\n};\r\nexport type TArtifact = typeof ARTIFACT_TEMPLATE;\r\n\r\nexport const ARTIFACT_DETAIL_INPUT_TEMPLATE = {\r\n    : ['', '', '', '', ''],\r\n    : _.fill(Array(NUMBER_OF_PRIORITY_SUBSTATS), ''),\r\n    : Array.from(GENSEN_MASTER_LIST[2].values),     // 1\r\n    : Array.from(GENSEN_MASTER_LIST[2].counts),   // 1\r\n    : _.cloneDeep(TEMPLATE),\r\n    : _.cloneDeep(TEMPLATE),\r\n    : _.cloneDeep(TEMPLATE),\r\n    Disabled: false,\r\n    artifact_list: [] as TArtifact[],\r\n};\r\nexport type TArtifactDetailInput = typeof ARTIFACT_DETAIL_INPUT_TEMPLATE;\r\n\r\nexport type TCheckboxEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n};\r\nexport type TSelectEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n    options: string[];\r\n    required: boolean;\r\n};\r\nexport type TNumberEntry = {\r\n    name: string;\r\n    displayName?: string;\r\n    min: number | string;\r\n    max?: number | string | undefined;\r\n    step: number;\r\n};\r\nexport type TConditionValues = {\r\n    [key: string]: boolean | number | null,\r\n};\r\nexport type TConditionAdjustments = {\r\n    [key: string]: number | null,\r\n};\r\nexport const CONDITION_INPUT_TEMPLATE = {\r\n    optionDetails1: [] as TDamageDetailObj[],\r\n    optionDetails2: [] as TDamageDetailObj[],\r\n    conditionMap: new Map<string, string[] | object | null>(),\r\n    exclusionMap: new Map<string, string[]>(),\r\n    checkboxList: [] as TCheckboxEntry[],\r\n    selectList: [] as TSelectEntry[],\r\n    numberList: [] as TNumberEntry[],\r\n    conditionValues: {} as TConditionValues,\r\n    conditionAdjustments: {} as TConditionAdjustments,\r\n    : [null, null, null] as (string | null)[],\r\n};\r\nexport type TConditionInput = typeof CONDITION_INPUT_TEMPLATE;\r\n\r\nexport const STATS_INPUT_TEMPLATE = {\r\n    statsObj: _.cloneDeep(TEMPLATE) as TStats,\r\n    statAdjustments: _.cloneDeep(TEMPLATE) as TStats,\r\n    statAdjustmentsEx: {} as TStats,\r\n    enemyMaster: ENEMY_MASTER_LIST[0] as TEnemyEntry,\r\n};\r\nfor (const stat of Object.keys(STATS_INPUT_TEMPLATE.statAdjustments)) {\r\n    STATS_INPUT_TEMPLATE.statAdjustments[stat] = 0;\r\n}\r\nexport type TStatsInput = typeof STATS_INPUT_TEMPLATE;\r\n\r\nexport function getDefaultCharacterInput(): TCharacterInput {\r\n    return _.cloneDeep(CHARACTER_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultArtifactDetailInput(): TArtifactDetailInput {\r\n    return _.cloneDeep(ARTIFACT_DETAIL_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultConditionInput(): TConditionInput {\r\n    return _.cloneDeep(CONDITION_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultOptionInput(): TOptionInput {\r\n    return _.cloneDeep(OPTION_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultStatsInput(): TStatsInput {\r\n    return _.cloneDeep(STATS_INPUT_TEMPLATE);\r\n}\r\nexport function getDefaultDamageResultInput(): TDamageResult {\r\n    return _.cloneDeep(DAMAGE_RESULT_TEMPLATE);\r\n}\r\n\r\nexport type TElementalResonance = {\r\n    conditionValues: TConditionValues,\r\n    conditionAdjustments: TConditionAdjustments,\r\n};\r\n\r\nexport const SUPPORTER_INPUT_TEMPLATE = {\r\n    characterInput: getDefaultCharacterInput(),\r\n    artifactDetailInput: getDefaultArtifactDetailInput(),\r\n    conditionInput: getDefaultConditionInput(),\r\n    statsInput: getDefaultStatsInput(),\r\n    damageResult: getDefaultDamageResultInput(),\r\n    optionDetails1: [] as TDamageDetailObj[],\r\n    optionDetails2: [] as TDamageDetailObj[],\r\n    conditionMap: new Map<string, string[] | object | null>(),\r\n    exclusionMap: new Map<string, string[]>(),\r\n};\r\nexport type TSupporterInput = typeof SUPPORTER_INPUT_TEMPLATE;\r\nexport type TSupporters = { [key: string]: TSupporterInput | undefined };\r\n\r\nexport const OPTION_INPUT_TEMPLATE = {\r\n    elementalResonance: {\r\n        conditionValues: {},\r\n        conditionAdjustments: {},\r\n    } as TElementalResonance,\r\n    supporterBuildname: {} as { [key: string]: string | undefined },\r\n    supporters: {} as TSupporters,\r\n    teamMembers: [] as string[],\r\n    teamOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n    miscOption: _.cloneDeep(CONDITION_INPUT_TEMPLATE) as TConditionInput,\r\n};\r\nexport type TOptionInput = typeof OPTION_INPUT_TEMPLATE;\r\n\r\n/** 1+,20,20+,...,90 */\r\nfunction parseLevelStr(levelStr: number | string): [number, number] {\r\n    let result: [number, number] = [0, 1];\r\n    try {\r\n        let level: number;\r\n        if (_.isString(levelStr)) {\r\n            level = Number(String(levelStr).replace('+', ''));\r\n        } else {\r\n            level = Number(levelStr);\r\n        }\r\n        let ascension = 0;\r\n        for (let i = (ARRAY.length - 1); i >= 0; i--) {\r\n            ascension = i;\r\n            if (ARRAY[i][0] > level) continue;\r\n            if (ARRAY[i][0] == level && !String(levelStr).endsWith('+')) {\r\n                ascension--;\r\n            }\r\n            break;\r\n        }\r\n        result = [Math.max(0, ascension), level];\r\n    } catch (error) {\r\n        console.error(levelStr);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport type TRecommendation = {\r\n    name: string,\r\n    build: any,\r\n    overwrite: boolean\r\n}\r\n\r\nexport function makeDefaultBuildname(character: any) {\r\n    return '' + character;\r\n}\r\n\r\nexport function makeBuildStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    let result = '_' + character;\r\n    if (buildname && buildname != makeDefaultBuildname(character)) {\r\n        result += '_' + buildname;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeOptionStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return '' + makeBuildStorageKey(character, buildname);\r\n}\r\n\r\nexport function makeArtifactScoringStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'ArtifactScoring');\r\n}\r\n\r\nexport function makeSupporterBuildnameStorageKey(character: TCharacterKey | string, buildname?: string) {\r\n    return makeBuildStorageKey(character, buildname).replace(/^/, 'SupporterBuildname');\r\n}\r\n\r\n/** . [, , ][] */\r\nexport function makeRecommendationList(\r\n    characterMaster: TAnyObject,\r\n    opt_buildData?: TAnyObject,\r\n): TRecommendation[] {\r\n    const result: TRecommendation[] = [];\r\n\r\n    const character = characterMaster[''];\r\n    let isSavable: boolean | null = null;\r\n\r\n    if (opt_buildData) {\r\n        result.push({ name: 'IMPORTED DATA', build: opt_buildData, overwrite: false });\r\n        isSavable = true;\r\n        console.log(opt_buildData);\r\n    }\r\n\r\n    const storageKeyArr: string[] = [];\r\n    Object.keys(localStorage).forEach(key => {\r\n        if (key.startsWith(makeBuildStorageKey(character))) {\r\n            storageKeyArr.push(key);\r\n            if (isSavable === null) {\r\n                isSavable = false;\r\n            }\r\n        }\r\n    });\r\n    storageKeyArr.sort();\r\n    const re = new RegExp('^_' + character + '_');\r\n    storageKeyArr.forEach(key => {\r\n        let buildname;\r\n        if (key == makeBuildStorageKey(character)) {\r\n            buildname = makeDefaultBuildname(character);\r\n        } else {\r\n            buildname = key.replace(re, '');\r\n        }\r\n        const buildObj = JSON.parse(localStorage[key]);\r\n        const key2 = '' + key;\r\n        if (key2 in localStorage) {\r\n            const optionsObj = JSON.parse(localStorage[key2]);\r\n            buildObj.options = optionsObj;\r\n        }\r\n        const key3 = key.replace(/^/, 'ArtifactScoring');\r\n        if (key3 in localStorage) {\r\n            const artifactScoringObj = JSON.parse(localStorage[key3]);\r\n            buildObj.artifactScoring = artifactScoringObj;\r\n        }\r\n        const key4 = key.replace(/^/, 'SupporterBuildname');\r\n        if (key4 in localStorage) {\r\n            const supporterBuildnameObj = JSON.parse(localStorage[key4]);\r\n            buildObj.supporterBuildname = supporterBuildnameObj;\r\n        }\r\n        result.push({ name: buildname, build: buildObj, overwrite: true });\r\n    });\r\n\r\n    characterMaster[''].forEach((obj: { [key: string]: any }) => {\r\n        const myRecommendation = obj;\r\n        for (let i = 1; i <= NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n            const subkey = '' + i;\r\n            if (!(subkey in obj)) {\r\n                obj[subkey] = null;\r\n            }\r\n        }\r\n        const artifactRarerityArrArr = [[5, 5, 5, 5, 5], [4, 4, 5, 5, 5], [4, 4, 4, 5, 4]];\r\n        let artifactRarerity4Num = 0;\r\n        const artifactSet1 = myRecommendation['1'] as TArtifactSetKey;\r\n        const artifactSet2 = myRecommendation['2'] as TArtifactSetKey;\r\n        if (ARTIFACT_SET_MASTER[artifactSet1][''] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        if (ARTIFACT_SET_MASTER[artifactSet2][''] == 4) {\r\n            artifactRarerity4Num++;\r\n        }\r\n        for (let i = 0; i < 2; i++) {\r\n            const name = '' + (i + 1);\r\n            if (!(name in myRecommendation)) {\r\n                if (i == 0) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_HP';\r\n                } else if (i == 1) {\r\n                    myRecommendation[name] = artifactRarerityArrArr[artifactRarerity4Num][i] + '_';\r\n                }\r\n            }\r\n        }\r\n\r\n        let buildname = myRecommendation[''];\r\n        buildname += ' ';\r\n        if (myRecommendation['1'] == myRecommendation['2']) {\r\n            buildname += myRecommendation['1'];\r\n        } else {\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['1']);\r\n            buildname += '/';\r\n            buildname += makeArtifactSetAbbrev(myRecommendation['2']);\r\n        }\r\n        buildname += ' [';\r\n        for (let i = 3; i <= 5; i++) {\r\n            const statusName = myRecommendation['' + i].split('_')[1];\r\n            if (RECOMMEND_ABBREV_MAP.has(statusName)) {\r\n                buildname += RECOMMEND_ABBREV_MAP.get(statusName);\r\n            } else {\r\n                buildname += statusName.substring(0, 1);\r\n            }\r\n        }\r\n        buildname += ']';\r\n        result.push({ name: buildname, build: myRecommendation, overwrite: false });\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\n/**  */\r\nfunction makeArtifactSetAbbrev(name: string): string {\r\n    const abbrRe = /[\\p{sc=Hiragana}\\p{sc=Katakana}]+/ug;\r\n    let abbr = name.replace(abbrRe, '');\r\n    if (abbr.length > 2) {\r\n        abbr = name.split(abbrRe).sort((a, b) => {\r\n            return b.length - a.length;\r\n        })[0];\r\n    }\r\n    if (abbr.length > 3) {\r\n        abbr = abbr.substring(0, 2);\r\n    }\r\n    return abbr;\r\n}\r\n\r\nexport function makePrioritySubstatValueList(\r\n    prioritySubstats: string[],\r\n    index: number,\r\n    opt_substat?: string\r\n) {\r\n    const result: number[] = [];\r\n    if (prioritySubstats[index]) {\r\n        if (!opt_substat) opt_substat = prioritySubstats[index];\r\n        if (opt_substat && opt_substat in ARTIFACT_SUB_MASTER) {\r\n            const valueArr = ARTIFACT_SUB_MASTER[opt_substat as TArtifactSubKey];\r\n            for (let i = 0; i < valueArr.length; i++) {\r\n                result.push(valueArr[i]);\r\n                if (i < valueArr.length - 1) {\r\n                    const diff = valueArr[i + 1] - valueArr[i];\r\n                    result.push(valueArr[i] + diff / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeEasyInputSubstatValueList(\r\n    substat: TArtifactSubKey\r\n) {\r\n    const result: number[] = [];\r\n    if (substat && substat in ARTIFACT_SUB_MASTER) {\r\n        const valueArr = ARTIFACT_SUB_MASTER[substat];\r\n        for (let i = 0; i < valueArr.length; i++) {\r\n            result.push(valueArr[i]);\r\n            if (i < valueArr.length - 1) {\r\n                const diff = valueArr[i + 1] - valueArr[i];\r\n                result.push(valueArr[i] + diff / 2);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/**  */\r\nexport async function loadRecommendation(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n    build: { [key: string]: any }\r\n) {\r\n    try {\r\n        const character = characterInput.character;\r\n        const characterMaster = await getCharacterMasterDetail(character);\r\n        characterInput.characterMaster = characterMaster;\r\n        const artifactStatsSub = _.cloneDeep(TEMPLATE);\r\n\r\n        if ('' in build) {\r\n            [characterInput., characterInput.] = parseLevelStr(build['']);\r\n        }\r\n        ['', '', '', ''].forEach(key => {\r\n            if (key in build) {\r\n                (characterInput as any)[key] = Number(build[key]);\r\n            }\r\n        });\r\n\r\n        const weaponType = characterMaster[''];\r\n        if ('' in build) {\r\n            if (Object.keys(WEAPON_MASTER[weaponType]).includes(build[''])) {\r\n                characterInput.weapon = build[''] as TWeaponKey;\r\n            } else {\r\n                characterInput.weapon = Object.keys(WEAPON_MASTER[weaponType]).filter(s => s.startsWith(''))[0] as TWeaponKey;\r\n            }\r\n            characterInput.weaponMaster = await getWeaponMasterDetail(characterInput.weapon, weaponType);\r\n        }\r\n        if ('' in build) {\r\n            [characterInput., characterInput.] = parseLevelStr(build['']);\r\n        }\r\n        if ('' in build) {\r\n            characterInput. = Number(build['']);\r\n        }\r\n\r\n        let prioritySubstatsDisabled = false;\r\n        for (const key of Object.keys(build).filter((s: string) => s.startsWith(''))) {\r\n            let toKey = key.replace(/^/, '');\r\n            if (toKey != 'HP') toKey = toKey.replace(/P$/, '%');\r\n            if (build[key] || build[key] == 0) {\r\n                prioritySubstatsDisabled = true;\r\n                (artifactStatsSub as any)[toKey] = Number(build[key]);\r\n            }\r\n        }\r\n        artifactDetailInput.Disabled = prioritySubstatsDisabled;\r\n\r\n        ['1', '2'].forEach((key, index) => {\r\n            if (!(key in build)) return;\r\n            const artifactSet = build[key] as TArtifactSetKey;\r\n            if (artifactSet && artifactSet in ARTIFACT_SET_MASTER) {\r\n                characterInput.artifactSets[index] = artifactSet;\r\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER[artifactSet] as TArtifactSetEntry;\r\n            } else {\r\n                characterInput.artifactSetMasters[index] = ARTIFACT_SET_MASTER_DUMMY as TArtifactSetEntry;\r\n            }\r\n        });\r\n\r\n        ['1', '2'].forEach((key, index) => {\r\n            if (key in build) {\r\n                artifactDetailInput[''][index] = build[key];\r\n            } else {\r\n                artifactDetailInput[''][index] = ['5_HP', '5_'][index];\r\n            }\r\n        });\r\n        ['3', '4', '5'].forEach((key, index) => {\r\n            if (!(key in build)) return;\r\n            const mainstat = build[key];\r\n            artifactDetailInput[''][index + 2] = mainstat;\r\n        });\r\n\r\n        for (let i = 0; i < artifactDetailInput[''].length; i++) {\r\n            const subkey1 = '' + (i + 1);\r\n            const subkey2 = subkey1 + '';\r\n            const subkey3 = subkey1 + '';\r\n            const substat = build[subkey1];\r\n            const substatValue = build[subkey2];\r\n            const substatCount = build[subkey3];\r\n            artifactDetailInput[''][i] = substat ?? '';\r\n            if (substat && substatValue && isNumeric(substatValue)) {\r\n                const prioritySubstatValueList = makePrioritySubstatValueList([substat], 0);\r\n                prioritySubstatValueList.forEach((value, index) => {\r\n                    if (substatValue <= value) {\r\n                        artifactDetailInput[''][i] = index;\r\n                    }\r\n                })\r\n            } else {\r\n                if (artifactDetailInput[''][i] && !artifactDetailInput[''][i]) {\r\n                    artifactDetailInput[''][i] = GENSEN_MASTER_LIST[2].values[i];\r\n                }\r\n            }\r\n            if (substat && substatCount && isNumeric(substatCount)) {\r\n                artifactDetailInput[''][i] = substatCount;\r\n            } else {\r\n                if (artifactDetailInput[''][i] && !artifactDetailInput[''][i]) {\r\n                    artifactDetailInput[''][i] = GENSEN_MASTER_LIST[2].counts[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        Object.keys(build).filter(s => !PROPERTY_MAP.has(s) && !['options', 'artifactScoring', 'supporterBuildname', 'artifact_list'].includes(s)).forEach(key => {\r\n            if (build[key] == null) {\r\n                conditionInput.conditionValues[key] = build[key];   // null\r\n            } else if (_.isString(build[key])) {\r\n                conditionInput.conditionValues[key] = Number(build[key]);\r\n            } else {\r\n                conditionInput.conditionValues[key] = build[key];\r\n            }\r\n        });\r\n\r\n        if ('options' in build) {\r\n            const keys = Object.keys(build.options);\r\n            if (keys.length) {\r\n                overwriteObject(optionInput.elementalResonance.conditionValues, {});\r\n                overwriteObject(optionInput.teamOption.conditionValues, {});\r\n                overwriteObject(optionInput.miscOption.conditionValues, {});\r\n                keys.forEach(key => {\r\n                    if (key in ELEMENTAL_RESONANCE_MASTER || key === 'dendroOption') {\r\n                        // \r\n                        optionInput.elementalResonance.conditionValues[key] = build.options[key];\r\n                    } else {\r\n                        const astarIndex = key.indexOf('*');\r\n                        if (astarIndex != -1) {\r\n                            const workCharacter = key.substring(0, astarIndex);\r\n                            if (workCharacter in CHARACTER_MASTER) {\r\n                                // \r\n                                optionInput.teamOption.conditionValues[key] = build.options[key];\r\n                            } else {\r\n                                // \r\n                                optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                            }\r\n                        } else {\r\n                            // \r\n                            optionInput.miscOption.conditionValues[key] = build.options[key];\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        if ('supporterBuildname' in build) {\r\n            const keys = Object.keys(build.supporterBuildname);\r\n            if (keys.length) {\r\n                overwriteObject(optionInput.supporterBuildname, {});\r\n                keys.forEach(key => {\r\n                    optionInput.supporterBuildname[key] = build.supporterBuildname[key];\r\n                });\r\n            }\r\n        }\r\n\r\n        if ('artifact_list' in build) {\r\n            const ARTIFACT_KEYS = Object.keys(ARTIFACT_TEMPLATE).sort();\r\n            const newList = build.artifact_list.filter((s: any) => _.isEqual(Object.keys(s).sort(), ARTIFACT_KEYS));\r\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length, ...newList);\r\n        } else {\r\n            artifactDetailInput.artifact_list.splice(0, artifactDetailInput.artifact_list.length);\r\n        }\r\n\r\n        overwriteObject(artifactDetailInput., artifactStatsSub);\r\n\r\n        console.debug('loadRecommendation', characterInput, artifactDetailInput, conditionInput, build);\r\n    }\r\n    catch (error) {\r\n        console.error(characterInput, artifactDetailInput, conditionInput, build);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeSavedata(characterInput: TCharacterInput, artifactDetailInput: TArtifactDetailInput, conditionInput: TConditionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // \r\n    resultObj[''] = characterInput.character;\r\n    // \r\n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // \r\n    resultObj[''] = characterInput.weapon;\r\n    // \r\n    resultObj[''] = characterInput. + (ARRAY[characterInput.][0] == characterInput. ? '+' : '');\r\n    // \r\n    resultObj[''] = characterInput.;\r\n    // 1\r\n    resultObj['1'] = characterInput.artifactSets[0];\r\n    // 2\r\n    resultObj['2'] = characterInput.artifactSets[1];\r\n    // 1\r\n    resultObj['1'] = artifactDetailInput.[0];\r\n    // 2\r\n    resultObj['2'] = artifactDetailInput.[1];\r\n    // 3\r\n    resultObj['3'] = artifactDetailInput.[2];\r\n    // 4\r\n    resultObj['4'] = artifactDetailInput.[3];\r\n    // 5\r\n    resultObj['5'] = artifactDetailInput.[4];\r\n    // HP\r\n    resultObj['HP'] = artifactDetailInput.['HP'];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // \r\n    resultObj[''] = artifactDetailInput.[''];\r\n    // HPP\r\n    resultObj['HPP'] = artifactDetailInput.['HP%'];\r\n    // P\r\n    resultObj['P'] = artifactDetailInput.['%'];\r\n    // P\r\n    resultObj['P'] = artifactDetailInput.['%'];\r\n    // *,  *, *\r\n    for (let i = 0; i < artifactDetailInput..length; i++) {\r\n        const substat = artifactDetailInput.[i];\r\n        if (substat) {\r\n            const key = '' + (i + 1);\r\n            resultObj[key] = substat;\r\n            resultObj[key + ''] = artifactDetailInput.[i];\r\n            resultObj[key + ''] = artifactDetailInput.[i];\r\n        }\r\n    }\r\n\r\n    for (const entry of conditionInput.checkboxList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n    for (const entry of conditionInput.selectList) {\r\n        resultObj[entry.name] = conditionInput.conditionValues[entry.name];\r\n    }\r\n\r\n    resultObj['artifact_list'] = artifactDetailInput.artifact_list;\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeOptionsSavedata(character: string, optionInput: TOptionInput) {\r\n    const resultObj = {} as any;\r\n\r\n    // \r\n    {\r\n        const conditionValues = optionInput.elementalResonance.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    // \r\n    {\r\n        const conditionValues = optionInput.teamOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (key.startsWith(character + '*')) return;\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    // \r\n    {\r\n        const conditionValues = optionInput.miscOption.conditionValues;\r\n        Object.keys(conditionValues).forEach(key => {\r\n            if (conditionValues[key]) {\r\n                resultObj[key] = conditionValues[key];\r\n            }\r\n        })\r\n    }\r\n\r\n    return resultObj;\r\n}\r\n\r\nexport function makeSupporterBuildnameSavedata(buildnameSelection: TAnyObject, optionInput: TOptionInput) {\r\n    const result: TAnyObject = {};\r\n    const conditionKeys = Object.keys(optionInput.teamOption.conditionValues);\r\n    for (const supporter of Object.keys(buildnameSelection)) {\r\n        if (!buildnameSelection[supporter]) continue;\r\n        if (conditionKeys.filter(s => s.startsWith(supporter + '*')).length == 0) continue;\r\n        result[supporter] = buildnameSelection[supporter];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport const CHANGE_KIND_STATUS = '';\r\nexport const CHANGE_KIND_TALENT = '';\r\n\r\nexport function makeDamageDetailObjArrObjCharacter(characterInput: TCharacterInput): TDamageDetail {\r\n    const result = {} as any;\r\n    try {\r\n        const characterMaster = characterInput.characterMaster as any;\r\n\r\n        let myTalentDetail;\r\n        let myTalentLevel: number;\r\n        let myDefaultKind: string | null;\r\n        let myDefaultElement: string | null;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        //   \r\n        myTalentLevel = characterInput[''];\r\n        myDefaultElement = characterMaster[''] === '' ? characterMaster[''] : null;\r\n        ['', '', ''].forEach(category => {\r\n            myTalentDetail = characterMaster[category];\r\n            myDefaultKind = category + '';\r\n            result[category] = makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        });\r\n\r\n        ['', '', ''].forEach(category => {\r\n            const workCategory = '' + category;\r\n            if (workCategory in characterMaster) {\r\n                myTalentDetail = characterMaster[workCategory];\r\n                if ('' in myTalentDetail) {\r\n                    myDefaultKind = myTalentDetail[''];\r\n                    switch (myDefaultKind) {\r\n                        case '':\r\n                            myTalentLevel = characterInput[''];\r\n                            break;\r\n                        case '':\r\n                            myTalentLevel = characterInput[''];\r\n                            break;\r\n                    }\r\n                }\r\n                if ('' in myTalentDetail) {\r\n                    myDefaultElement = myTalentDetail[''];\r\n                }\r\n                const workObj = {\r\n                    : myTalentDetail[''],\r\n                    : makeDamageDetailObjArr(myTalentDetail, myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory)\r\n                };\r\n                result[workCategory] = workObj;\r\n            }\r\n        });\r\n\r\n        // \r\n        myTalentLevel = characterInput[''];\r\n        myDefaultKind = '';\r\n        myDefaultElement = characterMaster[''];\r\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        // \r\n        myTalentLevel = characterInput[''];\r\n        myDefaultKind = '';\r\n        myDefaultElement = characterMaster[''];\r\n        result[''] = makeDamageDetailObjArr(characterMaster[''], myTalentLevel, myDefaultKind, myDefaultElement, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n\r\n        result[''] = [] as TDamageDetailObj[];\r\n\r\n        // \r\n        if ('' in characterMaster) {\r\n            characterMaster[''].forEach((myTalentDetail: any) => {\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result[''].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // \r\n        characterMaster[''].forEach((myTalentDetail: any) => {\r\n            const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n            if (workArr.length > 0) result[''].push(...workArr);\r\n        });\r\n\r\n        // \r\n        if ('' in characterMaster) {\r\n            Object.keys(characterMaster['']).forEach(key => {\r\n                if (Number(key) > characterInput.) return;\r\n                myTalentDetail = characterMaster[''][key];\r\n                const workArr = makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n                if (workArr.length > 0) result[''].push(...workArr);\r\n            });\r\n        }\r\n\r\n        // \r\n        if (characterMaster[''] == '') {\r\n            if (myTalentChangeDetailObjArr.filter(s => s. && s..startsWith('@')).length == 0) {\r\n                ['', '', '', ''].forEach(cond => {\r\n                    myTalentChangeDetailObjArr.push({\r\n                        : null,\r\n                        : '',\r\n                        : null,\r\n                        : null,\r\n                        : '@' + cond,\r\n                        : null,\r\n                        : null,\r\n                        : null,\r\n                        HIT: null,\r\n                        : null,\r\n                        : null,\r\n                        : null,\r\n                        : null\r\n                    });\r\n                });\r\n            }\r\n            if ('' in characterMaster) {\r\n                if (Object.keys(characterMaster['']).filter(s => s == '').length == 0) {\r\n                    characterMaster[''][''] = 1;\r\n                }\r\n            } else {\r\n                characterMaster[''] = { : 1 };\r\n            }\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        // conditionMap.delete('');\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyCharacter = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjWeapon(characterInput: any) {\r\n    const result = {} as any;\r\n    try {\r\n        const name = characterInput.weapon;\r\n        const weaponMaster = characterInput.weaponMaster;\r\n        if (!name || !weaponMaster) return result;\r\n\r\n        let myTalentDetail;\r\n        const myLevel = characterInput.;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        if ('' in weaponMaster) {\r\n            myTalentDetail = weaponMaster[''];\r\n            result[''] = makeDamageDetailObjArr(myTalentDetail, myLevel, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory);\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            let condition = detailObj[''];\r\n            if (_.isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            let condition = detailObj[''];\r\n            if (_.isPlainObject(condition) && myLevel in condition) {\r\n                condition = condition[myLevel];\r\n            }\r\n            makeConditionExclusionMapFromStr(condition, conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyWeapon = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjArtifactSets(characterInput: any) {\r\n    const result = [] as any;\r\n    try {\r\n        let myTalentDetail;\r\n        const myInputCategory = '';\r\n\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n\r\n        const artifactSetMasters = characterInput.artifactSetMasters.filter((s: any) => s);\r\n\r\n        if (artifactSetMasters.length > 0) {\r\n            const damageDetailObjArr = [] as TDamageDetailObj[];\r\n            if ('2' in artifactSetMasters[0]) {\r\n                myTalentDetail = artifactSetMasters[0]['2'];\r\n                damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n            }\r\n            if (artifactSetMasters.length == 2) {\r\n                if (artifactSetMasters[0] == artifactSetMasters[1]) {\r\n                    myTalentDetail = artifactSetMasters[0]['4'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                } else {\r\n                    myTalentDetail = artifactSetMasters[1]['2'];\r\n                    damageDetailObjArr.push(...makeDamageDetailObjArr(myTalentDetail, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n                }\r\n            }\r\n            result[''] = damageDetailObjArr;\r\n        }\r\n\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailMyArtifactSets = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDamageDetailObjArrObjElementalResonance(characterInput: any) {\r\n    const result = [] as any;\r\n    try {\r\n        const myInputCategory = '';\r\n        const damageDetailObjArr = [] as TDamageDetailObj[];\r\n        const myStatusChangeDetailObjArr = [] as any[];\r\n        const myTalentChangeDetailObjArr = [] as any[];\r\n        for (const myTalentDetail of ELEMENTAL_RESONANCE_MASTER_LIST) {\r\n            const workObj = _.cloneDeep(myTalentDetail);\r\n            if (workObj.) {\r\n                workObj..forEach((detailObj: TAnyObject) => {\r\n                    detailObj. = myTalentDetail.key;\r\n                });\r\n            }\r\n            damageDetailObjArr.push(...makeDamageDetailObjArr(workObj, null, null, null, myStatusChangeDetailObjArr, myTalentChangeDetailObjArr, myInputCategory));\r\n        }\r\n        result[''] = damageDetailObjArr;\r\n        result[CHANGE_KIND_STATUS] = myStatusChangeDetailObjArr;\r\n        result[CHANGE_KIND_TALENT] = myTalentChangeDetailObjArr;\r\n\r\n        const conditionMap = new Map();\r\n        const exclusionMap = new Map();\r\n        myStatusChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        myTalentChangeDetailObjArr.filter(s => s['']).forEach(detailObj => {\r\n            makeConditionExclusionMapFromStr(detailObj[''], conditionMap, exclusionMap);\r\n        });\r\n        conditionMap.forEach((value, key) => {\r\n            if (value && _.isArray(value)) {\r\n                if (!value[0].startsWith('required_')) {\r\n                    conditionMap.set(key, ['', ...value]);\r\n                }\r\n            }\r\n        });\r\n        result[''] = conditionMap;\r\n        result[''] = exclusionMap;\r\n\r\n        characterInput.damageDetailElementalResonance = result;\r\n    } catch (error) {\r\n        console.error(characterInput, result);\r\n        // throw error;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function makeDetailObj(\r\n    detailObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    inputCategory: string | null,\r\n    opt_condition?: string,\r\n): TDamageDetailObj {\r\n    let my = detailObj. ?? defaultKind;\r\n    let my = detailObj. ?? null;\r\n    if (my && my.indexOf('.') !== -1) {\r\n        my = my.substring(my.indexOf('.') + 1);\r\n        my = my.substring(0, my.indexOf('.'));\r\n    }\r\n\r\n    let my = detailObj. ?? null;\r\n    if (_.isPlainObject(my)) {  // |\r\n        if (level && level in my) {\r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = 0;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    let my = detailObj. ?? opt_condition ?? null;\r\n    if (_.isPlainObject(my) && level && level in my) {  // \r\n        my = my[level];\r\n    }\r\n\r\n    let my = detailObj. ?? null;\r\n    if (_.isPlainObject(my)) {\r\n        if (level && level in my) { // for \r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = null;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    let my = detailObj. ?? null; // for \r\n    if (_.isPlainObject(my)) {\r\n        if (level && level in my) {\r\n            my = my[level];\r\n        } else {\r\n            console.error(detailObj, level, my);\r\n            my = null;\r\n        }\r\n    }\r\n    my = makeFormulaTemplate(my);\r\n\r\n    return {\r\n        : detailObj. ?? null,\r\n        : my,\r\n        : detailObj. ?? defaultElement ?? null,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        : my,\r\n        HIT: detailObj.HIT ?? null,\r\n        : detailObj. ?? null,\r\n        : detailObj. ?? inputCategory === '',\r\n        : detailObj. ?? null,\r\n        : detailObj. ?? null,\r\n    }\r\n}\r\n\r\nexport function getChangeKind(kind: string) {\r\n    if (kind in TEMPLATE\r\n        || new RegExp('[].+(|)').exec(kind)\r\n        || [''].includes(kind)  // for \r\n        || new RegExp('?[]').exec(kind)\r\n        || ['', ''].includes(kind)\r\n        || [''].includes(kind)\r\n        || ['', ''].includes(kind)\r\n        || ['', '', '', ''].includes(kind)\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind.endsWith('')\r\n    ) {\r\n        return 'STATUS';\r\n    } else if (kind.endsWith('')\r\n        || kind.endsWith('')\r\n        || kind == '' ||\r\n        kind == ''\r\n    ) {   // ex.,\r\n        return 'TALENT';\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function makeDamageDetailObjArr(\r\n    talentDataObj: any,\r\n    level: number | null,\r\n    defaultKind: string | null,\r\n    defaultElement: string | null,\r\n    statusChangeDetailObjArr: any[],\r\n    talentChangeDetailObjArr: any[],\r\n    inputCategory: string,\r\n    opt_condition?: string,\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as any[];\r\n    if (!('' in talentDataObj)) return resultArr;\r\n\r\n    talentDataObj[''].forEach((detailObj: TAnyObject) => {\r\n        const resultObj = makeDetailObj(detailObj, level, defaultKind, defaultElement, inputCategory, opt_condition);\r\n        const my = resultObj. as string;\r\n        if (statusChangeDetailObjArr != null && getChangeKind(my) === 'STATUS') {\r\n            resultObj[''] = detailObj. ?? null;\r\n            statusChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        if (talentChangeDetailObjArr != null && getChangeKind(my) === 'TALENT') {\r\n            resultObj[''] = detailObj. ?? null;\r\n            talentChangeDetailObjArr.push(resultObj);\r\n            return;\r\n        }\r\n        resultArr.push(resultObj);\r\n    });\r\n\r\n    return resultArr;\r\n}\r\n\r\nexport function makeTeamOptionDetailObjArr(\r\n    detailObjArr: any[],\r\n): TDamageDetailObj[] {\r\n    const resultArr = [] as TDamageDetailObj[];\r\n    detailObjArr.forEach((detailObj: { [x: string]: any; }) => {\r\n        const resultObj = makeDetailObj(detailObj, null, null, null, null);\r\n        if (resultObj) {\r\n            resultArr.push(resultObj);\r\n        }\r\n    });\r\n    return resultArr;\r\n}\r\n\r\n// \r\n// @prefixpostfix\r\n// @prefix(From)-(To)postfix\r\n// @prefix1,2,3postfix\r\n// =prefixpostfix\r\n// @\r\n// =\r\n// ={min=|,max=|,step=}\r\n// OR   A|B\r\n// AND  A&B\r\n//  A^B\r\nexport function makeConditionExclusionMapFromStr(\r\n    conditionStr: string,\r\n    conditionMap: Map<string, string[] | object | null>,\r\n    exclusionMap: Map<string, string[]>\r\n) {\r\n    // \r\n    let exclusionStr: string | undefined = undefined;\r\n    const workArr = conditionStr.split('^');\r\n    if (workArr.length > 1) {\r\n        exclusionStr = workArr[1];\r\n    }\r\n    const workStr = workArr[0];\r\n    if (workStr.includes('|')) {\r\n        // OR for \r\n        const conditionStrArr = workStr.split('|');\r\n        conditionStrArr.forEach((elem) => {\r\n            makeConditionExclusionMapFromStrSub(elem, conditionMap, exclusionMap, exclusionStr);\r\n        })\r\n    } else {\r\n        // AND\r\n        const conditionStrArr = workStr.split('&');\r\n        conditionStrArr.forEach((elem) => {\r\n            makeConditionExclusionMapFromStrSub(elem, conditionMap, exclusionMap, exclusionStr);\r\n        })\r\n    }\r\n}\r\n\r\nexport const NUMBER_CONDITION_VALUE_RE = /^\\s*{.+}\\s*$/;\r\n\r\nfunction makeConditionExclusionMapFromStrSub(\r\n    conditionStr: string,\r\n    conditionMap: Map<string, string[] | object | null>,\r\n    exclusionMap: Map<string, string[]>,\r\n    exclusion?: string,\r\n) {\r\n    const workArr = conditionStr.split(/[@=]/);\r\n    const name = workArr[0];\r\n    if (workArr.length === 1) {\r\n        pushToMapValueArray(conditionMap, name, null);  // null\r\n    } else if (workArr.length === 2) {\r\n        if (NUMBER_CONDITION_VALUE_RE.test(workArr[1])) {\r\n            try {\r\n                const workObj = JSON.parse(workArr[1]);\r\n                const min = workObj.min;\r\n                const max = workObj.max;\r\n                if (!_.isNumber(min) && !_.isString(min)) {\r\n                    console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                } if (max !== undefined && !_.isNumber(max) && !_.isString(max)) {\r\n                    console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n                } else {\r\n                    const conditionObj = {\r\n                        min: min,\r\n                        max: max,\r\n                        step: isNumeric(workObj.step) ? Number(workObj.step) : 1,\r\n                    };\r\n                    pushToMapValueArray(conditionMap, name, conditionObj);  // object\r\n                }\r\n            } catch (error) {\r\n                console.error(error);\r\n                console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n            }\r\n        } else if (workArr[1].includes(',')) {\r\n            const re = new RegExp('([^0-9]*?)([\\\\+\\\\-0-9\\\\.,]+)(.*)');  // :-10,+60%\r\n            const reRet = re.exec(workArr[1]);\r\n            if (reRet) {\r\n                const prefix = reRet[1];\r\n                const condValueArr = reRet[2].split(',');\r\n                const postfix = reRet[3];\r\n                condValueArr.forEach(value => {\r\n                    pushToMapValueArray(conditionMap, name, prefix + value + postfix);  // string[]\r\n                })\r\n            }\r\n        } else if (workArr[1].includes('-')) {\r\n            const re = new RegExp('([^0-9\\\\.]*)(-?[0-9\\\\.]+)-(-?[0-9\\\\.]+)(.*)');   // +prefix\r\n            const re2 = new RegExp('/([0-9\\\\.]+)(.*)');\r\n            const reRet = re.exec(workArr[1]);\r\n            if (reRet) {\r\n                const prefix = reRet[1];\r\n                const rangeStart = Number(reRet[2]);\r\n                const rangeEnd = Number(reRet[3]);\r\n                let step = rangeStart;\r\n                let postfix = reRet[4];\r\n                if (postfix) {\r\n                    const re2Ret = re2.exec(postfix);\r\n                    if (re2Ret) {\r\n                        step = Number(re2Ret[1]);\r\n                        postfix = re2Ret[2];\r\n                    }\r\n                }\r\n                step = step ? step : 1;\r\n                for (let i = rangeStart; i < rangeEnd; i = addDecimal(i, step, rangeEnd)) {\r\n                    pushToMapValueArray(conditionMap, name, prefix + String(i) + postfix);  // string[]\r\n                }\r\n                pushToMapValueArray(conditionMap, name, prefix + String(rangeEnd) + postfix);  // string[]\r\n            } else {\r\n                pushToMapValueArray(conditionMap, name, workArr[1]);  // string[]\r\n            }\r\n        } else {\r\n            pushToMapValueArray(conditionMap, name, workArr[1]);  // string[]\r\n        }\r\n    } else {\r\n        console.error(conditionStr, conditionMap, exclusionMap, exclusion);\r\n    }\r\n    if (exclusion) {\r\n        exclusion.split(',').forEach(e => {\r\n            pushToMapValueArray(exclusionMap, name, e);  // string[]\r\n        })\r\n    }\r\n}\r\n\r\nexport function setupConditionValues(\r\n    conditionInput: TConditionInput,\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    try {\r\n        const workConditionValues = _.cloneDeep(conditionInput.conditionValues);\r\n        const workCheckboxList: TCheckboxEntry[] = [];\r\n        const workSelectList: TSelectEntry[] = [];\r\n        const workNumberList: TNumberEntry[] = [];\r\n\r\n        // \r\n        for (const master of [characterInput.characterMaster, characterInput.weaponMaster, ...characterInput.artifactSetMasters]) {\r\n            if ('' in master) {\r\n                for (const key of Object.keys((master as any)[''])) {\r\n                    if (!(key in workConditionValues)) {\r\n                        workConditionValues[key] = (master as any)[''][key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const conditionMap = makeConditionMapFromCharacterInput(characterInput);\r\n        const exclusionMap = makeExclusionMapFromCharacterInput(characterInput);\r\n\r\n        if (optionInput.elementalResonance) {\r\n            for (const key of Object.keys(ELEMENTAL_RESONANCE_MASTER)) {\r\n                if (!optionInput.elementalResonance.conditionValues[key]) continue;\r\n                const master = (ELEMENTAL_RESONANCE_MASTER as any)[key];\r\n                if (!master.) continue;\r\n                for (const detailObj of master.) {\r\n                    if (!detailObj.) continue;\r\n                    makeConditionExclusionMapFromStr(detailObj., conditionMap, exclusionMap);\r\n                }\r\n            }\r\n        }\r\n\r\n        conditionMap.forEach((value, key) => {\r\n            if (value === null) {\r\n                if (workCheckboxList.filter(s => s.name == key).length === 0) {\r\n                    workCheckboxList.push({ name: key });\r\n                }\r\n            } else if (_.isArray(value)) {\r\n                if (workSelectList.filter(s => s.name == key).length === 0) {\r\n                    const required = value[0].startsWith('required_');\r\n                    workSelectList.push({\r\n                        name: key,\r\n                        options: value,\r\n                        required: required,\r\n                    });\r\n                }\r\n            } else if (_.isPlainObject(value)) {\r\n                if (workNumberList.filter(s => s.name == key).length === 0) {\r\n                    const numberObj = value as any;\r\n                    const entry = {\r\n                        name: key,\r\n                        min: numberObj.min,\r\n                        max: numberObj.max,\r\n                        step: numberObj.step,\r\n                    };\r\n                    workNumberList.push(entry);\r\n                }\r\n            }\r\n            if (key in workConditionValues && workConditionValues[key] !== null) {\r\n                const exclusions = exclusionMap.get(key);\r\n                if (exclusions) {\r\n                    for (const exclusion of exclusions) {\r\n                        if (exclusion in workConditionValues) {\r\n                            const conditionValue = conditionMap.get(exclusion);\r\n                            if (conditionValue === null) {  // checkbox\r\n                                workConditionValues[exclusion] = false;\r\n                            } else if (_.isArray(value)) {  // select\r\n                                workConditionValues[exclusion] = 0;\r\n                            } else if (_.isPlainObject(value)) {    // number\r\n                                const minValue = (value as any).min;\r\n                                if (isNumeric(minValue)) {\r\n                                    workConditionValues[exclusion] = Number(minValue);\r\n                                } else {\r\n                                    workConditionValues[exclusion] = 0;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (value === null) {   // checkbox\r\n                    let checked = true;\r\n                    const arr = exclusionMap.get(key);\r\n                    if (arr && arr.filter(s => workConditionValues[s]).length > 0) {\r\n                        checked = false;\r\n                    }\r\n                    workConditionValues[key] = checked;\r\n                } else if (_.isArray(value)) {  // select\r\n                    let selectedIndex = value.length - 1;\r\n                    const arr = exclusionMap.get(key);\r\n                    if (arr && arr.filter(s => workConditionValues[s]).length > 0) {\r\n                        selectedIndex = 0;\r\n                    }\r\n                    workConditionValues[key] = selectedIndex;\r\n                } else if (_.isPlainObject(value)) {    // number\r\n                    const minValue = (value as any).min;\r\n                    if (isNumeric(minValue)) {\r\n                        workConditionValues[key] = Number(minValue);\r\n                    } else {\r\n                        workConditionValues[key] = 0;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        if (!_.isEqual(conditionInput.conditionValues, workConditionValues)) {\r\n            overwriteObject(conditionInput.conditionValues, workConditionValues);\r\n        }\r\n        if (!_.isEqual(conditionInput.checkboxList, workCheckboxList)) {\r\n            conditionInput.checkboxList.splice(0, conditionInput.checkboxList.length, ...workCheckboxList);\r\n        }\r\n        if (!_.isEqual(conditionInput.selectList, workSelectList)) {\r\n            conditionInput.selectList.splice(0, conditionInput.selectList.length, ...workSelectList);\r\n        }\r\n        if (!_.isEqual(conditionInput.numberList, workNumberList)) {\r\n            conditionInput.numberList.splice(0, conditionInput.numberList.length, ...workNumberList);\r\n        }\r\n    } catch (error) {\r\n        console.error(conditionInput, characterInput, optionInput);\r\n        // throw error;\r\n    }\r\n}\r\n\r\nexport function makeConditionMapFromCharacterInput(characterInput: TCharacterInput) {\r\n    const result = new Map() as Map<string, any[] | null | object>;\r\n    [\r\n        characterInput.damageDetailMyCharacter,\r\n        characterInput.damageDetailMyWeapon,\r\n        characterInput.damageDetailMyArtifactSets,\r\n    ].forEach((damageDetail) => {\r\n        if (damageDetail && damageDetail.) {\r\n            damageDetail..forEach((value, key) => {\r\n                result.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport function makeExclusionMapFromCharacterInput(characterInput: TCharacterInput) {\r\n    const result = new Map() as Map<string, string[]>;\r\n    [\r\n        characterInput.damageDetailMyCharacter,\r\n        characterInput.damageDetailMyWeapon,\r\n        characterInput.damageDetailMyArtifactSets,\r\n    ].forEach((damageDetail) => {\r\n        if (damageDetail && damageDetail.) {\r\n            damageDetail..forEach((value, key) => {\r\n                result.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nexport function getStatValue(stat: string, statsObj: TStats) {\r\n    let result;\r\n    if (stat in statsObj) {\r\n        result = statsObj[stat];\r\n    } else {\r\n        const re = /(.+)X([0-7])$/;\r\n        const reRet = re.exec(stat);\r\n        if (reRet) {\r\n            if (reRet[1] in statsObj) {\r\n                result = statsObj[reRet[1]];\r\n                let n = Number(reRet[2]);\r\n                for (let i = 1; i <= 3; i++) {\r\n                    if ((n % 2) == 1) {\r\n                        const vStat: string = reRet[1] + 'V' + i;\r\n                        if (vStat in statsObj) {\r\n                            result -= statsObj[vStat];\r\n                        }\r\n                    }\r\n                    n = Math.trunc(n / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (result === undefined) {\r\n        console.warn(stat, statsObj); // \r\n        result = 0; // fixed\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function updateNumberConditionValues(\r\n    conditionInput: TConditionInput,\r\n    characterInput: TCharacterInput,\r\n    statsObj: TStats,\r\n) {\r\n    const conditionMap = makeConditionMapFromCharacterInput(characterInput);\r\n    conditionMap.forEach((value, key) => {\r\n        if (_.isPlainObject(value)) {\r\n            const numberEntryArr = conditionInput.numberList.filter(s => s.name == key);\r\n            if (numberEntryArr.length > 0) {\r\n                let minValue = (value as any).min;\r\n                let maxValue = (value as any).max;\r\n                if (_.isString(minValue) || _.isString(maxValue)) {\r\n                    if (_.isString(minValue)) {\r\n                        minValue = getStatValue(minValue, statsObj);\r\n                    }\r\n                    if (_.isString(maxValue)) {\r\n                        maxValue = getStatValue(maxValue, statsObj);\r\n                    }\r\n                    numberEntryArr[0].min = minValue;\r\n                    numberEntryArr[0].max = maxValue;\r\n                    if (key in conditionInput.conditionValues) {\r\n                        const value = conditionInput.conditionValues[key];\r\n                        if (_.isNumber(value)) {\r\n                            if (value < minValue) {\r\n                                conditionInput.conditionValues[key] = minValue;\r\n                            } else if (maxValue !== undefined && value > maxValue) {\r\n                                conditionInput.conditionValues[key] = maxValue;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction pushToMapValueArray(map: Map<any, any>, key: any, value: any) {\r\n    if (value === null) {    // checkbox\r\n        if (!map.has(key)) {\r\n            map.set(key, null);\r\n        }\r\n    } else if (_.isString(value)) { // select\r\n        if (map.has(key)) {\r\n            const oldValue = map.get(key);\r\n            if (oldValue === null) {\r\n                map.set(key, [value]);\r\n            } else if (_.isArray(oldValue)) {\r\n                if (!oldValue.includes(value)) {\r\n                    map.get(key).push(value);\r\n                }\r\n            } else {\r\n                console.error(map, key, value);\r\n            }\r\n        } else {\r\n            map.set(key, [value]);\r\n        }\r\n    } else if (_.isPlainObject(value)) {    // number\r\n        map.set(key, value);\r\n    }\r\n}\r\n\r\nfunction getDecimalLength(value: number): number {\r\n    const arr = ('' + value).split('.');\r\n    return arr.length > 1 ? arr[1].length : 0;\r\n}\r\n\r\nexport function multiplyDecimal(value1: number, value2: number): number {\r\n    const decimalLength = getDecimalLength(value1) + getDecimalLength(value2);\r\n    const intValue1 = Number(('' + value1).replace('.', ''));\r\n    const intValue2 = Number(('' + value2).replace('.', ''));\r\n    const result = (intValue1 * intValue2) / Math.pow(10, decimalLength);\r\n    return Number(result);\r\n}\r\n\r\nexport function addDecimal(value1: number, value2: number, opt_max?: number): number {\r\n    const k = Math.pow(10, Math.max(getDecimalLength(value1), getDecimalLength(value2)));\r\n    let result = (multiplyDecimal(value1, k) + multiplyDecimal(value2, k)) / k;\r\n    if (opt_max != undefined) {\r\n        result = Math.min(result, opt_max);\r\n    }\r\n    return result;\r\n}\r\n\r\n// function analyzeFormulaStr(\r\n//     formulaStr: number | string,\r\n//     opt_defaultItem: string | null = null\r\n// ) {\r\n//     const resultArr = [] as any[];\r\n//     const re = new RegExp('([\\\\+\\\\-\\\\*/]?)([^\\\\+\\\\-\\\\*/]+)(.*)');\r\n//     let workStr = String(formulaStr);\r\n//     // eslint-disable-next-line no-constant-condition\r\n//     while (true) {\r\n//         const reRet = re.exec(workStr);\r\n//         if (!reRet) {\r\n//             resultArr.push(workStr);\r\n//             break;\r\n//         }\r\n//         if (reRet[1]) { // + - * /\r\n//             resultArr.push(reRet[1]);\r\n//         }\r\n//         resultArr.push(analyzeFormulaStrSub(reRet[2], opt_defaultItem));\r\n//         if (!reRet[3]) {\r\n//             break;\r\n//         }\r\n//         workStr = reRet[3];\r\n//     }\r\n//     return resultArr;\r\n// }\r\n//\r\n// function analyzeFormulaStrSub(\r\n//     formulaStr: string,\r\n//     opt_defaultItem: string | null = null\r\n// ) {\r\n//     const resultArr = [] as any;\r\n//     if (isNumeric(formulaStr)) {\r\n//         resultArr.push(Number(formulaStr));\r\n//     } else {\r\n//         const strArr = (formulaStr as string).split('%');\r\n//         if (strArr.length == 1) {\r\n//             resultArr.push(strArr[0]);\r\n//         } else {\r\n//             resultArr.push(Number(strArr[0]) / 100);\r\n//             resultArr.push('*');\r\n//             if (strArr[1].length > 0) {\r\n//                 resultArr.push(strArr[1]);\r\n//             } else if (opt_defaultItem != null) {\r\n//                 resultArr.push(opt_defaultItem);\r\n//             }\r\n//         }\r\n//     }\r\n//     return resultArr;\r\n// }\r\n\r\nexport function makeFormulaTemplate(\r\n    formula: number | string | null | undefined,\r\n) {\r\n    let result: string | null = '';\r\n    if (formula === undefined || formula === null) {\r\n        result = null;\r\n    } else if (_.isNumber(formula) || isNumeric(formula)) {\r\n        result = String(formula);\r\n    } else {\r\n        const symbols = \"!\\\"&'()*+,-/:;<=>?@[\\\\]^`|~\";\r\n        const escapedSymbols = symbols.split('').map(s => '\\\\' + s).join('');\r\n        const re = new RegExp('([^' + escapedSymbols + ']+|[' + escapedSymbols + ']+)', 'g');\r\n        let reRet;\r\n        while ((reRet = re.exec(formula)) !== null) {\r\n            let item = reRet[1];\r\n            if (!symbols.includes(item.substring(0, 1))) {\r\n                item = _.trim(item);\r\n                if (isNumeric(item)) {\r\n                    result += item;\r\n                } else if (item.length) {\r\n                    if (item.includes('%')) {   // 123.4% or 12.34%HP %\r\n                        const arr = item.split('%').map(s => _.trim(s));\r\n                        result += arr[0] + '/100*';\r\n                        item = arr[1].length ? arr[1] : '';\r\n                    }\r\n                    result += '${' + item + '}';\r\n                }\r\n            } else {\r\n                result += item;\r\n            }\r\n        }\r\n    }\r\n    console.debug(formula, result);\r\n    return result;\r\n}\r\n\r\nexport function getMaxConstellation(characterMaster: TCharacterDetail) {\r\n    let max = 0;\r\n    if ('' in characterMaster) {\r\n        max = Object.keys(characterMaster.).length;\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function getMaxTalentLevel(characterMaster: TCharacterDetail, key: string) {\r\n    let max = 10;\r\n    if (key in characterMaster) {\r\n        const talentObj = (characterMaster as any)[key];\r\n        if ('' in talentObj) {\r\n            for (const detailObj of talentObj.) {\r\n                if ('' in detailObj && _.isPlainObject(detailObj.)) {\r\n                    const work = Object.keys(detailObj.).length;\r\n                    if (max < work) max = work;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return max;\r\n}\r\n\r\nexport function setupTeamOption(optionInput: TOptionInput) {\r\n    const optionDetails1: TDamageDetailObj[] = [];\r\n    const optionDetails2: TDamageDetailObj[] = [];\r\n    const conditionMap = new Map<string, string[] | object | null>();\r\n    const exclusionMap = new Map<string, string[]>();\r\n    const checkboxList: TCheckboxEntry[] = [];\r\n    const selectList: TSelectEntry[] = [];\r\n    const numberList: TNumberEntry[] = [];\r\n    Object.keys(optionInput.supporters).forEach(key => {\r\n        const workDetails1 = optionInput.supporters[key]?.optionDetails1;\r\n        const workDetails2 = optionInput.supporters[key]?.optionDetails2;\r\n        const workMap1 = optionInput.supporters[key]?.conditionMap;\r\n        const workMap2 = optionInput.supporters[key]?.exclusionMap;\r\n        if (workDetails1 !== undefined) {\r\n            optionDetails1.push(...workDetails1);\r\n        }\r\n        if (workDetails2 !== undefined) {\r\n            optionDetails2.push(...workDetails2);\r\n        }\r\n        if (workMap1 !== undefined) {\r\n            workMap1.forEach((value, key) => {\r\n                conditionMap.set(key, value);\r\n                if (value === null) { // checkbox\r\n                    if (checkboxList.filter((s) => s.name == key).length === 0) {\r\n                        checkboxList.push({\r\n                            name: key,\r\n                            displayName: key.replace(/^.+\\*/, ''),\r\n                        })\r\n                    }\r\n                } else if (_.isArray(value)) {  // select\r\n                    if (selectList.filter((s) => s.name == key).length === 0) {\r\n                        const required = value[0].startsWith('required_');\r\n                        selectList.push({\r\n                            name: key,\r\n                            displayName: key.replace(/^.+\\*/, ''),\r\n                            options: (required || !value[0]) ? value : ['', ...value],\r\n                            required: required,\r\n                        })\r\n                    }\r\n                } else if (_.isPlainObject(value)) {  // number\r\n                    if (numberList.filter((s) => s.name == key).length === 0) {\r\n                        numberList.push({\r\n                            name: key,\r\n                            displayName: key.replace(/^.+\\*/, ''),\r\n                            min: (value as any).min,\r\n                            max: (value as any).max,\r\n                            step: (value as any).step,\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        if (workMap2 !== undefined) {\r\n            workMap2.forEach((value, key) => {\r\n                exclusionMap.set(key, value);\r\n            })\r\n        }\r\n    })\r\n    optionInput.teamOption.optionDetails1.splice(0, optionInput.teamOption.optionDetails1.length, ...optionDetails1);\r\n    optionInput.teamOption.optionDetails2.splice(0, optionInput.teamOption.optionDetails2.length, ...optionDetails2);\r\n    optionInput.teamOption.conditionMap = conditionMap;\r\n    optionInput.teamOption.exclusionMap = exclusionMap;\r\n    optionInput.teamOption.checkboxList.splice(0, optionInput.teamOption.checkboxList.length, ...checkboxList);\r\n    optionInput.teamOption.selectList.splice(0, optionInput.teamOption.selectList.length, ...selectList);\r\n    optionInput.teamOption.numberList.splice(0, optionInput.teamOption.numberList.length, ...numberList);\r\n}\r\n\r\nexport function setupMiscOption(optionInput: TOptionInput) {\r\n    const optionDetails1: TDamageDetailObj[] = [];\r\n    const optionDetails2: TDamageDetailObj[] = [];\r\n    const conditionMap = new Map<string, string[] | object | null>();\r\n    const exclusionMap = new Map<string, string[]>();\r\n    const checkboxList: TCheckboxEntry[] = [];\r\n    const selectList: TSelectEntry[] = [];\r\n    const numberList: TNumberEntry[] = [];\r\n    [OPTION1_MASTER_LIST, OPTION2_MASTER_LIST].forEach(masterList => {\r\n        for (const entry of masterList) {\r\n            if ('' in entry) {\r\n                for (const detailObj of entry.) {\r\n                    if (!('' in detailObj)) {\r\n                        (detailObj as any). = entry.key;\r\n                    }\r\n                }\r\n            }\r\n            makeDamageDetailObjArr(entry, null, null, null, optionDetails1, optionDetails2, '');\r\n        }\r\n    })\r\n    optionDetails1.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    });\r\n    optionDetails2.filter((s) => s.).forEach((detailObj) => {\r\n        makeConditionExclusionMapFromStr(detailObj. as string, conditionMap, exclusionMap);\r\n    });\r\n    conditionMap.forEach((value, key) => {\r\n        if (value === null) { // checkbox\r\n            if (checkboxList.filter((s) => s.name == key).length === 0) {\r\n                checkboxList.push({\r\n                    name: key,\r\n                    displayName: key.replace(/^.+\\*/, ''),\r\n                })\r\n            }\r\n        } else if (_.isArray(value)) {  // select\r\n            if (selectList.filter((s) => s.name == key).length === 0) {\r\n                const required = value[0].startsWith('required_');\r\n                selectList.push({\r\n                    name: key,\r\n                    displayName: key.replace(/^.+\\*/, ''),\r\n                    options: (required || !value[0]) ? value : ['', ...value],\r\n                    required: required,\r\n                })\r\n            }\r\n        } else if (_.isPlainObject(value)) {  // number\r\n            if (numberList.filter((s) => s.name == key).length === 0) {\r\n                numberList.push({\r\n                    name: key,\r\n                    displayName: key.replace(/^.+\\*/, ''),\r\n                    min: (value as any).min,\r\n                    max: (value as any).max,\r\n                    step: (value as any).step,\r\n                })\r\n            }\r\n        }\r\n    });\r\n    optionInput.miscOption.optionDetails1.splice(0, optionInput.miscOption.optionDetails1.length, ...optionDetails1);\r\n    optionInput.miscOption.optionDetails2.splice(0, optionInput.miscOption.optionDetails2.length, ...optionDetails2);\r\n    optionInput.miscOption.conditionMap = conditionMap;\r\n    optionInput.miscOption.exclusionMap = exclusionMap;\r\n    optionInput.miscOption.checkboxList.splice(0, optionInput.miscOption.checkboxList.length, ...checkboxList);\r\n    optionInput.miscOption.selectList.splice(0, optionInput.miscOption.selectList.length, ...selectList);\r\n    optionInput.miscOption.numberList.splice(0, optionInput.miscOption.numberList.length, ...numberList);\r\n}\r\n\r\nexport async function updateConditionsByTeam(\r\n    characterInput: TCharacterInput,\r\n    conditionInput: TConditionInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const character = characterInput.character;\r\n    const teamMembers: string[] = [character];\r\n    if (optionInput?.teamMembers) {\r\n        teamMembers.push(...optionInput.teamMembers.filter(s => s && s != character));\r\n    }\r\n    const myVision = CHARACTER_MASTER[character as TCharacterKey].;\r\n\r\n    // []*, []*\r\n    const regionCountMap = new Map<string, number>();\r\n    // []\r\n    let totalEnergyCost = 0;\r\n    // Map<, >\r\n    const visionCountMap = new Map<string, number>();\r\n    for (const entry of teamMembers) {\r\n        const characterDetail = await getCharacterMasterDetail(entry as TCharacterKey);\r\n        if (characterDetail.region) {\r\n            const count = regionCountMap.get(characterDetail.region);\r\n            if (count) {\r\n                regionCountMap.set(characterDetail.region, count + 1);\r\n            } else {\r\n                regionCountMap.set(characterDetail.region, 1);\r\n            }\r\n        }\r\n        if ('' in characterDetail.) {\r\n            totalEnergyCost += Number(characterDetail..);\r\n        }\r\n        if (characterDetail.) {\r\n            const count = visionCountMap.get(characterDetail.);\r\n            if (count) {\r\n                visionCountMap.set(characterDetail., count + 1);\r\n            } else {\r\n                visionCountMap.set(characterDetail., 1);\r\n            }\r\n        }\r\n    }\r\n    regionCountMap.forEach((value, key) => {\r\n        conditionInput.conditionValues['[]' + key + ''] = value;\r\n        conditionInput.conditionValues['[]' + key + ''] = teamMembers.length - value;\r\n    })\r\n    if (totalEnergyCost) {\r\n        conditionInput.conditionValues['[]'] = totalEnergyCost;\r\n    }\r\n    visionCountMap.forEach((value, key) => {\r\n        conditionInput.conditionValues['[]' + key + ''] = value;\r\n        conditionInput.conditionValues['[]' + key + ''] = teamMembers.length - value;\r\n        if (key == myVision) {\r\n            conditionInput.conditionValues['[]'] = value - 1;\r\n            conditionInput.conditionValues['[]'] = teamMembers.length - value;\r\n        }\r\n    })\r\n    conditionInput.conditionValues['[]'] = visionCountMap.size - 1; // required1\r\n    const pyroCount = visionCountMap.get('') ?? 0;\r\n    const hydroCount = visionCountMap.get('') ?? 0;\r\n    const electroCount = visionCountMap.get('') ?? 0;\r\n    const cryoCount = visionCountMap.get('') ?? 0;\r\n    conditionInput.conditionValues['[]'] = pyroCount + hydroCount + electroCount + cryoCount;\r\n}\r\n\r\nexport async function updateOptionsElementalResonanceByTeam(\r\n    characterInput: TCharacterInput,\r\n    optionInput: TOptionInput,\r\n) {\r\n    const character = characterInput.character;\r\n    const teamMembers: string[] = [character];\r\n    if (optionInput?.teamMembers) {\r\n        teamMembers.push(...optionInput.teamMembers.filter(s => s && s != character));\r\n    }\r\n\r\n    const visionCountMap = new Map<string, number>();\r\n    for (const entry of teamMembers) {\r\n        const characterDetail = await getCharacterMasterDetail(entry as TCharacterKey);\r\n        if (characterDetail.) {\r\n            const count = visionCountMap.get(characterDetail.);\r\n            if (count) {\r\n                visionCountMap.set(characterDetail., count + 1);\r\n            } else {\r\n                visionCountMap.set(characterDetail., 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    // \r\n    const newElementResonance: TConditionValues = {};\r\n    const resonanceElementArr: string[] = [];\r\n    const restMemberElementArr: string[] = [];\r\n    visionCountMap.forEach((value, key) => {\r\n        if (value >= 2) {\r\n            resonanceElementArr.push(key);\r\n        } else if (value == 1) {\r\n            restMemberElementArr.push(key);\r\n        }\r\n    })\r\n    if (optionInput.teamMembers.length == 3) {\r\n        if (resonanceElementArr.length > 1) {\r\n            newElementResonance[resonanceElementArr[0] + ''] = true;\r\n            newElementResonance[resonanceElementArr[1] + ''] = true;\r\n        } else if (resonanceElementArr.length > 0) {\r\n            newElementResonance[resonanceElementArr[0] + ''] = true;\r\n        } else {\r\n            newElementResonance[''] = true;\r\n        }\r\n    } else if (resonanceElementArr.length > 0) {\r\n        const tempArr: string[] = [resonanceElementArr[0] + ''];\r\n        const currentElementArr = Object.keys(optionInput.elementalResonance.conditionValues).filter(s => optionInput.elementalResonance.conditionValues[s] && s != '').map(s => s.replace(/$/, ''));\r\n        currentElementArr.forEach(element => {\r\n            if (restMemberElementArr.includes(element)) {\r\n                tempArr.push(element + '');\r\n            }\r\n        });\r\n        if (tempArr.length < 2) {\r\n            ALL_ELEMENTS.forEach(element => {\r\n                const resonance = element + '';\r\n                if (optionInput.elementalResonance.conditionValues[resonance]) {\r\n                    if (!tempArr.includes(resonance)) {\r\n                        tempArr.push(resonance);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        tempArr.forEach(resonance => {\r\n            newElementResonance[resonance] = true;\r\n        })\r\n    }\r\n    if (!_.isEqual(newElementResonance, optionInput.elementalResonance.conditionValues)) {\r\n        overwriteObject(optionInput.elementalResonance.conditionValues, newElementResonance);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function makeSharedata(savedata: TAnyObject) {\r\n    const sharedataArr = [] as any[];\r\n\r\n    let character: TCharacterKey;\r\n    let weaponType: TWeaponTypeKey;\r\n\r\n    PROPERTY_MAP.forEach((value, key) => {\r\n        let newValue = savedata[key];\r\n        let myBasename;\r\n        switch (key) {\r\n            case '':\r\n                character = newValue as TCharacterKey;\r\n                myBasename = basename(CHARACTER_MASTER[character]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '':\r\n                weaponType = CHARACTER_MASTER[character][''] as TWeaponTypeKey;\r\n                myBasename = basename((WEAPON_MASTER as any)[weaponType][newValue]['import']);\r\n                newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                break;\r\n            case '1':\r\n            case '2':\r\n                if (newValue == 'NONE') {\r\n                    newValue = '';  // \r\n                } else {\r\n                    myBasename = basename(ARTIFACT_SET_MASTER[newValue as TArtifactSetKey]['image']);\r\n                    newValue = myBasename.split('_')[myBasename.split('_').length - 1];\r\n                }\r\n                break;\r\n            case '1':\r\n            case '2':\r\n            case '3':\r\n            case '4':\r\n            case '5':\r\n                if (newValue) {\r\n                    newValue = newValue.split('_')[0] + '_' + ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue.split('_')[1]);\r\n                }\r\n                break;\r\n        }\r\n        if (key.match(/^\\d$/)) {\r\n            if (newValue) {\r\n                newValue = ARTIFACT_STAT_JA_EN_ABBREV_MAP.get(newValue);\r\n            }\r\n        }\r\n        sharedataArr.push(newValue);\r\n    });\r\n    Object.keys(savedata).forEach(key => {\r\n        if (!PROPERTY_MAP.has(key)) {\r\n            sharedataArr.push(key + '=' + savedata[key]);\r\n        }\r\n    });\r\n\r\n    return sharedataArr.join(',');\r\n}\r\n\r\nfunction openTwitter(text: string, url: string, opt_hashtags?: string, opt_via?: string) {\r\n    const baseUrl = 'https://twitter.com/intent/tweet?';\r\n    const params = new URLSearchParams();\r\n    params.append('text', text);\r\n    params.append('url', url);\r\n    if (opt_hashtags) {\r\n        params.append('hashtags', opt_hashtags);\r\n    }\r\n    if (opt_via) {\r\n        params.append('via', opt_via);\r\n    }\r\n    const query = params.toString();\r\n    const shareUrl = `${baseUrl}${query}`;\r\n    console.log(params);\r\n    console.log(shareUrl);\r\n    window.open(shareUrl);\r\n}\r\n\r\nexport function shareByTwitter(\r\n    characterInput: TCharacterInput,\r\n    artifactDetailInput: TArtifactDetailInput,\r\n    conditionInput: TConditionInput\r\n) {\r\n    const savedata = makeSavedata(characterInput, artifactDetailInput, conditionInput);\r\n    const sharedata = makeSharedata(savedata);\r\n\r\n    const text = characterInput.buildname;\r\n    const encoded = encodeURI(sharedata);\r\n    const url = 'https://asagume.github.io/gencalc/' + '?allin=' + encoded;\r\n\r\n    openTwitter(text, url);\r\n}\r\n\r\nexport function pushBuildinfoToSession(character: TCharacterKey | string, buildname?: string, builddata?: any, teammembers?: string[]) {\r\n    sessionStorage.setItem('character', character);\r\n    if (buildname) {\r\n        sessionStorage.setItem('buildname', buildname);\r\n    }\r\n    if (builddata) {\r\n        sessionStorage.setItem('builddata', JSON.stringify(builddata));\r\n    }\r\n    if (teammembers) {\r\n        sessionStorage.setItem('teammembers', JSON.stringify(teammembers));\r\n    }\r\n}\r\n\r\nexport function popBuildinfoFromSession() {\r\n    const result: [string | undefined, string | undefined, TAnyObject | undefined, string[] | undefined] = [undefined, undefined, undefined, undefined];\r\n    const character = sessionStorage.getItem('character');\r\n    if (character) {\r\n        result[0] = character;\r\n        const buildname = sessionStorage.getItem('buildname');\r\n        if (buildname) {\r\n            result[1] = buildname;\r\n        }\r\n        const builddata = sessionStorage.getItem('builddata');\r\n        if (builddata) {\r\n            result[2] = JSON.parse(builddata);\r\n        }\r\n        const teammembers = sessionStorage.getItem('teammembers');\r\n        if (teammembers) {\r\n            result[3] = JSON.parse(teammembers);\r\n        }\r\n        console.log(character, buildname, builddata, teammembers);\r\n    }\r\n    sessionStorage.removeItem('character');\r\n    sessionStorage.removeItem('builddata');\r\n    sessionStorage.removeItem('buildname');\r\n    sessionStorage.removeItem('teammembers');\r\n    return result;\r\n}\r\n","export type TAnyObject = {\r\n    [key: string]: any\r\n}\r\n\r\nimport CHARACTER_MASTER from '../public/data/CharacterMaster.json'// assert {type: 'json'}\r\n\r\nimport SWORD_MASTER from '../public/data/SwordMaster.json'// assert {type: 'json'}\r\nimport CLAYMORE_MASTER from '../public/data/ClaymoreMaster.json'// assert {type: 'json'}\r\nimport POLEARM_MASTER from '../public/data/PolearmMaster.json'// assert {type: 'json'}\r\nimport BOW_MASTER from '../public/data/BowMaster.json'// assert {type: 'json'}\r\nimport CATALYST_MASTER from '../public/data/CatalystMaster.json'// assert {type: 'json'}\r\n\r\nimport ARTIFACT_SET_MASTER from '../public/data/ArtifactSetMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_MAIN_MASTER from '../public/data/ArtifactMainMaster.json'// assert {type: 'json'}\r\nimport ARTIFACT_SUB_MASTER from '../public/data/ArtifactSubMaster.json'// assert {type: 'json'}\r\n\r\nimport ENEMY_MASTER from '../public/data/EnemyMaster.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_RESONANCE_MASTER from '../public/data/ElementalResonanceMaster.json'// assert {type: 'json'}\r\nimport TEAM_OPTION_MASTER from '../public/data/TeamOptionMaster.json'// assert {type: 'json'}\r\nimport OPTION1_MASTER from '../public/data/OptionMaster1.json'// assert {type: 'json'}\r\nimport OPTION2_MASTER from '../public/data/OptionMaster2.json'// assert {type: 'json'}\r\n\r\nimport ELEMENTAL_REACTION_MASTER from '../public/data/ElementalReactionMaster.json'// assert {type: 'json'}\r\n\r\n// import HOYO_DICTIONARY2 from '../public/data/HoYoDictionary2.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY4 from '../public/data/HoYoDictionary4.json'// assert {type: 'json'}\r\n// import HOYO_DICTIONARY5 from '../public/data/HoYoDictionary5.json'// assert {type: 'json'}\r\n// import LOCAL_DICTIONARY from '../public/data/LocalDictionary.json'// assert {type: 'json'}\r\n// import { isPlainObject, isString } from './common'\r\n\r\nexport {\r\n    CHARACTER_MASTER,\r\n    ARTIFACT_SET_MASTER,\r\n    ARTIFACT_MAIN_MASTER,\r\n    ARTIFACT_SUB_MASTER,\r\n    ENEMY_MASTER,\r\n    ELEMENTAL_RESONANCE_MASTER,\r\n    TEAM_OPTION_MASTER,\r\n    OPTION1_MASTER,\r\n    OPTION2_MASTER,\r\n    ELEMENTAL_REACTION_MASTER\r\n};\r\n\r\n// function removeStrFromUrl(obj: any, str: string) {\r\n//     if (isPlainObject(obj)) {\r\n//         for (const key of Object.keys(obj)) {\r\n//             if (isString(obj[key])) {\r\n//                 obj[key] = obj[key].replace(str, '');\r\n//             } else if (isPlainObject(obj[key])) {\r\n//                 removeStrFromUrl(obj[key], str);\r\n//             } else if (Array.isArray(obj[key])) {\r\n//                 for (const entry of obj[key]) {\r\n//                     removeStrFromUrl(entry, str);\r\n//                 }\r\n//             }\r\n//         }\r\n//     }\r\n// }\r\n\r\n// for (const master of [\r\n//     CHARACTER_MASTER,\r\n//     SWORD_MASTER,\r\n//     CLAYMORE_MASTER,\r\n//     POLEARM_MASTER,\r\n//     BOW_MASTER,\r\n//     CATALYST_MASTER,\r\n//     ARTIFACT_SET_MASTER\r\n// ]) {\r\n//     for (const key of Object.keys(master)) {\r\n//         removeStrFromUrl((master as any)[key], '');\r\n//     }\r\n// }\r\n\r\nexport const IMG_SRC_DUMMY = 'data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7';\r\n\r\nexport type TVisionKey = '' | '' | '' | '' | '' | '' | '';\r\nexport type TWeaponTypeKey = '' | '' | '' | '' | '';\r\n\r\nexport type TCharacterMaster = typeof CHARACTER_MASTER;\r\nexport type TCharacter = {\r\n    : 4 | 5,\r\n    : TVisionKey,\r\n    : TWeaponTypeKey,\r\n    ?: string,\r\n    import: string,\r\n}\r\nexport type TCharacterKey = keyof typeof CHARACTER_MASTER\r\nexport type TCharacterEntry = TCharacter & {\r\n    key: TCharacterKey,\r\n    icon_url: string,\r\n}\r\n\r\nexport type TCharacterDetail = {\r\n    : TCharacterKey,\r\n    : string,\r\n    icon_url: string,\r\n    : 4 | 5,\r\n    : TWeaponTypeKey,\r\n    : TVisionKey,\r\n    baseInfo: any,\r\n    region?: string,\r\n    : TCharacterStats,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any,\r\n    : any[],\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any,\r\n    ?: any[],\r\n    ?: any,\r\n    ?: any,\r\n    : any[],\r\n    'NEXT STEP'?: string,\r\n}\r\nexport type TCharacterStats = {\r\n    HP: {\r\n        [key: string]: number,\r\n    },\r\n    : {\r\n        [key: string]: number,\r\n    },\r\n    : {\r\n        [key: string]: number,\r\n    },\r\n    [key: string]: {\r\n        [key: string]: number,\r\n    }\r\n};\r\nexport type TLeveldValue = {\r\n    [key: number | string]: number,\r\n};\r\nexport type TTalentFormula = number | string | TLeveldValue;\r\nexport type TCharacterTalent = {\r\n    ?: string,\r\n    ?: {\r\n        ?: string,\r\n        ?: string,\r\n        ?: string | number | any[],\r\n        ?: string,\r\n        ?: string,\r\n    }[],\r\n    [key: string]: string | number | any[] | undefined,\r\n};\r\n\r\nexport type TWeaponRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TWeaponStats = {\r\n    : any,\r\n    [key: string]: any,\r\n}\r\nexport type TWeapon = {\r\n    : TWeaponRarity,\r\n    import: string,\r\n}\r\nexport type TSwordKey = keyof typeof SWORD_MASTER;\r\nexport type TClaymoreKey = keyof typeof CLAYMORE_MASTER;\r\nexport type TPolearmKey = keyof typeof POLEARM_MASTER;\r\nexport type TBowKey = keyof typeof BOW_MASTER;\r\nexport type TCatalystKey = keyof typeof CATALYST_MASTER;\r\nexport type TWeaponKey = TSwordKey | TClaymoreKey | TPolearmKey | TBowKey | TCatalystKey;\r\nexport type TWeaponEntry = TWeapon & {\r\n    key: TWeaponKey,\r\n    icon_url: string,\r\n};\r\nexport const WEAPON_DETAIL_TEMPLATE = {\r\n    : '',\r\n    : '',\r\n    icon_url: IMG_SRC_DUMMY,\r\n    : 4,\r\n    : '',\r\n    : {\r\n        : {}\r\n    },\r\n};\r\nexport type TWeaponDetail = {\r\n    : TWeaponKey,\r\n    : string,\r\n    icon_url: string,\r\n    : TWeaponRarity,\r\n    : TWeaponTypeKey,\r\n    : TWeaponStats,\r\n    ?: any,\r\n    ?: any[],\r\n    ?: any,\r\n    ?: any,\r\n    ?: number,\r\n};\r\n\r\nexport type TArtifactSetEffect = {\r\n    : string,\r\n    ?: any[],\r\n};\r\nexport type TArtifactSetRarity = 1 | 2 | 3 | 4 | 5;\r\nexport type TArtifactSet = {\r\n    : TArtifactSetRarity,\r\n    image: string,\r\n    '2'?: TArtifactSetEffect,\r\n    '4'?: TArtifactSetEffect,\r\n    ?: { [key: string]: boolean | number },\r\n    artifact_list?: string[],\r\n};\r\nexport type TArtifactSetKey = keyof typeof ARTIFACT_SET_MASTER;\r\nexport type TArtifactSetEntry = TArtifactSet & {\r\n    key: TArtifactSetKey,\r\n    icon_url: string,\r\n};\r\n\r\nexport type TArtifactMainStat = keyof typeof ARTIFACT_MAIN_MASTER[5]\r\nexport type TArtifactMainRarity = 4 | 5;\r\nexport type TArtifactMain = {\r\n    5: TArtifactMainStat,\r\n    4: TArtifactMainStat,\r\n};\r\n\r\nfunction getIconUrl(master: TAnyObject) {\r\n    let result = null;\r\n    if (master.icon_url) {\r\n        result = master.icon_url;\r\n    } else if (master.image) {\r\n        result = master.image;\r\n    } else if (master.import) {\r\n        result = master.import.replace('data/', 'images/');\r\n        if (result.indexOf('characters/') != -1) {\r\n            result = result.replace('characters/', 'characters/face/');\r\n        }\r\n        result = result.replace(/json$/, 'png');\r\n    }\r\n    return result;\r\n}\r\n\r\nexport const CHARACTER_MASTER_LIST: TCharacterEntry[] = [];\r\n(Object.keys(CHARACTER_MASTER) as TCharacterKey[]).forEach(key => {\r\n    const master: any = CHARACTER_MASTER[key];\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    CHARACTER_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const WEAPON_MASTER = {\r\n    : SWORD_MASTER,\r\n    : CLAYMORE_MASTER,\r\n    : POLEARM_MASTER,\r\n    : BOW_MASTER,\r\n    : CATALYST_MASTER,\r\n};\r\n(Object.keys(WEAPON_MASTER) as TWeaponTypeKey[]).forEach(key2 => {\r\n    const typedMaster = WEAPON_MASTER[key2] as any; // \r\n    Object.keys(typedMaster).forEach(key => {\r\n        const master = typedMaster[key];\r\n        master.key = key;\r\n        master.icon_url = getIconUrl(master);\r\n    });\r\n})\r\nconst SWORD_MASTER_LIST = (Object.keys(SWORD_MASTER) as TSwordKey[]).map(key => SWORD_MASTER[key]);\r\nconst CLAYMORE_MASTER_LIST = (Object.keys(CLAYMORE_MASTER) as TClaymoreKey[]).map(key => CLAYMORE_MASTER[key]);\r\nconst POLEARM_MASTER_LIST = (Object.keys(POLEARM_MASTER) as TPolearmKey[]).map(key => POLEARM_MASTER[key]);\r\nconst BOW_MASTER_LIST = (Object.keys(BOW_MASTER) as TBowKey[]).map(key => BOW_MASTER[key]);\r\nconst CATALYST_MASTER_LIST = (Object.keys(CATALYST_MASTER) as TCatalystKey[]).map(key => CATALYST_MASTER[key]);\r\nexport const WEAPON_MASTER_LIST = {\r\n    : SWORD_MASTER_LIST,\r\n    : CLAYMORE_MASTER_LIST,\r\n    : POLEARM_MASTER_LIST,\r\n    : BOW_MASTER_LIST,\r\n    : CATALYST_MASTER_LIST,\r\n};\r\n\r\nexport const ARTIFACT_SET_MASTER_LIST: TArtifactSetEntry[] = [];\r\n(Object.keys(ARTIFACT_SET_MASTER) as TArtifactSetKey[]).forEach(key => {\r\n    const master = ARTIFACT_SET_MASTER[key] as any;\r\n    master.key = key;\r\n    master.icon_url = getIconUrl(master);\r\n    ARTIFACT_SET_MASTER_LIST.push(master);\r\n});\r\n\r\nexport const ARTIFACT_MAIN_MASTER_STATLIST: string[] = Object.keys(ARTIFACT_MAIN_MASTER[5]);\r\n\r\nexport const ARTIFACT_SUB_MASTER_STATLIST = Object.keys(ARTIFACT_SUB_MASTER);\r\nexport type TArtifactSubKey = keyof typeof ARTIFACT_SUB_MASTER;\r\n\r\nexport type TEnemy = {\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    : number,\r\n    [key: string]: number,\r\n};\r\nexport type TEnemyKey = keyof typeof ENEMY_MASTER;\r\nexport type TEnemyEntry = TEnemy & {\r\n    key: TEnemyKey,\r\n};\r\nfor (const key of Object.keys(ENEMY_MASTER)) {\r\n    for (const stat of Object.keys((ENEMY_MASTER as any)[key])) {\r\n        if ((ENEMY_MASTER as any)[key][stat] >= 1000) { // \r\n            (ENEMY_MASTER as any)[key][stat] = Infinity;\r\n        }\r\n    }\r\n}\r\nexport const ENEMY_MASTER_LIST = (Object.keys(ENEMY_MASTER) as TEnemyKey[])\r\n    .map(key => ({ key: key, ...ENEMY_MASTER[key] }));\r\n\r\nexport type TElementalResonanceKey = keyof typeof ELEMENTAL_RESONANCE_MASTER;\r\nexport const ELEMENTAL_RESONANCE_MASTER_LIST = (Object.keys(ELEMENTAL_RESONANCE_MASTER) as TElementalResonanceKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_RESONANCE_MASTER[key] }));\r\n\r\nexport type TTeamOptionKey = keyof typeof TEAM_OPTION_MASTER;\r\nexport const TEAM_OPTION_MASTER_LIST = (Object.keys(TEAM_OPTION_MASTER) as TTeamOptionKey[])\r\n    .map(key => ({ key: key, ...TEAM_OPTION_MASTER[key] }));\r\n\r\nexport type TOption1Key = keyof typeof OPTION1_MASTER;\r\nexport const OPTION1_MASTER_LIST = (Object.keys(OPTION1_MASTER) as TOption1Key[])\r\n    .map(key => ({ key: key, ...OPTION1_MASTER[key] }));\r\n\r\nexport type TOption2Key = keyof typeof OPTION2_MASTER;\r\nexport const OPTION2_MASTER_LIST = (Object.keys(OPTION2_MASTER) as TOption2Key[])\r\n    .map(key => ({ key: key, ...OPTION2_MASTER[key] }));\r\n\r\nexport type TElementalReactionKey = keyof typeof ELEMENTAL_REACTION_MASTER;\r\nexport const ELEMENTAL_REACTION_MASTER_LIST = (Object.keys(ELEMENTAL_REACTION_MASTER) as TElementalReactionKey[])\r\n    .map(key => ({ key: key, ...ELEMENTAL_REACTION_MASTER[key] }));\r\n\r\n// export const DICTIONARY_MASTER = { ...HOYO_DICTIONARY2, ...HOYO_DICTIONARY4, ...HOYO_DICTIONARY5, ...LOCAL_DICTIONARY };\r\n\r\n////////////////\r\n////////////////\r\nconst CHARACTER_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param {string} character \r\n * @returns {Promise<any>}\r\n */\r\nexport async function getCharacterMasterDetail(character: TCharacterKey): Promise<TCharacterDetail> {\r\n    try {\r\n        if (!CHARACTER_MASTER_DETAIL_MAP.has(character)) {\r\n            const url = CHARACTER_MASTER[character]['import'].replace(/^\\//, '');\r\n            const characterMaster = await fetch(url).then(resp => resp.json());\r\n            // URLURL\r\n            const weaponType = CHARACTER_MASTER[character]. as TWeaponTypeKey;\r\n            characterMaster..icon_url = WEAPON_IMG_SRC[weaponType];\r\n            CHARACTER_MASTER_DETAIL_MAP.set(character, characterMaster);\r\n        }\r\n        return CHARACTER_MASTER_DETAIL_MAP.get(character);\r\n    } catch (error) {\r\n        console.error(character);\r\n        throw error;\r\n    }\r\n}\r\n\r\nconst WEAPON_MASTER_DETAIL_MAP = new Map();\r\n/**\r\n * \r\n * @param weapon \r\n * @param opt_weaponType \r\n * @returns \r\n */\r\nexport async function getWeaponMasterDetail(weapon: TWeaponKey, opt_weaponType?: TWeaponTypeKey): Promise<TWeaponDetail> {\r\n    try {\r\n        if (!WEAPON_MASTER_DETAIL_MAP.has(weapon)) {\r\n            let weaponTypeArr;\r\n            if (opt_weaponType) weaponTypeArr = [opt_weaponType];\r\n            else weaponTypeArr = Object.keys(WEAPON_MASTER);\r\n            for (const weaponType of weaponTypeArr) {\r\n                if (weapon in WEAPON_MASTER[weaponType as TWeaponTypeKey]) {\r\n                    const typedMaster: any = WEAPON_MASTER[weaponType as TWeaponTypeKey];\r\n                    const url = typedMaster[weapon]['import'];\r\n                    const weaponMaster: any = await fetch(url).then(resp => resp.json());\r\n                    weaponMaster. = weaponType; // \r\n                    WEAPON_MASTER_DETAIL_MAP.set(weapon, weaponMaster);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return WEAPON_MASTER_DETAIL_MAP.get(weapon);\r\n    } catch (error) {\r\n        console.error(weapon, opt_weaponType);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport const ALL_ELEMENTS = ['', '', '', '', '', '', ''];\r\n\r\nexport const ELEMENT_COLOR_CLASS = {\r\n    : 'pyro',\r\n    : 'hydro',\r\n    : 'anemo',\r\n    : 'electro',\r\n    : 'dendro',\r\n    : 'cryo',\r\n    : 'geo'\r\n};\r\nexport type TElementColorClassKey = keyof typeof ELEMENT_COLOR_CLASS;\r\n\r\nexport const ELEMENT_BG_COLOR_CLASS = {\r\n    : 'pyro-bg',\r\n    : 'hydro-bg',\r\n    : 'anemo-bg',\r\n    : 'electro-bg',\r\n    : 'dendro-bg',\r\n    : 'cryo-bg',\r\n    : 'geo-bg'\r\n};\r\n\r\nexport const ELEMENT_IMG_SRC = {\r\n    : 'images/element_pyro.png',\r\n    : 'images/element_hydro.png',\r\n    : 'images/element_anemo.png',\r\n    : 'images/element_electro.png',\r\n    : 'images/element_dendro.png',\r\n    : 'images/element_cryo.png',\r\n    : 'images/element_geo.png'\r\n};\r\nexport type TElementImgSrcKey = keyof typeof ELEMENT_IMG_SRC;\r\n\r\nexport const WEAPON_IMG_SRC = {\r\n    : 'images/characters/NormalAttack_sword.png',\r\n    : 'images/characters/NormalAttack_claymore.png',\r\n    : 'images/characters/NormalAttack_polearm.png',\r\n    : 'images/characters/NormalAttack_bow.png',\r\n    : 'images/characters/NormalAttack_catalyst.png',\r\n};\r\n\r\nexport const STAR_BACKGROUND_IMAGE_CLASS = {\r\n    1: 'star1-bg',\r\n    2: 'star2-bg',\r\n    3: 'star3-bg',\r\n    4: 'star4-bg',\r\n    5: 'star5-bg'\r\n}\r\n\r\nexport const PROPERTY_MAP = new Map([\r\n    ['', null],\r\n    ['', null],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', null],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['1', null],\r\n    ['2', null],\r\n    ['1', null],\r\n    ['2', null],\r\n    ['3', null],\r\n    ['4', null],\r\n    ['5', null],\r\n    ['HP', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['', 0],\r\n    ['HPP', 0],\r\n    ['P', 0],\r\n    ['P', 0],\r\n    ['1', null],\r\n    ['1', -1],\r\n    ['1', -1],\r\n    ['2', null],\r\n    ['2', -1],\r\n    ['2', -1],\r\n    ['3', null],\r\n    ['3', -1],\r\n    ['3', -1],\r\n    ['4', null],\r\n    ['4', -1],\r\n    ['4', -1],\r\n]);\r\n\r\nexport const NUMBER_OF_PRIORITY_SUBSTATS = Array.from(PROPERTY_MAP.keys()).filter(s => s.match(/^\\d$/)).length;\r\n\r\nexport const DAMAGE_CATEGORY_ARRAY = ['', '', '', '', ''];\r\n\r\nexport const RECOMMEND_ABBREV_MAP = new Map([\r\n    ['HP%', 'HP'], ['', ''], ['', ''], ['', ''], ['', ''], ['', '']\r\n]);\r\n\r\nexport const RECOMMEND_ABBREV_EN_MAP = new Map([\r\n    ['HP%', 'HP'], ['%', 'AT'], ['%', 'DF'], ['', 'EM'],\r\n    ['', 'CR'], ['', 'CD'], ['', 'ER'], ['', 'HE'],\r\n    ['', 'Py'], ['', 'Hy'], ['', 'An'], ['', 'El'], ['', 'De'], ['', 'Cr'], ['', 'Ge'], ['', 'Ph'],\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_MAP = new Map([\r\n    ['HP', 'HP'],\r\n    ['', 'ATK'],\r\n    ['', 'DEF'],\r\n    ['', 'ElementalMastery'],\r\n    ['', 'CritRate'],\r\n    ['', 'CritDMG'],\r\n    ['', 'EnergyRecharge'],\r\n    ['', 'Pyro'],\r\n    ['', 'Hydro'],\r\n    ['', 'Anemo'],\r\n    ['', 'Electro'],\r\n    ['', 'Dendro'],\r\n    ['', 'Cryo'],\r\n    ['', 'Geo'],\r\n    ['', 'Physical'],\r\n    ['', 'Healing'],\r\n    ['HP%', 'HPp'],\r\n    ['%', 'ATKp'],\r\n    ['%', 'DEFp']\r\n]);\r\n\r\nexport const ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP = new Map();\r\nARTIFACT_STAT_JA_EN_ABBREV_MAP.forEach((value, key) => {\r\n    ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP.set(value, key);\r\n});\r\n\r\nexport const GENSEN_MASTER_LIST = [\r\n    {\r\n        key: '',\r\n        values: [7, 7, 7, 7],\r\n        counts: [0, 0, 0, 0],\r\n    },\r\n    {\r\n        key: '',\r\n        values: [3, 3, 3, 3],\r\n        counts: [7, 4, 4, 4],\r\n    },\r\n    {\r\n        key: '1',\r\n        values: [3, 3, 3, 3],\r\n        counts: [8, 5, 5, 4],\r\n    },\r\n    {\r\n        key: '3',\r\n        values: [3, 3, 3, 3],\r\n        counts: [11, 8, 7, 4],\r\n    },\r\n    {\r\n        key: '',\r\n        values: [1, 1, 1, 1],\r\n        counts: [14, 11, 10, 4],\r\n    },\r\n];\r\nfor (const gensen of GENSEN_MASTER_LIST) {\r\n    for (let i = gensen.values.length; i < NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n        gensen.values.push(gensen.values[0]);\r\n    }\r\n    for (let i = gensen.counts.length; i < NUMBER_OF_PRIORITY_SUBSTATS; i++) {\r\n        gensen.counts.push(0);\r\n    }\r\n}\r\nexport type TGensen = { key: string; values: number[]; counts: number[] };\r\n\r\nexport const ARTIFACT_CAT_NAMES = {\r\n    '1': 'flower_of_life',\r\n    '2': 'plume_of_death',\r\n    '3': 'sands_of_eon',\r\n    '4': 'goblet_of_eonothem',\r\n    '5': 'circlet_of_logos',\r\n};\r\n\r\nexport function getArtifactIconUrl(setname: string, opt_cat_id: any = '1') {\r\n    let result = IMG_SRC_DUMMY;\r\n    if (setname in ARTIFACT_SET_MASTER) {\r\n        result = (ARTIFACT_SET_MASTER as any)[setname].icon_url;\r\n        if (!result.startsWith('data:image/gif;')) {\r\n            result = result.replace(/.png$/, '');\r\n            result += '/' + (ARTIFACT_CAT_NAMES as any)[String(opt_cat_id)] + '.png';\r\n        }\r\n    }\r\n    return result;\r\n}\r\n","import _ from \"lodash\";\r\n\r\n// 21\r\nexport type TParticleInfo = number | (number | undefined)[];\r\nexport type TParticleEntry = {\r\n    [key: string]: TParticleInfo,\r\n};\r\nexport type TParticleMaster = {\r\n    [key: string]: TParticleEntry,\r\n};\r\n\r\nexport const SP_SELF = 0x1000;      // =[0]       \r\nexport const SP_NEXT = 0x1001;      // =[0]       \r\nexport const SP_LONG = 0x1002;      // =[0]*[2]   \r\nexport const SP_SHRT = 0x1003;      // =[0]       \r\nconst C0 = 0x2000;\r\nconst C1 = 0x2001;\r\nconst C2 = 0x2002;\r\nconst C4 = 0x2004;\r\nconst C6 = 0x2006;\r\n// \r\n// , \r\n// , , \r\n// , , , , , \r\n// , , , , , , , , , , , \r\nconst PARTICLE_MASTER: TParticleMaster = {\r\n    '': {\r\n        'E.Press': 3.5,\r\n        'E.Hold': 3.5,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 5,\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 30, 20, 2.5],   // CT2.5s\r\n    },\r\n    '': {\r\n        'E': [3, SP_SELF, 10, 16, 2, C1, 3, SP_SELF, 14, 16, 2],    // CT2s\r\n    },\r\n    '': {\r\n        'E': [4, SP_NEXT, 0, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': 5,\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 12, 20, 2.5, C2, 1, SP_LONG, 18, 20, 2.5],    //  CT2.5s\r\n    },\r\n    '': {\r\n        'E.Press': [6, SP_SELF],   // 11 CT1.6s\r\n        'E.Hold': [6, SP_SELF],    // 11 CT1.6s\r\n    },\r\n    '': {\r\n        'E': [5, SP_SELF, 10, 16, 2, C6, 5, SP_SELF, 12, 18, 2],\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_LONG, 25, 5, 7],     // CT7s\r\n        'E.Hold': [3, SP_LONG, 25, 6, 7],      // CT7s\r\n    },\r\n    '': {\r\n        'E': [1.5 + 1 + 1 + 1, SP_SELF]\r\n    },\r\n    '': {\r\n        'E': 3,\r\n        'E(burst)': 1 + 1 / 3,\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_NEXT, 0, 10, undefined],\r\n        'E.Hold': [4, SP_NEXT, 0, 10, undefined],\r\n    },\r\n    '': {\r\n        'E': [4, SP_SELF, 6, 12, 0],\r\n    },\r\n    '': {\r\n        'E': [1, SP_LONG, 14, 4, 2.5],    // CT2.5s\r\n    },\r\n    '': {\r\n        'E.Press': [3, SP_NEXT, 10, 10, undefined],\r\n        'E.Hold': [4, SP_NEXT, 15, 15, undefined],\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_LONG, 12, 20, 2],    // per damage CT2s\r\n    },\r\n    '': {\r\n        'E': [0.5, SP_LONG, 25, 10, 0.9],   // per damage CT0.9s\r\n    },\r\n    '': {\r\n        'E': 5,\r\n    },\r\n    '': {\r\n        'E': [4, SP_SELF, 10, 18, 2],   // CT2s\r\n    },\r\n    '': {\r\n        'E': 4.5,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 1.5,\r\n        'E.Hold': 2.5,\r\n    },\r\n    '': {\r\n        'E': [2.5 * 2, SP_SELF, 9, 16, undefined],\r\n    },\r\n    '': {\r\n        'E': 3,\r\n        'E(burst)': 0,\r\n    },\r\n    '': {\r\n        'E': [2 * 2, SP_SHRT, 6, 10, undefined]\r\n    },\r\n    '': {\r\n        'E.Press': [0.67, SP_LONG, 30, 4, 2],   // 10.67 CT2s\r\n        'E.Hold': [0.67, SP_LONG, 30, 4, 2],    // 10.67 CT2s\r\n    },\r\n    '': {\r\n        'E.Press': [0.5, SP_LONG, 20, 4, 1.5],  // CT1.5s\r\n        'E.Hold': [0.5, SP_LONG, 20, 12, 1.5],  // CT1.5s\r\n    },\r\n    '': {\r\n        'E': [1 / 3 * 9, SP_SELF],              // 9s\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 2.5,\r\n        'E.Hold': 2.5,\r\n    },\r\n    '': {\r\n        'E.Press': [3.33, SP_SHRT, 5, 12, undefined],\r\n        'E.Hold': [3.33, SP_SHRT, 5, 12, undefined],\r\n    },\r\n    '': {\r\n        'E': 0,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E': 2.67,\r\n    },\r\n    '': {\r\n        'E': 2,\r\n        'E(burst)': 1,\r\n    },\r\n    '': {\r\n        'E.Press': 4,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 3 + 1,\r\n    },\r\n    '': {\r\n        'E': 2,\r\n    },\r\n    '': {\r\n        'E.Press': 4,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E.Press': [1, SP_LONG, 10, 15, 1.5],\r\n        'E.Hold': [1, SP_LONG, 10, 15, 1.5]\r\n    },\r\n    '': {\r\n        'E': [2, SP_NEXT, 18, 6, 5.5],      // CT5.5s\r\n    },\r\n    '': {\r\n        'E': [1.33, SP_LONG, 12, 12, 3]     // CT3s\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3\r\n    },\r\n    '': {\r\n        'E': 2,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E': 4,     // 2:0-1/2.5:2-3/3:4=\r\n    },\r\n    '': {\r\n        'E': [0.45, SP_LONG, 12, 15, 1.5, C2, 0.45, SP_LONG, 15, 15, 1.5],  // CT1.5s\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 2,\r\n    },\r\n    '': {\r\n        'E': 3.5,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E': 3,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E.Press': 0.8 * 2,\r\n        'E.Hold': 0.8 * 5,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E': 4,\r\n    },\r\n    '': {\r\n        'E': 0,\r\n    },\r\n    '': {\r\n        'E.Press': 2.25,\r\n        'E.Hold': 3,\r\n    },\r\n    '': {\r\n        'E': [0.67, SP_LONG, 10, 25, 1, C6, 0.67, SP_LONG, 12, 25, 1],\r\n    },\r\n    '': {\r\n        'E': 3.33,\r\n    },\r\n    '': {\r\n        'E': [4.5, SP_NEXT, 15, 21, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': 2,\r\n        'E.Hold': 4,\r\n    },\r\n    '': {\r\n        'E': [4, SP_SHRT, 8, 12, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': 3,\r\n        'E.Hold': 4,\r\n        'E.Press(burst)': 0,\r\n    },\r\n    '': {\r\n        'E': [0, SP_NEXT, 15, 32, undefined, C2, 0, SP_NEXT, 15, 27.2, undefined],\r\n    },\r\n    '': {\r\n        'E.Press': 0,\r\n        'E.Hold': 5,\r\n    },\r\n    '': {\r\n        'E': 2.67,\r\n    },\r\n    '': {\r\n        'E.Press': [4, SP_SHRT, 8, 15, undefined],\r\n        'E.Hold': [4, SP_SHRT, 8, 15, undefined],\r\n    },\r\n    '()': {\r\n        'E.Press': 3.33,\r\n        'E.Hold': 3.33,\r\n    },\r\n    '()': {\r\n        'E': 2.5,\r\n    },\r\n    '()': {\r\n        'E': 1,\r\n    },\r\n    '()': {\r\n        'E.Press': 3.33,\r\n        'E.Hold': 3.33,\r\n    },\r\n    '()': {\r\n        'E.Press': 2,\r\n        'E.Hold': 3.33,\r\n    },\r\n}\r\n\r\nObject.keys(PARTICLE_MASTER).forEach(key => {\r\n    const pentry = PARTICLE_MASTER[key];\r\n    Object.keys(pentry).forEach(key2 => {\r\n        const pinfo = pentry[key2];\r\n        if (_.isNumber(pinfo)) {\r\n            return;\r\n        }\r\n        if (_.isArray(pinfo)) {\r\n            if (pinfo.length === 2 || pinfo.length === 5 || pinfo.length === 11) {\r\n                const receiveTypeArr: (number | undefined)[] = [];\r\n                receiveTypeArr.push(pinfo[1]);\r\n                if (pinfo.length === 11) {\r\n                    receiveTypeArr.push(pinfo[7]);\r\n                }\r\n                if (pinfo.filter(s => s !== undefined && !_.isNumber(s)).length === 0\r\n                    && receiveTypeArr.filter(s => s === undefined || ![SP_SELF, SP_NEXT, SP_LONG, SP_SHRT].includes(s)).length === 0\r\n                    && (pinfo.length !== 11 || (pinfo[5] !== undefined && [C1, C2, C4, C6].includes(pinfo[5])))) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        console.error(key, key2, pinfo);\r\n    })\r\n})\r\n\r\n/**    */\r\nexport const CHARACTER_Q_TO_E_ARR = ['', ''];\r\n\r\n/**  */\r\nexport const CHARACTER_E_UNTIL_MAP = new Map<string, Map<string[], number>>();\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E'], 2],]));            // EEE\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E', 'C'], 1],]));             // E(E|C)\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E', 'N'], 3],]));         // E(E|N){3}\r\nCHARACTER_E_UNTIL_MAP.set('', new Map([[['E'], 1], [['N'], 4],]));  // E(E|N{4})\r\n\r\n/**  */\r\nexport const CHARACTER_E_DELAY_MAP = new Map<string, string[]>();\r\nCHARACTER_E_DELAY_MAP.set('', ['C']);\r\nCHARACTER_E_DELAY_MAP.set('', ['C']);\r\n\r\n/**  */\r\nexport const CHARACTER_Q_NOT_RECHARGEABLE = ['', ''];\r\n\r\nexport function getElementalSkillActions(character: string) {\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    return particleMaster ? Object.keys(particleMaster).filter(action => action.startsWith('E') && action.indexOf('(burst)') == -1) : ['E'];\r\n}\r\n\r\nexport function getParticleInfo(character: string, action: string, constellation = 0, isBursting = false) {\r\n    const result: TParticleInfo = [0, SP_NEXT, 0, undefined, undefined];    // , , , , CT\r\n    const particleMaster = PARTICLE_MASTER[character];\r\n    if (particleMaster) {\r\n        const keyArr: string[] = [];\r\n        if (isBursting) {\r\n            keyArr.push(action + '(burst)');\r\n        }\r\n        keyArr.push(action);\r\n        for (const key of keyArr) {\r\n            if (key in particleMaster) {\r\n                const work = particleMaster[key];\r\n                if (_.isNumber(work)) {\r\n                    result[0] = work;\r\n                } else if (_.isArray(work)) {\r\n                    let start = 0;\r\n                    if (work.length > 5 && work[5] !== undefined && work[5] <= (constellation + C0)) {\r\n                        start = 6;\r\n                    }\r\n                    for (let i = 0; i < 5; i++) {\r\n                        if (work.length > (i + start)) {\r\n                            result[i] = work[i + start];\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleNumFromInfo(particleInfo: TParticleInfo, leftTime?: number) {\r\n    let result = 0;\r\n    if (_.isNumber(particleInfo)) {\r\n        result = particleInfo;\r\n    } else {\r\n        result = particleInfo[0] ?? 0;\r\n        const receiveType = getReceiveTypeFromInfo(particleInfo);\r\n        if ([SP_LONG].includes(receiveType)) {\r\n            const particleCt = getParticleCooltimeFromInfo(particleInfo);\r\n            if (particleCt) {\r\n                result /= particleCt;\r\n            }\r\n            let duration = getDurationFromInfo(particleInfo);\r\n            if (duration > 0) {\r\n                if (leftTime !== undefined && duration > leftTime) {\r\n                    duration = Math.max(0, leftTime);\r\n                }\r\n                result *= duration;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getReceiveTypeFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 1) ? particleInfo[1] ?? SP_NEXT : SP_NEXT;\r\n}\r\n\r\n/**  */\r\nexport function getDurationFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 2) ? particleInfo[2] ?? 0 : 0;\r\n}\r\n\r\n/**  */\r\nexport function getCooltimeFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 3) ? particleInfo[3] : undefined;\r\n}\r\n\r\n/**  */\r\nexport function getParticleCooltimeFromInfo(particleInfo: TParticleInfo) {\r\n    return (_.isArray(particleInfo) && particleInfo.length > 4) ? particleInfo[4] : undefined;\r\n}\r\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-fe60a4d2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"artifact\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"artifact\"\n}\nconst _hoisted_3 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_4 = { class: \"control\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_7 = { class: \"with-tooltip\" }\nconst _hoisted_8 = [\"src\", \"alt\"]\nconst _hoisted_9 = { class: \"tooltip\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"edit-mainstat\"\n}\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = [\"step\"]\nconst _hoisted_13 = {\n  key: 1,\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_14 = { key: 2 }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"5\" }, \" 5 \", -1))\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"4\" }, \" 4 \", -1))\nconst _hoisted_17 = [\n  _hoisted_15,\n  _hoisted_16\n]\nconst _hoisted_18 = { key: 3 }\nconst _hoisted_19 = { style: {\"width\":\"55%\"} }\nconst _hoisted_20 = { class: \"artifact-substat\" }\nconst _hoisted_21 = { class: \"right\" }\nconst _hoisted_22 = [\"onUpdate:modelValue\"]\nconst _hoisted_23 = [\"value\", \"disabled\"]\nconst _hoisted_24 = { class: \"right\" }\nconst _hoisted_25 = [\"onUpdate:modelValue\", \"step\"]\nconst _hoisted_26 = { key: 1 }\nconst _hoisted_27 = {\n  class: \"left-column\",\n  style: {\"width\":\"45%\"}\n}\nconst _hoisted_28 = {\n  key: 0,\n  class: \"score\"\n}\nconst _hoisted_29 = { class: \"control\" }\nconst _hoisted_30 = {\n  key: 0,\n  type: \"button\"\n}\nconst _hoisted_31 = {\n  key: 0,\n  class: \"material-symbols-outlined\",\n  style: {\"color\":\"yellow\"}\n}\nconst _hoisted_32 = {\n  key: 1,\n  class: \"material-symbols-outlined\"\n}\nconst _hoisted_33 = { class: \"with-tooltip\" }\nconst _hoisted_34 = [\"src\", \"alt\"]\nconst _hoisted_35 = { class: \"tooltip\" }\nconst _hoisted_36 = {\n  class: \"mainstat\",\n  style: {\"margin\":\"1px 0\"}\n}\nconst _hoisted_37 = { style: {\"width\":\"55%\"} }\nconst _hoisted_38 = { class: \"artifact-substat\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ArtifactSetSelect = _resolveComponent(\"ArtifactSetSelect\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_ctx.control == 'editable')\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_2, [\n          _createElementVNode(\"tr\", null, [\n            _createElementVNode(\"td\", _hoisted_3, [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createElementVNode(\"button\", {\n                  type: \"button\",\n                  onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.isEditing = !_ctx.isEditing))\n                }, [\n                  (_ctx.isEditing)\n                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \" edit_off \"))\n                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \" edit \"))\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_7, [\n                _createElementVNode(\"img\", {\n                  class: \"artifact-icon\",\n                  src: _ctx.artifactImgSrc,\n                  alt: _ctx.displayName(_ctx.copiedArtifact.name),\n                  onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.artifactIconOnClick()))\n                }, null, 8, _hoisted_8),\n                _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n              ]),\n              (_ctx.isEditing)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                    _withDirectives(_createElementVNode(\"select\", {\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.copiedArtifact.mainStat) = $event)),\n                      onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                    }, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.mainStatOptions, (option) => {\n                        return (_openBlock(), _createElementBlock(\"option\", {\n                          key: option,\n                          value: option\n                        }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_11))\n                      }), 128))\n                    ], 544), [\n                      [_vModelSelect, _ctx.copiedArtifact.mainStat]\n                    ]),\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"number\",\n                      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.copiedArtifact.mainStatValue) = $event)),\n                      step: _ctx.statStep(_ctx.copiedArtifact.mainStat),\n                      min: \"0\",\n                      onChange: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                    }, null, 40, _hoisted_12), [\n                      [_vModelText, _ctx.copiedArtifact.mainStatValue]\n                    ])\n                  ]))\n                : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' + _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                _ctx.copiedArtifact.mainStatValue)), 1)),\n              (_ctx.isEditing)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                    _withDirectives(_createElementVNode(\"select\", {\n                      class: \"star\",\n                      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.copiedArtifact.rarity) = $event)),\n                      onChange: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.starOnChange && _ctx.starOnChange(...args)))\n                    }, _hoisted_17, 544), [\n                      [_vModelSelect, _ctx.copiedArtifact.rarity]\n                    ])\n                  ]))\n                : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                      return (_openBlock(), _createElementBlock(\"img\", {\n                        class: \"star\",\n                        src: \"images/star.png\",\n                        key: dummy\n                      }))\n                    }), 128))\n                  ]))\n            ]),\n            _createElementVNode(\"td\", _hoisted_19, [\n              _createElementVNode(\"table\", _hoisted_20, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                  return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                    (_ctx.isEditing)\n                      ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                          _createElementVNode(\"td\", _hoisted_21, [\n                            _withDirectives(_createElementVNode(\"select\", {\n                              \"onUpdate:modelValue\": ($event: any) => ((subStat.name) = $event),\n                              onChange: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                            }, [\n                              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.subStatOptions, (option) => {\n                                return (_openBlock(), _createElementBlock(\"option\", {\n                                  key: option,\n                                  value: option,\n                                  disabled: _ctx.subStatOptionDisabled(option, subStat.name)\n                                }, _toDisplayString(_ctx.displayName(option)), 9, _hoisted_23))\n                              }), 128))\n                            ], 40, _hoisted_22), [\n                              [_vModelSelect, subStat.name]\n                            ])\n                          ]),\n                          _createElementVNode(\"td\", _hoisted_24, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                              type: \"number\",\n                              \"onUpdate:modelValue\": ($event: any) => ((subStat.value) = $event),\n                              step: _ctx.statStep(subStat.name),\n                              min: \"0\",\n                              onChange: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onChange && _ctx.onChange(...args)))\n                            }, null, 40, _hoisted_25), [\n                              [_vModelText, subStat.value]\n                            ])\n                          ])\n                        ], 64))\n                      : (_openBlock(), _createElementBlock(\"td\", _hoisted_26, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1))\n                  ]))\n                }), 128))\n              ])\n            ])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"table\", {\n          key: 1,\n          class: \"artifact\",\n          onClick: _cache[10] || (_cache[10] = ($event: any) => (_ctx.selectOnClick()))\n        }, [\n          _createElementVNode(\"tr\", null, [\n            _createElementVNode(\"td\", _hoisted_27, [\n              (_ctx.score)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, _toDisplayString(Math.round(_ctx.score * 10) / 10), 1))\n                : _createCommentVNode(\"\", true),\n              _createElementVNode(\"div\", _hoisted_29, [\n                (_ctx.control == 'selectable')\n                  ? (_openBlock(), _createElementBlock(\"button\", _hoisted_30, [\n                      (_ctx.selected)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_31, \" select_check_box \"))\n                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_32, \" check_box_outline_blank \"))\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _createElementVNode(\"div\", _hoisted_33, [\n                _createElementVNode(\"img\", {\n                  class: \"artifact-icon\",\n                  src: _ctx.artifactImgSrc,\n                  alt: _ctx.displayName(_ctx.copiedArtifact.name)\n                }, null, 8, _hoisted_34),\n                _createElementVNode(\"div\", _hoisted_35, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.name)), 1)\n              ]),\n              _createElementVNode(\"div\", _hoisted_36, _toDisplayString(_ctx.displayName(_ctx.copiedArtifact.mainStat).replace(/%$/, '') + '+' + _ctx.displayStatValue(_ctx.copiedArtifact.mainStat,\r\n                _ctx.copiedArtifact.mainStatValue)), 1),\n              _createElementVNode(\"div\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(new Array(_ctx.copiedArtifact.rarity), (dummy) => {\n                  return (_openBlock(), _createElementBlock(\"img\", {\n                    class: \"star\",\n                    src: \"images/star.png\",\n                    key: dummy\n                  }))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"td\", _hoisted_37, [\n              _createElementVNode(\"table\", _hoisted_38, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.copiedArtifact.subStats, (subStat, index) => {\n                  return (_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n                    _createElementVNode(\"td\", null, _toDisplayString(_ctx.displayName(subStat.name).replace(/%$/, '') + '+' + _ctx.displayStatValue(subStat.name, subStat.value)), 1)\n                  ]))\n                }), 128))\n              ])\n            ])\n          ])\n        ])),\n    _withDirectives(_createElementVNode(\"div\", null, [\n      _createVNode(_component_ArtifactSetSelect, {\n        visible: true,\n        index: 1,\n        \"artifact-set\": _ctx.artifact.setname,\n        \"artifact-set-masters\": _ctx.artifactSetMasters,\n        cat_id: _ctx.artifact.cat_id,\n        \"onUpdate:artifactSet\": _ctx.updateArtifactSet\n      }, null, 8, [\"artifact-set\", \"artifact-set-masters\", \"cat_id\", \"onUpdate:artifactSet\"])\n    ], 512), [\n      [_vShow, _ctx.isListShow]\n    ])\n  ]))\n}","<template>\r\n  <div class=\"artifact\">\r\n    <table v-if=\"control == 'editable'\" class=\"artifact\">\r\n      <tr>\r\n        <td class=\"left-column\" style=\"width: 45%;\">\r\n          <div class=\"control\">\r\n            <button type=\"button\" @click=\"isEditing = !isEditing\">\r\n              <span v-if=\"isEditing\" class=\"material-symbols-outlined\"> edit_off </span>\r\n              <span v-else class=\"material-symbols-outlined\"> edit </span>\r\n            </button>\r\n          </div>\r\n          <div class=\"with-tooltip\">\r\n            <img class=\"artifact-icon\" :src=\"artifactImgSrc\" :alt=\"displayName(copiedArtifact.name)\"\r\n              @click=\"artifactIconOnClick()\">\r\n            <div class=\"tooltip\">{{ displayName(copiedArtifact.name) }}</div>\r\n          </div>\r\n          <div class=\"edit-mainstat\" v-if=\"isEditing\">\r\n            <select v-model=\"copiedArtifact.mainStat\" @change=\"onChange\">\r\n              <option v-for=\"option in mainStatOptions\" :key=\"option\" :value=\"option\">\r\n                {{ displayName(option) }}\r\n              </option>\r\n            </select>\r\n            <input type=\"number\" v-model=\"copiedArtifact.mainStatValue\" :step=\"statStep(copiedArtifact.mainStat)\"\r\n              min=\"0\" @change=\"onChange\">\r\n          </div>\r\n          <div v-else class=\"mainstat\" style=\"margin: 1px 0\">\r\n            {{ displayName(copiedArtifact.mainStat).replace(/%$/, '') + '+' + displayStatValue(copiedArtifact.mainStat,\r\n                copiedArtifact.mainStatValue)\r\n            }}\r\n          </div>\r\n          <div v-if=\"isEditing\">\r\n            <select class=\"star\" v-model=\"copiedArtifact.rarity\" @change=\"starOnChange\">\r\n              <option value=\"5\"> 5 </option>\r\n              <option value=\"4\"> 4 </option>\r\n            </select>\r\n          </div>\r\n          <div v-else>\r\n            <img class=\"star\" v-for=\"dummy in new Array(copiedArtifact.rarity)\" src=\"images/star.png\" :key=\"dummy\">\r\n          </div>\r\n        </td>\r\n        <td style=\"width: 55%\">\r\n          <table class=\"artifact-substat\">\r\n            <tr v-for=\"(subStat, index) in copiedArtifact.subStats\" :key=\"index\">\r\n              <template v-if=\"isEditing\">\r\n                <td class=\"right\">\r\n                  <select v-model=\"subStat.name\" @change=\"onChange\">\r\n                    <option v-for=\"option in subStatOptions\" :key=\"option\" :value=\"option\"\r\n                      :disabled=\"subStatOptionDisabled(option, subStat.name)\">\r\n                      {{ displayName(option) }}\r\n                    </option>\r\n                  </select>\r\n                </td>\r\n                <td class=\"right\">\r\n                  <input type=\"number\" v-model=\"subStat.value\" :step=\"statStep(subStat.name)\" min=\"0\"\r\n                    @change=\"onChange\">\r\n                </td>\r\n              </template>\r\n              <td v-else>\r\n                {{ displayName(subStat.name).replace(/%$/, '') + '+' + displayStatValue(subStat.name, subStat.value) }}\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <table v-else class=\"artifact\" @click=\"selectOnClick()\">\r\n      <tr>\r\n        <td class=\"left-column\" style=\"width: 45%;\">\r\n          <div v-if=\"score\" class=\"score\"> {{ Math.round(score * 10) / 10 }}</div>\r\n          <div class=\"control\">\r\n            <template v-if=\"control == 'selectable'\">\r\n              <button type=\"button\">\r\n                <span v-if=\"selected\" class=\"material-symbols-outlined\" style=\"color: yellow\"> select_check_box\r\n                </span>\r\n                <span v-else class=\"material-symbols-outlined\"> check_box_outline_blank </span>\r\n              </button>\r\n            </template>\r\n          </div>\r\n          <div class=\"with-tooltip\">\r\n            <img class=\"artifact-icon\" :src=\"artifactImgSrc\" :alt=\"displayName(copiedArtifact.name)\">\r\n            <div class=\"tooltip\">{{ displayName(copiedArtifact.name) }}</div>\r\n          </div>\r\n          <div class=\"mainstat\" style=\"margin: 1px 0\">\r\n            {{ displayName(copiedArtifact.mainStat).replace(/%$/, '') + '+' + displayStatValue(copiedArtifact.mainStat,\r\n                copiedArtifact.mainStatValue)\r\n            }}\r\n          </div>\r\n          <div>\r\n            <img class=\"star\" v-for=\"dummy in new Array(copiedArtifact.rarity)\" src=\"images/star.png\" :key=\"dummy\">\r\n          </div>\r\n        </td>\r\n        <td style=\"width: 55%\">\r\n          <table class=\"artifact-substat\">\r\n            <tr v-for=\"(subStat, index) in copiedArtifact.subStats\" :key=\"index\">\r\n              <td>\r\n                {{ displayName(subStat.name).replace(/%$/, '') + '+' + displayStatValue(subStat.name, subStat.value) }}\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <div v-show=\"isListShow\">\r\n      <ArtifactSetSelect :visible=\"true\" :index=\"1\" :artifact-set=\"artifact.setname\"\r\n        :artifact-set-masters=\"artifactSetMasters\" :cat_id=\"artifact.cat_id\" @update:artifact-set=\"updateArtifactSet\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport _ from 'lodash';\r\nimport { overwriteObject } from \"@/common\";\r\nimport { ARTIFACT_SET_MASTER_DUMMY, TArtifact, ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY, _ARRAY } from \"@/input\";\r\nimport { ARTIFACT_SET_MASTER, TArtifactSetEntry, TArtifactSetKey, getArtifactIconUrl } from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\nimport ArtifactSetSelect from \"./ArtifactSetSelect.vue\";\r\n\r\nexport default defineComponent({\r\n  name: 'ArtifactItem',\r\n  props: {\r\n    artifact: { type: Object as PropType<TArtifact>, required: true },\r\n    id: { type: Number },\r\n    control: String,\r\n    initial: Boolean,\r\n    selected: Boolean,\r\n    score: Number,\r\n  },\r\n  components: {\r\n    ArtifactSetSelect,\r\n  },\r\n  emits: ['update:artifact', 'select:artifact'],\r\n  setup(props, context) {\r\n    const { displayName, displayStatValue, percent } = CompositionFunction();\r\n\r\n    const copiedArtifact = reactive(_.cloneDeep(props.artifact));\r\n    const artifactSetMasters = reactive([ARTIFACT_SET_MASTER_DUMMY, ARTIFACT_SET_MASTER_DUMMY] as TArtifactSetEntry[]);\r\n    const isEditing = ref(false);\r\n    const isSelected = ref(false);\r\n    const isListShow = ref(false);\r\n\r\n    const artifactImgSrc = computed(() => {\r\n      return getArtifactIconUrl(copiedArtifact.setname, copiedArtifact.cat_id);\r\n    });\r\n\r\n    const MAINSTAT_CAT_ARR = {\r\n      '1': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '2': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '3': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '4': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n      '5': Array.from(new Set(_ARRAY.map(s => s.replace(/^\\d_/, '')))),\r\n    };\r\n\r\n    const mainStatOptions = computed(() => {\r\n      return (MAINSTAT_CAT_ARR as any)[copiedArtifact.cat_id];\r\n    });\r\n\r\n    const subStatOptions = computed(() => {\r\n      return ARRAY;\r\n    });\r\n\r\n    const statStep = (stat: string) => {\r\n      return percent(stat) ? 0.1 : 1;\r\n    };\r\n\r\n    const subStatOptionDisabled = ((value: string, selected: string) => {\r\n      if (value == selected) return false;\r\n      const work = copiedArtifact.subStats.map(s => s.name);\r\n      return work.includes(value);\r\n    });\r\n\r\n    const onChange = () => {\r\n      context.emit('update:artifact', props.id, copiedArtifact);\r\n    };\r\n\r\n    const starOnChange = () => {\r\n      copiedArtifact.rarity = Number(copiedArtifact.rarity);\r\n    }\r\n\r\n    const artifactIconOnClick = () => {\r\n      if (isEditing.value) {\r\n        isListShow.value = !isListShow.value;\r\n      } else {\r\n        isListShow.value = false;\r\n      }\r\n    };\r\n\r\n    const selectOnClick = () => {\r\n      if (props.control === 'selectable') {\r\n        context.emit('select:artifact', props.id);\r\n      }\r\n    };\r\n\r\n    const updateArtifactSet = (artifactSet: TArtifactSetKey) => {\r\n      copiedArtifact.setname = artifactSet;\r\n      const master = ARTIFACT_SET_MASTER[artifactSet];\r\n      copiedArtifact.rarity = master.;\r\n      if ('artifact_list' in master) {\r\n        copiedArtifact.name = master.artifact_list[copiedArtifact.cat_id - 1];\r\n      }\r\n      isListShow.value = false;\r\n      onChange();\r\n    };\r\n\r\n    function onLoad() {\r\n      if (props.initial !== undefined) {\r\n        if (props.control === 'editable') {\r\n          isEditing.value = props.initial;\r\n        } else if (props.control === 'selectable') {\r\n          isSelected.value = props.initial;\r\n        }\r\n      }\r\n    }\r\n    onLoad();\r\n\r\n    watch(props, (newVal, oldVal) => {\r\n      overwriteObject(copiedArtifact, newVal.artifact);\r\n      if (newVal.initial != oldVal.initial) {\r\n        onLoad();\r\n      }\r\n    });\r\n\r\n    return {\r\n      displayName, displayStatValue,\r\n\r\n      copiedArtifact,\r\n      artifactSetMasters,\r\n      isEditing,\r\n      isSelected,\r\n      isListShow,\r\n\r\n      artifactImgSrc,\r\n      mainStatOptions,\r\n      subStatOptions,\r\n      subStatOptionDisabled,\r\n      statStep,\r\n\r\n      onChange,\r\n      starOnChange,\r\n      artifactIconOnClick,\r\n      updateArtifactSet,\r\n      selectOnClick,\r\n    }\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\ndiv.artifact {\r\n  display: inline-block;\r\n  width: calc(25% - 10px);\r\n  min-width: 44rem;\r\n  margin: 2px;\r\n  font-size: 1.8rem;\r\n  background-color: rgb(26, 79, 109);\r\n  border-radius: 10px 10px 0 0;\r\n}\r\n\r\ntable.artifact {\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  width: 100%;\r\n  table-layout: fixed;\r\n  border-spacing: 0;\r\n}\r\n\r\ntable.artifact td.left-column {\r\n  position: relative;\r\n}\r\n\r\ntable.artifact td.left-column div.control {\r\n  position: absolute;\r\n  left: -5px;\r\n  bottom: -5px;\r\n}\r\n\r\ntable.artifact td.left-column div.control button {\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n\r\ntable.artifact td.left-column div.control span {\r\n  font-size: 2.4rem;\r\n  color: blanchedalmond;\r\n}\r\n\r\ndiv.mainstat {\r\n  margin: 1px 0;\r\n}\r\n\r\ntable.artifact-substat {\r\n  width: 100%;\r\n  border-spacing: 0;\r\n}\r\n\r\ntable.artifact tr td {\r\n  vertical-align: top;\r\n  border-bottom: 2px solid whitesmoke;\r\n  padding: 2px 1px;\r\n  white-space: nowrap;\r\n}\r\n\r\ntable.artifact-substat tr td {\r\n  vertical-align: middle;\r\n  border-bottom: 1px solid gray;\r\n  padding: 0px 1px;\r\n  line-height: 2.8rem;\r\n  text-align: left;\r\n}\r\n\r\ntable.artifact-substat tr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\ntable.artifact-substat td.right {\r\n  text-align: right;\r\n}\r\n\r\nselect {\r\n  width: 100%;\r\n  margin: auto 1px;\r\n  padding: 0 1px;\r\n  border: none;\r\n  border-radius: 2px;\r\n}\r\n\r\ninput[type=\"number\"] {\r\n  width: 9rem;\r\n  margin: auto;\r\n  padding: 0 1px;\r\n  border: none;\r\n}\r\n\r\ndiv.edit-mainstat {\r\n  margin: 1px 0;\r\n}\r\n\r\ndiv.edit-mainstat select {\r\n  width: calc(100% - 9rem - 2px);\r\n}\r\n\r\ntable.edit-mainstat input[type=\"number\"] {\r\n  width: calc(100% - 2px);\r\n}\r\n\r\nimg.artifact-icon {\r\n  width: calc(6rem - 2px);\r\n  height: calc(6rem - 2px);\r\n  border: 1px solid gray;\r\n  border-radius: 50%;\r\n}\r\n\r\nimg.star {\r\n  width: 1.6rem;\r\n  height: 1.6rem;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nselect.star {\r\n  width: 8rem;\r\n}\r\n\r\ndiv.score {\r\n  position: absolute;\r\n  left: 5px;\r\n  top: 3px;\r\n}\r\n</style>","import { render } from \"./ArtifactItem.vue?vue&type=template&id=fe60a4d2&scoped=true&ts=true\"\nimport script from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactItem.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactItem.vue?vue&type=style&index=0&id=fe60a4d2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fe60a4d2\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-91b28a50\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"title\" }\nconst _hoisted_3 = { class: \"description\" }\nconst _hoisted_4 = { class: \"select-list\" }\nconst _hoisted_5 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_6 = { class: \"tooltip\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"table\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.artifactSetEffects, (item) => {\n            return (_openBlock(), _createElementBlock(_Fragment, { key: item }, [\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"th\", _hoisted_2, _toDisplayString(_ctx.displayName(item.key)), 1)\n              ]),\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", _hoisted_3, _toDisplayString(item.value), 1)\n              ])\n            ], 64))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('artifact-set' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: _ctx.getArtifactIconUrl(item.key, _ctx.cat_id),\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.$emit('update:artifact-set', item.key))\n              }, null, 10, _hoisted_5),\n              _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.displayName(item.key)), 1)\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<template>\r\n  <div v-if=\"visible\">\r\n    <table>\r\n      <template v-for=\"item in artifactSetEffects\" :key=\"item\">\r\n        <tr>\r\n          <th class=\"title\">{{ displayName(item.key) }}</th>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"description\">{{ item.value }}</td>\r\n        </tr>\r\n      </template>\r\n    </table>\r\n\r\n    <ul class=\"select-list\">\r\n      <li class=\"with-tooltip\" v-for=\"item in filteredList\" :key=\"item.key\">\r\n        <img :class=\"'artifact-set' + bgImageClass(item) + selectedClass(item)\" :src=\"getArtifactIconUrl(item.key, cat_id)\"\r\n          :alt=\"item.key\" @click=\"$emit('update:artifact-set', item.key)\" />\r\n        <div class=\"tooltip\">{{ displayName(item.key) }}</div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  ARTIFACT_SET_MASTER_LIST,\r\n  getArtifactIconUrl,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n  TArtifactSetEntry,\r\n} from \"@/master\";\r\nimport { computed, defineComponent, PropType, reactive } from \"vue\";\r\nimport CompositionFunction from './CompositionFunction.vue';\r\n\r\nexport default defineComponent({\r\n  name: \"ArtifactSetSelect\",\r\n  props: {\r\n    visible: { type: Boolean, required: true },\r\n    index: { type: Number, required: true },\r\n    artifactSet: { type: String, required: true },\r\n    artifactSetMasters: { type: Array as PropType<TArtifactSetEntry[]>, required: true },\r\n    cat_id: { type: Number },\r\n  },\r\n  emits: [\"update:artifact-set\"],\r\n  setup(props) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const bgImageClass = (item: TArtifactSetEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TArtifactSetEntry) => {\r\n      return item.key == props.artifactSet ? \" selected\" : \"\";\r\n    };\r\n    const artifactSetMastersRea = reactive(props.artifactSetMasters);\r\n\r\n    const filteredList = computed(() => {\r\n      return ARTIFACT_SET_MASTER_LIST as TArtifactSetEntry[];\r\n    });\r\n\r\n    const artifactSetEffects = computed(() => {\r\n      const result = [] as any;\r\n      if (artifactSetMastersRea.length > 0) {\r\n        if (\"2\" in artifactSetMastersRea[0]) {\r\n          result.push({\r\n            key: artifactSetMastersRea[0].key + \" \" + \"2\",\r\n            value: artifactSetMastersRea[0][\"2\"]?.,\r\n          });\r\n        }\r\n        if (artifactSetMastersRea.length > 1) {\r\n          if (artifactSetMastersRea[0].key == artifactSetMastersRea[1].key) {\r\n            if (\"4\" in artifactSetMastersRea[0]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[0].key + \" \" + \"4\",\r\n                value: artifactSetMastersRea[0][\"4\"]?.,\r\n              });\r\n            }\r\n          } else {\r\n            if (\"2\" in artifactSetMastersRea[1]) {\r\n              result.push({\r\n                key: artifactSetMastersRea[1].key + \" \" + \"2\",\r\n                value: artifactSetMastersRea[1][\"2\"]?.,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    return {\r\n      displayName,\r\n      getArtifactIconUrl,\r\n\r\n      bgImageClass,\r\n      selectedClass,\r\n      filteredList,\r\n      artifactSetEffects,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nimg.artifact-set {\r\n  width: 60px;\r\n  height: 60px;\r\n  background-size: contain;\r\n}\r\n\r\n.selected {\r\n  background-color: gold;\r\n}\r\n\r\n:checked+img {\r\n  background-color: gold;\r\n}\r\n\r\ntable {\r\n  width: calc(100% - 1rem);\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  border: 2px solid gray;\r\n  border-spacing: 0;\r\n}\r\n\r\nth,\r\ntd {\r\n  padding: 2px 8px;\r\n  border: 1px solid gray;\r\n  border-spacing: 0;\r\n}\r\n\r\nth.title {\r\n  color: burlywood;\r\n}\r\n\r\n.description {\r\n  text-align: left;\r\n}\r\n</style>\r\n","import { render } from \"./ArtifactSetSelect.vue?vue&type=template&id=91b28a50&scoped=true&ts=true\"\nimport script from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./ArtifactSetSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./ArtifactSetSelect.vue?vue&type=style&index=0&id=91b28a50&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-91b28a50\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, vShow as _vShow, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6b0e72ca\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { class: \"select-list\" }\nconst _hoisted_3 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_4 = [\"src\", \"alt\"]\nconst _hoisted_5 = { class: \"select-list\" }\nconst _hoisted_6 = [\"onUpdate:modelValue\", \"onChange\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = { class: \"select-list\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"ul\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.elementList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.elementCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.elementCheckList))\n                }, null, 40, _hoisted_3), [\n                  [_vModelCheckbox, _ctx.elementCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.elementSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_4)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_5, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.weaponList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: item }, [\n              _createElementVNode(\"label\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"hidden\",\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.weaponCheckList[item]) = $event),\n                  onChange: ($event: any) => (_ctx.checkListOnChange(item, _ctx.weaponCheckList))\n                }, null, 40, _hoisted_6), [\n                  [_vModelCheckbox, _ctx.weaponCheckList[item]]\n                ]),\n                _createElementVNode(\"img\", {\n                  class: \"filter\",\n                  src: _ctx.weaponSrc(item),\n                  alt: item\n                }, null, 8, _hoisted_7)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"ul\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredList, (item) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"with-tooltip\",\n              key: item.key\n            }, [\n              _createElementVNode(\"img\", {\n                class: _normalizeClass('character' + _ctx.bgImageClass(item) + _ctx.selectedClass(item)),\n                src: item.icon_url,\n                alt: item.key,\n                onClick: ($event: any) => (_ctx.characterOnClick(item.key))\n              }, null, 10, _hoisted_9),\n              _createElementVNode(\"div\", _hoisted_10, _toDisplayString(_ctx.displayName(item.key)), 1),\n              _createElementVNode(\"img\", {\n                class: \"vision\",\n                src: _ctx.visionSrc(item),\n                alt: item.\n              }, null, 8, _hoisted_11),\n              _withDirectives(_createElementVNode(\"div\", { class: \"selection-number\" }, _toDisplayString(_ctx.selectionNumber(item.key)), 513), [\n                [_vShow, _ctx.selectionNumber(item.key)]\n              ])\n            ]))\n          }), 128))\n        ])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<template>\r\n  <div v-if=\"visible\">\r\n    <ul class=\"select-list\">\r\n      <li v-for=\"item in elementList\" :key=\"item\">\r\n        <label>\r\n          <input\r\n            class=\"hidden\"\r\n            type=\"checkbox\"\r\n            v-model=\"elementCheckList[item]\"\r\n            @change=\"checkListOnChange(item, elementCheckList)\"\r\n          />\r\n          <img class=\"filter\" :src=\"elementSrc(item)\" :alt=\"item\" />\r\n        </label>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"select-list\">\r\n      <li v-for=\"item in weaponList\" :key=\"item\">\r\n        <label>\r\n          <input\r\n            class=\"hidden\"\r\n            type=\"checkbox\"\r\n            v-model=\"weaponCheckList[item]\"\r\n            @change=\"checkListOnChange(item, weaponCheckList)\"\r\n          />\r\n          <img class=\"filter\" :src=\"weaponSrc(item)\" :alt=\"item\" />\r\n        </label>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"select-list\">\r\n      <li class=\"with-tooltip\" v-for=\"item in filteredList\" :key=\"item.key\">\r\n        <img\r\n          :class=\"'character' + bgImageClass(item) + selectedClass(item)\"\r\n          :src=\"item.icon_url\"\r\n          :alt=\"item.key\"\r\n          @click=\"characterOnClick(item.key)\"\r\n        />\r\n        <div class=\"tooltip\">{{ displayName(item.key) }}</div>\r\n        <img class=\"vision\" :src=\"visionSrc(item)\" :alt=\"item.\" />\r\n        <div class=\"selection-number\" v-show=\"selectionNumber(item.key)\">\r\n          {{ selectionNumber(item.key) }}\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  TCharacterEntry,\r\n  ELEMENT_IMG_SRC,\r\n  TVisionKey,\r\n  WEAPON_IMG_SRC,\r\n  TWeaponTypeKey,\r\n  CHARACTER_MASTER_LIST,\r\n  STAR_BACKGROUND_IMAGE_CLASS,\r\n} from \"@/master\";\r\nimport { defineComponent, reactive, computed, PropType } from \"vue\";\r\nimport CompositionFunction from \"./CompositionFunction.vue\";\r\n\r\ninterface ICheckList {\r\n  [key: string]: boolean;\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"CharacterSelect\",\r\n  props: {\r\n    character: { type: String },\r\n    characters: { type: Array as PropType<string[]> },\r\n    visible: { type: Boolean, required: true },\r\n  },\r\n  emits: [\"update:character\", \"update:characters\"],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const visionSrc = (item: TCharacterEntry) => ELEMENT_IMG_SRC[item.];\r\n    const bgImageClass = (item: TCharacterEntry) =>\r\n      (\" \" + STAR_BACKGROUND_IMAGE_CLASS[item.]) as string;\r\n    const selectedClass = (item: TCharacterEntry) => {\r\n      if (props.character && props.character == item.key) {\r\n        return \" selected\";\r\n      }\r\n      if (props.characters && props.characters.includes(item.key)) {\r\n        return \" selected\";\r\n      }\r\n      return \"\";\r\n    };\r\n\r\n    const elementList = Object.keys(ELEMENT_IMG_SRC) as TVisionKey[];\r\n    const elementSrc = (element: TVisionKey) => ELEMENT_IMG_SRC[element] as string;\r\n    const elementCheckList = reactive({}) as ICheckList;\r\n    for (let key of elementList) {\r\n      elementCheckList[key] = false;\r\n    }\r\n\r\n    const weaponList = Object.keys(WEAPON_IMG_SRC) as TWeaponTypeKey[];\r\n    const weaponSrc = (weapon: TWeaponTypeKey) => WEAPON_IMG_SRC[weapon] as string;\r\n    const weaponCheckList = reactive({}) as ICheckList;\r\n    for (let key of weaponList) {\r\n      weaponCheckList[key] = false;\r\n    }\r\n\r\n    const checkListOnChange = function (item: string, checkList: ICheckList) {\r\n      if (!checkList[item]) return;\r\n      Object.keys(checkList)\r\n        .filter((s) => s != item)\r\n        .forEach((key) => {\r\n          checkList[key] = false;\r\n        });\r\n    };\r\n\r\n    const filteredList = computed(() => {\r\n      const result = [];\r\n      const elementChecked =\r\n        Object.keys(elementCheckList).filter((s) => elementCheckList[s]).length > 0;\r\n      const weaponChecked =\r\n        Object.keys(weaponCheckList).filter((s) => weaponCheckList[s]).length > 0;\r\n      for (let entry of CHARACTER_MASTER_LIST as TCharacterEntry[]) {\r\n        if (elementChecked && !elementCheckList[entry.]) continue;\r\n        if (weaponChecked && !weaponCheckList[entry.]) continue;\r\n        result.push(entry);\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const selectionNumber = (character: string) => {\r\n      let result = \"\";\r\n      if (props.characters) {\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          result = String(index + 1);\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const characterOnClick = (character: string) => {\r\n      if (props.character) {\r\n        context.emit(\"update:character\", character);\r\n      }\r\n      if (props.characters) {\r\n        const characters: string[] = props.characters.map((s) => s);\r\n        const index = props.characters.indexOf(character);\r\n        if (index != -1) {\r\n          characters[index] = \"\";\r\n        } else {\r\n          const blankIndex = props.characters.indexOf(\"\");\r\n          if (blankIndex != -1) {\r\n            characters[blankIndex] = character;\r\n          }\r\n        }\r\n        context.emit(\"update:characters\", characters);\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      visionSrc,\r\n      bgImageClass,\r\n      selectedClass,\r\n      elementList,\r\n      elementSrc,\r\n      elementCheckList,\r\n      weaponList,\r\n      weaponSrc,\r\n      weaponCheckList,\r\n      checkListOnChange,\r\n      filteredList,\r\n\r\n      selectionNumber,\r\n      characterOnClick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nimg.character {\r\n  width: 80px;\r\n  height: 80px;\r\n  background-size: contain;\r\n}\r\n\r\n.character.selected {\r\n  background-color: gold;\r\n}\r\n\r\nimg.vision {\r\n  width: 25px;\r\n  height: 25px;\r\n  position: absolute;\r\n  left: 3px;\r\n  top: 3px;\r\n}\r\n\r\ndiv.selection-number {\r\n  position: absolute;\r\n  right: 3px;\r\n  top: 3px;\r\n  width: 25px;\r\n  height: 25px;\r\n  border-radius: 50%;\r\n  border: 2px solid whitesmoke;\r\n  font-size: 25px;\r\n  background-color: black;\r\n  opacity: 75%;\r\n}\r\n\r\nimg.filter {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n}\r\n\r\n:checked + img {\r\n  background-color: rgb(156, 140, 49);\r\n}\r\n</style>\r\n","import { render } from \"./CharacterSelect.vue?vue&type=template&id=6b0e72ca&scoped=true&ts=true\"\nimport script from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\nexport * from \"./CharacterSelect.vue?vue&type=script&lang=ts\"\n\nimport \"./CharacterSelect.vue?vue&type=style&index=0&id=6b0e72ca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b0e72ca\"]])\n\nexport default __exports__","<script lang=\"ts\">\r\nimport i18n from \"@/i18n\";\r\nimport { STAT_PERCENT_LIST } from \"@/input\";\r\nimport { nextTick } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\n\r\nexport default function CompositionFunction() {\r\n    const { t, te } = useI18n({\r\n        useScope: \"global\",\r\n    });\r\n\r\n    const localeList = [\r\n        { name: \"\", value: \"ja-jp\" },\r\n        { name: \"English\", value: \"en-us\" },\r\n        { name: \"\", value: \"zh-cn\" },\r\n        { name: \"\", value: \"zh-tw\" },\r\n        { name: \"\", value: \"ko-kr\" },\r\n        { name: \"Deutsch\", value: \"de-de\" },\r\n        { name: \"Espaol\", value: \"es-es\" },\r\n        { name: \"Franais\", value: \"fr-fr\" },\r\n        { name: \"Indonesia\", value: \"id-id\" },\r\n        { name: \"Portugus\", value: \"pt-pt\" },\r\n        { name: \"P\", value: \"ru-ru\" },\r\n        { name: '', value: 'th-th' },\r\n        { name: \"Ting Vit\", value: \"vi-vn\" },\r\n    ];\r\n\r\n    const setI18nLanguage = function (locale: string) {\r\n        i18n.global.locale.value = locale;\r\n        loadLocaleMessages(locale);\r\n        document.querySelector('html')?.setAttribute('lang', locale)\r\n    }\r\n\r\n    const loadLocaleMessages = async function (locale: string) {\r\n        if (locale != 'ja-jp') {\r\n            const messages = await fetch(`./locales/${locale}.json`).then(resp => resp.json());\r\n            i18n.global.setLocaleMessage(locale, messages);\r\n        }\r\n        return nextTick();\r\n    }\r\n\r\n    const displayName = function (key: any): string {\r\n        if (!key) return key;\r\n        if (i18n.global.locale.value === 'ja-jp') { // translate\r\n            let result = String(key);\r\n            if (['', '', '', ''].includes(result)) {\r\n                return result;\r\n            }\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace('', '');\r\n            result = result.replace(/$/, '');\r\n            result = result.replace(/^/, '');\r\n            return result;\r\n        }\r\n        if (te(key)) return t(key);\r\n        const re = new RegExp('(.*?)([\\\\s_\\\\(\\\\)/]+)(.*)');\r\n        let result = '';\r\n        let work = key;\r\n        while (work) {\r\n            const reRet = re.exec(work);\r\n            if (!reRet) {\r\n                result += t(work);\r\n                break;\r\n            }\r\n            if (reRet[1]) result += t(reRet[1]);\r\n            result += reRet[2];\r\n            work = reRet[3];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const percent = function (stat: string) {\r\n        const tempArr = stat.split('.');\r\n        let work = tempArr[0].replace(/V[1-3]$/, '');\r\n        let hasPercent = work.endsWith(\"%\") || STAT_PERCENT_LIST.includes(work);\r\n        if (!hasPercent) {\r\n            ['', '', '', ''].forEach(postfix => {\r\n                if (work.endsWith(postfix)) hasPercent = true;\r\n            })\r\n        }\r\n        return hasPercent ? '%' : '';\r\n    }\r\n\r\n    const displayStatName = function (stat: string) {\r\n        let result = stat.replace(/V[1-3]$/, '');\r\n        const tempArr = result.split('.');\r\n        if (tempArr.length == 1) {\r\n            result = displayName(result);\r\n            result = result.replace('', '')\r\n        } else if (i18n.global.locale.value === 'ja-jp') {\r\n            result = tempArr[tempArr.length - 1] + '' + displayName(tempArr[0]);\r\n        } else {\r\n            result = displayName(tempArr[tempArr.length - 1]) + ' ' + displayName(tempArr[0]);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const displayStatValue = function (stat: string, value: number, opt_s?: number): string {\r\n        const myPercent = percent(stat);\r\n        let p = myPercent ? 10 : 1;\r\n        if (opt_s) p = Math.pow(10, opt_s);\r\n        return String(Math.round(value * p) / p) + myPercent;\r\n    }\r\n\r\n    const displayStatAbbrev = function (stat: string) {\r\n        let result = stat;\r\n        const tempArr = stat.split('.');\r\n        if (tempArr.length == 1) {\r\n            stat = stat.replace(/V\\d$/, '');\r\n            stat = stat.replace(/TOP$/, '');\r\n            if (stat.startsWith('')) stat = stat.replace(/^/, '');\r\n            if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            else if (stat.endsWith('')) stat = stat.replace(/$/, '');\r\n            result = displayName(stat);\r\n        } else {\r\n            result = displayStatName(stat);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /** $event.target.valuetypescript */\r\n    const targetValue = function (event: Event) {\r\n        if (event.target instanceof HTMLInputElement) return event.target.value;\r\n        if (event.target instanceof HTMLSelectElement) return event.target.value;\r\n        return undefined;\r\n    }\r\n\r\n    const displayOptionName = function (name: string) {\r\n        return displayName(name.replace(/^required_/, \"\"));\r\n    }\r\n\r\n    return {\r\n        localeList,\r\n        setI18nLanguage,\r\n        loadLocaleMessages,\r\n        displayName,\r\n        displayStatName,\r\n        displayStatValue,\r\n        displayStatAbbrev,\r\n        targetValue,\r\n        displayOptionName,\r\n        percent,\r\n    }\r\n}\r\n</script>\r\n","import script from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\nexport * from \"./CompositionFunction.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"member\" }\nconst _hoisted_2 = { class: \"with-tooltip\" }\nconst _hoisted_3 = [\"src\", \"alt\"]\nconst _hoisted_4 = { class: \"tooltip\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = [\"src\", \"alt\"]\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = {\n  key: 0,\n  class: \"stat-value\"\n}\nconst _hoisted_9 = { key: 1 }\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = [\"src\"]\nconst _hoisted_12 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"member-img\",\n      onDblclick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.characterOnDblclick && _ctx.characterOnDblclick(...args)))\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"img\", {\n          class: _normalizeClass('character' + _ctx.characterImgClass),\n          src: _ctx.characterImgSrc,\n          alt: _ctx.displayName(_ctx.member.name)\n        }, null, 10, _hoisted_3),\n        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.displayName(_ctx.member.name)), 1)\n      ]),\n      _createElementVNode(\"img\", {\n        class: \"vision\",\n        src: _ctx.visionImgSrc,\n        alt: \"vision\"\n      }, null, 8, _hoisted_5),\n      _withDirectives(_createElementVNode(\"div\", { class: \"constellation\" }, _toDisplayString(_ctx.constellation), 513), [\n        [_vShow, _ctx.constellation]\n      ]),\n      (_ctx.member.tags[3])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: _normalizeClass('tag tag-3' + _ctx.tagColorClass(3))\n          }, _toDisplayString(_ctx.member.tags[3]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[2])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 1,\n            class: _normalizeClass('tag tag-2' + _ctx.tagColorClass(2))\n          }, _toDisplayString(_ctx.member.tags[2]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[1])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 2,\n            class: _normalizeClass('tag tag-1' + _ctx.tagColorClass(1))\n          }, _toDisplayString(_ctx.member.tags[1]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.tags[0])\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 3,\n            class: _normalizeClass('tag tag-0' + _ctx.tagColorClass(0))\n          }, _toDisplayString(_ctx.member.tags[0]), 3))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[0])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 4,\n            class: \"replacement replacement-0\",\n            src: _ctx.replaceImgSrc(0),\n            alt: _ctx.member.replacements[0]\n          }, null, 8, _hoisted_6))\n        : _createCommentVNode(\"\", true),\n      (_ctx.member.replacements[1])\n        ? (_openBlock(), _createElementBlock(\"img\", {\n            key: 5,\n            class: \"replacement replacement-1\",\n            src: _ctx.replaceImgSrc(1),\n            alt: _ctx.member.replacements[1]\n          }, null, 8, _hoisted_7))\n        : _createCommentVNode(\"\", true)\n    ], 32),\n    (_ctx.displayStat)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString(_ctx.statValue), 1))\n      : _createCommentVNode(\"\", true),\n    (_ctx.showEquipment)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n          _createElementVNode(\"img\", {\n            class: \"weapon\",\n            src: _ctx.imgWeaponSrc,\n            alt: \"weapon\"\n          }, null, 8, _hoisted_10),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(0),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_11),\n          _createElementVNode(\"img\", {\n            class: \"artifact-set\",\n            src: _ctx.imgArtifactSetSrc(1),\n            alt: \"artifact-set\"\n          }, null, 8, _hoisted_12)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","<template>\r\n  <div class=\"member\">\r\n    <div class=\"member-img\" @dblclick=\"characterOnDblclick\">\r\n      <div class=\"with-tooltip\">\r\n        <img :class=\"'character' + characterImgClass\" :src=\"characterImgSrc\" :alt=\"displayName(member.name)\" />\r\n        <span class=\"tooltip\">{{ displayName(member.name) }}</span>\r\n      </div>\r\n      <img class=\"vision\" :src=\"visionImgSrc\" alt=\"vision\" />\r\n      <div class=\"constellation\" v-show=\"constellation\">\r\n        {{ constellation }}\r\n      </div>\r\n      <div :class=\"'tag tag-3' + tagColorClass(3)\" v-if=\"member.tags[3]\">{{ member.tags[3] }}</div>\r\n      <div :class=\"'tag tag-2' + tagColorClass(2)\" v-if=\"member.tags[2]\">{{ member.tags[2] }}</div>\r\n      <div :class=\"'tag tag-1' + tagColorClass(1)\" v-if=\"member.tags[1]\">{{ member.tags[1] }}</div>\r\n      <div :class=\"'tag tag-0' + tagColorClass(0)\" v-if=\"member.tags[0]\">{{ member.tags[0] }}</div>\r\n      <img class=\"replacement replacement-0\" v-if=\"member.replacements[0]\" :src=\"replaceImgSrc(0)\"\r\n        :alt=\"member.replacements[0]\">\r\n      <img class=\"replacement replacement-1\" v-if=\"member.replacements[1]\" :src=\"replaceImgSrc(1)\"\r\n        :alt=\"member.replacements[1]\">\r\n    </div>\r\n    <div class=\"stat-value\" v-if=\"displayStat\">\r\n      {{ statValue }}\r\n    </div>\r\n    <div v-if=\"showEquipment\">\r\n      <img class=\"weapon\" :src=\"imgWeaponSrc\" alt=\"weapon\" />\r\n      <img class=\"artifact-set\" :src=\"imgArtifactSetSrc(0)\" alt=\"artifact-set\" />\r\n      <img class=\"artifact-set\" :src=\"imgArtifactSetSrc(1)\" alt=\"artifact-set\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\r\nimport { pushBuildinfoToSession, TStats } from \"@/input\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { ARTIFACT_SET_MASTER, CHARACTER_MASTER, ELEMENT_COLOR_CLASS, ELEMENT_IMG_SRC, IMG_SRC_DUMMY, STAR_BACKGROUND_IMAGE_CLASS, TArtifactSetEntry, TCharacterEntry, TCharacterKey, TElementColorClassKey, TWeaponEntry, WEAPON_MASTER } from \"@/master\";\r\nimport { getBuilddataFromStorage, TMember } from \"./team\";\r\n\r\nexport default defineComponent({\r\n  name: 'MemberItem',\r\n  props: {\r\n    member: { type: Object as PropType<TMember>, required: true },\r\n    displayStat: { type: String },\r\n    showEquipment: { type: Boolean },\r\n    statsObj: { type: Object as PropType<TStats> },\r\n    viewable: { type: Boolean },\r\n    tags: { type: Array as PropType<any[]> },\r\n    members: { type: Array as PropType<string[]> },\r\n    elementalResonance: { type: Array as PropType<string[]> },\r\n  },\r\n  setup(props) {\r\n    const { displayName, displayStatValue } = CompositionFunction();\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, () => {\r\n      watchCount.value++;\r\n    });\r\n\r\n    const characterMaster = computed(() => props.member.name ? (CHARACTER_MASTER[props.member.name as TCharacterKey] as TCharacterEntry) ?? undefined : undefined);\r\n    const characterImgSrc = computed(() => characterMaster.value?.icon_url ?? IMG_SRC_DUMMY);\r\n    const characterImgClass = computed(() => characterMaster.value?. ? (' ' + (STAR_BACKGROUND_IMAGE_CLASS as any)[String(characterMaster.value.)]) : '');\r\n    const visionImgSrc = computed(() => characterMaster.value?. ? (ELEMENT_IMG_SRC as any)[characterMaster.value.] : IMG_SRC_DUMMY);\r\n    const constellation = computed(() => (builddata.value ? builddata.value. : ''));\r\n    const builddata = computed(() => (props.member.name && props.member.buildname) ? getBuilddataFromStorage(props.member.name, props.member.buildname) : undefined);\r\n    const weaponMaster = computed((): TWeaponEntry => {\r\n      let result = undefined;\r\n      if (builddata.value) {\r\n        const weapon = builddata.value.;\r\n        if (weapon && characterMaster.value) {\r\n          result = (WEAPON_MASTER as any)[characterMaster.value.][weapon];\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const imgWeaponSrc = computed(() => weaponMaster.value?.icon_url ?? IMG_SRC_DUMMY);\r\n    const weaponName = computed(() => weaponMaster.value?.key ?? '');\r\n    const statValue = computed(() => {\r\n      watchCount.value;\r\n      let result = '-';\r\n      if (builddata.value) {\r\n        let stat = props.displayStat;\r\n        if (props.statsObj && stat) {\r\n          if (stat === '/') {\r\n            result = displayStatValue('', props.statsObj['']);\r\n            result += '/';\r\n            result += displayStatValue('', props.statsObj['']);\r\n          } else {\r\n            result = displayStatValue(stat, props.statsObj[stat]);\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n    const artifactSetMasters = computed((): TArtifactSetEntry[] => {\r\n      const result: TArtifactSetEntry[] = [];\r\n      if (builddata.value) {\r\n        for (let i = 0; i < 2; i++) {\r\n          const key = '' + (i + 1);\r\n          let value = builddata.value[key] ?? 'NONE';\r\n          result.push((ARTIFACT_SET_MASTER as any)[value]);\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const replaceImgSrc = (replIndex: number) => {\r\n      const name = replIndex < props.member.replacements.length ? props.member.replacements[replIndex] : undefined;\r\n      return name ? (CHARACTER_MASTER[name as TCharacterKey] as TCharacterEntry).icon_url : IMG_SRC_DUMMY;\r\n    };\r\n    const imgArtifactSetSrc = (index: number) => artifactSetMasters.value[index]?.image ?? IMG_SRC_DUMMY;\r\n    const artifactSetName = (index: number) => artifactSetMasters.value[index]?.key ?? '';\r\n    const tagColorClass = (index: number) =>\r\n      Object.keys(ELEMENT_COLOR_CLASS).map(key => ELEMENT_COLOR_CLASS[(key as TElementColorClassKey)]).includes(props.member.tags[index].toLowerCase()) ? ' ' + props.member.tags[index].toLowerCase() : '';\r\n\r\n    const characterOnDblclick = () => {\r\n      if (props.viewable) {\r\n        locate();\r\n      }\r\n    };\r\n\r\n    const locate = () => {\r\n      const member = props.member;\r\n      if (member?.name) {\r\n        if (confirm('' + member.name + '')) {\r\n          const teammembers = props.members?.filter(s => s != member.name);\r\n          pushBuildinfoToSession(member.name, member.buildname, undefined, teammembers);\r\n          window.open('./', '_blank');\r\n        }\r\n      }\r\n    };\r\n\r\n    return {\r\n      displayName,\r\n\r\n      characterImgSrc,\r\n      characterImgClass,\r\n      visionImgSrc,\r\n      constellation,\r\n      replaceImgSrc,\r\n      imgWeaponSrc,\r\n      weaponName,\r\n      imgArtifactSetSrc,\r\n      artifactSetName,\r\n      tagColorClass,\r\n      statValue,\r\n\r\n      characterOnDblclick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style>\r\ndiv.member-img {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\nimg.character {\r\n  width: calc(100%);\r\n  background-size: contain;\r\n}\r\n\r\nimg.vision {\r\n  width: calc(100% / 3);\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n}\r\n\r\ndiv.constellation {\r\n  position: absolute;\r\n  font-size: 20px;\r\n  padding: 2px 5px;\r\n  right: 2px;\r\n  top: 2px;\r\n  background-color: black;\r\n  border-radius: 50%;\r\n  opacity: 75%;\r\n}\r\n\r\ndiv.tag {\r\n  position: absolute;\r\n  left: 50%;\r\n  bottom: 1px;\r\n  transform: translateX(-50%);\r\n  width: 70px;\r\n  height: 12px;\r\n  font-size: 10px;\r\n  background: linear-gradient(to top, #3d3d3b, #141414);\r\n  border: 1px solid whitesmoke;\r\n  border-radius: 3px;\r\n  vertical-align: middle;\r\n  padding-top: 1px;\r\n}\r\n\r\ndiv.tag-0 {\r\n  bottom: 1px;\r\n}\r\n\r\ndiv.tag-1 {\r\n  bottom: 17px;\r\n}\r\n\r\ndiv.tag-2 {\r\n  bottom: 33px;\r\n}\r\n\r\ndiv.tag-3 {\r\n  bottom: 49px;\r\n}\r\n\r\nimg.replacement {\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: -2px;\r\n  transform: translateX(-50%);\r\n  width: 52px;\r\n  height: 36px;\r\n  border-radius: 75%;\r\n  object-position: 0 0;\r\n  object-fit: cover;\r\n  z-index: 10;\r\n}\r\n\r\nimg.replacement-0 {\r\n  left: 25%;\r\n}\r\n\r\nimg.replacement-1 {\r\n  left: 75%;\r\n}\r\n\r\nimg.weapon,\r\nimg.artifact-set {\r\n  position: relative;\r\n  width: calc(100% / 3 - 4px);\r\n  height: calc(100% / 3 - 4px);\r\n  border: 2px solid slategray;\r\n  border-radius: 50%;\r\n  background-color: black;\r\n  z-index: 100;\r\n}\r\n\r\ndiv.stat-value {\r\n  font-size: 12px;\r\n  padding-top: 2px;\r\n  padding-bottom: 2px;\r\n}\r\n</style>\r\n","import { render } from \"./MemberItem.vue?vue&type=template&id=0f8e14be&ts=true\"\nimport script from \"./MemberItem.vue?vue&type=script&lang=ts\"\nexport * from \"./MemberItem.vue?vue&type=script&lang=ts\"\n\nimport \"./MemberItem.vue?vue&type=style&index=0&id=0f8e14be&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, createVNode as _createVNode, vShow as _vShow, vModelSelect as _vModelSelect, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7c066fb2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"Team Name\", -1))\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"Character Select Mode\", -1))\nconst _hoisted_4 = {\n  colspan: \"2\",\n  class: \"character-select-mode\"\n}\nconst _hoisted_5 = { key: 0 }\nconst _hoisted_6 = { key: 1 }\nconst _hoisted_7 = { class: \"member-tags\" }\nconst _hoisted_8 = { colspan: \"2\" }\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = { class: \"members\" }\nconst _hoisted_11 = { colspan: \"2\" }\nconst _hoisted_12 = { class: \"buildname-select\" }\nconst _hoisted_13 = [\"value\"]\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"Short Note\", -1))\nconst _hoisted_15 = { class: \"team-tags\" }\nconst _hoisted_16 = { colspan: \"2\" }\nconst _hoisted_17 = [\"onClick\"]\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"Tags\", -1))\nconst _hoisted_19 = { class: \"buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_CharacterSelect = _resolveComponent(\"CharacterSelect\")!\n  const _component_MemberItem = _resolveComponent(\"MemberItem\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (!_ctx.characterSelectMode)\n      ? (_openBlock(), _createBlock(_component_CharacterSelect, {\n          key: 0,\n          visible: true,\n          characters: _ctx.characters,\n          \"onUpdate:characters\": _ctx.updateCharacters\n        }, null, 8, [\"characters\", \"onUpdate:characters\"]))\n      : (_openBlock(), _createBlock(_component_CharacterSelect, {\n          key: 1,\n          visible: true,\n          characters: _ctx.replacements,\n          \"onUpdate:characters\": _ctx.updateReplacements\n        }, null, 8, [\"characters\", \"onUpdate:characters\"])),\n    _hoisted_1,\n    _createElementVNode(\"table\", null, [\n      _createElementVNode(\"tr\", null, [\n        _hoisted_2,\n        _createElementVNode(\"td\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.workTeam.name) = $event)),\n            type: \"text\",\n            minlength: \"1\",\n            maxlength: \"16\",\n            placeholder: \"INPUT TEAM NAME\"\n          }, null, 512), [\n            [_vModelText, _ctx.workTeam.name]\n          ])\n        ])\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _hoisted_3,\n        _createElementVNode(\"td\", null, [\n          _createElementVNode(\"button\", {\n            class: \"character-select-mode\",\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.characterSelectModeOnClick && _ctx.characterSelectModeOnClick(...args)))\n          }, _toDisplayString(_ctx.characterSelectMode ? 'REPLACEMENTS' : 'MEMBERS'), 1)\n        ])\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"td\", _hoisted_4, [\n          (!_ctx.characterSelectMode)\n            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"  \"))\n            : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(_ctx.selectedMemberName() + ''), 1))\n        ])\n      ]),\n      _createElementVNode(\"tr\", _hoisted_7, [\n        _createElementVNode(\"td\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.MEMBER_TAG_LIST, (tag) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: _normalizeClass('tag' + _ctx.tagSelectedClass(tag)),\n              key: tag,\n              onClick: ($event: any) => (_ctx.tagOnClick(tag))\n            }, _toDisplayString(tag), 11, _hoisted_9))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"tr\", _hoisted_10, [\n        _createElementVNode(\"td\", _hoisted_11, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.workTeam.members, (member) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: _normalizeClass('member' + _ctx.memberSelectedClass(member.id)),\n              key: member.id\n            }, [\n              _createVNode(_component_MemberItem, {\n                member: member,\n                onClick: ($event: any) => (_ctx.memberOnClick(member.id))\n              }, null, 8, [\"member\", \"onClick\"])\n            ], 2))\n          }), 128)),\n          _createElementVNode(\"div\", _hoisted_12, [\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.selectedMemberBuildname) = $event)),\n              onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.buildnameOnChange && _ctx.buildnameOnChange(...args)))\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.buildnames, (value) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: value,\n                  value: value\n                }, _toDisplayString(value), 9, _hoisted_13))\n              }), 128))\n            ], 544), [\n              [_vShow, _ctx.buildnames.length],\n              [_vModelSelect, _ctx.selectedMemberBuildname]\n            ])\n          ])\n        ])\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _hoisted_14,\n        _createElementVNode(\"td\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            class: \"description\",\n            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.workTeam.description) = $event)),\n            type: \"text\",\n            maxlength: \"40\",\n            placeholder: \"INPUT NOTE\"\n          }, null, 512), [\n            [_vModelText, _ctx.workTeam.description]\n          ])\n        ])\n      ]),\n      _createElementVNode(\"tr\", _hoisted_15, [\n        _createElementVNode(\"td\", _hoisted_16, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.workTeamTags, (tag) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: _normalizeClass(_ctx.teamTagSelected(tag) ? 'tag selected' : 'tag'),\n              key: tag,\n              onClick: ($event: any) => (_ctx.teamTagOnClick(tag))\n            }, _toDisplayString(tag), 11, _hoisted_17))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _hoisted_18,\n        _createElementVNode(\"td\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            class: \"team-tags\",\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.txtTeamTags) = $event)),\n            type: \"text\",\n            maxlength: \"40\",\n            placeholder: \"INPUT TAGS\",\n            onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.txtTeamTagsOnChange && _ctx.txtTeamTagsOnChange(...args)))\n          }, null, 544), [\n            [_vModelText, _ctx.txtTeamTags]\n          ])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_19, [\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.cancelOnClick && _ctx.cancelOnClick(...args)))\n      }, \"cancel\"),\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.okOnClick && _ctx.okOnClick(...args)))\n      }, \"ok\")\n    ])\n  ], 64))\n}","<template>\r\n  <template v-if=\"!characterSelectMode\">\r\n    <CharacterSelect :visible=\"true\" :characters=\"characters\" @update:characters=\"updateCharacters\" />\r\n  </template>\r\n  <template v-else>\r\n    <CharacterSelect :visible=\"true\" :characters=\"replacements\" @update:characters=\"updateReplacements\" />\r\n  </template>\r\n  <hr />\r\n  <table>\r\n    <tr>\r\n      <th>Team Name</th>\r\n      <td>\r\n        <input v-model=\"workTeam.name\" type=\"text\" minlength=\"1\" maxlength=\"16\" placeholder=\"INPUT TEAM NAME\" />\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <th>Character Select Mode</th>\r\n      <td>\r\n        <button class=\"character-select-mode\" @click=\"characterSelectModeOnClick\">\r\n          {{ characterSelectMode ? 'REPLACEMENTS' : 'MEMBERS' }}\r\n        </button>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td colspan=\"2\" class=\"character-select-mode\">\r\n        <span v-if=\"!characterSelectMode\">\r\n          \r\n        </span>\r\n        <span v-else>\r\n          {{ selectedMemberName() + '' }}\r\n        </span>\r\n      </td>\r\n    </tr>\r\n    <tr class=\"member-tags\">\r\n      <td colspan=\"2\">\r\n        <span :class=\"'tag' + tagSelectedClass(tag)\" v-for=\"tag in MEMBER_TAG_LIST\" :key=\"tag\" @click=\"tagOnClick(tag)\">{{\r\n          tag\r\n        }}</span>\r\n      </td>\r\n    </tr>\r\n    <tr class=\"members\">\r\n      <td colspan=\"2\">\r\n        <div :class=\"'member' + memberSelectedClass(member.id)\" v-for=\"member in workTeam.members\" :key=\"member.id\">\r\n          <MemberItem :member=\"member\" @click=\"memberOnClick(member.id)\" />\r\n        </div>\r\n\r\n        <div class=\"buildname-select\">\r\n          <select v-show=\"buildnames.length\" v-model=\"selectedMemberBuildname\" @change=\"buildnameOnChange\">\r\n            <option v-for=\"value in buildnames\" :key=\"value\" :value=\"value\">{{ value }}</option>\r\n          </select>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <th>Short Note</th>\r\n      <td>\r\n        <input class=\"description\" v-model=\"workTeam.description\" type=\"text\" maxlength=\"40\" placeholder=\"INPUT NOTE\" />\r\n      </td>\r\n    </tr>\r\n    <tr class=\"team-tags\">\r\n      <td colspan=\"2\">\r\n        <span :class=\"teamTagSelected(tag) ? 'tag selected' : 'tag'\" v-for=\"tag in workTeamTags\" :key=\"tag\"\r\n          @click=\"teamTagOnClick(tag)\">{{ tag }}</span>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <th>Tags</th>\r\n      <td>\r\n        <input class=\"team-tags\" v-model=\"txtTeamTags\" type=\"text\" maxlength=\"40\" placeholder=\"INPUT TAGS\"\r\n          @change=\"txtTeamTagsOnChange\" />\r\n      </td>\r\n    </tr>\r\n  </table>\r\n\r\n  <div class=\"buttons\">\r\n    <button type=\"button\" @click=\"cancelOnClick\">cancel</button>\r\n    <button type=\"button\" @click=\"okOnClick\">ok</button>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from 'lodash';\r\nimport { computed, defineComponent, PropType, reactive, ref, watch } from 'vue';\r\nimport { makeDefaultBuildname } from '@/input';\r\nimport CharacterSelect from '@/components/CharacterSelect.vue';\r\nimport { getBuildnameFromStorageKey, getBuildStorageKeys, TMember, TTeam } from './team';\r\nimport MemberItem from './MemberItem.vue';\r\n\r\nexport default defineComponent({\r\n  name: 'TeamEditorModal',\r\n  components: {\r\n    CharacterSelect,\r\n    MemberItem,\r\n  },\r\n  props: {\r\n    visible: { type: Boolean, required: true },\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    teamTags: { type: Array as PropType<string[]> },\r\n  },\r\n  emits: ['click:cancel', 'click:ok'],\r\n  setup(props, context) {\r\n    const characterSelectMode = ref(false); // =\r\n    const workTeam = reactive({\r\n      id: -1,\r\n      name: '',\r\n      members: [],\r\n      description: '',\r\n      rotation: [],\r\n      rotationDescription: '',\r\n      tags: [],\r\n    } as TTeam);\r\n    const selectedMemberId = ref(-1);\r\n    const MEMBER_TAG_LIST = ['Main-DPS', 'Sub-DPS', 'Support', 'Carry', 'Driver', 'Enabler', 'Healer', 'Shielder', 'Battery', 'Free', 'Flex'];\r\n    const selectedMemberBuildname = ref('' as string | undefined);\r\n    const replacementIndex = ref(-1);\r\n    const txtTeamTags = ref('');\r\n    const workTeamTags = reactive([] as string[]);\r\n\r\n    function duplicateTeam() {\r\n      workTeam.id = props.team.id;\r\n      workTeam.name = props.team.name;\r\n      const work: TMember[] = [];\r\n      for (let i = 0; i < props.team.members.length; i++) {\r\n        work.push({\r\n          id: i,\r\n          name: props.team.members[i].name,\r\n          buildname: props.team.members[i].buildname,\r\n          builddata: props.team.members[i].builddata,\r\n          tags: _.cloneDeep(props.team.members[i].tags.filter(s => MEMBER_TAG_LIST.includes(s))),\r\n          replacements: props.team.members[i].replacements ? [...props.team.members[i].replacements] : [],\r\n        });\r\n      }\r\n      workTeam.members.splice(0, workTeam.members.length, ...work);\r\n      workTeam.description = props.team.description;\r\n      workTeam.rotation = _.cloneDeep(props.team.rotation);\r\n      workTeam.tags = _.clone(props.team.tags);\r\n    }\r\n    duplicateTeam();\r\n    setupTxtTeamTags();\r\n\r\n    watch(props, (newVal) => {\r\n      if (newVal.team.members) {\r\n        duplicateTeam();\r\n        if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n          selectedMemberBuildname.value = workTeam.members[selectedMemberId.value].buildname;\r\n        }\r\n      }\r\n      if (newVal.teamTags) {\r\n        workTeamTags.splice(0, workTeamTags.length, ...newVal.teamTags);\r\n      }\r\n      setupTxtTeamTags();\r\n      characterSelectMode.value = false;\r\n    });\r\n\r\n    const characters = computed(() => workTeam.members.map((s) => s.name));\r\n\r\n    const replacements = computed(() => {\r\n      let result = [] as string[];\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        result = [...member.replacements];\r\n        for (let i = result.length; i < 2; i++) {\r\n          result.push('');\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const updateCharacters = (newCharacters: string[]) => {\r\n      for (let i = 0; i < newCharacters.length; i++) {\r\n        if (workTeam.members[i].name != newCharacters[i]) {\r\n          workTeam.members[i].tags = [];\r\n          workTeam.members[i].replacements = [];\r\n        }\r\n        workTeam.members[i].name = newCharacters[i];\r\n        if (workTeam.members[i].name) {\r\n          const workBuildnames = getBuildStorageKeys(workTeam.members[i].name).map(s => getBuildnameFromStorageKey(s));\r\n          if (workBuildnames.length) {\r\n            if (!workTeam.members[i].buildname || !workBuildnames.includes(workTeam.members[i].buildname as string)) {\r\n              workTeam.members[i].buildname = makeDefaultBuildname(workTeam.members[i].name);\r\n            }\r\n            if (i == selectedMemberId.value) {\r\n              selectedMemberBuildname.value = workTeam.members[i].buildname;\r\n            }\r\n          } else {\r\n            workTeam.members[i].buildname = undefined;\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    const characterSelectModeOnClick = () => {\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length && workTeam.members[selectedMemberId.value].name) {\r\n        characterSelectMode.value = !characterSelectMode.value;\r\n      }\r\n    };\r\n\r\n    const memberOnClick = (id: number) => {\r\n      selectedMemberId.value = id;\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        selectedMemberBuildname.value = member.buildname;\r\n        replacementIndex.value = -1;\r\n      }\r\n      characterSelectMode.value = false;  // \r\n    };\r\n    const memberSelectedClass = (id: number) =>\r\n      id == selectedMemberId.value ? ' selected' : '';\r\n    const selectedMemberName = () => {\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        return workTeam.members[selectedMemberId.value].name;\r\n      }\r\n      return '';\r\n    };\r\n\r\n    const tagOnClick = (tag: string) => {\r\n      if (selectedMemberId.value < 0 || selectedMemberId.value >= workTeam.members.length)\r\n        return;\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      if (member && member.name) {\r\n        const tags = member.tags;\r\n        if (tags) {\r\n          if (tags.includes(tag)) {\r\n            tags.splice(0, tags.length, ...tags.filter((s) => s != tag));\r\n          } else {\r\n            tags.push(tag);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    const tagSelectedClass = (tag: string) => {\r\n      let result = false;\r\n      if (selectedMemberId.value >= 0 || selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        if (member && member.name) {\r\n          result = member.tags.includes(tag);\r\n        }\r\n      }\r\n      return result ? ' selected' : '';\r\n    };\r\n\r\n    const buildnames = computed(() => {\r\n      let result: string[] = [];\r\n      if (selectedMemberId.value >= 0 && selectedMemberId.value < workTeam.members.length) {\r\n        const member = workTeam.members[selectedMemberId.value];\r\n        const character = member.name;\r\n        if (character) {\r\n          result = getBuildStorageKeys(character).map((s) =>\r\n            getBuildnameFromStorageKey(s)\r\n          );\r\n          const defaultBuildname = makeDefaultBuildname(character);\r\n          if (result.includes(defaultBuildname)) {\r\n            const others = result.filter((s) => s != defaultBuildname).sort();\r\n            if (others.length) {\r\n              result = [defaultBuildname, ...others];\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    });\r\n\r\n    const buildnameOnChange = () => {\r\n      if (selectedMemberId.value < 0 || selectedMemberId.value >= workTeam.members.length) return;\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      member.buildname = selectedMemberBuildname.value;\r\n    };\r\n\r\n    const updateReplacements = (newCharacters: string[]) => {\r\n      const member = workTeam.members[selectedMemberId.value];\r\n      member.replacements = [...newCharacters];\r\n    };\r\n\r\n    function setupTxtTeamTags() {\r\n      txtTeamTags.value = workTeam.tags.join(' ');\r\n    }\r\n\r\n    const txtTeamTagsOnChange = () => {\r\n      let result: string[] = [];\r\n      if (txtTeamTags.value) {\r\n        result = txtTeamTags.value.split(/\\s+/).filter(tag => tag);\r\n      }\r\n      workTeam.tags = result;\r\n    }\r\n\r\n    const teamTagSelected = (tag: string) => workTeam.tags.includes(tag);\r\n\r\n    const teamTagOnClick = (tag: string) => {\r\n      if (teamTagSelected(tag)) {\r\n        workTeam.tags.splice(0, workTeam.tags.length, ...workTeam.tags.filter(s => s != tag));\r\n      } else {\r\n        workTeam.tags.push(tag);\r\n      }\r\n      setupTxtTeamTags();\r\n    }\r\n\r\n    const cancelOnClick = () => {\r\n      context.emit('click:cancel');\r\n    };\r\n\r\n    const okOnClick = () => {\r\n      context.emit('click:ok', workTeam);\r\n    };\r\n\r\n    return {\r\n      characterSelectMode,\r\n      characters,\r\n      replacements,\r\n      MEMBER_TAG_LIST,\r\n\r\n      characterSelectModeOnClick,\r\n      selectedMemberId,\r\n      selectedMemberName,\r\n\r\n      tagOnClick,\r\n      tagSelectedClass,\r\n\r\n      workTeam,\r\n      workTeamTags,\r\n      txtTeamTags,\r\n      txtTeamTagsOnChange,\r\n      teamTagSelected,\r\n      teamTagOnClick,\r\n      memberOnClick,\r\n      memberSelectedClass,\r\n      selectedMemberBuildname,\r\n      buildnames,\r\n      buildnameOnChange,\r\n      updateReplacements,\r\n\r\n      updateCharacters,\r\n      cancelOnClick,\r\n      okOnClick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style scoped>\r\n.modal {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  left: 0;\r\n  /* background-color: rgba(0, 0, 0, .5); */\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: transparent;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: calc(100vh);\r\n  vertical-align: top;\r\n}\r\n\r\n.modal-content {\r\n  height: 100vh;\r\n  padding: 20px 10px;\r\n  width: calc(100% - 26px);\r\n  background-color: rgb(63, 10, 10);\r\n  border: 3px double gold;\r\n  border-radius: 20px;\r\n  z-index: 1000;\r\n  overflow-y: auto;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  table-layout: fixed;\r\n}\r\n\r\ntable th {\r\n  font-size: 3rem;\r\n  font-weight: bold;\r\n  color: rgb(225, 144, 56);\r\n  text-align: right;\r\n  width: 40%;\r\n}\r\n\r\ntable td {\r\n  text-align: left;\r\n}\r\n\r\ntable td[colspan=\"2\"] {\r\n  text-align: center;\r\n}\r\n\r\ntable tr.member-tags td,\r\ntable tr.team-tags td {\r\n  padding: 10px;\r\n}\r\n\r\nbutton {\r\n  font-size: 3rem;\r\n  width: 20rem;\r\n  margin: 5px;\r\n}\r\n\r\ninput {\r\n  padding-left: 1rem;\r\n}\r\n\r\ntd input[type=\"text\"] {\r\n  font-size: 3rem;\r\n  width: 63rem;\r\n}\r\n\r\n.tags {\r\n  margin: 5px 3px;\r\n}\r\n\r\nspan.tag {\r\n  display: inline-block;\r\n  height: 12px;\r\n  font-size: 10px;\r\n  background: linear-gradient(to top, #3d3d3b, #141414);\r\n  border: 1px solid whitesmoke;\r\n  border-radius: 3px;\r\n  margin: 3px 3px;\r\n  vertical-align: middle;\r\n  padding-top: 1px;\r\n}\r\n\r\nspan.tag.selected {\r\n  border-color: gold;\r\n}\r\n\r\n.member-tags span.tag {\r\n  width: 70px;\r\n}\r\n\r\n.team-tags span.tag {\r\n  width: auto;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\ndiv.member {\r\n  display: inline-block;\r\n  width: 80px;\r\n}\r\n\r\ndiv.member.selected {\r\n  background-color: gold;\r\n}\r\n\r\ndiv.buildname-select {\r\n  height: 40px;\r\n  padding-top: 10px;\r\n}\r\n\r\ndiv.buildname-select select {\r\n  width: 220px;\r\n}\r\n\r\nbutton.character-select-mode {\r\n  min-width: 30rem;\r\n}\r\n\r\ntd.character-select-mode {\r\n  font-size: 2.5rem;\r\n  font-weight: bold;\r\n  color: rgb(225, 144, 56);\r\n}\r\n\r\ndiv.buttons {\r\n  margin: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./TeamEditorModal.vue?vue&type=template&id=7c066fb2&scoped=true&ts=true\"\nimport script from \"./TeamEditorModal.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamEditorModal.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamEditorModal.vue?vue&type=style&index=0&id=7c066fb2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7c066fb2\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"title\" }\nconst _hoisted_2 = { class: \"name\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"handle\" }, \"\", -1)\nconst _hoisted_4 = { class: \"elemental-resonance\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = { class: \"members\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"res\"\n}\nconst _hoisted_8 = {\n  key: 1,\n  class: \"team-tags\"\n}\nconst _hoisted_9 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_10 = { class: \"description\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MemberItem = _resolveComponent(\"MemberItem\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass('team' + _ctx.selectedClass)\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"label\", _hoisted_2, [\n        _hoisted_3,\n        _createElementVNode(\"span\", null, _toDisplayString(_ctx.team.name), 1),\n        (_ctx.editable && _ctx.selected)\n          ? (_openBlock(), _createElementBlock(\"span\", {\n              key: 0,\n              class: \"button material-symbols-outlined\",\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.editOnClick && _ctx.editOnClick(...args)))\n            }, \" edit_square \"))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3], (index) => {\n          return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n            (_ctx.resonanceElementImgSrcs[index])\n              ? (_openBlock(), _createElementBlock(\"img\", {\n                  key: 0,\n                  class: \"elemental-resonance\",\n                  src: _ctx.resonanceElementImgSrcs[index],\n                  alt: \"resonance\"\n                }, null, 8, _hoisted_5))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        }), 64))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"table\", null, [\n        _createElementVNode(\"tr\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n            return (_openBlock(), _createElementBlock(\"td\", {\n              key: member.id\n            }, [\n              _createVNode(_component_MemberItem, {\n                member: member,\n                statsObj: _ctx.memberStats[member.id],\n                displayStat: _ctx.displayStat,\n                showEquipment: _ctx.showEquipment,\n                viewable: true,\n                members: _ctx.team.members.map(s => s.name),\n                elementalResonance: _ctx.elementalResonance\n              }, null, 8, [\"member\", \"statsObj\", \"displayStat\", \"showEquipment\", \"members\", \"elementalResonance\"])\n            ]))\n          }), 128))\n        ])\n      ])\n    ]),\n    (_ctx.displayRes)\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_7, [\n          _createElementVNode(\"tr\", null, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.resKey, (key) => {\n              return (_openBlock(), _createElementBlock(\"td\", {\n                key: key,\n                class: _normalizeClass(_ctx.resBgClass(key))\n              }, _toDisplayString(_ctx.res[key]), 3))\n            }), 128))\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.displayTags)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.tags, (tag) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n              class: \"tag\",\n              key: tag\n            }, _toDisplayString(tag), 1))\n          }), 128))\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_9, [\n      _createElementVNode(\"span\", {\n        class: \"material-symbols-outlined control-button\",\n        onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.jumpToRotation && _ctx.jumpToRotation(...args)))\n      }, \"stat_minus_2\"),\n      _createElementVNode(\"div\", _hoisted_10, _toDisplayString(_ctx.description), 1)\n    ])\n  ], 2))\n}","<template>\r\n  <div :class=\"'team' + selectedClass\">\r\n    <div class=\"title\">\r\n      <label class=\"name\">\r\n        <span class=\"handle\"></span>\r\n        <span>{{ team.name }}</span>\r\n        <span v-if=\"editable && selected\" class=\"button material-symbols-outlined\" @click=\"editOnClick\"> edit_square\r\n        </span>\r\n      </label>\r\n      <div class=\"elemental-resonance\">\r\n        <template v-for=\"index in [0, 1, 2, 3]\" :key=\"index\">\r\n          <img v-if=\"resonanceElementImgSrcs[index]\" class=\"elemental-resonance\" :src=\"resonanceElementImgSrcs[index]\"\r\n            alt=\"resonance\" />\r\n        </template>\r\n      </div>\r\n    </div>\r\n    <div class=\"members\">\r\n      <table>\r\n        <tr>\r\n          <td v-for=\"member in team.members\" :key=\"member.id\">\r\n            <MemberItem :member=\"member\" :statsObj=\"memberStats[member.id]\" :displayStat=\"displayStat\"\r\n              :showEquipment=\"showEquipment\" :viewable=\"true\" :members=\"team.members.map(s => s.name)\"\r\n              :elementalResonance=\"elementalResonance\" />\r\n          </td>\r\n        </tr>\r\n      </table>\r\n    </div>\r\n    <table class=\"res\" v-if=\"displayRes\">\r\n      <tr>\r\n        <td v-for=\"key in resKey\" :key=\"key\" :class=\"resBgClass(key)\">{{ res[key] }}</td>\r\n      </tr>\r\n    </table>\r\n    <div class=\"team-tags\" v-if=\"displayTags\">\r\n      <span class=\"tag\" v-for=\"tag in team.tags\" :key=\"tag\">{{ tag }}</span>\r\n    </div>\r\n    <div style=\"text-align: left;\">\r\n      <span class=\"material-symbols-outlined control-button\" @click=\"jumpToRotation\">stat_minus_2</span>\r\n      <div class=\"description\">\r\n        {{ description }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from 'lodash';\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { evalFormula } from \"@/calculate\";\r\nimport { makeDetailObj, TStats } from \"@/input\";\r\nimport { CHARACTER_MASTER, ELEMENT_IMG_SRC, TAnyObject, TCharacterKey, ELEMENT_BG_COLOR_CLASS } from \"@/master\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { calculateMemberResult, getElementalResonance, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport MemberItem from \"./MemberItem.vue\";\r\n\r\nexport default defineComponent({\r\n  name: 'TeamItem',\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    selected: { type: Boolean, requied: true },\r\n    editable: { type: Boolean },\r\n    showEquipment: { type: Boolean },\r\n    displayStat: { type: String },\r\n    displayRes: { type: Boolean },\r\n    displayTags: { type: Boolean },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n  },\r\n  emits: ['click:edit', 'click:jump-to-rotation', 'update:member-result'],\r\n  components: {\r\n    MemberItem,\r\n  },\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n\r\n    const memberStats = reactive({} as TAnyObject);\r\n    const memberResults = reactive({} as TTeamMemberResult);\r\n    const res = reactive({} as TAnyObject);\r\n    const resKey = ['', '', '', '', '', '', '', ''];\r\n    function initializeRes() {\r\n      resKey.forEach(key => {\r\n        res[key] = 0;\r\n      });\r\n    }\r\n    initializeRes();\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, async (newVal) => {\r\n      watchFunc(newVal.team);\r\n      watchCount.value++;\r\n    });\r\n\r\n    onMounted(() => {\r\n      watchFunc(props.team);\r\n    })\r\n\r\n    const elementalResonance = computed(() => getElementalResonance(props.team));\r\n    const resonanceElementImgSrcs = computed(() => {\r\n      const result: string[] = [];\r\n      elementalResonance.value.forEach((entry) => {\r\n        if (entry == \"\") {\r\n          const members = props.team.members.filter((s) => s.name);\r\n          if (members.length == 4) {\r\n            members.forEach((member) => {\r\n              const master = CHARACTER_MASTER[member.name as TCharacterKey];\r\n              const src = (ELEMENT_IMG_SRC as any)[master.];\r\n              result.push(src);\r\n            });\r\n          }\r\n        } else {\r\n          const src = (ELEMENT_IMG_SRC as any)[entry.replace(\"\", \"\")];\r\n          result.push(src);\r\n          result.push(src);\r\n        }\r\n      });\r\n      return result;\r\n    })\r\n    const description = computed(() => props.team.description ?? '')\r\n    const selectedClass = computed(() => (props.selected ? ' selected' : ''));\r\n\r\n    async function watchFunc(team: TTeam) {\r\n      const list = [];\r\n      for (const member of team.members) {\r\n        list.push({\r\n          key: member.id,\r\n          value: await calculateMemberResult(member, team),\r\n        });\r\n      }\r\n      await Promise.all(list).then(results => {\r\n        results.forEach(entry => {\r\n          memberStats[entry.key] = entry.value?.statsInput?.statsObj;\r\n          memberResults[entry.key] = entry.value;\r\n        });\r\n      });\r\n      calculateStat();\r\n      calculateRes();\r\n      context.emit('update:member-result', team.id, memberResults);\r\n    }\r\n\r\n    function calculateStat() {\r\n      const teamAdjustments: { [key: string]: TStats } = {};\r\n      Object.keys(memberStats).forEach(key => {\r\n        teamAdjustments[key] = {};\r\n      })\r\n      Object.keys(memberStats).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const weaponMaster = memberResult?.characterInput?.weaponMaster;\r\n        if (characterMaster && characterMaster.) {\r\n          for (const damageDetail of characterMaster.) {\r\n            const detailObj = makeDetailObj(damageDetail, null, null, null, null);\r\n            if (detailObj. || !detailObj. || !detailObj.) continue;\r\n            const value = evalFormula(detailObj., memberResult.statsInput.statsObj, memberResult.damageResult, detailObj., detailObj.);\r\n            const toStat = detailObj..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n        if (weaponMaster && weaponMaster.) {\r\n          for (const damageDetail of weaponMaster.) {\r\n            const detailObj = makeDetailObj(damageDetail, null, null, null, null);\r\n            if (detailObj. || !detailObj. || !detailObj.) continue;\r\n            const value = evalFormula(detailObj., memberResult.statsInput.statsObj, memberResult.damageResult, detailObj., detailObj.);\r\n            const toStat = detailObj..replace(/V[1-3]$/, '');\r\n            Object.keys(memberResults).forEach(key2 => {\r\n              if (key2 != key) { // \r\n                if (toStat in teamAdjustments) {\r\n                  teamAdjustments[key2][toStat] += value;\r\n                } else {\r\n                  teamAdjustments[key2][toStat] = value;\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n      for (const key of Object.keys(memberStats)) {\r\n        if (key in teamAdjustments) {\r\n          for (const stat of Object.keys(teamAdjustments[key])) {\r\n            if (!memberStats[key]) continue;\r\n            if (stat in memberStats[key]) {\r\n              memberStats[key][stat] += teamAdjustments[key][stat];\r\n            } else {\r\n              memberStats[key][stat] = teamAdjustments[key][stat];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // \r\n    function calculateRes() {\r\n      initializeRes();\r\n      const dmgElements: string[] = [];\r\n      const artifactSet4s: string[] = [];\r\n      Object.keys(memberResults).forEach(key => {\r\n        const memberResult = memberResults[key];\r\n        const characterMaster = memberResult?.characterInput?.characterMaster;\r\n        const artifactSetMasters = memberResult?.characterInput?.artifactSetMasters;\r\n        if (characterMaster) {\r\n          if (characterMaster) {\r\n            dmgElements.push(characterMaster.);\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster.?.) {\r\n            for (const damageDetail of characterMaster.?.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                } else if (_.isPlainObject(damageDetail.)) {\r\n                  const level = memberResult.characterInput?.;\r\n                  if (level && level in damageDetail.) {\r\n                    value = damageDetail.[level];\r\n                  }\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (characterMaster.) {\r\n            for (const damageDetail of characterMaster.) {\r\n              if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                let value = 0;\r\n                if (_.isNumber(damageDetail.)) {\r\n                  value = damageDetail.;\r\n                }\r\n                if (element === '') {\r\n                  resKey.filter(s => s !== '').forEach(key => {\r\n                    res[key] -= value;\r\n                  })\r\n                } else {\r\n                  res[element] -= value;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          const constellation = memberResult.characterInput?. ?? (props.constellations ? props.constellations[characterMaster.] ?? 0 : 0);\r\n          if (characterMaster.) {\r\n            for (let i = 1; i <= constellation; i++) {\r\n              const constellationObj = characterMaster.[String(i)];\r\n              if (constellationObj.) {\r\n                for (const damageDetail of constellationObj.) {\r\n                  if (damageDetail. && damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    if (_.isNumber(damageDetail.)) {\r\n                      if (element === '') {\r\n                        resKey.filter(s => s !== '').forEach(key => {\r\n                          res[key] -= damageDetail.;\r\n                        })\r\n                      } else {\r\n                        res[element] -= damageDetail.;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (artifactSetMasters && artifactSetMasters.length == 2) {\r\n          if (artifactSetMasters[0].key == artifactSetMasters[1].key) {\r\n            if (!artifactSet4s.includes(artifactSetMasters[0].key)) {\r\n              artifactSet4s.push(artifactSetMasters[0].key);\r\n              if (artifactSetMasters[0]['4']?.) {\r\n                artifactSetMasters[0]['4']?..forEach(damageDetail => {\r\n                  if (damageDetail..startsWith('') && damageDetail..endsWith('') && damageDetail.) {\r\n                    const element = damageDetail..replace(/^/, '').replace(/$/, '').replace(/$/, '');\r\n                    res[element] -= Number(damageDetail.);\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n      if (dmgElements.filter(s => s === '').length >= 2) { // \r\n        res[''] -= -20;\r\n      }\r\n      if (dmgElements.includes('') && dmgElements.includes('')) { // \r\n        res[''] -= -40;\r\n      }\r\n      resKey.forEach(key => {\r\n        if (key !== '' && !dmgElements.includes(key)) {\r\n          res[key] = 0;\r\n        }\r\n      })\r\n    }\r\n\r\n    const resBgClass = (key: string) => {\r\n      if (res[key] !== 0) {\r\n        return key in ELEMENT_BG_COLOR_CLASS ? (ELEMENT_BG_COLOR_CLASS as any)[key] : 'physical';\r\n      } else {\r\n        return '';\r\n      }\r\n    }\r\n\r\n    const editOnClick = () => {\r\n      context.emit('click:edit', props.team.id);\r\n    }\r\n\r\n    const jumpToRotation = () => {\r\n      context.emit('click:jump-to-rotation');\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n\r\n      selectedClass,\r\n      memberStats,\r\n      elementalResonance,\r\n      resonanceElementImgSrcs,\r\n      description,\r\n      res,\r\n      resKey,\r\n      resBgClass,\r\n\r\n      editOnClick,\r\n      jumpToRotation,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style>\r\ndiv.team {\r\n  display: inline-block;\r\n  max-width: 322px;\r\n  padding: 4px 4px 0 4px;\r\n  border: 4px double silver;\r\n  border-radius: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\ndiv.title {\r\n  position: relative;\r\n  text-align: left;\r\n  height: 4.5rem;\r\n}\r\n\r\n.handle {\r\n  color: darkorange;\r\n}\r\n\r\ndiv.team.selected {\r\n  border-color: gold;\r\n}\r\n\r\nlabel.name {\r\n  font-size: 2.6rem;\r\n}\r\n\r\nlabel.name span {\r\n  margin-left: 0.5rem;\r\n}\r\n\r\nlabel.name span.button {\r\n  display: inline-block;\r\n  position: absolute;\r\n  left: 217px;\r\n  top: 0;\r\n  font-size: 3rem;\r\n}\r\n\r\nlabel.name span.button {\r\n  display: inline-block;\r\n  position: absolute;\r\n  right: 0px;\r\n  top: 1px;\r\n}\r\n\r\nlabel.name input {\r\n  width: 180px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n}\r\n\r\ndiv.elemental-resonance {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n}\r\n\r\nimg.elemental-resonance {\r\n  width: 20px;\r\n}\r\n\r\n.members table {\r\n  width: 100%;\r\n  table-layout: fixed;\r\n  border-spacing: 0;\r\n  text-align: center;\r\n}\r\n\r\ndiv.description {\r\n  display: inline-block;\r\n  margin-top: 3px;\r\n  font-size: 2rem;\r\n  height: 2.4rem;\r\n  text-align: center;\r\n  vertical-align: top;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n}\r\n\r\nspan.control-button {\r\n  display: inline-block;\r\n  margin-left: 4px;\r\n  margin-right: 4px;\r\n  vertical-align: baseline;\r\n  color: orange;\r\n  font-size: 3rem;\r\n  padding-bottom: 0;\r\n}\r\n\r\ntable.res {\r\n  width: 100%;\r\n  table-layout: fixed;\r\n  color: black;\r\n  font-size: 2rem;\r\n}\r\n\r\n.physical {\r\n  background-color: silver;\r\n}\r\n\r\ndiv.team-tags {\r\n  height: 12px;\r\n}\r\n\r\nspan.tag {\r\n  display: inline-block;\r\n  width: auto;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  height: 12px;\r\n  font-size: 10px;\r\n  background: linear-gradient(to top, #3d3d3b, #141414);\r\n  border: 1px solid whitesmoke;\r\n  border-radius: 3px;\r\n  margin: 0px 1px;\r\n  vertical-align: middle;\r\n  padding-top: 1px;\r\n}\r\n</style>\r\n","import { render } from \"./TeamItem.vue?vue&type=template&id=a5c50a68&ts=true\"\nimport script from \"./TeamItem.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamItem.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamItem.vue?vue&type=style&index=0&id=a5c50a68&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, vModelText as _vModelText, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-37a78f4d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"rotation-box\"\n}\nconst _hoisted_2 = { class: \"pane1\" }\nconst _hoisted_3 = { class: \"icon-list\" }\nconst _hoisted_4 = { key: 0 }\nconst _hoisted_5 = { class: \"action with-tooltip\" }\nconst _hoisted_6 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_7 = { class: \"tooltip\" }\nconst _hoisted_8 = { class: \"action with-tooltip\" }\nconst _hoisted_9 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_10 = { class: \"tooltip\" }\nconst _hoisted_11 = { class: \"action with-tooltip\" }\nconst _hoisted_12 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_13 = { class: \"tooltip\" }\nconst _hoisted_14 = { class: \"control-button\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"material-symbols-outlined\" }, \"delete\", -1))\nconst _hoisted_16 = { key: 0 }\nconst _hoisted_17 = [\"src\", \"alt\"]\nconst _hoisted_18 = {\n  key: 1,\n  class: \"action-attribute\"\n}\nconst _hoisted_19 = { class: \"rotation-list\" }\nconst _hoisted_20 = { class: \"rotation-item\" }\nconst _hoisted_21 = [\"src\", \"alt\"]\nconst _hoisted_22 = { class: \"with-tooltip handle\" }\nconst _hoisted_23 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_24 = [\"onClick\"]\nconst _hoisted_25 = { class: \"action-attribute\" }\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_30 = /*#__PURE__*/_createStaticVNode(\"<br data-v-37a78f4d><table class=\\\"guide\\\" data-v-37a78f4d><tr data-v-37a78f4d><th data-v-37a78f4d>N</th><td data-v-37a78f4d>1</td><th data-v-37a78f4d>N2</th><td data-v-37a78f4d>2</td><th data-v-37a78f4d>NX</th><td data-v-37a78f4d>X</td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>N1C</th><td data-v-37a78f4d>1+</td><th data-v-37a78f4d>N2C</th><td data-v-37a78f4d>2+</td><th data-v-37a78f4d>NXC</th><td data-v-37a78f4d>X+</td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>C</th><td data-v-37a78f4d></td><td colspan=\\\"4\\\" data-v-37a78f4d></td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>P</th><td data-v-37a78f4d></td><td colspan=\\\"4\\\" data-v-37a78f4d></td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>E</th><td data-v-37a78f4d></td><th data-v-37a78f4d>E.Press</th><td data-v-37a78f4d>()</td><th data-v-37a78f4d>E.Hold</th><td data-v-37a78f4d>()</td></tr><tr data-v-37a78f4d><th data-v-37a78f4d>Q</th><td data-v-37a78f4d></td><td colspan=\\\"4\\\" data-v-37a78f4d></td></tr></table>\", 2)\nconst _hoisted_32 = {\n  key: 0,\n  class: \"pane2\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_draggable = _resolveComponent(\"draggable\")!\n  const _component_ERCalculator = _resolveComponent(\"ERCalculator\")!\n\n  return (_ctx.watchCount)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"fieldset\", _hoisted_3, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.team.members, (member) => {\n              return (_openBlock(), _createElementBlock(_Fragment, {\n                key: member.id\n              }, [\n                (member.name)\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, [\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.normalAttackIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'N'))\n                        }, null, 10, _hoisted_6),\n                        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName('')), 1)\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_8, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.elementalSkillIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'E'))\n                        }, null, 10, _hoisted_9),\n                        _createElementVNode(\"span\", _hoisted_10, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName(\"\")), 1)\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_11, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon' + _ctx.bgColorClass(member.name)),\n                          src: _ctx.elementalBurstIconSrc(member.name),\n                          alt: _ctx.displayName(member.name) + ' ' + _ctx.displayName(''),\n                          onClick: ($event: any) => (_ctx.listActionOnClick(member, 'Q'))\n                        }, null, 10, _hoisted_12),\n                        _createElementVNode(\"span\", _hoisted_13, _toDisplayString(_ctx.displayName(member.name) + ' ' + _ctx.displayName('')), 1)\n                      ])\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ], 64))\n            }), 128)),\n            _createElementVNode(\"table\", _hoisted_14, [\n              _createElementVNode(\"tr\", null, [\n                _createElementVNode(\"td\", null, [\n                  _createElementVNode(\"span\", {\n                    class: \"material-symbols-outlined control-button\",\n                    onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('click:jump-to-team')))\n                  }, \"stat_2\")\n                ]),\n                _createElementVNode(\"td\", null, [\n                  _createElementVNode(\"label\", {\n                    class: _normalizeClass(_ctx.removeMode ? 'checked' : '')\n                  }, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"checkbox\",\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.removeMode) = $event))\n                    }, null, 512), [\n                      [_vModelCheckbox, _ctx.removeMode]\n                    ]),\n                    _hoisted_15\n                  ], 2)\n                ]),\n                _createElementVNode(\"td\", null, [\n                  (_ctx.selectedAction)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                        _createElementVNode(\"img\", {\n                          class: _normalizeClass('action-icon handle' + _ctx.bgColorClass(_ctx.selectedAction.member)),\n                          src: _ctx.getActionDetail(_ctx.selectedAction).icon_url,\n                          alt: _ctx.displayName(_ctx.getActionDetail(_ctx.selectedAction).),\n                          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.selectedActionOnClick(_ctx.selectedAction)))\n                        }, null, 10, _hoisted_17)\n                      ]))\n                    : _createCommentVNode(\"\", true),\n                  (_ctx.selectedAction)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, _toDisplayString(_ctx.actionDisplay(_ctx.selectedAction)), 1))\n                    : _createCommentVNode(\"\", true)\n                ])\n              ])\n            ])\n          ]),\n          _createElementVNode(\"fieldset\", _hoisted_19, [\n            _createVNode(_component_draggable, {\n              list: _ctx.rotationList,\n              \"item-key\": \"id\",\n              sort: true,\n              handle: \".handle\",\n              delay: 100,\n              animation: 200,\n              onChange: _ctx.rotationListOnChange\n            }, {\n              item: _withCtx(({ element }) => [\n                _createElementVNode(\"div\", _hoisted_20, [\n                  (_ctx.previousRotation(element)?.member != element.member)\n                    ? (_openBlock(), _createElementBlock(\"img\", {\n                        key: 0,\n                        class: \"character-icon\",\n                        src: _ctx.getCharacterMaster(element.member)?.icon_url ?? _ctx.IMG_SRC_DUMMY,\n                        alt: _ctx.displayName(element.member)\n                      }, null, 8, _hoisted_21))\n                    : _createCommentVNode(\"\", true),\n                  (_ctx.getActionDetail(element))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass('action-item ' + _ctx.colorClass(element.member))\n                      }, [\n                        _createElementVNode(\"div\", _hoisted_22, [\n                          _createElementVNode(\"img\", {\n                            class: _normalizeClass('action-icon' + _ctx.bgColorClass(element.member) + _ctx.selectedActionClass(element)),\n                            src: _ctx.getActionDetail(element).icon_url,\n                            alt: _ctx.displayName(_ctx.getActionDetail(element).),\n                            onClick: ($event: any) => (_ctx.rotationActionOnClick(element))\n                          }, null, 10, _hoisted_23),\n                          (_ctx.removeMode)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"remove-mark\",\n                                onClick: ($event: any) => (_ctx.removeItemOnClick(element))\n                              }, null, 8, _hoisted_24))\n                            : _createCommentVNode(\"\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_25, _toDisplayString(_ctx.actionDisplay(element)), 1)\n                      ], 2))\n                    : _createCommentVNode(\"\", true)\n                ])\n              ]),\n              _: 1\n            }, 8, [\"list\", \"onChange\"]),\n            _hoisted_26,\n            _withDirectives(_createElementVNode(\"textarea\", {\n              class: \"rotation-description\",\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.rotationDescription) = $event)),\n              rows: \"10\",\n              maxlength: \"400\",\n              onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateRotation && _ctx.updateRotation(...args)))\n            }, null, 544), [\n              [_vModelText, _ctx.rotationDescription]\n            ])\n          ]),\n          _hoisted_27,\n          _createTextVNode(),\n          _hoisted_28,\n          _hoisted_29,\n          _createTextVNode(),\n          _hoisted_30\n        ]),\n        true\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_32, [\n              _createVNode(_component_ERCalculator, {\n                team: _ctx.team,\n                rotationList: _ctx.rotationList,\n                teamMemberResult: _ctx.teamMemberResult,\n                constellations: _ctx.constellations\n              }, null, 8, [\"team\", \"rotationList\", \"teamMemberResult\", \"constellations\"])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<template>\r\n  <div class=\"rotation-box\" v-if=\"watchCount\">\r\n    <div class=\"pane1\">\r\n      <fieldset class=\"icon-list\">\r\n        <template v-for=\"member in  team.members \" :key=\"member.id\">\r\n          <span v-if=\"member.name\">\r\n            <div class=\"action with-tooltip\">\r\n              <img :class=\"'action-icon' + bgColorClass(member.name)\" :src=\"normalAttackIconSrc(member.name)\"\r\n                :alt=\"displayName(member.name) + ' ' + displayName('')\" @click=\"listActionOnClick(member, 'N')\" />\r\n              <span class=\"tooltip\">\r\n                {{ displayName(member.name) + ' ' + displayName('') }}\r\n              </span>\r\n            </div>\r\n            <div class=\"action with-tooltip\">\r\n              <img :class=\"'action-icon' + bgColorClass(member.name)\" :src=\"elementalSkillIconSrc(member.name)\"\r\n                :alt=\"displayName(member.name) + ' ' + displayName('')\" @click=\"listActionOnClick(member, 'E')\" />\r\n              <span class=\"tooltip\">\r\n                {{ displayName(member.name) + ' ' + displayName(\"\") }}\r\n              </span>\r\n            </div>\r\n            <div class=\"action with-tooltip\">\r\n              <img :class=\"'action-icon' + bgColorClass(member.name)\" :src=\"elementalBurstIconSrc(member.name)\"\r\n                :alt=\"displayName(member.name) + ' ' + displayName('')\" @click=\"listActionOnClick(member, 'Q')\" />\r\n              <span class=\"tooltip\">\r\n                {{ displayName(member.name) + ' ' + displayName('') }}\r\n              </span>\r\n            </div>\r\n          </span>\r\n        </template>\r\n        <table class=\"control-button\">\r\n          <tr>\r\n            <td>\r\n              <span class=\"material-symbols-outlined control-button\" @click=\"$emit('click:jump-to-team')\">stat_2</span>\r\n            </td>\r\n            <td>\r\n              <label :class=\"removeMode ? 'checked' : ''\">\r\n                <input type=\"checkbox\" v-model=\"removeMode\">\r\n                <span class=\"material-symbols-outlined\">delete</span>\r\n              </label>\r\n            </td>\r\n            <td>\r\n              <div v-if=\"selectedAction\">\r\n                <img :class=\"'action-icon handle' + bgColorClass(selectedAction.member)\"\r\n                  :src=\"getActionDetail(selectedAction).icon_url\" :alt=\"displayName(getActionDetail(selectedAction).)\"\r\n                  @click=\"selectedActionOnClick(selectedAction)\" />\r\n              </div>\r\n              <div class=\"action-attribute\" v-if=\"selectedAction\">\r\n                {{ actionDisplay(selectedAction) }}\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </fieldset>\r\n      <fieldset class=\"rotation-list\">\r\n        <draggable :list=\"rotationList\" item-key=\"id\" :sort=\"true\" handle=\".handle\" :delay=\"100\" :animation=\"200\"\r\n          @change=\"rotationListOnChange\">\r\n          <template #item=\"{ element }\">\r\n            <div class=\"rotation-item\">\r\n              <img v-if=\"previousRotation(element)?.member != element.member\" class=\"character-icon\"\r\n                :src=\"getCharacterMaster(element.member)?.icon_url ?? IMG_SRC_DUMMY\" :alt=\"displayName(element.member)\" />\r\n              <div v-if=\"getActionDetail(element)\" :class=\"'action-item ' + colorClass(element.member)\">\r\n                <div class=\"with-tooltip handle\">\r\n                  <img :class=\"'action-icon' + bgColorClass(element.member) + selectedActionClass(element)\"\r\n                    :src=\"getActionDetail(element).icon_url\" :alt=\"displayName(getActionDetail(element).)\"\r\n                    @click=\"rotationActionOnClick(element)\" />\r\n                  <div v-if=\"removeMode\" class=\"remove-mark\" @click=\"removeItemOnClick(element)\"></div>\r\n                </div>\r\n                <div class=\"action-attribute\">\r\n                  {{ actionDisplay(element) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </draggable>\r\n        <br />\r\n        <textarea class=\"rotation-description\" v-model=\"rotationDescription\" rows=\"10\" maxlength=\"400\"\r\n          @change=\"updateRotation\"></textarea>\r\n      </fieldset>\r\n      <br /> <br />\r\n      <br /> <br />\r\n      <table class=\"guide\">\r\n        <tr>\r\n          <th>N</th>\r\n          <td>1</td>\r\n          <th>N2</th>\r\n          <td>2</td>\r\n          <th>NX</th>\r\n          <td>X</td>\r\n        </tr>\r\n        <tr>\r\n          <th>N1C</th>\r\n          <td>1+</td>\r\n          <th>N2C</th>\r\n          <td>2+</td>\r\n          <th>NXC</th>\r\n          <td>X+</td>\r\n        </tr>\r\n        <tr>\r\n          <th>C</th>\r\n          <td></td>\r\n          <td colspan=\"4\"></td>\r\n        </tr>\r\n        <tr>\r\n          <th>P</th>\r\n          <td></td>\r\n          <td colspan=\"4\"></td>\r\n        </tr>\r\n        <tr>\r\n          <th>E</th>\r\n          <td></td>\r\n          <th>E.Press</th>\r\n          <td>()</td>\r\n          <th>E.Hold</th>\r\n          <td>()</td>\r\n        </tr>\r\n        <tr>\r\n          <th>Q</th>\r\n          <td></td>\r\n          <td colspan=\"4\"></td>\r\n        </tr>\r\n      </table>\r\n    </div>\r\n    <div class=\"pane2\" v-if=\"true\">\r\n      <ERCalculator :team=\"team\" :rotationList=\"rotationList\" :teamMemberResult=\"teamMemberResult\"\r\n        :constellations=\"constellations\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from \"lodash\";\r\nimport draggable from \"vuedraggable\";\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport { ELEMENT_BG_COLOR_CLASS, ELEMENT_COLOR_CLASS, IMG_SRC_DUMMY } from \"@/master\";\r\nimport { getElementalSkillActions } from \"@/particlemaster\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { CHARGED_ONLY_CHARACTER, CHARGED_WITH_NORMAL_CHARACTER, CHARGED_WITH_NORMAL_WEAPON, getCharacterDetail, getCharacterMaster, getNormalAttackDan, setupCharacterDetailMap, TActionItem, TConstellation, TMember, TTeam, TTeamMemberResult } from \"./team\";\r\nimport ERCalculator from './ERCalculator.vue';\r\n\r\nexport default defineComponent({\r\n  name: \"TeamRotation\",\r\n  components: {\r\n    draggable,\r\n    ERCalculator,\r\n  },\r\n  props: {\r\n    team: { type: Object as PropType<TTeam>, required: true },\r\n    teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n    constellations: { type: Object as PropType<TConstellation> },\r\n  },\r\n  emit: ['update:rotation', 'click:jump-to-team'],\r\n  setup(props, context) {\r\n    const { displayName } = CompositionFunction();\r\n    const removeMode = ref(false);\r\n    const normalAttackActions = reactive({} as { [key: string]: string[] }); // //\r\n    const elementalSkillActions = reactive({} as { [key: string]: string[] }); // \r\n    const rotationList = reactive([] as TActionItem[]);\r\n    const actionId = ref(0);\r\n    const rotationDescription = ref('');\r\n    const selectedActionId = ref(-1);\r\n\r\n    const watchCount = ref(0);\r\n    watch(props, async () => {\r\n      await watchFunc(props.team);\r\n    });\r\n\r\n    async function watchFunc(team: TTeam) {\r\n      await setupCharacterDetailMap();\r\n      for (const member of team.members) {\r\n        if (member.name) {\r\n          const characterMaster = getCharacterMaster(member.name);\r\n          if (characterMaster) {\r\n            const isCWith = (CHARGED_WITH_NORMAL_WEAPON.includes(characterMaster?.) || CHARGED_WITH_NORMAL_CHARACTER.includes(member.name)) && !CHARGED_ONLY_CHARACTER.includes(member.name);\r\n            const workArr: string[] = [];\r\n            for (let i = 0; i < getNormalAttackDan(member.name); i++) {\r\n              const work = 'N' + (i > 0 ? String(i + 1) : '');\r\n              workArr.push(work);\r\n              if (isCWith) {\r\n                workArr.push(work + (work === 'N' ? '1C' : 'C'));\r\n              }\r\n            }\r\n            if (!isCWith) {\r\n              workArr.push('C');\r\n            }\r\n            workArr.push('P');\r\n            normalAttackActions[member.name] = workArr;\r\n          }\r\n          elementalSkillActions[member.name] = getElementalSkillActions(member.name);\r\n        }\r\n      }\r\n      const isSameMember = team.rotation.filter(rotation => !team.members.filter(member => member.name).map(member => member.name).includes(rotation.member)).length == 0;\r\n      if (isSameMember) {\r\n        if (team.rotation.length) {\r\n          const workArr = _.cloneDeep(team.rotation);\r\n          workArr.forEach(rotation => {\r\n            if (rotation.action === 'NC') {\r\n              rotation.action = 'N1C';\r\n            } else if (rotation.action.startsWith('E')) {\r\n              const actions = elementalSkillActions[rotation.member];\r\n              if (actions && actions.length > 0 && !actions.includes(rotation.action)) {\r\n                rotation.action = actions[0];\r\n              }\r\n            }\r\n          })\r\n          rotationList.splice(0, rotationList.length, ...workArr);\r\n          actionId.value = Math.max(...rotationList.map(s => s.id)) ?? rotationList.length;\r\n        } else {\r\n          rotationList.splice(0, rotationList.length);\r\n          actionId.value = 0;\r\n        }\r\n      } else {\r\n        rotationList.splice(0, rotationList.length);\r\n        actionId.value = 0;\r\n        updateRotation();\r\n      }\r\n      rotationDescription.value = team.rotationDescription;\r\n      watchCount.value++;\r\n    }\r\n\r\n    onMounted(() => {\r\n      watchFunc(props.team);\r\n      props.team.members.forEach(member => {\r\n        normalAttackIconSrc(member.name);\r\n      })\r\n    })\r\n\r\n    const selectedAction = computed((): TActionItem | undefined => {\r\n      const actionArr = rotationList.filter(rotation => rotation.id == selectedActionId.value);\r\n      return actionArr.length > 0 ? actionArr[0] : undefined;\r\n    })\r\n\r\n    const getActionDetail = (item: TActionItem) => {\r\n      let result;\r\n      const master = getCharacterDetail(item.member);\r\n      if (master) {\r\n        if (normalAttackActions[item.member].includes(item.action)) { // , , \r\n          result = master.;\r\n        } else if (elementalSkillActions[item.member].includes(item.action)) { // \r\n          result = master.;\r\n        } else if (item.action == 'Q') { // \r\n          result = master.;\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    const previousRotation = (item: TActionItem) => {\r\n      let result;\r\n      for (const rotation of rotationList) {\r\n        if (item.id == rotation.id) {\r\n          break;\r\n        }\r\n        result = rotation;\r\n      }\r\n      return result;\r\n    }\r\n\r\n    const normalAttackIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const elementalSkillIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const elementalBurstIconSrc = (character: string) => getCharacterDetail(character)?..icon_url ?? IMG_SRC_DUMMY;\r\n    const colorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n    const bgColorClass = (character: string) => {\r\n      const master = getCharacterMaster(character);\r\n      return master ? ' ' + (ELEMENT_BG_COLOR_CLASS as any)[master.] : '';\r\n    }\r\n\r\n    const actionDisplay = (item: TActionItem) =>\r\n      item.action.startsWith('E') ? item.action.replace(/^E\\./, '') : item.action;\r\n\r\n    const selectedActionClass = (item: TActionItem) =>\r\n      selectedActionId.value == item.id ? ' selected' : '';\r\n\r\n    const updateRotation = () => {\r\n      context.emit('update:rotation', rotationList, rotationDescription.value);\r\n    }\r\n\r\n    const rotationListOnChange = () => {\r\n      updateRotation();\r\n    }\r\n\r\n    const listActionOnClick = (member: TMember, actionKey: string) => {\r\n      let action = actionKey;\r\n      if (normalAttackActions[member.name].includes(action)) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && normalAttackActions[member.name].includes(s.action));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        }\r\n      } else if (action.startsWith('E')) {\r\n        const workArr = rotationList.filter(s => s.member == member.name && elementalSkillActions[member.name].includes(s.action));\r\n        if (workArr.length > 0) {\r\n          action = workArr[workArr.length - 1].action;\r\n        } else {\r\n          const actions = elementalSkillActions[member.name];\r\n          if (actions && actions.length > 0) {\r\n            action = actions[0];\r\n          }\r\n        }\r\n      }\r\n      rotationList.push({\r\n        id: ++actionId.value,\r\n        member: member.name,\r\n        action: action,\r\n      });\r\n      updateRotation();\r\n    }\r\n\r\n    const rotationActionOnClick = (item: TActionItem) => {\r\n      if (removeMode.value) {\r\n        removeItemOnClick(item);\r\n      } else if (selectedActionId.value == item.id) {\r\n        selectedActionId.value = -1;\r\n      } else if (normalAttackActions[item.member].includes(item.action)) {\r\n        selectedActionId.value = item.id;\r\n      } else if (item.action.startsWith('E') && elementalSkillActions[item.member].length > 1) {\r\n        selectedActionId.value = item.id;\r\n      } else {\r\n        selectedActionId.value = -1;\r\n      }\r\n    }\r\n\r\n    const selectedActionOnClick = (item: TActionItem) => {\r\n      for (const actionArr of [normalAttackActions[item.member], elementalSkillActions[item.member]]) {\r\n        if (actionArr?.length) {\r\n          const index = actionArr.indexOf(item.action);\r\n          if (index != -1) {\r\n            item.action = (index + 1) < actionArr.length ? actionArr[index + 1] : actionArr[0];\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      updateRotation();\r\n    }\r\n\r\n    const removeItemOnClick = (item: TActionItem) => {\r\n      rotationList.splice(0, rotationList.length, ...rotationList.filter(s => s != item));\r\n      updateRotation();\r\n    }\r\n\r\n    return {\r\n      displayName,\r\n      IMG_SRC_DUMMY,\r\n      removeMode,\r\n\r\n      watchCount,\r\n      normalAttackIconSrc,\r\n      elementalSkillIconSrc,\r\n      elementalBurstIconSrc,\r\n      colorClass,\r\n      bgColorClass,\r\n\r\n      getCharacterMaster,\r\n\r\n      rotationList,\r\n      rotationDescription,\r\n      previousRotation,\r\n      getCharacterDetail,\r\n      getActionDetail,\r\n      actionDisplay,\r\n      selectedAction,\r\n      selectedActionClass,\r\n\r\n      rotationListOnChange,\r\n      listActionOnClick,\r\n      rotationActionOnClick,\r\n      removeItemOnClick,\r\n      selectedActionOnClick,\r\n      updateRotation,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style scoped>\r\n@media all and (min-width: 720px) {\r\n  .rotation-box {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr;\r\n    grid-template-rows: auto;\r\n    grid-template-areas: \"pane1 pane2\";\r\n  }\r\n}\r\n\r\n@media all and (max-width: 719px) {\r\n  .rotation-box {\r\n    display: grid;\r\n    grid-template-columns: 100%;\r\n    grid-template-rows: auto auto;\r\n    grid-template-areas:\r\n      \"pane1\"\r\n      \"pane2\";\r\n  }\r\n}\r\n\r\n.pane1 {\r\n  grid-area: pane1;\r\n}\r\n\r\n.pane2 {\r\n  grid-area: pane2;\r\n}\r\n\r\nfieldset.icon-list {\r\n  padding-bottom: 0px;\r\n}\r\n\r\ndiv.action {\r\n  display: inline-block;\r\n}\r\n\r\nimg.action-icon {\r\n  width: 45px;\r\n  height: 45px;\r\n  border-radius: 50%;\r\n}\r\n\r\nimg.character-icon {\r\n  vertical-align: top;\r\n  width: 65px;\r\n  height: 50px;\r\n  object-position: top;\r\n  object-fit: cover;\r\n}\r\n\r\nfieldset.rotation-list {\r\n  text-align: left;\r\n  background-color: whitesmoke;\r\n}\r\n\r\ntable.control-button {\r\n  table-layout: fixed;\r\n  width: 100%;\r\n  margin-top: 0;\r\n  margin-bottom: 0;\r\n  border: none;\r\n}\r\n\r\ntable.control-button td {\r\n  height: 62px;\r\n  vertical-align: bottom;\r\n}\r\n\r\ntable.control-button td:first-child,\r\ntable.control-button td:last-child {\r\n  width: 45px;\r\n}\r\n\r\ntable.control-button button {\r\n  font-size: 12px;\r\n  background-color: transparent;\r\n  border-color: silver;\r\n  border-style: none;\r\n}\r\n\r\nspan.control-button {\r\n  color: orange;\r\n  font-size: 3rem;\r\n}\r\n\r\ntable.control-button input[type=\"checkbox\"] {\r\n  display: none;\r\n}\r\n\r\n.control-button label.checked {\r\n  color: orange;\r\n}\r\n\r\ndiv.rotation-item {\r\n  display: inline-block;\r\n  position: relative;\r\n  vertical-align: top;\r\n  font-size: 14px;\r\n  padding-left: 4px;\r\n  padding-bottom: 4px;\r\n}\r\n\r\ndiv.action-item {\r\n  display: inline-block;\r\n  text-align: center;\r\n}\r\n\r\ndiv.action-attribute {\r\n  text-align: center;\r\n  text-shadow: 0px 1px 0px #003366;\r\n  font-size: 14px;\r\n}\r\n\r\n.selected {\r\n  opacity: 0.5;\r\n  border-radius: 5px;\r\n}\r\n\r\n.tooltip {\r\n  top: -3rem;\r\n}\r\n\r\ndiv.remove-mark {\r\n  display: block;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: calc(50% - 15px);\r\n}\r\n\r\n.remove-mark::before,\r\n.remove-mark::after {\r\n  content: '';\r\n  width: 30px;\r\n  height: 3px;\r\n  background: black;\r\n  position: absolute;\r\n  transform: translateY(-50%) rotate(45deg);\r\n}\r\n\r\n.remove-mark::after {\r\n  transform: translateY(-50%) rotate(135deg);\r\n}\r\n\r\ntextarea.rotation-description {\r\n  display: block;\r\n  width: calc(100% - 20px);\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  padding: 3px 5px;\r\n}\r\n\r\ntable.guide {\r\n  width: calc(100% - 15px);\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  text-align: left;\r\n  table-layout: fixed;\r\n  border-spacing: 0;\r\n  border-radius: 10px;\r\n  border: 1px solid silver;\r\n  padding: 4px 4px 2px 4px;\r\n}\r\n\r\n.guide th {\r\n  width: 9rem;\r\n}\r\n\r\n.guide th,\r\n.guide td {\r\n  border-bottom: 1px solid silver;\r\n  border-right: 1px solid silver;\r\n  vertical-align: top;\r\n  padding-left: 3px;\r\n}\r\n\r\n.guide tr:last-child th,\r\n.guide tr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\n.guide td:last-child {\r\n  border-right: none;\r\n}\r\n</style>\r\n","import { toDisplayString as _toDisplayString, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode, vShow as _vShow, vModelCheckbox as _vModelCheckbox, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-109f95d0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"er-calculator\" }\nconst _hoisted_2 = { class: \"er-calculator\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", { colspan: \"2\" }, null, -1))\nconst _hoisted_4 = { class: \"with-tooltip\" }\nconst _hoisted_5 = [\"src\", \"alt\"]\nconst _hoisted_6 = { class: \"tooltip\" }\nconst _hoisted_7 = { colspan: \"2\" }\nconst _hoisted_8 = [\"onUpdate:modelValue\"]\nconst _hoisted_9 = { colspan: \"2\" }\nconst _hoisted_10 = [\"onUpdate:modelValue\"]\nconst _hoisted_11 = [\"value\"]\nconst _hoisted_12 = { colspan: \"2\" }\nconst _hoisted_13 = [\"src\", \"alt\"]\nconst _hoisted_14 = [\"onUpdate:modelValue\"]\nconst _hoisted_15 = [\"value\"]\nconst _hoisted_16 = { class: \"result-row\" }\nconst _hoisted_17 = { colspan: \"2\" }\nconst _hoisted_18 = { colspan: \"2\" }\nconst _hoisted_19 = [\"onUpdate:modelValue\"]\nconst _hoisted_20 = { class: \"label-row\" }\nconst _hoisted_21 = { colspan: \"2\" }\nconst _hoisted_22 = { colspan: \"4\" }\nconst _hoisted_23 = [\"onUpdate:modelValue\"]\nconst _hoisted_24 = { class: \"with-tooltip\" }\nconst _hoisted_25 = [\"src\", \"alt\"]\nconst _hoisted_26 = [\"src\", \"alt\"]\nconst _hoisted_27 = { class: \"tooltip\" }\nconst _hoisted_28 = [\"onUpdate:modelValue\"]\nconst _hoisted_29 = { colspan: \"2\" }\nconst _hoisted_30 = {\n  key: 0,\n  class: \"label-row\"\n}\nconst _hoisted_31 = { colspan: \"2\" }\nconst _hoisted_32 = { colspan: \"4\" }\nconst _hoisted_33 = {\n  colspan: \"2\",\n  class: \"with-tooltip\"\n}\nconst _hoisted_34 = [\"src\", \"alt\"]\nconst _hoisted_35 = [\"src\", \"alt\"]\nconst _hoisted_36 = { class: \"tooltip\" }\nconst _hoisted_37 = [\"onUpdate:modelValue\"]\nconst _hoisted_38 = { colspan: \"2\" }\nconst _hoisted_39 = [\"onUpdate:modelValue\"]\nconst _hoisted_40 = { colspan: \"2\" }\nconst _hoisted_41 = [\"src\", \"alt\", \"onClick\"]\nconst _hoisted_42 = { class: \"tooltip\" }\nconst _hoisted_43 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_44 = { class: \"supply-from-enemy\" }\nconst _hoisted_45 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, null, -1))\nconst _hoisted_46 = [\"onUpdate:modelValue\"]\nconst _hoisted_47 = [\"onUpdate:modelValue\"]\nconst _hoisted_48 = { class: \"message-area\" }\nconst _hoisted_49 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_50 = { class: \"character\" }\nconst _hoisted_51 = { key: 0 }\nconst _hoisted_52 = { class: \"message-area\" }\nconst _hoisted_53 = {\n  class: \"toggle-switch\",\n  for: \"show-usage-toggle\"\n}\nconst _hoisted_54 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_55 = { style: {\"text-align\":\"center\"} }\nconst _hoisted_56 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"ol\", null, [\n  /*#__PURE__*/_createElementVNode(\"li\", null, \" \"),\n  /*#__PURE__*/_createElementVNode(\"li\", null, \"HP\"),\n  /*#__PURE__*/_createElementVNode(\"li\", null, \"1\"),\n  /*#__PURE__*/_createElementVNode(\"li\", null, [\n    /*#__PURE__*/_createTextVNode(\" 8\"),\n    /*#__PURE__*/_createElementVNode(\"br\")\n  ])\n], -1))\nconst _hoisted_57 = { style: {\"text-align\":\"center\"} }\nconst _hoisted_58 = /*#__PURE__*/_createStaticVNode(\"<li data-v-109f95d0><br data-v-109f95d0>   20 </li><li data-v-109f95d0><br data-v-109f95d0>   </li><li data-v-109f95d0><br data-v-109f95d0>  </li><li data-v-109f95d0> <br data-v-109f95d0>  </li><li data-v-109f95d0> <br data-v-109f95d0>   </li><li data-v-109f95d0> <br data-v-109f95d0> () </li><li data-v-109f95d0><br data-v-109f95d0> 5 0 </li><li data-v-109f95d0><br data-v-109f95d0> (%)  1 </li><li data-v-109f95d0><br data-v-109f95d0>   </li>\", 9)\nconst _hoisted_67 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"li\", null, [\n  /*#__PURE__*/_createTextVNode(\" \"),\n  /*#__PURE__*/_createElementVNode(\"ul\", null, [\n    /*#__PURE__*/_createElementVNode(\"li\", null, \" : 9\"),\n    /*#__PURE__*/_createElementVNode(\"li\", null, \" : 4()\"),\n    /*#__PURE__*/_createElementVNode(\"li\", null, \" : 6\"),\n    /*#__PURE__*/_createElementVNode(\"li\", null, \" : 3\")\n  ])\n], -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.rotationLength) = $event)),\n          min: \"10\",\n          max: \"180\",\n          onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.rotationLength]\n        ])\n      ])\n    ]),\n    _createElementVNode(\"table\", _hoisted_2, [\n      _createElementVNode(\"tr\", null, [\n        _hoisted_3,\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"img\", {\n                src: _ctx.characterImgSrc(element.character),\n                alt: _ctx.displayName(element.character),\n                class: \"character\"\n              }, null, 8, _hoisted_5),\n              _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.displayName(element.character)), 1)\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_7, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              \"onUpdate:modelValue\": ($event: any) => ((element.energyCost) = $event)\n            }, null, 8, _hoisted_8), [\n              [_vModelText, element.energyCost]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_9, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": ($event: any) => ((element.constellation) = $event),\n              onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n            }, [\n              (_openBlock(), _createElementBlock(_Fragment, null, _renderList([0, 1, 2, 3, 4, 5, 6], (constellation) => {\n                return _createElementVNode(\"option\", {\n                  key: constellation,\n                  value: constellation\n                }, _toDisplayString('C' + constellation), 9, _hoisted_11)\n              }), 64))\n            ], 40, _hoisted_10), [\n              [_vModelSelect, element.constellation]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_12, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass('weapon' + _ctx.bgColorClass(index))\n          }, [\n            _createElementVNode(\"img\", {\n              src: _ctx.weaponImgSrc(element.character, element.currentWeapon),\n              alt: _ctx.displayName(element.currentWeapon),\n              class: \"input-item-weapon\"\n            }, null, 8, _hoisted_13),\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": ($event: any) => ((element.weaponRefine) = $event),\n              onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n            }, [\n              (_openBlock(), _createElementBlock(_Fragment, null, _renderList([1, 2, 3, 4, 5], (refine) => {\n                return _createElementVNode(\"option\", {\n                  key: refine,\n                  value: refine\n                }, _toDisplayString('R' + refine), 9, _hoisted_15)\n              }), 64))\n            ], 40, _hoisted_14), [\n              [_vModelSelect, element.weaponRefine]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", _hoisted_16, [\n        _createElementVNode(\"th\", _hoisted_17, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.energyRechargeGls, (value, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, _toDisplayString(value + '%'), 3))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_18, _toDisplayString(_ctx.displayName('(%)')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              \"onUpdate:modelValue\": ($event: any) => ((element.onField) = $event),\n              min: \"0\",\n              max: \"100\",\n              onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n            }, null, 40, _hoisted_19), [\n              [_vModelText, element.onField]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", _hoisted_20, [\n        _createElementVNode(\"th\", _hoisted_21, _toDisplayString(_ctx.displayName('')), 1),\n        _createElementVNode(\"th\", _hoisted_22, _toDisplayString(_ctx.displayName('')), 1)\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticleEnemy, (row, rowIndex) => {\n        return (_openBlock(), _createElementBlock(\"tr\", {\n          key: rowIndex,\n          class: _normalizeClass(_ctx.bgColorClass2(row))\n        }, [\n          _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 10) / 10), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n            return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_23), [\n                [_vModelText, row.currentValues[columnIndex]]\n              ])\n            ]))\n          }), 128))\n        ], 2))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowParticle, (row, rowIndex) => {\n        return (_openBlock(), _createElementBlock(\"tr\", {\n          key: rowIndex,\n          class: _normalizeClass(_ctx.bgColorClass2(row))\n        }, [\n          _createElementVNode(\"th\", _hoisted_24, [\n            _createElementVNode(\"span\", null, [\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc1(row),\n                alt: _ctx.displayName(row.character),\n                class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n              }, null, 10, _hoisted_25),\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc2(row),\n                alt: _ctx.displayName(row.triggerName),\n                class: \"input-item\"\n              }, null, 8, _hoisted_26)\n            ]),\n            _createElementVNode(\"span\", _hoisted_27, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n          ]),\n          _createElementVNode(\"td\", null, _toDisplayString(Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 100) / 100), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n            return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_28), [\n                [_vModelText, row.currentValues[columnIndex]]\n              ])\n            ]))\n          }), 128))\n        ], 2))\n      }), 128)),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_29, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.particleRecharges, (value, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: \"result\"\n          }, _toDisplayString(value), 1))\n        }), 128))\n      ]),\n      (_ctx.inputRowEnergy.length)\n        ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_30, [\n            _createElementVNode(\"th\", _hoisted_31, _toDisplayString(_ctx.displayName('')), 1),\n            _createElementVNode(\"th\", _hoisted_32, _toDisplayString(_ctx.displayName('')), 1)\n          ]))\n        : _createCommentVNode(\"\", true),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputRowEnergy, (row, rowIndex) => {\n        return (_openBlock(), _createElementBlock(\"tr\", {\n          key: rowIndex,\n          class: _normalizeClass(_ctx.bgColorClass2(row))\n        }, [\n          _createElementVNode(\"th\", _hoisted_33, [\n            _createElementVNode(\"span\", null, [\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc1(row),\n                alt: _ctx.displayName(row.character),\n                class: _normalizeClass(_ctx.rowImgSrc1Class(row))\n              }, null, 10, _hoisted_34),\n              _createElementVNode(\"img\", {\n                src: _ctx.rowImgSrc2(row),\n                alt: _ctx.displayName(row.triggerName),\n                class: \"input-item\"\n              }, null, 8, _hoisted_35)\n            ]),\n            _createElementVNode(\"span\", _hoisted_36, _toDisplayString(_ctx.displayName(row.character) + ' ' + _ctx.displayName(_ctx.triggerName(row))), 1)\n          ]),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: row.currentValues.length }, (_, i) => i), (columnIndex) => {\n            return (_openBlock(), _createElementBlock(\"td\", { key: columnIndex }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((row.currentValues[columnIndex]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_37), [\n                [_vModelText, row.currentValues[columnIndex]]\n              ])\n            ]))\n          }), 128))\n        ], 2))\n      }), 128)),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_38, _toDisplayString(_ctx.displayName('()')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Array.from({ length: _ctx.calculatorInput.length }, (_, i) => i), (index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              \"onUpdate:modelValue\": ($event: any) => ((_ctx.burstCounts[index]) = $event),\n              min: \"0\"\n            }, null, 8, _hoisted_39), [\n              [_vModelText, _ctx.burstCounts[index]]\n            ])\n          ], 2))\n        }), 128))\n      ]),\n      _createElementVNode(\"tr\", null, [\n        _createElementVNode(\"th\", _hoisted_40, _toDisplayString(_ctx.displayName('')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.calculatorInput, (element, index) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: index,\n            class: _normalizeClass(_ctx.bgColorClass(index))\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(element.replaceWeapons, (weapon, weaponIndex) => {\n              return (_openBlock(), _createElementBlock(\"span\", {\n                key: weaponIndex,\n                class: \"with-tooltip\"\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.replaceWeaponImgSrc(element, weapon),\n                  alt: _ctx.displayName(weapon),\n                  class: _normalizeClass('input-item-weapon' + _ctx.replaceWeaponClass(element, weapon)),\n                  onClick: ($event: any) => (_ctx.replaceWeaponOnClick(element, weapon))\n                }, null, 10, _hoisted_41),\n                _createElementVNode(\"span\", _hoisted_42, _toDisplayString(_ctx.displayName(weapon)), 1)\n              ]))\n            }), 128))\n          ], 2))\n        }), 128))\n      ])\n    ]),\n    _hoisted_43,\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.displayName('()')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"number\",\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.combatLength) = $event)),\n          min: \"1\",\n          onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.inputOnChange && _ctx.inputOnChange(...args)))\n        }, null, 544), [\n          [_vModelText, _ctx.combatLength]\n        ])\n      ]),\n      _createElementVNode(\"table\", _hoisted_44, [\n        _createElementVNode(\"caption\", {\n          onClick: _cache[7] || (_cache[7] = ($event: any) => (_ctx.isOpenSupplyFromEnemy = !_ctx.isOpenSupplyFromEnemy))\n        }, _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+') + \" \" + _toDisplayString(_ctx.displayName('')) + \" \" + _toDisplayString(_ctx.isOpenSupplyFromEnemy ? '-' : '+'), 1),\n        _createElementVNode(\"tr\", null, [\n          _hoisted_45,\n          _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName('')), 1)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.supplyFromEnemy, (element, index) => {\n          return _withDirectives((_openBlock(), _createElementBlock(\"tr\", { key: index }, [\n            _createElementVNode(\"th\", null, _toDisplayString(_ctx.displayName(element[0])), 1),\n            _createElementVNode(\"td\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element[1]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_46), [\n                [_vModelText, element[1]]\n              ])\n            ]),\n            _createElementVNode(\"td\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": ($event: any) => ((element[2]) = $event),\n                min: \"0\"\n              }, null, 8, _hoisted_47), [\n                [_vModelText, element[2]]\n              ])\n            ])\n          ])), [\n            [_vShow, _ctx.isOpenSupplyFromEnemy || element[1] || element[2]]\n          ])\n        }), 128))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_48, [\n      _hoisted_49,\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.messages, (message, index) => {\n        return (_openBlock(), _createElementBlock(\"p\", { key: index }, [\n          _createElementVNode(\"span\", _hoisted_50, _toDisplayString(message[0]), 1),\n          _createTextVNode(\"  \"),\n          _createElementVNode(\"span\", null, _toDisplayString(message[1]), 1),\n          (message[0] || message[1])\n            ? (_openBlock(), _createElementBlock(\"br\", _hoisted_51))\n            : _createCommentVNode(\"\", true),\n          _createTextVNode(\"  \" + _toDisplayString(message[2]), 1)\n        ]))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_52, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            class: \"hidden\",\n            type: \"checkbox\",\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_ctx.isShowUsage) = $event)),\n            id: \"show-usage-toggle\"\n          }, null, 512), [\n            [_vModelCheckbox, _ctx.isShowUsage]\n          ]),\n          _createElementVNode(\"label\", _hoisted_53, _toDisplayString(_ctx.displayName('')), 1)\n        ]),\n        _withDirectives(_createElementVNode(\"div\", _hoisted_54, [\n          _createElementVNode(\"div\", _hoisted_55, _toDisplayString(_ctx.displayName('')), 1),\n          _hoisted_56,\n          _createElementVNode(\"div\", _hoisted_57, _toDisplayString(_ctx.displayName('')), 1),\n          _createElementVNode(\"ol\", null, [\n            _hoisted_58,\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\"  \"),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_DECREMENT_IN_BURST, (character, index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character)), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\"1 \"),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_UNTIL_MAP.entries(), ([character, untilMap], index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character) + ' : ' + _ctx.actionName('E') + '' +\r\n                                        Array.from(untilMap.entries())\r\n                                            .map(value => value[0]\r\n                                                .map(action => _ctx.actionName(action)).join(_ctx.displayName(''))\r\n                                                + '' + value[1] + _ctx.displayName('')).join(_ctx.displayName(''))), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\" \"),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_E_DELAY_MAP.entries(), ([character, delayArr], index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character) + ' : ' + _ctx.actionName('E') + '' +\r\n                                        delayArr.map(action => _ctx.actionName(action)).join(_ctx.displayName(''))), 1))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"li\", null, [\n              _createTextVNode(\"0 \"),\n              _createElementVNode(\"ul\", null, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.CHARACTER_Q_NOT_RECHARGEABLE, (character, index) => {\n                  return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(_ctx.displayName(character)), 1))\n                }), 128))\n              ])\n            ]),\n            _hoisted_67\n          ])\n        ], 512), [\n          [_vShow, _ctx.isShowUsage]\n        ])\n      ])\n    ])\n  ]))\n}","<template>\r\n    <div class=\"er-calculator\">\r\n        <div>\r\n            <label>{{ displayName('()') }}\r\n                <input type=\"number\" v-model=\"rotationLength\" min=\"10\" max=\"180\" @change=\"inputOnChange\">\r\n            </label>\r\n        </div>\r\n        <table class=\"er-calculator\">\r\n            <tr>\r\n                <th colspan=\"2\"></th>\r\n                <td v-for=\"(element, index) in  calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                    <div class=\"with-tooltip\">\r\n                        <img :src=\"characterImgSrc(element.character)\" :alt=\"displayName(element.character)\"\r\n                            class=\"character\">\r\n                        <span class=\"tooltip\">{{ displayName(element.character) }}</span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th colspan=\"2\">{{ displayName('') }}</th>\r\n                <td v-for=\"(element, index) in  calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                    <input type=\"number\" v-model=\"element.energyCost\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th colspan=\"2\">{{ displayName('') }}</th>\r\n                <td v-for=\"(element, index) in  calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                    <select v-model=\"element.constellation\" @change=\"inputOnChange\">\r\n                        <option v-for=\"constellation in [0, 1, 2, 3, 4, 5, 6]\" :key=\"constellation\" :value=\"constellation\">\r\n                            {{ 'C' + constellation }}\r\n                        </option>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th colspan=\"2\">{{ displayName('') }}</th>\r\n                <td v-for=\"(element, index) in  calculatorInput\" :key=\"index\" :class=\"'weapon' + bgColorClass(index)\">\r\n                    <img :src=\"weaponImgSrc(element.character, element.currentWeapon)\"\r\n                        :alt=\"displayName(element.currentWeapon)\" class=\"input-item-weapon\">\r\n                    <select v-model=\"element.weaponRefine\" @change=\"inputOnChange\">\r\n                        <option v-for=\"refine in [1, 2, 3, 4, 5]\" :key=\"refine\" :value=\"refine\">\r\n                            {{ 'R' + refine }}\r\n                        </option>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            <tr class=\"result-row\">\r\n                <th colspan=\"2\">{{ displayName('') }}</th>\r\n                <td v-for=\"(value, index) in energyRechargeGls\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                    {{ value + '%' }}\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th colspan=\"2\">{{ displayName('(%)') }}</th>\r\n                <td v-for=\"(element, index) in  calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                    <input type=\"number\" v-model=\"element.onField\" min=\"0\" max=\"100\" @change=\"inputOnChange\">\r\n                </td>\r\n            </tr>\r\n            <tr class=\"label-row\">\r\n                <th colspan=\"2\">{{ displayName('') }}</th>\r\n                <th colspan=\"4\">{{ displayName('') }}</th>\r\n            </tr>\r\n            <tr v-for=\"(row, rowIndex) in  inputRowParticleEnemy\" :key=\"rowIndex\" :class=\"bgColorClass2(row)\">\r\n                <th>\r\n                    {{ displayName('') }}\r\n                </th>\r\n                <td>{{ Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 10) / 10 }}</td>\r\n                <td v-for=\"columnIndex in Array.from({ length: row.currentValues.length }, (_, i) => i)\" :key=\"columnIndex\">\r\n                    <input type=\"number\" v-model=\"row.currentValues[columnIndex]\" min=\"0\">\r\n                </td>\r\n            </tr>\r\n            <tr v-for=\"(row, rowIndex) in inputRowParticle\" :key=\"rowIndex\" :class=\"bgColorClass2(row)\">\r\n                <th class=\"with-tooltip\">\r\n                    <span>\r\n                        <img :src=\"rowImgSrc1(row)\" :alt=\"displayName(row.character)\" :class=\"rowImgSrc1Class(row)\">\r\n                        <img :src=\"rowImgSrc2(row)\" :alt=\"displayName(row.triggerName)\" class=\"input-item\">\r\n                    </span>\r\n                    <span class=\"tooltip\">{{ displayName(row.character) + ' ' + displayName(triggerName(row)) }}</span>\r\n                </th>\r\n                <td>{{ Math.round(row.currentValues.reduce((p, c) => p + c, 0) * 100) / 100 }}</td>\r\n                <td v-for=\"columnIndex in Array.from({ length: row.currentValues.length }, (_, i) => i)\" :key=\"columnIndex\">\r\n                    <input type=\"number\" v-model=\"row.currentValues[columnIndex]\" min=\"0\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th colspan=\"2\">{{ displayName('') }}</th>\r\n                <td v-for=\"(value, index) in particleRecharges\" :key=\"index\" class=\"result\">\r\n                    {{ value }}\r\n                </td>\r\n            </tr>\r\n            <tr class=\"label-row\" v-if=\"inputRowEnergy.length\">\r\n                <th colspan=\"2\">{{ displayName('') }}</th>\r\n                <th colspan=\"4\">{{ displayName('') }}</th>\r\n            </tr>\r\n            <tr v-for=\"(row, rowIndex) in inputRowEnergy\" :key=\"rowIndex\" :class=\"bgColorClass2(row)\">\r\n                <th colspan=\"2\" class=\"with-tooltip\">\r\n                    <span>\r\n                        <img :src=\"rowImgSrc1(row)\" :alt=\"displayName(row.character)\" :class=\"rowImgSrc1Class(row)\">\r\n                        <img :src=\"rowImgSrc2(row)\" :alt=\"displayName(row.triggerName)\" class=\"input-item\">\r\n                    </span>\r\n                    <span class=\"tooltip\">{{ displayName(row.character) + ' ' + displayName(triggerName(row)) }}</span>\r\n                </th>\r\n                <td v-for=\"columnIndex in Array.from({ length: row.currentValues.length }, (_, i) => i)\" :key=\"columnIndex\">\r\n                    <input type=\"number\" v-model=\"row.currentValues[columnIndex]\" min=\"0\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th colspan=\"2\">{{ displayName('()') }}</th>\r\n                <td v-for=\"index in Array.from({ length: calculatorInput.length }, (_, i) => i)\" :key=\"index\"\r\n                    :class=\"bgColorClass(index)\">\r\n                    <input type=\"number\" v-model=\"burstCounts[index]\" min=\"0\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <th colspan=\"2\">{{ displayName('') }}</th>\r\n                <td v-for=\"(element, index) in calculatorInput\" :key=\"index\" :class=\"bgColorClass(index)\">\r\n                    <span v-for=\"(weapon, weaponIndex) in element.replaceWeapons\" :key=\"weaponIndex\" class=\"with-tooltip\">\r\n                        <img :src=\"replaceWeaponImgSrc(element, weapon)\" :alt=\"displayName(weapon)\"\r\n                            :class=\"'input-item-weapon' + replaceWeaponClass(element, weapon)\"\r\n                            @click=\"replaceWeaponOnClick(element, weapon)\">\r\n                        <span class=\"tooltip\">{{ displayName(weapon) }}</span>\r\n                    </span>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        <br />\r\n        <div>\r\n            <label>{{ displayName('()') }}\r\n                <input type=\"number\" v-model=\"combatLength\" min=\"1\" @change=\"inputOnChange\">\r\n            </label>\r\n            <table class=\"supply-from-enemy\">\r\n                <caption @click=\"isOpenSupplyFromEnemy = !isOpenSupplyFromEnemy\">\r\n                    {{ isOpenSupplyFromEnemy ? '-' : '+' }}\r\n                    {{ displayName('') }}\r\n                    {{ isOpenSupplyFromEnemy ? '-' : '+' }}\r\n                </caption>\r\n                <tr>\r\n                    <th></th>\r\n                    <th>{{ displayName('') }} </th>\r\n                    <th>{{ displayName('') }} </th>\r\n                </tr>\r\n                <tr v-for=\"(element, index) in supplyFromEnemy\" :key=\"index\"\r\n                    v-show=\"isOpenSupplyFromEnemy || element[1] || element[2]\">\r\n                    <th>{{ displayName(element[0]) }}</th>\r\n                    <td><input type=\"number\" v-model=\"element[1]\" min=\"0\"></td>\r\n                    <td><input type=\"number\" v-model=\"element[2]\" min=\"0\"></td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <div class=\"message-area\">\r\n            <hr />\r\n            <p v-for=\"(message, index) in messages\" :key=\"index\">\r\n                <span class=\"character\">{{ message[0] }}</span> &nbsp;\r\n                <span>{{ message[1] }}</span>\r\n                <br v-if=\"message[0] || message[1]\" />\r\n                &nbsp; {{ message[2] }}\r\n            </p>\r\n        </div>\r\n        <div class=\"message-area\">\r\n            <fieldset>\r\n                <legend>\r\n                    <input class=\"hidden\" type=\"checkbox\" v-model=\"isShowUsage\" id=\"show-usage-toggle\">\r\n                    <label class=\"toggle-switch\" for=\"show-usage-toggle\">\r\n                        {{ displayName('') }}\r\n                    </label>\r\n                </legend>\r\n                <div v-show=\"isShowUsage\" style=\"text-align: left;\">\r\n                    <div style=\"text-align: center;\">{{ displayName('') }}</div>\r\n                    <ol>\r\n                        <li> </li>\r\n                        <li>HP</li>\r\n                        <li>1</li>\r\n                        <li>\r\n                            8<br>\r\n                        </li>\r\n                    </ol>\r\n                    <div style=\"text-align: center;\">{{ displayName('') }}</div>\r\n                    <ol>\r\n                        <li><br>\r\n                            \r\n                            \r\n                            20\r\n                        </li>\r\n                        <li><br>\r\n                            \r\n                            \r\n                        </li>\r\n                        <li><br>\r\n                            \r\n                        </li>\r\n                        <li> <br>\r\n                            \r\n                        </li>\r\n                        <li> <br>\r\n                            \r\n                            \r\n                        </li>\r\n                        <li> <br>\r\n                            ()\r\n                        </li>\r\n                        <li><br>\r\n                            5\r\n                            0\r\n                        </li>\r\n                        <li><br>\r\n                            (%)\r\n                            \r\n                            1\r\n                        </li>\r\n                        <li><br>\r\n                            \r\n                            \r\n                        </li>\r\n                        <li>\r\n                            \r\n                            <ul>\r\n                                <li v-for=\"(character, index) in CHARACTER_E_DECREMENT_IN_BURST\" :key=\"index\">\r\n                                    {{ displayName(character) }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>1\r\n                            <ul>\r\n                                <li v-for=\"([character, untilMap], index) in CHARACTER_E_UNTIL_MAP.entries()\" :key=\"index\">\r\n                                    {{ displayName(character) + ' : ' + actionName('E') + '' +\r\n                                        Array.from(untilMap.entries())\r\n                                            .map(value => value[0]\r\n                                                .map(action => actionName(action)).join(displayName(''))\r\n                                                + '' + value[1] + displayName('')).join(displayName(''))\r\n                                    }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>\r\n                            <ul>\r\n                                <li v-for=\"([character, delayArr], index) in CHARACTER_E_DELAY_MAP.entries()\" :key=\"index\">\r\n                                    {{ displayName(character) + ' : ' + actionName('E') + '' +\r\n                                        delayArr.map(action => actionName(action)).join(displayName(''))\r\n                                    }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>0\r\n                            <ul>\r\n                                <li v-for=\"(character, index) in CHARACTER_Q_NOT_RECHARGEABLE\" :key=\"index\">\r\n                                    {{ displayName(character) }}\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li>\r\n                            <ul>\r\n                                <li> : 9</li>\r\n                                <li> : 4()</li>\r\n                                <li> : 6</li>\r\n                                <li> : 3</li>\r\n                            </ul>\r\n                        </li>\r\n                    </ol>\r\n                </div>\r\n            </fieldset>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport _ from \"lodash\";\r\nimport { computed, defineComponent, onMounted, PropType, reactive, ref, watch } from \"vue\";\r\nimport CompositionFunction from \"@/components/CompositionFunction.vue\";\r\nimport { ARTIFACT_SET_MASTER, CHARACTER_MASTER, ELEMENT_BG_COLOR_CLASS, ELEMENT_IMG_SRC, IMG_SRC_DUMMY, TArtifactSetKey, WEAPON_IMG_SRC } from \"@/master\";\r\nimport { CHARACTER_E_DELAY_MAP, CHARACTER_E_UNTIL_MAP, CHARACTER_Q_NOT_RECHARGEABLE, getCooltimeFromInfo, getDurationFromInfo, getElementalSkillActions, getParticleInfo } from \"@/particlemaster\";\r\nimport { getCharacterDetail, getCharacterMaster, getWeaponMaster, NUMBER_OF_MEMBERS, setupCharacterDetailMap, TConstellation, TTeam, TTeamMemberResult } from \"./team\";\r\nimport { getOnFieldRate, TERParticle, RECHARGE_PARTICLE_SKILL, RECHARGE_PARTICLE_PASSIVE, RECHARGE_PARTICLE_CONSTELLATION, TEREnergy, RECHARGE_ENERGY_SKILL, RECHARGE_ENERGY_BURST, RECHARGE_ENERGY_PASSIVE, RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_ENEMY, countQ, isRechargeKindParticle, isRechargeKindEnergy, RECHARGE_PARTICLE_RESONANCE, RECHARGE_PARTICLE_FAVONIUS, RECHARGE_ENERGY_WEAPON, RECHARGE_ENERGY_ARTIFACT, RECHARGE_ENERGY_ATTACK } from \"./ERCalculatorCommon\";\r\nimport { getEnergyByArtifact, getEnergyByAttack, getEnergyByCharacter, getEnergyByWeapon, getParticleByCharacter, getParticleByCharacterExtra, getParticleByResonance, getParticleByWeapon, splitNumToArrByOnFieldRate } from \"./ERCalculatorFunc\";\r\n\r\ntype TCalculatorInput = {\r\n    character: string,                  // \r\n    energyCost: number,                 //   40-90\r\n    constellation: number,              //  0-6\r\n    initialWeapon: string | undefined,  // \r\n    currentWeapon: string | undefined,  // \r\n    weaponRefine: number,               //  1-5\r\n    artifactSet4: string | undefined,   // 4\r\n    onField: number,                    // \r\n    replaceWeapons: string[],           //     \r\n}\r\n\r\ntype TCalculatorInputRow = {\r\n    character: string,          // \r\n    rechargeKind: string,       // \r\n    triggerName: string,        // ,,,\r\n    element: string,            // \r\n    initialValues: number[],    // \r\n    currentValues: number[],    // \r\n    unit: number,               // \r\n}\r\n\r\nexport default defineComponent({\r\n    name: \"ERCalculator\",\r\n    props: {\r\n        team: { type: Object as PropType<TTeam>, required: true },\r\n        teamMemberResult: { type: Object as PropType<TTeamMemberResult> },\r\n        constellations: { type: Object as PropType<TConstellation> },\r\n    },\r\n    setup(props) {\r\n        const { displayName } = CompositionFunction();\r\n        const calculatorInput = reactive([] as TCalculatorInput[]);\r\n        const inputRowParticle = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowEnergy = reactive([] as TCalculatorInputRow[]);\r\n        const inputRowParticleEnemy = reactive([] as TCalculatorInputRow[]);\r\n        const messages = reactive([] as string[][]);\r\n        const DEFAULT_ROTATION_LENGTH = 20;\r\n        const DEFAULT_COMBAT_LENGTH = 90;\r\n        const rotationLength = ref(DEFAULT_ROTATION_LENGTH); // \r\n        const combatLength = ref(DEFAULT_COMBAT_LENGTH);   // \r\n        const supplyFromEnemy = reactive([\r\n            ['', 3, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n            ['', 0, 0],\r\n        ] as [string, number, number][]);\r\n        const isOpenSupplyFromEnemy = ref(false);\r\n        const REPLACE_WEAPON_MAP = {\r\n            '': ['', ''],\r\n            '': ['', ''],\r\n            '': ['', '', ''],\r\n            '': [''],\r\n            '': ['', ''],\r\n        };\r\n        const isShowUsage = ref(false);\r\n\r\n        onMounted(() => {\r\n            setupCharacterDetailMap().then(() => {\r\n                updateRotationLength(props.team);\r\n                setupInput(props.team, props.teamMemberResult);\r\n            });\r\n        })\r\n\r\n        const watchCount = ref(0);\r\n        watch(() => _.cloneDeep(props), (newVal, oldVal) => {\r\n            updateRotationLength(newVal.team);\r\n            if (!_.isEqual(newVal.team.members, oldVal.team.members) || !_.isEqual(newVal.teamMemberResult, oldVal.teamMemberResult)) {\r\n                setupInput(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            } else {\r\n                setupInputRows(newVal.team, newVal.teamMemberResult);\r\n                watchCount.value++;\r\n            }\r\n        }, { deep: true })\r\n\r\n        function getConstellation(character: string, team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            if (teamMemberResult) {\r\n                const workArr = team.members.filter(member => member.name == character);\r\n                if (workArr.length) {\r\n                    return teamMemberResult[workArr[0].id]?.characterInput. ?? (props.constellations ? props.constellations[character] ?? 0 : 0);\r\n                }\r\n            }\r\n            return props.constellations ? props.constellations[character] ?? 0 : 0;\r\n        }\r\n\r\n        function updateRotationLength(team: TTeam) {\r\n            const memberNameArr = team.members.map(member => member.name);\r\n            const eLength = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            const qLength = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            if (team.rotation.length) {\r\n                for (let i = 0; i < team.rotation.length; i++) {\r\n                    const rotation = team.rotation[i];\r\n                    const memberIndex = memberNameArr.indexOf(rotation.member);\r\n                    if (memberIndex == -1) continue;\r\n                    if (rotation.action === 'Q' || rotation.action.startsWith('E')) {\r\n                        const characterDetail = getCharacterDetail(rotation.member);\r\n                        if (rotation.action === 'Q') {\r\n                            let ct = characterDetail?.. ?? 0;\r\n                            if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 2) {\r\n                                    ct *= 0.85;\r\n                                }\r\n                            } else if (memberNameArr.includes('') && rotation.member != '') {\r\n                                const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                if (constellation >= 6) {\r\n                                    ct -= 5;\r\n                                }\r\n                            }\r\n                            qLength[memberIndex] += ct;\r\n                        } else {\r\n                            const constellation = getConstellation(rotation.member, props.team, props.teamMemberResult);\r\n                            const particleInfo = getParticleInfo(rotation.member, rotation.action, constellation);\r\n                            let ct = 0;\r\n                            let duration = 0;\r\n                            if (particleInfo) {\r\n                                ct = getCooltimeFromInfo(particleInfo) ?? 0;\r\n                                duration = getDurationFromInfo(particleInfo);\r\n                                if (memberNameArr.includes('') && rotation.member != '') {\r\n                                    const constellation = getConstellation('', props.team, props.teamMemberResult);\r\n                                    if (constellation >= 2) {\r\n                                        ct *= 0.85;\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (ct > eLength[memberIndex] && ct > duration) {\r\n                                eLength[memberIndex] = ct;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let newLength = Math.max(...eLength, ...qLength);\r\n            if (newLength == 0) {\r\n                newLength = DEFAULT_ROTATION_LENGTH;\r\n            }\r\n            rotationLength.value = newLength;\r\n        }\r\n\r\n        function updateOnFields(team: TTeam, teamMemberResult?: TTeamMemberResult) {\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                calculatorInput[i].onField = onFields[i];\r\n            }\r\n        }\r\n\r\n        const setupInput = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            const newInput: TCalculatorInput[] = [];\r\n            const constellations = team.members.map(member => getConstellation(member.name, team, teamMemberResult));\r\n            const onFields = getOnFieldRate(team, rotationLength.value, team.rotation, constellations);\r\n            for (let i = 0; i < team.members.length; i++) {\r\n                const member = team.members[i];\r\n                const characterDetail = getCharacterDetail(member.name);\r\n                const constellation = constellations[i];\r\n                const memberResult = teamMemberResult ? teamMemberResult[member.id] : undefined;\r\n                const weapon = memberResult?.characterInput.weapon;\r\n                const weaponRefine = memberResult?.characterInput. ?? 1;\r\n                let artifactSet4 = undefined;\r\n                if (memberResult && memberResult.characterInput.artifactSets.length == 2) {\r\n                    artifactSet4 = memberResult.characterInput.artifactSets[0] == memberResult.characterInput.artifactSets[1] ? memberResult.characterInput.artifactSets[0] : undefined;\r\n                }\r\n                let replaceWeapons: string[] = [];\r\n                if (characterDetail) {\r\n                    replaceWeapons = REPLACE_WEAPON_MAP[characterDetail.];\r\n                }\r\n                newInput.push({\r\n                    character: member.name,\r\n                    energyCost: characterDetail?.. ?? 0,\r\n                    constellation: constellation,\r\n                    initialWeapon: weapon,\r\n                    currentWeapon: weapon,\r\n                    weaponRefine: weaponRefine,\r\n                    artifactSet4: artifactSet4,\r\n                    onField: onFields[i],\r\n                    replaceWeapons: replaceWeapons,\r\n                });\r\n            }\r\n            calculatorInput.splice(0, calculatorInput.length, ...newInput);\r\n\r\n            setupInputRows(team, teamMemberResult);\r\n        }\r\n\r\n        function pushInputRowParticle(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, particle: TERParticle) {\r\n            const initialValues = _.cloneDeep(particle[3]);\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(initialValues[i] * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: particle[0],\r\n                triggerName: particle[1],\r\n                element: particle[2],\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 1,\r\n            })\r\n            if (particle[4].length) {\r\n                particle[4].forEach(message => {\r\n                    let work = '';\r\n                    if (particle[0] === RECHARGE_PARTICLE_SKILL) {\r\n                        work = '';\r\n                    } else if (particle[0] === RECHARGE_PARTICLE_PASSIVE) {\r\n                        work = '';\r\n                    } else if (particle[0] === RECHARGE_PARTICLE_CONSTELLATION) {\r\n                        work = '';\r\n                        if (particle[1]) {\r\n                            work += ' ' + particle[1] + '';\r\n                        }\r\n                    } else {\r\n                        work = particle[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n        function pushInputRowEnergy(inputRows: TCalculatorInputRow[], newMessages: string[][], character: string, energy: TEREnergy) {\r\n            const initialValues = _.cloneDeep(energy[2]);\r\n            for (let i = 0; i < initialValues.length; i++) {\r\n                initialValues[i] = Math.round(initialValues[i] * 100) / 100;\r\n            }\r\n            inputRows.push({\r\n                character: character,\r\n                rechargeKind: energy[0],\r\n                triggerName: energy[1],\r\n                element: '',\r\n                initialValues: initialValues,\r\n                currentValues: _.cloneDeep(initialValues),\r\n                unit: 0.1,\r\n            })\r\n            if (energy[3].length) {\r\n                energy[3].forEach(message => {\r\n                    let work = '';\r\n                    if (energy[0] === RECHARGE_ENERGY_SKILL) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_BURST) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_PASSIVE) {\r\n                        work = '';\r\n                    } else if (energy[0] === RECHARGE_ENERGY_CONSTELLATION) {\r\n                        work = '';\r\n                        if (energy[1]) {\r\n                            work += ' ' + energy[1] + '';\r\n                        }\r\n                    } else {\r\n                        work = energy[1];\r\n                    }\r\n                    newMessages.push([character, work, message]);\r\n                })\r\n            }\r\n        }\r\n\r\n        const setupInputRows = (team: TTeam, teamMemberResult?: TTeamMemberResult) => {\r\n            updateOnFields(team, teamMemberResult);\r\n            const newInputRowPacticle1: TCalculatorInputRow[] = [];\r\n            const newInputRowPacticle2: TCalculatorInputRow[] = [];\r\n            const newInputRowEnergy: TCalculatorInputRow[] = [];\r\n            const newInputRowResonance: TCalculatorInputRow[] = [];\r\n            const newinputRowParticleEnemy: TCalculatorInputRow[] = [];\r\n            const newMessages: string[][] = [];\r\n            const onFields = calculatorInput.map(s => s.onField);\r\n            for (let i = 0; i < calculatorInput.length; i++) {\r\n                const character = calculatorInput[i].character;\r\n                if (!character) continue;\r\n                const constellation = calculatorInput[i].constellation;\r\n                const weapon = calculatorInput[i].currentWeapon;\r\n                const weaponRefine = calculatorInput[i].weaponRefine;\r\n                const artifactSet4 = calculatorInput[i].artifactSet4;\r\n                // \r\n                [\r\n                    getParticleByCharacter(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                    getParticleByCharacterExtra(character, constellation, team, rotationLength.value, team.rotation, onFields),\r\n                ].forEach(result => {\r\n                    if (result) {\r\n                        result.forEach(entry => {\r\n                            pushInputRowParticle(newInputRowPacticle1, newMessages, character, entry);\r\n                        })\r\n                    }\r\n                })\r\n                // \r\n                const energyByCharacter = getEnergyByCharacter(character, constellation, team, rotationLength.value, team.rotation, teamMemberResult);\r\n                energyByCharacter.forEach(entry => {\r\n                    pushInputRowEnergy(newInputRowEnergy, newMessages, character, entry);\r\n                })\r\n                // \r\n                if (weapon) {\r\n                    // \r\n                    const particleByWeapon = getParticleByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation, onFields);\r\n                    if (particleByWeapon) {\r\n                        pushInputRowParticle(newInputRowPacticle2, newMessages, character, particleByWeapon);\r\n                    }\r\n                    // \r\n                    const energyByWeapon = getEnergyByWeapon(character, weapon, weaponRefine, team, rotationLength.value, team.rotation);\r\n                    if (energyByWeapon) {\r\n                        pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByWeapon);\r\n                    }\r\n                }\r\n                if (artifactSet4) {\r\n                    const energyByArtifact = getEnergyByArtifact(character, artifactSet4, team, rotationLength.value, team.rotation);\r\n                    if (energyByArtifact) {\r\n                        pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByArtifact);\r\n                    }\r\n                }\r\n                // \r\n                const energyByAttack = getEnergyByAttack(character, team, rotationLength.value, team.rotation);\r\n                if (energyByAttack) {\r\n                    pushInputRowEnergy(newInputRowEnergy, newMessages, character, energyByAttack);\r\n                }\r\n            }\r\n            // \r\n            const particleByResonance = getParticleByResonance(team, rotationLength.value, team.rotation, onFields);\r\n            if (particleByResonance) {\r\n                pushInputRowParticle(newInputRowResonance, newMessages, '', particleByResonance);\r\n            }\r\n            // \r\n            supplyFromEnemy.filter(s => s[1] || s[2]).forEach(entry => {\r\n                const num = (entry[1] * 3 + entry[2]) * rotationLength.value / combatLength.value; // 3\r\n                const initialValues = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                splitNumToArrByOnFieldRate(initialValues, num, team, onFields);\r\n                pushInputRowParticle(newinputRowParticleEnemy, newMessages, '', [RECHARGE_PARTICLE_ENEMY, '', entry[0], initialValues, []]);\r\n            })\r\n            inputRowParticle.splice(0, inputRowParticle.length, ...newInputRowPacticle1, ...newInputRowPacticle2, ...newInputRowResonance);\r\n            inputRowEnergy.splice(0, inputRowEnergy.length, ...newInputRowEnergy);\r\n            inputRowParticleEnemy.splice(0, inputRowParticleEnemy.length, ...newinputRowParticleEnemy);\r\n            messages.splice(0, messages.length, ...newMessages);\r\n        }\r\n\r\n        /** () */\r\n        const burstCounts = computed(() => {\r\n            const result: { [key: number]: number } = { 0: 1, 1: 1, 2: 1, 3: 1 };\r\n            if (props.team.rotation?.length) {\r\n                for (let i = 0; i < props.team.members.length; i++) {\r\n                    const member = props.team.members[i];\r\n                    if (member.name) {\r\n                        result[i] = countQ(member.name, props.team.rotation);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /** () */\r\n        const particleRecharges = computed(() => {\r\n            const result: number[] = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                const member = props.team.members[i];\r\n                if (!member.name) continue;\r\n                const characterMaster = getCharacterMaster(member.name);\r\n                const myElement = characterMaster?.;\r\n                if (!myElement) continue;\r\n                [inputRowParticle, inputRowParticleEnemy].forEach(input => {\r\n                    input.filter(s => isRechargeKindParticle(s.rechargeKind)).forEach(entry => {\r\n                        let energy = 0;\r\n                        for (let j = 0; j < entry.currentValues.length; j++) {\r\n                            if (j == i) {\r\n                                energy += entry.currentValues[j];\r\n                            } else {\r\n                                energy += entry.currentValues[j] * 0.6;\r\n                            }\r\n                        }\r\n                        if (entry.element == myElement) {\r\n                            energy *= 3;\r\n                        } else if (entry.element == '') {\r\n                            energy *= 2;\r\n                        }\r\n                        result[i] = Math.round((result[i] + energy) * 10) / 10;\r\n                    })\r\n                })\r\n            }\r\n            return result;\r\n        })\r\n\r\n        /**  */\r\n        const energyRechargeGls = computed(() => {\r\n            const result = _.fill(Array(NUMBER_OF_MEMBERS), 100);\r\n            for (let i = 0; i < props.team.members.length; i++) {\r\n                if (!props.team.members[i].name) continue;\r\n                let energyCost = calculatorInput[i]?.energyCost;\r\n                if (!energyCost) continue;\r\n                inputRowEnergy.filter(s => isRechargeKindEnergy(s.rechargeKind)).forEach(entry => {\r\n                    energyCost -= entry.currentValues[i];\r\n                })\r\n                const burstCount = burstCounts.value[i] > 0 ? burstCounts.value[i] : 1;\r\n                const particleEnergy = particleRecharges.value[i] / burstCount;\r\n                if (energyCost > 0 && particleEnergy > 0) {\r\n                    const er = Math.ceil(energyCost * 100 / particleEnergy);\r\n                    result[i] = Math.max(100, er);\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n        const CHARACTER_E_DECREMENT_IN_BURST = computed(() =>\r\n            Object.keys(CHARACTER_MASTER).filter(key => Object.keys(getElementalSkillActions(key)).filter(action => action.indexOf('burst') != -1).length > 0).sort());\r\n\r\n        const characterImgSrc = (character: string) => getCharacterMaster(character)?.icon_url ?? IMG_SRC_DUMMY;\r\n        const weaponImgSrc = (character: string, weapon?: string) => {\r\n            const characterMater = getCharacterMaster(character);\r\n            return weapon ? characterMater ? getWeaponMaster(characterMater., weapon)?.icon_url ?? IMG_SRC_DUMMY : IMG_SRC_DUMMY : IMG_SRC_DUMMY;\r\n        }\r\n        const replaceWeaponImgSrc = (input: TCalculatorInput, weapon: string) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (input.character && input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                const characterMaster = getCharacterMaster(input.character);\r\n                if (characterMaster) {\r\n                    result = getWeaponMaster(characterMaster., weapon)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else {\r\n                    result = getCharacterMaster(row.character)?.icon_url ?? IMG_SRC_DUMMY;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const rowImgSrc1Class = (row: TCalculatorInputRow) =>\r\n            (row.rechargeKind && row.rechargeKind == RECHARGE_PARTICLE_RESONANCE) ? 'input-item' : 'input-item-character';\r\n        const rowImgSrc2 = (row: TCalculatorInputRow) => {\r\n            let result = IMG_SRC_DUMMY;\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) { // \r\n                    result = (ELEMENT_IMG_SRC as any)[row.element] ?? IMG_SRC_DUMMY\r\n                } else if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) { // \r\n                    const characterDetail = getCharacterDetail(row.character);\r\n                    result = characterDetail?..icon_url ?? IMG_SRC_DUMMY;\r\n                } else if ([RECHARGE_ENERGY_PASSIVE, RECHARGE_PARTICLE_PASSIVE].includes(row.rechargeKind)) { // \r\n                    if (row.triggerName) {\r\n                        const characterDetail = getCharacterDetail(row.character);\r\n                        const workArr = characterDetail?..filter(obj => obj. == row.triggerName);\r\n                        result = workArr?.length ? workArr[0].icon_url ?? IMG_SRC_DUMMY : IMG_SRC_DUMMY;\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) { // \r\n                    if (row.triggerName) {\r\n                        const characterDetail = getCharacterDetail(row.character);\r\n                        const constellationObj = characterDetail?.[row.triggerName];\r\n                        result = constellationObj?.icon_url ?? IMG_SRC_DUMMY;\r\n                    }\r\n                } else if ([RECHARGE_PARTICLE_FAVONIUS, RECHARGE_ENERGY_WEAPON].includes(row.rechargeKind) && row.triggerName) { // \r\n                    const characterMater = getCharacterMaster(row.character);\r\n                    if (characterMater) {\r\n                        const weaponType = characterMater.;\r\n                        const weaponMaster = getWeaponMaster(weaponType, row.triggerName);\r\n                        if (weaponMaster) {\r\n                            result = weaponMaster.icon_url;\r\n                        }\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_ARTIFACT].includes(row.rechargeKind) && row.triggerName) { // \r\n                    const artifactSetMater = ARTIFACT_SET_MASTER[(row.triggerName as TArtifactSetKey)];\r\n                    if (artifactSetMater) {\r\n                        result = artifactSetMater.image;\r\n                    }\r\n                } else if ([RECHARGE_ENERGY_ATTACK].includes(row.rechargeKind)) { // \r\n                    const characterMaster = getCharacterMaster(row.character);\r\n                    if (characterMaster) {\r\n                        result = WEAPON_IMG_SRC[characterMaster.];\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const bgColorClass = (index: number) => {\r\n            const master = index < props.team.members.length ? getCharacterMaster(props.team.members[index].name) : undefined;\r\n            return ' ' + (master ? (ELEMENT_BG_COLOR_CLASS as any)[master.] : 'white');\r\n        }\r\n        const bgColorClass2 = (row: TCalculatorInputRow) =>\r\n            ' ' + (row.element ? (ELEMENT_BG_COLOR_CLASS as any)[row.element] : 'white');\r\n        const replaceWeaponClass = (input: TCalculatorInput, weapon: string) =>\r\n            input.currentWeapon == weapon ? ' disabled' : '';\r\n        const triggerName = (row: TCalculatorInputRow) => {\r\n            let result = '';\r\n            if (row.rechargeKind) {\r\n                if ([RECHARGE_ENERGY_SKILL, RECHARGE_PARTICLE_SKILL].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_BURST].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_PASSIVE, RECHARGE_PARTICLE_PASSIVE].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                } else if ([RECHARGE_ENERGY_CONSTELLATION, RECHARGE_PARTICLE_CONSTELLATION].includes(row.rechargeKind)) {\r\n                    result = ' ' + row.triggerName + '';\r\n                } else if ([RECHARGE_ENERGY_WEAPON, RECHARGE_PARTICLE_FAVONIUS].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_PARTICLE_RESONANCE].includes(row.rechargeKind)) {\r\n                    result = row.triggerName;\r\n                } else if ([RECHARGE_ENERGY_ATTACK].includes(row.rechargeKind)) {\r\n                    result = '';\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        const actionName = (action: string) => {\r\n            let result = '';\r\n            if (action.startsWith('N')) {\r\n                result = '';\r\n            } else if (action === 'C') {\r\n                result = '';\r\n            } else if (action === 'P') {\r\n                result = '';\r\n            } else if (action.startsWith('E')) {\r\n                result = '';\r\n            } else if (action === 'Q') {\r\n                result = '';\r\n            }\r\n            return result;\r\n        }\r\n\r\n        const inputOnChange = () => {\r\n            setupInputRows(props.team, props.teamMemberResult);\r\n        }\r\n\r\n        const replaceWeaponOnClick = (input: TCalculatorInput, weapon: string) => {\r\n            if (input.replaceWeapons.length && input.replaceWeapons.includes(weapon)) {\r\n                if (input.currentWeapon == weapon) {\r\n                    input.currentWeapon = input.initialWeapon;\r\n                } else {\r\n                    input.currentWeapon = weapon;\r\n                }\r\n                inputOnChange();\r\n            }\r\n        }\r\n\r\n        const resetInput = () => {\r\n            inputRowParticleEnemy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowParticle.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n            inputRowEnergy.forEach(inputRow => {\r\n                inputRow.currentValues.splice(0, inputRow.currentValues.length, ...inputRow.initialValues);\r\n            })\r\n        }\r\n\r\n        return {\r\n            displayName,\r\n\r\n            rotationLength,\r\n            combatLength,\r\n            supplyFromEnemy,\r\n            isOpenSupplyFromEnemy,\r\n            calculatorInput,\r\n            inputRowParticle,\r\n            inputRowEnergy,\r\n            inputRowParticleEnemy,\r\n            burstCounts,\r\n            messages,\r\n            CHARACTER_E_DECREMENT_IN_BURST,\r\n            CHARACTER_E_UNTIL_MAP,\r\n            CHARACTER_E_DELAY_MAP,\r\n            CHARACTER_Q_NOT_RECHARGEABLE,\r\n            actionName,\r\n            characterImgSrc,\r\n            weaponImgSrc,\r\n            replaceWeaponImgSrc,\r\n            rowImgSrc1,\r\n            rowImgSrc1Class,\r\n            rowImgSrc2,\r\n            bgColorClass,\r\n            bgColorClass2,\r\n            replaceWeaponClass,\r\n            particleRecharges,\r\n            energyRechargeGls,\r\n            triggerName,\r\n            isShowUsage,\r\n\r\n            inputOnChange,\r\n            replaceWeaponOnClick,\r\n            resetInput,\r\n        }\r\n    }\r\n});\r\n</script>\r\n<style scoped>\r\ntable {\r\n    margin: 5px auto;\r\n    background-color: white;\r\n    color: black;\r\n    border: double 4px white;\r\n    border-spacing: 0;\r\n    vertical-align: middle;\r\n}\r\n\r\ncaption {\r\n    vertical-align: middle;\r\n    background-color: white;\r\n    padding: 4px;\r\n}\r\n\r\ntr,\r\nth,\r\ntd {\r\n    border: solid 1px gray;\r\n}\r\n\r\nth,\r\ntd {\r\n    min-width: 35px;\r\n    height: 22px;\r\n}\r\n\r\nth {\r\n    font-size: 1.6rem;\r\n    font-weight: bold;\r\n    padding-left: 1px;\r\n    padding-right: 1px;\r\n    white-space: nowrap;\r\n}\r\n\r\ninput[type=\"number\"] {\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    padding: 0 0 0 4px;\r\n    max-width: 15rem;\r\n}\r\n\r\ntd select,\r\ntd input[type=\"number\"] {\r\n    width: calc(100% - 4px);\r\n    text-align: center;\r\n    padding-block: 0;\r\n    padding-inline: 0;\r\n    border: none;\r\n    background-color: transparent;\r\n}\r\n\r\nimg.character {\r\n    width: 60px;\r\n    height: 45px;\r\n    object-position: top;\r\n    object-fit: cover;\r\n}\r\n\r\nimg.input-item-character {\r\n    width: 30px;\r\n    height: 22px;\r\n    object-position: top;\r\n    object-fit: cover;\r\n}\r\n\r\nimg.input-item {\r\n    width: 20px;\r\n    height: 20px;\r\n    background-color: rgba(55, 55, 55, 0.2);\r\n    border-radius: 50%;\r\n}\r\n\r\nimg.input-item-weapon {\r\n    width: 20px;\r\n    height: 20px;\r\n}\r\n\r\nimg.disabled {\r\n    opacity: 0.3;\r\n    background-color: black;\r\n    border-radius: 5px;\r\n}\r\n\r\n.white {\r\n    background-color: whitesmoke;\r\n}\r\n\r\ntr.label-row {\r\n    background-color: silver;\r\n}\r\n\r\ntr.result-row th,\r\ntr.result-row td {\r\n    border-top: 2px solid yellow;\r\n    border-bottom: 2px solid yellow;\r\n    font-weight: bold;\r\n}\r\n\r\ntd.weapon {\r\n    position: relative;\r\n}\r\n\r\ntd.weapon img.input-item-weapon {\r\n    border: none;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n\r\ncaption {\r\n    padding-top: 2px;\r\n    padding-bottom: 0;\r\n}\r\n\r\nol {\r\n    padding-left: 4rem;\r\n}\r\n\r\nol li {\r\n    margin-bottom: 1rem;\r\n}\r\n\r\nul {\r\n    padding-left: 3rem;\r\n}\r\n\r\nul li {\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\ndiv.message-area {\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    padding-left: 1rem;\r\n    padding-right: 1rem;\r\n    max-width: 120rem;\r\n    text-align: left;\r\n}\r\n\r\nspan.character {\r\n    font-weight: bold;\r\n    color: yellow;\r\n}\r\n\r\n.message-area fieldset {\r\n    text-align: center;\r\n}\r\n\r\n.message-area fieldset legend label {\r\n    width: 50rem;\r\n}\r\n</style>","import { CHARACTER_E_UNTIL_MAP, getParticleInfo, getDurationFromInfo, getReceiveTypeFromInfo, SP_SELF } from \"@/particlemaster\";\r\nimport _ from \"lodash\";\r\nimport { TActionItem, TTeam, NUMBER_OF_MEMBERS, getCharacterMaster, TTeamMemberResult, TMember, getDefaultMemberResult, getCharacterDetail, getNormalAttackDan } from \"./team\";\r\n\r\nexport const RECHARGE_ENERGY_SKILL = \"01\";              // \r\nexport const RECHARGE_ENERGY_BURST = \"02\";              // \r\nexport const RECHARGE_ENERGY_PASSIVE = \"03\";            // \r\nexport const RECHARGE_ENERGY_CONSTELLATION = \"04\";      // \r\nexport const RECHARGE_ENERGY_ATTACK = \"05\";             // \r\nexport const RECHARGE_ENERGY_WEAPON = \"06\";             // \r\nexport const RECHARGE_ENERGY_ARTIFACT = \"07\";           // \r\nexport const RECHARGE_PARTICLE_SKILL = \"11\";            // \r\nexport const RECHARGE_PARTICLE_PASSIVE = \"13\";          // \r\nexport const RECHARGE_PARTICLE_CONSTELLATION = \"14\";    // \r\nexport const RECHARGE_PARTICLE_FAVONIUS = \"16\";         // \r\nexport const RECHARGE_PARTICLE_RESONANCE = \"18\";        // \r\nexport const RECHARGE_PARTICLE_ENEMY = \"19\";            // \r\n\r\nexport const ATTACK_ENERGY_COUNT_OBJ = {\r\n    '': 4.52,     // 10% + 5% * n\r\n    '': 4.66,     // 0% + 10% * n\r\n    '': 6.95,   // 0% + 4% * n\r\n    '': 6.29,         // 0% + 5% * n\r\n    '': 4.66,       // 0% + 10% * n\r\n}\r\n\r\nconst NORMAL_ATTACK_LENGTH_OBJ = {\r\n    '': 0.4,\r\n    '': 0.8,\r\n    '': 0.4,\r\n    '': 0.6,\r\n    '': 0.6,\r\n}\r\n\r\nconst ACTION_LENGTH_MAP = new Map<string, Map<string, number>>();\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['E.Press', 1.5], ['E.Hold', 2]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['C', 0.8]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['C', 3]]));\r\nACTION_LENGTH_MAP.set('', new Map<string, number>([['E.Hold', 2]]));\r\n\r\n// rechargeKind, triggerName, energies[], messages[]\r\nexport type TEREnergy = [string, string, number[], string[]];\r\n// rechargeKind, triggerName, element, particles[], messages[]\r\nexport type TERParticle = [string, string, string, number[], string[]];\r\n\r\nexport function isRechargeKindEnergy(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('0') : false;\r\n}\r\n\r\nexport function isRechargeKindParticle(rechargeKind: string) {\r\n    return rechargeKind ? rechargeKind.startsWith('1') : false;\r\n}\r\n\r\n/**  */\r\nexport function countN(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (rotation.action === 'Q') {\r\n                        isQing = true;\r\n                    } else if (rotation.action.startsWith('N') && isBursting == isQing) {\r\n                        result += rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2));\r\n                    }\r\n                } else {\r\n                    isQing = false;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith('N')).map(rotation => rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2))).reduce((p, c) => p + c, 0);\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countC(character?: string, rotationList?: TActionItem[], isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character && isBursting !== undefined) {\r\n            let isQing = false;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.action === 'Q') {\r\n                    isQing = true;\r\n                } else if (rotation.action.includes('C') && isBursting == isQing) {\r\n                    result++;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.includes('C')).length;\r\n        }\r\n    } else {\r\n        return 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countE(character?: string, rotationList?: TActionItem[], action = 'E', isBursting?: boolean) {\r\n    let result = 0;\r\n    if (rotationList?.length) {\r\n        if (character) {\r\n            let isQing = false;\r\n            let untilMap: Map<string[], number> | undefined;\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character) {\r\n                    if (untilMap && untilMap.size > 0) {\r\n                        for (const [key, value] of untilMap.entries()) {\r\n                            if (key.filter(untilAction => rotation.action.indexOf(untilAction) != -1).length) {\r\n                                let untilCount = value;\r\n                                if (untilCount) {\r\n                                    untilCount -= rotation.action.startsWith('N') ? rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2)) : 1;\r\n                                    if (untilCount > 0) {\r\n                                        untilMap.set(key, untilCount);\r\n                                    } else {\r\n                                        untilMap.clear();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else if (rotation.action === 'Q') {\r\n                        isQing = true;\r\n                    } else if (rotation.action.startsWith(action)) {\r\n                        const workMap = CHARACTER_E_UNTIL_MAP.get(character);\r\n                        if (workMap && workMap.size > 0) {\r\n                            untilMap = _.cloneDeep(workMap);\r\n                        }\r\n                        result += (isBursting === undefined || isBursting == isQing) ? 1 : 0;\r\n                    }\r\n                } else {\r\n                    isQing = false;\r\n                }\r\n            }\r\n        } else {\r\n            result = rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action.startsWith(action)).length;\r\n        }\r\n    } else {\r\n        result = 1;\r\n    }\r\n    return result;\r\n}\r\n/**  */\r\nexport function countQ(character?: string, rotationList?: TActionItem[]) {\r\n    return rotationList?.length ?\r\n        rotationList.filter(rotation => (!character || rotation.member == character) && rotation.action === 'Q').length\r\n        : 1;\r\n}\r\n/** (%) */\r\nexport function getOnFieldRate(team: TTeam, rotationLength: number, rotationList: TActionItem[], constellations: number[]) {\r\n    const result = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const danArr = team.members.map(member => member.name ? getNormalAttackDan(member.name) : 0);\r\n    if (rotationList?.length) {\r\n        const lengthList = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        let length = 0;\r\n        let isNCPIgnoring = false;\r\n        let preRotation = undefined;\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (preRotation && rotation.member != preRotation.member) {\r\n                lengthList[memberNameArr.indexOf(preRotation.member)] += (length > 1 ? length : 1);\r\n                length = 0;\r\n                isNCPIgnoring = false;\r\n            }\r\n            preRotation = rotation;\r\n            const actionLength1 = ACTION_LENGTH_MAP.get(rotation.member);\r\n            if (actionLength1) {\r\n                const actionLength2 = actionLength1.get(rotation.action);\r\n                if (actionLength2 !== undefined) {\r\n                    length += actionLength2;\r\n                    continue;\r\n                }\r\n            }\r\n            const characterMaster = getCharacterMaster(rotation.member);\r\n            if (rotation.action === 'Q') {\r\n                length += 0.8;\r\n                if (characterMaster?. && characterMaster. === 5) {\r\n                    length += 0.4;\r\n                }\r\n            } else if (rotation.action === 'E.Hold') {\r\n                length += 1;\r\n            } else if (['E', 'E.Press'].includes(rotation.action)) {\r\n                length += 0.5;\r\n                const particleInfo = getParticleInfo(rotation.member, rotation.action, constellations[memberNameArr.indexOf(rotation.member)]);\r\n                const duration = getDurationFromInfo(particleInfo);\r\n                if (getReceiveTypeFromInfo(particleInfo) === SP_SELF && duration) {\r\n                    // \r\n                    length += duration;\r\n                    isNCPIgnoring = true;\r\n                }\r\n            } else if (!isNCPIgnoring) {\r\n                if (rotation.action.startsWith('N')) {\r\n                    const maxDan = danArr[memberNameArr.indexOf(preRotation.member)];\r\n                    const dan = rotation.action.length === 1 ? 1 : Number(rotation.action.substring(1, 2));\r\n                    if (characterMaster?.) {\r\n                        const unitLength = NORMAL_ATTACK_LENGTH_OBJ[characterMaster.];\r\n                        for (let j = 0; j < dan; j++) {\r\n                            if ((j / maxDan) < (2 / 3)) {\r\n                                length += unitLength * 0.8;\r\n                            } else {\r\n                                length += unitLength * 1.2;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        length += 0.6 * dan;\r\n                    }\r\n                    if (rotation.action.endsWith('C')) {\r\n                        length += 0.5;\r\n                    }\r\n                    length += 0.3;\r\n                } else if (rotation.action == 'C') {\r\n                    if (characterMaster?. === '') {   //  or \r\n                        length += 3;\r\n                    } else if (characterMaster?. === '') {    // \r\n                        length += 1.5;  //  1/2=1s/1.5s\r\n                    } else if (characterMaster?. === '') {\r\n                        length += 1;\r\n                    } else {    // for \r\n                        length += 1;\r\n                    }\r\n                } else if (rotation.action == 'P') {\r\n                    length += 1.5;\r\n                }\r\n            }\r\n        }\r\n        if (preRotation && length > 0) {\r\n            lengthList[memberNameArr.indexOf(preRotation.member)] += (length > 1 ? length : 1);\r\n        }\r\n        const multiple = Math.ceil(100 / rotationLength);\r\n        const lengthSum = _.sum(lengthList);\r\n        for (let i = 0; i < result.length; i++) {\r\n            if (lengthSum && i < lengthList.length) {\r\n                result[i] = Math.ceil(lengthList[i] / lengthSum * 100 / multiple) * multiple;\r\n            } else {\r\n                result[i] = 25;\r\n            }\r\n        }\r\n        const sumVal = _.sum(result);\r\n        if (sumVal > 100) {\r\n            const maxVal = _.max(result);\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (result[i] == maxVal) {\r\n                    result[i] -= sumVal - 100;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        const memberNum = memberNameArr.filter(name => name).length;\r\n        if (memberNum) {\r\n            const rate = 100 / memberNum;\r\n            for (let i = 0; i < result.length; i++) {\r\n                if (memberNameArr[i]) {\r\n                    result[i] = rate;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getMemberResult(character: string, members: TMember[], teamMemberResult?: TTeamMemberResult) {\r\n    let result = getDefaultMemberResult();\r\n    if (teamMemberResult) {\r\n        const memberArr = members.filter(member => member.name == character);\r\n        if (memberArr.length) {\r\n            result = teamMemberResult[memberArr[0].id];\r\n        }\r\n    } else {\r\n        const characterDetail = getCharacterDetail(character);\r\n        if (characterDetail?.) {\r\n            Object.keys(characterDetail.).forEach(key => {\r\n                result.statsInput.statsObj[key] += characterDetail.[key]['90'];\r\n            })\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getCharacterInputValue(character: string, members: TMember[], item: string, teamMemberResult?: TTeamMemberResult) {\r\n    return (getMemberResult(character, members, teamMemberResult).characterInput as any)[item];\r\n}\r\n\r\nexport function getStatsInputValue(character: string, members: TMember[], item: string, teamMemberResult?: TTeamMemberResult) {\r\n    return (getMemberResult(character, members, teamMemberResult).statsInput.statsObj as any)[item];\r\n}\r\n","import _ from \"lodash\";\r\nimport { TActionItem, TTeamMemberResult, NUMBER_OF_MEMBERS, getCharacterMaster, getCharacterDetail, TMember } from \"./team\";\r\nimport { countQ, RECHARGE_ENERGY_CONSTELLATION, RECHARGE_ENERGY_SKILL, RECHARGE_ENERGY_BURST, countE, countC, RECHARGE_ENERGY_PASSIVE, countN, getCharacterInputValue, getStatsInputValue, RECHARGE_PARTICLE_CONSTELLATION, RECHARGE_PARTICLE_PASSIVE, getMemberResult } from \"./ERCalculatorCommon\";\r\n\r\nexport type TCharacterEnergyRet = [string, string, number, number, number, number[], string[]];\r\nexport type TCharacterParticleRet = [string, string, string, number, number, number[], string[]];\r\n\r\nexport const CHARACTER_ENERGY_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        constellation: number,\r\n        members: TMember[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n        teamMemberResult?: TTeamMemberResult,\r\n    ) => TCharacterEnergyRet[]\r\n} = {\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '525',\r\n            ];\r\n            const myEnergy = 5 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            ' ',\r\n            '10%',\r\n        ];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            messages.push('35%+100%');\r\n        }\r\n        const skillLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = [3, 3, 3, 3.5, 3.5, 3.5, 4, 4, 4, 4, 4, 4, 4, 4, 4][skillLevel - 1] * (100 + (er / 10)) / 100;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_SKILL, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const messages2 = [\r\n            ' 0.51'\r\n        ];\r\n        const burstLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const somebodyEnergy = [0.8, 0.8, 0.8, 0.9, 0.9, 0.9, 1, 1, 1, 1, 1, 1, 1, 1, 1][burstLevel - 1];\r\n        result.push([RECHARGE_ENERGY_BURST, '', somebodyEnergy, allEnergy, otherEnergy, herEnergies, messages2]);\r\n        return result;\r\n    },\r\n    '()': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '3.5',\r\n            ];\r\n            const myEnergy = 3.5 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '115',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '210',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList, 'E.Hold');\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        let constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '101',\r\n            ];\r\n            const myEnergy = 1 * Math.trunc(rotationLength / 10);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 1 * countC(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '10',\r\n        ];\r\n        const myEnergy = 0;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '23',\r\n            ];\r\n            const nCount = rotationList?.length ? Math.trunc(rotationList.filter(rotation => rotation.action.startsWith('N')).length / 3) : 1;\r\n            const myEnergy = 3 * nCount;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '121',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '511',\r\n            ];\r\n            const myEnergy = 5;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.221',\r\n            ];\r\n            const myEnergy = 1.2;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '100%1.231',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = 0;\r\n        const allEnergy = 1.2 * er / 100 * countE(character, rotationList);\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '15',\r\n            ];\r\n            const myEnergy = 15 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '91.513.5',\r\n            ];\r\n            const myEnergy = 9 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '100%5115',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        const myEnergy = Math.min(15, 5 * er / 100) * countE(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const burstLevel = getCharacterInputValue(character, members, '', teamMemberResult);\r\n        const somebodyEnergy = [1.6, 1.7, 1.8, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5][burstLevel - 1];\r\n        const messages2 = [\r\n            ' '\r\n        ];\r\n        result.push([RECHARGE_ENERGY_BURST, '', somebodyEnergy, allEnergy, otherEnergy, herEnergies, messages2]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '11',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1210.514',\r\n            ];\r\n            const myEnergy = 2 * (constellation >= 6 ? Math.trunc(rotationLength / 3) : Math.min(countE(character, rotationList) * 2, countC(character, rotationList)));\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '30.81',\r\n            ];\r\n            const myEnergy = 3;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                'HP315',\r\n            ];\r\n            const myEnergy = 3 * 5 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '243',\r\n            ];\r\n            const myEnergy = 2 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '20%',\r\n        ];\r\n        const myEnergy = 80 * 0.2 * countQ(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '2',\r\n            ];\r\n            const myEnergy = 1;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '1515',\r\n        ];\r\n        const qCount = countQ(character, rotationList);\r\n        const myEnergy = 15 * qCount;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        for (const element of ['', '', '', '']) {\r\n            let doBreak = false;\r\n            for (let herIndex = 0; herIndex < members.length; herIndex++) {\r\n                const herCm = getCharacterMaster(members[herIndex].name);\r\n                if (herCm?. == element) {\r\n                    herEnergies[herIndex] = myEnergy;\r\n                    doBreak = true;\r\n                }\r\n            }\r\n            if (doBreak) break;\r\n        }\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '2',\r\n        ];\r\n        const myEnergy = 2;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '33',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 3;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.2',\r\n            ];\r\n            const myEnergy = 1.2 * (countE(character, rotationList) ? Math.trunc(rotationLength / 2) : 1);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '-15%6211',\r\n            ];\r\n            const myEnergy = 2 * countC(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '45/3/412',\r\n            ];\r\n            const myEnergy = 3;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '115',\r\n            '100%1%+0.6%',\r\n        ];\r\n        const er = getStatsInputValue(character, members, '', teamMemberResult);\r\n        let unit = 2.3 * (1 + (er - 100) * 0.006);\r\n        let unit2 = 0;\r\n        const memberResult = getMemberResult(character, members, teamMemberResult);\r\n        memberResult.damageResult..forEach(entry => {\r\n            if (entry[0] === '') {\r\n                unit = entry[2];\r\n            } else if (entry[0] === '_') {\r\n                unit2 = entry[2];\r\n            }\r\n        })\r\n        if (memberResult.characterInput.weapon === '') {\r\n            unit2 *= [30, 35, 40, 45, 50][memberResult.characterInput. - 1] * 0.006;\r\n        }\r\n        const myEnergy = 0;\r\n        const allEnergy = (unit + unit2) * 5 * countQ(character, rotationList);\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_BURST, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '+10%0.80.21',\r\n            ];\r\n            const myEnergy = 0.8 * countN(character, rotationList, true);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1-1.564.518',\r\n            ];\r\n            const geoCount = members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n            const myEnergy = Math.min(18, 6 * geoCount) * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '18',\r\n            ];\r\n            const myEnergy = 3 * 8 * countQ(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '4012',\r\n        ];\r\n        const myEnergy = 2;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '35',\r\n            ];\r\n            const myEnergy = 0;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 3 * 5 * countQ(character, rotationList);\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '315',\r\n            ];\r\n            const myEnergy = 15 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            '()0.80.21',\r\n        ];\r\n        const electroCount = members.filter(member => getCharacterDetail(member.name)?. === '').length;\r\n        const myEnergy = electroCount > 0 ? 0.8 * (countN(character, rotationList) + countC(character, rotationList)) : 0;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '1.50.21',\r\n            ];\r\n            const myEnergy = 1.5;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const messages: string[] = [\r\n            'HP3',\r\n        ];\r\n        const myEnergy = 3;\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        result.push([RECHARGE_ENERGY_PASSIVE, '', myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                'HP451',\r\n            ];\r\n            const myEnergy = 4 * Math.trunc(rotationLength / 5);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 4;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '+10%2205',\r\n            ];\r\n            const myEnergy = 2;\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, teamMemberResult) => { // eslint-disable-line\r\n        const result: TCharacterEnergyRet[] = [];\r\n        const constellationLevel = 1;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '13193',\r\n            ];\r\n            const myEnergy = 3 * 3 * countE(character, rotationList);\r\n            const allEnergy = 0;\r\n            const otherEnergy = 0;\r\n            const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            result.push([RECHARGE_ENERGY_CONSTELLATION, String(constellationLevel), myEnergy, allEnergy, otherEnergy, herEnergies, messages]);\r\n        }\r\n        return result;\r\n    },\r\n}\r\n\r\nexport const CHARACTER_PARTICLE_EXTRA_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        constellation: number,\r\n        members: TMember[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n        onFields: number[],\r\n    ) => TCharacterParticleRet | undefined\r\n} = {\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const messages: string[] = [\r\n            '12',\r\n        ];\r\n        const hydroCount = members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n        const myParticle = hydroCount > 0 ? 2 * countE(character, rotationList) : 2;\r\n        const allParticle = 0;\r\n        result = [RECHARGE_PARTICLE_PASSIVE, '', '', myParticle, allParticle, [], messages];\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const constellationLevel = 6;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '30%',\r\n            ];\r\n            const myParticle = 0;\r\n            const allParticle = rotationList?.length ? (2 / 3) * countN(undefined, rotationList) : 1;\r\n            result = [RECHARGE_PARTICLE_CONSTELLATION, String(constellationLevel), '', myParticle, allParticle, [], messages];\r\n        }\r\n        return result;\r\n    },\r\n    '': (character, constellation, members, rotationLength, rotationList, onFields) => { // eslint-disable-line\r\n        let result: TCharacterParticleRet | undefined = undefined;\r\n        const constellationLevel = 2;\r\n        if (constellation >= constellationLevel) {\r\n            const messages: string[] = [\r\n                '50%151',\r\n            ];\r\n            const myParticle = 0;\r\n            const allParticle = 0;\r\n            const herParticles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n            let triggerCnt = 1;\r\n            if (rotationList?.length) {\r\n                const ct = 5;\r\n                const rindexArr: number[] = [];\r\n                let isRecorded = false;\r\n                for (let i = 0; i < rotationList.length; i++) {\r\n                    const rotation = rotationList[i];\r\n                    if (rotation.member == character) {\r\n                        if (rotation.action.startsWith('N') && !isRecorded) {\r\n                            rindexArr.push(i);\r\n                            isRecorded = true;\r\n                        }\r\n                    } else {\r\n                        isRecorded = false;\r\n                    }\r\n                }\r\n                const memberNameArr = members.map(member => member.name);\r\n                const onField = onFields[memberNameArr.indexOf(character)];\r\n                triggerCnt = Math.min(Math.trunc(rotationLength / ct), rindexArr.length + Math.max(0, Math.trunc(rotationLength * onField / 100 / ct) - 1));\r\n                for (let i = 0; i < triggerCnt; i++) {\r\n                    let nxtCharacter = character;\r\n                    if (i < rindexArr.length && (rindexArr[i] + 1) < rotationList.length) {\r\n                        nxtCharacter = rotationList[rindexArr[i] + 1].member;\r\n                    }\r\n                    const toIndex = memberNameArr.indexOf(nxtCharacter);\r\n                    herParticles[toIndex] += 1;\r\n                }\r\n            }\r\n            result = [RECHARGE_PARTICLE_CONSTELLATION, String(constellationLevel), '', myParticle, allParticle, herParticles, messages];\r\n        }\r\n        return result;\r\n    },\r\n}\r\n","import _ from \"lodash\";\r\nimport { NUMBER_OF_MEMBERS, TActionItem } from \"./team\";\r\nimport { RECHARGE_ENERGY_WEAPON, countC, countE, countN, countQ } from \"./ERCalculatorCommon\";\r\n\r\nexport type TWeaponEnergyRet = [string, string, number, number, number, number[], string[]];\r\n\r\nexport const WEAPON_ENERGY_FUNC: {\r\n    [key: string]: (\r\n        character: string,\r\n        weapon: string,\r\n        weaponRefine: number,\r\n        members: string[],\r\n        rotationLength: number,\r\n        rotationList: TActionItem[] | undefined,\r\n    ) => TWeaponEnergyRet\r\n} = {\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '624/4.5/5/5.5/6HP24%/4.5%/5%/5.5%/6%',\r\n        ];\r\n        const myEnergy = [4, 4.5, 5, 5.5, 6][weaponRefine - 1] * 3 * countQ(character, rotationList);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '301513126/7.5/9/10.5/12',\r\n        ];\r\n        const myEnergy = [6, 7.5, 9, 10.5, 12][weaponRefine - 1] * Math.min(countE(character, rotationList), countQ(character, rotationList) * 3, rotationLength / 5);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '120.60.11',\r\n        ];\r\n        const myEnergy = 0.6 * countN(character, rotationList, true);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '32.54.5/5/5.5/6/6.5',\r\n        ];\r\n        const myEnergy = [4.5, 5, 5.5, 6, 6.5][weaponRefine - 1];\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            '8/10/12/14/16101',\r\n        ];\r\n        const myEnergy = [8, 10, 12, 14, 16][weaponRefine - 1] * Math.trunc(rotationLength / 10);\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => { // eslint-disable-line\r\n        const messages = [\r\n            'HP430.31338/9/10/11/12121',\r\n        ];\r\n        const myEnergy = [8, 9, 10, 11, 12][weaponRefine - 1];\r\n        const allEnergy = 0;\r\n        const otherEnergy = 0;\r\n        const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n    '': (character, weapon, weaponRefine, members, rotationLength, rotationList) => {\r\n        return weaponEnergySub_(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    },\r\n}\r\n\r\nfunction weaponEnergySub_(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    members: string[],  // eslint-disable-line\r\n    rotationLength: number,  // eslint-disable-line\r\n    rotationList: TActionItem[] | undefined,\r\n): TWeaponEnergyRet {\r\n    const messages = [\r\n        '3623/3.5/4/4.5/5101',\r\n    ];\r\n    let myEnergy = 0;\r\n    const unit = [3, 3.5, 4, 4.5, 5][weaponRefine - 1];\r\n    if (rotationList?.length) {\r\n        let isInCt = false;\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (rotation.member == character) {\r\n                if (rotation.action.startsWith('E')) {\r\n                    if (!isInCt) {\r\n                        myEnergy += unit * 3;\r\n                        if (i === 0 || rotationList[i - 1].member != character || rotationList[i - 1].action !== 'Q') {\r\n                            myEnergy -= 3;\r\n                        }\r\n                    }\r\n                    isInCt = true;\r\n                }\r\n            } else {\r\n                isInCt = false;\r\n            }\r\n        }\r\n    } else {\r\n        myEnergy = unit * 3 - 3;\r\n    }\r\n    const allEnergy = 0;\r\n    const otherEnergy = 0;\r\n    const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n}\r\n\r\nfunction weaponEnergySub_(\r\n    character: string,  // eslint-disable-line\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    members: string[],  // eslint-disable-line\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,  // eslint-disable-line\r\n): TWeaponEnergyRet {\r\n    const messages = [\r\n        '130310212/2.5/3/3.5/4151',\r\n    ];\r\n    const myEnergy = [2, 2.5, 3, 3.5, 4][weaponRefine - 1] * 3 * Math.min(countE(character, rotationList) + countC(character, rotationList), Math.trunc(rotationLength / 15));\r\n    const allEnergy = 0;\r\n    const otherEnergy = 0;\r\n    const herEnergies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    return [RECHARGE_ENERGY_WEAPON, weapon, myEnergy, allEnergy, otherEnergy, herEnergies, messages];\r\n}\r\n","import _ from \"lodash\";\r\nimport { NUMBER_OF_MEMBERS, TActionItem, TTeam, TTeamMemberResult, getCharacterDetail, getCharacterMaster } from \"./team\";\r\nimport { CHARACTER_E_DELAY_MAP, CHARACTER_E_UNTIL_MAP, CHARACTER_Q_NOT_RECHARGEABLE, CHARACTER_Q_TO_E_ARR, SP_LONG, SP_NEXT, SP_SELF, SP_SHRT, getDurationFromInfo, getElementalSkillActions, getParticleInfo, getParticleNumFromInfo, getReceiveTypeFromInfo } from \"@/particlemaster\";\r\nimport { TERParticle, RECHARGE_PARTICLE_SKILL, countE, countC, countQ, RECHARGE_PARTICLE_FAVONIUS, RECHARGE_PARTICLE_RESONANCE, TEREnergy, RECHARGE_ENERGY_ARTIFACT, RECHARGE_ENERGY_ATTACK, ATTACK_ENERGY_COUNT_OBJ } from \"./ERCalculatorCommon\";\r\nimport { CHARACTER_ENERGY_FUNC, CHARACTER_PARTICLE_EXTRA_FUNC } from \"./ERCalculatorFuncCharacter\";\r\nimport { WEAPON_ENERGY_FUNC } from \"./ERCalculatorFuncWeapon\";\r\n\r\nexport function getParticleByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle[] | undefined {\r\n    const kind = RECHARGE_PARTICLE_SKILL;\r\n    const resultMap = new Map<string, number[]>();\r\n    if (!character) return undefined;\r\n    if (!rotationList?.length) {\r\n        rotationList = [{\r\n            id: 0,\r\n            member: character,\r\n            action: getElementalSkillActions(character)[0],\r\n        }];\r\n    }\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (character === '' && constellation >= 6) {\r\n        const eCount = countE(character, rotationList);\r\n        const cCount = countC(character, rotationList);\r\n        const qCount = countQ(character, rotationList);\r\n        const action = 'E';\r\n        const particleInfo = getParticleInfo(character, action);\r\n        const num = getParticleNumFromInfo(particleInfo) * Math.trunc(Math.min(rotationLength, Math.min(eCount, cCount) * 5.5 + qCount * 18) / 5.5);\r\n        const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(resultVal, num, team, onFields);\r\n        resultMap.set(action, resultVal);\r\n    } else if (character === '') {\r\n        let ousiaLength = 0;\r\n        let isOusia = true; // \r\n        rotationList.forEach(rotation => {\r\n            if (rotation.member == character && rotation.action.includes('C')) {    // \r\n                isOusia = !isOusia;\r\n            }\r\n            if (isOusia) {\r\n                ousiaLength++;\r\n            }\r\n        })\r\n        const action = 'E';\r\n        const particleInfo = getParticleInfo(character, action);\r\n        const num = getParticleNumFromInfo(particleInfo, rotationLength) * Math.trunc(ousiaLength / rotationList.length);\r\n        const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(resultVal, num, team, onFields);\r\n        resultMap.set(action, resultVal);\r\n    } else {\r\n        const timeArr = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        let curCharacter;\r\n        let isBursting = false;\r\n        let untilMap = new Map<string[], number>();\r\n        let delayActions: string[] | undefined;    // delayActions\r\n        for (let i = 0; i < rotationList.length; i++) {\r\n            const rotation = rotationList[i];\r\n            if (rotation.member != curCharacter) {\r\n                isBursting = false;\r\n            }\r\n            if (rotation.member == character) {\r\n                let action = rotation.action;\r\n                if (action === 'Q') {\r\n                    isBursting = true; // \r\n                    if (CHARACTER_Q_TO_E_ARR.includes(character)) {\r\n                        action = 'E';\r\n                    }\r\n                }\r\n                if (untilMap && untilMap.size > 0) {\r\n                    for (const [key, value] of untilMap.entries()) {\r\n                        if (key.filter(untilAction => action.indexOf(untilAction) != -1).length > 0) {\r\n                            let untilCount = value;\r\n                            if (untilCount) {\r\n                                untilCount -= action.startsWith('N') ? action.length === 1 ? 1 : Number(action.substring(1, 2)) : 1;\r\n                                if (untilCount > 0) {\r\n                                    untilMap.set(key, untilCount);\r\n                                } else {\r\n                                    untilMap.clear();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (action.startsWith('E') || delayActions && delayActions.filter(delayAction => action.indexOf(delayAction) != -1).length) {\r\n                    const workMap = CHARACTER_E_UNTIL_MAP.get(character);\r\n                    if (workMap && workMap.size > 0) {\r\n                        untilMap = _.cloneDeep(workMap);\r\n                    } else if (CHARACTER_E_DELAY_MAP.has(character)) {\r\n                        if (action.startsWith('E')) {\r\n                            delayActions = _.cloneDeep(CHARACTER_E_DELAY_MAP.get(character));\r\n                            continue;\r\n                        }\r\n                        delayActions = undefined;\r\n                        action = 'E';\r\n                    }\r\n                    const resultVal = resultMap.get(action) ?? _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                    timeArr[myIndex] = setSkillParticleNumToArr(resultVal, character, action, constellation, team, rotationLength, rotationList, i, onFields, timeArr[myIndex], isBursting);\r\n                    resultMap.set(action, resultVal);\r\n                }\r\n            }\r\n            curCharacter = rotation.member;\r\n        }\r\n    }\r\n    const result: TERParticle[] = [];\r\n    const characterMaster = getCharacterMaster(character);\r\n    const element = characterMaster?. ?? '';\r\n    resultMap.forEach((value, key) => {\r\n        result.push([kind, key, element, value, []]);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getParticleByCharacterExtra(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle[] | undefined {\r\n    const func = CHARACTER_PARTICLE_EXTRA_FUNC[character];\r\n    if (func === undefined) return undefined;\r\n    const ret = func(character, constellation, team.members, rotationLength, rotationList, onFields);\r\n    if (ret === undefined) return undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    if (myIndex === -1) return undefined;\r\n    const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const result: TERParticle = [ret[0], ret[1], ret[2], particles, ret[6]];\r\n    if (ret[3]) {   // \r\n        particles[myIndex] += ret[3];\r\n    }\r\n    if (ret[4]) {   // \r\n        splitNumToArrByOnFieldRate(particles, ret[4], team, onFields);\r\n    }\r\n    if (ret[5].length) {   // \r\n        for (let i = 0; i < ret[5].length && i < particles.length; i++) {\r\n            particles[i] += ret[5][i];\r\n        }\r\n    }\r\n    return [result];\r\n}\r\n\r\nexport function getParticleByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    if (['', '', '', '', ''].includes(weapon)) {\r\n        const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        const ct = [12, 10.5, 9, 7.5, 6][weaponRefine - 1];\r\n        let triggerCnt = 1;\r\n        if (rotationList?.length) {\r\n            const rindexArr: number[] = [];\r\n            for (let i = 0; i < rotationList.length; i++) {\r\n                const rotation = rotationList[i];\r\n                if (rotation.member == character && (i === 0 || rotationList[i - 1].member != character)) {\r\n                    rindexArr.push(i);\r\n                }\r\n            }\r\n            const onField = onFields[memberNameArr.indexOf(character)];\r\n            triggerCnt = Math.min(Math.trunc(rotationLength / ct), rindexArr.length + Math.max(0, Math.trunc(rotationLength * onField / 100 / ct) - 1));\r\n            for (let i = 0; i < triggerCnt; i++) {\r\n                let nxtCharacter = character;\r\n                if (i < rindexArr.length && (rindexArr[i] + 1) < rotationList.length) {\r\n                    nxtCharacter = rotationList[rindexArr[i] + 1].member;\r\n                }\r\n                const toIndex = memberNameArr.indexOf(nxtCharacter);\r\n                particles[toIndex] += 3;\r\n            }\r\n        } else {\r\n            const toIndex = memberNameArr.indexOf(character);\r\n            particles[toIndex] = 3 * triggerCnt;\r\n        }\r\n        result = [RECHARGE_PARTICLE_FAVONIUS, weapon, '', particles, []];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getParticleByResonance(\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n    onFields: number[],\r\n): TERParticle | undefined {\r\n    let result: TERParticle | undefined = undefined;\r\n    if (team.members.filter(member => member.name).length < 4) return result;\r\n    const electroCount = team.members.filter(member => getCharacterMaster(member.name)?. === '').length;\r\n    if (electroCount >= 2) { // \r\n        const messages = [\r\n            '100%5',\r\n        ];\r\n        let allParticle = 0; // \r\n        if (team.members.filter(member => ['', '', '', ''].includes(getCharacterMaster(member.name)?. ?? '--')).length) {\r\n            const ct = 5;\r\n            allParticle = 1 * Math.trunc(rotationLength / ct);\r\n        }\r\n        const particles = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        splitNumToArrByOnFieldRate(particles, allParticle, team, onFields);\r\n        result = [RECHARGE_PARTICLE_RESONANCE, '', '', particles, messages];\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByCharacter(\r\n    character: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n    teamMemberResult?: TTeamMemberResult,\r\n): TEREnergy[] {\r\n    const result: TEREnergy[] = [];\r\n    const func = CHARACTER_ENERGY_FUNC[character];\r\n    if (func === undefined) return result;\r\n    const ret = func(character, constellation, team.members, rotationLength, rotationList, teamMemberResult);\r\n    if (!ret?.length) return result;\r\n    const myIndex = team.members.map(member => member.name).indexOf(character);\r\n    if (myIndex === -1) return result;\r\n    ret.forEach(entry => {\r\n        const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n        const workResult: TEREnergy = [entry[0], entry[1], energies, entry[6]];\r\n        if (entry[2]) {   // \r\n            energies[myIndex] += entry[2];\r\n        }\r\n        if (entry[3]) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                energies[i] += entry[3];\r\n            }\r\n        }\r\n        if (entry[4]) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                if (i != myIndex) {\r\n                    energies[i] += entry[4];\r\n                }\r\n            }\r\n        }\r\n        if (entry[5]?.length) {   // \r\n            for (let i = 0; i < energies.length; i++) {\r\n                energies[i] += entry[5][i];\r\n            }\r\n        }\r\n        result.push(workResult);\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByWeapon(\r\n    character: string,\r\n    weapon: string,\r\n    weaponRefine: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n): TEREnergy | undefined {\r\n    let result: TEREnergy | undefined = undefined;\r\n    const func = WEAPON_ENERGY_FUNC[weapon];\r\n    if (func === undefined) return result;\r\n    const members = team.members.map(member => member.name);\r\n    const ret = func(character, weapon, weaponRefine, members, rotationLength, rotationList);\r\n    if (!ret?.length) return result;\r\n    const myIndex = members.indexOf(character);\r\n    if (myIndex === -1) return result;\r\n    const entry = ret;\r\n    const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    result = [entry[0], entry[1], energies, entry[6]];\r\n    if (entry[2]) {   // \r\n        energies[myIndex] += entry[2];\r\n    }\r\n    if (entry[3]) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            energies[i] += entry[3];\r\n        }\r\n    }\r\n    if (entry[4]) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            if (i != myIndex) {\r\n                energies[i] += entry[4];\r\n            }\r\n        }\r\n    }\r\n    if (entry[5]?.length) {   // \r\n        for (let i = 0; i < energies.length; i++) {\r\n            energies[i] += entry[5][i];\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getEnergyByArtifact(\r\n    character: string,\r\n    artifactSet4: string,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[] | undefined,\r\n): TEREnergy | undefined {\r\n    const rechargeKind = RECHARGE_ENERGY_ARTIFACT;\r\n    const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n    const messages: string[] = [];\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const qCount = countQ(character, rotationList);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    let otherEnergy = 0;\r\n    if (artifactSet4 === '') {\r\n        otherEnergy = 6 * qCount;\r\n    }\r\n    if (otherEnergy) {\r\n        messages.push('226');\r\n        for (let i = 0; i < energies.length; i++) {\r\n            if (i != myIndex) {\r\n                energies[i] += otherEnergy;\r\n            }\r\n        }\r\n    }\r\n    if (energies.filter(e => e > 0).length || messages.length) {\r\n        return [rechargeKind, artifactSet4, energies, messages];\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function getEnergyByAttack(\r\n    character: string,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n): TEREnergy | undefined {\r\n    let result: TEREnergy | undefined = undefined;\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const myIndex = memberNameArr.indexOf(character);\r\n    const characterDetail = getCharacterDetail(character);\r\n    if (characterDetail) {\r\n        const denominator = ATTACK_ENERGY_COUNT_OBJ[characterDetail.];\r\n        if (denominator) {\r\n            let hitCount = 0;\r\n            if (rotationList?.length) {\r\n                rotationList.filter(rotation => rotation.member == character).forEach(rotation => {\r\n                    let withC = false;\r\n                    if (rotation.action.startsWith('N')) {\r\n                        let workHitCount = 0;\r\n                        let dans = 1;\r\n                        if (rotation.action.length > 1) {\r\n                            dans = Number(rotation.action.substring(1, 2));\r\n                        }\r\n                        characterDetail...forEach((obj: any) => {\r\n                            if (obj. && obj..endsWith('')) {\r\n                                const workDan = obj..substring(0, 1);\r\n                                if (!isNaN(workDan) && dans <= Number(workDan)) {\r\n                                    if (obj.HIT) {\r\n                                        workHitCount += obj.HIT;\r\n                                    }\r\n                                }\r\n                            }\r\n                        })\r\n                        if (workHitCount < dans) {\r\n                            workHitCount = dans;\r\n                        }\r\n                        hitCount += workHitCount;\r\n                        if (rotation.action.endsWith('C')) {\r\n                            withC = true;\r\n                        }\r\n                    }\r\n                    if (rotation.action === 'C' || withC) {\r\n                        let workHitCount = 1;\r\n                        characterDetail...forEach((obj: any) => {\r\n                            if (obj. && obj. === '') {\r\n                                if (obj.HIT) {\r\n                                    workHitCount = obj.HIT;\r\n                                }\r\n                            }\r\n                        })\r\n                        hitCount += workHitCount;\r\n                    }\r\n                })\r\n            }\r\n            const energy = Math.trunc(hitCount / denominator);\r\n            if (energy) {\r\n                const rechargeKind = RECHARGE_ENERGY_ATTACK;\r\n                const energies = _.fill(Array(NUMBER_OF_MEMBERS), 0);\r\n                const messages: string[] = [];\r\n                result = [rechargeKind, '', energies, messages];\r\n                energies[myIndex] += energy;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction setSkillParticleNumToArr(\r\n    arr: number[],\r\n    character: string,\r\n    action: string,\r\n    constellation: number,\r\n    team: TTeam,\r\n    rotationLength: number,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    onFields: number[],\r\n    time: number,\r\n    isBursting = false,\r\n) {\r\n    const particleInfo = getParticleInfo(character, action, constellation, isBursting);\r\n    if (particleInfo) {\r\n        const rotation = rotationList[index];\r\n        if (rotation) {\r\n            const num = getParticleNumFromInfo(particleInfo, rotationLength - time);\r\n            const receiveType = getReceiveTypeFromInfo(particleInfo);\r\n            const duration = getDurationFromInfo(particleInfo);\r\n            if ([SP_SELF, SP_NEXT].includes(receiveType)) {\r\n                addNumToArr(arr, num, team, rotationList, index, receiveType);\r\n            } else if ([SP_LONG, SP_SHRT].includes(receiveType)) {\r\n                splitNumToArrByOnFieldRate(arr, num, team, onFields);\r\n            }\r\n            time += duration;\r\n        }\r\n    }\r\n    return time;\r\n}\r\n\r\nfunction addNumToArr(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    rotationList: TActionItem[],\r\n    index: number,\r\n    receiveType = SP_NEXT,\r\n) {\r\n    const memberNameArr = team.members.map(member => member.name);\r\n    const nxtRotation = (index + receiveType - SP_SELF) < rotationList.length ? rotationList[index + receiveType - SP_SELF] : rotationList[0];\r\n    if (nxtRotation.action === 'Q' && CHARACTER_Q_NOT_RECHARGEABLE.includes(nxtRotation.member)) {\r\n        num = 0;\r\n    }\r\n    arr[memberNameArr.indexOf(nxtRotation.member)] += num;\r\n}\r\n\r\nexport function splitNumToArrByOnFieldRate(\r\n    arr: number[],\r\n    num: number,\r\n    team: TTeam,\r\n    onFields: number[],\r\n) {\r\n    const denominator = onFields.map(v => Math.pow(v / 100, 2)).reduce((p, c) => p + c, 0);\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if (team.members[i].name) {\r\n            const onField = onFields[i];\r\n            arr[i] += num * Math.pow(onField / 100, 2) / denominator;\r\n        }\r\n    }\r\n}\r\n","import { render } from \"./ERCalculator.vue?vue&type=template&id=109f95d0&scoped=true&ts=true\"\nimport script from \"./ERCalculator.vue?vue&type=script&lang=ts\"\nexport * from \"./ERCalculator.vue?vue&type=script&lang=ts\"\n\nimport \"./ERCalculator.vue?vue&type=style&index=0&id=109f95d0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-109f95d0\"]])\n\nexport default __exports__","import { render } from \"./TeamRotation.vue?vue&type=template&id=37a78f4d&scoped=true&ts=true\"\nimport script from \"./TeamRotation.vue?vue&type=script&lang=ts\"\nexport * from \"./TeamRotation.vue?vue&type=script&lang=ts\"\n\nimport \"./TeamRotation.vue?vue&type=style&index=0&id=37a78f4d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37a78f4d\"]])\n\nexport default __exports__"],"names":["ARTIFACT_SCORE_FACTORS","ARTIFACT_SCORE_FORMULA_TEMPLATE","REACTION_DMG_ARR","REACTION_DMG_ELEMENT_MAP","Map","setupReactionDmgElementMap","forEach","reactionDmg","reaction","replace","Object","keys","ELEMENTAL_REACTION_MASTER","element","reactionMaster","workArr","includes","set","","getLevelStr","ascension","level","ARRAY","getStatValueByLevel","statObj","myLevelStr","lowLevel","highLevel","length","lowValue","highValue","getPropertyValueByLevel","getValueByLevel","valueObj","Number","levelArr","map","s","i","calculateArtifactStatsMain","artifactStatsMain","mainstats","key","statWithRarity","stat","split","ARTIFACT_MAIN_MASTER","calculateArtifactSubStatByPriority","artifactStatsSub","prioritySubstats","priotritySubstatIndices","priotritySubstatValues","prioritySubstatCounts","totalCount","undefined","noPrioritySubstatArr","ARRAY","filter","noPriorityCount","Math","min","floor","max","substat","ARTIFACT_SUB_MASTER","star4Count","startsWith","multiplier","round","calculateArtifactStats","artifactDetailInput","artifactStats","","","","makeEvalableScript","formula","statsObj","damageResult","replaceMap","re","reRet","exec","has","value","arr","major","minor","entryArr","String","console","warn","getStatValue","result","replaceAll","evalFormula","opt_max","opt_min","script","_","eval","error","debug","calculateStats","statsInput","characterInput","conditionInput","optionInput","characterMaster","","","constellation","","weaponMaster","weaponAscension","","weaponLevel","","workStatsObj","TEMPLATE","name","conditionValues","enemyMaster","toStat","statAdjustments","ARRAY","statAdjustmentsEx","ARRAY","_Var","","_Var","_Var","elementalResonance","teamOption","miscOption","optionObj","conditionAdjustments","workValue","Infinity","endsWith","my","validConditionValueArr","makeValidConditionValueArr","calculateStatsTop","updateStatsWithCondition","myDamageDetail","damageDetailMyCharacter","damageDetailMyWeapon","damageDetailMyArtifactSets","CHANGE_KIND_TALENT","myDetailObj","number","checkConditionMatches","my","","overwriteObject","workConditionAdjustments","statFormulaMap","CHANGE_KIND_STATUS","hasCondition","my","","my","get","push","","","hpStatArr","defStatArr","atkStatArr","otherStatArr","_ARRAY","_ARRAY","ARRAY","ARRAY","ARRAY","Array","from","indexOf","formulaStatArr","Set","sort","compareFunction","oldStatsObj","postfix","workStat","updateStatsWithConditionSub","fromStat","formulaKey","formulaArr","diffStats","updateStats","statValue","topValue","a","b","lowestArr","aIndex","bIndex","calculateElementalResonance","ELEMENTAL_RESONANCE_MASTER","master","","detailObj","matchRet","","","dendroOption","calculateDamageResult","vision","reactionResult","TEMPLATE","reactionMasterArr","dmgElementSet","add","selectList","selectEntry","selectedIndex","dmgElement","options","has","characterArr","","","","","entry","reactionObj","resultValue","calculate","optionValue","calculate","calculate","calculate","suffix","dmg","","isArray","splice","category","talentDetailArr","workObj","talentDetail","resultArr","calculateDamageFromDetail","n","sum","damageTakenArr","damageTaken","calculateDamageTaken","resScoreArr","checkboxList","required","numberList","conditionStr","myCondStr","myCondStrArr","resultSub","checkConditionMatchesSub","myCondArr","isNumeric","work","NUMBER_CONDITION_VALUE_RE","test","RegExp","workCondArr","elementalMastery","dmgBuff","opt_dmgElement","calculateEnemyRes","calculateEnemyDef","opt_ignoreDef","enemyLevel","calcIgnoreDef","calcDef","calculateRes","res","statName","opt_element","myArr","isCalc","isCalc","isCalc","my","my","myHIT","my","talentChangeDetailObjArr","getChangeDetailObjArr","myConditionValuesAfter","delCondition","addCondition","newValue","","desc","myConditionInputAfter","validConditionValueArrAfter","damageDetail","","damageDetailObj","matchesBefore","matchesAfter","valueBefore","valueAfter","before","after","diff","new","","myTalentChangeDetailObjArr","my","myArr","myValue","myNewValueObj","JSON","parse","stringify","concat","tempStatsObj","entryObj","tempArr","isValid","HIT","artifactSets","my","description","","DAMAGE_CATEGORY_ARRAY","myResult","calculateDamageFromDetailSub","myResultWork","temp","dmgUpStatArr","dmgUpStat","isUseReference","buffArr","","","my","my","my","buff","my","my","my","my","myResult","myResult","changeKind","DAMAGE_RESULT_TEMPLATE","nameArr","ALL_ELEMENTS","damage","def","dmgReduction","calculateArtifactScore","scoringStats","scoringStat","magnification","srcStat","srcStatValue","member","teamMembers","calculatedSupporter","supporters","async","setupTeamOptionSupporter","supporter","build","character","getDefaultCharacterInput","getDefaultArtifactDetailInput","getDefaultConditionInput","getDefaultStatsInput","getDefaultDamageResultInput","optionDetails1","optionDetails2","conditionMap","exclusionMap","getCharacterMasterDetail","builddata","loadRecommendation","makeDamageDetailObjArrObjCharacter","makeDamageDetailObjArrObjWeapon","makeDamageDetailObjArrObjArtifactSets","setupConditionValues","","updateNumberConditionValues","myCharacterMaster","teamOptions","TEAM_OPTION_MASTER_LIST","makeSupporterCondition","makeDamageDetailObjArr","makeConditionExclusionMapFromStr","characterOptions","","weaponOptions","artifactSetOptions","artifactSetMasters","","damageDetailObjArr","makeTeamOptionDetailObjArr","condition","getChangeKind","log","calculateTeamStatsAdjustments","topStats","substring","optionDetails","workInput","kinds","elem","kind","tempKind","calculateMiscStatsAdjustments","teamConditionValueArr","getCritFromResultEntry","critRate","critDmg","getDamageResultArr","rotationDamageEntry","calculateRotationDamageEntry","index","list","reactions","dmgResultEntry","count","counts","plainDmg","calculateReactedDamage","workDmg","calculateRotationTotalDamage","rotationDamageArr","dmgIndex","elementalReaction","reactionTimes","reactionKey","getAmplifyingReactionElement","reactionElement","isFinite","dst","src","srcKeys","basename","path","pop","shift","i18n","createI18n","legacy","locale","fallbackLocale","isGlobal","ARRAY","ARRAY","ARRAY","ARRAY","_ARRAY","_ARRAY","ARRAY_MAP","STAT_PERCENT_LIST","makeStatusTemplate","makeEnemyStatusTemplate","_ARRAY","_ARRAY","_ARRAY","_ARRAY","_ARRAY","ARRAY","TEMPLATE","_","_","_","_","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","ARTIFACT_SET_MASTER_DUMMY","","image","IMG_SRC_DUMMY","CHARACTER_INPUT_TEMPLATE","","","","weapon","","damageDetailElementalResonance","buildname","recommendationSelectedIndex","saveDisabled","removeDisabled","ARTIFACT_TEMPLATE","rarity","setname","cat_id","mainStat","mainStatValue","subStats","ARTIFACT_DETAIL_INPUT_TEMPLATE","","NUMBER_OF_PRIORITY_SUBSTATS","","GENSEN_MASTER_LIST","values","","Disabled","artifact_list","CONDITION_INPUT_TEMPLATE","STATS_INPUT_TEMPLATE","ENEMY_MASTER_LIST","getDefaultOptionInput","OPTION_INPUT_TEMPLATE","supporterBuildname","parseLevelStr","levelStr","makeDefaultBuildname","makeBuildStorageKey","makeOptionStorageKey","makeArtifactScoringStorageKey","makeRecommendationList","opt_buildData","isSavable","overwrite","storageKeyArr","localStorage","buildObj","key2","optionsObj","key3","artifactScoringObj","artifactScoring","key4","supporterBuildnameObj","obj","myRecommendation","subkey","artifactRarerityArrArr","artifactRarerity4Num","artifactSet1","artifactSet2","ARTIFACT_SET_MASTER","makeArtifactSetAbbrev","statusName","RECOMMEND_ABBREV_MAP","abbrRe","abbr","makePrioritySubstatValueList","opt_substat","valueArr","makeEasyInputSubstatValueList","weaponType","WEAPON_MASTER","getWeaponMasterDetail","prioritySubstatsDisabled","toKey","artifactSet","mainstat","subkey1","subkey2","subkey3","substatValue","substatCount","prioritySubstatValueList","PROPERTY_MAP","astarIndex","workCharacter","CHARACTER_MASTER","ARTIFACT_KEYS","newList","makeSavedata","resultObj","makeOptionsSavedata","myTalentDetail","myTalentLevel","myDefaultKind","myDefaultElement","myInputCategory","myStatusChangeDetailObjArr","workCategory","cond","","","","","myLevel","makeDamageDetailObjArrObjElementalResonance","ELEMENTAL_RESONANCE_MASTER_LIST","makeDetailObj","defaultKind","defaultElement","inputCategory","opt_condition","my","makeFormulaTemplate","my","my","talentDataObj","statusChangeDetailObjArr","detailObjArr","exclusionStr","workStr","conditionStrArr","makeConditionExclusionMapFromStrSub","exclusion","pushToMapValueArray","conditionObj","step","prefix","condValueArr","re2","rangeStart","rangeEnd","re2Ret","addDecimal","e","workConditionValues","workCheckboxList","workSelectList","workNumberList","makeConditionMapFromCharacterInput","makeExclusionMapFromCharacterInput","numberObj","exclusions","conditionValue","minValue","checked","","vStat","trunc","numberEntryArr","maxValue","oldValue","getDecimalLength","multiplyDecimal","value1","value2","decimalLength","intValue1","intValue2","pow","k","symbols","escapedSymbols","join","item","getMaxConstellation","getMaxTalentLevel","talentObj","setupTeamOption","workDetails1","workDetails2","workMap1","workMap2","displayName","setupMiscOption","OPTION1_MASTER_LIST","OPTION2_MASTER_LIST","masterList","updateConditionsByTeam","myVision","regionCountMap","totalEnergyCost","visionCountMap","characterDetail","region","","size","pyroCount","hydroCount","electroCount","cryoCount","updateOptionsElementalResonanceByTeam","newElementResonance","resonanceElementArr","restMemberElementArr","currentElementArr","resonance","makeSharedata","savedata","sharedataArr","myBasename","ARTIFACT_STAT_JA_EN_ABBREV_MAP","match","openTwitter","text","url","opt_hashtags","opt_via","baseUrl","params","URLSearchParams","append","query","toString","shareUrl","window","open","shareByTwitter","sharedata","encoded","encodeURI","pushBuildinfoToSession","teammembers","sessionStorage","setItem","popBuildinfoFromSession","getItem","removeItem","getIconUrl","icon_url","import","CHARACTER_MASTER_LIST","","SWORD_MASTER","","CLAYMORE_MASTER","","POLEARM_MASTER","","BOW_MASTER","","CATALYST_MASTER","typedMaster","SWORD_MASTER_LIST","CLAYMORE_MASTER_LIST","POLEARM_MASTER_LIST","BOW_MASTER_LIST","CATALYST_MASTER_LIST","WEAPON_MASTER_LIST","ARTIFACT_SET_MASTER_LIST","ENEMY_MASTER","TEAM_OPTION_MASTER","OPTION1_MASTER","OPTION2_MASTER","CHARACTER_MASTER_DETAIL_MAP","fetch","then","resp","json","WEAPON_IMG_SRC","WEAPON_MASTER_DETAIL_MAP","opt_weaponType","weaponTypeArr","ELEMENT_COLOR_CLASS","","","","","","","","ELEMENT_BG_COLOR_CLASS","ELEMENT_IMG_SRC","STAR_BACKGROUND_IMAGE_CLASS","RECOMMEND_ABBREV_EN_MAP","ARTIFACT_STAT_JA_EN_ABBREV_REVERSE_MAP","gensen","ARTIFACT_CAT_NAMES","getArtifactIconUrl","opt_cat_id","SP_SELF","SP_NEXT","SP_LONG","SP_SHRT","C0","C1","C2","C4","C6","PARTICLE_MASTER","pentry","pinfo","receiveTypeArr","CHARACTER_Q_TO_E_ARR","CHARACTER_E_UNTIL_MAP","CHARACTER_E_DELAY_MAP","CHARACTER_Q_NOT_RECHARGEABLE","getElementalSkillActions","particleMaster","action","getParticleInfo","isBursting","keyArr","start","getParticleNumFromInfo","particleInfo","leftTime","receiveType","getReceiveTypeFromInfo","particleCt","getParticleCooltimeFromInfo","duration","getDurationFromInfo","getCooltimeFromInfo","_withScopeId","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","style","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_createElementVNode","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","type","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","render","_ctx","_cache","$props","$setup","$data","$options","_component_ArtifactSetSelect","_resolveComponent","_openBlock","_createElementBlock","control","onClick","$event","isEditing","artifactImgSrc","alt","copiedArtifact","artifactIconOnClick","_toDisplayString","_withDirectives","onChange","args","_Fragment","_renderList","mainStatOptions","option","_vModelSelect","statStep","_vModelText","displayStatValue","starOnChange","dummy","subStat","subStatOptions","disabled","subStatOptionDisabled","selectOnClick","score","_createCommentVNode","selected","_createVNode","visible","artifact","updateArtifactSet","_vShow","isListShow","defineComponent","props","id","initial","Boolean","components","ArtifactSetSelect","emits","setup","context","percent","CompositionFunction","reactive","ref","isSelected","computed","MAINSTAT_CAT_ARR","emit","onLoad","watch","newVal","oldVal","__exports__","artifactSetEffects","filteredList","_normalizeClass","bgImageClass","selectedClass","$emit","artifactSetMastersRea","elementList","elementCheckList","checkListOnChange","_vModelCheckbox","elementSrc","weaponList","weaponCheckList","weaponSrc","characterOnClick","visionSrc","selectionNumber","characters","checkList","elementChecked","weaponChecked","blankIndex","t","te","useI18n","useScope","localeList","setI18nLanguage","global","loadLocaleMessages","document","querySelector","setAttribute","messages","setLocaleMessage","nextTick","hasPercent","displayStatName","opt_s","myPercent","p","displayStatAbbrev","targetValue","event","target","HTMLInputElement","HTMLSelectElement","displayOptionName","onDblclick","characterOnDblclick","characterImgClass","characterImgSrc","visionImgSrc","tags","tagColorClass","replacements","replaceImgSrc","displayStat","showEquipment","imgWeaponSrc","imgArtifactSetSrc","viewable","members","watchCount","getBuilddataFromStorage","weaponName","replIndex","artifactSetName","toLowerCase","locate","confirm","colspan","_component_CharacterSelect","_component_MemberItem","characterSelectMode","_createBlock","updateReplacements","updateCharacters","workTeam","minlength","maxlength","placeholder","characterSelectModeOnClick","selectedMemberName","MEMBER_TAG_LIST","tag","tagSelectedClass","tagOnClick","memberSelectedClass","memberOnClick","selectedMemberBuildname","buildnameOnChange","buildnames","workTeamTags","teamTagSelected","teamTagOnClick","txtTeamTags","txtTeamTagsOnChange","cancelOnClick","okOnClick","CharacterSelect","MemberItem","team","teamTags","rotation","rotationDescription","selectedMemberId","replacementIndex","duplicateTeam","setupTxtTeamTags","newCharacters","workBuildnames","getBuildStorageKeys","getBuildnameFromStorageKey","defaultBuildname","others","editable","editOnClick","resonanceElementImgSrcs","memberStats","displayRes","resKey","resBgClass","displayTags","jumpToRotation","requied","constellations","memberResults","initializeRes","watchFunc","onMounted","getElementalResonance","calculateMemberResult","Promise","all","results","calculateStat","teamAdjustments","memberResult","dmgElements","artifactSet4s","","constellationObj","_createStaticVNode","_component_draggable","_component_ERCalculator","bgColorClass","normalAttackIconSrc","listActionOnClick","elementalSkillIconSrc","elementalBurstIconSrc","removeMode","selectedAction","getActionDetail","selectedActionOnClick","actionDisplay","rotationList","handle","delay","animation","rotationListOnChange","_withCtx","previousRotation","getCharacterMaster","colorClass","selectedActionClass","rotationActionOnClick","removeItemOnClick","rows","updateRotation","_createTextVNode","teamMemberResult","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","for","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_67","rotationLength","inputOnChange","calculatorInput","energyCost","weaponImgSrc","currentWeapon","weaponRefine","refine","energyRechargeGls","onField","inputRowParticleEnemy","row","rowIndex","bgColorClass2","currentValues","reduce","c","columnIndex","inputRowParticle","rowImgSrc1","rowImgSrc1Class","rowImgSrc2","triggerName","particleRecharges","inputRowEnergy","burstCounts","replaceWeapons","weaponIndex","replaceWeaponImgSrc","replaceWeaponClass","replaceWeaponOnClick","combatLength","isOpenSupplyFromEnemy","supplyFromEnemy","message","isShowUsage","CHARACTER_E_DECREMENT_IN_BURST","entries","untilMap","actionName","delayArr","RECHARGE_ENERGY_SKILL","RECHARGE_ENERGY_BURST","RECHARGE_ENERGY_PASSIVE","RECHARGE_ENERGY_CONSTELLATION","RECHARGE_ENERGY_ATTACK","RECHARGE_ENERGY_WEAPON","RECHARGE_ENERGY_ARTIFACT","RECHARGE_PARTICLE_SKILL","RECHARGE_PARTICLE_PASSIVE","RECHARGE_PARTICLE_CONSTELLATION","RECHARGE_PARTICLE_FAVONIUS","RECHARGE_PARTICLE_RESONANCE","RECHARGE_PARTICLE_ENEMY","ATTACK_ENERGY_COUNT_OBJ","NORMAL_ATTACK_LENGTH_OBJ","ACTION_LENGTH_MAP","isRechargeKindEnergy","rechargeKind","isRechargeKindParticle","countN","isQing","countC","countE","untilAction","untilCount","clear","workMap","countQ","getOnFieldRate","NUMBER_OF_MEMBERS","memberNameArr","danArr","getNormalAttackDan","lengthList","preRotation","isNCPIgnoring","actionLength1","actionLength2","maxDan","dan","unitLength","j","multiple","ceil","lengthSum","sumVal","maxVal","memberNum","rate","getMemberResult","getDefaultMemberResult","memberArr","getCharacterDetail","","getCharacterInputValue","getStatsInputValue","CHARACTER_ENERGY_FUNC","()","constellationLevel","myEnergy","allEnergy","otherEnergy","herEnergies","()","skillLevel","er","messages2","burstLevel","somebodyEnergy","()","","","","","","nCount","","","","","","","","","","","","","","","","","qCount","doBreak","herIndex","herCm","","","","","","unit","unit2","","","geoCount","","","","","","","","","","","CHARACTER_PARTICLE_EXTRA_FUNC","onFields","myParticle","allParticle","","","herParticles","triggerCnt","ct","rindexArr","isRecorded","nxtCharacter","toIndex","WEAPON_ENERGY_FUNC","","","","weaponEnergySub_","","","","","","","weaponEnergySub_","","isInCt","getParticleByCharacter","resultMap","myIndex","eCount","cCount","num","resultVal","splitNumToArrByOnFieldRate","ousiaLength","isOusia","timeArr","curCharacter","delayActions","delayAction","setSkillParticleNumToArr","getParticleByCharacterExtra","func","ret","particles","getParticleByWeapon","getParticleByResonance","getEnergyByCharacter","energies","workResult","getEnergyByWeapon","getEnergyByArtifact","artifactSet4","getEnergyByAttack","denominator","hitCount","withC","workHitCount","dans","workDan","isNaN","energy","time","addNumToArr","nxtRotation","v","DEFAULT_ROTATION_LENGTH","DEFAULT_COMBAT_LENGTH","REPLACE_WEAPON_MAP","setupCharacterDetailMap","updateRotationLength","setupInput","getConstellation","eLength","qLength","memberIndex","","newLength","updateOnFields","setupInputRows","deep","newInput","initialWeapon","pushInputRowParticle","inputRows","newMessages","particle","initialValues","pushInputRowEnergy","newInputRowPacticle1","newInputRowPacticle2","newInputRowEnergy","newInputRowResonance","newinputRowParticleEnemy","energyByCharacter","particleByWeapon","energyByWeapon","energyByArtifact","energyByAttack","particleByResonance","myElement","input","burstCount","particleEnergy","characterMater","getWeaponMaster","artifactSetMater","resetInput","inputRow","draggable","ERCalculator","normalAttackActions","elementalSkillActions","actionId","selectedActionId","isCWith","CHARGED_WITH_NORMAL_WEAPON","CHARGED_WITH_NORMAL_CHARACTER","CHARGED_ONLY_CHARACTER","isSameMember","actions","actionArr","actionKey"],"sourceRoot":""}